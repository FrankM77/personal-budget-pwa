(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function O3(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Iy={exports:{}},Jf={};var tA;function P3(){if(tA)return Jf;tA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:e,type:r,key:o,ref:i!==void 0?i:null,props:a}}return Jf.Fragment=t,Jf.jsx=n,Jf.jsxs=n,Jf}var eA;function V3(){return eA||(eA=1,Iy.exports=P3()),Iy.exports}var _=V3(),ky={exports:{}},ee={};var nA;function j3(){if(nA)return ee;nA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),m=Symbol.iterator;function b(U){return U===null||typeof U!="object"?null:(U=m&&U[m]||U["@@iterator"],typeof U=="function"?U:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function T(U,Z,rt){this.props=U,this.context=Z,this.refs=E,this.updater=rt||S}T.prototype.isReactComponent={},T.prototype.setState=function(U,Z){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Z,"setState")},T.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function D(){}D.prototype=T.prototype;function I(U,Z,rt){this.props=U,this.context=Z,this.refs=E,this.updater=rt||S}var M=I.prototype=new D;M.constructor=I,w(M,T.prototype),M.isPureReactComponent=!0;var z=Array.isArray;function P(){}var A={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function k(U,Z,rt){var st=rt.ref;return{$$typeof:e,type:U,key:Z,ref:st!==void 0?st:null,props:rt}}function j(U,Z){return k(U.type,Z,U.props)}function L(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function B(U){var Z={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(rt){return Z[rt]})}var V=/\/+/g;function K(U,Z){return typeof U=="object"&&U!==null&&U.key!=null?B(""+U.key):Z.toString(36)}function Y(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(P,P):(U.status="pending",U.then(function(Z){U.status==="pending"&&(U.status="fulfilled",U.value=Z)},function(Z){U.status==="pending"&&(U.status="rejected",U.reason=Z)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function H(U,Z,rt,st,ht){var dt=typeof U;(dt==="undefined"||dt==="boolean")&&(U=null);var bt=!1;if(U===null)bt=!0;else switch(dt){case"bigint":case"string":case"number":bt=!0;break;case"object":switch(U.$$typeof){case e:case t:bt=!0;break;case h:return bt=U._init,H(bt(U._payload),Z,rt,st,ht)}}if(bt)return ht=ht(U),bt=st===""?"."+K(U,0):st,z(ht)?(rt="",bt!=null&&(rt=bt.replace(V,"$&/")+"/"),H(ht,Z,rt,"",function(Kt){return Kt})):ht!=null&&(L(ht)&&(ht=j(ht,rt+(ht.key==null||U&&U.key===ht.key?"":(""+ht.key).replace(V,"$&/")+"/")+bt)),Z.push(ht)),1;bt=0;var At=st===""?".":st+":";if(z(U))for(var Dt=0;Dt<U.length;Dt++)st=U[Dt],dt=At+K(st,Dt),bt+=H(st,Z,rt,dt,ht);else if(Dt=b(U),typeof Dt=="function")for(U=Dt.call(U),Dt=0;!(st=U.next()).done;)st=st.value,dt=At+K(st,Dt++),bt+=H(st,Z,rt,dt,ht);else if(dt==="object"){if(typeof U.then=="function")return H(Y(U),Z,rt,st,ht);throw Z=String(U),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return bt}function $(U,Z,rt){if(U==null)return U;var st=[],ht=0;return H(U,st,"","",function(dt){return Z.call(rt,dt,ht++)}),st}function et(U){if(U._status===-1){var Z=U._result;Z=Z(),Z.then(function(rt){(U._status===0||U._status===-1)&&(U._status=1,U._result=rt)},function(rt){(U._status===0||U._status===-1)&&(U._status=2,U._result=rt)}),U._status===-1&&(U._status=0,U._result=Z)}if(U._status===1)return U._result.default;throw U._result}var at=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},X={map:$,forEach:function(U,Z,rt){$(U,function(){Z.apply(this,arguments)},rt)},count:function(U){var Z=0;return $(U,function(){Z++}),Z},toArray:function(U){return $(U,function(Z){return Z})||[]},only:function(U){if(!L(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return ee.Activity=g,ee.Children=X,ee.Component=T,ee.Fragment=n,ee.Profiler=i,ee.PureComponent=I,ee.StrictMode=r,ee.Suspense=u,ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,ee.__COMPILER_RUNTIME={__proto__:null,c:function(U){return A.H.useMemoCache(U)}},ee.cache=function(U){return function(){return U.apply(null,arguments)}},ee.cacheSignal=function(){return null},ee.cloneElement=function(U,Z,rt){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var st=w({},U.props),ht=U.key;if(Z!=null)for(dt in Z.key!==void 0&&(ht=""+Z.key),Z)!C.call(Z,dt)||dt==="key"||dt==="__self"||dt==="__source"||dt==="ref"&&Z.ref===void 0||(st[dt]=Z[dt]);var dt=arguments.length-2;if(dt===1)st.children=rt;else if(1<dt){for(var bt=Array(dt),At=0;At<dt;At++)bt[At]=arguments[At+2];st.children=bt}return k(U.type,ht,st)},ee.createContext=function(U){return U={$$typeof:o,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:a,_context:U},U},ee.createElement=function(U,Z,rt){var st,ht={},dt=null;if(Z!=null)for(st in Z.key!==void 0&&(dt=""+Z.key),Z)C.call(Z,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(ht[st]=Z[st]);var bt=arguments.length-2;if(bt===1)ht.children=rt;else if(1<bt){for(var At=Array(bt),Dt=0;Dt<bt;Dt++)At[Dt]=arguments[Dt+2];ht.children=At}if(U&&U.defaultProps)for(st in bt=U.defaultProps,bt)ht[st]===void 0&&(ht[st]=bt[st]);return k(U,dt,ht)},ee.createRef=function(){return{current:null}},ee.forwardRef=function(U){return{$$typeof:c,render:U}},ee.isValidElement=L,ee.lazy=function(U){return{$$typeof:h,_payload:{_status:-1,_result:U},_init:et}},ee.memo=function(U,Z){return{$$typeof:d,type:U,compare:Z===void 0?null:Z}},ee.startTransition=function(U){var Z=A.T,rt={};A.T=rt;try{var st=U(),ht=A.S;ht!==null&&ht(rt,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(P,at)}catch(dt){at(dt)}finally{Z!==null&&rt.types!==null&&(Z.types=rt.types),A.T=Z}},ee.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},ee.use=function(U){return A.H.use(U)},ee.useActionState=function(U,Z,rt){return A.H.useActionState(U,Z,rt)},ee.useCallback=function(U,Z){return A.H.useCallback(U,Z)},ee.useContext=function(U){return A.H.useContext(U)},ee.useDebugValue=function(){},ee.useDeferredValue=function(U,Z){return A.H.useDeferredValue(U,Z)},ee.useEffect=function(U,Z){return A.H.useEffect(U,Z)},ee.useEffectEvent=function(U){return A.H.useEffectEvent(U)},ee.useId=function(){return A.H.useId()},ee.useImperativeHandle=function(U,Z,rt){return A.H.useImperativeHandle(U,Z,rt)},ee.useInsertionEffect=function(U,Z){return A.H.useInsertionEffect(U,Z)},ee.useLayoutEffect=function(U,Z){return A.H.useLayoutEffect(U,Z)},ee.useMemo=function(U,Z){return A.H.useMemo(U,Z)},ee.useOptimistic=function(U,Z){return A.H.useOptimistic(U,Z)},ee.useReducer=function(U,Z,rt){return A.H.useReducer(U,Z,rt)},ee.useRef=function(U){return A.H.useRef(U)},ee.useState=function(U){return A.H.useState(U)},ee.useSyncExternalStore=function(U,Z,rt){return A.H.useSyncExternalStore(U,Z,rt)},ee.useTransition=function(){return A.H.useTransition()},ee.version="19.2.0",ee}var rA;function sx(){return rA||(rA=1,ky.exports=j3()),ky.exports}var q=sx();const ng=O3(q);var Ny={exports:{}},td={},My={exports:{}},Oy={};var iA;function z3(){return iA||(iA=1,(function(e){function t(H,$){var et=H.length;H.push($);t:for(;0<et;){var at=et-1>>>1,X=H[at];if(0<i(X,$))H[at]=$,H[et]=X,et=at;else break t}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var $=H[0],et=H.pop();if(et!==$){H[0]=et;t:for(var at=0,X=H.length,U=X>>>1;at<U;){var Z=2*(at+1)-1,rt=H[Z],st=Z+1,ht=H[st];if(0>i(rt,et))st<X&&0>i(ht,rt)?(H[at]=ht,H[st]=et,at=st):(H[at]=rt,H[Z]=et,at=Z);else if(st<X&&0>i(ht,et))H[at]=ht,H[st]=et,at=st;else break t}}return $}function i(H,$){var et=H.sortIndex-$.sortIndex;return et!==0?et:H.id-$.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var u=[],d=[],h=1,g=null,m=3,b=!1,S=!1,w=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function M(H){for(var $=n(d);$!==null;){if($.callback===null)r(d);else if($.startTime<=H)r(d),$.sortIndex=$.expirationTime,t(u,$);else break;$=n(d)}}function z(H){if(w=!1,M(H),!S)if(n(u)!==null)S=!0,P||(P=!0,B());else{var $=n(d);$!==null&&Y(z,$.startTime-H)}}var P=!1,A=-1,C=5,k=-1;function j(){return E?!0:!(e.unstable_now()-k<C)}function L(){if(E=!1,P){var H=e.unstable_now();k=H;var $=!0;try{t:{S=!1,w&&(w=!1,D(A),A=-1),b=!0;var et=m;try{e:{for(M(H),g=n(u);g!==null&&!(g.expirationTime>H&&j());){var at=g.callback;if(typeof at=="function"){g.callback=null,m=g.priorityLevel;var X=at(g.expirationTime<=H);if(H=e.unstable_now(),typeof X=="function"){g.callback=X,M(H),$=!0;break e}g===n(u)&&r(u),M(H)}else r(u);g=n(u)}if(g!==null)$=!0;else{var U=n(d);U!==null&&Y(z,U.startTime-H),$=!1}}break t}finally{g=null,m=et,b=!1}$=void 0}}finally{$?B():P=!1}}}var B;if(typeof I=="function")B=function(){I(L)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,K=V.port2;V.port1.onmessage=L,B=function(){K.postMessage(null)}}else B=function(){T(L,0)};function Y(H,$){A=T(function(){H(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(H){switch(m){case 1:case 2:case 3:var $=3;break;default:$=m}var et=m;m=$;try{return H()}finally{m=et}},e.unstable_requestPaint=function(){E=!0},e.unstable_runWithPriority=function(H,$){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var et=m;m=H;try{return $()}finally{m=et}},e.unstable_scheduleCallback=function(H,$,et){var at=e.unstable_now();switch(typeof et=="object"&&et!==null?(et=et.delay,et=typeof et=="number"&&0<et?at+et:at):et=at,H){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=et+X,H={id:h++,callback:$,priorityLevel:H,startTime:et,expirationTime:X,sortIndex:-1},et>at?(H.sortIndex=et,t(d,H),n(u)===null&&H===n(d)&&(w?(D(A),A=-1):w=!0,Y(z,et-at))):(H.sortIndex=X,t(u,H),S||b||(S=!0,P||(P=!0,B()))),H},e.unstable_shouldYield=j,e.unstable_wrapCallback=function(H){var $=m;return function(){var et=m;m=$;try{return H.apply(this,arguments)}finally{m=et}}}})(Oy)),Oy}var aA;function L3(){return aA||(aA=1,My.exports=z3()),My.exports}var Py={exports:{}},fr={};var sA;function B3(){if(sA)return fr;sA=1;var e=sx();function t(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,d,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:u,containerInfo:d,implementation:h}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return fr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,fr.createPortal=function(u,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return a(u,d,null,h)},fr.flushSync=function(u){var d=o.T,h=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=h,r.d.f()}},fr.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},fr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},fr.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var h=d.as,g=c(h,d.crossOrigin),m=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:m,fetchPriority:b}):h==="script"&&r.d.X(u,{crossOrigin:g,integrity:m,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},fr.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=c(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},fr.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,g=c(h,d.crossOrigin);r.d.L(u,h,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},fr.preloadModule=function(u,d){if(typeof u=="string")if(d){var h=c(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},fr.requestFormReset=function(u){r.d.r(u)},fr.unstable_batchedUpdates=function(u,d){return u(d)},fr.useFormState=function(u,d,h){return o.H.useFormState(u,d,h)},fr.useFormStatus=function(){return o.H.useHostTransitionStatus()},fr.version="19.2.0",fr}var oA;function U3(){if(oA)return Py.exports;oA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Py.exports=B3(),Py.exports}var lA;function F3(){if(lA)return td;lA=1;var e=L3(),t=sx(),n=U3();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,f=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(f=l.return),s=l.return;while(s)}return l.tag===3?f:null}function o(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function c(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(r(188))}function d(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(r(188));return l!==s?null:s}for(var f=s,p=l;;){var y=f.return;if(y===null)break;var x=y.alternate;if(x===null){if(p=y.return,p!==null){f=p;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===f)return u(y),s;if(x===p)return u(y),l;x=x.sibling}throw Error(r(188))}if(f.return!==p.return)f=y,p=x;else{for(var N=!1,F=y.child;F;){if(F===f){N=!0,f=y,p=x;break}if(F===p){N=!0,p=y,f=x;break}F=F.sibling}if(!N){for(F=x.child;F;){if(F===f){N=!0,f=x,p=y;break}if(F===p){N=!0,p=x,f=y;break}F=F.sibling}if(!N)throw Error(r(189))}}if(f.alternate!==p)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?s:l}function h(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=h(s),l!==null)return l;s=s.sibling}return null}var g=Object.assign,m=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),I=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function B(s){return s===null||typeof s!="object"?null:(s=L&&s[L]||s["@@iterator"],typeof s=="function"?s:null)}var V=Symbol.for("react.client.reference");function K(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===V?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case w:return"Fragment";case T:return"Profiler";case E:return"StrictMode";case z:return"Suspense";case P:return"SuspenseList";case k:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case S:return"Portal";case I:return s.displayName||"Context";case D:return(s._context.displayName||"Context")+".Consumer";case M:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case A:return l=s.displayName||null,l!==null?l:K(s.type)||"Memo";case C:l=s._payload,s=s._init;try{return K(s(l))}catch{}}return null}var Y=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et={pending:!1,data:null,method:null,action:null},at=[],X=-1;function U(s){return{current:s}}function Z(s){0>X||(s.current=at[X],at[X]=null,X--)}function rt(s,l){X++,at[X]=s.current,s.current=l}var st=U(null),ht=U(null),dt=U(null),bt=U(null);function At(s,l){switch(rt(dt,l),rt(ht,s),rt(st,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?wT(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=wT(l),s=ET(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Z(st),rt(st,s)}function Dt(){Z(st),Z(ht),Z(dt)}function Kt(s){s.memoizedState!==null&&rt(bt,s);var l=st.current,f=ET(l,s.type);l!==f&&(rt(ht,s),rt(st,f))}function Et(s){ht.current===s&&(Z(st),Z(ht)),bt.current===s&&(Z(bt),Wf._currentValue=et)}var Rt,le;function Vt(s){if(Rt===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);Rt=l&&l[1]||"",le=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rt+s+le}var qt=!1;function Gt(s,l){if(!s||qt)return"";qt=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(l){var vt=function(){throw Error()};if(Object.defineProperty(vt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(vt,[])}catch(ft){var ct=ft}Reflect.construct(s,[],vt)}else{try{vt.call()}catch(ft){ct=ft}s.call(vt.prototype)}}else{try{throw Error()}catch(ft){ct=ft}(vt=s())&&typeof vt.catch=="function"&&vt.catch(function(){})}}catch(ft){if(ft&&ct&&typeof ft.stack=="string")return[ft.stack,ct.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=p.DetermineComponentFrameRoot(),N=x[0],F=x[1];if(N&&F){var W=N.split(`
`),lt=F.split(`
`);for(y=p=0;p<W.length&&!W[p].includes("DetermineComponentFrameRoot");)p++;for(;y<lt.length&&!lt[y].includes("DetermineComponentFrameRoot");)y++;if(p===W.length||y===lt.length)for(p=W.length-1,y=lt.length-1;1<=p&&0<=y&&W[p]!==lt[y];)y--;for(;1<=p&&0<=y;p--,y--)if(W[p]!==lt[y]){if(p!==1||y!==1)do if(p--,y--,0>y||W[p]!==lt[y]){var pt=`
`+W[p].replace(" at new "," at ");return s.displayName&&pt.includes("<anonymous>")&&(pt=pt.replace("<anonymous>",s.displayName)),pt}while(1<=p&&0<=y);break}}}finally{qt=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?Vt(f):""}function ce(s,l){switch(s.tag){case 26:case 27:case 5:return Vt(s.type);case 16:return Vt("Lazy");case 13:return s.child!==l&&l!==null?Vt("Suspense Fallback"):Vt("Suspense");case 19:return Vt("SuspenseList");case 0:case 15:return Gt(s.type,!1);case 11:return Gt(s.type.render,!1);case 1:return Gt(s.type,!0);case 31:return Vt("Activity");default:return""}}function be(s){try{var l="",f=null;do l+=ce(s,f),f=s,s=s.return;while(s);return l}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var Ot=Object.prototype.hasOwnProperty,Lt=e.unstable_scheduleCallback,Ne=e.unstable_cancelCallback,Qe=e.unstable_shouldYield,xe=e.unstable_requestPaint,ue=e.unstable_now,Ie=e.unstable_getCurrentPriorityLevel,Wn=e.unstable_ImmediatePriority,or=e.unstable_UserBlockingPriority,kr=e.unstable_NormalPriority,Nr=e.unstable_LowPriority,Ps=e.unstable_IdlePriority,Pi=e.log,ea=e.unstable_setDisableYieldValue,xr=null,on=null;function qn(s){if(typeof Pi=="function"&&ea(s),on&&typeof on.setStrictMode=="function")try{on.setStrictMode(xr,s)}catch{}}var $e=Math.clz32?Math.clz32:ra,Vs=Math.log,na=Math.LN2;function ra(s){return s>>>=0,s===0?32:31-(Vs(s)/na|0)|0}var St=256,It=262144,fe=4194304;function we(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ln(s,l,f){var p=s.pendingLanes;if(p===0)return 0;var y=0,x=s.suspendedLanes,N=s.pingedLanes;s=s.warmLanes;var F=p&134217727;return F!==0?(p=F&~x,p!==0?y=we(p):(N&=F,N!==0?y=we(N):f||(f=F&~s,f!==0&&(y=we(f))))):(F=p&~x,F!==0?y=we(F):N!==0?y=we(N):f||(f=p&~s,f!==0&&(y=we(f)))),y===0?0:l!==0&&l!==y&&(l&x)===0&&(x=y&-y,f=l&-l,x>=f||x===32&&(f&4194048)!==0)?l:y}function pn(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function ui(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function se(){var s=fe;return fe<<=1,(fe&62914560)===0&&(fe=4194304),s}function gn(s){for(var l=[],f=0;31>f;f++)l.push(s);return l}function Vn(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function lr(s,l,f,p,y,x){var N=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var F=s.entanglements,W=s.expirationTimes,lt=s.hiddenUpdates;for(f=N&~f;0<f;){var pt=31-$e(f),vt=1<<pt;F[pt]=0,W[pt]=-1;var ct=lt[pt];if(ct!==null)for(lt[pt]=null,pt=0;pt<ct.length;pt++){var ft=ct[pt];ft!==null&&(ft.lane&=-536870913)}f&=~vt}p!==0&&Mr(s,p,0),x!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=x&~(N&~l))}function Mr(s,l,f){s.pendingLanes|=l,s.suspendedLanes&=~l;var p=31-$e(l);s.entangledLanes|=l,s.entanglements[p]=s.entanglements[p]|1073741824|f&261930}function _r(s,l){var f=s.entangledLanes|=l;for(s=s.entanglements;f;){var p=31-$e(f),y=1<<p;y&l|s[p]&l&&(s[p]|=l),f&=~y}}function mn(s,l){var f=l&-l;return f=(f&42)!==0?1:Sr(f),(f&(s.suspendedLanes|l))!==0?0:f}function Sr(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function cr(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function el(){var s=$.p;return s!==0?s:(s=window.event,s===void 0?32:YT(s.type))}function ur(s,l){var f=$.p;try{return $.p=s,l()}finally{$.p=f}}var wr=Math.random().toString(36).slice(2),Ye="__reactFiber$"+wr,Hn="__reactProps$"+wr,ia="__reactContainer$"+wr,ac="__reactEvents$"+wr,Vv="__reactListeners$"+wr,Ph="__reactHandles$"+wr,Vh="__reactResources$"+wr,aa="__reactMarker$"+wr;function sc(s){delete s[Ye],delete s[Hn],delete s[ac],delete s[Vv],delete s[Ph]}function sa(s){var l=s[Ye];if(l)return l;for(var f=s.parentNode;f;){if(l=f[ia]||f[Ye]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(s=kT(s);s!==null;){if(f=s[Ye])return f;s=kT(s)}return l}s=f,f=s.parentNode}return null}function fi(s){if(s=s[Ye]||s[ia]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function Qr(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function oa(s){var l=s[Vh];return l||(l=s[Vh]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function wn(s){s[aa]=!0}var ef=new Set,nf={};function la(s,l){ca(s,l),ca(s+"Capture",l)}function ca(s,l){for(nf[s]=l,s=0;s<l.length;s++)ef.add(l[s])}var rf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),af={},sf={};function jh(s){return Ot.call(sf,s)?!0:Ot.call(af,s)?!1:rf.test(s)?sf[s]=!0:(af[s]=!0,!1)}function oc(s,l,f){if(jh(l))if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var p=l.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+f)}}function Zr(s,l,f){if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+f)}}function En(s,l,f,p){if(p===null)s.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(f);return}s.setAttributeNS(l,f,""+p)}}function $n(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function js(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function of(s,l,f){var p=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var y=p.get,x=p.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return y.call(this)},set:function(N){f=""+N,x.call(this,N)}}),Object.defineProperty(s,l,{enumerable:p.enumerable}),{getValue:function(){return f},setValue:function(N){f=""+N},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Me(s){if(!s._valueTracker){var l=js(s)?"checked":"value";s._valueTracker=of(s,l,""+s[l])}}function nl(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var f=l.getValue(),p="";return s&&(p=js(s)?s.checked?"true":"false":s.value),s=p,s!==f?(l.setValue(s),!0):!1}function ua(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var rl=/[\n"\\]/g;function Or(s){return s.replace(rl,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function lc(s,l,f,p,y,x,N,F){s.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?s.type=N:s.removeAttribute("type"),l!=null?N==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+$n(l)):s.value!==""+$n(l)&&(s.value=""+$n(l)):N!=="submit"&&N!=="reset"||s.removeAttribute("value"),l!=null?lf(s,N,$n(l)):f!=null?lf(s,N,$n(f)):p!=null&&s.removeAttribute("value"),y==null&&x!=null&&(s.defaultChecked=!!x),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?s.name=""+$n(F):s.removeAttribute("name")}function zh(s,l,f,p,y,x,N,F){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.type=x),l!=null||f!=null){if(!(x!=="submit"&&x!=="reset"||l!=null)){Me(s);return}f=f!=null?""+$n(f):"",l=l!=null?""+$n(l):f,F||l===s.value||(s.value=l),s.defaultValue=l}p=p??y,p=typeof p!="function"&&typeof p!="symbol"&&!!p,s.checked=F?s.checked:!!p,s.defaultChecked=!!p,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(s.name=N),Me(s)}function lf(s,l,f){l==="number"&&ua(s.ownerDocument)===s||s.defaultValue===""+f||(s.defaultValue=""+f)}function zs(s,l,f,p){if(s=s.options,l){l={};for(var y=0;y<f.length;y++)l["$"+f[y]]=!0;for(f=0;f<s.length;f++)y=l.hasOwnProperty("$"+s[f].value),s[f].selected!==y&&(s[f].selected=y),y&&p&&(s[f].defaultSelected=!0)}else{for(f=""+$n(f),l=null,y=0;y<s.length;y++){if(s[y].value===f){s[y].selected=!0,p&&(s[y].defaultSelected=!0);return}l!==null||s[y].disabled||(l=s[y])}l!==null&&(l.selected=!0)}}function Lh(s,l,f){if(l!=null&&(l=""+$n(l),l!==s.value&&(s.value=l),f==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=f!=null?""+$n(f):""}function Ls(s,l,f,p){if(l==null){if(p!=null){if(f!=null)throw Error(r(92));if(Y(p)){if(1<p.length)throw Error(r(93));p=p[0]}f=p}f==null&&(f=""),l=f}f=$n(l),s.defaultValue=f,p=s.textContent,p===f&&p!==""&&p!==null&&(s.value=p),Me(s)}function Pr(s,l){if(l){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=l;return}}s.textContent=l}var Bh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cf(s,l,f){var p=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?p?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":p?s.setProperty(l,f):typeof f!="number"||f===0||Bh.has(l)?l==="float"?s.cssFloat=f:s[l]=(""+f).trim():s[l]=f+"px"}function uf(s,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,f!=null){for(var p in f)!f.hasOwnProperty(p)||l!=null&&l.hasOwnProperty(p)||(p.indexOf("--")===0?s.setProperty(p,""):p==="float"?s.cssFloat="":s[p]="");for(var y in l)p=l[y],l.hasOwnProperty(y)&&f[y]!==p&&cf(s,y,p)}else for(var x in l)l.hasOwnProperty(x)&&cf(s,x,l[x])}function cc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function uc(s){return Bs.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Vi(){}var ff=null;function di(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Us=null,fa=null;function il(s){var l=fi(s);if(l&&(s=l.stateNode)){var f=s[Hn]||null;t:switch(s=l.stateNode,l.type){case"input":if(lc(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Or(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var p=f[l];if(p!==s&&p.form===s.form){var y=p[Hn]||null;if(!y)throw Error(r(90));lc(p,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(l=0;l<f.length;l++)p=f[l],p.form===s.form&&nl(p)}break t;case"textarea":Lh(s,f.value,f.defaultValue);break t;case"select":l=f.value,l!=null&&zs(s,!!f.multiple,l,!1)}}}var fc=!1;function Fs(s,l,f){if(fc)return s(l,f);fc=!0;try{var p=s(l);return p}finally{if(fc=!1,(Us!==null||fa!==null)&&(Op(),Us&&(l=Us,s=fa,fa=Us=null,il(l),s)))for(l=0;l<s.length;l++)il(s[l])}}function ji(s,l){var f=s.stateNode;if(f===null)return null;var p=f[Hn]||null;if(p===null)return null;f=p[l];t:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break t;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),al=!1;if(hi)try{var je={};Object.defineProperty(je,"passive",{get:function(){al=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch{al=!1}var da=null,df=null,sl=null;function hf(){if(sl)return sl;var s,l=df,f=l.length,p,y="value"in da?da.value:da.textContent,x=y.length;for(s=0;s<f&&l[s]===y[s];s++);var N=f-s;for(p=1;p<=N&&l[f-p]===y[x-p];p++);return sl=y.slice(s,1<p?1-p:void 0)}function ol(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function $a(){return!0}function zi(){return!1}function Kn(s){function l(f,p,y,x,N){this._reactName=f,this._targetInst=y,this.type=p,this.nativeEvent=x,this.target=N,this.currentTarget=null;for(var F in s)s.hasOwnProperty(F)&&(f=s[F],this[F]=f?f(x):x[F]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?$a:zi,this.isPropagationStopped=zi,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=$a)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=$a)},persist:function(){},isPersistent:$a}),l}var Ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ha=Kn(Ya),Gs=g({},Ya,{view:0,detail:0}),pf=Kn(Gs),qs,dc,pa,hc=g({},Gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==pa&&(pa&&s.type==="mousemove"?(qs=s.screenX-pa.screenX,dc=s.screenY-pa.screenY):dc=qs=0,pa=s),qs)},movementY:function(s){return"movementY"in s?s.movementY:dc}}),gf=Kn(hc),ll=g({},hc,{dataTransfer:0}),Fh=Kn(ll),Gh=g({},Gs,{relatedTarget:0}),cl=Kn(Gh),mf=g({},Ya,{animationName:0,elapsedTime:0,pseudoElement:0}),qh=Kn(mf),pc=g({},Ya,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Hh=Kn(pc),$h=g({},Ya,{data:0}),ga=Kn($h),Yh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kh(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=Wh[s])?!!l[s]:!1}function Hs(){return Kh}var Er=g({},Gs,{key:function(s){if(s.key){var l=Yh[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=ol(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Xh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hs,charCode:function(s){return s.type==="keypress"?ol(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ol(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Qh=Kn(Er),Zh=g({},hc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xa=Kn(Zh),v=g({},Gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hs}),R=Kn(v),O=g({},Ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),G=Kn(O),it=g({},hc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ut=Kn(it),Tt=g({},Ya,{newState:0,oldState:0}),re=Kn(Tt),vn=[9,13,27,32],Re=hi&&"CompositionEvent"in window,Ze=null;hi&&"documentMode"in document&&(Ze=document.documentMode);var pi=hi&&"TextEvent"in window&&!Ze,ma=hi&&(!Re||Ze&&8<Ze&&11>=Ze),Li=" ",Bi=!1;function ul(s,l){switch(s){case"keyup":return vn.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gc(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var mc=!1;function iP(s,l){switch(s){case"compositionend":return gc(l);case"keypress":return l.which!==32?null:(Bi=!0,Li);case"textInput":return s=l.data,s===Li&&Bi?null:s;default:return null}}function aP(s,l){if(mc)return s==="compositionend"||!Re&&ul(s,l)?(s=hf(),sl=df=da=null,mc=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return ma&&l.locale!=="ko"?null:l.data;default:return null}}var sP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function OS(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!sP[s.type]:l==="textarea"}function PS(s,l,f,p){Us?fa?fa.push(p):fa=[p]:Us=p,l=Up(l,"onChange"),0<l.length&&(f=new ha("onChange","change",null,f,p),s.push({event:f,listeners:l}))}var vf=null,yf=null;function oP(s){vT(s,0)}function Jh(s){var l=Qr(s);if(nl(l))return s}function VS(s,l){if(s==="change")return l}var jS=!1;if(hi){var jv;if(hi){var zv="oninput"in document;if(!zv){var zS=document.createElement("div");zS.setAttribute("oninput","return;"),zv=typeof zS.oninput=="function"}jv=zv}else jv=!1;jS=jv&&(!document.documentMode||9<document.documentMode)}function LS(){vf&&(vf.detachEvent("onpropertychange",BS),yf=vf=null)}function BS(s){if(s.propertyName==="value"&&Jh(yf)){var l=[];PS(l,yf,s,di(s)),Fs(oP,l)}}function lP(s,l,f){s==="focusin"?(LS(),vf=l,yf=f,vf.attachEvent("onpropertychange",BS)):s==="focusout"&&LS()}function cP(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Jh(yf)}function uP(s,l){if(s==="click")return Jh(l)}function fP(s,l){if(s==="input"||s==="change")return Jh(l)}function dP(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var Jr=typeof Object.is=="function"?Object.is:dP;function bf(s,l){if(Jr(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var f=Object.keys(s),p=Object.keys(l);if(f.length!==p.length)return!1;for(p=0;p<f.length;p++){var y=f[p];if(!Ot.call(l,y)||!Jr(s[y],l[y]))return!1}return!0}function US(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function FS(s,l){var f=US(s);s=0;for(var p;f;){if(f.nodeType===3){if(p=s+f.textContent.length,s<=l&&p>=l)return{node:f,offset:l-s};s=p}t:{for(;f;){if(f.nextSibling){f=f.nextSibling;break t}f=f.parentNode}f=void 0}f=US(f)}}function GS(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?GS(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function qS(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=ua(s.document);l instanceof s.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)s=l.contentWindow;else break;l=ua(s.document)}return l}function Lv(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var hP=hi&&"documentMode"in document&&11>=document.documentMode,vc=null,Bv=null,xf=null,Uv=!1;function HS(s,l,f){var p=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Uv||vc==null||vc!==ua(p)||(p=vc,"selectionStart"in p&&Lv(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),xf&&bf(xf,p)||(xf=p,p=Up(Bv,"onSelect"),0<p.length&&(l=new ha("onSelect","select",null,l,f),s.push({event:l,listeners:p}),l.target=vc)))}function fl(s,l){var f={};return f[s.toLowerCase()]=l.toLowerCase(),f["Webkit"+s]="webkit"+l,f["Moz"+s]="moz"+l,f}var yc={animationend:fl("Animation","AnimationEnd"),animationiteration:fl("Animation","AnimationIteration"),animationstart:fl("Animation","AnimationStart"),transitionrun:fl("Transition","TransitionRun"),transitionstart:fl("Transition","TransitionStart"),transitioncancel:fl("Transition","TransitionCancel"),transitionend:fl("Transition","TransitionEnd")},Fv={},$S={};hi&&($S=document.createElement("div").style,"AnimationEvent"in window||(delete yc.animationend.animation,delete yc.animationiteration.animation,delete yc.animationstart.animation),"TransitionEvent"in window||delete yc.transitionend.transition);function dl(s){if(Fv[s])return Fv[s];if(!yc[s])return s;var l=yc[s],f;for(f in l)if(l.hasOwnProperty(f)&&f in $S)return Fv[s]=l[f];return s}var YS=dl("animationend"),XS=dl("animationiteration"),WS=dl("animationstart"),pP=dl("transitionrun"),gP=dl("transitionstart"),mP=dl("transitioncancel"),KS=dl("transitionend"),QS=new Map,Gv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gv.push("scrollEnd");function Ui(s,l){QS.set(s,l),la(l,[s])}var tp=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},gi=[],bc=0,qv=0;function ep(){for(var s=bc,l=qv=bc=0;l<s;){var f=gi[l];gi[l++]=null;var p=gi[l];gi[l++]=null;var y=gi[l];gi[l++]=null;var x=gi[l];if(gi[l++]=null,p!==null&&y!==null){var N=p.pending;N===null?y.next=y:(y.next=N.next,N.next=y),p.pending=y}x!==0&&ZS(f,y,x)}}function np(s,l,f,p){gi[bc++]=s,gi[bc++]=l,gi[bc++]=f,gi[bc++]=p,qv|=p,s.lanes|=p,s=s.alternate,s!==null&&(s.lanes|=p)}function Hv(s,l,f,p){return np(s,l,f,p),rp(s)}function hl(s,l){return np(s,null,null,l),rp(s)}function ZS(s,l,f){s.lanes|=f;var p=s.alternate;p!==null&&(p.lanes|=f);for(var y=!1,x=s.return;x!==null;)x.childLanes|=f,p=x.alternate,p!==null&&(p.childLanes|=f),x.tag===22&&(s=x.stateNode,s===null||s._visibility&1||(y=!0)),s=x,x=x.return;return s.tag===3?(x=s.stateNode,y&&l!==null&&(y=31-$e(f),s=x.hiddenUpdates,p=s[y],p===null?s[y]=[l]:p.push(l),l.lane=f|536870912),x):null}function rp(s){if(50<Ff)throw Ff=0,ty=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var xc={};function vP(s,l,f,p){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ti(s,l,f,p){return new vP(s,l,f,p)}function $v(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Wa(s,l){var f=s.alternate;return f===null?(f=ti(s.tag,l,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=l,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&65011712,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,l=s.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function JS(s,l){s.flags&=65011714;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,l=f.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function ip(s,l,f,p,y,x){var N=0;if(p=s,typeof s=="function")$v(s)&&(N=1);else if(typeof s=="string")N=S3(s,f,st.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case k:return s=ti(31,f,l,y),s.elementType=k,s.lanes=x,s;case w:return pl(f.children,y,x,l);case E:N=8,y|=24;break;case T:return s=ti(12,f,l,y|2),s.elementType=T,s.lanes=x,s;case z:return s=ti(13,f,l,y),s.elementType=z,s.lanes=x,s;case P:return s=ti(19,f,l,y),s.elementType=P,s.lanes=x,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case I:N=10;break t;case D:N=9;break t;case M:N=11;break t;case A:N=14;break t;case C:N=16,p=null;break t}N=29,f=Error(r(130,s===null?"null":typeof s,"")),p=null}return l=ti(N,f,l,y),l.elementType=s,l.type=p,l.lanes=x,l}function pl(s,l,f,p){return s=ti(7,s,p,l),s.lanes=f,s}function Yv(s,l,f){return s=ti(6,s,null,l),s.lanes=f,s}function tw(s){var l=ti(18,null,null,0);return l.stateNode=s,l}function Xv(s,l,f){return l=ti(4,s.children!==null?s.children:[],s.key,l),l.lanes=f,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var ew=new WeakMap;function mi(s,l){if(typeof s=="object"&&s!==null){var f=ew.get(s);return f!==void 0?f:(l={value:s,source:l,stack:be(l)},ew.set(s,l),l)}return{value:s,source:l,stack:be(l)}}var _c=[],Sc=0,ap=null,_f=0,vi=[],yi=0,$s=null,va=1,ya="";function Ka(s,l){_c[Sc++]=_f,_c[Sc++]=ap,ap=s,_f=l}function nw(s,l,f){vi[yi++]=va,vi[yi++]=ya,vi[yi++]=$s,$s=s;var p=va;s=ya;var y=32-$e(p)-1;p&=~(1<<y),f+=1;var x=32-$e(l)+y;if(30<x){var N=y-y%5;x=(p&(1<<N)-1).toString(32),p>>=N,y-=N,va=1<<32-$e(l)+y|f<<y|p,ya=x+s}else va=1<<x|f<<y|p,ya=s}function Wv(s){s.return!==null&&(Ka(s,1),nw(s,1,0))}function Kv(s){for(;s===ap;)ap=_c[--Sc],_c[Sc]=null,_f=_c[--Sc],_c[Sc]=null;for(;s===$s;)$s=vi[--yi],vi[yi]=null,ya=vi[--yi],vi[yi]=null,va=vi[--yi],vi[yi]=null}function rw(s,l){vi[yi++]=va,vi[yi++]=ya,vi[yi++]=$s,va=l.id,ya=l.overflow,$s=s}var Qn=null,Xe=null,_e=!1,Ys=null,bi=!1,Qv=Error(r(519));function Xs(s){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Sf(mi(l,s)),Qv}function iw(s){var l=s.stateNode,f=s.type,p=s.memoizedProps;switch(l[Ye]=s,l[Hn]=p,f){case"dialog":he("cancel",l),he("close",l);break;case"iframe":case"object":case"embed":he("load",l);break;case"video":case"audio":for(f=0;f<qf.length;f++)he(qf[f],l);break;case"source":he("error",l);break;case"img":case"image":case"link":he("error",l),he("load",l);break;case"details":he("toggle",l);break;case"input":he("invalid",l),zh(l,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":he("invalid",l);break;case"textarea":he("invalid",l),Ls(l,p.value,p.defaultValue,p.children)}f=p.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||p.suppressHydrationWarning===!0||_T(l.textContent,f)?(p.popover!=null&&(he("beforetoggle",l),he("toggle",l)),p.onScroll!=null&&he("scroll",l),p.onScrollEnd!=null&&he("scrollend",l),p.onClick!=null&&(l.onclick=Vi),l=!0):l=!1,l||Xs(s,!0)}function aw(s){for(Qn=s.return;Qn;)switch(Qn.tag){case 5:case 31:case 13:bi=!1;return;case 27:case 3:bi=!0;return;default:Qn=Qn.return}}function wc(s){if(s!==Qn)return!1;if(!_e)return aw(s),_e=!0,!1;var l=s.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=s.type,f=!(f!=="form"&&f!=="button")||gy(s.type,s.memoizedProps)),f=!f),f&&Xe&&Xs(s),aw(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Xe=IT(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Xe=IT(s)}else l===27?(l=Xe,lo(s.type)?(s=xy,xy=null,Xe=s):Xe=l):Xe=Qn?_i(s.stateNode.nextSibling):null;return!0}function gl(){Xe=Qn=null,_e=!1}function Zv(){var s=Ys;return s!==null&&(Lr===null?Lr=s:Lr.push.apply(Lr,s),Ys=null),s}function Sf(s){Ys===null?Ys=[s]:Ys.push(s)}var Jv=U(null),ml=null,Qa=null;function Ws(s,l,f){rt(Jv,l._currentValue),l._currentValue=f}function Za(s){s._currentValue=Jv.current,Z(Jv)}function t0(s,l,f){for(;s!==null;){var p=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),s===f)break;s=s.return}}function e0(s,l,f,p){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var x=y.dependencies;if(x!==null){var N=y.child;x=x.firstContext;t:for(;x!==null;){var F=x;x=y;for(var W=0;W<l.length;W++)if(F.context===l[W]){x.lanes|=f,F=x.alternate,F!==null&&(F.lanes|=f),t0(x.return,f,s),p||(N=null);break t}x=F.next}}else if(y.tag===18){if(N=y.return,N===null)throw Error(r(341));N.lanes|=f,x=N.alternate,x!==null&&(x.lanes|=f),t0(N,f,s),N=null}else N=y.child;if(N!==null)N.return=y;else for(N=y;N!==null;){if(N===s){N=null;break}if(y=N.sibling,y!==null){y.return=N.return,N=y;break}N=N.return}y=N}}function Ec(s,l,f,p){s=null;for(var y=l,x=!1;y!==null;){if(!x){if((y.flags&524288)!==0)x=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var N=y.alternate;if(N===null)throw Error(r(387));if(N=N.memoizedProps,N!==null){var F=y.type;Jr(y.pendingProps.value,N.value)||(s!==null?s.push(F):s=[F])}}else if(y===bt.current){if(N=y.alternate,N===null)throw Error(r(387));N.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Wf):s=[Wf])}y=y.return}s!==null&&e0(l,s,f,p),l.flags|=262144}function sp(s){for(s=s.firstContext;s!==null;){if(!Jr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function vl(s){ml=s,Qa=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Zn(s){return sw(ml,s)}function op(s,l){return ml===null&&vl(s),sw(s,l)}function sw(s,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},Qa===null){if(s===null)throw Error(r(308));Qa=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else Qa=Qa.next=l;return f}var yP=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(f,p){s.push(p)}};this.abort=function(){l.aborted=!0,s.forEach(function(f){return f()})}},bP=e.unstable_scheduleCallback,xP=e.unstable_NormalPriority,Tn={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function n0(){return{controller:new yP,data:new Map,refCount:0}}function wf(s){s.refCount--,s.refCount===0&&bP(xP,function(){s.controller.abort()})}var Ef=null,r0=0,Tc=0,Ac=null;function _P(s,l){if(Ef===null){var f=Ef=[];r0=0,Tc=sy(),Ac={status:"pending",value:void 0,then:function(p){f.push(p)}}}return r0++,l.then(ow,ow),l}function ow(){if(--r0===0&&Ef!==null){Ac!==null&&(Ac.status="fulfilled");var s=Ef;Ef=null,Tc=0,Ac=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function SP(s,l){var f=[],p={status:"pending",value:null,reason:null,then:function(y){f.push(y)}};return s.then(function(){p.status="fulfilled",p.value=l;for(var y=0;y<f.length;y++)(0,f[y])(l)},function(y){for(p.status="rejected",p.reason=y,y=0;y<f.length;y++)(0,f[y])(void 0)}),p}var lw=H.S;H.S=function(s,l){HE=ue(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&_P(s,l),lw!==null&&lw(s,l)};var yl=U(null);function i0(){var s=yl.current;return s!==null?s:Ge.pooledCache}function lp(s,l){l===null?rt(yl,yl.current):rt(yl,l.pool)}function cw(){var s=i0();return s===null?null:{parent:Tn._currentValue,pool:s}}var Cc=Error(r(460)),a0=Error(r(474)),cp=Error(r(542)),up={then:function(){}};function uw(s){return s=s.status,s==="fulfilled"||s==="rejected"}function fw(s,l,f){switch(f=s[f],f===void 0?s.push(l):f!==l&&(l.then(Vi,Vi),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,hw(s),s;default:if(typeof l.status=="string")l.then(Vi,Vi);else{if(s=Ge,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(p){if(l.status==="pending"){var y=l;y.status="fulfilled",y.value=p}},function(p){if(l.status==="pending"){var y=l;y.status="rejected",y.reason=p}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,hw(s),s}throw xl=l,Cc}}function bl(s){try{var l=s._init;return l(s._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(xl=f,Cc):f}}var xl=null;function dw(){if(xl===null)throw Error(r(459));var s=xl;return xl=null,s}function hw(s){if(s===Cc||s===cp)throw Error(r(483))}var Rc=null,Tf=0;function fp(s){var l=Tf;return Tf+=1,Rc===null&&(Rc=[]),fw(Rc,s,l)}function Af(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function dp(s,l){throw l.$$typeof===m?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function pw(s){function l(nt,tt){if(s){var ot=nt.deletions;ot===null?(nt.deletions=[tt],nt.flags|=16):ot.push(tt)}}function f(nt,tt){if(!s)return null;for(;tt!==null;)l(nt,tt),tt=tt.sibling;return null}function p(nt){for(var tt=new Map;nt!==null;)nt.key!==null?tt.set(nt.key,nt):tt.set(nt.index,nt),nt=nt.sibling;return tt}function y(nt,tt){return nt=Wa(nt,tt),nt.index=0,nt.sibling=null,nt}function x(nt,tt,ot){return nt.index=ot,s?(ot=nt.alternate,ot!==null?(ot=ot.index,ot<tt?(nt.flags|=67108866,tt):ot):(nt.flags|=67108866,tt)):(nt.flags|=1048576,tt)}function N(nt){return s&&nt.alternate===null&&(nt.flags|=67108866),nt}function F(nt,tt,ot,gt){return tt===null||tt.tag!==6?(tt=Yv(ot,nt.mode,gt),tt.return=nt,tt):(tt=y(tt,ot),tt.return=nt,tt)}function W(nt,tt,ot,gt){var Bt=ot.type;return Bt===w?pt(nt,tt,ot.props.children,gt,ot.key):tt!==null&&(tt.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===C&&bl(Bt)===tt.type)?(tt=y(tt,ot.props),Af(tt,ot),tt.return=nt,tt):(tt=ip(ot.type,ot.key,ot.props,null,nt.mode,gt),Af(tt,ot),tt.return=nt,tt)}function lt(nt,tt,ot,gt){return tt===null||tt.tag!==4||tt.stateNode.containerInfo!==ot.containerInfo||tt.stateNode.implementation!==ot.implementation?(tt=Xv(ot,nt.mode,gt),tt.return=nt,tt):(tt=y(tt,ot.children||[]),tt.return=nt,tt)}function pt(nt,tt,ot,gt,Bt){return tt===null||tt.tag!==7?(tt=pl(ot,nt.mode,gt,Bt),tt.return=nt,tt):(tt=y(tt,ot),tt.return=nt,tt)}function vt(nt,tt,ot){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return tt=Yv(""+tt,nt.mode,ot),tt.return=nt,tt;if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case b:return ot=ip(tt.type,tt.key,tt.props,null,nt.mode,ot),Af(ot,tt),ot.return=nt,ot;case S:return tt=Xv(tt,nt.mode,ot),tt.return=nt,tt;case C:return tt=bl(tt),vt(nt,tt,ot)}if(Y(tt)||B(tt))return tt=pl(tt,nt.mode,ot,null),tt.return=nt,tt;if(typeof tt.then=="function")return vt(nt,fp(tt),ot);if(tt.$$typeof===I)return vt(nt,op(nt,tt),ot);dp(nt,tt)}return null}function ct(nt,tt,ot,gt){var Bt=tt!==null?tt.key:null;if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return Bt!==null?null:F(nt,tt,""+ot,gt);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case b:return ot.key===Bt?W(nt,tt,ot,gt):null;case S:return ot.key===Bt?lt(nt,tt,ot,gt):null;case C:return ot=bl(ot),ct(nt,tt,ot,gt)}if(Y(ot)||B(ot))return Bt!==null?null:pt(nt,tt,ot,gt,null);if(typeof ot.then=="function")return ct(nt,tt,fp(ot),gt);if(ot.$$typeof===I)return ct(nt,tt,op(nt,ot),gt);dp(nt,ot)}return null}function ft(nt,tt,ot,gt,Bt){if(typeof gt=="string"&&gt!==""||typeof gt=="number"||typeof gt=="bigint")return nt=nt.get(ot)||null,F(tt,nt,""+gt,Bt);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case b:return nt=nt.get(gt.key===null?ot:gt.key)||null,W(tt,nt,gt,Bt);case S:return nt=nt.get(gt.key===null?ot:gt.key)||null,lt(tt,nt,gt,Bt);case C:return gt=bl(gt),ft(nt,tt,ot,gt,Bt)}if(Y(gt)||B(gt))return nt=nt.get(ot)||null,pt(tt,nt,gt,Bt,null);if(typeof gt.then=="function")return ft(nt,tt,ot,fp(gt),Bt);if(gt.$$typeof===I)return ft(nt,tt,ot,op(tt,gt),Bt);dp(tt,gt)}return null}function Mt(nt,tt,ot,gt){for(var Bt=null,Ae=null,Pt=tt,oe=tt=0,ge=null;Pt!==null&&oe<ot.length;oe++){Pt.index>oe?(ge=Pt,Pt=null):ge=Pt.sibling;var Ce=ct(nt,Pt,ot[oe],gt);if(Ce===null){Pt===null&&(Pt=ge);break}s&&Pt&&Ce.alternate===null&&l(nt,Pt),tt=x(Ce,tt,oe),Ae===null?Bt=Ce:Ae.sibling=Ce,Ae=Ce,Pt=ge}if(oe===ot.length)return f(nt,Pt),_e&&Ka(nt,oe),Bt;if(Pt===null){for(;oe<ot.length;oe++)Pt=vt(nt,ot[oe],gt),Pt!==null&&(tt=x(Pt,tt,oe),Ae===null?Bt=Pt:Ae.sibling=Pt,Ae=Pt);return _e&&Ka(nt,oe),Bt}for(Pt=p(Pt);oe<ot.length;oe++)ge=ft(Pt,nt,oe,ot[oe],gt),ge!==null&&(s&&ge.alternate!==null&&Pt.delete(ge.key===null?oe:ge.key),tt=x(ge,tt,oe),Ae===null?Bt=ge:Ae.sibling=ge,Ae=ge);return s&&Pt.forEach(function(po){return l(nt,po)}),_e&&Ka(nt,oe),Bt}function Ht(nt,tt,ot,gt){if(ot==null)throw Error(r(151));for(var Bt=null,Ae=null,Pt=tt,oe=tt=0,ge=null,Ce=ot.next();Pt!==null&&!Ce.done;oe++,Ce=ot.next()){Pt.index>oe?(ge=Pt,Pt=null):ge=Pt.sibling;var po=ct(nt,Pt,Ce.value,gt);if(po===null){Pt===null&&(Pt=ge);break}s&&Pt&&po.alternate===null&&l(nt,Pt),tt=x(po,tt,oe),Ae===null?Bt=po:Ae.sibling=po,Ae=po,Pt=ge}if(Ce.done)return f(nt,Pt),_e&&Ka(nt,oe),Bt;if(Pt===null){for(;!Ce.done;oe++,Ce=ot.next())Ce=vt(nt,Ce.value,gt),Ce!==null&&(tt=x(Ce,tt,oe),Ae===null?Bt=Ce:Ae.sibling=Ce,Ae=Ce);return _e&&Ka(nt,oe),Bt}for(Pt=p(Pt);!Ce.done;oe++,Ce=ot.next())Ce=ft(Pt,nt,oe,Ce.value,gt),Ce!==null&&(s&&Ce.alternate!==null&&Pt.delete(Ce.key===null?oe:Ce.key),tt=x(Ce,tt,oe),Ae===null?Bt=Ce:Ae.sibling=Ce,Ae=Ce);return s&&Pt.forEach(function(M3){return l(nt,M3)}),_e&&Ka(nt,oe),Bt}function Be(nt,tt,ot,gt){if(typeof ot=="object"&&ot!==null&&ot.type===w&&ot.key===null&&(ot=ot.props.children),typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case b:t:{for(var Bt=ot.key;tt!==null;){if(tt.key===Bt){if(Bt=ot.type,Bt===w){if(tt.tag===7){f(nt,tt.sibling),gt=y(tt,ot.props.children),gt.return=nt,nt=gt;break t}}else if(tt.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===C&&bl(Bt)===tt.type){f(nt,tt.sibling),gt=y(tt,ot.props),Af(gt,ot),gt.return=nt,nt=gt;break t}f(nt,tt);break}else l(nt,tt);tt=tt.sibling}ot.type===w?(gt=pl(ot.props.children,nt.mode,gt,ot.key),gt.return=nt,nt=gt):(gt=ip(ot.type,ot.key,ot.props,null,nt.mode,gt),Af(gt,ot),gt.return=nt,nt=gt)}return N(nt);case S:t:{for(Bt=ot.key;tt!==null;){if(tt.key===Bt)if(tt.tag===4&&tt.stateNode.containerInfo===ot.containerInfo&&tt.stateNode.implementation===ot.implementation){f(nt,tt.sibling),gt=y(tt,ot.children||[]),gt.return=nt,nt=gt;break t}else{f(nt,tt);break}else l(nt,tt);tt=tt.sibling}gt=Xv(ot,nt.mode,gt),gt.return=nt,nt=gt}return N(nt);case C:return ot=bl(ot),Be(nt,tt,ot,gt)}if(Y(ot))return Mt(nt,tt,ot,gt);if(B(ot)){if(Bt=B(ot),typeof Bt!="function")throw Error(r(150));return ot=Bt.call(ot),Ht(nt,tt,ot,gt)}if(typeof ot.then=="function")return Be(nt,tt,fp(ot),gt);if(ot.$$typeof===I)return Be(nt,tt,op(nt,ot),gt);dp(nt,ot)}return typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint"?(ot=""+ot,tt!==null&&tt.tag===6?(f(nt,tt.sibling),gt=y(tt,ot),gt.return=nt,nt=gt):(f(nt,tt),gt=Yv(ot,nt.mode,gt),gt.return=nt,nt=gt),N(nt)):f(nt,tt)}return function(nt,tt,ot,gt){try{Tf=0;var Bt=Be(nt,tt,ot,gt);return Rc=null,Bt}catch(Pt){if(Pt===Cc||Pt===cp)throw Pt;var Ae=ti(29,Pt,null,nt.mode);return Ae.lanes=gt,Ae.return=nt,Ae}finally{}}}var _l=pw(!0),gw=pw(!1),Ks=!1;function s0(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function o0(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Qs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Zs(s,l,f){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(De&2)!==0){var y=p.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),p.pending=l,l=rp(s),ZS(s,null,f),l}return np(s,p,l,f),rp(s)}function Cf(s,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var p=l.lanes;p&=s.pendingLanes,f|=p,l.lanes=f,_r(s,f)}}function l0(s,l){var f=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,f===p)){var y=null,x=null;if(f=f.firstBaseUpdate,f!==null){do{var N={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};x===null?y=x=N:x=x.next=N,f=f.next}while(f!==null);x===null?y=x=l:x=x.next=l}else y=x=l;f={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:p.shared,callbacks:p.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=l:s.next=l,f.lastBaseUpdate=l}var c0=!1;function Rf(){if(c0){var s=Ac;if(s!==null)throw s}}function Df(s,l,f,p){c0=!1;var y=s.updateQueue;Ks=!1;var x=y.firstBaseUpdate,N=y.lastBaseUpdate,F=y.shared.pending;if(F!==null){y.shared.pending=null;var W=F,lt=W.next;W.next=null,N===null?x=lt:N.next=lt,N=W;var pt=s.alternate;pt!==null&&(pt=pt.updateQueue,F=pt.lastBaseUpdate,F!==N&&(F===null?pt.firstBaseUpdate=lt:F.next=lt,pt.lastBaseUpdate=W))}if(x!==null){var vt=y.baseState;N=0,pt=lt=W=null,F=x;do{var ct=F.lane&-536870913,ft=ct!==F.lane;if(ft?(pe&ct)===ct:(p&ct)===ct){ct!==0&&ct===Tc&&(c0=!0),pt!==null&&(pt=pt.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});t:{var Mt=s,Ht=F;ct=l;var Be=f;switch(Ht.tag){case 1:if(Mt=Ht.payload,typeof Mt=="function"){vt=Mt.call(Be,vt,ct);break t}vt=Mt;break t;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=Ht.payload,ct=typeof Mt=="function"?Mt.call(Be,vt,ct):Mt,ct==null)break t;vt=g({},vt,ct);break t;case 2:Ks=!0}}ct=F.callback,ct!==null&&(s.flags|=64,ft&&(s.flags|=8192),ft=y.callbacks,ft===null?y.callbacks=[ct]:ft.push(ct))}else ft={lane:ct,tag:F.tag,payload:F.payload,callback:F.callback,next:null},pt===null?(lt=pt=ft,W=vt):pt=pt.next=ft,N|=ct;if(F=F.next,F===null){if(F=y.shared.pending,F===null)break;ft=F,F=ft.next,ft.next=null,y.lastBaseUpdate=ft,y.shared.pending=null}}while(!0);pt===null&&(W=vt),y.baseState=W,y.firstBaseUpdate=lt,y.lastBaseUpdate=pt,x===null&&(y.shared.lanes=0),ro|=N,s.lanes=N,s.memoizedState=vt}}function mw(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function vw(s,l){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)mw(f[s],l)}var Dc=U(null),hp=U(0);function yw(s,l){s=os,rt(hp,s),rt(Dc,l),os=s|l.baseLanes}function u0(){rt(hp,os),rt(Dc,Dc.current)}function f0(){os=hp.current,Z(Dc),Z(hp)}var ei=U(null),xi=null;function Js(s){var l=s.alternate;rt(yn,yn.current&1),rt(ei,s),xi===null&&(l===null||Dc.current!==null||l.memoizedState!==null)&&(xi=s)}function d0(s){rt(yn,yn.current),rt(ei,s),xi===null&&(xi=s)}function bw(s){s.tag===22?(rt(yn,yn.current),rt(ei,s),xi===null&&(xi=s)):to()}function to(){rt(yn,yn.current),rt(ei,ei.current)}function ni(s){Z(ei),xi===s&&(xi=null),Z(yn)}var yn=U(0);function pp(s){for(var l=s;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||yy(f)||by(f)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Ja=0,ie=null,ze=null,An=null,gp=!1,Ic=!1,Sl=!1,mp=0,If=0,kc=null,wP=0;function cn(){throw Error(r(321))}function h0(s,l){if(l===null)return!1;for(var f=0;f<l.length&&f<s.length;f++)if(!Jr(s[f],l[f]))return!1;return!0}function p0(s,l,f,p,y,x){return Ja=x,ie=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,H.H=s===null||s.memoizedState===null?nE:D0,Sl=!1,x=f(p,y),Sl=!1,Ic&&(x=_w(l,f,p,y)),xw(s),x}function xw(s){H.H=Mf;var l=ze!==null&&ze.next!==null;if(Ja=0,An=ze=ie=null,gp=!1,If=0,kc=null,l)throw Error(r(300));s===null||Cn||(s=s.dependencies,s!==null&&sp(s)&&(Cn=!0))}function _w(s,l,f,p){ie=s;var y=0;do{if(Ic&&(kc=null),If=0,Ic=!1,25<=y)throw Error(r(301));if(y+=1,An=ze=null,s.updateQueue!=null){var x=s.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}H.H=rE,x=l(f,p)}while(Ic);return x}function EP(){var s=H.H,l=s.useState()[0];return l=typeof l.then=="function"?kf(l):l,s=s.useState()[0],(ze!==null?ze.memoizedState:null)!==s&&(ie.flags|=1024),l}function g0(){var s=mp!==0;return mp=0,s}function m0(s,l,f){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~f}function v0(s){if(gp){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}gp=!1}Ja=0,An=ze=ie=null,Ic=!1,If=mp=0,kc=null}function Tr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?ie.memoizedState=An=s:An=An.next=s,An}function bn(){if(ze===null){var s=ie.alternate;s=s!==null?s.memoizedState:null}else s=ze.next;var l=An===null?ie.memoizedState:An.next;if(l!==null)An=l,ze=s;else{if(s===null)throw ie.alternate===null?Error(r(467)):Error(r(310));ze=s,s={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},An===null?ie.memoizedState=An=s:An=An.next=s}return An}function vp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kf(s){var l=If;return If+=1,kc===null&&(kc=[]),s=fw(kc,s,l),l=ie,(An===null?l.memoizedState:An.next)===null&&(l=l.alternate,H.H=l===null||l.memoizedState===null?nE:D0),s}function yp(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return kf(s);if(s.$$typeof===I)return Zn(s)}throw Error(r(438,String(s)))}function y0(s){var l=null,f=ie.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var p=ie.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(l={data:p.data.map(function(y){return y.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=vp(),ie.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(s),p=0;p<s;p++)f[p]=j;return l.index++,f}function ts(s,l){return typeof l=="function"?l(s):l}function bp(s){var l=bn();return b0(l,ze,s)}function b0(s,l,f){var p=s.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=f;var y=s.baseQueue,x=p.pending;if(x!==null){if(y!==null){var N=y.next;y.next=x.next,x.next=N}l.baseQueue=y=x,p.pending=null}if(x=s.baseState,y===null)s.memoizedState=x;else{l=y.next;var F=N=null,W=null,lt=l,pt=!1;do{var vt=lt.lane&-536870913;if(vt!==lt.lane?(pe&vt)===vt:(Ja&vt)===vt){var ct=lt.revertLane;if(ct===0)W!==null&&(W=W.next={lane:0,revertLane:0,gesture:null,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),vt===Tc&&(pt=!0);else if((Ja&ct)===ct){lt=lt.next,ct===Tc&&(pt=!0);continue}else vt={lane:0,revertLane:lt.revertLane,gesture:null,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},W===null?(F=W=vt,N=x):W=W.next=vt,ie.lanes|=ct,ro|=ct;vt=lt.action,Sl&&f(x,vt),x=lt.hasEagerState?lt.eagerState:f(x,vt)}else ct={lane:vt,revertLane:lt.revertLane,gesture:lt.gesture,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},W===null?(F=W=ct,N=x):W=W.next=ct,ie.lanes|=vt,ro|=vt;lt=lt.next}while(lt!==null&&lt!==l);if(W===null?N=x:W.next=F,!Jr(x,s.memoizedState)&&(Cn=!0,pt&&(f=Ac,f!==null)))throw f;s.memoizedState=x,s.baseState=N,s.baseQueue=W,p.lastRenderedState=x}return y===null&&(p.lanes=0),[s.memoizedState,p.dispatch]}function x0(s){var l=bn(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=s;var p=f.dispatch,y=f.pending,x=l.memoizedState;if(y!==null){f.pending=null;var N=y=y.next;do x=s(x,N.action),N=N.next;while(N!==y);Jr(x,l.memoizedState)||(Cn=!0),l.memoizedState=x,l.baseQueue===null&&(l.baseState=x),f.lastRenderedState=x}return[x,p]}function Sw(s,l,f){var p=ie,y=bn(),x=_e;if(x){if(f===void 0)throw Error(r(407));f=f()}else f=l();var N=!Jr((ze||y).memoizedState,f);if(N&&(y.memoizedState=f,Cn=!0),y=y.queue,w0(Tw.bind(null,p,y,s),[s]),y.getSnapshot!==l||N||An!==null&&An.memoizedState.tag&1){if(p.flags|=2048,Nc(9,{destroy:void 0},Ew.bind(null,p,y,f,l),null),Ge===null)throw Error(r(349));x||(Ja&127)!==0||ww(p,l,f)}return f}function ww(s,l,f){s.flags|=16384,s={getSnapshot:l,value:f},l=ie.updateQueue,l===null?(l=vp(),ie.updateQueue=l,l.stores=[s]):(f=l.stores,f===null?l.stores=[s]:f.push(s))}function Ew(s,l,f,p){l.value=f,l.getSnapshot=p,Aw(l)&&Cw(s)}function Tw(s,l,f){return f(function(){Aw(l)&&Cw(s)})}function Aw(s){var l=s.getSnapshot;s=s.value;try{var f=l();return!Jr(s,f)}catch{return!0}}function Cw(s){var l=hl(s,2);l!==null&&Br(l,s,2)}function _0(s){var l=Tr();if(typeof s=="function"){var f=s;if(s=f(),Sl){qn(!0);try{f()}finally{qn(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:s},l}function Rw(s,l,f,p){return s.baseState=f,b0(s,ze,typeof p=="function"?p:ts)}function TP(s,l,f,p,y){if(Sp(s))throw Error(r(485));if(s=l.action,s!==null){var x={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){x.listeners.push(N)}};H.T!==null?f(!0):x.isTransition=!1,p(x),f=l.pending,f===null?(x.next=l.pending=x,Dw(l,x)):(x.next=f.next,l.pending=f.next=x)}}function Dw(s,l){var f=l.action,p=l.payload,y=s.state;if(l.isTransition){var x=H.T,N={};H.T=N;try{var F=f(y,p),W=H.S;W!==null&&W(N,F),Iw(s,l,F)}catch(lt){S0(s,l,lt)}finally{x!==null&&N.types!==null&&(x.types=N.types),H.T=x}}else try{x=f(y,p),Iw(s,l,x)}catch(lt){S0(s,l,lt)}}function Iw(s,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(p){kw(s,l,p)},function(p){return S0(s,l,p)}):kw(s,l,f)}function kw(s,l,f){l.status="fulfilled",l.value=f,Nw(l),s.state=f,l=s.pending,l!==null&&(f=l.next,f===l?s.pending=null:(f=f.next,l.next=f,Dw(s,f)))}function S0(s,l,f){var p=s.pending;if(s.pending=null,p!==null){p=p.next;do l.status="rejected",l.reason=f,Nw(l),l=l.next;while(l!==p)}s.action=null}function Nw(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function Mw(s,l){return l}function Ow(s,l){if(_e){var f=Ge.formState;if(f!==null){t:{var p=ie;if(_e){if(Xe){e:{for(var y=Xe,x=bi;y.nodeType!==8;){if(!x){y=null;break e}if(y=_i(y.nextSibling),y===null){y=null;break e}}x=y.data,y=x==="F!"||x==="F"?y:null}if(y){Xe=_i(y.nextSibling),p=y.data==="F!";break t}}Xs(p)}p=!1}p&&(l=f[0])}}return f=Tr(),f.memoizedState=f.baseState=l,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mw,lastRenderedState:l},f.queue=p,f=Jw.bind(null,ie,p),p.dispatch=f,p=_0(!1),x=R0.bind(null,ie,!1,p.queue),p=Tr(),y={state:l,dispatch:null,action:s,pending:null},p.queue=y,f=TP.bind(null,ie,y,x,f),y.dispatch=f,p.memoizedState=s,[l,f,!1]}function Pw(s){var l=bn();return Vw(l,ze,s)}function Vw(s,l,f){if(l=b0(s,l,Mw)[0],s=bp(ts)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var p=kf(l)}catch(N){throw N===Cc?cp:N}else p=l;l=bn();var y=l.queue,x=y.dispatch;return f!==l.memoizedState&&(ie.flags|=2048,Nc(9,{destroy:void 0},AP.bind(null,y,f),null)),[p,x,s]}function AP(s,l){s.action=l}function jw(s){var l=bn(),f=ze;if(f!==null)return Vw(l,f,s);bn(),l=l.memoizedState,f=bn();var p=f.queue.dispatch;return f.memoizedState=s,[l,p,!1]}function Nc(s,l,f,p){return s={tag:s,create:f,deps:p,inst:l,next:null},l=ie.updateQueue,l===null&&(l=vp(),ie.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=s.next=s:(p=f.next,f.next=s,s.next=p,l.lastEffect=s),s}function zw(){return bn().memoizedState}function xp(s,l,f,p){var y=Tr();ie.flags|=s,y.memoizedState=Nc(1|l,{destroy:void 0},f,p===void 0?null:p)}function _p(s,l,f,p){var y=bn();p=p===void 0?null:p;var x=y.memoizedState.inst;ze!==null&&p!==null&&h0(p,ze.memoizedState.deps)?y.memoizedState=Nc(l,x,f,p):(ie.flags|=s,y.memoizedState=Nc(1|l,x,f,p))}function Lw(s,l){xp(8390656,8,s,l)}function w0(s,l){_p(2048,8,s,l)}function CP(s){ie.flags|=4;var l=ie.updateQueue;if(l===null)l=vp(),ie.updateQueue=l,l.events=[s];else{var f=l.events;f===null?l.events=[s]:f.push(s)}}function Bw(s){var l=bn().memoizedState;return CP({ref:l,nextImpl:s}),function(){if((De&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function Uw(s,l){return _p(4,2,s,l)}function Fw(s,l){return _p(4,4,s,l)}function Gw(s,l){if(typeof l=="function"){s=s();var f=l(s);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function qw(s,l,f){f=f!=null?f.concat([s]):null,_p(4,4,Gw.bind(null,l,s),f)}function E0(){}function Hw(s,l){var f=bn();l=l===void 0?null:l;var p=f.memoizedState;return l!==null&&h0(l,p[1])?p[0]:(f.memoizedState=[s,l],s)}function $w(s,l){var f=bn();l=l===void 0?null:l;var p=f.memoizedState;if(l!==null&&h0(l,p[1]))return p[0];if(p=s(),Sl){qn(!0);try{s()}finally{qn(!1)}}return f.memoizedState=[p,l],p}function T0(s,l,f){return f===void 0||(Ja&1073741824)!==0&&(pe&261930)===0?s.memoizedState=l:(s.memoizedState=f,s=YE(),ie.lanes|=s,ro|=s,f)}function Yw(s,l,f,p){return Jr(f,l)?f:Dc.current!==null?(s=T0(s,f,p),Jr(s,l)||(Cn=!0),s):(Ja&42)===0||(Ja&1073741824)!==0&&(pe&261930)===0?(Cn=!0,s.memoizedState=f):(s=YE(),ie.lanes|=s,ro|=s,l)}function Xw(s,l,f,p,y){var x=$.p;$.p=x!==0&&8>x?x:8;var N=H.T,F={};H.T=F,R0(s,!1,l,f);try{var W=y(),lt=H.S;if(lt!==null&&lt(F,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var pt=SP(W,p);Nf(s,l,pt,ai(s))}else Nf(s,l,p,ai(s))}catch(vt){Nf(s,l,{then:function(){},status:"rejected",reason:vt},ai())}finally{$.p=x,N!==null&&F.types!==null&&(N.types=F.types),H.T=N}}function RP(){}function A0(s,l,f,p){if(s.tag!==5)throw Error(r(476));var y=Ww(s).queue;Xw(s,y,l,et,f===null?RP:function(){return Kw(s),f(p)})}function Ww(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:et,baseState:et,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:et},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:f},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function Kw(s){var l=Ww(s);l.next===null&&(l=s.alternate.memoizedState),Nf(s,l.next.queue,{},ai())}function C0(){return Zn(Wf)}function Qw(){return bn().memoizedState}function Zw(){return bn().memoizedState}function DP(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var f=ai();s=Qs(f);var p=Zs(l,s,f);p!==null&&(Br(p,l,f),Cf(p,l,f)),l={cache:n0()},s.payload=l;return}l=l.return}}function IP(s,l,f){var p=ai();f={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Sp(s)?tE(l,f):(f=Hv(s,l,f,p),f!==null&&(Br(f,s,p),eE(f,l,p)))}function Jw(s,l,f){var p=ai();Nf(s,l,f,p)}function Nf(s,l,f,p){var y={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Sp(s))tE(l,y);else{var x=s.alternate;if(s.lanes===0&&(x===null||x.lanes===0)&&(x=l.lastRenderedReducer,x!==null))try{var N=l.lastRenderedState,F=x(N,f);if(y.hasEagerState=!0,y.eagerState=F,Jr(F,N))return np(s,l,y,0),Ge===null&&ep(),!1}catch{}finally{}if(f=Hv(s,l,y,p),f!==null)return Br(f,s,p),eE(f,l,p),!0}return!1}function R0(s,l,f,p){if(p={lane:2,revertLane:sy(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Sp(s)){if(l)throw Error(r(479))}else l=Hv(s,f,p,2),l!==null&&Br(l,s,2)}function Sp(s){var l=s.alternate;return s===ie||l!==null&&l===ie}function tE(s,l){Ic=gp=!0;var f=s.pending;f===null?l.next=l:(l.next=f.next,f.next=l),s.pending=l}function eE(s,l,f){if((f&4194048)!==0){var p=l.lanes;p&=s.pendingLanes,f|=p,l.lanes=f,_r(s,f)}}var Mf={readContext:Zn,use:yp,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useLayoutEffect:cn,useInsertionEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useSyncExternalStore:cn,useId:cn,useHostTransitionStatus:cn,useFormState:cn,useActionState:cn,useOptimistic:cn,useMemoCache:cn,useCacheRefresh:cn};Mf.useEffectEvent=cn;var nE={readContext:Zn,use:yp,useCallback:function(s,l){return Tr().memoizedState=[s,l===void 0?null:l],s},useContext:Zn,useEffect:Lw,useImperativeHandle:function(s,l,f){f=f!=null?f.concat([s]):null,xp(4194308,4,Gw.bind(null,l,s),f)},useLayoutEffect:function(s,l){return xp(4194308,4,s,l)},useInsertionEffect:function(s,l){xp(4,2,s,l)},useMemo:function(s,l){var f=Tr();l=l===void 0?null:l;var p=s();if(Sl){qn(!0);try{s()}finally{qn(!1)}}return f.memoizedState=[p,l],p},useReducer:function(s,l,f){var p=Tr();if(f!==void 0){var y=f(l);if(Sl){qn(!0);try{f(l)}finally{qn(!1)}}}else y=l;return p.memoizedState=p.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},p.queue=s,s=s.dispatch=IP.bind(null,ie,s),[p.memoizedState,s]},useRef:function(s){var l=Tr();return s={current:s},l.memoizedState=s},useState:function(s){s=_0(s);var l=s.queue,f=Jw.bind(null,ie,l);return l.dispatch=f,[s.memoizedState,f]},useDebugValue:E0,useDeferredValue:function(s,l){var f=Tr();return T0(f,s,l)},useTransition:function(){var s=_0(!1);return s=Xw.bind(null,ie,s.queue,!0,!1),Tr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,f){var p=ie,y=Tr();if(_e){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),Ge===null)throw Error(r(349));(pe&127)!==0||ww(p,l,f)}y.memoizedState=f;var x={value:f,getSnapshot:l};return y.queue=x,Lw(Tw.bind(null,p,x,s),[s]),p.flags|=2048,Nc(9,{destroy:void 0},Ew.bind(null,p,x,f,l),null),f},useId:function(){var s=Tr(),l=Ge.identifierPrefix;if(_e){var f=ya,p=va;f=(p&~(1<<32-$e(p)-1)).toString(32)+f,l="_"+l+"R_"+f,f=mp++,0<f&&(l+="H"+f.toString(32)),l+="_"}else f=wP++,l="_"+l+"r_"+f.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:C0,useFormState:Ow,useActionState:Ow,useOptimistic:function(s){var l=Tr();l.memoizedState=l.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=R0.bind(null,ie,!0,f),f.dispatch=l,[s,l]},useMemoCache:y0,useCacheRefresh:function(){return Tr().memoizedState=DP.bind(null,ie)},useEffectEvent:function(s){var l=Tr(),f={impl:s};return l.memoizedState=f,function(){if((De&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},D0={readContext:Zn,use:yp,useCallback:Hw,useContext:Zn,useEffect:w0,useImperativeHandle:qw,useInsertionEffect:Uw,useLayoutEffect:Fw,useMemo:$w,useReducer:bp,useRef:zw,useState:function(){return bp(ts)},useDebugValue:E0,useDeferredValue:function(s,l){var f=bn();return Yw(f,ze.memoizedState,s,l)},useTransition:function(){var s=bp(ts)[0],l=bn().memoizedState;return[typeof s=="boolean"?s:kf(s),l]},useSyncExternalStore:Sw,useId:Qw,useHostTransitionStatus:C0,useFormState:Pw,useActionState:Pw,useOptimistic:function(s,l){var f=bn();return Rw(f,ze,s,l)},useMemoCache:y0,useCacheRefresh:Zw};D0.useEffectEvent=Bw;var rE={readContext:Zn,use:yp,useCallback:Hw,useContext:Zn,useEffect:w0,useImperativeHandle:qw,useInsertionEffect:Uw,useLayoutEffect:Fw,useMemo:$w,useReducer:x0,useRef:zw,useState:function(){return x0(ts)},useDebugValue:E0,useDeferredValue:function(s,l){var f=bn();return ze===null?T0(f,s,l):Yw(f,ze.memoizedState,s,l)},useTransition:function(){var s=x0(ts)[0],l=bn().memoizedState;return[typeof s=="boolean"?s:kf(s),l]},useSyncExternalStore:Sw,useId:Qw,useHostTransitionStatus:C0,useFormState:jw,useActionState:jw,useOptimistic:function(s,l){var f=bn();return ze!==null?Rw(f,ze,s,l):(f.baseState=s,[s,f.queue.dispatch])},useMemoCache:y0,useCacheRefresh:Zw};rE.useEffectEvent=Bw;function I0(s,l,f,p){l=s.memoizedState,f=f(p,l),f=f==null?l:g({},l,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var k0={enqueueSetState:function(s,l,f){s=s._reactInternals;var p=ai(),y=Qs(p);y.payload=l,f!=null&&(y.callback=f),l=Zs(s,y,p),l!==null&&(Br(l,s,p),Cf(l,s,p))},enqueueReplaceState:function(s,l,f){s=s._reactInternals;var p=ai(),y=Qs(p);y.tag=1,y.payload=l,f!=null&&(y.callback=f),l=Zs(s,y,p),l!==null&&(Br(l,s,p),Cf(l,s,p))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var f=ai(),p=Qs(f);p.tag=2,l!=null&&(p.callback=l),l=Zs(s,p,f),l!==null&&(Br(l,s,f),Cf(l,s,f))}};function iE(s,l,f,p,y,x,N){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,x,N):l.prototype&&l.prototype.isPureReactComponent?!bf(f,p)||!bf(y,x):!0}function aE(s,l,f,p){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,p),l.state!==s&&k0.enqueueReplaceState(l,l.state,null)}function wl(s,l){var f=l;if("ref"in l){f={};for(var p in l)p!=="ref"&&(f[p]=l[p])}if(s=s.defaultProps){f===l&&(f=g({},f));for(var y in s)f[y]===void 0&&(f[y]=s[y])}return f}function sE(s){tp(s)}function oE(s){console.error(s)}function lE(s){tp(s)}function wp(s,l){try{var f=s.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(p){setTimeout(function(){throw p})}}function cE(s,l,f){try{var p=s.onCaughtError;p(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function N0(s,l,f){return f=Qs(f),f.tag=3,f.payload={element:null},f.callback=function(){wp(s,l)},f}function uE(s){return s=Qs(s),s.tag=3,s}function fE(s,l,f,p){var y=f.type.getDerivedStateFromError;if(typeof y=="function"){var x=p.value;s.payload=function(){return y(x)},s.callback=function(){cE(l,f,p)}}var N=f.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(s.callback=function(){cE(l,f,p),typeof y!="function"&&(io===null?io=new Set([this]):io.add(this));var F=p.stack;this.componentDidCatch(p.value,{componentStack:F!==null?F:""})})}function kP(s,l,f,p,y){if(f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(l=f.alternate,l!==null&&Ec(l,f,y,!0),f=ei.current,f!==null){switch(f.tag){case 31:case 13:return xi===null?Pp():f.alternate===null&&un===0&&(un=3),f.flags&=-257,f.flags|=65536,f.lanes=y,p===up?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([p]):l.add(p),ry(s,p,y)),!1;case 22:return f.flags|=65536,p===up?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([p])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([p]):f.add(p)),ry(s,p,y)),!1}throw Error(r(435,f.tag))}return ry(s,p,y),Pp(),!1}if(_e)return l=ei.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=y,p!==Qv&&(s=Error(r(422),{cause:p}),Sf(mi(s,f)))):(p!==Qv&&(l=Error(r(423),{cause:p}),Sf(mi(l,f))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,p=mi(p,f),y=N0(s.stateNode,p,y),l0(s,y),un!==4&&(un=2)),!1;var x=Error(r(520),{cause:p});if(x=mi(x,f),Uf===null?Uf=[x]:Uf.push(x),un!==4&&(un=2),l===null)return!0;p=mi(p,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,s=y&-y,f.lanes|=s,s=N0(f.stateNode,p,s),l0(f,s),!1;case 1:if(l=f.type,x=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(io===null||!io.has(x))))return f.flags|=65536,y&=-y,f.lanes|=y,y=uE(y),fE(y,s,f,p),l0(f,y),!1}f=f.return}while(f!==null);return!1}var M0=Error(r(461)),Cn=!1;function Jn(s,l,f,p){l.child=s===null?gw(l,null,f,p):_l(l,s.child,f,p)}function dE(s,l,f,p,y){f=f.render;var x=l.ref;if("ref"in p){var N={};for(var F in p)F!=="ref"&&(N[F]=p[F])}else N=p;return vl(l),p=p0(s,l,f,N,x,y),F=g0(),s!==null&&!Cn?(m0(s,l,y),es(s,l,y)):(_e&&F&&Wv(l),l.flags|=1,Jn(s,l,p,y),l.child)}function hE(s,l,f,p,y){if(s===null){var x=f.type;return typeof x=="function"&&!$v(x)&&x.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=x,pE(s,l,x,p,y)):(s=ip(f.type,null,p,l,l.mode,y),s.ref=l.ref,s.return=l,l.child=s)}if(x=s.child,!U0(s,y)){var N=x.memoizedProps;if(f=f.compare,f=f!==null?f:bf,f(N,p)&&s.ref===l.ref)return es(s,l,y)}return l.flags|=1,s=Wa(x,p),s.ref=l.ref,s.return=l,l.child=s}function pE(s,l,f,p,y){if(s!==null){var x=s.memoizedProps;if(bf(x,p)&&s.ref===l.ref)if(Cn=!1,l.pendingProps=p=x,U0(s,y))(s.flags&131072)!==0&&(Cn=!0);else return l.lanes=s.lanes,es(s,l,y)}return O0(s,l,f,p,y)}function gE(s,l,f,p){var y=p.children,x=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((l.flags&128)!==0){if(x=x!==null?x.baseLanes|f:f,s!==null){for(p=l.child=s.child,y=0;p!==null;)y=y|p.lanes|p.childLanes,p=p.sibling;p=y&~x}else p=0,l.child=null;return mE(s,l,x,f,p)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&lp(l,x!==null?x.cachePool:null),x!==null?yw(l,x):u0(),bw(l);else return p=l.lanes=536870912,mE(s,l,x!==null?x.baseLanes|f:f,f,p)}else x!==null?(lp(l,x.cachePool),yw(l,x),to(),l.memoizedState=null):(s!==null&&lp(l,null),u0(),to());return Jn(s,l,y,f),l.child}function Of(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function mE(s,l,f,p,y){var x=i0();return x=x===null?null:{parent:Tn._currentValue,pool:x},l.memoizedState={baseLanes:f,cachePool:x},s!==null&&lp(l,null),u0(),bw(l),s!==null&&Ec(s,l,p,!0),l.childLanes=y,null}function Ep(s,l){return l=Ap({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function vE(s,l,f){return _l(l,s.child,null,f),s=Ep(l,l.pendingProps),s.flags|=2,ni(l),l.memoizedState=null,s}function NP(s,l,f){var p=l.pendingProps,y=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(_e){if(p.mode==="hidden")return s=Ep(l,p),l.lanes=536870912,Of(null,s);if(d0(l),(s=Xe)?(s=DT(s,bi),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:$s!==null?{id:va,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},f=tw(s),f.return=l,l.child=f,Qn=l,Xe=null)):s=null,s===null)throw Xs(l);return l.lanes=536870912,null}return Ep(l,p)}var x=s.memoizedState;if(x!==null){var N=x.dehydrated;if(d0(l),y)if(l.flags&256)l.flags&=-257,l=vE(s,l,f);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(r(558));else if(Cn||Ec(s,l,f,!1),y=(f&s.childLanes)!==0,Cn||y){if(p=Ge,p!==null&&(N=mn(p,f),N!==0&&N!==x.retryLane))throw x.retryLane=N,hl(s,N),Br(p,s,N),M0;Pp(),l=vE(s,l,f)}else s=x.treeContext,Xe=_i(N.nextSibling),Qn=l,_e=!0,Ys=null,bi=!1,s!==null&&rw(l,s),l=Ep(l,p),l.flags|=4096;return l}return s=Wa(s.child,{mode:p.mode,children:p.children}),s.ref=l.ref,l.child=s,s.return=l,s}function Tp(s,l){var f=l.ref;if(f===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(s===null||s.ref!==f)&&(l.flags|=4194816)}}function O0(s,l,f,p,y){return vl(l),f=p0(s,l,f,p,void 0,y),p=g0(),s!==null&&!Cn?(m0(s,l,y),es(s,l,y)):(_e&&p&&Wv(l),l.flags|=1,Jn(s,l,f,y),l.child)}function yE(s,l,f,p,y,x){return vl(l),l.updateQueue=null,f=_w(l,p,f,y),xw(s),p=g0(),s!==null&&!Cn?(m0(s,l,x),es(s,l,x)):(_e&&p&&Wv(l),l.flags|=1,Jn(s,l,f,x),l.child)}function bE(s,l,f,p,y){if(vl(l),l.stateNode===null){var x=xc,N=f.contextType;typeof N=="object"&&N!==null&&(x=Zn(N)),x=new f(p,x),l.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=k0,l.stateNode=x,x._reactInternals=l,x=l.stateNode,x.props=p,x.state=l.memoizedState,x.refs={},s0(l),N=f.contextType,x.context=typeof N=="object"&&N!==null?Zn(N):xc,x.state=l.memoizedState,N=f.getDerivedStateFromProps,typeof N=="function"&&(I0(l,f,N,p),x.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(N=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),N!==x.state&&k0.enqueueReplaceState(x,x.state,null),Df(l,p,x,y),Rf(),x.state=l.memoizedState),typeof x.componentDidMount=="function"&&(l.flags|=4194308),p=!0}else if(s===null){x=l.stateNode;var F=l.memoizedProps,W=wl(f,F);x.props=W;var lt=x.context,pt=f.contextType;N=xc,typeof pt=="object"&&pt!==null&&(N=Zn(pt));var vt=f.getDerivedStateFromProps;pt=typeof vt=="function"||typeof x.getSnapshotBeforeUpdate=="function",F=l.pendingProps!==F,pt||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(F||lt!==N)&&aE(l,x,p,N),Ks=!1;var ct=l.memoizedState;x.state=ct,Df(l,p,x,y),Rf(),lt=l.memoizedState,F||ct!==lt||Ks?(typeof vt=="function"&&(I0(l,f,vt,p),lt=l.memoizedState),(W=Ks||iE(l,f,W,p,ct,lt,N))?(pt||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(l.flags|=4194308)):(typeof x.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=lt),x.props=p,x.state=lt,x.context=N,p=W):(typeof x.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{x=l.stateNode,o0(s,l),N=l.memoizedProps,pt=wl(f,N),x.props=pt,vt=l.pendingProps,ct=x.context,lt=f.contextType,W=xc,typeof lt=="object"&&lt!==null&&(W=Zn(lt)),F=f.getDerivedStateFromProps,(lt=typeof F=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(N!==vt||ct!==W)&&aE(l,x,p,W),Ks=!1,ct=l.memoizedState,x.state=ct,Df(l,p,x,y),Rf();var ft=l.memoizedState;N!==vt||ct!==ft||Ks||s!==null&&s.dependencies!==null&&sp(s.dependencies)?(typeof F=="function"&&(I0(l,f,F,p),ft=l.memoizedState),(pt=Ks||iE(l,f,pt,p,ct,ft,W)||s!==null&&s.dependencies!==null&&sp(s.dependencies))?(lt||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(p,ft,W),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(p,ft,W)),typeof x.componentDidUpdate=="function"&&(l.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof x.componentDidUpdate!="function"||N===s.memoizedProps&&ct===s.memoizedState||(l.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&ct===s.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=ft),x.props=p,x.state=ft,x.context=W,p=pt):(typeof x.componentDidUpdate!="function"||N===s.memoizedProps&&ct===s.memoizedState||(l.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&ct===s.memoizedState||(l.flags|=1024),p=!1)}return x=p,Tp(s,l),p=(l.flags&128)!==0,x||p?(x=l.stateNode,f=p&&typeof f.getDerivedStateFromError!="function"?null:x.render(),l.flags|=1,s!==null&&p?(l.child=_l(l,s.child,null,y),l.child=_l(l,null,f,y)):Jn(s,l,f,y),l.memoizedState=x.state,s=l.child):s=es(s,l,y),s}function xE(s,l,f,p){return gl(),l.flags|=256,Jn(s,l,f,p),l.child}var P0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function V0(s){return{baseLanes:s,cachePool:cw()}}function j0(s,l,f){return s=s!==null?s.childLanes&~f:0,l&&(s|=ii),s}function _E(s,l,f){var p=l.pendingProps,y=!1,x=(l.flags&128)!==0,N;if((N=x)||(N=s!==null&&s.memoizedState===null?!1:(yn.current&2)!==0),N&&(y=!0,l.flags&=-129),N=(l.flags&32)!==0,l.flags&=-33,s===null){if(_e){if(y?Js(l):to(),(s=Xe)?(s=DT(s,bi),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:$s!==null?{id:va,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},f=tw(s),f.return=l,l.child=f,Qn=l,Xe=null)):s=null,s===null)throw Xs(l);return by(s)?l.lanes=32:l.lanes=536870912,null}var F=p.children;return p=p.fallback,y?(to(),y=l.mode,F=Ap({mode:"hidden",children:F},y),p=pl(p,y,f,null),F.return=l,p.return=l,F.sibling=p,l.child=F,p=l.child,p.memoizedState=V0(f),p.childLanes=j0(s,N,f),l.memoizedState=P0,Of(null,p)):(Js(l),z0(l,F))}var W=s.memoizedState;if(W!==null&&(F=W.dehydrated,F!==null)){if(x)l.flags&256?(Js(l),l.flags&=-257,l=L0(s,l,f)):l.memoizedState!==null?(to(),l.child=s.child,l.flags|=128,l=null):(to(),F=p.fallback,y=l.mode,p=Ap({mode:"visible",children:p.children},y),F=pl(F,y,f,null),F.flags|=2,p.return=l,F.return=l,p.sibling=F,l.child=p,_l(l,s.child,null,f),p=l.child,p.memoizedState=V0(f),p.childLanes=j0(s,N,f),l.memoizedState=P0,l=Of(null,p));else if(Js(l),by(F)){if(N=F.nextSibling&&F.nextSibling.dataset,N)var lt=N.dgst;N=lt,p=Error(r(419)),p.stack="",p.digest=N,Sf({value:p,source:null,stack:null}),l=L0(s,l,f)}else if(Cn||Ec(s,l,f,!1),N=(f&s.childLanes)!==0,Cn||N){if(N=Ge,N!==null&&(p=mn(N,f),p!==0&&p!==W.retryLane))throw W.retryLane=p,hl(s,p),Br(N,s,p),M0;yy(F)||Pp(),l=L0(s,l,f)}else yy(F)?(l.flags|=192,l.child=s.child,l=null):(s=W.treeContext,Xe=_i(F.nextSibling),Qn=l,_e=!0,Ys=null,bi=!1,s!==null&&rw(l,s),l=z0(l,p.children),l.flags|=4096);return l}return y?(to(),F=p.fallback,y=l.mode,W=s.child,lt=W.sibling,p=Wa(W,{mode:"hidden",children:p.children}),p.subtreeFlags=W.subtreeFlags&65011712,lt!==null?F=Wa(lt,F):(F=pl(F,y,f,null),F.flags|=2),F.return=l,p.return=l,p.sibling=F,l.child=p,Of(null,p),p=l.child,F=s.child.memoizedState,F===null?F=V0(f):(y=F.cachePool,y!==null?(W=Tn._currentValue,y=y.parent!==W?{parent:W,pool:W}:y):y=cw(),F={baseLanes:F.baseLanes|f,cachePool:y}),p.memoizedState=F,p.childLanes=j0(s,N,f),l.memoizedState=P0,Of(s.child,p)):(Js(l),f=s.child,s=f.sibling,f=Wa(f,{mode:"visible",children:p.children}),f.return=l,f.sibling=null,s!==null&&(N=l.deletions,N===null?(l.deletions=[s],l.flags|=16):N.push(s)),l.child=f,l.memoizedState=null,f)}function z0(s,l){return l=Ap({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function Ap(s,l){return s=ti(22,s,null,l),s.lanes=0,s}function L0(s,l,f){return _l(l,s.child,null,f),s=z0(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function SE(s,l,f){s.lanes|=l;var p=s.alternate;p!==null&&(p.lanes|=l),t0(s.return,l,f)}function B0(s,l,f,p,y,x){var N=s.memoizedState;N===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:y,treeForkCount:x}:(N.isBackwards=l,N.rendering=null,N.renderingStartTime=0,N.last=p,N.tail=f,N.tailMode=y,N.treeForkCount=x)}function wE(s,l,f){var p=l.pendingProps,y=p.revealOrder,x=p.tail;p=p.children;var N=yn.current,F=(N&2)!==0;if(F?(N=N&1|2,l.flags|=128):N&=1,rt(yn,N),Jn(s,l,p,f),p=_e?_f:0,!F&&s!==null&&(s.flags&128)!==0)t:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&SE(s,f,l);else if(s.tag===19)SE(s,f,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break t;for(;s.sibling===null;){if(s.return===null||s.return===l)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(f=l.child,y=null;f!==null;)s=f.alternate,s!==null&&pp(s)===null&&(y=f),f=f.sibling;f=y,f===null?(y=l.child,l.child=null):(y=f.sibling,f.sibling=null),B0(l,!1,y,f,x,p);break;case"backwards":case"unstable_legacy-backwards":for(f=null,y=l.child,l.child=null;y!==null;){if(s=y.alternate,s!==null&&pp(s)===null){l.child=y;break}s=y.sibling,y.sibling=f,f=y,y=s}B0(l,!0,f,null,x,p);break;case"together":B0(l,!1,null,null,void 0,p);break;default:l.memoizedState=null}return l.child}function es(s,l,f){if(s!==null&&(l.dependencies=s.dependencies),ro|=l.lanes,(f&l.childLanes)===0)if(s!==null){if(Ec(s,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,f=Wa(s,s.pendingProps),l.child=f,f.return=l;s.sibling!==null;)s=s.sibling,f=f.sibling=Wa(s,s.pendingProps),f.return=l;f.sibling=null}return l.child}function U0(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&sp(s)))}function MP(s,l,f){switch(l.tag){case 3:At(l,l.stateNode.containerInfo),Ws(l,Tn,s.memoizedState.cache),gl();break;case 27:case 5:Kt(l);break;case 4:At(l,l.stateNode.containerInfo);break;case 10:Ws(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,d0(l),null;break;case 13:var p=l.memoizedState;if(p!==null)return p.dehydrated!==null?(Js(l),l.flags|=128,null):(f&l.child.childLanes)!==0?_E(s,l,f):(Js(l),s=es(s,l,f),s!==null?s.sibling:null);Js(l);break;case 19:var y=(s.flags&128)!==0;if(p=(f&l.childLanes)!==0,p||(Ec(s,l,f,!1),p=(f&l.childLanes)!==0),y){if(p)return wE(s,l,f);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),rt(yn,yn.current),p)break;return null;case 22:return l.lanes=0,gE(s,l,f,l.pendingProps);case 24:Ws(l,Tn,s.memoizedState.cache)}return es(s,l,f)}function EE(s,l,f){if(s!==null)if(s.memoizedProps!==l.pendingProps)Cn=!0;else{if(!U0(s,f)&&(l.flags&128)===0)return Cn=!1,MP(s,l,f);Cn=(s.flags&131072)!==0}else Cn=!1,_e&&(l.flags&1048576)!==0&&nw(l,_f,l.index);switch(l.lanes=0,l.tag){case 16:t:{var p=l.pendingProps;if(s=bl(l.elementType),l.type=s,typeof s=="function")$v(s)?(p=wl(s,p),l.tag=1,l=bE(null,l,s,p,f)):(l.tag=0,l=O0(null,l,s,p,f));else{if(s!=null){var y=s.$$typeof;if(y===M){l.tag=11,l=dE(null,l,s,p,f);break t}else if(y===A){l.tag=14,l=hE(null,l,s,p,f);break t}}throw l=K(s)||s,Error(r(306,l,""))}}return l;case 0:return O0(s,l,l.type,l.pendingProps,f);case 1:return p=l.type,y=wl(p,l.pendingProps),bE(s,l,p,y,f);case 3:t:{if(At(l,l.stateNode.containerInfo),s===null)throw Error(r(387));p=l.pendingProps;var x=l.memoizedState;y=x.element,o0(s,l),Df(l,p,null,f);var N=l.memoizedState;if(p=N.cache,Ws(l,Tn,p),p!==x.cache&&e0(l,[Tn],f,!0),Rf(),p=N.element,x.isDehydrated)if(x={element:p,isDehydrated:!1,cache:N.cache},l.updateQueue.baseState=x,l.memoizedState=x,l.flags&256){l=xE(s,l,p,f);break t}else if(p!==y){y=mi(Error(r(424)),l),Sf(y),l=xE(s,l,p,f);break t}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Xe=_i(s.firstChild),Qn=l,_e=!0,Ys=null,bi=!0,f=gw(l,null,p,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(gl(),p===y){l=es(s,l,f);break t}Jn(s,l,p,f)}l=l.child}return l;case 26:return Tp(s,l),s===null?(f=PT(l.type,null,l.pendingProps,null))?l.memoizedState=f:_e||(f=l.type,s=l.pendingProps,p=Fp(dt.current).createElement(f),p[Ye]=l,p[Hn]=s,tr(p,f,s),wn(p),l.stateNode=p):l.memoizedState=PT(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return Kt(l),s===null&&_e&&(p=l.stateNode=NT(l.type,l.pendingProps,dt.current),Qn=l,bi=!0,y=Xe,lo(l.type)?(xy=y,Xe=_i(p.firstChild)):Xe=y),Jn(s,l,l.pendingProps.children,f),Tp(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&_e&&((y=p=Xe)&&(p=c3(p,l.type,l.pendingProps,bi),p!==null?(l.stateNode=p,Qn=l,Xe=_i(p.firstChild),bi=!1,y=!0):y=!1),y||Xs(l)),Kt(l),y=l.type,x=l.pendingProps,N=s!==null?s.memoizedProps:null,p=x.children,gy(y,x)?p=null:N!==null&&gy(y,N)&&(l.flags|=32),l.memoizedState!==null&&(y=p0(s,l,EP,null,null,f),Wf._currentValue=y),Tp(s,l),Jn(s,l,p,f),l.child;case 6:return s===null&&_e&&((s=f=Xe)&&(f=u3(f,l.pendingProps,bi),f!==null?(l.stateNode=f,Qn=l,Xe=null,s=!0):s=!1),s||Xs(l)),null;case 13:return _E(s,l,f);case 4:return At(l,l.stateNode.containerInfo),p=l.pendingProps,s===null?l.child=_l(l,null,p,f):Jn(s,l,p,f),l.child;case 11:return dE(s,l,l.type,l.pendingProps,f);case 7:return Jn(s,l,l.pendingProps,f),l.child;case 8:return Jn(s,l,l.pendingProps.children,f),l.child;case 12:return Jn(s,l,l.pendingProps.children,f),l.child;case 10:return p=l.pendingProps,Ws(l,l.type,p.value),Jn(s,l,p.children,f),l.child;case 9:return y=l.type._context,p=l.pendingProps.children,vl(l),y=Zn(y),p=p(y),l.flags|=1,Jn(s,l,p,f),l.child;case 14:return hE(s,l,l.type,l.pendingProps,f);case 15:return pE(s,l,l.type,l.pendingProps,f);case 19:return wE(s,l,f);case 31:return NP(s,l,f);case 22:return gE(s,l,f,l.pendingProps);case 24:return vl(l),p=Zn(Tn),s===null?(y=i0(),y===null&&(y=Ge,x=n0(),y.pooledCache=x,x.refCount++,x!==null&&(y.pooledCacheLanes|=f),y=x),l.memoizedState={parent:p,cache:y},s0(l),Ws(l,Tn,y)):((s.lanes&f)!==0&&(o0(s,l),Df(l,null,null,f),Rf()),y=s.memoizedState,x=l.memoizedState,y.parent!==p?(y={parent:p,cache:p},l.memoizedState=y,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=y),Ws(l,Tn,p)):(p=x.cache,Ws(l,Tn,p),p!==y.cache&&e0(l,[Tn],f,!0))),Jn(s,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function ns(s){s.flags|=4}function F0(s,l,f,p,y){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(QE())s.flags|=8192;else throw xl=up,a0}else s.flags&=-16777217}function TE(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!BT(l))if(QE())s.flags|=8192;else throw xl=up,a0}function Cp(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?se():536870912,s.lanes|=l,Vc|=l)}function Pf(s,l){if(!_e)switch(s.tailMode){case"hidden":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function We(s){var l=s.alternate!==null&&s.alternate.child===s.child,f=0,p=0;if(l)for(var y=s.child;y!==null;)f|=y.lanes|y.childLanes,p|=y.subtreeFlags&65011712,p|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)f|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=p,s.childLanes=f,l}function OP(s,l,f){var p=l.pendingProps;switch(Kv(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(l),null;case 1:return We(l),null;case 3:return f=l.stateNode,p=null,s!==null&&(p=s.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),Za(Tn),Dt(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(wc(l)?ns(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Zv())),We(l),null;case 26:var y=l.type,x=l.memoizedState;return s===null?(ns(l),x!==null?(We(l),TE(l,x)):(We(l),F0(l,y,null,p,f))):x?x!==s.memoizedState?(ns(l),We(l),TE(l,x)):(We(l),l.flags&=-16777217):(s=s.memoizedProps,s!==p&&ns(l),We(l),F0(l,y,s,p,f)),null;case 27:if(Et(l),f=dt.current,y=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==p&&ns(l);else{if(!p){if(l.stateNode===null)throw Error(r(166));return We(l),null}s=st.current,wc(l)?iw(l):(s=NT(y,p,f),l.stateNode=s,ns(l))}return We(l),null;case 5:if(Et(l),y=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==p&&ns(l);else{if(!p){if(l.stateNode===null)throw Error(r(166));return We(l),null}if(x=st.current,wc(l))iw(l);else{var N=Fp(dt.current);switch(x){case 1:x=N.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:x=N.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":x=N.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":x=N.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":x=N.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof p.is=="string"?N.createElement("select",{is:p.is}):N.createElement("select"),p.multiple?x.multiple=!0:p.size&&(x.size=p.size);break;default:x=typeof p.is=="string"?N.createElement(y,{is:p.is}):N.createElement(y)}}x[Ye]=l,x[Hn]=p;t:for(N=l.child;N!==null;){if(N.tag===5||N.tag===6)x.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===l)break t;for(;N.sibling===null;){if(N.return===null||N.return===l)break t;N=N.return}N.sibling.return=N.return,N=N.sibling}l.stateNode=x;t:switch(tr(x,y,p),y){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break t;case"img":p=!0;break t;default:p=!1}p&&ns(l)}}return We(l),F0(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,f),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==p&&ns(l);else{if(typeof p!="string"&&l.stateNode===null)throw Error(r(166));if(s=dt.current,wc(l)){if(s=l.stateNode,f=l.memoizedProps,p=null,y=Qn,y!==null)switch(y.tag){case 27:case 5:p=y.memoizedProps}s[Ye]=l,s=!!(s.nodeValue===f||p!==null&&p.suppressHydrationWarning===!0||_T(s.nodeValue,f)),s||Xs(l,!0)}else s=Fp(s).createTextNode(p),s[Ye]=l,l.stateNode=s}return We(l),null;case 31:if(f=l.memoizedState,s===null||s.memoizedState!==null){if(p=wc(l),f!==null){if(s===null){if(!p)throw Error(r(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Ye]=l}else gl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;We(l),s=!1}else f=Zv(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),s=!0;if(!s)return l.flags&256?(ni(l),l):(ni(l),null);if((l.flags&128)!==0)throw Error(r(558))}return We(l),null;case 13:if(p=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=wc(l),p!==null&&p.dehydrated!==null){if(s===null){if(!y)throw Error(r(318));if(y=l.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[Ye]=l}else gl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;We(l),y=!1}else y=Zv(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return l.flags&256?(ni(l),l):(ni(l),null)}return ni(l),(l.flags&128)!==0?(l.lanes=f,l):(f=p!==null,s=s!==null&&s.memoizedState!==null,f&&(p=l.child,y=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(y=p.alternate.memoizedState.cachePool.pool),x=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(x=p.memoizedState.cachePool.pool),x!==y&&(p.flags|=2048)),f!==s&&f&&(l.child.flags|=8192),Cp(l,l.updateQueue),We(l),null);case 4:return Dt(),s===null&&uy(l.stateNode.containerInfo),We(l),null;case 10:return Za(l.type),We(l),null;case 19:if(Z(yn),p=l.memoizedState,p===null)return We(l),null;if(y=(l.flags&128)!==0,x=p.rendering,x===null)if(y)Pf(p,!1);else{if(un!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(x=pp(s),x!==null){for(l.flags|=128,Pf(p,!1),s=x.updateQueue,l.updateQueue=s,Cp(l,s),l.subtreeFlags=0,s=f,f=l.child;f!==null;)JS(f,s),f=f.sibling;return rt(yn,yn.current&1|2),_e&&Ka(l,p.treeForkCount),l.child}s=s.sibling}p.tail!==null&&ue()>Np&&(l.flags|=128,y=!0,Pf(p,!1),l.lanes=4194304)}else{if(!y)if(s=pp(x),s!==null){if(l.flags|=128,y=!0,s=s.updateQueue,l.updateQueue=s,Cp(l,s),Pf(p,!0),p.tail===null&&p.tailMode==="hidden"&&!x.alternate&&!_e)return We(l),null}else 2*ue()-p.renderingStartTime>Np&&f!==536870912&&(l.flags|=128,y=!0,Pf(p,!1),l.lanes=4194304);p.isBackwards?(x.sibling=l.child,l.child=x):(s=p.last,s!==null?s.sibling=x:l.child=x,p.last=x)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=ue(),s.sibling=null,f=yn.current,rt(yn,y?f&1|2:f&1),_e&&Ka(l,p.treeForkCount),s):(We(l),null);case 22:case 23:return ni(l),f0(),p=l.memoizedState!==null,s!==null?s.memoizedState!==null!==p&&(l.flags|=8192):p&&(l.flags|=8192),p?(f&536870912)!==0&&(l.flags&128)===0&&(We(l),l.subtreeFlags&6&&(l.flags|=8192)):We(l),f=l.updateQueue,f!==null&&Cp(l,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==f&&(l.flags|=2048),s!==null&&Z(yl),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),Za(Tn),We(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function PP(s,l){switch(Kv(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Za(Tn),Dt(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return Et(l),null;case 31:if(l.memoizedState!==null){if(ni(l),l.alternate===null)throw Error(r(340));gl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(ni(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));gl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Z(yn),null;case 4:return Dt(),null;case 10:return Za(l.type),null;case 22:case 23:return ni(l),f0(),s!==null&&Z(yl),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return Za(Tn),null;case 25:return null;default:return null}}function AE(s,l){switch(Kv(l),l.tag){case 3:Za(Tn),Dt();break;case 26:case 27:case 5:Et(l);break;case 4:Dt();break;case 31:l.memoizedState!==null&&ni(l);break;case 13:ni(l);break;case 19:Z(yn);break;case 10:Za(l.type);break;case 22:case 23:ni(l),f0(),s!==null&&Z(yl);break;case 24:Za(Tn)}}function Vf(s,l){try{var f=l.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var y=p.next;f=y;do{if((f.tag&s)===s){p=void 0;var x=f.create,N=f.inst;p=x(),N.destroy=p}f=f.next}while(f!==y)}}catch(F){Pe(l,l.return,F)}}function eo(s,l,f){try{var p=l.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var x=y.next;p=x;do{if((p.tag&s)===s){var N=p.inst,F=N.destroy;if(F!==void 0){N.destroy=void 0,y=l;var W=f,lt=F;try{lt()}catch(pt){Pe(y,W,pt)}}}p=p.next}while(p!==x)}}catch(pt){Pe(l,l.return,pt)}}function CE(s){var l=s.updateQueue;if(l!==null){var f=s.stateNode;try{vw(l,f)}catch(p){Pe(s,s.return,p)}}}function RE(s,l,f){f.props=wl(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(p){Pe(s,l,p)}}function jf(s,l){try{var f=s.ref;if(f!==null){switch(s.tag){case 26:case 27:case 5:var p=s.stateNode;break;case 30:p=s.stateNode;break;default:p=s.stateNode}typeof f=="function"?s.refCleanup=f(p):f.current=p}}catch(y){Pe(s,l,y)}}function ba(s,l){var f=s.ref,p=s.refCleanup;if(f!==null)if(typeof p=="function")try{p()}catch(y){Pe(s,l,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(y){Pe(s,l,y)}else f.current=null}function DE(s){var l=s.type,f=s.memoizedProps,p=s.stateNode;try{t:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&p.focus();break t;case"img":f.src?p.src=f.src:f.srcSet&&(p.srcset=f.srcSet)}}catch(y){Pe(s,s.return,y)}}function G0(s,l,f){try{var p=s.stateNode;r3(p,s.type,f,l),p[Hn]=l}catch(y){Pe(s,s.return,y)}}function IE(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&lo(s.type)||s.tag===4}function q0(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||IE(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&lo(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function H0(s,l,f){var p=s.tag;if(p===5||p===6)s=s.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(s,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(s),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=Vi));else if(p!==4&&(p===27&&lo(s.type)&&(f=s.stateNode,l=null),s=s.child,s!==null))for(H0(s,l,f),s=s.sibling;s!==null;)H0(s,l,f),s=s.sibling}function Rp(s,l,f){var p=s.tag;if(p===5||p===6)s=s.stateNode,l?f.insertBefore(s,l):f.appendChild(s);else if(p!==4&&(p===27&&lo(s.type)&&(f=s.stateNode),s=s.child,s!==null))for(Rp(s,l,f),s=s.sibling;s!==null;)Rp(s,l,f),s=s.sibling}function kE(s){var l=s.stateNode,f=s.memoizedProps;try{for(var p=s.type,y=l.attributes;y.length;)l.removeAttributeNode(y[0]);tr(l,p,f),l[Ye]=s,l[Hn]=f}catch(x){Pe(s,s.return,x)}}var rs=!1,Rn=!1,$0=!1,NE=typeof WeakSet=="function"?WeakSet:Set,Yn=null;function VP(s,l){if(s=s.containerInfo,hy=Wp,s=qS(s),Lv(s)){if("selectionStart"in s)var f={start:s.selectionStart,end:s.selectionEnd};else t:{f=(f=s.ownerDocument)&&f.defaultView||window;var p=f.getSelection&&f.getSelection();if(p&&p.rangeCount!==0){f=p.anchorNode;var y=p.anchorOffset,x=p.focusNode;p=p.focusOffset;try{f.nodeType,x.nodeType}catch{f=null;break t}var N=0,F=-1,W=-1,lt=0,pt=0,vt=s,ct=null;e:for(;;){for(var ft;vt!==f||y!==0&&vt.nodeType!==3||(F=N+y),vt!==x||p!==0&&vt.nodeType!==3||(W=N+p),vt.nodeType===3&&(N+=vt.nodeValue.length),(ft=vt.firstChild)!==null;)ct=vt,vt=ft;for(;;){if(vt===s)break e;if(ct===f&&++lt===y&&(F=N),ct===x&&++pt===p&&(W=N),(ft=vt.nextSibling)!==null)break;vt=ct,ct=vt.parentNode}vt=ft}f=F===-1||W===-1?null:{start:F,end:W}}else f=null}f=f||{start:0,end:0}}else f=null;for(py={focusedElem:s,selectionRange:f},Wp=!1,Yn=l;Yn!==null;)if(l=Yn,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Yn=s;else for(;Yn!==null;){switch(l=Yn,x=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(f=0;f<s.length;f++)y=s[f],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&x!==null){s=void 0,f=l,y=x.memoizedProps,x=x.memoizedState,p=f.stateNode;try{var Mt=wl(f.type,y);s=p.getSnapshotBeforeUpdate(Mt,x),p.__reactInternalSnapshotBeforeUpdate=s}catch(Ht){Pe(f,f.return,Ht)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,f=s.nodeType,f===9)vy(s);else if(f===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":vy(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,Yn=s;break}Yn=l.return}}function ME(s,l,f){var p=f.flags;switch(f.tag){case 0:case 11:case 15:as(s,f),p&4&&Vf(5,f);break;case 1:if(as(s,f),p&4)if(s=f.stateNode,l===null)try{s.componentDidMount()}catch(N){Pe(f,f.return,N)}else{var y=wl(f.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(y,l,s.__reactInternalSnapshotBeforeUpdate)}catch(N){Pe(f,f.return,N)}}p&64&&CE(f),p&512&&jf(f,f.return);break;case 3:if(as(s,f),p&64&&(s=f.updateQueue,s!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{vw(s,l)}catch(N){Pe(f,f.return,N)}}break;case 27:l===null&&p&4&&kE(f);case 26:case 5:as(s,f),l===null&&p&4&&DE(f),p&512&&jf(f,f.return);break;case 12:as(s,f);break;case 31:as(s,f),p&4&&VE(s,f);break;case 13:as(s,f),p&4&&jE(s,f),p&64&&(s=f.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(f=HP.bind(null,f),f3(s,f))));break;case 22:if(p=f.memoizedState!==null||rs,!p){l=l!==null&&l.memoizedState!==null||Rn,y=rs;var x=Rn;rs=p,(Rn=l)&&!x?ss(s,f,(f.subtreeFlags&8772)!==0):as(s,f),rs=y,Rn=x}break;case 30:break;default:as(s,f)}}function OE(s){var l=s.alternate;l!==null&&(s.alternate=null,OE(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&sc(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Je=null,Vr=!1;function is(s,l,f){for(f=f.child;f!==null;)PE(s,l,f),f=f.sibling}function PE(s,l,f){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(xr,f)}catch{}switch(f.tag){case 26:Rn||ba(f,l),is(s,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Rn||ba(f,l);var p=Je,y=Vr;lo(f.type)&&(Je=f.stateNode,Vr=!1),is(s,l,f),$f(f.stateNode),Je=p,Vr=y;break;case 5:Rn||ba(f,l);case 6:if(p=Je,y=Vr,Je=null,is(s,l,f),Je=p,Vr=y,Je!==null)if(Vr)try{(Je.nodeType===9?Je.body:Je.nodeName==="HTML"?Je.ownerDocument.body:Je).removeChild(f.stateNode)}catch(x){Pe(f,l,x)}else try{Je.removeChild(f.stateNode)}catch(x){Pe(f,l,x)}break;case 18:Je!==null&&(Vr?(s=Je,CT(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,f.stateNode),qc(s)):CT(Je,f.stateNode));break;case 4:p=Je,y=Vr,Je=f.stateNode.containerInfo,Vr=!0,is(s,l,f),Je=p,Vr=y;break;case 0:case 11:case 14:case 15:eo(2,f,l),Rn||eo(4,f,l),is(s,l,f);break;case 1:Rn||(ba(f,l),p=f.stateNode,typeof p.componentWillUnmount=="function"&&RE(f,l,p)),is(s,l,f);break;case 21:is(s,l,f);break;case 22:Rn=(p=Rn)||f.memoizedState!==null,is(s,l,f),Rn=p;break;default:is(s,l,f)}}function VE(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{qc(s)}catch(f){Pe(l,l.return,f)}}}function jE(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{qc(s)}catch(f){Pe(l,l.return,f)}}function jP(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new NE),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new NE),l;default:throw Error(r(435,s.tag))}}function Dp(s,l){var f=jP(s);l.forEach(function(p){if(!f.has(p)){f.add(p);var y=$P.bind(null,s,p);p.then(y,y)}})}function jr(s,l){var f=l.deletions;if(f!==null)for(var p=0;p<f.length;p++){var y=f[p],x=s,N=l,F=N;t:for(;F!==null;){switch(F.tag){case 27:if(lo(F.type)){Je=F.stateNode,Vr=!1;break t}break;case 5:Je=F.stateNode,Vr=!1;break t;case 3:case 4:Je=F.stateNode.containerInfo,Vr=!0;break t}F=F.return}if(Je===null)throw Error(r(160));PE(x,N,y),Je=null,Vr=!1,x=y.alternate,x!==null&&(x.return=null),y.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)zE(l,s),l=l.sibling}var Fi=null;function zE(s,l){var f=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:jr(l,s),zr(s),p&4&&(eo(3,s,s.return),Vf(3,s),eo(5,s,s.return));break;case 1:jr(l,s),zr(s),p&512&&(Rn||f===null||ba(f,f.return)),p&64&&rs&&(s=s.updateQueue,s!==null&&(p=s.callbacks,p!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?p:f.concat(p))));break;case 26:var y=Fi;if(jr(l,s),zr(s),p&512&&(Rn||f===null||ba(f,f.return)),p&4){var x=f!==null?f.memoizedState:null;if(p=s.memoizedState,f===null)if(p===null)if(s.stateNode===null){t:{p=s.type,f=s.memoizedProps,y=y.ownerDocument||y;e:switch(p){case"title":x=y.getElementsByTagName("title")[0],(!x||x[aa]||x[Ye]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=y.createElement(p),y.head.insertBefore(x,y.querySelector("head > title"))),tr(x,p,f),x[Ye]=s,wn(x),p=x;break t;case"link":var N=zT("link","href",y).get(p+(f.href||""));if(N){for(var F=0;F<N.length;F++)if(x=N[F],x.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&x.getAttribute("rel")===(f.rel==null?null:f.rel)&&x.getAttribute("title")===(f.title==null?null:f.title)&&x.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){N.splice(F,1);break e}}x=y.createElement(p),tr(x,p,f),y.head.appendChild(x);break;case"meta":if(N=zT("meta","content",y).get(p+(f.content||""))){for(F=0;F<N.length;F++)if(x=N[F],x.getAttribute("content")===(f.content==null?null:""+f.content)&&x.getAttribute("name")===(f.name==null?null:f.name)&&x.getAttribute("property")===(f.property==null?null:f.property)&&x.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&x.getAttribute("charset")===(f.charSet==null?null:f.charSet)){N.splice(F,1);break e}}x=y.createElement(p),tr(x,p,f),y.head.appendChild(x);break;default:throw Error(r(468,p))}x[Ye]=s,wn(x),p=x}s.stateNode=p}else LT(y,s.type,s.stateNode);else s.stateNode=jT(y,p,s.memoizedProps);else x!==p?(x===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):x.count--,p===null?LT(y,s.type,s.stateNode):jT(y,p,s.memoizedProps)):p===null&&s.stateNode!==null&&G0(s,s.memoizedProps,f.memoizedProps)}break;case 27:jr(l,s),zr(s),p&512&&(Rn||f===null||ba(f,f.return)),f!==null&&p&4&&G0(s,s.memoizedProps,f.memoizedProps);break;case 5:if(jr(l,s),zr(s),p&512&&(Rn||f===null||ba(f,f.return)),s.flags&32){y=s.stateNode;try{Pr(y,"")}catch(Mt){Pe(s,s.return,Mt)}}p&4&&s.stateNode!=null&&(y=s.memoizedProps,G0(s,y,f!==null?f.memoizedProps:y)),p&1024&&($0=!0);break;case 6:if(jr(l,s),zr(s),p&4){if(s.stateNode===null)throw Error(r(162));p=s.memoizedProps,f=s.stateNode;try{f.nodeValue=p}catch(Mt){Pe(s,s.return,Mt)}}break;case 3:if(Hp=null,y=Fi,Fi=Gp(l.containerInfo),jr(l,s),Fi=y,zr(s),p&4&&f!==null&&f.memoizedState.isDehydrated)try{qc(l.containerInfo)}catch(Mt){Pe(s,s.return,Mt)}$0&&($0=!1,LE(s));break;case 4:p=Fi,Fi=Gp(s.stateNode.containerInfo),jr(l,s),zr(s),Fi=p;break;case 12:jr(l,s),zr(s);break;case 31:jr(l,s),zr(s),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,Dp(s,p)));break;case 13:jr(l,s),zr(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(kp=ue()),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,Dp(s,p)));break;case 22:y=s.memoizedState!==null;var W=f!==null&&f.memoizedState!==null,lt=rs,pt=Rn;if(rs=lt||y,Rn=pt||W,jr(l,s),Rn=pt,rs=lt,zr(s),p&8192)t:for(l=s.stateNode,l._visibility=y?l._visibility&-2:l._visibility|1,y&&(f===null||W||rs||Rn||El(s)),f=null,l=s;;){if(l.tag===5||l.tag===26){if(f===null){W=f=l;try{if(x=W.stateNode,y)N=x.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{F=W.stateNode;var vt=W.memoizedProps.style,ct=vt!=null&&vt.hasOwnProperty("display")?vt.display:null;F.style.display=ct==null||typeof ct=="boolean"?"":(""+ct).trim()}}catch(Mt){Pe(W,W.return,Mt)}}}else if(l.tag===6){if(f===null){W=l;try{W.stateNode.nodeValue=y?"":W.memoizedProps}catch(Mt){Pe(W,W.return,Mt)}}}else if(l.tag===18){if(f===null){W=l;try{var ft=W.stateNode;y?RT(ft,!0):RT(W.stateNode,!1)}catch(Mt){Pe(W,W.return,Mt)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break t;for(;l.sibling===null;){if(l.return===null||l.return===s)break t;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}p&4&&(p=s.updateQueue,p!==null&&(f=p.retryQueue,f!==null&&(p.retryQueue=null,Dp(s,f))));break;case 19:jr(l,s),zr(s),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,Dp(s,p)));break;case 30:break;case 21:break;default:jr(l,s),zr(s)}}function zr(s){var l=s.flags;if(l&2){try{for(var f,p=s.return;p!==null;){if(IE(p)){f=p;break}p=p.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var y=f.stateNode,x=q0(s);Rp(s,x,y);break;case 5:var N=f.stateNode;f.flags&32&&(Pr(N,""),f.flags&=-33);var F=q0(s);Rp(s,F,N);break;case 3:case 4:var W=f.stateNode.containerInfo,lt=q0(s);H0(s,lt,W);break;default:throw Error(r(161))}}catch(pt){Pe(s,s.return,pt)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function LE(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;LE(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function as(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)ME(s,l.alternate,l),l=l.sibling}function El(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:eo(4,l,l.return),El(l);break;case 1:ba(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&RE(l,l.return,f),El(l);break;case 27:$f(l.stateNode);case 26:case 5:ba(l,l.return),El(l);break;case 22:l.memoizedState===null&&El(l);break;case 30:El(l);break;default:El(l)}s=s.sibling}}function ss(s,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var p=l.alternate,y=s,x=l,N=x.flags;switch(x.tag){case 0:case 11:case 15:ss(y,x,f),Vf(4,x);break;case 1:if(ss(y,x,f),p=x,y=p.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(lt){Pe(p,p.return,lt)}if(p=x,y=p.updateQueue,y!==null){var F=p.stateNode;try{var W=y.shared.hiddenCallbacks;if(W!==null)for(y.shared.hiddenCallbacks=null,y=0;y<W.length;y++)mw(W[y],F)}catch(lt){Pe(p,p.return,lt)}}f&&N&64&&CE(x),jf(x,x.return);break;case 27:kE(x);case 26:case 5:ss(y,x,f),f&&p===null&&N&4&&DE(x),jf(x,x.return);break;case 12:ss(y,x,f);break;case 31:ss(y,x,f),f&&N&4&&VE(y,x);break;case 13:ss(y,x,f),f&&N&4&&jE(y,x);break;case 22:x.memoizedState===null&&ss(y,x,f),jf(x,x.return);break;case 30:break;default:ss(y,x,f)}l=l.sibling}}function Y0(s,l){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&wf(f))}function X0(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&wf(s))}function Gi(s,l,f,p){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)BE(s,l,f,p),l=l.sibling}function BE(s,l,f,p){var y=l.flags;switch(l.tag){case 0:case 11:case 15:Gi(s,l,f,p),y&2048&&Vf(9,l);break;case 1:Gi(s,l,f,p);break;case 3:Gi(s,l,f,p),y&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&wf(s)));break;case 12:if(y&2048){Gi(s,l,f,p),s=l.stateNode;try{var x=l.memoizedProps,N=x.id,F=x.onPostCommit;typeof F=="function"&&F(N,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(W){Pe(l,l.return,W)}}else Gi(s,l,f,p);break;case 31:Gi(s,l,f,p);break;case 13:Gi(s,l,f,p);break;case 23:break;case 22:x=l.stateNode,N=l.alternate,l.memoizedState!==null?x._visibility&2?Gi(s,l,f,p):zf(s,l):x._visibility&2?Gi(s,l,f,p):(x._visibility|=2,Mc(s,l,f,p,(l.subtreeFlags&10256)!==0||!1)),y&2048&&Y0(N,l);break;case 24:Gi(s,l,f,p),y&2048&&X0(l.alternate,l);break;default:Gi(s,l,f,p)}}function Mc(s,l,f,p,y){for(y=y&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var x=s,N=l,F=f,W=p,lt=N.flags;switch(N.tag){case 0:case 11:case 15:Mc(x,N,F,W,y),Vf(8,N);break;case 23:break;case 22:var pt=N.stateNode;N.memoizedState!==null?pt._visibility&2?Mc(x,N,F,W,y):zf(x,N):(pt._visibility|=2,Mc(x,N,F,W,y)),y&&lt&2048&&Y0(N.alternate,N);break;case 24:Mc(x,N,F,W,y),y&&lt&2048&&X0(N.alternate,N);break;default:Mc(x,N,F,W,y)}l=l.sibling}}function zf(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=s,p=l,y=p.flags;switch(p.tag){case 22:zf(f,p),y&2048&&Y0(p.alternate,p);break;case 24:zf(f,p),y&2048&&X0(p.alternate,p);break;default:zf(f,p)}l=l.sibling}}var Lf=8192;function Oc(s,l,f){if(s.subtreeFlags&Lf)for(s=s.child;s!==null;)UE(s,l,f),s=s.sibling}function UE(s,l,f){switch(s.tag){case 26:Oc(s,l,f),s.flags&Lf&&s.memoizedState!==null&&w3(f,Fi,s.memoizedState,s.memoizedProps);break;case 5:Oc(s,l,f);break;case 3:case 4:var p=Fi;Fi=Gp(s.stateNode.containerInfo),Oc(s,l,f),Fi=p;break;case 22:s.memoizedState===null&&(p=s.alternate,p!==null&&p.memoizedState!==null?(p=Lf,Lf=16777216,Oc(s,l,f),Lf=p):Oc(s,l,f));break;default:Oc(s,l,f)}}function FE(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function Bf(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var p=l[f];Yn=p,qE(p,s)}FE(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)GE(s),s=s.sibling}function GE(s){switch(s.tag){case 0:case 11:case 15:Bf(s),s.flags&2048&&eo(9,s,s.return);break;case 3:Bf(s);break;case 12:Bf(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Ip(s)):Bf(s);break;default:Bf(s)}}function Ip(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var p=l[f];Yn=p,qE(p,s)}FE(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:eo(8,l,l.return),Ip(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,Ip(l));break;default:Ip(l)}s=s.sibling}}function qE(s,l){for(;Yn!==null;){var f=Yn;switch(f.tag){case 0:case 11:case 15:eo(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var p=f.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:wf(f.memoizedState.cache)}if(p=f.child,p!==null)p.return=f,Yn=p;else t:for(f=s;Yn!==null;){p=Yn;var y=p.sibling,x=p.return;if(OE(p),p===f){Yn=null;break t}if(y!==null){y.return=x,Yn=y;break t}Yn=x}}}var zP={getCacheForType:function(s){var l=Zn(Tn),f=l.data.get(s);return f===void 0&&(f=s(),l.data.set(s,f)),f},cacheSignal:function(){return Zn(Tn).controller.signal}},LP=typeof WeakMap=="function"?WeakMap:Map,De=0,Ge=null,de=null,pe=0,Oe=0,ri=null,no=!1,Pc=!1,W0=!1,os=0,un=0,ro=0,Tl=0,K0=0,ii=0,Vc=0,Uf=null,Lr=null,Q0=!1,kp=0,HE=0,Np=1/0,Mp=null,io=null,jn=0,ao=null,jc=null,ls=0,Z0=0,J0=null,$E=null,Ff=0,ty=null;function ai(){return(De&2)!==0&&pe!==0?pe&-pe:H.T!==null?sy():el()}function YE(){if(ii===0)if((pe&536870912)===0||_e){var s=It;It<<=1,(It&3932160)===0&&(It=262144),ii=s}else ii=536870912;return s=ei.current,s!==null&&(s.flags|=32),ii}function Br(s,l,f){(s===Ge&&(Oe===2||Oe===9)||s.cancelPendingCommit!==null)&&(zc(s,0),so(s,pe,ii,!1)),Vn(s,f),((De&2)===0||s!==Ge)&&(s===Ge&&((De&2)===0&&(Tl|=f),un===4&&so(s,pe,ii,!1)),xa(s))}function XE(s,l,f){if((De&6)!==0)throw Error(r(327));var p=!f&&(l&127)===0&&(l&s.expiredLanes)===0||pn(s,l),y=p?FP(s,l):ny(s,l,!0),x=p;do{if(y===0){Pc&&!p&&so(s,l,0,!1);break}else{if(f=s.current.alternate,x&&!BP(f)){y=ny(s,l,!1),x=!1;continue}if(y===2){if(x=l,s.errorRecoveryDisabledLanes&x)var N=0;else N=s.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){l=N;t:{var F=s;y=Uf;var W=F.current.memoizedState.isDehydrated;if(W&&(zc(F,N).flags|=256),N=ny(F,N,!1),N!==2){if(W0&&!W){F.errorRecoveryDisabledLanes|=x,Tl|=x,y=4;break t}x=Lr,Lr=y,x!==null&&(Lr===null?Lr=x:Lr.push.apply(Lr,x))}y=N}if(x=!1,y!==2)continue}}if(y===1){zc(s,0),so(s,l,0,!0);break}t:{switch(p=s,x=y,x){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:so(p,l,ii,!no);break t;case 2:Lr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(y=kp+300-ue(),10<y)){if(so(p,l,ii,!no),ln(p,0,!0)!==0)break t;ls=l,p.timeoutHandle=TT(WE.bind(null,p,f,Lr,Mp,Q0,l,ii,Tl,Vc,no,x,"Throttled",-0,0),y);break t}WE(p,f,Lr,Mp,Q0,l,ii,Tl,Vc,no,x,null,-0,0)}}break}while(!0);xa(s)}function WE(s,l,f,p,y,x,N,F,W,lt,pt,vt,ct,ft){if(s.timeoutHandle=-1,vt=l.subtreeFlags,vt&8192||(vt&16785408)===16785408){vt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vi},UE(l,x,vt);var Mt=(x&62914560)===x?kp-ue():(x&4194048)===x?HE-ue():0;if(Mt=E3(vt,Mt),Mt!==null){ls=x,s.cancelPendingCommit=Mt(rT.bind(null,s,l,x,f,p,y,N,F,W,pt,vt,null,ct,ft)),so(s,x,N,!lt);return}}rT(s,l,x,f,p,y,N,F,W)}function BP(s){for(var l=s;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var p=0;p<f.length;p++){var y=f[p],x=y.getSnapshot;y=y.value;try{if(!Jr(x(),y))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function so(s,l,f,p){l&=~K0,l&=~Tl,s.suspendedLanes|=l,s.pingedLanes&=~l,p&&(s.warmLanes|=l),p=s.expirationTimes;for(var y=l;0<y;){var x=31-$e(y),N=1<<x;p[x]=-1,y&=~N}f!==0&&Mr(s,f,l)}function Op(){return(De&6)===0?(Gf(0),!1):!0}function ey(){if(de!==null){if(Oe===0)var s=de.return;else s=de,Qa=ml=null,v0(s),Rc=null,Tf=0,s=de;for(;s!==null;)AE(s.alternate,s),s=s.return;de=null}}function zc(s,l){var f=s.timeoutHandle;f!==-1&&(s.timeoutHandle=-1,s3(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),ls=0,ey(),Ge=s,de=f=Wa(s.current,null),pe=l,Oe=0,ri=null,no=!1,Pc=pn(s,l),W0=!1,Vc=ii=K0=Tl=ro=un=0,Lr=Uf=null,Q0=!1,(l&8)!==0&&(l|=l&32);var p=s.entangledLanes;if(p!==0)for(s=s.entanglements,p&=l;0<p;){var y=31-$e(p),x=1<<y;l|=s[y],p&=~x}return os=l,ep(),f}function KE(s,l){ie=null,H.H=Mf,l===Cc||l===cp?(l=dw(),Oe=3):l===a0?(l=dw(),Oe=4):Oe=l===M0?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,ri=l,de===null&&(un=1,wp(s,mi(l,s.current)))}function QE(){var s=ei.current;return s===null?!0:(pe&4194048)===pe?xi===null:(pe&62914560)===pe||(pe&536870912)!==0?s===xi:!1}function ZE(){var s=H.H;return H.H=Mf,s===null?Mf:s}function JE(){var s=H.A;return H.A=zP,s}function Pp(){un=4,no||(pe&4194048)!==pe&&ei.current!==null||(Pc=!0),(ro&134217727)===0&&(Tl&134217727)===0||Ge===null||so(Ge,pe,ii,!1)}function ny(s,l,f){var p=De;De|=2;var y=ZE(),x=JE();(Ge!==s||pe!==l)&&(Mp=null,zc(s,l)),l=!1;var N=un;t:do try{if(Oe!==0&&de!==null){var F=de,W=ri;switch(Oe){case 8:ey(),N=6;break t;case 3:case 2:case 9:case 6:ei.current===null&&(l=!0);var lt=Oe;if(Oe=0,ri=null,Lc(s,F,W,lt),f&&Pc){N=0;break t}break;default:lt=Oe,Oe=0,ri=null,Lc(s,F,W,lt)}}UP(),N=un;break}catch(pt){KE(s,pt)}while(!0);return l&&s.shellSuspendCounter++,Qa=ml=null,De=p,H.H=y,H.A=x,de===null&&(Ge=null,pe=0,ep()),N}function UP(){for(;de!==null;)tT(de)}function FP(s,l){var f=De;De|=2;var p=ZE(),y=JE();Ge!==s||pe!==l?(Mp=null,Np=ue()+500,zc(s,l)):Pc=pn(s,l);t:do try{if(Oe!==0&&de!==null){l=de;var x=ri;e:switch(Oe){case 1:Oe=0,ri=null,Lc(s,l,x,1);break;case 2:case 9:if(uw(x)){Oe=0,ri=null,eT(l);break}l=function(){Oe!==2&&Oe!==9||Ge!==s||(Oe=7),xa(s)},x.then(l,l);break t;case 3:Oe=7;break t;case 4:Oe=5;break t;case 7:uw(x)?(Oe=0,ri=null,eT(l)):(Oe=0,ri=null,Lc(s,l,x,7));break;case 5:var N=null;switch(de.tag){case 26:N=de.memoizedState;case 5:case 27:var F=de;if(N?BT(N):F.stateNode.complete){Oe=0,ri=null;var W=F.sibling;if(W!==null)de=W;else{var lt=F.return;lt!==null?(de=lt,Vp(lt)):de=null}break e}}Oe=0,ri=null,Lc(s,l,x,5);break;case 6:Oe=0,ri=null,Lc(s,l,x,6);break;case 8:ey(),un=6;break t;default:throw Error(r(462))}}GP();break}catch(pt){KE(s,pt)}while(!0);return Qa=ml=null,H.H=p,H.A=y,De=f,de!==null?0:(Ge=null,pe=0,ep(),un)}function GP(){for(;de!==null&&!Qe();)tT(de)}function tT(s){var l=EE(s.alternate,s,os);s.memoizedProps=s.pendingProps,l===null?Vp(s):de=l}function eT(s){var l=s,f=l.alternate;switch(l.tag){case 15:case 0:l=yE(f,l,l.pendingProps,l.type,void 0,pe);break;case 11:l=yE(f,l,l.pendingProps,l.type.render,l.ref,pe);break;case 5:v0(l);default:AE(f,l),l=de=JS(l,os),l=EE(f,l,os)}s.memoizedProps=s.pendingProps,l===null?Vp(s):de=l}function Lc(s,l,f,p){Qa=ml=null,v0(l),Rc=null,Tf=0;var y=l.return;try{if(kP(s,y,l,f,pe)){un=1,wp(s,mi(f,s.current)),de=null;return}}catch(x){if(y!==null)throw de=y,x;un=1,wp(s,mi(f,s.current)),de=null;return}l.flags&32768?(_e||p===1?s=!0:Pc||(pe&536870912)!==0?s=!1:(no=s=!0,(p===2||p===9||p===3||p===6)&&(p=ei.current,p!==null&&p.tag===13&&(p.flags|=16384))),nT(l,s)):Vp(l)}function Vp(s){var l=s;do{if((l.flags&32768)!==0){nT(l,no);return}s=l.return;var f=OP(l.alternate,l,os);if(f!==null){de=f;return}if(l=l.sibling,l!==null){de=l;return}de=l=s}while(l!==null);un===0&&(un=5)}function nT(s,l){do{var f=PP(s.alternate,s);if(f!==null){f.flags&=32767,de=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(s=s.sibling,s!==null)){de=s;return}de=s=f}while(s!==null);un=6,de=null}function rT(s,l,f,p,y,x,N,F,W){s.cancelPendingCommit=null;do jp();while(jn!==0);if((De&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(x=l.lanes|l.childLanes,x|=qv,lr(s,f,x,N,F,W),s===Ge&&(de=Ge=null,pe=0),jc=l,ao=s,ls=f,Z0=x,J0=y,$E=p,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,YP(kr,function(){return lT(),null})):(s.callbackNode=null,s.callbackPriority=0),p=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||p){p=H.T,H.T=null,y=$.p,$.p=2,N=De,De|=4;try{VP(s,l,f)}finally{De=N,$.p=y,H.T=p}}jn=1,iT(),aT(),sT()}}function iT(){if(jn===1){jn=0;var s=ao,l=jc,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=H.T,H.T=null;var p=$.p;$.p=2;var y=De;De|=4;try{zE(l,s);var x=py,N=qS(s.containerInfo),F=x.focusedElem,W=x.selectionRange;if(N!==F&&F&&F.ownerDocument&&GS(F.ownerDocument.documentElement,F)){if(W!==null&&Lv(F)){var lt=W.start,pt=W.end;if(pt===void 0&&(pt=lt),"selectionStart"in F)F.selectionStart=lt,F.selectionEnd=Math.min(pt,F.value.length);else{var vt=F.ownerDocument||document,ct=vt&&vt.defaultView||window;if(ct.getSelection){var ft=ct.getSelection(),Mt=F.textContent.length,Ht=Math.min(W.start,Mt),Be=W.end===void 0?Ht:Math.min(W.end,Mt);!ft.extend&&Ht>Be&&(N=Be,Be=Ht,Ht=N);var nt=FS(F,Ht),tt=FS(F,Be);if(nt&&tt&&(ft.rangeCount!==1||ft.anchorNode!==nt.node||ft.anchorOffset!==nt.offset||ft.focusNode!==tt.node||ft.focusOffset!==tt.offset)){var ot=vt.createRange();ot.setStart(nt.node,nt.offset),ft.removeAllRanges(),Ht>Be?(ft.addRange(ot),ft.extend(tt.node,tt.offset)):(ot.setEnd(tt.node,tt.offset),ft.addRange(ot))}}}}for(vt=[],ft=F;ft=ft.parentNode;)ft.nodeType===1&&vt.push({element:ft,left:ft.scrollLeft,top:ft.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<vt.length;F++){var gt=vt[F];gt.element.scrollLeft=gt.left,gt.element.scrollTop=gt.top}}Wp=!!hy,py=hy=null}finally{De=y,$.p=p,H.T=f}}s.current=l,jn=2}}function aT(){if(jn===2){jn=0;var s=ao,l=jc,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=H.T,H.T=null;var p=$.p;$.p=2;var y=De;De|=4;try{ME(s,l.alternate,l)}finally{De=y,$.p=p,H.T=f}}jn=3}}function sT(){if(jn===4||jn===3){jn=0,xe();var s=ao,l=jc,f=ls,p=$E;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?jn=5:(jn=0,jc=ao=null,oT(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(io=null),cr(f),l=l.stateNode,on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(xr,l,void 0,(l.current.flags&128)===128)}catch{}if(p!==null){l=H.T,y=$.p,$.p=2,H.T=null;try{for(var x=s.onRecoverableError,N=0;N<p.length;N++){var F=p[N];x(F.value,{componentStack:F.stack})}}finally{H.T=l,$.p=y}}(ls&3)!==0&&jp(),xa(s),y=s.pendingLanes,(f&261930)!==0&&(y&42)!==0?s===ty?Ff++:(Ff=0,ty=s):Ff=0,Gf(0)}}function oT(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,wf(l)))}function jp(){return iT(),aT(),sT(),lT()}function lT(){if(jn!==5)return!1;var s=ao,l=Z0;Z0=0;var f=cr(ls),p=H.T,y=$.p;try{$.p=32>f?32:f,H.T=null,f=J0,J0=null;var x=ao,N=ls;if(jn=0,jc=ao=null,ls=0,(De&6)!==0)throw Error(r(331));var F=De;if(De|=4,GE(x.current),BE(x,x.current,N,f),De=F,Gf(0,!1),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(xr,x)}catch{}return!0}finally{$.p=y,H.T=p,oT(s,l)}}function cT(s,l,f){l=mi(f,l),l=N0(s.stateNode,l,2),s=Zs(s,l,2),s!==null&&(Vn(s,2),xa(s))}function Pe(s,l,f){if(s.tag===3)cT(s,s,f);else for(;l!==null;){if(l.tag===3){cT(l,s,f);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(io===null||!io.has(p))){s=mi(f,s),f=uE(2),p=Zs(l,f,2),p!==null&&(fE(f,p,l,s),Vn(p,2),xa(p));break}}l=l.return}}function ry(s,l,f){var p=s.pingCache;if(p===null){p=s.pingCache=new LP;var y=new Set;p.set(l,y)}else y=p.get(l),y===void 0&&(y=new Set,p.set(l,y));y.has(f)||(W0=!0,y.add(f),s=qP.bind(null,s,l,f),l.then(s,s))}function qP(s,l,f){var p=s.pingCache;p!==null&&p.delete(l),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,Ge===s&&(pe&f)===f&&(un===4||un===3&&(pe&62914560)===pe&&300>ue()-kp?(De&2)===0&&zc(s,0):K0|=f,Vc===pe&&(Vc=0)),xa(s)}function uT(s,l){l===0&&(l=se()),s=hl(s,l),s!==null&&(Vn(s,l),xa(s))}function HP(s){var l=s.memoizedState,f=0;l!==null&&(f=l.retryLane),uT(s,f)}function $P(s,l){var f=0;switch(s.tag){case 31:case 13:var p=s.stateNode,y=s.memoizedState;y!==null&&(f=y.retryLane);break;case 19:p=s.stateNode;break;case 22:p=s.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(l),uT(s,f)}function YP(s,l){return Lt(s,l)}var zp=null,Bc=null,iy=!1,Lp=!1,ay=!1,oo=0;function xa(s){s!==Bc&&s.next===null&&(Bc===null?zp=Bc=s:Bc=Bc.next=s),Lp=!0,iy||(iy=!0,WP())}function Gf(s,l){if(!ay&&Lp){ay=!0;do for(var f=!1,p=zp;p!==null;){if(s!==0){var y=p.pendingLanes;if(y===0)var x=0;else{var N=p.suspendedLanes,F=p.pingedLanes;x=(1<<31-$e(42|s)+1)-1,x&=y&~(N&~F),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(f=!0,pT(p,x))}else x=pe,x=ln(p,p===Ge?x:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(x&3)===0||pn(p,x)||(f=!0,pT(p,x));p=p.next}while(f);ay=!1}}function XP(){fT()}function fT(){Lp=iy=!1;var s=0;oo!==0&&a3()&&(s=oo);for(var l=ue(),f=null,p=zp;p!==null;){var y=p.next,x=dT(p,l);x===0?(p.next=null,f===null?zp=y:f.next=y,y===null&&(Bc=f)):(f=p,(s!==0||(x&3)!==0)&&(Lp=!0)),p=y}jn!==0&&jn!==5||Gf(s),oo!==0&&(oo=0)}function dT(s,l){for(var f=s.suspendedLanes,p=s.pingedLanes,y=s.expirationTimes,x=s.pendingLanes&-62914561;0<x;){var N=31-$e(x),F=1<<N,W=y[N];W===-1?((F&f)===0||(F&p)!==0)&&(y[N]=ui(F,l)):W<=l&&(s.expiredLanes|=F),x&=~F}if(l=Ge,f=pe,f=ln(s,s===l?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p=s.callbackNode,f===0||s===l&&(Oe===2||Oe===9)||s.cancelPendingCommit!==null)return p!==null&&p!==null&&Ne(p),s.callbackNode=null,s.callbackPriority=0;if((f&3)===0||pn(s,f)){if(l=f&-f,l===s.callbackPriority)return l;switch(p!==null&&Ne(p),cr(f)){case 2:case 8:f=or;break;case 32:f=kr;break;case 268435456:f=Ps;break;default:f=kr}return p=hT.bind(null,s),f=Lt(f,p),s.callbackPriority=l,s.callbackNode=f,l}return p!==null&&p!==null&&Ne(p),s.callbackPriority=2,s.callbackNode=null,2}function hT(s,l){if(jn!==0&&jn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var f=s.callbackNode;if(jp()&&s.callbackNode!==f)return null;var p=pe;return p=ln(s,s===Ge?p:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p===0?null:(XE(s,p,l),dT(s,ue()),s.callbackNode!=null&&s.callbackNode===f?hT.bind(null,s):null)}function pT(s,l){if(jp())return null;XE(s,l,!0)}function WP(){o3(function(){(De&6)!==0?Lt(Wn,XP):fT()})}function sy(){if(oo===0){var s=Tc;s===0&&(s=St,St<<=1,(St&261888)===0&&(St=256)),oo=s}return oo}function gT(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:uc(""+s)}function mT(s,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,s.id&&f.setAttribute("form",s.id),l.parentNode.insertBefore(f,l),s=new FormData(s),f.parentNode.removeChild(f),s}function KP(s,l,f,p,y){if(l==="submit"&&f&&f.stateNode===y){var x=gT((y[Hn]||null).action),N=p.submitter;N&&(l=(l=N[Hn]||null)?gT(l.formAction):N.getAttribute("formAction"),l!==null&&(x=l,N=null));var F=new ha("action","action",null,p,y);s.push({event:F,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(oo!==0){var W=N?mT(y,N):new FormData(y);A0(f,{pending:!0,data:W,method:y.method,action:x},null,W)}}else typeof x=="function"&&(F.preventDefault(),W=N?mT(y,N):new FormData(y),A0(f,{pending:!0,data:W,method:y.method,action:x},x,W))},currentTarget:y}]})}}for(var oy=0;oy<Gv.length;oy++){var ly=Gv[oy],QP=ly.toLowerCase(),ZP=ly[0].toUpperCase()+ly.slice(1);Ui(QP,"on"+ZP)}Ui(YS,"onAnimationEnd"),Ui(XS,"onAnimationIteration"),Ui(WS,"onAnimationStart"),Ui("dblclick","onDoubleClick"),Ui("focusin","onFocus"),Ui("focusout","onBlur"),Ui(pP,"onTransitionRun"),Ui(gP,"onTransitionStart"),Ui(mP,"onTransitionCancel"),Ui(KS,"onTransitionEnd"),ca("onMouseEnter",["mouseout","mouseover"]),ca("onMouseLeave",["mouseout","mouseover"]),ca("onPointerEnter",["pointerout","pointerover"]),ca("onPointerLeave",["pointerout","pointerover"]),la("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),la("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),la("onBeforeInput",["compositionend","keypress","textInput","paste"]),la("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),la("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),la("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qf));function vT(s,l){l=(l&4)!==0;for(var f=0;f<s.length;f++){var p=s[f],y=p.event;p=p.listeners;t:{var x=void 0;if(l)for(var N=p.length-1;0<=N;N--){var F=p[N],W=F.instance,lt=F.currentTarget;if(F=F.listener,W!==x&&y.isPropagationStopped())break t;x=F,y.currentTarget=lt;try{x(y)}catch(pt){tp(pt)}y.currentTarget=null,x=W}else for(N=0;N<p.length;N++){if(F=p[N],W=F.instance,lt=F.currentTarget,F=F.listener,W!==x&&y.isPropagationStopped())break t;x=F,y.currentTarget=lt;try{x(y)}catch(pt){tp(pt)}y.currentTarget=null,x=W}}}}function he(s,l){var f=l[ac];f===void 0&&(f=l[ac]=new Set);var p=s+"__bubble";f.has(p)||(yT(l,s,2,!1),f.add(p))}function cy(s,l,f){var p=0;l&&(p|=4),yT(f,s,p,l)}var Bp="_reactListening"+Math.random().toString(36).slice(2);function uy(s){if(!s[Bp]){s[Bp]=!0,ef.forEach(function(f){f!=="selectionchange"&&(JP.has(f)||cy(f,!1,s),cy(f,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Bp]||(l[Bp]=!0,cy("selectionchange",!1,l))}}function yT(s,l,f,p){switch(YT(l)){case 2:var y=C3;break;case 8:y=R3;break;default:y=Ty}f=y.bind(null,l,f,s),y=void 0,!al||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),p?y!==void 0?s.addEventListener(l,f,{capture:!0,passive:y}):s.addEventListener(l,f,!0):y!==void 0?s.addEventListener(l,f,{passive:y}):s.addEventListener(l,f,!1)}function fy(s,l,f,p,y){var x=p;if((l&1)===0&&(l&2)===0&&p!==null)t:for(;;){if(p===null)return;var N=p.tag;if(N===3||N===4){var F=p.stateNode.containerInfo;if(F===y)break;if(N===4)for(N=p.return;N!==null;){var W=N.tag;if((W===3||W===4)&&N.stateNode.containerInfo===y)return;N=N.return}for(;F!==null;){if(N=sa(F),N===null)return;if(W=N.tag,W===5||W===6||W===26||W===27){p=x=N;continue t}F=F.parentNode}}p=p.return}Fs(function(){var lt=x,pt=di(f),vt=[];t:{var ct=QS.get(s);if(ct!==void 0){var ft=ha,Mt=s;switch(s){case"keypress":if(ol(f)===0)break t;case"keydown":case"keyup":ft=Qh;break;case"focusin":Mt="focus",ft=cl;break;case"focusout":Mt="blur",ft=cl;break;case"beforeblur":case"afterblur":ft=cl;break;case"click":if(f.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ft=gf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ft=Fh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ft=R;break;case YS:case XS:case WS:ft=qh;break;case KS:ft=G;break;case"scroll":case"scrollend":ft=pf;break;case"wheel":ft=ut;break;case"copy":case"cut":case"paste":ft=Hh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ft=Xa;break;case"toggle":case"beforetoggle":ft=re}var Ht=(l&4)!==0,Be=!Ht&&(s==="scroll"||s==="scrollend"),nt=Ht?ct!==null?ct+"Capture":null:ct;Ht=[];for(var tt=lt,ot;tt!==null;){var gt=tt;if(ot=gt.stateNode,gt=gt.tag,gt!==5&&gt!==26&&gt!==27||ot===null||nt===null||(gt=ji(tt,nt),gt!=null&&Ht.push(Hf(tt,gt,ot))),Be)break;tt=tt.return}0<Ht.length&&(ct=new ft(ct,Mt,null,f,pt),vt.push({event:ct,listeners:Ht}))}}if((l&7)===0){t:{if(ct=s==="mouseover"||s==="pointerover",ft=s==="mouseout"||s==="pointerout",ct&&f!==ff&&(Mt=f.relatedTarget||f.fromElement)&&(sa(Mt)||Mt[ia]))break t;if((ft||ct)&&(ct=pt.window===pt?pt:(ct=pt.ownerDocument)?ct.defaultView||ct.parentWindow:window,ft?(Mt=f.relatedTarget||f.toElement,ft=lt,Mt=Mt?sa(Mt):null,Mt!==null&&(Be=a(Mt),Ht=Mt.tag,Mt!==Be||Ht!==5&&Ht!==27&&Ht!==6)&&(Mt=null)):(ft=null,Mt=lt),ft!==Mt)){if(Ht=gf,gt="onMouseLeave",nt="onMouseEnter",tt="mouse",(s==="pointerout"||s==="pointerover")&&(Ht=Xa,gt="onPointerLeave",nt="onPointerEnter",tt="pointer"),Be=ft==null?ct:Qr(ft),ot=Mt==null?ct:Qr(Mt),ct=new Ht(gt,tt+"leave",ft,f,pt),ct.target=Be,ct.relatedTarget=ot,gt=null,sa(pt)===lt&&(Ht=new Ht(nt,tt+"enter",Mt,f,pt),Ht.target=ot,Ht.relatedTarget=Be,gt=Ht),Be=gt,ft&&Mt)e:{for(Ht=t3,nt=ft,tt=Mt,ot=0,gt=nt;gt;gt=Ht(gt))ot++;gt=0;for(var Bt=tt;Bt;Bt=Ht(Bt))gt++;for(;0<ot-gt;)nt=Ht(nt),ot--;for(;0<gt-ot;)tt=Ht(tt),gt--;for(;ot--;){if(nt===tt||tt!==null&&nt===tt.alternate){Ht=nt;break e}nt=Ht(nt),tt=Ht(tt)}Ht=null}else Ht=null;ft!==null&&bT(vt,ct,ft,Ht,!1),Mt!==null&&Be!==null&&bT(vt,Be,Mt,Ht,!0)}}t:{if(ct=lt?Qr(lt):window,ft=ct.nodeName&&ct.nodeName.toLowerCase(),ft==="select"||ft==="input"&&ct.type==="file")var Ae=VS;else if(OS(ct))if(jS)Ae=fP;else{Ae=cP;var Pt=lP}else ft=ct.nodeName,!ft||ft.toLowerCase()!=="input"||ct.type!=="checkbox"&&ct.type!=="radio"?lt&&cc(lt.elementType)&&(Ae=VS):Ae=uP;if(Ae&&(Ae=Ae(s,lt))){PS(vt,Ae,f,pt);break t}Pt&&Pt(s,ct,lt),s==="focusout"&&lt&&ct.type==="number"&&lt.memoizedProps.value!=null&&lf(ct,"number",ct.value)}switch(Pt=lt?Qr(lt):window,s){case"focusin":(OS(Pt)||Pt.contentEditable==="true")&&(vc=Pt,Bv=lt,xf=null);break;case"focusout":xf=Bv=vc=null;break;case"mousedown":Uv=!0;break;case"contextmenu":case"mouseup":case"dragend":Uv=!1,HS(vt,f,pt);break;case"selectionchange":if(hP)break;case"keydown":case"keyup":HS(vt,f,pt)}var oe;if(Re)t:{switch(s){case"compositionstart":var ge="onCompositionStart";break t;case"compositionend":ge="onCompositionEnd";break t;case"compositionupdate":ge="onCompositionUpdate";break t}ge=void 0}else mc?ul(s,f)&&(ge="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(ge="onCompositionStart");ge&&(ma&&f.locale!=="ko"&&(mc||ge!=="onCompositionStart"?ge==="onCompositionEnd"&&mc&&(oe=hf()):(da=pt,df="value"in da?da.value:da.textContent,mc=!0)),Pt=Up(lt,ge),0<Pt.length&&(ge=new ga(ge,s,null,f,pt),vt.push({event:ge,listeners:Pt}),oe?ge.data=oe:(oe=gc(f),oe!==null&&(ge.data=oe)))),(oe=pi?iP(s,f):aP(s,f))&&(ge=Up(lt,"onBeforeInput"),0<ge.length&&(Pt=new ga("onBeforeInput","beforeinput",null,f,pt),vt.push({event:Pt,listeners:ge}),Pt.data=oe)),KP(vt,s,lt,f,pt)}vT(vt,l)})}function Hf(s,l,f){return{instance:s,listener:l,currentTarget:f}}function Up(s,l){for(var f=l+"Capture",p=[];s!==null;){var y=s,x=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||x===null||(y=ji(s,f),y!=null&&p.unshift(Hf(s,y,x)),y=ji(s,l),y!=null&&p.push(Hf(s,y,x))),s.tag===3)return p;s=s.return}return[]}function t3(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function bT(s,l,f,p,y){for(var x=l._reactName,N=[];f!==null&&f!==p;){var F=f,W=F.alternate,lt=F.stateNode;if(F=F.tag,W!==null&&W===p)break;F!==5&&F!==26&&F!==27||lt===null||(W=lt,y?(lt=ji(f,x),lt!=null&&N.unshift(Hf(f,lt,W))):y||(lt=ji(f,x),lt!=null&&N.push(Hf(f,lt,W)))),f=f.return}N.length!==0&&s.push({event:l,listeners:N})}var e3=/\r\n?/g,n3=/\u0000|\uFFFD/g;function xT(s){return(typeof s=="string"?s:""+s).replace(e3,`
`).replace(n3,"")}function _T(s,l){return l=xT(l),xT(s)===l}function Le(s,l,f,p,y,x){switch(f){case"children":typeof p=="string"?l==="body"||l==="textarea"&&p===""||Pr(s,p):(typeof p=="number"||typeof p=="bigint")&&l!=="body"&&Pr(s,""+p);break;case"className":Zr(s,"class",p);break;case"tabIndex":Zr(s,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Zr(s,f,p);break;case"style":uf(s,p,x);break;case"data":if(l!=="object"){Zr(s,"data",p);break}case"src":case"href":if(p===""&&(l!=="a"||f!=="href")){s.removeAttribute(f);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(f);break}p=uc(""+p),s.setAttribute(f,p);break;case"action":case"formAction":if(typeof p=="function"){s.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(f==="formAction"?(l!=="input"&&Le(s,l,"name",y.name,y,null),Le(s,l,"formEncType",y.formEncType,y,null),Le(s,l,"formMethod",y.formMethod,y,null),Le(s,l,"formTarget",y.formTarget,y,null)):(Le(s,l,"encType",y.encType,y,null),Le(s,l,"method",y.method,y,null),Le(s,l,"target",y.target,y,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(f);break}p=uc(""+p),s.setAttribute(f,p);break;case"onClick":p!=null&&(s.onclick=Vi);break;case"onScroll":p!=null&&he("scroll",s);break;case"onScrollEnd":p!=null&&he("scrollend",s);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"multiple":s.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":s.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){s.removeAttribute("xlink:href");break}f=uc(""+p),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(f,""+p):s.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(f,""):s.removeAttribute(f);break;case"capture":case"download":p===!0?s.setAttribute(f,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(f,p):s.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?s.setAttribute(f,p):s.removeAttribute(f);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?s.removeAttribute(f):s.setAttribute(f,p);break;case"popover":he("beforetoggle",s),he("toggle",s),oc(s,"popover",p);break;case"xlinkActuate":En(s,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":En(s,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":En(s,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":En(s,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":En(s,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":En(s,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":En(s,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":En(s,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":En(s,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":oc(s,"is",p);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Uh.get(f)||f,oc(s,f,p))}}function dy(s,l,f,p,y,x){switch(f){case"style":uf(s,p,x);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"children":typeof p=="string"?Pr(s,p):(typeof p=="number"||typeof p=="bigint")&&Pr(s,""+p);break;case"onScroll":p!=null&&he("scroll",s);break;case"onScrollEnd":p!=null&&he("scrollend",s);break;case"onClick":p!=null&&(s.onclick=Vi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!nf.hasOwnProperty(f))t:{if(f[0]==="o"&&f[1]==="n"&&(y=f.endsWith("Capture"),l=f.slice(2,y?f.length-7:void 0),x=s[Hn]||null,x=x!=null?x[f]:null,typeof x=="function"&&s.removeEventListener(l,x,y),typeof p=="function")){typeof x!="function"&&x!==null&&(f in s?s[f]=null:s.hasAttribute(f)&&s.removeAttribute(f)),s.addEventListener(l,p,y);break t}f in s?s[f]=p:p===!0?s.setAttribute(f,""):oc(s,f,p)}}}function tr(s,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":he("error",s),he("load",s);var p=!1,y=!1,x;for(x in f)if(f.hasOwnProperty(x)){var N=f[x];if(N!=null)switch(x){case"src":p=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Le(s,l,x,N,f,null)}}y&&Le(s,l,"srcSet",f.srcSet,f,null),p&&Le(s,l,"src",f.src,f,null);return;case"input":he("invalid",s);var F=x=N=y=null,W=null,lt=null;for(p in f)if(f.hasOwnProperty(p)){var pt=f[p];if(pt!=null)switch(p){case"name":y=pt;break;case"type":N=pt;break;case"checked":W=pt;break;case"defaultChecked":lt=pt;break;case"value":x=pt;break;case"defaultValue":F=pt;break;case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(r(137,l));break;default:Le(s,l,p,pt,f,null)}}zh(s,x,F,W,lt,N,y,!1);return;case"select":he("invalid",s),p=N=x=null;for(y in f)if(f.hasOwnProperty(y)&&(F=f[y],F!=null))switch(y){case"value":x=F;break;case"defaultValue":N=F;break;case"multiple":p=F;default:Le(s,l,y,F,f,null)}l=x,f=N,s.multiple=!!p,l!=null?zs(s,!!p,l,!1):f!=null&&zs(s,!!p,f,!0);return;case"textarea":he("invalid",s),x=y=p=null;for(N in f)if(f.hasOwnProperty(N)&&(F=f[N],F!=null))switch(N){case"value":p=F;break;case"defaultValue":y=F;break;case"children":x=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(91));break;default:Le(s,l,N,F,f,null)}Ls(s,p,y,x);return;case"option":for(W in f)if(f.hasOwnProperty(W)&&(p=f[W],p!=null))switch(W){case"selected":s.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Le(s,l,W,p,f,null)}return;case"dialog":he("beforetoggle",s),he("toggle",s),he("cancel",s),he("close",s);break;case"iframe":case"object":he("load",s);break;case"video":case"audio":for(p=0;p<qf.length;p++)he(qf[p],s);break;case"image":he("error",s),he("load",s);break;case"details":he("toggle",s);break;case"embed":case"source":case"link":he("error",s),he("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(lt in f)if(f.hasOwnProperty(lt)&&(p=f[lt],p!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Le(s,l,lt,p,f,null)}return;default:if(cc(l)){for(pt in f)f.hasOwnProperty(pt)&&(p=f[pt],p!==void 0&&dy(s,l,pt,p,f,void 0));return}}for(F in f)f.hasOwnProperty(F)&&(p=f[F],p!=null&&Le(s,l,F,p,f,null))}function r3(s,l,f,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,x=null,N=null,F=null,W=null,lt=null,pt=null;for(ft in f){var vt=f[ft];if(f.hasOwnProperty(ft)&&vt!=null)switch(ft){case"checked":break;case"value":break;case"defaultValue":W=vt;default:p.hasOwnProperty(ft)||Le(s,l,ft,null,p,vt)}}for(var ct in p){var ft=p[ct];if(vt=f[ct],p.hasOwnProperty(ct)&&(ft!=null||vt!=null))switch(ct){case"type":x=ft;break;case"name":y=ft;break;case"checked":lt=ft;break;case"defaultChecked":pt=ft;break;case"value":N=ft;break;case"defaultValue":F=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(r(137,l));break;default:ft!==vt&&Le(s,l,ct,ft,p,vt)}}lc(s,N,F,W,lt,pt,x,y);return;case"select":ft=N=F=ct=null;for(x in f)if(W=f[x],f.hasOwnProperty(x)&&W!=null)switch(x){case"value":break;case"multiple":ft=W;default:p.hasOwnProperty(x)||Le(s,l,x,null,p,W)}for(y in p)if(x=p[y],W=f[y],p.hasOwnProperty(y)&&(x!=null||W!=null))switch(y){case"value":ct=x;break;case"defaultValue":F=x;break;case"multiple":N=x;default:x!==W&&Le(s,l,y,x,p,W)}l=F,f=N,p=ft,ct!=null?zs(s,!!f,ct,!1):!!p!=!!f&&(l!=null?zs(s,!!f,l,!0):zs(s,!!f,f?[]:"",!1));return;case"textarea":ft=ct=null;for(F in f)if(y=f[F],f.hasOwnProperty(F)&&y!=null&&!p.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:Le(s,l,F,null,p,y)}for(N in p)if(y=p[N],x=f[N],p.hasOwnProperty(N)&&(y!=null||x!=null))switch(N){case"value":ct=y;break;case"defaultValue":ft=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==x&&Le(s,l,N,y,p,x)}Lh(s,ct,ft);return;case"option":for(var Mt in f)if(ct=f[Mt],f.hasOwnProperty(Mt)&&ct!=null&&!p.hasOwnProperty(Mt))switch(Mt){case"selected":s.selected=!1;break;default:Le(s,l,Mt,null,p,ct)}for(W in p)if(ct=p[W],ft=f[W],p.hasOwnProperty(W)&&ct!==ft&&(ct!=null||ft!=null))switch(W){case"selected":s.selected=ct&&typeof ct!="function"&&typeof ct!="symbol";break;default:Le(s,l,W,ct,p,ft)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ht in f)ct=f[Ht],f.hasOwnProperty(Ht)&&ct!=null&&!p.hasOwnProperty(Ht)&&Le(s,l,Ht,null,p,ct);for(lt in p)if(ct=p[lt],ft=f[lt],p.hasOwnProperty(lt)&&ct!==ft&&(ct!=null||ft!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(r(137,l));break;default:Le(s,l,lt,ct,p,ft)}return;default:if(cc(l)){for(var Be in f)ct=f[Be],f.hasOwnProperty(Be)&&ct!==void 0&&!p.hasOwnProperty(Be)&&dy(s,l,Be,void 0,p,ct);for(pt in p)ct=p[pt],ft=f[pt],!p.hasOwnProperty(pt)||ct===ft||ct===void 0&&ft===void 0||dy(s,l,pt,ct,p,ft);return}}for(var nt in f)ct=f[nt],f.hasOwnProperty(nt)&&ct!=null&&!p.hasOwnProperty(nt)&&Le(s,l,nt,null,p,ct);for(vt in p)ct=p[vt],ft=f[vt],!p.hasOwnProperty(vt)||ct===ft||ct==null&&ft==null||Le(s,l,vt,ct,p,ft)}function ST(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function i3(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,f=performance.getEntriesByType("resource"),p=0;p<f.length;p++){var y=f[p],x=y.transferSize,N=y.initiatorType,F=y.duration;if(x&&F&&ST(N)){for(N=0,F=y.responseEnd,p+=1;p<f.length;p++){var W=f[p],lt=W.startTime;if(lt>F)break;var pt=W.transferSize,vt=W.initiatorType;pt&&ST(vt)&&(W=W.responseEnd,N+=pt*(W<F?1:(F-lt)/(W-lt)))}if(--p,l+=8*(x+N)/(y.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var hy=null,py=null;function Fp(s){return s.nodeType===9?s:s.ownerDocument}function wT(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ET(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function gy(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var my=null;function a3(){var s=window.event;return s&&s.type==="popstate"?s===my?!1:(my=s,!0):(my=null,!1)}var TT=typeof setTimeout=="function"?setTimeout:void 0,s3=typeof clearTimeout=="function"?clearTimeout:void 0,AT=typeof Promise=="function"?Promise:void 0,o3=typeof queueMicrotask=="function"?queueMicrotask:typeof AT<"u"?function(s){return AT.resolve(null).then(s).catch(l3)}:TT;function l3(s){setTimeout(function(){throw s})}function lo(s){return s==="head"}function CT(s,l){var f=l,p=0;do{var y=f.nextSibling;if(s.removeChild(f),y&&y.nodeType===8)if(f=y.data,f==="/$"||f==="/&"){if(p===0){s.removeChild(y),qc(l);return}p--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")p++;else if(f==="html")$f(s.ownerDocument.documentElement);else if(f==="head"){f=s.ownerDocument.head,$f(f);for(var x=f.firstChild;x;){var N=x.nextSibling,F=x.nodeName;x[aa]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&x.rel.toLowerCase()==="stylesheet"||f.removeChild(x),x=N}}else f==="body"&&$f(s.ownerDocument.body);f=y}while(f);qc(l)}function RT(s,l){var f=s;s=0;do{var p=f.nextSibling;if(f.nodeType===1?l?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(l?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),p&&p.nodeType===8)if(f=p.data,f==="/$"){if(s===0)break;s--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||s++;f=p}while(f)}function vy(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":vy(f),sc(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}s.removeChild(f)}}function c3(s,l,f,p){for(;s.nodeType===1;){var y=f;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!p&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(p){if(!s[aa])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(x=s.getAttribute("rel"),x==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(x!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(x=s.getAttribute("src"),(x!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&x&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var x=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===x)return s}else return s;if(s=_i(s.nextSibling),s===null)break}return null}function u3(s,l,f){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!f||(s=_i(s.nextSibling),s===null))return null;return s}function DT(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=_i(s.nextSibling),s===null))return null;return s}function yy(s){return s.data==="$?"||s.data==="$~"}function by(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function f3(s,l){var f=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||f.readyState!=="loading")l();else{var p=function(){l(),f.removeEventListener("DOMContentLoaded",p)};f.addEventListener("DOMContentLoaded",p),s._reactRetry=p}}function _i(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var xy=null;function IT(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="/$"||f==="/&"){if(l===0)return _i(s.nextSibling);l--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||l++}s=s.nextSibling}return null}function kT(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(l===0)return s;l--}else f!=="/$"&&f!=="/&"||l++}s=s.previousSibling}return null}function NT(s,l,f){switch(l=Fp(f),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function $f(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);sc(s)}var Si=new Map,MT=new Set;function Gp(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var cs=$.d;$.d={f:d3,r:h3,D:p3,C:g3,L:m3,m:v3,X:b3,S:y3,M:x3};function d3(){var s=cs.f(),l=Op();return s||l}function h3(s){var l=fi(s);l!==null&&l.tag===5&&l.type==="form"?Kw(l):cs.r(s)}var Uc=typeof document>"u"?null:document;function OT(s,l,f){var p=Uc;if(p&&typeof l=="string"&&l){var y=Or(l);y='link[rel="'+s+'"][href="'+y+'"]',typeof f=="string"&&(y+='[crossorigin="'+f+'"]'),MT.has(y)||(MT.add(y),s={rel:s,crossOrigin:f,href:l},p.querySelector(y)===null&&(l=p.createElement("link"),tr(l,"link",s),wn(l),p.head.appendChild(l)))}}function p3(s){cs.D(s),OT("dns-prefetch",s,null)}function g3(s,l){cs.C(s,l),OT("preconnect",s,l)}function m3(s,l,f){cs.L(s,l,f);var p=Uc;if(p&&s&&l){var y='link[rel="preload"][as="'+Or(l)+'"]';l==="image"&&f&&f.imageSrcSet?(y+='[imagesrcset="'+Or(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(y+='[imagesizes="'+Or(f.imageSizes)+'"]')):y+='[href="'+Or(s)+'"]';var x=y;switch(l){case"style":x=Fc(s);break;case"script":x=Gc(s)}Si.has(x)||(s=g({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:s,as:l},f),Si.set(x,s),p.querySelector(y)!==null||l==="style"&&p.querySelector(Yf(x))||l==="script"&&p.querySelector(Xf(x))||(l=p.createElement("link"),tr(l,"link",s),wn(l),p.head.appendChild(l)))}}function v3(s,l){cs.m(s,l);var f=Uc;if(f&&s){var p=l&&typeof l.as=="string"?l.as:"script",y='link[rel="modulepreload"][as="'+Or(p)+'"][href="'+Or(s)+'"]',x=y;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Gc(s)}if(!Si.has(x)&&(s=g({rel:"modulepreload",href:s},l),Si.set(x,s),f.querySelector(y)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Xf(x)))return}p=f.createElement("link"),tr(p,"link",s),wn(p),f.head.appendChild(p)}}}function y3(s,l,f){cs.S(s,l,f);var p=Uc;if(p&&s){var y=oa(p).hoistableStyles,x=Fc(s);l=l||"default";var N=y.get(x);if(!N){var F={loading:0,preload:null};if(N=p.querySelector(Yf(x)))F.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":l},f),(f=Si.get(x))&&_y(s,f);var W=N=p.createElement("link");wn(W),tr(W,"link",s),W._p=new Promise(function(lt,pt){W.onload=lt,W.onerror=pt}),W.addEventListener("load",function(){F.loading|=1}),W.addEventListener("error",function(){F.loading|=2}),F.loading|=4,qp(N,l,p)}N={type:"stylesheet",instance:N,count:1,state:F},y.set(x,N)}}}function b3(s,l){cs.X(s,l);var f=Uc;if(f&&s){var p=oa(f).hoistableScripts,y=Gc(s),x=p.get(y);x||(x=f.querySelector(Xf(y)),x||(s=g({src:s,async:!0},l),(l=Si.get(y))&&Sy(s,l),x=f.createElement("script"),wn(x),tr(x,"link",s),f.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},p.set(y,x))}}function x3(s,l){cs.M(s,l);var f=Uc;if(f&&s){var p=oa(f).hoistableScripts,y=Gc(s),x=p.get(y);x||(x=f.querySelector(Xf(y)),x||(s=g({src:s,async:!0,type:"module"},l),(l=Si.get(y))&&Sy(s,l),x=f.createElement("script"),wn(x),tr(x,"link",s),f.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},p.set(y,x))}}function PT(s,l,f,p){var y=(y=dt.current)?Gp(y):null;if(!y)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=Fc(f.href),f=oa(y).hoistableStyles,p=f.get(l),p||(p={type:"style",instance:null,count:0,state:null},f.set(l,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){s=Fc(f.href);var x=oa(y).hoistableStyles,N=x.get(s);if(N||(y=y.ownerDocument||y,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(s,N),(x=y.querySelector(Yf(s)))&&!x._p&&(N.instance=x,N.state.loading=5),Si.has(s)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Si.set(s,f),x||_3(y,s,f,N.state))),l&&p===null)throw Error(r(528,""));return N}if(l&&p!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Gc(f),f=oa(y).hoistableScripts,p=f.get(l),p||(p={type:"script",instance:null,count:0,state:null},f.set(l,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Fc(s){return'href="'+Or(s)+'"'}function Yf(s){return'link[rel="stylesheet"]['+s+"]"}function VT(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function _3(s,l,f,p){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?p.loading=1:(l=s.createElement("link"),p.preload=l,l.addEventListener("load",function(){return p.loading|=1}),l.addEventListener("error",function(){return p.loading|=2}),tr(l,"link",f),wn(l),s.head.appendChild(l))}function Gc(s){return'[src="'+Or(s)+'"]'}function Xf(s){return"script[async]"+s}function jT(s,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var p=s.querySelector('style[data-href~="'+Or(f.href)+'"]');if(p)return l.instance=p,wn(p),p;var y=g({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return p=(s.ownerDocument||s).createElement("style"),wn(p),tr(p,"style",y),qp(p,f.precedence,s),l.instance=p;case"stylesheet":y=Fc(f.href);var x=s.querySelector(Yf(y));if(x)return l.state.loading|=4,l.instance=x,wn(x),x;p=VT(f),(y=Si.get(y))&&_y(p,y),x=(s.ownerDocument||s).createElement("link"),wn(x);var N=x;return N._p=new Promise(function(F,W){N.onload=F,N.onerror=W}),tr(x,"link",p),l.state.loading|=4,qp(x,f.precedence,s),l.instance=x;case"script":return x=Gc(f.src),(y=s.querySelector(Xf(x)))?(l.instance=y,wn(y),y):(p=f,(y=Si.get(x))&&(p=g({},f),Sy(p,y)),s=s.ownerDocument||s,y=s.createElement("script"),wn(y),tr(y,"link",p),s.head.appendChild(y),l.instance=y);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(p=l.instance,l.state.loading|=4,qp(p,f.precedence,s));return l.instance}function qp(s,l,f){for(var p=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=p.length?p[p.length-1]:null,x=y,N=0;N<p.length;N++){var F=p[N];if(F.dataset.precedence===l)x=F;else if(x!==y)break}x?x.parentNode.insertBefore(s,x.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(s,l.firstChild))}function _y(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function Sy(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var Hp=null;function zT(s,l,f){if(Hp===null){var p=new Map,y=Hp=new Map;y.set(f,p)}else y=Hp,p=y.get(f),p||(p=new Map,y.set(f,p));if(p.has(s))return p;for(p.set(s,null),f=f.getElementsByTagName(s),y=0;y<f.length;y++){var x=f[y];if(!(x[aa]||x[Ye]||s==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var N=x.getAttribute(l)||"";N=s+N;var F=p.get(N);F?F.push(x):p.set(N,[x])}}return p}function LT(s,l,f){s=s.ownerDocument||s,s.head.insertBefore(f,l==="title"?s.querySelector("head > title"):null)}function S3(s,l,f){if(f===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function BT(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function w3(s,l,f,p){if(f.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var y=Fc(p.href),x=l.querySelector(Yf(y));if(x){l=x._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=$p.bind(s),l.then(s,s)),f.state.loading|=4,f.instance=x,wn(x);return}x=l.ownerDocument||l,p=VT(p),(y=Si.get(y))&&_y(p,y),x=x.createElement("link"),wn(x);var N=x;N._p=new Promise(function(F,W){N.onload=F,N.onerror=W}),tr(x,"link",p),f.instance=x}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(f,l),(l=f.state.preload)&&(f.state.loading&3)===0&&(s.count++,f=$p.bind(s),l.addEventListener("load",f),l.addEventListener("error",f))}}var wy=0;function E3(s,l){return s.stylesheets&&s.count===0&&Xp(s,s.stylesheets),0<s.count||0<s.imgCount?function(f){var p=setTimeout(function(){if(s.stylesheets&&Xp(s,s.stylesheets),s.unsuspend){var x=s.unsuspend;s.unsuspend=null,x()}},6e4+l);0<s.imgBytes&&wy===0&&(wy=62500*i3());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Xp(s,s.stylesheets),s.unsuspend)){var x=s.unsuspend;s.unsuspend=null,x()}},(s.imgBytes>wy?50:800)+l);return s.unsuspend=f,function(){s.unsuspend=null,clearTimeout(p),clearTimeout(y)}}:null}function $p(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xp(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Yp=null;function Xp(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Yp=new Map,l.forEach(T3,s),Yp=null,$p.call(s))}function T3(s,l){if(!(l.state.loading&4)){var f=Yp.get(s);if(f)var p=f.get(null);else{f=new Map,Yp.set(s,f);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<y.length;x++){var N=y[x];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(f.set(N.dataset.precedence,N),p=N)}p&&f.set(null,p)}y=l.instance,N=y.getAttribute("data-precedence"),x=f.get(N)||p,x===p&&f.set(null,y),f.set(N,y),this.count++,p=$p.bind(this),y.addEventListener("load",p),y.addEventListener("error",p),x?x.parentNode.insertBefore(y,x.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),l.state.loading|=4}}var Wf={$$typeof:I,Provider:null,Consumer:null,_currentValue:et,_currentValue2:et,_threadCount:0};function A3(s,l,f,p,y,x,N,F,W){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gn(0),this.hiddenUpdates=gn(null),this.identifierPrefix=p,this.onUncaughtError=y,this.onCaughtError=x,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=W,this.incompleteTransitions=new Map}function UT(s,l,f,p,y,x,N,F,W,lt,pt,vt){return s=new A3(s,l,f,N,W,lt,pt,vt,F),l=1,x===!0&&(l|=24),x=ti(3,null,null,l),s.current=x,x.stateNode=s,l=n0(),l.refCount++,s.pooledCache=l,l.refCount++,x.memoizedState={element:p,isDehydrated:f,cache:l},s0(x),s}function FT(s){return s?(s=xc,s):xc}function GT(s,l,f,p,y,x){y=FT(y),p.context===null?p.context=y:p.pendingContext=y,p=Qs(l),p.payload={element:f},x=x===void 0?null:x,x!==null&&(p.callback=x),f=Zs(s,p,l),f!==null&&(Br(f,s,l),Cf(f,s,l))}function qT(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<l?f:l}}function Ey(s,l){qT(s,l),(s=s.alternate)&&qT(s,l)}function HT(s){if(s.tag===13||s.tag===31){var l=hl(s,67108864);l!==null&&Br(l,s,67108864),Ey(s,67108864)}}function $T(s){if(s.tag===13||s.tag===31){var l=ai();l=Sr(l);var f=hl(s,l);f!==null&&Br(f,s,l),Ey(s,l)}}var Wp=!0;function C3(s,l,f,p){var y=H.T;H.T=null;var x=$.p;try{$.p=2,Ty(s,l,f,p)}finally{$.p=x,H.T=y}}function R3(s,l,f,p){var y=H.T;H.T=null;var x=$.p;try{$.p=8,Ty(s,l,f,p)}finally{$.p=x,H.T=y}}function Ty(s,l,f,p){if(Wp){var y=Ay(p);if(y===null)fy(s,l,p,Kp,f),XT(s,p);else if(I3(y,s,l,f,p))p.stopPropagation();else if(XT(s,p),l&4&&-1<D3.indexOf(s)){for(;y!==null;){var x=fi(y);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var N=we(x.pendingLanes);if(N!==0){var F=x;for(F.pendingLanes|=2,F.entangledLanes|=2;N;){var W=1<<31-$e(N);F.entanglements[1]|=W,N&=~W}xa(x),(De&6)===0&&(Np=ue()+500,Gf(0))}}break;case 31:case 13:F=hl(x,2),F!==null&&Br(F,x,2),Op(),Ey(x,2)}if(x=Ay(p),x===null&&fy(s,l,p,Kp,f),x===y)break;y=x}y!==null&&p.stopPropagation()}else fy(s,l,p,null,f)}}function Ay(s){return s=di(s),Cy(s)}var Kp=null;function Cy(s){if(Kp=null,s=sa(s),s!==null){var l=a(s);if(l===null)s=null;else{var f=l.tag;if(f===13){if(s=o(l),s!==null)return s;s=null}else if(f===31){if(s=c(l),s!==null)return s;s=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return Kp=s,null}function YT(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ie()){case Wn:return 2;case or:return 8;case kr:case Nr:return 32;case Ps:return 268435456;default:return 32}default:return 32}}var Ry=!1,co=null,uo=null,fo=null,Kf=new Map,Qf=new Map,ho=[],D3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function XT(s,l){switch(s){case"focusin":case"focusout":co=null;break;case"dragenter":case"dragleave":uo=null;break;case"mouseover":case"mouseout":fo=null;break;case"pointerover":case"pointerout":Kf.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qf.delete(l.pointerId)}}function Zf(s,l,f,p,y,x){return s===null||s.nativeEvent!==x?(s={blockedOn:l,domEventName:f,eventSystemFlags:p,nativeEvent:x,targetContainers:[y]},l!==null&&(l=fi(l),l!==null&&HT(l)),s):(s.eventSystemFlags|=p,l=s.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),s)}function I3(s,l,f,p,y){switch(l){case"focusin":return co=Zf(co,s,l,f,p,y),!0;case"dragenter":return uo=Zf(uo,s,l,f,p,y),!0;case"mouseover":return fo=Zf(fo,s,l,f,p,y),!0;case"pointerover":var x=y.pointerId;return Kf.set(x,Zf(Kf.get(x)||null,s,l,f,p,y)),!0;case"gotpointercapture":return x=y.pointerId,Qf.set(x,Zf(Qf.get(x)||null,s,l,f,p,y)),!0}return!1}function WT(s){var l=sa(s.target);if(l!==null){var f=a(l);if(f!==null){if(l=f.tag,l===13){if(l=o(f),l!==null){s.blockedOn=l,ur(s.priority,function(){$T(f)});return}}else if(l===31){if(l=c(f),l!==null){s.blockedOn=l,ur(s.priority,function(){$T(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Qp(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var f=Ay(s.nativeEvent);if(f===null){f=s.nativeEvent;var p=new f.constructor(f.type,f);ff=p,f.target.dispatchEvent(p),ff=null}else return l=fi(f),l!==null&&HT(l),s.blockedOn=f,!1;l.shift()}return!0}function KT(s,l,f){Qp(s)&&f.delete(l)}function k3(){Ry=!1,co!==null&&Qp(co)&&(co=null),uo!==null&&Qp(uo)&&(uo=null),fo!==null&&Qp(fo)&&(fo=null),Kf.forEach(KT),Qf.forEach(KT)}function Zp(s,l){s.blockedOn===l&&(s.blockedOn=null,Ry||(Ry=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,k3)))}var Jp=null;function QT(s){Jp!==s&&(Jp=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Jp===s&&(Jp=null);for(var l=0;l<s.length;l+=3){var f=s[l],p=s[l+1],y=s[l+2];if(typeof p!="function"){if(Cy(p||f)===null)continue;break}var x=fi(f);x!==null&&(s.splice(l,3),l-=3,A0(x,{pending:!0,data:y,method:f.method,action:p},p,y))}}))}function qc(s){function l(W){return Zp(W,s)}co!==null&&Zp(co,s),uo!==null&&Zp(uo,s),fo!==null&&Zp(fo,s),Kf.forEach(l),Qf.forEach(l);for(var f=0;f<ho.length;f++){var p=ho[f];p.blockedOn===s&&(p.blockedOn=null)}for(;0<ho.length&&(f=ho[0],f.blockedOn===null);)WT(f),f.blockedOn===null&&ho.shift();if(f=(s.ownerDocument||s).$$reactFormReplay,f!=null)for(p=0;p<f.length;p+=3){var y=f[p],x=f[p+1],N=y[Hn]||null;if(typeof x=="function")N||QT(f);else if(N){var F=null;if(x&&x.hasAttribute("formAction")){if(y=x,N=x[Hn]||null)F=N.formAction;else if(Cy(y)!==null)continue}else F=N.action;typeof F=="function"?f[p+1]=F:(f.splice(p,3),p-=3),QT(f)}}}function ZT(){function s(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(N){return y=N})},focusReset:"manual",scroll:"manual"})}function l(){y!==null&&(y(),y=null),p||setTimeout(f,20)}function f(){if(!p&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(f,100),function(){p=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),y!==null&&(y(),y=null)}}}function Dy(s){this._internalRoot=s}tg.prototype.render=Dy.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,p=ai();GT(f,p,s,l,null,null)},tg.prototype.unmount=Dy.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;GT(s.current,2,null,s,null,null),Op(),l[ia]=null}};function tg(s){this._internalRoot=s}tg.prototype.unstable_scheduleHydration=function(s){if(s){var l=el();s={blockedOn:null,target:s,priority:l};for(var f=0;f<ho.length&&l!==0&&l<ho[f].priority;f++);ho.splice(f,0,s),f===0&&WT(s)}};var JT=t.version;if(JT!=="19.2.0")throw Error(r(527,JT,"19.2.0"));$.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=d(l),s=s!==null?h(s):null,s=s===null?null:s.stateNode,s};var N3={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eg.isDisabled&&eg.supportsFiber)try{xr=eg.inject(N3),on=eg}catch{}}return td.createRoot=function(s,l){if(!i(s))throw Error(r(299));var f=!1,p="",y=sE,x=oE,N=lE;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError)),l=UT(s,1,!1,null,null,f,p,null,y,x,N,ZT),s[ia]=l.current,uy(s),new Dy(l)},td.hydrateRoot=function(s,l,f){if(!i(s))throw Error(r(299));var p=!1,y="",x=sE,N=oE,F=lE,W=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(x=f.onUncaughtError),f.onCaughtError!==void 0&&(N=f.onCaughtError),f.onRecoverableError!==void 0&&(F=f.onRecoverableError),f.formState!==void 0&&(W=f.formState)),l=UT(s,1,!0,l,f??null,p,y,W,x,N,F,ZT),l.context=FT(null),f=l.current,p=ai(),p=Sr(p),y=Qs(p),y.callback=null,Zs(f,y,p),f=p,l.current.lanes=f,Vn(l,f),xa(l),s[ia]=l.current,uy(s),new tg(l)},td.version="19.2.0",td}var cA;function G3(){if(cA)return Ny.exports;cA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Ny.exports=F3(),Ny.exports}var q3=G3();const H3="modulepreload",$3=function(e){return"/personal-budget-pwa/"+e},uA={},Y3=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let d=function(h){return Promise.all(h.map(g=>Promise.resolve(g).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};var o=d;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");i=d(n.map(h=>{if(h=$3(h),h in uA)return;uA[h]=!0;const g=h.endsWith(".css"),m=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const b=document.createElement("link");if(b.rel=g?"stylesheet":H3,g||(b.as="script"),b.crossOrigin="",b.href=h,u&&b.setAttribute("nonce",u),document.head.appendChild(b),g)return new Promise((S,w)=>{b.addEventListener("load",S),b.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return i.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return t().catch(a)})};function X3(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:o}=e;let c,u;const d=async(g=!0)=>{await u};async function h(){if("serviceWorker"in navigator){if(c=await Y3(async()=>{const{Workbox:g}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:g}},[]).then(({Workbox:g})=>new g("/personal-budget-pwa/sw.js",{scope:"/personal-budget-pwa/",type:"classic"})).catch(g=>{o?.(g)}),!c)return;c.addEventListener("activated",g=>{(g.isUpdate||g.isExternal)&&window.location.reload()}),c.addEventListener("installed",g=>{g.isUpdate||r?.()}),c.register({immediate:t}).then(g=>{a?a("/personal-budget-pwa/sw.js",g):i?.(g)}).catch(g=>{o?.(g)})}}return u=h(),d}var fA="popstate";function W3(e={}){function t(i,a){let{pathname:o="/",search:c="",hash:u=""}=Jl(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),k1("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let o=i.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");c=d===-1?u:u.slice(0,d)}return c+"#"+(typeof a=="string"?a:kd(a))}function r(i,a){li(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return Q3(t,n,r,e)}function rn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function li(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function K3(){return Math.random().toString(36).substring(2,10)}function dA(e,t){return{usr:e.state,key:e.key,idx:t}}function k1(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Jl(t):t,state:n,key:t&&t.key||r||K3()}}function kd({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Jl(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Q3(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c="POP",u=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function g(){c="POP";let E=h(),T=E==null?null:E-d;d=E,u&&u({action:c,location:w.location,delta:T})}function m(E,T){c="PUSH";let D=k1(w.location,E,T);n&&n(D,E),d=h()+1;let I=dA(D,d),M=w.createHref(D);try{o.pushState(I,"",M)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(M)}a&&u&&u({action:c,location:w.location,delta:1})}function b(E,T){c="REPLACE";let D=k1(w.location,E,T);n&&n(D,E),d=h();let I=dA(D,d),M=w.createHref(D);o.replaceState(I,"",M),a&&u&&u({action:c,location:w.location,delta:0})}function S(E){return Z3(E)}let w={get action(){return c},get location(){return e(i,o)},listen(E){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(fA,g),u=E,()=>{i.removeEventListener(fA,g),u=null}},createHref(E){return t(i,E)},createURL:S,encodeLocation(E){let T=S(E);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:m,replace:b,go(E){return o.go(E)}};return w}function Z3(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),rn(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:kd(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function vD(e,t,n="/"){return J3(e,t,n,!1)}function J3(e,t,n,r){let i=typeof t=="string"?Jl(t):t,a=_s(i.pathname||"/",n);if(a==null)return null;let o=yD(e);tV(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=fV(a);c=cV(o[u],d,r)}return c}function yD(e,t=[],n=[],r="",i=!1){let a=(o,c,u=i,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&u)return;rn(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let g=gs([r,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(rn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),yD(o.children,t,m,g,u)),!(o.path==null&&!o.index)&&t.push({path:g,score:oV(g,o.index),routesMeta:m})};return e.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))a(o,c);else for(let u of bD(o.path))a(o,c,!0,u)}),t}function bD(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=bD(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>e.startsWith("/")&&u===""?"/":u)}function tV(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:lV(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var eV=/^:[\w-]+$/,nV=3,rV=2,iV=1,aV=10,sV=-2,hA=e=>e==="*";function oV(e,t){let n=e.split("/"),r=n.length;return n.some(hA)&&(r+=sV),t&&(r+=rV),n.filter(i=>!hA(i)).reduce((i,a)=>i+(eV.test(a)?nV:a===""?iV:aV),r)}function lV(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function cV(e,t,n=!1){let{routesMeta:r}=e,i={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,h=a==="/"?t:t.slice(a.length)||"/",g=Qg({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),m=u.route;if(!g&&d&&n&&!r[r.length-1].route.index&&(g=Qg({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:gs([a,g.pathname]),pathnameBase:mV(gs([a,g.pathnameBase])),route:m}),g.pathnameBase!=="/"&&(a=gs([a,g.pathnameBase]))}return o}function Qg(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=uV(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:g},m)=>{if(h==="*"){let S=c[m]||"";o=a.slice(0,a.length-S.length).replace(/(.)\/+$/,"$1")}const b=c[m];return g&&!b?d[h]=void 0:d[h]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:e}}function uV(e,t=!1,n=!0){li(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function fV(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return li(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function _s(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}var dV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hV=e=>dV.test(e);function pV(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Jl(e):e,a;if(n)if(hV(n))a=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),li(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?a=pA(n.substring(1),"/"):a=pA(n,t)}else a=t;return{pathname:a,search:vV(r),hash:yV(i)}}function pA(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Vy(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function gV(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function xD(e){let t=gV(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function _D(e,t,n,r=!1){let i;typeof e=="string"?i=Jl(e):(i={...e},rn(!i.pathname||!i.pathname.includes("?"),Vy("?","pathname","search",i)),rn(!i.pathname||!i.pathname.includes("#"),Vy("#","pathname","hash",i)),rn(!i.search||!i.search.includes("#"),Vy("#","search","hash",i)));let a=e===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=n;else{let g=t.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),g-=1;i.pathname=m.join("/")}c=g>=0?t[g]:"/"}let u=pV(i,c),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var gs=e=>e.join("/").replace(/\/\/+/g,"/"),mV=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),vV=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,yV=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function bV(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var SD=["POST","PUT","PATCH","DELETE"];new Set(SD);var xV=["GET",...SD];new Set(xV);var ju=q.createContext(null);ju.displayName="DataRouter";var Bm=q.createContext(null);Bm.displayName="DataRouterState";q.createContext(!1);var wD=q.createContext({isTransitioning:!1});wD.displayName="ViewTransition";var _V=q.createContext(new Map);_V.displayName="Fetchers";var SV=q.createContext(null);SV.displayName="Await";var Ba=q.createContext(null);Ba.displayName="Navigation";var ih=q.createContext(null);ih.displayName="Location";var Ua=q.createContext({outlet:null,matches:[],isDataRoute:!1});Ua.displayName="Route";var ox=q.createContext(null);ox.displayName="RouteError";function wV(e,{relative:t}={}){rn(ah(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=q.useContext(Ba),{hash:i,pathname:a,search:o}=sh(e,{relative:t}),c=a;return n!=="/"&&(c=a==="/"?n:gs([n,a])),r.createHref({pathname:c,search:o,hash:i})}function ah(){return q.useContext(ih)!=null}function Fa(){return rn(ah(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(ih).location}var ED="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function TD(e){q.useContext(Ba).static||q.useLayoutEffect(e)}function Ga(){let{isDataRoute:e}=q.useContext(Ua);return e?jV():EV()}function EV(){rn(ah(),"useNavigate() may be used only in the context of a <Router> component.");let e=q.useContext(ju),{basename:t,navigator:n}=q.useContext(Ba),{matches:r}=q.useContext(Ua),{pathname:i}=Fa(),a=JSON.stringify(xD(r)),o=q.useRef(!1);return TD(()=>{o.current=!0}),q.useCallback((u,d={})=>{if(li(o.current,ED),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=_D(u,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:gs([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,a,i,e])}q.createContext(null);function TV(){let{matches:e}=q.useContext(Ua),t=e[e.length-1];return t?t.params:{}}function sh(e,{relative:t}={}){let{matches:n}=q.useContext(Ua),{pathname:r}=Fa(),i=JSON.stringify(xD(n));return q.useMemo(()=>_D(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function AV(e,t){return AD(e,t)}function AD(e,t,n,r,i){rn(ah(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=q.useContext(Ba),{matches:o}=q.useContext(Ua),c=o[o.length-1],u=c?c.params:{},d=c?c.pathname:"/",h=c?c.pathnameBase:"/",g=c&&c.route;{let D=g&&g.path||"";CD(d,!g||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let m=Fa(),b;if(t){let D=typeof t=="string"?Jl(t):t;rn(h==="/"||D.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${D.pathname}" was given in the \`location\` prop.`),b=D}else b=m;let S=b.pathname||"/",w=S;if(h!=="/"){let D=h.replace(/^\//,"").split("/");w="/"+S.replace(/^\//,"").split("/").slice(D.length).join("/")}let E=vD(e,{pathname:w});li(g||E!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),li(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=kV(E&&E.map(D=>Object.assign({},D,{params:Object.assign({},u,D.params),pathname:gs([h,a.encodeLocation?a.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?h:gs([h,a.encodeLocation?a.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),o,n,r,i);return t&&T?q.createElement(ih.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},T):T}function CV(){let e=VV(),t=bV(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=q.createElement(q.Fragment,null,q.createElement("p",null," Hey developer "),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:a},"ErrorBoundary")," or"," ",q.createElement("code",{style:a},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},t),n?q.createElement("pre",{style:i},n):null,o)}var RV=q.createElement(CV,null),DV=class extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?q.createElement(Ua.Provider,{value:this.props.routeContext},q.createElement(ox.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function IV({routeContext:e,match:t,children:n}){let r=q.useContext(ju);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),q.createElement(Ua.Provider,{value:e},n)}function kV(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,o=n?.errors;if(o!=null){let h=a.findIndex(g=>g.route.id&&o?.[g.route.id]!==void 0);rn(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,u=-1;if(n)for(let h=0;h<a.length;h++){let g=a[h];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=h),g.route.id){let{loaderData:m,errors:b}=n,S=g.route.loader&&!m.hasOwnProperty(g.route.id)&&(!b||b[g.route.id]===void 0);if(g.route.lazy||S){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}let d=n&&r?(h,g)=>{r(h,{location:n.location,params:n.matches?.[0]?.params??{},errorInfo:g})}:void 0;return a.reduceRight((h,g,m)=>{let b,S=!1,w=null,E=null;n&&(b=o&&g.route.id?o[g.route.id]:void 0,w=g.route.errorElement||RV,c&&(u<0&&m===0?(CD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,E=null):u===m&&(S=!0,E=g.route.hydrateFallbackElement||null)));let T=t.concat(a.slice(0,m+1)),D=()=>{let I;return b?I=w:S?I=E:g.route.Component?I=q.createElement(g.route.Component,null):g.route.element?I=g.route.element:I=h,q.createElement(IV,{match:g,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:I})};return n&&(g.route.ErrorBoundary||g.route.errorElement||m===0)?q.createElement(DV,{location:n.location,revalidation:n.revalidation,component:w,error:b,children:D(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:d}):D()},null)}function lx(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function NV(e){let t=q.useContext(ju);return rn(t,lx(e)),t}function MV(e){let t=q.useContext(Bm);return rn(t,lx(e)),t}function OV(e){let t=q.useContext(Ua);return rn(t,lx(e)),t}function cx(e){let t=OV(e),n=t.matches[t.matches.length-1];return rn(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function PV(){return cx("useRouteId")}function VV(){let e=q.useContext(ox),t=MV("useRouteError"),n=cx("useRouteError");return e!==void 0?e:t.errors?.[n]}function jV(){let{router:e}=NV("useNavigate"),t=cx("useNavigate"),n=q.useRef(!1);return TD(()=>{n.current=!0}),q.useCallback(async(i,a={})=>{li(n.current,ED),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...a}))},[e,t])}var gA={};function CD(e,t,n){!t&&!gA[e]&&(gA[e]=!0,li(!1,n))}q.memo(zV);function zV({routes:e,future:t,state:n,unstable_onError:r}){return AD(e,void 0,n,r,t)}function bo(e){rn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function LV({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:a=!1}){rn(!ah(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),c=q.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof n=="string"&&(n=Jl(n));let{pathname:u="/",search:d="",hash:h="",state:g=null,key:m="default"}=n,b=q.useMemo(()=>{let S=_s(u,o);return S==null?null:{location:{pathname:S,search:d,hash:h,state:g,key:m},navigationType:r}},[o,u,d,h,g,m,r]);return li(b!=null,`<Router basename="${o}"> is not able to match the URL "${u}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:q.createElement(Ba.Provider,{value:c},q.createElement(ih.Provider,{children:t,value:b}))}function BV({children:e,location:t}){return AV(N1(e),t)}function N1(e,t=[]){let n=[];return q.Children.forEach(e,(r,i)=>{if(!q.isValidElement(r))return;let a=[...t,i];if(r.type===q.Fragment){n.push.apply(n,N1(r.props.children,a));return}rn(r.type===bo,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),rn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=N1(r.props.children,a)),n.push(o)}),n}var Ig="get",kg="application/x-www-form-urlencoded";function Um(e){return e!=null&&typeof e.tagName=="string"}function UV(e){return Um(e)&&e.tagName.toLowerCase()==="button"}function FV(e){return Um(e)&&e.tagName.toLowerCase()==="form"}function GV(e){return Um(e)&&e.tagName.toLowerCase()==="input"}function qV(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function HV(e,t){return e.button===0&&(!t||t==="_self")&&!qV(e)}function M1(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function $V(e,t){let n=M1(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(a=>{n.append(i,a)})}),n}var rg=null;function YV(){if(rg===null)try{new FormData(document.createElement("form"),0),rg=!1}catch{rg=!0}return rg}var XV=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jy(e){return e!=null&&!XV.has(e)?(li(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${kg}"`),null):e}function WV(e,t){let n,r,i,a,o;if(FV(e)){let c=e.getAttribute("action");r=c?_s(c,t):null,n=e.getAttribute("method")||Ig,i=jy(e.getAttribute("enctype"))||kg,a=new FormData(e)}else if(UV(e)||GV(e)&&(e.type==="submit"||e.type==="image")){let c=e.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||c.getAttribute("action");if(r=u?_s(u,t):null,n=e.getAttribute("formmethod")||c.getAttribute("method")||Ig,i=jy(e.getAttribute("formenctype"))||jy(c.getAttribute("enctype"))||kg,a=new FormData(c,e),!YV()){let{name:d,type:h,value:g}=e;if(h==="image"){let m=d?`${d}.`:"";a.append(`${m}x`,"0"),a.append(`${m}y`,"0")}else d&&a.append(d,g)}}else{if(Um(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ig,r=null,i=kg,o=e}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ux(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function KV(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&_s(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function QV(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ZV(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function JV(e,t,n){let r=await Promise.all(e.map(async i=>{let a=t.routes[i.route.id];if(a){let o=await QV(a,n);return o.links?o.links():[]}return[]}));return r5(r.flat(1).filter(ZV).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function mA(e,t,n,r,i,a){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>n[d].pathname!==u.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==u.params["*"];return a==="assets"?t.filter((u,d)=>o(u,d)||c(u,d)):a==="data"?t.filter((u,d)=>{let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function t5(e,t,{includeHydrateFallback:n}={}){return e5(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function e5(e){return[...new Set(e)]}function n5(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function r5(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let a=JSON.stringify(n5(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function RD(){let e=q.useContext(ju);return ux(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function i5(){let e=q.useContext(Bm);return ux(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var fx=q.createContext(void 0);fx.displayName="FrameworkContext";function DD(){let e=q.useContext(fx);return ux(e,"You must render this element inside a <HydratedRouter> element"),e}function a5(e,t){let n=q.useContext(fx),[r,i]=q.useState(!1),[a,o]=q.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:g}=t,m=q.useRef(null);q.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let w=T=>{T.forEach(D=>{o(D.isIntersecting)})},E=new IntersectionObserver(w,{threshold:.5});return m.current&&E.observe(m.current),()=>{E.disconnect()}}},[e]),q.useEffect(()=>{if(r){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[r]);let b=()=>{i(!0)},S=()=>{i(!1),o(!1)};return n?e!=="intent"?[a,m,{}]:[a,m,{onFocus:ed(c,b),onBlur:ed(u,S),onMouseEnter:ed(d,b),onMouseLeave:ed(h,S),onTouchStart:ed(g,b)}]:[!1,m,{}]}function ed(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function s5({page:e,...t}){let{router:n}=RD(),r=q.useMemo(()=>vD(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?q.createElement(l5,{page:e,matches:r,...t}):null}function o5(e){let{manifest:t,routeModules:n}=DD(),[r,i]=q.useState([]);return q.useEffect(()=>{let a=!1;return JV(e,t,n).then(o=>{a||i(o)}),()=>{a=!0}},[e,t,n]),r}function l5({page:e,matches:t,...n}){let r=Fa(),{manifest:i,routeModules:a}=DD(),{basename:o}=RD(),{loaderData:c,matches:u}=i5(),d=q.useMemo(()=>mA(e,t,u,i,r,"data"),[e,t,u,i,r]),h=q.useMemo(()=>mA(e,t,u,i,r,"assets"),[e,t,u,i,r]),g=q.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let S=new Set,w=!1;if(t.forEach(T=>{let D=i.routes[T.route.id];!D||!D.hasLoader||(!d.some(I=>I.route.id===T.route.id)&&T.route.id in c&&a[T.route.id]?.shouldRevalidate||D.hasClientLoader?w=!0:S.add(T.route.id))}),S.size===0)return[];let E=KV(e,o,"data");return w&&S.size>0&&E.searchParams.set("_routes",t.filter(T=>S.has(T.route.id)).map(T=>T.route.id).join(",")),[E.pathname+E.search]},[o,c,r,i,d,t,e,a]),m=q.useMemo(()=>t5(h,i),[h,i]),b=o5(h);return q.createElement(q.Fragment,null,g.map(S=>q.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),m.map(S=>q.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),b.map(({key:S,link:w})=>q.createElement("link",{key:S,nonce:n.nonce,...w})))}function c5(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var ID=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ID&&(window.__reactRouterVersion="7.9.6")}catch{}function u5({basename:e,children:t,window:n}){let r=q.useRef();r.current==null&&(r.current=W3({window:n,v5Compat:!0}));let i=r.current,[a,o]=q.useState({action:i.action,location:i.location}),c=q.useCallback(u=>{q.startTransition(()=>o(u))},[o]);return q.useLayoutEffect(()=>i.listen(c),[i,c]),q.createElement(LV,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:i})}var kD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ND=q.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:c,target:u,to:d,preventScrollReset:h,viewTransition:g,...m},b){let{basename:S}=q.useContext(Ba),w=typeof d=="string"&&kD.test(d),E,T=!1;if(typeof d=="string"&&w&&(E=d,ID))try{let k=new URL(window.location.href),j=d.startsWith("//")?new URL(k.protocol+d):new URL(d),L=_s(j.pathname,S);j.origin===k.origin&&L!=null?d=L+j.search+j.hash:T=!0}catch{li(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=wV(d,{relative:i}),[I,M,z]=a5(r,m),P=p5(d,{replace:o,state:c,target:u,preventScrollReset:h,relative:i,viewTransition:g});function A(k){t&&t(k),k.defaultPrevented||P(k)}let C=q.createElement("a",{...m,...z,href:E||D,onClick:T||a?t:A,ref:c5(b,M),target:u,"data-discover":!w&&n==="render"?"true":void 0});return I&&!w?q.createElement(q.Fragment,null,C,q.createElement(s5,{page:D})):C});ND.displayName="Link";var f5=q.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:c,children:u,...d},h){let g=sh(o,{relative:d.relative}),m=Fa(),b=q.useContext(Bm),{navigator:S,basename:w}=q.useContext(Ba),E=b!=null&&x5(g)&&c===!0,T=S.encodeLocation?S.encodeLocation(g).pathname:g.pathname,D=m.pathname,I=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(D=D.toLowerCase(),I=I?I.toLowerCase():null,T=T.toLowerCase()),I&&w&&(I=_s(I,w)||I);const M=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let z=D===T||!i&&D.startsWith(T)&&D.charAt(M)==="/",P=I!=null&&(I===T||!i&&I.startsWith(T)&&I.charAt(T.length)==="/"),A={isActive:z,isPending:P,isTransitioning:E},C=z?t:void 0,k;typeof r=="function"?k=r(A):k=[r,z?"active":null,P?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let j=typeof a=="function"?a(A):a;return q.createElement(ND,{...d,"aria-current":C,className:k,ref:h,style:j,to:o,viewTransition:c},typeof u=="function"?u(A):u)});f5.displayName="NavLink";var d5=q.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:a,method:o=Ig,action:c,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:g,...m},b)=>{let S=y5(),w=b5(c,{relative:d}),E=o.toLowerCase()==="get"?"get":"post",T=typeof c=="string"&&kD.test(c),D=I=>{if(u&&u(I),I.defaultPrevented)return;I.preventDefault();let M=I.nativeEvent.submitter,z=M?.getAttribute("formmethod")||o;S(M||I.currentTarget,{fetcherKey:t,method:z,navigate:n,replace:i,state:a,relative:d,preventScrollReset:h,viewTransition:g})};return q.createElement("form",{ref:b,method:E,action:w,onSubmit:r?u:D,...m,"data-discover":!T&&e==="render"?"true":void 0})});d5.displayName="Form";function h5(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MD(e){let t=q.useContext(ju);return rn(t,h5(e)),t}function p5(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let c=Ga(),u=Fa(),d=sh(e,{relative:a});return q.useCallback(h=>{if(HV(h,t)){h.preventDefault();let g=n!==void 0?n:kd(u)===kd(d);c(e,{replace:g,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[u,c,d,n,r,t,e,i,a,o])}function g5(e){li(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=q.useRef(M1(e)),n=q.useRef(!1),r=Fa(),i=q.useMemo(()=>$V(r.search,n.current?null:t.current),[r.search]),a=Ga(),o=q.useCallback((c,u)=>{const d=M1(typeof c=="function"?c(new URLSearchParams(i)):c);n.current=!0,a("?"+d,u)},[a,i]);return[i,o]}var m5=0,v5=()=>`__${String(++m5)}__`;function y5(){let{router:e}=MD("useSubmit"),{basename:t}=q.useContext(Ba),n=PV();return q.useCallback(async(r,i={})=>{let{action:a,method:o,encType:c,formData:u,body:d}=WV(r,t);if(i.navigate===!1){let h=i.fetcherKey||v5();await e.fetch(h,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await e.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function b5(e,{relative:t}={}){let{basename:n}=q.useContext(Ba),r=q.useContext(Ua);rn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...sh(e||".",{relative:t})},o=Fa();if(e==null){a.search=o.search;let c=new URLSearchParams(a.search),u=c.getAll("index");if(u.some(h=>h==="")){c.delete("index"),u.filter(g=>g).forEach(g=>c.append("index",g));let h=c.toString();a.search=h?`?${h}`:""}}return(!e||e===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:gs([n,a.pathname])),kd(a)}function x5(e,{relative:t}={}){let n=q.useContext(wD);rn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=MD("useViewTransitionState"),i=sh(e,{relative:t});if(!n.isTransitioning)return!1;let a=_s(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=_s(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Qg(i.pathname,o)!=null||Qg(i.pathname,a)!=null}const _5=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),S5=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),vA=e=>{const t=S5(e);return t.charAt(0).toUpperCase()+t.slice(1)},OD=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),w5=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var E5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const T5=q.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...c},u)=>q.createElement("svg",{ref:u,...E5,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:OD("lucide",i),...!a&&!w5(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,h])=>q.createElement(d,h)),...Array.isArray(a)?a:[a]]));const te=(e,t)=>{const n=q.forwardRef(({className:r,...i},a)=>q.createElement(T5,{ref:a,iconNode:t,className:OD(`lucide-${_5(vA(e))}`,`lucide-${e}`,r),...i}));return n.displayName=vA(e),n};const A5=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Nd=te("arrow-left",A5);const C5=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],R5=te("arrow-right-left",C5);const D5=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],I5=te("check",D5);const k5=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],PD=te("chevron-down",k5);const N5=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],M5=te("chevron-left",N5);const O5=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],$c=te("chevron-right",O5);const P5=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],V5=te("chevron-up",P5);const j5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],z5=te("circle-arrow-down",j5);const L5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],B5=te("circle-arrow-up",L5);const U5=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],dx=te("circle-check-big",U5);const F5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],yA=te("circle-check",F5);const G5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ig=te("circle-plus",G5);const q5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],bA=te("circle-question-mark",q5);const H5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],xA=te("circle",H5);const $5=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Y5=te("copy",$5);const X5=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],_A=te("download",X5);const W5=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],K5=te("eye-off",W5);const Q5=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Z5=te("eye",Q5);const J5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],tj=te("file-text",J5);const ej=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],nj=te("folder-plus",ej);const rj=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],ij=te("funnel",rj);const aj=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],sj=te("house",aj);const oj=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],lj=te("list",oj);const cj=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],uj=te("loader-circle",cj);const fj=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],dj=te("loader",fj);const hj=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],pj=te("log-out",hj);const gj=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],O1=te("mail",gj);const mj=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],vj=te("pause",mj);const yj=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],Md=te("piggy-bank",yj);const bj=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],jl=te("refresh-cw",bj);const xj=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],_j=te("search",xj);const Sj=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],VD=te("settings",Sj);const wj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ej=te("target",wj);const Tj=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ng=te("trash-2",Tj);const Aj=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],jD=te("trash",Aj);const Cj=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Rj=te("trending-down",Cj);const Dj=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ij=te("trending-up",Dj);const kj=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],zD=te("triangle-alert",kj);const Nj=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],Mj=te("undo-2",Nj);const Oj=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Pj=te("upload",Oj);const Vj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],jj=te("user-plus",Vj);const zj=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],hx=te("wallet",zj);const Lj=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Bj=te("wifi-off",Lj);const Uj=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],Fj=te("wifi",Uj);const Gj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],oh=te("x",Gj),px=q.createContext({});function Fm(e){const t=q.useRef(null);return t.current===null&&(t.current=e()),t.current}const gx=typeof window<"u",mx=gx?q.useLayoutEffect:q.useEffect,Gm=q.createContext(null);function vx(e,t){e.indexOf(t)===-1&&e.push(t)}function yx(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Ss=(e,t,n)=>n>t?t:n<e?e:n;let bx=()=>{};const ws={},LD=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function BD(e){return typeof e=="object"&&e!==null}const UD=e=>/^0[^.\s]+$/u.test(e);function xx(e){let t;return()=>(t===void 0&&(t=e()),t)}const Di=e=>e,qj=(e,t)=>n=>t(e(n)),lh=(...e)=>e.reduce(qj),Od=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class _x{constructor(){this.subscriptions=[]}add(t){return vx(this.subscriptions,t),()=>yx(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ra=e=>e*1e3,Ri=e=>e/1e3;function FD(e,t){return t?e*(1e3/t):0}const GD=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Hj=1e-7,$j=12;function Yj(e,t,n,r,i){let a,o,c=0;do o=t+(n-t)/2,a=GD(o,r,i)-e,a>0?n=o:t=o;while(Math.abs(a)>Hj&&++c<$j);return o}function ch(e,t,n,r){if(e===t&&n===r)return Di;const i=a=>Yj(a,0,1,e,n);return a=>a===0||a===1?a:GD(i(a),t,r)}const qD=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,HD=e=>t=>1-e(1-t),$D=ch(.33,1.53,.69,.99),Sx=HD($D),YD=qD(Sx),XD=e=>(e*=2)<1?.5*Sx(e):.5*(2-Math.pow(2,-10*(e-1))),wx=e=>1-Math.sin(Math.acos(e)),WD=HD(wx),KD=qD(wx),Xj=ch(.42,0,1,1),Wj=ch(0,0,.58,1),QD=ch(.42,0,.58,1),Kj=e=>Array.isArray(e)&&typeof e[0]!="number",ZD=e=>Array.isArray(e)&&typeof e[0]=="number",Qj={linear:Di,easeIn:Xj,easeInOut:QD,easeOut:Wj,circIn:wx,circInOut:KD,circOut:WD,backIn:Sx,backInOut:YD,backOut:$D,anticipate:XD},Zj=e=>typeof e=="string",SA=e=>{if(ZD(e)){bx(e.length===4);const[t,n,r,i]=e;return ch(t,n,r,i)}else if(Zj(e))return Qj[e];return e},ag=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Jj(e,t){let n=new Set,r=new Set,i=!1,a=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(h){o.has(h)&&(d.schedule(h),e()),h(c)}const d={schedule:(h,g=!1,m=!1)=>{const S=m&&i?n:r;return g&&o.add(h),S.has(h)||S.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(c=h,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),n.clear(),i=!1,a&&(a=!1,d.process(h))}};return d}const t6=40;function JD(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=ag.reduce((I,M)=>(I[M]=Jj(a),I),{}),{setup:c,read:u,resolveKeyframes:d,preUpdate:h,update:g,preRender:m,render:b,postRender:S}=o,w=()=>{const I=ws.useManualTiming?i.timestamp:performance.now();n=!1,ws.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(I-i.timestamp,t6),1)),i.timestamp=I,i.isProcessing=!0,c.process(i),u.process(i),d.process(i),h.process(i),g.process(i),m.process(i),b.process(i),S.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(w))},E=()=>{n=!0,r=!0,i.isProcessing||e(w)};return{schedule:ag.reduce((I,M)=>{const z=o[M];return I[M]=(P,A=!1,C=!1)=>(n||E(),z.schedule(P,A,C)),I},{}),cancel:I=>{for(let M=0;M<ag.length;M++)o[ag[M]].cancel(I)},state:i,steps:o}}const{schedule:tn,cancel:jo,state:nr,steps:zy}=JD(typeof requestAnimationFrame<"u"?requestAnimationFrame:Di,!0);let Mg;function e6(){Mg=void 0}const Hr={now:()=>(Mg===void 0&&Hr.set(nr.isProcessing||ws.useManualTiming?nr.timestamp:performance.now()),Mg),set:e=>{Mg=e,queueMicrotask(e6)}},tI=e=>t=>typeof t=="string"&&t.startsWith(e),Ex=tI("--"),n6=tI("var(--"),Tx=e=>n6(e)?r6.test(e.split("/*")[0].trim()):!1,r6=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,zu={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Pd={...zu,transform:e=>Ss(0,1,e)},sg={...zu,default:1},pd=e=>Math.round(e*1e5)/1e5,Ax=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function i6(e){return e==null}const a6=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Cx=(e,t)=>n=>!!(typeof n=="string"&&a6.test(n)&&n.startsWith(e)||t&&!i6(n)&&Object.prototype.hasOwnProperty.call(n,t)),eI=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,a,o,c]=r.match(Ax);return{[e]:parseFloat(i),[t]:parseFloat(a),[n]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},s6=e=>Ss(0,255,e),Ly={...zu,transform:e=>Math.round(s6(e))},Ml={test:Cx("rgb","red"),parse:eI("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Ly.transform(e)+", "+Ly.transform(t)+", "+Ly.transform(n)+", "+pd(Pd.transform(r))+")"};function o6(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const P1={test:Cx("#"),parse:o6,transform:Ml.transform},uh=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),xo=uh("deg"),Da=uh("%"),Wt=uh("px"),l6=uh("vh"),c6=uh("vw"),wA={...Da,parse:e=>Da.parse(e)/100,transform:e=>Da.transform(e*100)},Jc={test:Cx("hsl","hue"),parse:eI("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Da.transform(pd(t))+", "+Da.transform(pd(n))+", "+pd(Pd.transform(r))+")"},kn={test:e=>Ml.test(e)||P1.test(e)||Jc.test(e),parse:e=>Ml.test(e)?Ml.parse(e):Jc.test(e)?Jc.parse(e):P1.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Ml.transform(e):Jc.transform(e),getAnimatableNone:e=>{const t=kn.parse(e);return t.alpha=0,kn.transform(t)}},u6=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function f6(e){return isNaN(e)&&typeof e=="string"&&(e.match(Ax)?.length||0)+(e.match(u6)?.length||0)>0}const nI="number",rI="color",d6="var",h6="var(",EA="${}",p6=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Vd(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const c=t.replace(p6,u=>(kn.test(u)?(r.color.push(a),i.push(rI),n.push(kn.parse(u))):u.startsWith(h6)?(r.var.push(a),i.push(d6),n.push(u)):(r.number.push(a),i.push(nI),n.push(parseFloat(u))),++a,EA)).split(EA);return{values:n,split:c,indexes:r,types:i}}function iI(e){return Vd(e).values}function aI(e){const{split:t,types:n}=Vd(e),r=t.length;return i=>{let a="";for(let o=0;o<r;o++)if(a+=t[o],i[o]!==void 0){const c=n[o];c===nI?a+=pd(i[o]):c===rI?a+=kn.transform(i[o]):a+=i[o]}return a}}const g6=e=>typeof e=="number"?0:kn.test(e)?kn.getAnimatableNone(e):e;function m6(e){const t=iI(e);return aI(e)(t.map(g6))}const zo={test:f6,parse:iI,createTransformer:aI,getAnimatableNone:m6};function By(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function v6({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,a=0,o=0;if(!t)i=a=o=n;else{const c=n<.5?n*(1+t):n+t-n*t,u=2*n-c;i=By(u,c,e+1/3),a=By(u,c,e),o=By(u,c,e-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function Zg(e,t){return n=>n>0?t:e}const nn=(e,t,n)=>e+(t-e)*n,Uy=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},y6=[P1,Ml,Jc],b6=e=>y6.find(t=>t.test(e));function TA(e){const t=b6(e);if(!t)return!1;let n=t.parse(e);return t===Jc&&(n=v6(n)),n}const AA=(e,t)=>{const n=TA(e),r=TA(t);if(!n||!r)return Zg(e,t);const i={...n};return a=>(i.red=Uy(n.red,r.red,a),i.green=Uy(n.green,r.green,a),i.blue=Uy(n.blue,r.blue,a),i.alpha=nn(n.alpha,r.alpha,a),Ml.transform(i))},V1=new Set(["none","hidden"]);function x6(e,t){return V1.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function _6(e,t){return n=>nn(e,t,n)}function Rx(e){return typeof e=="number"?_6:typeof e=="string"?Tx(e)?Zg:kn.test(e)?AA:E6:Array.isArray(e)?sI:typeof e=="object"?kn.test(e)?AA:S6:Zg}function sI(e,t){const n=[...e],r=n.length,i=e.map((a,o)=>Rx(a)(a,t[o]));return a=>{for(let o=0;o<r;o++)n[o]=i[o](a);return n}}function S6(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=Rx(e[i])(e[i],t[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function w6(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const a=t.types[i],o=e.indexes[a][r[a]],c=e.values[o]??0;n[i]=c,r[a]++}return n}const E6=(e,t)=>{const n=zo.createTransformer(t),r=Vd(e),i=Vd(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?V1.has(e)&&!i.values.length||V1.has(t)&&!r.values.length?x6(e,t):lh(sI(w6(r,i),i.values),n):Zg(e,t)};function oI(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?nn(e,t,n):Rx(e)(e,t)}const T6=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>tn.update(t,n),stop:()=>jo(t),now:()=>nr.isProcessing?nr.timestamp:Hr.now()}},lI=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let a=0;a<i;a++)r+=Math.round(e(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Jg=2e4;function Dx(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Jg;)t+=n,r=e.next(t);return t>=Jg?1/0:t}function A6(e,t=100,n){const r=n({...e,keyframes:[0,t]}),i=Math.min(Dx(r),Jg);return{type:"keyframes",ease:a=>r.next(i*a).value/t,duration:Ri(i)}}const C6=5;function cI(e,t,n){const r=Math.max(t-C6,0);return FD(n-e(r),t-r)}const fn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Fy=.001;function R6({duration:e=fn.duration,bounce:t=fn.bounce,velocity:n=fn.velocity,mass:r=fn.mass}){let i,a,o=1-t;o=Ss(fn.minDamping,fn.maxDamping,o),e=Ss(fn.minDuration,fn.maxDuration,Ri(e)),o<1?(i=d=>{const h=d*o,g=h*e,m=h-n,b=j1(d,o),S=Math.exp(-g);return Fy-m/b*S},a=d=>{const g=d*o*e,m=g*n+n,b=Math.pow(o,2)*Math.pow(d,2)*e,S=Math.exp(-g),w=j1(Math.pow(d,2),o);return(-i(d)+Fy>0?-1:1)*((m-b)*S)/w}):(i=d=>{const h=Math.exp(-d*e),g=(d-n)*e+1;return-Fy+h*g},a=d=>{const h=Math.exp(-d*e),g=(n-d)*(e*e);return h*g});const c=5/e,u=I6(i,a,c);if(e=Ra(e),isNaN(u))return{stiffness:fn.stiffness,damping:fn.damping,duration:e};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:e}}}const D6=12;function I6(e,t,n){let r=n;for(let i=1;i<D6;i++)r=r-e(r)/t(r);return r}function j1(e,t){return e*Math.sqrt(1-t*t)}const k6=["duration","bounce"],N6=["stiffness","damping","mass"];function CA(e,t){return t.some(n=>e[n]!==void 0)}function M6(e){let t={velocity:fn.velocity,stiffness:fn.stiffness,damping:fn.damping,mass:fn.mass,isResolvedFromDuration:!1,...e};if(!CA(e,N6)&&CA(e,k6))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*Ss(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:fn.mass,stiffness:i,damping:a}}else{const n=R6(e);t={...t,...n,mass:fn.mass},t.isResolvedFromDuration=!0}return t}function tm(e=fn.visualDuration,t=fn.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],c={done:!1,value:a},{stiffness:u,damping:d,mass:h,duration:g,velocity:m,isResolvedFromDuration:b}=M6({...n,velocity:-Ri(n.velocity||0)}),S=m||0,w=d/(2*Math.sqrt(u*h)),E=o-a,T=Ri(Math.sqrt(u/h)),D=Math.abs(E)<5;r||(r=D?fn.restSpeed.granular:fn.restSpeed.default),i||(i=D?fn.restDelta.granular:fn.restDelta.default);let I;if(w<1){const z=j1(T,w);I=P=>{const A=Math.exp(-w*T*P);return o-A*((S+w*T*E)/z*Math.sin(z*P)+E*Math.cos(z*P))}}else if(w===1)I=z=>o-Math.exp(-T*z)*(E+(S+T*E)*z);else{const z=T*Math.sqrt(w*w-1);I=P=>{const A=Math.exp(-w*T*P),C=Math.min(z*P,300);return o-A*((S+w*T*E)*Math.sinh(C)+z*E*Math.cosh(C))/z}}const M={calculatedDuration:b&&g||null,next:z=>{const P=I(z);if(b)c.done=z>=g;else{let A=z===0?S:0;w<1&&(A=z===0?Ra(S):cI(I,z,P));const C=Math.abs(A)<=r,k=Math.abs(o-P)<=i;c.done=C&&k}return c.value=c.done?o:P,c},toString:()=>{const z=Math.min(Dx(M),Jg),P=lI(A=>M.next(z*A).value,z,30);return z+"ms "+P},toTransition:()=>{}};return M}tm.applyToOptions=e=>{const t=A6(e,100,tm);return e.ease=t.ease,e.duration=Ra(t.duration),e.type="keyframes",e};function z1({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:c,max:u,restDelta:d=.5,restSpeed:h}){const g=e[0],m={done:!1,value:g},b=C=>c!==void 0&&C<c||u!==void 0&&C>u,S=C=>c===void 0?u:u===void 0||Math.abs(c-C)<Math.abs(u-C)?c:u;let w=n*t;const E=g+w,T=o===void 0?E:o(E);T!==E&&(w=T-g);const D=C=>-w*Math.exp(-C/r),I=C=>T+D(C),M=C=>{const k=D(C),j=I(C);m.done=Math.abs(k)<=d,m.value=m.done?T:j};let z,P;const A=C=>{b(m.value)&&(z=C,P=tm({keyframes:[m.value,S(m.value)],velocity:cI(I,C,m.value),damping:i,stiffness:a,restDelta:d,restSpeed:h}))};return A(0),{calculatedDuration:null,next:C=>{let k=!1;return!P&&z===void 0&&(k=!0,M(C),A(C)),z!==void 0&&C>=z?P.next(C-z):(!k&&M(C),m)}}}function O6(e,t,n){const r=[],i=n||ws.mix||oI,a=e.length-1;for(let o=0;o<a;o++){let c=i(e[o],e[o+1]);if(t){const u=Array.isArray(t)?t[o]||Di:t;c=lh(u,c)}r.push(c)}return r}function P6(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const a=e.length;if(bx(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const c=O6(t,r,i),u=c.length,d=h=>{if(o&&h<e[0])return t[0];let g=0;if(u>1)for(;g<e.length-2&&!(h<e[g+1]);g++);const m=Od(e[g],e[g+1],h);return c[g](m)};return n?h=>d(Ss(e[0],e[a-1],h)):d}function V6(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Od(0,t,r);e.push(nn(n,1,i))}}function j6(e){const t=[0];return V6(t,e.length-1),t}function z6(e,t){return e.map(n=>n*t)}function L6(e,t){return e.map(()=>t||QD).splice(0,e.length-1)}function gd({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=Kj(r)?r.map(SA):SA(r),a={done:!1,value:t[0]},o=z6(n&&n.length===t.length?n:j6(t),e),c=P6(o,t,{ease:Array.isArray(i)?i:L6(t,i)});return{calculatedDuration:e,next:u=>(a.value=c(u),a.done=u>=e,a)}}const B6=e=>e!==null;function Ix(e,{repeat:t,repeatType:n="loop"},r,i=1){const a=e.filter(B6),c=i<0||t&&n!=="loop"&&t%2===1?0:a.length-1;return!c||r===void 0?a[c]:r}const U6={decay:z1,inertia:z1,tween:gd,keyframes:gd,spring:tm};function uI(e){typeof e.type=="string"&&(e.type=U6[e.type])}class kx{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const F6=e=>e/100;class Nx extends kx{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Hr.now()&&this.tick(Hr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;uI(t);const{type:n=gd,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=t;let{keyframes:c}=t;const u=n||gd;u!==gd&&typeof c[0]!="number"&&(this.mixKeyframes=lh(F6,oI(c[0],c[1])),c=[0,100]);const d=u({...t,keyframes:c});a==="mirror"&&(this.mirroredGenerator=u({...t,keyframes:[...c].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=Dx(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:g,repeatType:m,repeatDelay:b,type:S,onUpdate:w,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const T=this.currentTime-d*(this.playbackSpeed>=0?1:-1),D=this.playbackSpeed>=0?T<0:T>i;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let I=this.currentTime,M=r;if(g){const C=Math.min(this.currentTime,i)/c;let k=Math.floor(C),j=C%1;!j&&C>=1&&(j=1),j===1&&k--,k=Math.min(k,g+1),!!(k%2)&&(m==="reverse"?(j=1-j,b&&(j-=b/c)):m==="mirror"&&(M=o)),I=Ss(0,1,j)*c}const z=D?{done:!1,value:h[0]}:M.next(I);a&&(z.value=a(z.value));let{done:P}=z;!D&&u!==null&&(P=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return A&&S!==z1&&(z.value=Ix(h,this.options,E,this.speed)),w&&w(z.value),A&&this.finish(),z}then(t,n){return this.finished.then(t,n)}get duration(){return Ri(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Ri(t)}get time(){return Ri(this.currentTime)}set time(t){t=Ra(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Hr.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Ri(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=T6,startTime:n}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Hr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function G6(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Ol=e=>e*180/Math.PI,L1=e=>{const t=Ol(Math.atan2(e[1],e[0]));return B1(t)},q6={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:L1,rotateZ:L1,skewX:e=>Ol(Math.atan(e[1])),skewY:e=>Ol(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},B1=e=>(e=e%360,e<0&&(e+=360),e),RA=L1,DA=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),IA=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),H6={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:DA,scaleY:IA,scale:e=>(DA(e)+IA(e))/2,rotateX:e=>B1(Ol(Math.atan2(e[6],e[5]))),rotateY:e=>B1(Ol(Math.atan2(-e[2],e[0]))),rotateZ:RA,rotate:RA,skewX:e=>Ol(Math.atan(e[4])),skewY:e=>Ol(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function U1(e){return e.includes("scale")?1:0}function F1(e,t){if(!e||e==="none")return U1(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=H6,i=n;else{const c=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=q6,i=c}if(!i)return U1(t);const a=r[t],o=i[1].split(",").map(Y6);return typeof a=="function"?a(o):o[a]}const $6=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return F1(n,t)};function Y6(e){return parseFloat(e.trim())}const Lu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Bu=new Set(Lu),kA=e=>e===zu||e===Wt,X6=new Set(["x","y","z"]),W6=Lu.filter(e=>!X6.has(e));function K6(e){const t=[];return W6.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const zl={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>F1(t,"x"),y:(e,{transform:t})=>F1(t,"y")};zl.translateX=zl.x;zl.translateY=zl.y;const Ll=new Set;let G1=!1,q1=!1,H1=!1;function fI(){if(q1){const e=Array.from(Ll).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=K6(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,o])=>{r.getValue(a)?.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}q1=!1,G1=!1,Ll.forEach(e=>e.complete(H1)),Ll.clear()}function dI(){Ll.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(q1=!0)})}function Q6(){H1=!0,dI(),fI(),H1=!1}class Mx{constructor(t,n,r,i,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Ll.add(this),G1||(G1=!0,tn.read(dI),tn.resolveKeyframes(fI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;if(t[0]===null){const a=i?.get(),o=t[t.length-1];if(a!==void 0)t[0]=a;else if(r&&n){const c=r.readValue(n,o);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=o),i&&a===void 0&&i.set(t[0])}G6(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Ll.delete(this)}cancel(){this.state==="scheduled"&&(Ll.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Z6=e=>e.startsWith("--");function J6(e,t,n){Z6(t)?e.style.setProperty(t,n):e.style[t]=n}const tz=xx(()=>window.ScrollTimeline!==void 0),ez={};function nz(e,t){const n=xx(e);return()=>ez[t]??n()}const hI=nz(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),id=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,NA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:id([0,.65,.55,1]),circOut:id([.55,0,1,.45]),backIn:id([.31,.01,.66,-.59]),backOut:id([.33,1.53,.69,.99])};function pI(e,t){if(e)return typeof e=="function"?hI()?lI(e,t):"ease-out":ZD(e)?id(e):Array.isArray(e)?e.map(n=>pI(n,t)||NA.easeOut):NA[e]}function rz(e,t,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:c="easeOut",times:u}={},d=void 0){const h={[t]:n};u&&(h.offset=u);const g=pI(c,i);Array.isArray(g)&&(h.easing=g);const m={delay:r,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),e.animate(h,m)}function gI(e){return typeof e=="function"&&"applyToOptions"in e}function iz({type:e,...t}){return gI(e)&&hI()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class az extends kx{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:c,onComplete:u}=t;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=t,bx(typeof t.type!="string");const d=iz(t);this.animation=rz(n,r,i,d,a),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const h=Ix(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(h):J6(n,r,h),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Ri(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Ri(t)}get time(){return Ri(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Ra(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&tz()?(this.animation.timeline=t,Di):n(this)}}const mI={anticipate:XD,backInOut:YD,circInOut:KD};function sz(e){return e in mI}function oz(e){typeof e.ease=="string"&&sz(e.ease)&&(e.ease=mI[e.ease])}const MA=10;class lz extends az{constructor(t){oz(t),uI(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const c=new Nx({...o,autoplay:!1}),u=Ra(this.finishedTime??this.time);n.setWithVelocity(c.sample(u-MA).value,c.sample(u).value,MA),c.stop()}}const OA=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(zo.test(e)||e==="0")&&!e.startsWith("url("));function cz(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function uz(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],o=OA(i,t),c=OA(a,t);return!o||!c?!1:cz(e)||(n==="spring"||gI(n))&&r}function $1(e){e.duration=0,e.type="keyframes"}const fz=new Set(["opacity","clipPath","filter","transform"]),dz=xx(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function hz(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:a,type:o}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=t.owner.getProps();return dz()&&n&&fz.has(n)&&(n!=="transform"||!d)&&!u&&!r&&i!=="mirror"&&a!==0&&o!=="inertia"}const pz=40;class gz extends kx{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",keyframes:c,name:u,motionValue:d,element:h,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Hr.now();const m={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:o,name:u,motionValue:d,element:h,...g},b=h?.KeyframeResolver||Mx;this.keyframeResolver=new b(c,(S,w,E)=>this.onKeyframesResolved(S,w,m,!E),u,d,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,r,i){this.keyframeResolver=void 0;const{name:a,type:o,velocity:c,delay:u,isHandoff:d,onUpdate:h}=r;this.resolvedAt=Hr.now(),uz(t,a,o,c)||((ws.instantAnimations||!u)&&h?.(Ix(t,r,n)),t[0]=t[t.length-1],$1(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>pz?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},b=!d&&hz(m)?new lz({...m,element:m.motionValue.owner.current}):new Nx(m);b.finished.then(()=>this.notifyFinished()).catch(Di),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Q6()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const mz=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function vz(e){const t=mz.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function vI(e,t,n=1){const[r,i]=vz(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const o=a.trim();return LD(o)?parseFloat(o):o}return Tx(i)?vI(i,t,n+1):i}function Ox(e,t){return e?.[t]??e?.default??e}const yI=new Set(["width","height","top","left","right","bottom",...Lu]),yz={test:e=>e==="auto",parse:e=>e},bI=e=>t=>t.test(e),xI=[zu,Wt,Da,xo,c6,l6,yz],PA=e=>xI.find(bI(e));function bz(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||UD(e):!0}const xz=new Set(["brightness","contrast","saturate","opacity"]);function _z(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Ax)||[];if(!r)return e;const i=n.replace(r,"");let a=xz.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+i+")"}const Sz=/\b([a-z-]*)\(.*?\)/gu,Y1={...zo,getAnimatableNone:e=>{const t=e.match(Sz);return t?t.map(_z).join(" "):e}},VA={...zu,transform:Math.round},wz={rotate:xo,rotateX:xo,rotateY:xo,rotateZ:xo,scale:sg,scaleX:sg,scaleY:sg,scaleZ:sg,skew:xo,skewX:xo,skewY:xo,distance:Wt,translateX:Wt,translateY:Wt,translateZ:Wt,x:Wt,y:Wt,z:Wt,perspective:Wt,transformPerspective:Wt,opacity:Pd,originX:wA,originY:wA,originZ:Wt},Px={borderWidth:Wt,borderTopWidth:Wt,borderRightWidth:Wt,borderBottomWidth:Wt,borderLeftWidth:Wt,borderRadius:Wt,radius:Wt,borderTopLeftRadius:Wt,borderTopRightRadius:Wt,borderBottomRightRadius:Wt,borderBottomLeftRadius:Wt,width:Wt,maxWidth:Wt,height:Wt,maxHeight:Wt,top:Wt,right:Wt,bottom:Wt,left:Wt,padding:Wt,paddingTop:Wt,paddingRight:Wt,paddingBottom:Wt,paddingLeft:Wt,margin:Wt,marginTop:Wt,marginRight:Wt,marginBottom:Wt,marginLeft:Wt,backgroundPositionX:Wt,backgroundPositionY:Wt,...wz,zIndex:VA,fillOpacity:Pd,strokeOpacity:Pd,numOctaves:VA},Ez={...Px,color:kn,backgroundColor:kn,outlineColor:kn,fill:kn,stroke:kn,borderColor:kn,borderTopColor:kn,borderRightColor:kn,borderBottomColor:kn,borderLeftColor:kn,filter:Y1,WebkitFilter:Y1},_I=e=>Ez[e];function SI(e,t){let n=_I(e);return n!==Y1&&(n=zo),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Tz=new Set(["auto","none","0"]);function Az(e,t,n){let r=0,i;for(;r<e.length&&!i;){const a=e[r];typeof a=="string"&&!Tz.has(a)&&Vd(a).values.length&&(i=e[r]),r++}if(i&&n)for(const a of t)e[a]=SI(n,i)}class Cz extends Mx{constructor(t,n,r,i,a){super(t,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let d=t[u];if(typeof d=="string"&&(d=d.trim(),Tx(d))){const h=vI(d,n.current);h!==void 0&&(t[u]=h),u===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!yI.has(r)||t.length!==2)return;const[i,a]=t,o=PA(i),c=PA(a);if(o!==c)if(kA(o)&&kA(c))for(let u=0;u<t.length;u++){const d=t[u];typeof d=="string"&&(t[u]=parseFloat(d))}else zl[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||bz(t[i]))&&r.push(i);r.length&&Az(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=zl[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=zl[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function Rz(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const i=n?.[e]??r.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const wI=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function EI(e){return BD(e)&&"offsetHeight"in e}const jA=30,Dz=e=>!isNaN(parseFloat(e));class Iz{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Hr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Hr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Dz(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new _x);const r=this.events[t].add(n);return t==="change"?()=>{r(),tn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Hr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>jA)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,jA);return FD(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function vu(e,t){return new Iz(e,t)}const{schedule:Vx}=JD(queueMicrotask,!1),qi={x:!1,y:!1};function TI(){return qi.x||qi.y}function kz(e){return e==="x"||e==="y"?qi[e]?null:(qi[e]=!0,()=>{qi[e]=!1}):qi.x||qi.y?null:(qi.x=qi.y=!0,()=>{qi.x=qi.y=!1})}function AI(e,t){const n=Rz(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function zA(e){return!(e.pointerType==="touch"||TI())}function Nz(e,t,n={}){const[r,i,a]=AI(e,n),o=c=>{if(!zA(c))return;const{target:u}=c,d=t(u,c);if(typeof d!="function"||!u)return;const h=g=>{zA(g)&&(d(g),u.removeEventListener("pointerleave",h))};u.addEventListener("pointerleave",h,i)};return r.forEach(c=>{c.addEventListener("pointerenter",o,i)}),a}const CI=(e,t)=>t?e===t?!0:CI(e,t.parentElement):!1,jx=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Mz=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Oz(e){return Mz.has(e.tagName)||e.tabIndex!==-1}const Og=new WeakSet;function LA(e){return t=>{t.key==="Enter"&&e(t)}}function Gy(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Pz=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=LA(()=>{if(Og.has(n))return;Gy(n,"down");const i=LA(()=>{Gy(n,"up")}),a=()=>Gy(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",a,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function BA(e){return jx(e)&&!TI()}function Vz(e,t,n={}){const[r,i,a]=AI(e,n),o=c=>{const u=c.currentTarget;if(!BA(c))return;Og.add(u);const d=t(u,c),h=(b,S)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",m),Og.has(u)&&Og.delete(u),BA(b)&&typeof d=="function"&&d(b,{success:S})},g=b=>{h(b,u===window||u===document||n.useGlobalTarget||CI(u,b.target))},m=b=>{h(b,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",m,i)};return r.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",o,i),EI(c)&&(c.addEventListener("focus",d=>Pz(d,i)),!Oz(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function RI(e){return BD(e)&&"ownerSVGElement"in e}function jz(e){return RI(e)&&e.tagName==="svg"}const mr=e=>!!(e&&e.getVelocity),zz=[...xI,kn,zo],Lz=e=>zz.find(bI(e)),zx=q.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function UA(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Bz(...e){return t=>{let n=!1;const r=e.map(i=>{const a=UA(i,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():UA(e[i],null)}}}}function Uz(...e){return q.useCallback(Bz(...e),e)}class Fz extends q.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=EI(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Gz({children:e,isPresent:t,anchorX:n,root:r}){const i=q.useId(),a=q.useRef(null),o=q.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=q.useContext(zx),u=Uz(a,e?.ref);return q.useInsertionEffect(()=>{const{width:d,height:h,top:g,left:m,right:b}=o.current;if(t||!a.current||!d||!h)return;const S=n==="left"?`left: ${m}`:`right: ${b}`;a.current.dataset.motionPopId=i;const w=document.createElement("style");c&&(w.nonce=c);const E=r??document.head;return E.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${S}px !important;
            top: ${g}px !important;
          }
        `),()=>{E.contains(w)&&E.removeChild(w)}},[t]),_.jsx(Fz,{isPresent:t,childRef:a,sizeRef:o,children:q.cloneElement(e,{ref:u})})}const qz=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:o,anchorX:c,root:u})=>{const d=Fm(Hz),h=q.useId();let g=!0,m=q.useMemo(()=>(g=!1,{id:h,initial:t,isPresent:n,custom:i,onExitComplete:b=>{d.set(b,!0);for(const S of d.values())if(!S)return;r&&r()},register:b=>(d.set(b,!1),()=>d.delete(b))}),[n,d,r]);return a&&g&&(m={...m}),q.useMemo(()=>{d.forEach((b,S)=>d.set(S,!1))},[n]),q.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),o==="popLayout"&&(e=_.jsx(Gz,{isPresent:n,anchorX:c,root:u,children:e})),_.jsx(Gm.Provider,{value:m,children:e})};function Hz(){return new Map}function DI(e=!0){const t=q.useContext(Gm);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,a=q.useId();q.useEffect(()=>{if(e)return i(a)},[e]);const o=q.useCallback(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,o]:[!0]}const og=e=>e.key||"";function FA(e){const t=[];return q.Children.forEach(e,n=>{q.isValidElement(n)&&t.push(n)}),t}const jd=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:o=!1,anchorX:c="left",root:u})=>{const[d,h]=DI(o),g=q.useMemo(()=>FA(e),[e]),m=o&&!d?[]:g.map(og),b=q.useRef(!0),S=q.useRef(g),w=Fm(()=>new Map),[E,T]=q.useState(g),[D,I]=q.useState(g);mx(()=>{b.current=!1,S.current=g;for(let P=0;P<D.length;P++){const A=og(D[P]);m.includes(A)?w.delete(A):w.get(A)!==!0&&w.set(A,!1)}},[D,m.length,m.join("-")]);const M=[];if(g!==E){let P=[...g];for(let A=0;A<D.length;A++){const C=D[A],k=og(C);m.includes(k)||(P.splice(A,0,C),M.push(C))}return a==="wait"&&M.length&&(P=M),I(FA(P)),T(g),null}const{forceRender:z}=q.useContext(px);return _.jsx(_.Fragment,{children:D.map(P=>{const A=og(P),C=o&&!d?!1:g===D||m.includes(A),k=()=>{if(w.has(A))w.set(A,!0);else return;let j=!0;w.forEach(L=>{L||(j=!1)}),j&&(z?.(),I(S.current),o&&h?.(),r&&r())};return _.jsx(qz,{isPresent:C,initial:!b.current||n?void 0:!1,custom:t,presenceAffectsLayout:i,mode:a,root:u,onExitComplete:C?void 0:k,anchorX:c,children:P},A)})})},II=q.createContext({strict:!1}),GA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yu={};for(const e in GA)yu[e]={isEnabled:t=>GA[e].some(n=>!!t[n])};function $z(e){for(const t in e)yu[t]={...yu[t],...e[t]}}const Yz=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function em(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Yz.has(e)}let kI=e=>!em(e);function Xz(e){typeof e=="function"&&(kI=t=>t.startsWith("on")?!em(t):e(t))}try{Xz(require("@emotion/is-prop-valid").default)}catch{}function Wz(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(kI(i)||n===!0&&em(i)||!t&&!em(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}const qm=q.createContext({});function Hm(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function zd(e){return typeof e=="string"||Array.isArray(e)}const Lx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Bx=["initial",...Lx];function $m(e){return Hm(e.animate)||Bx.some(t=>zd(e[t]))}function NI(e){return!!($m(e)||e.variants)}function Kz(e,t){if($m(e)){const{initial:n,animate:r}=e;return{initial:n===!1||zd(n)?n:void 0,animate:zd(r)?r:void 0}}return e.inherit!==!1?t:{}}function Qz(e){const{initial:t,animate:n}=Kz(e,q.useContext(qm));return q.useMemo(()=>({initial:t,animate:n}),[qA(t),qA(n)])}function qA(e){return Array.isArray(e)?e.join(" "):e}const Ld={};function Zz(e){for(const t in e)Ld[t]=e[t],Ex(t)&&(Ld[t].isCSSVariable=!0)}function MI(e,{layout:t,layoutId:n}){return Bu.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Ld[e]||e==="opacity")}const Jz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},tL=Lu.length;function eL(e,t,n){let r="",i=!0;for(let a=0;a<tL;a++){const o=Lu[a],c=e[o];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(o.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||n){const d=wI(c,Px[o]);if(!u){i=!1;const h=Jz[o]||o;r+=`${h}(${d}) `}n&&(t[o]=d)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function Ux(e,t,n){const{style:r,vars:i,transformOrigin:a}=e;let o=!1,c=!1;for(const u in t){const d=t[u];if(Bu.has(u)){o=!0;continue}else if(Ex(u)){i[u]=d;continue}else{const h=wI(d,Px[u]);u.startsWith("origin")?(c=!0,a[u]=h):r[u]=h}}if(t.transform||(o||n?r.transform=eL(t,e.transform,n):r.transform&&(r.transform="none")),c){const{originX:u="50%",originY:d="50%",originZ:h=0}=a;r.transformOrigin=`${u} ${d} ${h}`}}const Fx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function OI(e,t,n){for(const r in t)!mr(t[r])&&!MI(r,n)&&(e[r]=t[r])}function nL({transformTemplate:e},t){return q.useMemo(()=>{const n=Fx();return Ux(n,t,e),Object.assign({},n.vars,n.style)},[t])}function rL(e,t){const n=e.style||{},r={};return OI(r,n,e),Object.assign(r,nL(e,t)),r}function iL(e,t){const n={},r=rL(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const aL={offset:"stroke-dashoffset",array:"stroke-dasharray"},sL={offset:"strokeDashoffset",array:"strokeDasharray"};function oL(e,t,n=1,r=0,i=!0){e.pathLength=1;const a=i?aL:sL;e[a.offset]=Wt.transform(-r);const o=Wt.transform(t),c=Wt.transform(n);e[a.array]=`${o} ${c}`}function PI(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:o=0,...c},u,d,h){if(Ux(e,c,d),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:g,style:m}=e;g.transform&&(m.transform=g.transform,delete g.transform),(m.transform||g.transformOrigin)&&(m.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),m.transform&&(m.transformBox=h?.transformBox??"fill-box",delete g.transformBox),t!==void 0&&(g.x=t),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),i!==void 0&&oL(g,i,a,o,!1)}const VI=()=>({...Fx(),attrs:{}}),jI=e=>typeof e=="string"&&e.toLowerCase()==="svg";function lL(e,t,n,r){const i=q.useMemo(()=>{const a=VI();return PI(a,t,jI(r),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};OI(a,e.style,e),i.style={...a,...i.style}}return i}const cL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Gx(e){return typeof e!="string"||e.includes("-")?!1:!!(cL.indexOf(e)>-1||/[A-Z]/u.test(e))}function uL(e,t,n,{latestValues:r},i,a=!1){const c=(Gx(e)?lL:iL)(t,r,i,e),u=Wz(t,typeof e=="string",a),d=e!==q.Fragment?{...u,...c,ref:n}:{},{children:h}=t,g=q.useMemo(()=>mr(h)?h.get():h,[h]);return q.createElement(e,{...d,children:g})}function HA(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function qx(e,t,n,r){if(typeof t=="function"){const[i,a]=HA(r);t=t(n!==void 0?n:e.custom,i,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,a]=HA(r);t=t(n!==void 0?n:e.custom,i,a)}return t}function Pg(e){return mr(e)?e.get():e}function fL({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:dL(n,r,i,e),renderState:t()}}function dL(e,t,n,r){const i={},a=r(e,{});for(const m in a)i[m]=Pg(a[m]);let{initial:o,animate:c}=e;const u=$m(e),d=NI(e);t&&d&&!u&&e.inherit!==!1&&(o===void 0&&(o=t.initial),c===void 0&&(c=t.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const g=h?c:o;if(g&&typeof g!="boolean"&&!Hm(g)){const m=Array.isArray(g)?g:[g];for(let b=0;b<m.length;b++){const S=qx(e,m[b]);if(S){const{transitionEnd:w,transition:E,...T}=S;for(const D in T){let I=T[D];if(Array.isArray(I)){const M=h?I.length-1:0;I=I[M]}I!==null&&(i[D]=I)}for(const D in w)i[D]=w[D]}}}return i}const zI=e=>(t,n)=>{const r=q.useContext(qm),i=q.useContext(Gm),a=()=>fL(e,t,r,i);return n?a():Fm(a)};function Hx(e,t,n){const{style:r}=e,i={};for(const a in r)(mr(r[a])||t.style&&mr(t.style[a])||MI(a,e)||n?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const hL=zI({scrapeMotionValuesFromProps:Hx,createRenderState:Fx});function LI(e,t,n){const r=Hx(e,t,n);for(const i in e)if(mr(e[i])||mr(t[i])){const a=Lu.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=e[i]}return r}const pL=zI({scrapeMotionValuesFromProps:LI,createRenderState:VI}),gL=Symbol.for("motionComponentSymbol");function tu(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function mL(e,t,n){return q.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):tu(n)&&(n.current=r))},[t])}const $x=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),vL="framerAppearId",BI="data-"+$x(vL),UI=q.createContext({});function yL(e,t,n,r,i){const{visualElement:a}=q.useContext(qm),o=q.useContext(II),c=q.useContext(Gm),u=q.useContext(zx).reducedMotion,d=q.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,g=q.useContext(UI);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&bL(d.current,n,i,g);const m=q.useRef(!1);q.useInsertionEffect(()=>{h&&m.current&&h.update(n,c)});const b=n[BI],S=q.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return mx(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),S.current&&h.animationState&&h.animationState.animateChanges())}),q.useEffect(()=>{h&&(!S.current&&h.animationState&&h.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),S.current=!1),h.enteringChildren=void 0)}),h}function bL(e,t,n,r){const{layoutId:i,layout:a,drag:o,dragConstraints:c,layoutScroll:u,layoutRoot:d,layoutCrossfade:h}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:FI(e.parent)),e.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||c&&tu(c),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:u,layoutRoot:d})}function FI(e){if(e)return e.options.allowProjection!==!1?e.projection:FI(e.parent)}function qy(e,{forwardMotionProps:t=!1}={},n,r){n&&$z(n);const i=Gx(e)?pL:hL;function a(c,u){let d;const h={...q.useContext(zx),...c,layoutId:xL(c)},{isStatic:g}=h,m=Qz(c),b=i(c,g);if(!g&&gx){_L();const S=SL(h);d=S.MeasureLayout,m.visualElement=yL(e,b,h,r,S.ProjectionNode)}return _.jsxs(qm.Provider,{value:m,children:[d&&m.visualElement?_.jsx(d,{visualElement:m.visualElement,...h}):null,uL(e,c,mL(b,m.visualElement,u),b,g,t)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=q.forwardRef(a);return o[gL]=e,o}function xL({layoutId:e}){const t=q.useContext(px).id;return t&&e!==void 0?t+"-"+e:e}function _L(e,t){q.useContext(II).strict}function SL(e){const{drag:t,layout:n}=yu;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function wL(e,t){if(typeof Proxy>"u")return qy;const n=new Map,r=(a,o)=>qy(a,o,e,t),i=(a,o)=>r(a,o);return new Proxy(i,{get:(a,o)=>o==="create"?r:(n.has(o)||n.set(o,qy(o,void 0,e,t)),n.get(o))})}function GI({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function EL({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function TL(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Hy(e){return e===void 0||e===1}function X1({scale:e,scaleX:t,scaleY:n}){return!Hy(e)||!Hy(t)||!Hy(n)}function Cl(e){return X1(e)||qI(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function qI(e){return $A(e.x)||$A(e.y)}function $A(e){return e&&e!=="0%"}function nm(e,t,n){const r=e-n,i=t*r;return n+i}function YA(e,t,n,r,i){return i!==void 0&&(e=nm(e,i,r)),nm(e,n,r)+t}function W1(e,t=0,n=1,r,i){e.min=YA(e.min,t,n,r,i),e.max=YA(e.max,t,n,r,i)}function HI(e,{x:t,y:n}){W1(e.x,t.translate,t.scale,t.originPoint),W1(e.y,n.translate,n.scale,n.originPoint)}const XA=.999999999999,WA=1.0000000000001;function AL(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let a,o;for(let c=0;c<i;c++){a=n[c],o=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&nu(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,HI(e,o)),r&&Cl(a.latestValues)&&nu(e,a.latestValues))}t.x<WA&&t.x>XA&&(t.x=1),t.y<WA&&t.y>XA&&(t.y=1)}function eu(e,t){e.min=e.min+t,e.max=e.max+t}function KA(e,t,n,r,i=.5){const a=nn(e.min,e.max,i);W1(e,t,n,a,r)}function nu(e,t){KA(e.x,t.x,t.scaleX,t.scale,t.originX),KA(e.y,t.y,t.scaleY,t.scale,t.originY)}function $I(e,t){return GI(TL(e.getBoundingClientRect(),t))}function CL(e,t,n){const r=$I(e,n),{scroll:i}=t;return i&&(eu(r.x,i.offset.x),eu(r.y,i.offset.y)),r}const QA=()=>({translate:0,scale:1,origin:0,originPoint:0}),ru=()=>({x:QA(),y:QA()}),ZA=()=>({min:0,max:0}),xn=()=>({x:ZA(),y:ZA()}),K1={current:null},YI={current:!1};function RL(){if(YI.current=!0,!!gx)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>K1.current=e.matches;e.addEventListener("change",t),t()}else K1.current=!1}const DL=new WeakMap;function IL(e,t,n){for(const r in t){const i=t[r],a=n[r];if(mr(i))e.addValue(r,i);else if(mr(a))e.addValue(r,vu(i,{owner:e}));else if(a!==i)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(r);e.addValue(r,vu(o!==void 0?o:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const JA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class kL{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Mx,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Hr.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,tn.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=$m(n),this.isVariantNode=NI(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in g){const b=g[m];u[m]!==void 0&&mr(b)&&b.set(u[m])}}mount(t){this.current=t,DL.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),YI.current||RL(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:K1.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),jo(this.notifyUpdate),jo(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Bu.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&tn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in yu){const n=yu[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):xn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<JA.length;r++){const i=JA[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=t[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=IL(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=vu(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(LD(r)||UD(r))?r=parseFloat(r):!Lz(r)&&zo.test(n)&&(r=SI(t,n)),this.setBaseTarget(t,mr(r)?r.get():r)),mr(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=qx(this.props,n,this.presenceContext?.custom);a&&(r=a[t])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!mr(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new _x),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){Vx.render(this.render)}}class XI extends kL{constructor(){super(...arguments),this.KeyframeResolver=Cz}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;mr(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function WI(e,{style:t,vars:n},r,i){const a=e.style;let o;for(o in t)a[o]=t[o];i?.applyProjectionStyles(a,r);for(o in n)a.setProperty(o,n[o])}function NL(e){return window.getComputedStyle(e)}class ML extends XI{constructor(){super(...arguments),this.type="html",this.renderInstance=WI}readValueFromInstance(t,n){if(Bu.has(n))return this.projection?.isProjecting?U1(n):$6(t,n);{const r=NL(t),i=(Ex(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return $I(t,n)}build(t,n,r){Ux(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return Hx(t,n,r)}}const KI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function OL(e,t,n,r){WI(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(KI.has(i)?i:$x(i),t.attrs[i])}class PL extends XI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=xn}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Bu.has(n)){const r=_I(n);return r&&r.default||0}return n=KI.has(n)?n:$x(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return LI(t,n,r)}build(t,n,r){PI(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,i){OL(t,n,r,i)}mount(t){this.isSVGTag=jI(t.tagName),super.mount(t)}}const VL=(e,t)=>Gx(e)?new PL(t):new ML(t,{allowProjection:e!==q.Fragment});function fu(e,t,n){const r=e.getProps();return qx(r,t,n!==void 0?n:r.custom,e)}const Q1=e=>Array.isArray(e);function jL(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,vu(n))}function zL(e){return Q1(e)?e[e.length-1]||0:e}function Yx(e,t){const n=fu(e,t);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const o in a){const c=zL(a[o]);jL(e,o,c)}}function LL(e){return!!(mr(e)&&e.add)}function Z1(e,t){const n=e.getValue("willChange");if(LL(n))return n.add(t);if(!n&&ws.WillChange){const r=new ws.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function QI(e){return e.props[BI]}const BL=e=>e!==null;function UL(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(BL),a=t&&n!=="loop"&&t%2===1?0:i.length-1;return i[a]}const FL={type:"spring",stiffness:500,damping:25,restSpeed:10},GL=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),qL={type:"keyframes",duration:.8},HL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},$L=(e,{keyframes:t})=>t.length>2?qL:Bu.has(e)?e.startsWith("scale")?GL(t[1]):FL:HL;function YL({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:c,from:u,elapsed:d,...h}){return!!Object.keys(h).length}const Xx=(e,t,n,r={},i,a)=>o=>{const c=Ox(r,e)||{},u=c.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Ra(u);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-d,onUpdate:m=>{t.set(m),c.onUpdate&&c.onUpdate(m)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:e,motionValue:t,element:a?void 0:i};YL(c)||Object.assign(h,$L(e,h)),h.duration&&(h.duration=Ra(h.duration)),h.repeatDelay&&(h.repeatDelay=Ra(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let g=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&($1(h),h.delay===0&&(g=!0)),(ws.instantAnimations||ws.skipAnimations)&&(g=!0,$1(h),h.delay=0),h.allowFlatten=!c.type&&!c.ease,g&&!a&&t.get()!==void 0){const m=UL(h.keyframes,c);if(m!==void 0){tn.update(()=>{h.onUpdate(m),h.onComplete()});return}}return c.isSync?new Nx(h):new gz(h)};function XL({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function ZI(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:o,...c}=t;r&&(a=r);const u=[],d=i&&e.animationState&&e.animationState.getState()[i];for(const h in c){const g=e.getValue(h,e.latestValues[h]??null),m=c[h];if(m===void 0||d&&XL(d,h))continue;const b={delay:n,...Ox(a||{},h)},S=g.get();if(S!==void 0&&!g.isAnimating&&!Array.isArray(m)&&m===S&&!b.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const T=QI(e);if(T){const D=window.MotionHandoffAnimation(T,h,tn);D!==null&&(b.startTime=D,w=!0)}}Z1(e,h),g.start(Xx(h,g,m,e.shouldReduceMotion&&yI.has(h)?{type:!1}:b,e,w));const E=g.animation;E&&u.push(E)}return o&&Promise.all(u).then(()=>{tn.update(()=>{o&&Yx(e,o)})}),u}function JI(e,t,n,r=0,i=1){const a=Array.from(e).sort((d,h)=>d.sortNodePosition(h)).indexOf(t),o=e.size,c=(o-1)*r;return typeof n=="function"?n(a,o):i===1?a*r:c-a*r}function J1(e,t,n={}){const r=fu(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(ZI(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:g}=i;return WL(e,t,u,d,h,g,n)}:()=>Promise.resolve(),{when:c}=i;if(c){const[u,d]=c==="beforeChildren"?[a,o]:[o,a];return u().then(()=>d())}else return Promise.all([a(),o(n.delay)])}function WL(e,t,n=0,r=0,i=0,a=1,o){const c=[];for(const u of e.variantChildren)u.notify("AnimationStart",t),c.push(J1(u,t,{...o,delay:n+(typeof r=="function"?0:r)+JI(e.variantChildren,u,r,i,a)}).then(()=>u.notify("AnimationComplete",t)));return Promise.all(c)}function tk(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(a=>J1(e,a,n));r=Promise.all(i)}else if(typeof t=="string")r=J1(e,t,n);else{const i=typeof t=="function"?fu(e,t,n.custom):t;r=Promise.all(ZI(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function ek(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const KL=Bx.length;function nk(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?nk(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<KL;n++){const r=Bx[n],i=e.props[r];(zd(i)||i===!1)&&(t[r]=i)}return t}const QL=[...Lx].reverse(),ZL=Lx.length;function JL(e){return t=>Promise.all(t.map(({animation:n,options:r})=>tk(e,n,r)))}function t9(e){let t=JL(e),n=tC(),r=!0;const i=u=>(d,h)=>{const g=fu(e,h,u==="exit"?e.presenceContext?.custom:void 0);if(g){const{transition:m,transitionEnd:b,...S}=g;d={...d,...S,...b}}return d};function a(u){t=u(e)}function o(u){const{props:d}=e,h=nk(e.parent)||{},g=[],m=new Set;let b={},S=1/0;for(let E=0;E<ZL;E++){const T=QL[E],D=n[T],I=d[T]!==void 0?d[T]:h[T],M=zd(I),z=T===u?D.isActive:null;z===!1&&(S=E);let P=I===h[T]&&I!==d[T]&&M;if(P&&r&&e.manuallyAnimateOnMount&&(P=!1),D.protectedKeys={...b},!D.isActive&&z===null||!I&&!D.prevProp||Hm(I)||typeof I=="boolean")continue;const A=e9(D.prevProp,I);let C=A||T===u&&D.isActive&&!P&&M||E>S&&M,k=!1;const j=Array.isArray(I)?I:[I];let L=j.reduce(i(T),{});z===!1&&(L={});const{prevResolvedValues:B={}}=D,V={...B,...L},K=$=>{C=!0,m.has($)&&(k=!0,m.delete($)),D.needsAnimating[$]=!0;const et=e.getValue($);et&&(et.liveStyle=!1)};for(const $ in V){const et=L[$],at=B[$];if(b.hasOwnProperty($))continue;let X=!1;Q1(et)&&Q1(at)?X=!ek(et,at):X=et!==at,X?et!=null?K($):m.add($):et!==void 0&&m.has($)?K($):D.protectedKeys[$]=!0}D.prevProp=I,D.prevResolvedValues=L,D.isActive&&(b={...b,...L}),r&&e.blockInitialAnimation&&(C=!1);const Y=P&&A;C&&(!Y||k)&&g.push(...j.map($=>{const et={type:T};if(typeof $=="string"&&r&&!Y&&e.manuallyAnimateOnMount&&e.parent){const{parent:at}=e,X=fu(at,$);if(at.enteringChildren&&X){const{delayChildren:U}=X.transition||{};et.delay=JI(at.enteringChildren,e,U)}}return{animation:$,options:et}}))}if(m.size){const E={};if(typeof d.initial!="boolean"){const T=fu(e,Array.isArray(d.initial)?d.initial[0]:d.initial);T&&T.transition&&(E.transition=T.transition)}m.forEach(T=>{const D=e.getBaseTarget(T),I=e.getValue(T);I&&(I.liveStyle=!0),E[T]=D??null}),g.push({animation:E})}let w=!!g.length;return r&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(w=!1),r=!1,w?t(g):Promise.resolve()}function c(u,d){if(n[u].isActive===d)return Promise.resolve();e.variantChildren?.forEach(g=>g.animationState?.setActive(u,d)),n[u].isActive=d;const h=o(u);for(const g in n)n[g].protectedKeys={};return h}return{animateChanges:o,setActive:c,setAnimateFunction:a,getState:()=>n,reset:()=>{n=tC()}}}function e9(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!ek(t,e):!1}function Al(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function tC(){return{animate:Al(!0),whileInView:Al(),whileHover:Al(),whileTap:Al(),whileDrag:Al(),whileFocus:Al(),exit:Al()}}class Wo{constructor(t){this.isMounted=!1,this.node=t}update(){}}class n9 extends Wo{constructor(t){super(t),t.animationState||(t.animationState=t9(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Hm(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let r9=0;class i9 extends Wo{constructor(){super(...arguments),this.id=r9++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const a9={animation:{Feature:n9},exit:{Feature:i9}};function Bd(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function fh(e){return{point:{x:e.pageX,y:e.pageY}}}const s9=e=>t=>jx(t)&&e(t,fh(t));function md(e,t,n,r){return Bd(e,t,s9(n),r)}const rk=1e-4,o9=1-rk,l9=1+rk,ik=.01,c9=0-ik,u9=0+ik;function Rr(e){return e.max-e.min}function f9(e,t,n){return Math.abs(e-t)<=n}function eC(e,t,n,r=.5){e.origin=r,e.originPoint=nn(t.min,t.max,e.origin),e.scale=Rr(n)/Rr(t),e.translate=nn(n.min,n.max,e.origin)-e.originPoint,(e.scale>=o9&&e.scale<=l9||isNaN(e.scale))&&(e.scale=1),(e.translate>=c9&&e.translate<=u9||isNaN(e.translate))&&(e.translate=0)}function vd(e,t,n,r){eC(e.x,t.x,n.x,r?r.originX:void 0),eC(e.y,t.y,n.y,r?r.originY:void 0)}function nC(e,t,n){e.min=n.min+t.min,e.max=e.min+Rr(t)}function d9(e,t,n){nC(e.x,t.x,n.x),nC(e.y,t.y,n.y)}function rC(e,t,n){e.min=t.min-n.min,e.max=e.min+Rr(t)}function yd(e,t,n){rC(e.x,t.x,n.x),rC(e.y,t.y,n.y)}function Ti(e){return[e("x"),e("y")]}const ak=({current:e})=>e?e.ownerDocument.defaultView:null,iC=(e,t)=>Math.abs(e-t);function h9(e,t){const n=iC(e.x,t.x),r=iC(e.y,t.y);return Math.sqrt(n**2+r**2)}class sk{constructor(t,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Yy(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,S=h9(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!S)return;const{point:w}=m,{timestamp:E}=nr;this.history.push({...w,timestamp:E});const{onStart:T,onMove:D}=this.handlers;b||(T&&T(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,m)},this.handlePointerMove=(m,b)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=$y(b,this.transformPagePoint),tn.update(this.updatePoint,!0)},this.handlePointerUp=(m,b)=>{this.end();const{onEnd:S,onSessionEnd:w,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Yy(m.type==="pointercancel"?this.lastMoveEventInfo:$y(b,this.transformPagePoint),this.history);this.startEvent&&S&&S(m,T),w&&w(m,T)},!jx(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const c=fh(t),u=$y(c,this.transformPagePoint),{point:d}=u,{timestamp:h}=nr;this.history=[{...d,timestamp:h}];const{onSessionStart:g}=n;g&&g(t,Yy(u,this.history)),this.removeListeners=lh(md(this.contextWindow,"pointermove",this.handlePointerMove),md(this.contextWindow,"pointerup",this.handlePointerUp),md(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),jo(this.updatePoint)}}function $y(e,t){return t?{point:t(e.point)}:e}function aC(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Yy({point:e},t){return{point:e,delta:aC(e,ok(t)),offset:aC(e,p9(t)),velocity:g9(t,.1)}}function p9(e){return e[0]}function ok(e){return e[e.length-1]}function g9(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=ok(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>Ra(t)));)n--;if(!r)return{x:0,y:0};const a=Ri(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function m9(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?nn(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?nn(n,e,r.max):Math.min(e,n)),e}function sC(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function v9(e,{top:t,left:n,bottom:r,right:i}){return{x:sC(e.x,n,i),y:sC(e.y,t,r)}}function oC(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function y9(e,t){return{x:oC(e.x,t.x),y:oC(e.y,t.y)}}function b9(e,t){let n=.5;const r=Rr(e),i=Rr(t);return i>r?n=Od(t.min,t.max-r,e.min):r>i&&(n=Od(e.min,e.max-i,t.min)),Ss(0,1,n)}function x9(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const tb=.35;function _9(e=tb){return e===!1?e=0:e===!0&&(e=tb),{x:lC(e,"left","right"),y:lC(e,"top","bottom")}}function lC(e,t,n){return{min:cC(e,t),max:cC(e,n)}}function cC(e,t){return typeof e=="number"?e:e[t]||0}const S9=new WeakMap;class w9{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=xn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=g=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(fh(g).point)},o=(g,m)=>{const{drag:b,dragPropagation:S,onDragStart:w}=this.getProps();if(b&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=kz(b),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ti(T=>{let D=this.getAxisMotionValue(T).get()||0;if(Da.test(D)){const{projection:I}=this.visualElement;if(I&&I.layout){const M=I.layout.layoutBox[T];M&&(D=Rr(M)*(parseFloat(D)/100))}}this.originPoint[T]=D}),w&&tn.postRender(()=>w(g,m)),Z1(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},c=(g,m)=>{this.latestPointerEvent=g,this.latestPanInfo=m;const{dragPropagation:b,dragDirectionLock:S,onDirectionLock:w,onDrag:E}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:T}=m;if(S&&this.currentDirection===null){this.currentDirection=E9(T),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",m.point,T),this.updateAxis("y",m.point,T),this.visualElement.render(),E&&E(g,m)},u=(g,m)=>{this.latestPointerEvent=g,this.latestPanInfo=m,this.stop(g,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>Ti(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new sk(t,{onSessionStart:a,onStart:o,onMove:c,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:ak(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&tn.postRender(()=>c(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!lg(t,i,this.currentDirection))return;const a=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=m9(o,this.constraints[t],this.elastic[t])),a.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;t&&tu(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=v9(r.layoutBox,t):this.constraints=!1,this.elastic=_9(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ti(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=x9(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!tu(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=CL(r,i.root,this.visualElement.getTransformPagePoint());let o=y9(i.layout.layoutBox,a);if(n){const c=n(EL(o));this.hasMutatedConstraints=!!c,c&&(o=GI(c))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},d=Ti(h=>{if(!lg(h,n,this.currentDirection))return;let g=u&&u[h]||{};o&&(g={min:0,max:0});const m=i?200:1e6,b=i?40:1e7,S={type:"inertia",velocity:r?t[h]:0,bounceStiffness:m,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(h,S)});return Promise.all(d).then(c)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Z1(this.visualElement,t),r.start(Xx(t,r,0,n,this.visualElement,!1))}stopAnimation(){Ti(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ti(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Ti(n=>{const{drag:r}=this.getProps();if(!lg(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:c}=i.layout.layoutBox[n];a.set(t[n]-nn(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!tu(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ti(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const u=c.get();i[o]=b9({min:u,max:u},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ti(o=>{if(!lg(o,t,null))return;const c=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];c.set(nn(u,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;S9.set(this.visualElement,this);const t=this.visualElement.current,n=md(t,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();tu(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),tn.read(r);const o=Bd(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(Ti(h=>{const g=this.getAxisMotionValue(h);g&&(this.originPoint[h]+=u[h].translate,g.set(g.get()+u[h].translate))}),this.visualElement.render())}));return()=>{o(),n(),a(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=tb,dragMomentum:c=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:c}}}function lg(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function E9(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class T9 extends Wo{constructor(t){super(t),this.removeGroupControls=Di,this.removeListeners=Di,this.controls=new w9(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Di}unmount(){this.removeGroupControls(),this.removeListeners()}}const uC=e=>(t,n)=>{e&&tn.postRender(()=>e(t,n))};class A9 extends Wo{constructor(){super(...arguments),this.removePointerDownListener=Di}onPointerDown(t){this.session=new sk(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ak(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:uC(t),onStart:uC(n),onMove:r,onEnd:(a,o)=>{delete this.session,i&&tn.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=md(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Vg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function fC(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const nd={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Wt.test(e))e=parseFloat(e);else return e;const n=fC(e,t.target.x),r=fC(e,t.target.y);return`${n}% ${r}%`}},C9={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=zo.parse(e);if(i.length>5)return r;const a=zo.createTransformer(e),o=typeof i[0]!="number"?1:0,c=n.x.scale*t.x,u=n.y.scale*t.y;i[0+o]/=c,i[1+o]/=u;const d=nn(c,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),a(i)}};let Xy=!1;class R9 extends q.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=t;Zz(D9),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),Xy&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Vg.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:o}=r;return o&&(o.isPresent=a,Xy=!0,i||t.layoutDependency!==n||n===void 0||t.isPresent!==a?o.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?o.promote():o.relegate()||tn.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Vx.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;Xy=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function lk(e){const[t,n]=DI(),r=q.useContext(px);return _.jsx(R9,{...e,layoutGroup:r,switchLayoutGroup:q.useContext(UI),isPresent:t,safeToRemove:n})}const D9={borderRadius:{...nd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:nd,borderTopRightRadius:nd,borderBottomLeftRadius:nd,borderBottomRightRadius:nd,boxShadow:C9};function I9(e,t,n){const r=mr(e)?e:vu(e);return r.start(Xx("",r,t,n)),r.animation}const k9=(e,t)=>e.depth-t.depth;class N9{constructor(){this.children=[],this.isDirty=!1}add(t){vx(this.children,t),this.isDirty=!0}remove(t){yx(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(k9),this.isDirty=!1,this.children.forEach(t)}}function M9(e,t){const n=Hr.now(),r=({timestamp:i})=>{const a=i-n;a>=t&&(jo(r),e(a-t))};return tn.setup(r,!0),()=>jo(r)}const ck=["TopLeft","TopRight","BottomLeft","BottomRight"],O9=ck.length,dC=e=>typeof e=="string"?parseFloat(e):e,hC=e=>typeof e=="number"||Wt.test(e);function P9(e,t,n,r,i,a){i?(e.opacity=nn(0,n.opacity??1,V9(r)),e.opacityExit=nn(t.opacity??1,0,j9(r))):a&&(e.opacity=nn(t.opacity??1,n.opacity??1,r));for(let o=0;o<O9;o++){const c=`border${ck[o]}Radius`;let u=pC(t,c),d=pC(n,c);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||hC(u)===hC(d)?(e[c]=Math.max(nn(dC(u),dC(d),r),0),(Da.test(d)||Da.test(u))&&(e[c]+="%")):e[c]=d}(t.rotate||n.rotate)&&(e.rotate=nn(t.rotate||0,n.rotate||0,r))}function pC(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const V9=uk(0,.5,WD),j9=uk(.5,.95,Di);function uk(e,t,n){return r=>r<e?0:r>t?1:n(Od(e,t,r))}function gC(e,t){e.min=t.min,e.max=t.max}function wi(e,t){gC(e.x,t.x),gC(e.y,t.y)}function mC(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function vC(e,t,n,r,i){return e-=t,e=nm(e,1/n,r),i!==void 0&&(e=nm(e,1/i,r)),e}function z9(e,t=0,n=1,r=.5,i,a=e,o=e){if(Da.test(t)&&(t=parseFloat(t),t=nn(o.min,o.max,t/100)-o.min),typeof t!="number")return;let c=nn(a.min,a.max,r);e===a&&(c-=t),e.min=vC(e.min,t,n,c,i),e.max=vC(e.max,t,n,c,i)}function yC(e,t,[n,r,i],a,o){z9(e,t[n],t[r],t[i],t.scale,a,o)}const L9=["x","scaleX","originX"],B9=["y","scaleY","originY"];function bC(e,t,n,r){yC(e.x,t,L9,n?n.x:void 0,r?r.x:void 0),yC(e.y,t,B9,n?n.y:void 0,r?r.y:void 0)}function xC(e){return e.translate===0&&e.scale===1}function fk(e){return xC(e.x)&&xC(e.y)}function _C(e,t){return e.min===t.min&&e.max===t.max}function U9(e,t){return _C(e.x,t.x)&&_C(e.y,t.y)}function SC(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function dk(e,t){return SC(e.x,t.x)&&SC(e.y,t.y)}function wC(e){return Rr(e.x)/Rr(e.y)}function EC(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class F9{constructor(){this.members=[]}add(t){vx(this.members,t),t.scheduleRender()}remove(t){if(yx(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function G9(e,t,n){let r="";const i=e.x.translate/t.x,a=e.y.translate/t.y,o=n?.z||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:g,rotateY:m,skewX:b,skewY:S}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),g&&(r+=`rotateX(${g}deg) `),m&&(r+=`rotateY(${m}deg) `),b&&(r+=`skewX(${b}deg) `),S&&(r+=`skewY(${S}deg) `)}const c=e.x.scale*t.x,u=e.y.scale*t.y;return(c!==1||u!==1)&&(r+=`scale(${c}, ${u})`),r||"none"}const Wy=["","X","Y","Z"],q9=1e3;let H9=0;function Ky(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function hk(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=QI(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",tn,!(i||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&hk(r)}function pk({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},c=t?.()){this.id=H9++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(X9),this.nodes.forEach(Z9),this.nodes.forEach(J9),this.nodes.forEach(W9)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new N9)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new _x),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const u=this.eventHandlers.get(o);u&&u.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=RI(o)&&!jz(o),this.instance=o;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),e){let h,g=0;const m=()=>this.root.updateBlockedByResize=!1;tn.read(()=>{g=window.innerWidth}),e(o,()=>{const b=window.innerWidth;b!==g&&(g=b,this.root.updateBlockedByResize=!0,h&&h(),h=M9(m,250),Vg.hasAnimatedSinceResize&&(Vg.hasAnimatedSinceResize=!1,this.nodes.forEach(CC)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:g,hasRelativeLayoutChanged:m,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||d.getDefaultTransition()||iB,{onLayoutAnimationStart:w,onLayoutAnimationComplete:E}=d.getProps(),T=!this.targetLayout||!dk(this.targetLayout,b),D=!g&&m;if(this.options.layoutRoot||this.resumeFrom||D||g&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const I={...Ox(S,"layout"),onPlay:w,onComplete:E};(d.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I),this.setAnimationOrigin(h,D)}else g||CC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),jo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(tB),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&hk(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const g=this.path[h];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(TC);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(AC);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Q9),this.nodes.forEach($9),this.nodes.forEach(Y9)):this.nodes.forEach(AC),this.clearAllSnapshots();const c=Hr.now();nr.delta=Ss(0,1e3/60,c-nr.timestamp),nr.timestamp=c,nr.isProcessing=!0,zy.update.process(nr),zy.preRender.process(nr),zy.render.process(nr),nr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Vx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(K9),this.sharedNodes.forEach(eB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,tn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){tn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Rr(this.snapshot.measuredBox.x)&&!Rr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=xn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!fk(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&this.instance&&(c||Cl(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return o&&(u=this.removeTransform(u)),aB(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return xn();const c=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(sB))){const{scroll:d}=this.root;d&&(eu(c.x,d.offset.x),eu(c.y,d.offset.y))}return c}removeElementScroll(o){const c=xn();if(wi(c,o),this.scroll?.wasRoot)return c;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:g}=d;d!==this.root&&h&&g.layoutScroll&&(h.wasRoot&&wi(c,o),eu(c.x,h.offset.x),eu(c.y,h.offset.y))}return c}applyTransform(o,c=!1){const u=xn();wi(u,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!c&&h.options.layoutScroll&&h.scroll&&h!==h.root&&nu(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Cl(h.latestValues)&&nu(u,h.latestValues)}return Cl(this.latestValues)&&nu(u,this.latestValues),u}removeTransform(o){const c=xn();wi(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!Cl(d.latestValues))continue;X1(d.latestValues)&&d.updateSnapshot();const h=xn(),g=d.measurePageBox();wi(h,g),bC(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Cl(this.latestValues)&&bC(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==nr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:g}=this.options;if(!(!this.layout||!(h||g))){if(this.resolvedRelativeTargetAt=nr.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xn(),this.relativeTargetOrigin=xn(),yd(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),wi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=xn(),this.targetWithTransforms=xn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),d9(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):wi(this.target,this.layout.layoutBox),HI(this.target,this.targetDelta)):wi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xn(),this.relativeTargetOrigin=xn(),yd(this.relativeTargetOrigin,this.target,m.target),wi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||X1(this.parent.latestValues)||qI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===nr.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;wi(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,m=this.treeScale.y;AL(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=xn());const{target:b}=o;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(mC(this.prevProjectionDelta.x,this.projectionDelta.x),mC(this.prevProjectionDelta.y,this.projectionDelta.y)),vd(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==m||!EC(this.projectionDelta.x,this.prevProjectionDelta.x)||!EC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ru(),this.projectionDelta=ru(),this.projectionDeltaWithTransform=ru()}setAnimationOrigin(o,c=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},g=ru();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const m=xn(),b=u?u.source:void 0,S=this.layout?this.layout.source:void 0,w=b!==S,E=this.getStack(),T=!E||E.members.length<=1,D=!!(w&&!T&&this.options.crossfade===!0&&!this.path.some(rB));this.animationProgress=0;let I;this.mixTargetDelta=M=>{const z=M/1e3;RC(g.x,o.x,z),RC(g.y,o.y,z),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(yd(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),nB(this.relativeTarget,this.relativeTargetOrigin,m,z),I&&U9(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=xn()),wi(I,this.relativeTarget)),w&&(this.animationValues=h,P9(h,d,this.latestValues,z,D,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(jo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=tn.update(()=>{Vg.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=vu(0)),this.currentAnimation=I9(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(q9),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:u,layout:d,latestValues:h}=o;if(!(!c||!u||!d)){if(this!==o&&this.layout&&d&&gk(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||xn();const g=Rr(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+g;const m=Rr(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+m}wi(c,u),nu(c,h),vd(this.projectionDeltaWithTransform,this.layoutCorrected,c,h)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new F9),this.sharedNodes.get(o).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const d={};u.z&&Ky("z",o,d,this.animationValues);for(let h=0;h<Wy.length;h++)Ky(`rotate${Wy[h]}`,o,d,this.animationValues),Ky(`skew${Wy[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Pg(c?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Pg(c?.pointerEvents)||""),this.hasProjected&&!Cl(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let g=G9(this.projectionDeltaWithTransform,this.treeScale,h);u&&(g=u(h,g)),o.transform=g;const{x:m,y:b}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${b.origin*100}% 0`,d.animationValues?o.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const S in Ld){if(h[S]===void 0)continue;const{correct:w,applyTo:E,isCSSVariable:T}=Ld[S],D=g==="none"?h[S]:w(h[S],d);if(E){const I=E.length;for(let M=0;M<I;M++)o[E[M]]=D}else T?this.options.visualElement.renderState.vars[S]=D:o[S]=D}this.options.layoutId&&(o.pointerEvents=d===this?Pg(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(TC),this.root.sharedNodes.clear()}}}function $9(e){e.updateLayout()}function Y9(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:i}=e.options,a=t.source!==e.layout.source;i==="size"?Ti(h=>{const g=a?t.measuredBox[h]:t.layoutBox[h],m=Rr(g);g.min=n[h].min,g.max=g.min+m}):gk(i,t.layoutBox,n)&&Ti(h=>{const g=a?t.measuredBox[h]:t.layoutBox[h],m=Rr(n[h]);g.max=g.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+m)});const o=ru();vd(o,n,t.layoutBox);const c=ru();a?vd(c,e.applyTransform(r,!0),t.measuredBox):vd(c,n,t.layoutBox);const u=!fk(o);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:g,layout:m}=h;if(g&&m){const b=xn();yd(b,t.layoutBox,g.layoutBox);const S=xn();yd(S,n,m.layoutBox),dk(b,S)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=S,e.relativeTargetOrigin=b,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function X9(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function W9(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function K9(e){e.clearSnapshot()}function TC(e){e.clearMeasurements()}function AC(e){e.isLayoutDirty=!1}function Q9(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function CC(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Z9(e){e.resolveTargetDelta()}function J9(e){e.calcProjection()}function tB(e){e.resetSkewAndRotation()}function eB(e){e.removeLeadSnapshot()}function RC(e,t,n){e.translate=nn(t.translate,0,n),e.scale=nn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function DC(e,t,n,r){e.min=nn(t.min,n.min,r),e.max=nn(t.max,n.max,r)}function nB(e,t,n,r){DC(e.x,t.x,n.x,r),DC(e.y,t.y,n.y,r)}function rB(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const iB={duration:.45,ease:[.4,0,.1,1]},IC=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),kC=IC("applewebkit/")&&!IC("chrome/")?Math.round:Di;function NC(e){e.min=kC(e.min),e.max=kC(e.max)}function aB(e){NC(e.x),NC(e.y)}function gk(e,t,n){return e==="position"||e==="preserve-aspect"&&!f9(wC(t),wC(n),.2)}function sB(e){return e!==e.root&&e.scroll?.wasRoot}const oB=pk({attachResizeListener:(e,t)=>Bd(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Qy={current:void 0},mk=pk({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Qy.current){const e=new oB({});e.mount(window),e.setOptions({layoutScroll:!0}),Qy.current=e}return Qy.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),lB={pan:{Feature:A9},drag:{Feature:T9,ProjectionNode:mk,MeasureLayout:lk}};function MC(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&tn.postRender(()=>a(t,fh(t)))}class cB extends Wo{mount(){const{current:t}=this.node;t&&(this.unmount=Nz(t,(n,r)=>(MC(this.node,r,"Start"),i=>MC(this.node,i,"End"))))}unmount(){}}class uB extends Wo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=lh(Bd(this.node.current,"focus",()=>this.onFocus()),Bd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function OC(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&tn.postRender(()=>a(t,fh(t)))}class fB extends Wo{mount(){const{current:t}=this.node;t&&(this.unmount=Vz(t,(n,r)=>(OC(this.node,r,"Start"),(i,{success:a})=>OC(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const eb=new WeakMap,Zy=new WeakMap,dB=e=>{const t=eb.get(e.target);t&&t(e)},hB=e=>{e.forEach(dB)};function pB({root:e,...t}){const n=e||document;Zy.has(n)||Zy.set(n,{});const r=Zy.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(hB,{root:e,...t})),r[i]}function gB(e,t,n){const r=pB(t);return eb.set(e,n),r.observe(e),()=>{eb.delete(e),r.unobserve(e)}}const mB={some:0,all:1};class vB extends Wo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:mB[i]},c=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:g}=this.node.getProps(),m=d?h:g;m&&m(u)};return gB(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(yB(t,n))&&this.startObserver()}unmount(){}}function yB({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const bB={inView:{Feature:vB},tap:{Feature:fB},focus:{Feature:uB},hover:{Feature:cB}},xB={layout:{ProjectionNode:mk,MeasureLayout:lk}},_B={...a9,...bB,...lB,...xB},Uu=wL(_B,VL);function SB(e){e.values.forEach(t=>t.stop())}function nb(e,t){[...t].reverse().forEach(r=>{const i=e.getVariant(r);i&&Yx(e,i),e.variantChildren&&e.variantChildren.forEach(a=>{nb(a,t)})})}function wB(e,t){if(Array.isArray(t))return nb(e,t);if(typeof t=="string")return nb(e,[t]);Yx(e,t)}function EB(){const e=new Set,t={subscribe(n){return e.add(n),()=>void e.delete(n)},start(n,r){const i=[];return e.forEach(a=>{i.push(tk(a,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return e.forEach(r=>{wB(r,n)})},stop(){e.forEach(n=>{SB(n)})},mount(){return()=>{t.stop()}}};return t}function TB(){const e=Fm(EB);return mx(e.mount,[]),e}const AB=TB;function CB(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.map(function(r){return r.split(" ").map(function(i){return i?""+e+i:""}).join(" ")}).join(" ")}function RB(e,t){return t.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+e+"$1")+"{"})}function ms(e,t){return function(n){n&&(e[t]=n)}}function vk(e,t,n){return function(r){r&&(e[t][n]=r)}}function PC(e,t){return function(n){var r=n.prototype;e.forEach(function(i){t(r,i)})}}function DB(e,t){return t===void 0&&(t={}),function(n,r){e.forEach(function(i){var a=t[i]||i;a in n||(n[a]=function(){for(var o,c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];var d=(o=this[r])[i].apply(o,c);return d===this[r]?this:d})})}}var IB="function",kB="object",NB="string",MB="number",Wx="undefined",yk=typeof window!==Wx,OB=typeof document!==Wx&&document,PB=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Nn=1e-7,cg={cm:function(e){return e*96/2.54},mm:function(e){return e*96/254},in:function(e){return e*96},pt:function(e){return e*96/72},pc:function(e){return e*96/6},"%":function(e,t){return e*t/100},vw:function(e,t){return t===void 0&&(t=window.innerWidth),e/100*t},vh:function(e,t){return t===void 0&&(t=window.innerHeight),e/100*t},vmax:function(e,t){return t===void 0&&(t=Math.max(window.innerWidth,window.innerHeight)),e/100*t},vmin:function(e,t){return t===void 0&&(t=Math.min(window.innerWidth,window.innerHeight)),e/100*t}};function VB(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}function rm(e,t,n,r){return(e*r+t*n)/(n+r)}function Ym(e){return typeof e===Wx}function Qi(e){return e&&typeof e===kB}function Pn(e){return Array.isArray(e)}function Yr(e){return typeof e===NB}function bu(e){return typeof e===MB}function Kx(e){return typeof e===IB}function jB(e,t){var n=e===""||e==" ",r=t===""||t==" ";return r&&n||e===t}function bk(e,t,n,r,i){var a=Qx(e,t,n);return a?n:zB(e,t,n+1,r,i)}function Qx(e,t,n){if(!e.ignore)return null;var r=t.slice(Math.max(n-3,0),n+3).join("");return new RegExp(e.ignore).exec(r)}function zB(e,t,n,r,i){for(var a=function(d){var h=t[d].trim();if(h===e.close&&!Qx(e,t,d))return{value:d};var g=d,m=Xr(i,function(b){var S=b.open;return S===h});if(m&&(g=bk(m,t,d,r,i)),g===-1)return o=d,"break";d=g,o=d},o,c=n;c<r;++c){var u=a(c);if(c=o,typeof u=="object")return u.value;if(u==="break")break}return-1}function Zx(e,t){var n=Yr(t)?{separator:t}:t,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,o=n.isSeparateOnlyOpenClose,c=n.isSeparateOpenClose,u=c===void 0?o:c,d=n.openCloseCharacters,h=d===void 0?PB:d,g=h.map(function(A){var C=A.open,k=A.close;return C===k?C:C+"|"+k}).join("|"),m="(\\s*"+i+"\\s*|"+g+"|\\s+)",b=new RegExp(m,"g"),S=e.split(b).filter(function(A){return A&&A!=="undefined"}),w=S.length,E=[],T=[];function D(){return T.length?(E.push(T.join("")),T=[],!0):!1}for(var I=function(A){var C=S[A].trim(),k=A,j=Xr(h,function(V){var K=V.open;return K===C}),L=Xr(h,function(V){var K=V.close;return K===C});if(j){if(k=bk(j,S,A,w,h),k!==-1&&u)return D()&&a||(E.push(S.slice(A,k+1).join("")),A=k,a)?(M=A,"break"):(M=A,"continue")}else if(L&&!Qx(L,S,A)){var B=VB(h);return B.splice(h.indexOf(L),1),{value:Zx(e,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:o,isSeparateOpenClose:u,openCloseCharacters:B})}}else if(jB(C,i)&&!o)return D(),a?(M=A,"break"):(M=A,"continue");k===-1&&(k=w-1),T.push(S.slice(A,k+1).join("")),A=k,M=A},M,z=0;z<w;++z){var P=I(z);if(z=M,typeof P=="object")return P.value;if(P==="break")break}return T.length&&E.push(T.join("")),E}function Lo(e){return Zx(e,"")}function Pl(e){return Zx(e,",")}function xk(e){var t=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(e);return!t||t.length<4?{}:{prefix:t[1],value:t[2],suffix:t[3]}}function dh(e){var t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(e);if(!t)return{prefix:"",unit:"",value:NaN};var n=t[1],r=t[2],i=t[3];return{prefix:n,unit:i,value:parseFloat(r)}}function LB(e){return e.replace(/[\s-_]+([^\s-_])/g,function(t,n){return n.toUpperCase()})}function jg(e,t){return e.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+t+i.toLowerCase()})}function Ud(){return Date.now?Date.now():new Date().getTime()}function Es(e,t,n){n===void 0&&(n=-1);for(var r=e.length,i=0;i<r;++i)if(t(e[i],i,e))return i;return n}function Xr(e,t,n){var r=Es(e,t);return r>-1?e[r]:n}var _k=(function(){var e=Ud(),t=yk&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return t?t.bind(window):function(n){var r=Ud(),i=setTimeout(function(){n(r-e)},1e3/60);return i}})(),BB=(function(){var e=yk&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return e?e.bind(window):function(t){clearTimeout(t)}})();function Ts(e){return Object.keys(e)}function UB(e){var t=Ts(e);return t.map(function(n){return e[n]})}function Ue(e,t){var n=dh(e),r=n.value,i=n.unit;if(Qi(t)){var a=t[i];if(a){if(Kx(a))return a(r);if(cg[i])return cg[i](r,a)}}else if(i==="%")return r*t/100;return cg[i]?cg[i](r):r}function rb(e,t,n){return Math.max(t,Math.min(e,n))}function VC(e,t,n,r){return r===void 0&&(r=e[0]/e[1]),[[Jt(t[0],Nn),Jt(t[0]/r,Nn)],[Jt(t[1]*r,Nn),Jt(t[1],Nn)]].filter(function(i){return i.every(function(a,o){var c=t[o],u=Jt(c,Nn);return n?a<=c||a<=u:a>=c||a>=u})})[0]||e}function Sk(e,t,n,r){if(!r)return e.map(function(b,S){return rb(b,t[S],n[S])});var i=e[0],a=e[1],o=r===!0?i/a:r,c=VC(e,t,!1,o),u=c[0],d=c[1],h=VC(e,n,!0,o),g=h[0],m=h[1];return i<u||a<d?(i=u,a=d):(i>g||a>m)&&(i=g,a=m),[i,a]}function FB(e){for(var t=e.length,n=0,r=t-1;r>=0;--r)n+=e[r];return n}function ib(e){for(var t=e.length,n=0,r=t-1;r>=0;--r)n+=e[r];return t?n/t:0}function Sn(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function GB(e){return[0,1].map(function(t){return ib(e.map(function(n){return n[t]}))})}function jC(e){var t=GB(e),n=Sn(t,e[0]),r=Sn(t,e[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function vs(e,t){return Math.sqrt(Math.pow((t?t[0]:0)-e[0],2)+Math.pow((t?t[1]:0)-e[1],2))}function Jt(e,t){if(!t)return e;var n=1/t;return Math.round(e/t)/n}function zC(e,t){return e.forEach(function(n,r){e[r]=Jt(e[r],t)}),e}function qB(e){for(var t=[],n=0;n<e;++n)t.push(n);return t}function wk(e){return e.reduce(function(t,n){return t.concat(n)},[])}function Ek(e,t){e.indexOf(t)===-1&&e.push(t)}function Bn(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function Tk(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function Ak(e,t){if(e.classList)e.classList.remove(t);else{var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}}function er(e,t,n,r){e.addEventListener(t,n,r)}function zn(e,t,n,r){e.removeEventListener(t,n,r)}function Fu(e){return e?.ownerDocument||OB}function Jx(e){return Fu(e).documentElement}function Ko(e){return Fu(e).body}function ko(e){var t;return((t=e?.ownerDocument)===null||t===void 0?void 0:t.defaultView)||window}function Ck(e){return e&&"postMessage"in e&&"blur"in e&&"self"in e}function Gu(e){return Qi(e)&&e.nodeName&&e.nodeType&&"ownerDocument"in e}var HB=(function(){function e(){this.keys=[],this.values=[]}var t=e.prototype;return t.get=function(n){return this.values[this.keys.indexOf(n)]},t.set=function(n,r){var i=this.keys,a=this.values,o=i.indexOf(n),c=o===-1?i.length:o;i[c]=n,a[c]=r},e})(),$B=(function(){function e(){this.object={}}var t=e.prototype;return t.get=function(n){return this.object[n]},t.set=function(n,r){this.object[n]=r},e})(),YB=typeof Map=="function",XB=(function(){function e(){}var t=e.prototype;return t.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},t.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},t.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},e})();function WB(e,t){var n=[],r=[];return e.forEach(function(i){var a=i[0],o=i[1],c=new XB;n[a]=c,r[o]=c}),n.forEach(function(i,a){i.connect(n[a-1])}),e.filter(function(i,a){return!t[a]}).map(function(i,a){var o=i[0],c=i[1];if(o===c)return[0,0];var u=n[o],d=r[c-1],h=u.getIndex();u.disconnect(),d?u.connect(d,d.next):u.connect(void 0,n[0]);var g=u.getIndex();return[h,g]})}var KB=(function(){function e(n,r,i,a,o,c,u,d){this.prevList=n,this.list=r,this.added=i,this.removed=a,this.changed=o,this.maintained=c,this.changedBeforeAdded=u,this.fixed=d}var t=e.prototype;return Object.defineProperty(t,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(t,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),t.caculateOrdered=function(){var n=WB(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=n.filter(function(a,o){var c=a[0],u=a[1],d=r[o],h=d[0],g=d[1];if(c!==u)return i.push([h,g]),!0}),this.cachePureChanged=i},e})();function hh(e,t,n){var r=YB?Map:n?$B:HB,i=n||function(D){return D},a=[],o=[],c=[],u=e.map(i),d=t.map(i),h=new r,g=new r,m=[],b=[],S={},w=[],E=0,T=0;return u.forEach(function(D,I){h.set(D,I)}),d.forEach(function(D,I){g.set(D,I)}),u.forEach(function(D,I){var M=g.get(D);typeof M>"u"?(++T,o.push(I)):S[M]=T}),d.forEach(function(D,I){var M=h.get(D);typeof M>"u"?(a.push(I),++E):(c.push([M,I]),T=S[I]||0,m.push([M-T,I-E]),b.push(I===M),M!==I&&w.push([M,I]))}),o.reverse(),new KB(e,t,a,o,w,c,m,b)}var QB=(function(){function e(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var t=e.prototype;return t.update=function(n){var r=[].slice.call(n),i=hh(this.list,r,this.findKeyCallback);return this.list=r,i},e})(),ab=function(e,t){return ab=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},ab(e,t)};function ph(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ab(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Ta=function(){return Ta=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Ta.apply(this,arguments)};function Rk(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function LC(e,t,n){for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function BC(e){var t=0;return e.map(function(n){return n==null?"$compat".concat(++t):"".concat(n)})}function Dk(e){var t=[];return e.forEach(function(n){t=t.concat(Pn(n)?Dk(n):n)}),t}function Jy(e,t){if(!t)return e;for(var n in t)Ym(e[n])&&(e[n]=t[n]);return e}function im(e,t){if(e===t)return!1;for(var n in e)if(!(n in t))return!0;for(var n in t)if(e[n]!==t[n])return!0;return!1}function UC(e){var t=e.className,n=Rk(e,["className"]);return t!=null&&(n.class=t),delete n.style,delete n.children,n}function FC(e){var t={},n={};for(var r in e)r.indexOf("on")===0?n[r]=e[r]:t[r]=e[r];return[t,n]}function Xm(e){if(!e)return null;var t=e.b;return Gu(t)?t:Xm(e.c)}function Ik(e){var t=e.parentNode;t&&t.removeChild(e)}function kk(e){e.forEach(function(t){t()})}function ZB(){return this.constructor(this.props,this.context)}var t_=0,Wm=(function(){function e(n,r,i,a,o,c,u){u===void 0&&(u={}),this.t=n,this.d=r,this.k=i,this.i=a,this.c=o,this.ref=c,this.ps=u,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var t=e.prototype;return t.s=function(){return!0},t.u=function(n,r,i,a,o){var c=this,u=c.d,d=UB(r).filter(function(S){return S.$_req}),h=Dk(d.map(function(S){return S.$_subs})),g=Xr(h,function(S){return S.d===u});if(c.b&&!Yr(i)&&!o&&!c.s(i.props,a)&&!g){var m=h.reduce(function(S,w){var E=w.d;return S[0]?S[0].d===E&&S.push(w):E>u&&S.push(w),S},[]);return m.forEach(function(S){gh(S,S._ps,[S.o],n,r,!0)}),!1}c.o=i,c.ss(a);var b=c.ps;return Yr(i)||(c.ps=i.props,c.ref=i.ref),e_(this),c.r(n,r,c.b?b:{},a),!0},t.md=function(){this.rr()},t.ss=function(){},t.ud=function(){this.rr()},t.rr=function(){var n=this,r=n.ref,i=n.fr;r&&r(i?i.current:n.b)},e})();function Nk(){return Object.__CROACT_CURRENT_INSTNACE__}function JB(){return t_}function tU(e){t_=e}function e_(e){return Object.__CROACT_CURRENT_INSTNACE__=e,t_=0,e}var n_=(function(){function e(n,r){n===void 0&&(n={}),this.props=n,this.context=r,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var t=e.prototype;return t.render=function(){return null},t.shouldComponentUpdate=function(n,r){return this.props!==n||this.state!==r},t.setState=function(n,r,i){var a=this;a.$_timer||(a.$_state={}),clearTimeout(a.$_timer),a.$_timer=0,a.$_state=Ta(Ta({},a.$_state),n),i?a.$_setState(r,i):a.$_timer=window.setTimeout(function(){a.$_timer=0,a.$_setState(r,i)})},t.forceUpdate=function(n){this.setState({},n,!0)},t.componentDidMount=function(){},t.componentDidUpdate=function(n,r){},t.componentWillUnmount=function(){},t.$_setState=function(n,r){var i=[],a=this.$_p,o=gh(a.c,[a],[a.o],i,a._cs,Ta(Ta({},this.state),this.$_state),r);o&&(n&&i.push(n),kk(i),e_(null))},e})(),Mk=(function(e){ph(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}var n=t.prototype;return n.shouldComponentUpdate=function(r,i){return im(this.props,r)||im(this.state,i)},t})(n_);function Ok(e){var t=function(n){t.current=n};return t.current=e,t}function eU(e){return e._fr=!0,e}function nU(e,t,n,r){var i,a;return!((i=e?.prototype)===null||i===void 0)&&i.render?a=new e(t,n):(a=new n_(t,n),a.constructor=e,e._fr?(r.fr=Ok(),a.render=function(){return this.constructor(this.props,r.fr)}):a.render=ZB),a.$_p=r,a}var rU=(function(e){ph(t,e);function t(r,i,a,o,c,u,d){d===void 0&&(d={});var h=e.call(this,r,i,a,o,c,u,Jy(d,r.defaultProps))||this;return h.typ="comp",h._usefs=[],h._uefs=[],h._defs=[],h}var n=t.prototype;return n.s=function(r,i){var a=this.b;return a.shouldComponentUpdate(Jy(r,this.t.defaultProps),i||a.state)!==!1},n.r=function(r,i,a){var o,c,u=this,d=u.t;u.ps=Jy(u.ps,u.t.defaultProps);var h=u.ps,g=!u.b,m=d.contextType,b=u.b,S=m?.get(u);u._cs=i,g?(b=nU(d,h,S,u),u.b=b):(b.props=h,b.context=S);var w=b.state;u._usefs=[],u._uefs=[];var E=b.render();((c=(o=E?.props)===null||o===void 0?void 0:o.children)===null||c===void 0?void 0:c.length)===0&&(E.props.children=u.ps.children);var T=Ta(Ta({},i),b.$_cs);gh(u,u._ps,E?[E]:[],r,T),g?u._uefs.push(function(){m?.register(u),b.componentDidMount()}):u._uefs.push(function(){b.componentDidUpdate(a,w)}),r.push(function(){u._usefs.forEach(function(D){D()}),g?u.md():u.ud(),u._defs=u._uefs.map(function(D){return D()})})},n.ss=function(r){var i=this.b;!i||!r||(i.state=r)},n.un=function(){var r,i=this;i._ps.forEach(function(o){o.un()});var a=i.t;(r=a.contextType)===null||r===void 0||r.unregister(i),clearTimeout(i.b.$_timer),i._defs.forEach(function(o){o&&o()}),i.b.componentWillUnmount()},t})(Wm);function iU(e,t,n){var r=r_(UC(e),UC(t)),i=r.added,a=r.removed,o=r.changed;for(var c in i)n.setAttribute(c,i[c]);for(var u in o)n.setAttribute(u,o[u][1]);for(var d in a)n.removeAttribute(d)}function aU(e,t,n){var r=r_(e,t),i=r.added,a=r.removed;for(var o in a)n.e(o,!0);for(var c in i)n.e(c)}function r_(e,t){var n=Ts(e),r=Ts(t),i=hh(n,r,function(u){return u}),a={},o={},c={};return i.added.forEach(function(u){var d=r[u];a[d]=t[d]}),i.removed.forEach(function(u){var d=n[u];o[d]=e[d]}),i.maintained.forEach(function(u){var d=u[0],h=n[d],g=[e[h],t[h]];e[h]!==t[h]&&(c[h]=g)}),{added:a,removed:o,changed:c}}function sU(e,t,n){var r=n.style,i=r_(e,t),a=i.added,o=i.removed,c=i.changed;for(var u in a){var d=jg(u,"-");r.setProperty(d,a[u])}for(var u in c){var h=jg(u,"-");r.setProperty(h,c[u][1])}for(var u in o){var g=jg(u,"-");r.removeProperty(g)}}function oU(e){return e.replace(/^on/g,"").toLowerCase()}var lU=(function(e){ph(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.typ="elem",r._es={},r._svg=!1,r}var n=t.prototype;return n.e=function(r,i){var a=this,o=a._es,c=a.b,u=oU(r);i?(zn(c,u,o[r]),delete o[r]):(o[r]=function(d){var h,g;(g=(h=a.ps)[r])===null||g===void 0||g.call(h,d)},er(c,u,o[r]))},n.s=function(r){return im(this.ps,r)},n.r=function(r,i,a){var o,c=this,u=!c.b,d=c.ps;if(u){var h=Xm(c.c),g=!1;c._svg||c.t==="svg"?g=!0:g=h&&h.ownerSVGElement,c._svg=g;var m=(o=c._hyd)===null||o===void 0?void 0:o.splice(0,1)[0],b=c.t;if(m)c._hyd=[].slice.call(m.children||[]);else{var S=Fu(h);g?m=S.createElementNS("http://www.w3.org/2000/svg",b):m=S.createElement(b)}c.b=m}gh(c,c._ps,d.children,r,i);var w=c.b,E=FC(a),T=E[0],D=E[1],I=FC(d),M=I[0],z=I[1];return iU(T,M,w),aU(D,z,c),sU(a.style||{},d.style||{},w),r.push(function(){u?c.md():c.ud()}),!0},n.un=function(){var r=this,i=r._es,a=r.b;for(var o in i)zn(a,o,i[o]);r._ps.forEach(function(c){c.un()}),r._es={},r._sel||Ik(a)},t})(Wm);function Fd(e){if(!e||Gu(e))return e;var t=e.$_p._ps;return t.length?Fd(t[0].b):null}function Pk(e){if(e){if(e.b&&Gu(e.b))return e;var t=e._ps;return t.length?Pk(t[0]):null}}function Xi(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=t||{},a=i.key,o=i.ref,c=Rk(i,["key","ref"]);return{type:e,key:a,ref:o,props:Ta(Ta({},c),{children:wk(n).filter(function(u){return u!=null&&u!==!1})})}}var Vk=(function(e){ph(t,e);function t(r,i){i===void 0&&(i=0);var a=e.call(this,"container",i,"container",0,null)||this;return a.typ="container",a.b=r,a}var n=t.prototype;return n.r=function(){return!0},n.un=function(){},t})(Wm),cU=(function(e){ph(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.typ="text",r}var n=t.prototype;return n.r=function(r){var i,a=this,o=!a.b;if(o){var c=Xm(a.c),u=(i=a._hyd)===null||i===void 0?void 0:i.splice(0,1)[0];a.b=u||Fu(c).createTextNode(a.t.replace("text_",""))}return r.push(function(){o?a.md():a.ud()}),!0},n.un=function(){Ik(this.b)},t})(Wm);function uU(e,t,n){var r=n.map(function(u){return Yr(u)?null:u.key}),i=BC(t.map(function(u){return u.k})),a=BC(r),o=hh(i,a,function(u){return u});o.removed.forEach(function(u){t.splice(u,1)[0].un()}),o.ordered.forEach(function(u){var d=u[0],h=u[1],g=t.splice(d,1)[0];t.splice(h,0,g);var m=Fd(g.b),b=Fd(t[h+1]&&t[h+1].b);m&&m.parentNode.insertBefore(m,b)}),o.added.forEach(function(u){t.splice(u,0,GC(n[u],r[u],u,e))});var c=o.maintained.filter(function(u){u[0];var d=u[1],h=n[d],g=t[d],m=Yr(h)?"text_".concat(h):h.type;return m!==g.t?(g.un(),t.splice(d,1,GC(h,r[d],d,e)),!0):(g.i=d,!1)});return LC(LC([],o.added,!0),c.map(function(u){u[0];var d=u[1];return d}))}function fU(e,t){for(var n=e._ps,r=n.length,i=t.i+1;i<r;++i){var a=Fd(n[i].b);if(a)return a}return null}function GC(e,t,n,r){var i=r.d+1;if(Yr(e)||bu(e))return new cU("text_".concat(e),i,t,n,r,null,{});var a=e.type,o=typeof a=="string"?lU:rU;return new o(a,i,t,n,r,e.ref,e.props)}function gh(e,t,n,r,i,a,o){var c=uU(e,t,n),u=e._hyd,d=t.filter(function(g,m){return g._hyd=u,g.u(r,i,n[m],a,o)});e.typ==="container"&&e._sel&&t.forEach(function(g){var m=Pk(g);m&&(m._sel=!0)}),e._hyd=null;var h=Xm(e);return h&&c.reverse().forEach(function(g){var m=t[g],b=Fd(m.b);if(b&&h!==b&&!b.parentNode){var S=fU(e,m);h.insertBefore(b,S)}}),d.length>0}function dU(e,t,n,r){n===void 0&&(n=t.__CROACT__),r===void 0&&(r={});var i=!!n;n||(n=new Vk(t));var a=[];return gh(n,n._ps,e?[e]:[],a,r,void 0,void 0),kk(a),e_(null),i||(t.__CROACT__=n),n}function qC(e,t,n){return!n&&e&&(n=new Vk(t.parentElement),n._hyd=[t],n._sel=!0),dU(e,t,n),n}function jk(e){var t=Nk(),n=t._hs||(t._hs=[]),r=JB(),i=n[r];if(tU(r+1),i){if(!im(i.deps,e.deps))return i.updated=!1,i;n[r]=e}else n.push(e);return e.value=e.func(),e.updated=!0,e}function hU(e,t){var n=jk({func:e,deps:t});return n.value}function pU(e){return hU(function(){return Ok(e)},[])}function zk(e,t,n){var r=Nk(),i=jk({func:function(){return e},deps:t}),a=n?r._usefs:r._uefs;i.updated?a.push(function(){return i.effect&&i.effect(),i.effect=e(),i.effect}):a.push(function(){return i.effect})}function gU(e,t,n){zk(function(){e?.(t())},n,!0)}function i_(e,t){for(var n=e.length,r=0;r<n;++r)if(t(e[r],r))return!0;return!1}function Lk(e,t){for(var n=e.length,r=0;r<n;++r)if(t(e[r],r))return e[r];return null}function Bk(e){var t=e;if(typeof t>"u"){if(typeof navigator>"u"||!navigator)return"";t=navigator.userAgent||""}return t.toLowerCase()}function a_(e,t){try{return new RegExp(e,"g").exec(t)}catch{return null}}function mU(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var e=navigator.userAgentData,t=e.brands||e.uaList;return!!(t&&t.length)}function vU(e,t){var n=a_("("+e+")((?:\\/|\\s|:)([0-9|\\.|_]+))",t);return n?n[3]:""}function sb(e){return e.replace(/_/g,".")}function ad(e,t){var n=null,r="-1";return i_(e,function(i){var a=a_("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",t);return!a||i.brand?!1:(n=i,r=a[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=vU(i.versionTest.toLowerCase(),t)||r),r=sb(r),!0)}),{preset:n,version:r}}function ug(e,t){var n={brand:"",version:"-1"};return i_(e,function(r){var i=Uk(t,r);return i?(n.brand=r.id,n.version=r.versionAlias||i.version,n.version!=="-1"):!1}),n}function Uk(e,t){return Lk(e,function(n){var r=n.brand;return a_(""+t.test,r.toLowerCase())})}var Fk=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],Gk=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],ob=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],qk=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],Hk=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function $k(e){return!!ad(qk,e).preset}function yU(e){var t=Bk(e),n=!!/mobi/g.exec(t),r={name:"unknown",version:"-1",majorVersion:-1,webview:$k(t),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=ad(Fk,t),o=a.preset,c=a.version,u=ad(Hk,t),d=u.preset,h=u.version,g=ad(Gk,t);if(r.chromium=!!g.preset,r.chromiumVersion=g.version,!r.chromium){var m=ad(ob,t);r.webkit=!!m.preset,r.webkitVersion=m.version}return d&&(i.name=d.id,i.version=h,i.majorVersion=parseInt(h,10)),o&&(r.name=o.id,r.version=c,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}function bU(e){var t=navigator.userAgentData,n=(t.uaList||t.brands).slice(),r=t.mobile||!1,i=n[0],a=(t.platform||navigator.platform).toLowerCase(),o={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!ug(qk,n).brand||$k(Bk())},c={name:"unknown",version:"-1",majorVersion:-1};o.webkit=!o.chromium&&i_(ob,function(m){return Uk(n,m)});var u=ug(Gk,n);if(o.chromium=!!u.brand,o.chromiumVersion=u.version||"-1",!o.chromium){var d=ug(ob,n);o.webkit=!!d.brand,o.webkitVersion=d.version||"-1"}var h=Lk(Hk,function(m){return new RegExp(""+m.test,"g").exec(a)});c.name=h?h.id:"";{var g=ug(Fk,n);o.name=g.brand||o.name,o.version=g.brand&&e?e.uaFullVersion:g.version}return o.webkit&&(c.name=r?"ios":"mac"),c.name==="ios"&&o.webview&&(o.version="-1"),c.version=sb(c.version),o.version=sb(o.version),c.majorVersion=parseInt(c.version,10),o.majorVersion=parseInt(o.version,10),{browser:o,os:c,isMobile:r,isHints:!0}}function xU(e){return mU()?bU():yU(e)}function _U(e,t,n,r,i,a){for(var o=0;o<i;++o){var c=n+o*i,u=r+o*i;e[c]+=e[u]*a,t[c]+=t[u]*a}}function SU(e,t,n,r,i){for(var a=0;a<i;++a){var o=n+a*i,c=r+a*i,u=e[o],d=t[o];e[o]=e[c],e[c]=u,t[o]=t[c],t[c]=d}}function wU(e,t,n,r,i){for(var a=0;a<r;++a){var o=n+a*r;e[o]/=i,t[o]/=i}}function Yk(e,t,n){for(var r=e.slice(),i=0;i<n;++i)r[i*n+t-1]=0,r[(t-1)*n+i]=0;return r[(t-1)*(n+1)]=1,r}function ja(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var n=e.slice(),r=Ke(t),i=0;i<t;++i){var a=t*i+i;if(!Jt(n[a],Nn)){for(var o=i+1;o<t;++o)if(n[t*i+o]){SU(n,r,i,o,t);break}}if(!Jt(n[a],Nn))return[];wU(n,r,i,t,n[a]);for(var o=0;o<t;++o){var c=o,u=o+i*t,d=n[u];!Jt(d,Nn)||i===o||_U(n,r,c,i,t,-d)}}return r}function EU(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var n=[],r=0;r<t;++r)for(var i=0;i<t;++i)n[i*t+r]=e[t*r+i];return n}function Xk(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var n=[],r=e[t*t-1],i=0;i<t-1;++i)n[i]=e[t*(t-1)+i]/r;return n[t-1]=0,n}function TU(e,t){for(var n=Ke(t),r=0;r<t-1;++r)n[t*(t-1)+r]=e[r]||0;return n}function Gl(e,t){for(var n=e.slice(),r=e.length;r<t-1;++r)n[r]=0;return n[t-1]=1,n}function Zi(e,t,n){if(t===void 0&&(t=Math.sqrt(e.length)),t===n)return e;for(var r=Ke(n),i=Math.min(t,n),a=0;a<i-1;++a){for(var o=0;o<i-1;++o)r[a*n+o]=e[a*t+o];r[(a+1)*n-1]=e[(a+1)*t-1],r[(n-1)*n+a]=e[(t-1)*t+a]}return r[n*n-1]=e[t*t-1],r}function am(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Ke(e);return t.forEach(function(i){r=Fe(r,i,e)}),r}function Fe(e,t,n){n===void 0&&(n=Math.sqrt(e.length));var r=[],i=e.length/n,a=t.length/i;if(i){if(!a)return e}else return t;for(var o=0;o<n;++o)for(var c=0;c<a;++c){r[c*n+o]=0;for(var u=0;u<i;++u)r[c*n+o]+=e[u*n+o]*t[c*i+u]}return r}function Te(e,t){for(var n=Math.min(e.length,t.length),r=e.slice(),i=0;i<n;++i)r[i]=r[i]+t[i];return r}function Ut(e,t){for(var n=Math.min(e.length,t.length),r=e.slice(),i=0;i<n;++i)r[i]=r[i]-t[i];return r}function AU(e,t){return t===void 0&&(t=e.length===6),t?[e[0],e[1],0,e[2],e[3],0,e[4],e[5],1]:e}function Wk(e,t){return t===void 0&&(t=e.length===9),t?[e[0],e[1],e[3],e[4],e[6],e[7]]:e}function vr(e,t,n){n===void 0&&(n=t.length);var r=Fe(e,t,n),i=r[n-1];return r.map(function(a){return a/i})}function CU(e,t){return Fe(e,[1,0,0,0,0,Math.cos(t),Math.sin(t),0,0,-Math.sin(t),Math.cos(t),0,0,0,0,1],4)}function RU(e,t){return Fe(e,[Math.cos(t),0,-Math.sin(t),0,0,1,0,0,Math.sin(t),0,Math.cos(t),0,0,0,0,1],4)}function DU(e,t){return Fe(e,vh(t,4))}function fg(e,t){var n=t[0],r=n===void 0?1:n,i=t[1],a=i===void 0?1:i,o=t[2],c=o===void 0?1:o;return Fe(e,[r,0,0,0,0,a,0,0,0,0,c,0,0,0,0,1],4)}function mh(e,t){return vr(vh(t,3),Gl(e,3))}function t1(e,t){var n=t[0],r=n===void 0?0:n,i=t[1],a=i===void 0?0:i,o=t[2],c=o===void 0?0:o;return Fe(e,[1,0,0,0,0,1,0,0,0,0,1,0,r,a,c,1],4)}function HC(e,t){return Fe(e,t,4)}function vh(e,t){var n=Math.cos(e),r=Math.sin(e),i=Ke(t);return i[0]=n,i[1]=r,i[t]=-r,i[t+1]=n,i}function Ke(e){for(var t=e*e,n=[],r=0;r<t;++r)n[r]=r%(e+1)?0:1;return n}function s_(e,t){for(var n=Ke(t),r=Math.min(e.length,t-1),i=0;i<r;++i)n[(t+1)*i]=e[i];return n}function ql(e,t){for(var n=Ke(t),r=Math.min(e.length,t-1),i=0;i<r;++i)n[t*(t-1)+i]=e[i];return n}function o_(e,t,n,r,i,a,o,c){var u=e[0],d=e[1],h=t[0],g=t[1],m=n[0],b=n[1],S=r[0],w=r[1],E=i[0],T=i[1],D=a[0],I=a[1],M=o[0],z=o[1],P=c[0],A=c[1],C=[u,0,h,0,m,0,S,0,d,0,g,0,b,0,w,0,1,0,1,0,1,0,1,0,0,u,0,h,0,m,0,S,0,d,0,g,0,b,0,w,0,1,0,1,0,1,0,1,-E*u,-T*u,-D*h,-I*h,-M*m,-z*m,-P*S,-A*S,-E*d,-T*d,-D*g,-I*g,-M*b,-z*b,-P*w,-A*w],k=ja(C,8);if(!k.length)return[];var j=Fe(k,[E,T,D,I,M,z,P,A],8);return j[8]=1,Zi(EU(j),3,4)}var bd=function(){return bd=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},bd.apply(this,arguments)};function IU(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Gd(e,t){return t===void 0&&(t=0),Yc(xu(e,t))}function kU(e,t){var n=vr(e,[t[0],t[1]||0,t[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function Yc(e){var t=IU();return e.forEach(function(n){var r=n.matrixFunction,i=n.functionValue;r&&(t=r(t,i))}),t}function xu(e,t){t===void 0&&(t=0);var n=Pn(e)?e:Lo(e);return n.map(function(r){var i=xk(r),a=i.prefix,o=i.value,c=null,u=a,d="";if(a==="translate"||a==="translateX"||a==="translate3d"){var h=Qi(t)?bd(bd({},t),{"o%":t["%"]}):{"%":t,"o%":t},g=Pl(o).map(function(V,K){return K===0&&"x%"in h?h["%"]=t["x%"]:K===1&&"y%"in h?h["%"]=t["y%"]:h["%"]=t["o%"],Ue(V,h)}),m=g[0],b=g[1],S=b===void 0?0:b,w=g[2],E=w===void 0?0:w;c=t1,d=[m,S,E]}else if(a==="translateY"){var T=Qi(t)?bd({"%":t["y%"]},t):{"%":t},S=Ue(o,T);c=t1,d=[0,S,0]}else if(a==="translateZ"){var E=parseFloat(o);c=t1,d=[0,0,E]}else if(a==="scale"||a==="scale3d"){var D=Pl(o).map(function(V){return parseFloat(V)}),I=D[0],M=D[1],z=M===void 0?I:M,P=D[2],A=P===void 0?1:P;c=fg,d=[I,z,A]}else if(a==="scaleX"){var I=parseFloat(o);c=fg,d=[I,1,1]}else if(a==="scaleY"){var z=parseFloat(o);c=fg,d=[1,z,1]}else if(a==="scaleZ"){var A=parseFloat(o);c=fg,d=[1,1,A]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var C=dh(o),k=C.unit,j=C.value,L=k==="rad"?j:j*Math.PI/180;a==="rotate"||a==="rotateZ"?(u="rotateZ",c=DU):a==="rotateX"?c=CU:a==="rotateY"&&(c=RU),d=L}else if(a==="matrix3d")c=HC,d=Pl(o).map(function(V){return parseFloat(V)});else if(a==="matrix"){var B=Pl(o).map(function(V){return parseFloat(V)});c=HC,d=[B[0],B[1],0,0,B[2],B[3],0,0,0,0,1,0,B[4],B[5],0,1]}else u="";return{name:a,functionName:u,value:o,matrixFunction:c,functionValue:d}})}var lb=function(e,t){return lb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},lb(e,t)};function NU(e,t){lb(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Kk=typeof Map=="function"?void 0:(function(){var e=0;return function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++e)}})(),Qk=(function(e){NU(t,e);function t(n){return n===void 0&&(n=[]),e.call(this,n,Kk)||this}return t})(QB);function MU(e,t){return hh(e,t,Kk)}var cb=function(){return cb=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},cb.apply(this,arguments)};function OU(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}var Km=(function(){function e(){this._events={}}var t=e.prototype;return t.on=function(n,r){if(Qi(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},t.off=function(n,r){if(!n)this._events={};else if(Qi(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var a=this._events[n];if(a){var o=Es(a,function(c){return c.listener===r});o>-1&&a.splice(o,1)}}return this},t.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(a){i._addEvent(n,a,{once:!0})})},t.emit=function(n,r){var i=this;r===void 0&&(r={});var a=this._events[n];if(!n||!a)return!0;var o=!1;return r.eventType=n,r.stop=function(){o=!0},r.currentTarget=this,OU(a).forEach(function(c){c.listener(r),c.once&&i.off(n,c.listener)}),!o},t.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},t._addEvent=function(n,r,i){var a=this._events;a[n]=a[n]||[];var o=a[n];o.push(cb({listener:r},i))},e})();var ub=function(e,t){return ub=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},ub(e,t)};function PU(e,t){ub(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var iu=function(){return iu=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},iu.apply(this,arguments)};function VU(e){var t=e.container;return t===document.body?[t.scrollLeft||document.documentElement.scrollLeft,t.scrollTop||document.documentElement.scrollTop]:[t.scrollLeft,t.scrollTop]}function $C(e,t){return e.addEventListener("scroll",t),function(){e.removeEventListener("scroll",t)}}function dg(e){if(e){if(Yr(e))return document.querySelector(e)}else return null;if(Kx(e))return e();if(e instanceof Element)return e;if("current"in e)return e.current;if("value"in e)return e.value}var jU=(function(e){PU(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(a){r.checkScroll({container:i.container,inputEvent:a})}})},r}var n=t.prototype;return n.dragStart=function(r,i){var a=dg(i.container);if(!a){this._flag=!1;return}var o=0,c=0,u=0,d=0;if(a===document.body)u=window.innerWidth,d=window.innerHeight;else{var h=a.getBoundingClientRect();o=h.top,c=h.left,u=h.width,d=h.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:o,left:c,width:u,height:d},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},n.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var a=r.clientX,o=r.clientY,c=i.threshold,u=c===void 0?0:c,d=this,h=d._startRect,g=d._startPos;this._currentOptions=i;var m=[0,0];return h.top>o-u?(g[1]>h.top||o<g[1])&&(m[1]=-1):h.top+h.height<o+u&&(g[1]<h.top+h.height||o>g[1])&&(m[1]=1),h.left>a-u?(g[0]>h.left||a<g[0])&&(m[0]=-1):h.left+h.width<a+u&&(g[0]<h.left+h.width||a>g[0])&&(m[0]=1),!m[0]&&!m[1]?!1:this._continueDrag(iu(iu({},i),{direction:m,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var i=this;if(this._isWait)return!1;var a=r.prevScrollPos,o=a===void 0?this._prevScrollPos:a,c=r.direction,u=r.throttleTime,d=u===void 0?0:u,h=r.inputEvent,g=r.isDrag,m=this._getScrollPosition(c||[0,0],r),b=m[0]-o[0],S=m[1]-o[1],w=c||[b?Math.abs(b)/b:0,S?Math.abs(S)/S:0];return this._prevScrollPos=m,this._lock=!1,!b&&!S?!1:(this.emit("move",{offsetX:w[0]?b:0,offsetY:w[1]?S:0,inputEvent:h}),d&&g&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},d)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,i){var a=i.container,o=i.getScrollPosition,c=o===void 0?VU:o;return c({container:dg(a),direction:r})},n._continueDrag=function(r){var i=this,a,o=r.container,c=r.direction,u=r.throttleTime,d=r.useScroll,h=r.isDrag,g=r.inputEvent;if(!(!this._flag||h&&this._isWait)){var m=Ud(),b=Math.max(u+this._prevTime-m,0);if(b>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},b),!1;this._prevTime=m;var S=this._getScrollPosition(c,r);this._prevScrollPos=S,h&&(this._isWait=!0),d||(this._lock=!0);var w={container:dg(o),direction:c,inputEvent:g};return(a=r.requestScroll)===null||a===void 0||a.call(r,w),this.emit("scroll",w),this._isWait=!1,d||this.checkScroll(iu(iu({},r),{prevScrollPos:S,direction:c,inputEvent:g}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var a=i===!0?$C:i,o=dg(r.container);i===!0&&(o===document.body||o===document.documentElement)?this._unregister=$C(window,this._onScroll):this._unregister=a(o,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},t})(Km);function zU(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}function Ur(e){return Jt(e,Nn)}function LU(e,t){return e.every(function(n,r){return Ur(n-t[r])===0})}function BU(e,t){return!Ur(e[0]-t[0])&&!Ur(e[1]-t[1])}function Zk(e){return e.length<3?0:Math.abs(FB(e.map(function(t,n){var r=e[n+1]||e[0];return t[0]*r[1]-r[0]*t[1]})))/2}function YC(e,t){var n=t.width,r=t.height,i=t.left,a=t.top,o=Hl(e),c=o.minX,u=o.minY,d=o.maxX,h=o.maxY,g=n/(d-c),m=r/(h-u);return e.map(function(b){return[i+(b[0]-c)*g,a+(b[1]-u)*m]})}function Hl(e){var t=e.map(function(r){return r[0]}),n=e.map(function(r){return r[1]});return{minX:Math.min.apply(Math,t),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,t),maxY:Math.max.apply(Math,n)}}function fb(e,t,n){var r=e[0],i=e[1],a=Hl(t),o=a.minX,c=a.maxX,u=[[o,i],[c,i]],d=sm(u[0],u[1]),h=db(t),g=[];if(h.forEach(function(S){var w=sm(S[0],S[1]),E=S[0];if(LU(d,w))g.push({pos:e,line:S,type:"line"});else{var T=Jk(l_(d,w),[u,S]);T.forEach(function(D){S.some(function(I){return BU(I,D)})?g.push({pos:D,line:S,type:"point"}):Ur(E[1]-i)!==0&&g.push({pos:D,line:S,type:"intersection"})})}}),Xr(g,function(S){return S[0]===r}))return!0;var m=0,b={};return g.forEach(function(S){var w=S.pos,E=S.type,T=S.line;if(!(w[0]>r))if(E==="intersection")++m;else{if(E==="line")return;if(E==="point"){var D=Xr(T,function(z){return z[1]!==i}),I=b[w[0]],M=D[1]>i?1:-1;I?I!==M&&++m:b[w[0]]=M}}}),m%2===1}function sm(e,t){var n=e[0],r=e[1],i=t[0],a=t[1],o=i-n,c=a-r;Math.abs(o)<Nn&&(o=0),Math.abs(c)<Nn&&(c=0);var u=0,d=0,h=0;return o?c?(u=-c/o,d=1,h=-u*n-r):(d=1,h=-r):c&&(u=-1,h=n),[u,d,h]}function l_(e,t){var n=e[0],r=e[1],i=e[2],a=t[0],o=t[1],c=t[2],u=n===0&&a===0,d=r===0&&o===0,h=[];if(u&&d)return[];if(u){var g=-i/r,m=-c/o;return g!==m?[]:[[-1/0,g],[1/0,g]]}else if(d){var b=-i/n,S=-c/a;return b!==S?[]:[[b,-1/0],[b,1/0]]}else if(n===0){var w=-i/r,E=-(o*w+c)/a;h=[[E,w]]}else if(a===0){var w=-c/o,E=-(r*w+i)/n;h=[[E,w]]}else if(r===0){var E=-i/n,w=-(a*E+c)/o;h=[[E,w]]}else if(o===0){var E=-c/a,w=-(n*E+i)/r;h=[[E,w]]}else{var E=(r*c-o*i)/(o*n-r*a),w=-(n*E+i)/r;h=[[E,w]]}return h.map(function(T){return[T[0],T[1]]})}function Jk(e,t){var n=t.map(function(g){return[0,1].map(function(m){return[Math.min(g[0][m],g[1][m]),Math.max(g[0][m],g[1][m])]})}),r=[];if(e.length===2){var i=e[0],a=i[0],o=i[1];if(Ur(a-e[1][0])){if(!Ur(o-e[1][1])){var d=Math.max.apply(Math,n.map(function(g){return g[0][0]})),h=Math.min.apply(Math,n.map(function(g){return g[0][1]}));if(Ur(d-h)>0)return[];r=[[d,o],[h,o]]}}else{var c=Math.max.apply(Math,n.map(function(g){return g[1][0]})),u=Math.min.apply(Math,n.map(function(g){return g[1][1]}));if(Ur(c-u)>0)return[];r=[[a,c],[a,u]]}}return r.length||(r=e.filter(function(g){var m=g[0],b=g[1];return n.every(function(S){return 0<=Ur(m-S[0][0])&&0<=Ur(S[0][1]-m)&&0<=Ur(b-S[1][0])&&0<=Ur(S[1][1]-b)})})),r.map(function(g){return[Ur(g[0]),Ur(g[1])]})}function db(e){return zU(e.slice(1),[e[0]]).map(function(t,n){return[e[n],t]})}function UU(e,t){var n=e.slice(),r=t.slice();jC(n)===-1&&n.reverse(),jC(r)===-1&&r.reverse();var i=db(n),a=db(r),o=i.map(function(h){return sm(h[0],h[1])}),c=a.map(function(h){return sm(h[0],h[1])}),u=[];o.forEach(function(h,g){var m=i[g],b=[];c.forEach(function(S,w){var E=l_(h,S),T=Jk(E,[m,a[w]]);b.push.apply(b,T.map(function(D){return{index1:g,index2:w,pos:D,type:"intersection"}}))}),b.sort(function(S,w){return vs(m[0],S.pos)-vs(m[0],w.pos)}),u.push.apply(u,b),fb(m[1],r)&&u.push({index1:g,index2:-1,pos:m[1],type:"inside"})}),a.forEach(function(h,g){if(fb(h[1],n)){var m=!1,b=Es(u,function(S){var w=S.index2;return w===g?(m=!0,!1):!!m});b===-1&&(m=!1,b=Es(u,function(S){var w=S.index1,E=S.index2;return w===-1&&E+1===g?(m=!0,!1):!!m})),b===-1?u.push({index1:-1,index2:g,pos:h[1],type:"inside"}):u.splice(b,0,{index1:-1,index2:g,pos:h[1],type:"inside"})}});var d={};return u.filter(function(h){var g=h.pos,m=g[0]+"x"+g[1];return d[m]?!1:(d[m]=!0,!0)})}function FU(e,t){var n=UU(e,t);return n.map(function(r){var i=r.pos;return i})}function GU(e,t){var n=FU(e,t);return Zk(n)}var hb=function(e,t){return hb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},hb(e,t)};function qU(e,t){hb(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Dn=function(){return Dn=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Dn.apply(this,arguments)};function HU(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function e1(e){return HU([e[0].clientX,e[0].clientY],[e[1].clientX,e[1].clientY])/Math.PI*180}function $U(e){return e.touches&&e.touches.length>=2}function hg(e){return e?e.touches?XU(e.touches):[tN(e)]:[]}function YU(e){return e&&(e.type.indexOf("mouse")>-1||"button"in e)}function XC(e,t,n){var r=n.length,i=xd(e,r),a=i.clientX,o=i.clientY,c=i.originalClientX,u=i.originalClientY,d=xd(t,r),h=d.clientX,g=d.clientY,m=xd(n,r),b=m.clientX,S=m.clientY,w=a-h,E=o-g,T=a-b,D=o-S;return{clientX:c,clientY:u,deltaX:w,deltaY:E,distX:T,distY:D}}function n1(e){return Math.sqrt(Math.pow(e[0].clientX-e[1].clientX,2)+Math.pow(e[0].clientY-e[1].clientY,2))}function XU(e){for(var t=Math.min(e.length,2),n=[],r=0;r<t;++r)n.push(tN(e[r]));return n}function tN(e){return{clientX:e.clientX,clientY:e.clientY}}function xd(e,t){t===void 0&&(t=e.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(e.length,t),i=0;i<r;++i){var a=e[i];n.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,n.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,n.clientX+=a.clientX,n.clientY+=a.clientY}return t?{clientX:n.clientX/t,clientY:n.clientY/t,originalClientX:n.originalClientX/t,originalClientY:n.originalClientY/t}:n}var r1=(function(){function e(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}return e.prototype.getAngle=function(t){return t===void 0&&(t=this.prevClients),e1(t)},e.prototype.getRotation=function(t){return t===void 0&&(t=this.prevClients),e1(t)-e1(this.startClients)},e.prototype.getPosition=function(t,n){t===void 0&&(t=this.prevClients);var r=XC(t||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,a=r.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=t,r},e.prototype.getPositions=function(t){t===void 0&&(t=this.prevClients);for(var n=this.prevClients,r=this.startClients,i=Math.min(this.length,n.length),a=[],o=0;o<i;++o)a[o]=XC([t[o]],[n[o]],[r[o]]);return a},e.prototype.getMovement=function(t){var n=this.movement;if(!t)return n;var r=xd(t,this.length),i=xd(this.prevClients,this.length),a=r.clientX-i.clientX,o=r.clientY-i.clientY;return Math.sqrt(a*a+o*o)+n},e.prototype.getDistance=function(t){return t===void 0&&(t=this.prevClients),n1(t)},e.prototype.getScale=function(t){return t===void 0&&(t=this.prevClients),n1(t)/n1(this.startClients)},e.prototype.move=function(t,n){this.startClients.forEach(function(r){r.clientX-=t,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=t,r.clientY-=n})},e})(),WC=["textarea","input"],WU=(function(e){qU(t,e);function t(n,r){r===void 0&&(r={});var i=e.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(m,b){if(b===void 0&&(b=!0),!(!i.flag&&m.cancelable===!1)){var S=m.type.indexOf("drag")>=-1;if(!(i.flag&&S)){i._isDragAPI=!0;var w=i.options,E=w.container,T=w.pinchOutside,D=w.preventWheelClick,I=w.preventRightClick,M=w.preventDefault,z=w.checkInput,P=w.dragFocusedInput,A=w.preventClickEventOnDragStart,C=w.preventClickEventOnDrag,k=w.preventClickEventByCondition,j=i._useTouch,L=!i.flag;if(i._isSecondaryButton=m.which===3||m.button===2,D&&(m.which===2||m.button===1)||I&&(m.which===3||m.button===2))return i.stop(),!1;if(L){var B=i._window.document.activeElement,V=m.target;if(V){var K=V.tagName.toLowerCase(),Y=WC.indexOf(K)>-1,H=V.isContentEditable;if(Y||H){if(z||!P&&B===V)return!1;if(B&&(B===V||H&&B.isContentEditable&&B.contains(V)))if(P)V.blur();else return!1}else if((M||m.type==="touchstart")&&B){var $=B.tagName.toLowerCase();(B.isContentEditable||WC.indexOf($)>-1)&&B.blur()}(A||C||k)&&er(i._window,"click",i._onClick,!0)}i.clientStores=[new r1(hg(m))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=b,i._dragFlag=!0,i._prevInputEvent=m,i.data={},i.doubleFlag=Ud()-i.prevTime<200,i._isMouseEvent=YU(m),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var et=i._preventMouseEvent||i.emit("dragStart",Dn(Dn({data:i.data,datas:i.data,inputEvent:m,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:b,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){m.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));et===!1&&i.stop(),i._isMouseEvent&&i.flag&&M&&m.preventDefault()}if(!i.flag)return!1;var at=0;if(L?(i._attchDragEvent(),j&&T&&(at=setTimeout(function(){er(E,"touchstart",i.onDragStart,{passive:!1})}))):j&&T&&zn(E,"touchstart",i.onDragStart),i.flag&&$U(m)){if(clearTimeout(at),L&&m.touches.length!==m.changedTouches.length)return;i.pinchFlag||i.onPinchStart(m)}}}},i.onDrag=function(m,b){if(i.flag){var S=i.options.preventDefault;!i._isMouseEvent&&S&&m.preventDefault(),i._prevInputEvent=m;var w=hg(m),E=i.moveClients(w,m,!1);if(i._dragFlag){if(i.pinchFlag||E.deltaX||E.deltaY){var T=i._preventMouseEvent||i.emit("drag",Dn(Dn({},E),{isScroll:!!b,inputEvent:m}));if(T===!1){i.stop();return}}i.pinchFlag&&i.onPinch(m,w)}i.getCurrentStore().getPosition(w,!0)}},i.onDragEnd=function(m){if(i.flag){var b=i.options,S=b.pinchOutside,w=b.container,E=b.preventClickEventOnDrag,T=b.preventClickEventOnDragStart,D=b.preventClickEventByCondition,I=i.isDrag;(E||T||D)&&requestAnimationFrame(function(){i._allowClickEvent()}),!D&&!T&&E&&!I&&i._allowClickEvent(),i._useTouch&&S&&zn(w,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(m);var M=m?.touches?hg(m):[],z=M.length;z===0||!i.options.keepDragging?i.flag=!1:i._addStore(new r1(M));var P=i._getPosition(),A=Ud(),C=!I&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=I||C?0:A,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",Dn({data:i.data,datas:i.data,isDouble:C,isDrag:I,isClick:!I,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:m,isTrusted:i._isTrusted},P)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){zn(i._window,"click",i._onClick,!0)},i._onClick=function(m){i._allowClickEvent(),i._allowMouseEvent();var b=i.options.preventClickEventByCondition;b?.(m)||(m.stopPropagation(),m.preventDefault())},i._onContextMenu=function(m){var b=i.options;b.preventRightClick?i.onDragEnd(m):m.preventDefault()},i._passCallback=function(){};var a=[].concat(n),o=a[0];i._window=Ck(o)?o:ko(o),i.options=Dn({checkInput:!1,container:o&&!("document"in o)?ko(o):o,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var c=i.options,u=c.container,d=c.events,h=c.checkWindowBlur;if(i._useDrag=d.indexOf("drag")>-1,i._useTouch=d.indexOf("touch")>-1,i._useMouse=d.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(m){er(m,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(m){er(m,"mousedown",i.onDragStart),er(m,"mousemove",i._passCallback)}),er(u,"contextmenu",i._onContextMenu)),h&&er(ko(),"blur",i.onBlur),i._useTouch){var g={passive:!1};a.forEach(function(m){er(m,"touchstart",i.onDragStart,g),er(m,"touchmove",i._passCallback,g)})}return i}return t.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},t.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},t.prototype.isDragging=function(){return this.isDrag},t.prototype.isIdle=function(){return this._isIdle},t.prototype.isFlag=function(){return this.flag},t.prototype.isPinchFlag=function(){return this.pinchFlag},t.prototype.isDoubleFlag=function(){return this.doubleFlag},t.prototype.isPinching=function(){return this.isPinch},t.prototype.scrollBy=function(n,r,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(n,r),a&&this.onDrag(i,!0))},t.prototype.move=function(n,r){var i=n[0],a=n[1],o=this.getCurrentStore(),c=o.prevClients;return this.moveClients(c.map(function(u){var d=u.clientX,h=u.clientY;return{clientX:d+i,clientY:h+a,originalClientX:d,originalClientY:h}}),r,!0)},t.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},t.prototype.setEventData=function(n){var r=this.data;for(var i in n)r[i]=n[i];return this},t.prototype.setEventDatas=function(n){return this.setEventData(n)},t.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),Dn(Dn({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},t.prototype.getEventData=function(){return this.data},t.prototype.getEventDatas=function(){return this.data},t.prototype.unset=function(){var n=this,r=this.targets,i=this.options.container;this.off(),zn(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(a){zn(a,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(a){zn(a,"mousedown",n.onDragStart)}),zn(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(a){zn(a,"touchstart",n.onDragStart)}),zn(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},t.prototype.onPinchStart=function(n){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new r1(hg(n));this.pinchFlag=!0,this._addStore(a);var o=this.emit("pinchStart",Dn(Dn({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));o===!1&&(this.pinchFlag=!1)}},t.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Dn(Dn({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},t.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",Dn(Dn({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},t.prototype.getCurrentStore=function(){return this.clientStores[0]},t.prototype.moveClients=function(n,r,i){var a=this._getPosition(n,i),o=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var c=!1;return!o&&this.isDrag&&(c=!0),Dn(Dn({data:this.data,datas:this.data},a),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:c})},t.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},t.prototype._getPosition=function(n,r){var i=this.getCurrentStore(),a=i.getPosition(n,r),o=this.clientStores.slice(1).reduce(function(d,h){var g=h.getPosition();return d.distX+=g.distX,d.distY+=g.distY,d},a),c=o.distX,u=o.distY;return Dn(Dn({},a),{distX:c,distY:u})},t.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(er(r,"dragover",this.onDrag,i),er(n,"dragend",this.onDragEnd)),this._useMouse&&(er(r,"mousemove",this.onDrag),er(n,"mouseup",this.onDragEnd)),this._useTouch&&(er(r,"touchmove",this.onDrag,i),er(n,"touchend",this.onDragEnd,i),er(n,"touchcancel",this.onDragEnd,i))},t.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&(zn(r,"dragover",this.onDrag),zn(n,"dragend",this.onDragEnd)),this._useMouse&&(zn(r,"mousemove",this.onDrag),zn(n,"mouseup",this.onDragEnd)),this._useTouch&&(zn(r,"touchstart",this.onDragStart),zn(r,"touchmove",this.onDrag),zn(n,"touchend",this.onDragEnd),zn(n,"touchcancel",this.onDragEnd))},t.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},t})(Km);function KU(e){for(var t=5381,n=e.length;n;)t=t*33^e.charCodeAt(--n);return t>>>0}var QU=KU;function ZU(e){return QU(e).toString(36)}function JU(e){if(e&&e.getRootNode){var t=e.getRootNode();if(t.nodeType===11)return t}}function t8(e,t,n){return n.original?t:t.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var a=i.trim();return(a?Pl(a):[""]).map(function(o){var c=o.trim();return c.indexOf("@")===0?c:c.indexOf(":global")>-1?c.replace(/\:global/g,""):c.indexOf(":host")>-1?"".concat(c.replace(/\:host/g,".".concat(e))):c?".".concat(e," ").concat(c):".".concat(e)}).join(", ")+" {"})}function e8(e,t,n,r,i){var a=Fu(r),o=a.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",e),o.setAttribute("data-styled-count","1"),n.nonce&&o.setAttribute("nonce",n.nonce),o.innerHTML=t8(e,t,n),(i||a.head||a.body).appendChild(o),o}function n8(e){var t="rCS"+ZU(e);return{className:t,inject:function(n,r){r===void 0&&(r={});var i=JU(n),a=(i||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(t,'"]'));if(!a)a=e8(t,e,r,n,i);else{var o=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(o+1))}return{destroy:function(){var c,u=parseFloat(a.getAttribute("data-styled-count"))||0;u<=1?(a.remove?a.remove():(c=a.parentNode)===null||c===void 0||c.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(u-1))}}}}}var pb=function(){return pb=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},pb.apply(this,arguments)};function r8(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function eN(e,t){var n=n8(t),r=n.className;return eU(function(i,a){var o=i.className,c=o===void 0?"":o;i.cspNonce;var u=r8(i,["className","cspNonce"]),d=pU();return gU(a,function(){return d.current},[]),zk(function(){var h=n.inject(d.current,{nonce:i.cspNonce});return function(){h.destroy()}},[]),Xi(e,pb({ref:d,"data-styled-id":r,className:"".concat(c," ").concat(r)},u))})}var gb=function(e,t){return gb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},gb(e,t)};function yh(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");gb(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Q=function(){return Q=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Q.apply(this,arguments)};function i8(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function a8(e,t,n,r){var i=arguments.length,a=i<3?t:r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function s8(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function J(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function wt(e,t,n){if(arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function bh(e,t){return Q({events:[],props:[],name:e},t)}var o8=["n","w","s","e"],c_=["n","w","s","e","nw","ne","sw","se"];function l8(e,t){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*e,'px" height="').concat(32*e,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(t,'deg);transform-origin: 16px 16px"></path></svg>')}function c8(e){var t=l8(1,e),n=Math.round(e/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(t,"') 16 16, ").concat(r,";")}var qu=xU(),nN=qu.browser.webkit,rN=nN&&(function(){var e=typeof window>"u"?{userAgent:""}:window.navigator,t=/applewebkit\/([^\s]+)/g.exec(e.userAgent.toLowerCase());return t?parseFloat(t[1])<605:!1})(),iN=qu.browser.name,aN=parseInt(qu.browser.version,10),u8=iN==="chrome",f8=qu.browser.chromium,d8=parseInt(qu.browser.chromiumVersion,10)||0,h8=u8&&aN>=109||f8&&d8>=109,p8=iN==="firefox",g8=parseInt(qu.browser.webkitVersion,10)>=612||aN>=15,u_="moveable-",m8=c_.map(function(e){var t="",n="",r="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return e.indexOf("n")>-1&&(t="top: ".concat(a,";"),i="bottom"),e.indexOf("s")>-1&&(t="top: 0px;",i="top"),e.indexOf("w")>-1&&(n="left: ".concat(a,";"),r="right"),e.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(e,`"] {
        `).concat(n).concat(t,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),v8=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(m8,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(e){return`
.direction[data-rotation="`.concat(e,'"], :global .view-control-rotation').concat(e,` {
`).concat(c8(e),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(rN?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),y8=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],mb=1e-4,Ir=1e-7,pg=1e-9,vb=Math.pow(10,10),KC=-vb,b8={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},f_={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},sN={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},oN=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function xh(e,t,n,r,i,a){var o,c;a===void 0&&(a="draggable");var u=(c=(o=t.gestos[a])===null||o===void 0?void 0:o.move(n,e.inputEvent))!==null&&c!==void 0?c:{},d=u.originalDatas||u.datas,h=d[a]||(d[a]={});return Q(Q({},u),{isPinch:!!r,parentEvent:!0,datas:h,originalDatas:e.originalDatas})}var _u=(function(){function e(t){var n;t===void 0&&(t="draggable"),this.ableName=t,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(n={},n[t]={},n)}return e.prototype.dragStart=function(t,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),Q(Q({},this.move(t,n.inputEvent)),{type:"dragstart"})},e.prototype.drag=function(t,n){return this.move([t[0]-this.prevX,t[1]-this.prevY],n)},e.prototype.move=function(t,n){var r,i,a=!1;if(!this.isFlag)this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],r=t[0],i=t[1],this.isFlag=!0;else{var o=this.isDrag;r=this.prevX+t[0],i=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0),!o&&this.isDrag&&(a=!0)}return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:n,isFirstDrag:a,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},e})();function du(e,t,n,r){var i=e.length===16,a=i?4:3,o=ec(e,n,r,a),c=J(o,4),u=J(c[0],2),d=u[0],h=u[1],g=J(c[1],2),m=g[0],b=g[1],S=J(c[2],2),w=S[0],E=S[1],T=J(c[3],2),D=T[0],I=T[1],M=J(en(e,t,a),2),z=M[0],P=M[1],A=Math.min(d,m,w,D),C=Math.min(h,b,E,I),k=Math.max(d,m,w,D),j=Math.max(h,b,E,I);d=d-A||0,m=m-A||0,w=w-A||0,D=D-A||0,h=h-C||0,b=b-C||0,E=E-C||0,I=I-C||0,z=z-A||0,P=P-C||0;var L=e[0],B=e[a+1],V=Cr(L*B);return{left:A,top:C,right:k,bottom:j,origin:[z,P],pos1:[d,h],pos2:[m,b],pos3:[w,E],pos4:[D,I],direction:V}}function lN(e,t){var n=t.clientX,r=t.clientY,i=t.datas,a=e.state,o=a.moveableClientRect,c=a.rootMatrix,u=a.is3d,d=a.pos1,h=o.left,g=o.top,m=u?4:3,b=J(Ut(Eu(c,[n-h,r-g],m),d),2),S=b[0],w=b[1],E=J(qa({datas:i,distX:S,distY:w}),2),T=E[0],D=E[1];return[T,D]}function tc(e,t){var n=t.datas,r=e.state,i=r.allMatrix,a=r.beforeMatrix,o=r.is3d,c=r.left,u=r.top,d=r.origin,h=r.offsetMatrix,g=r.targetMatrix,m=r.transformOrigin,b=o?4:3;n.is3d=o,n.matrix=i,n.targetMatrix=g,n.beforeMatrix=a,n.offsetMatrix=h,n.transformOrigin=m,n.inverseMatrix=ja(i,b),n.inverseBeforeMatrix=ja(a,b),n.absoluteOrigin=Gl(Te([c,u],d),b),n.startDragBeforeDist=vr(n.inverseBeforeMatrix,n.absoluteOrigin,b),n.startDragDist=vr(n.inverseMatrix,n.absoluteOrigin,b)}function x8(e){return du(e.datas.beforeTransform,[50,50],100,100).direction}function Qm(e,t,n){var r=t.datas,i=t.originalDatas.beforeRenderable,a=r.transformIndex,o=i.nextTransforms,c=o.length,u=i.nextTransformAppendedIndexes,d=-1;a===-1?(n==="translate"?d=0:n==="rotate"&&(d=Es(o,function(b){return b.match(/scale\(/g)})),d===-1&&(d=o.length),r.transformIndex=d):Xr(u,function(b){return b.index===a&&b.functionName===n})?d=a:d=a+u.filter(function(b){return b.index<a}).length;var h=$F(o,e.state,d),g=h.targetFunction,m=n==="rotate"?"rotateZ":n;r.beforeFunctionTexts=h.beforeFunctionTexts,r.afterFunctionTexts=h.afterFunctionTexts,r.beforeTransform=h.beforeFunctionMatrix,r.beforeTransform2=h.beforeFunctionMatrix2,r.targetTansform=h.targetFunctionMatrix,r.afterTransform=h.afterFunctionMatrix,r.afterTransform2=h.afterFunctionMatrix2,r.targetAllTransform=h.allFunctionMatrix,g.functionName===m?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):c>d&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=wt(wt([],J(u),!1),[{functionName:n,index:d,isAppend:!0}],!1))}function Zm(e,t,n){return"".concat(e.beforeFunctionTexts.join(" ")," ").concat(e.isAppendTransform?n:t," ").concat(e.afterFunctionTexts.join(" "))}function _8(e){var t=e.datas,n=e.distX,r=e.distY,i=J(uN({datas:t,distX:n,distY:r}),2),a=i[0],o=i[1],c=cN(t,TU([a,o],4));return vr(c,Gl([0,0,0],4),4)}function cN(e,t,n){var r=e.beforeTransform,i=e.afterTransform,a=e.beforeTransform2,o=e.afterTransform2,c=e.targetAllTransform,u=n?Fe(c,t,4):Fe(t,c,4),d=Fe(ja(n?a:r,4),u,4),h=Fe(d,ja(n?o:i,4),4);return h}function uN(e){var t=e.datas,n=e.distX,r=e.distY,i=t.inverseBeforeMatrix,a=t.is3d,o=t.startDragBeforeDist,c=t.absoluteOrigin,u=a?4:3;return Ut(vr(i,Te(c,[n,r]),u),o)}function qa(e,t){var n=e.datas,r=e.distX,i=e.distY,a=n.inverseBeforeMatrix,o=n.inverseMatrix,c=n.is3d,u=n.startDragBeforeDist,d=n.startDragDist,h=n.absoluteOrigin,g=c?4:3;return Ut(vr(t?a:o,Te(h,[r,i]),g),t?u:d)}function S8(e,t){var n=e.datas,r=e.distX,i=e.distY;n.beforeMatrix;var a=n.matrix,o=n.is3d;n.startDragBeforeDist;var c=n.startDragDist,u=n.absoluteOrigin,d=o?4:3;return Ut(vr(a,Te(c,[r,i]),d),u)}function w8(e,t,n,r,i,a){return r===void 0&&(r=t),i===void 0&&(i=n),a===void 0&&(a=[0,0]),e?e.map(function(o,c){var u=dh(o),d=u.value,h=u.unit,g=c?i:r,m=c?n:t;if(o==="%"||isNaN(d)){var b=g?a[c]/g:0;return m*b}else if(h!=="%")return d;return m*d/100}):a}function fN(e){var t=[];return e[1]>=0&&(e[0]>=0&&t.push(3),e[0]<=0&&t.push(2)),e[1]<=0&&(e[0]>=0&&t.push(1),e[0]<=0&&t.push(0)),t}function E8(e,t){return fN(t).map(function(n){return e[n]})}function i1(e,t){var n=(t+1)/2;return[rm(e[0][0],e[1][0],n,1-n),rm(e[0][1],e[1][1],n,1-n)]}function Un(e,t){var n=i1([e[0],e[1]],t[0]),r=i1([e[2],e[3]],t[0]);return i1([n,r],t[1])}function T8(e,t,n,r,i,a){var o=ec(t,n,r,i),c=Un(o,a),u=e[0]-c[0],d=e[1]-c[1];return[u,d]}function _h(e,t,n,r){return Fe(e,Sd(t,r,n),r)}function A8(e,t,n,r){var i=e.transformOrigin,a=e.offsetMatrix,o=e.is3d,c=o?4:3,u;if(Yr(n)){var d=t.beforeTransform,h=t.afterTransform;r?u=Zi(Gd(n),4,c):u=Zi(Fe(Fe(d,Gd([n]),4),h,4),4,c)}else u=n;return _h(a,u,i,c)}function C8(e,t){var n=e.transformOrigin,r=e.offsetMatrix,i=e.is3d,a=e.targetMatrix,o=e.targetAllTransform,c=i?4:3;return _h(r,Fe(o||a,s_(t,c),c),n,c)}function Jm(e,t){var n=Hu(t);return{setTransform:function(r,i){i===void 0&&(i=-1),n.startTransforms=Pn(r)?r:Lo(r),yb(e,t,i)},setTransformIndex:function(r){yb(e,t,r)}}}function tv(e,t,n){var r=Hu(t),i=r.startTransforms;yb(e,t,Es(i,function(a){return a.indexOf("".concat(n,"("))===0}))}function yb(e,t,n){var r=Hu(t),i=t.datas;if(i.transformIndex=n,n!==-1){var a=r.startTransforms[n];if(a){var o=e.state,c=xu([a],{"x%":function(u){return u/100*o.offsetWidth},"y%":function(u){return u/100*o.offsetHeight}});i.startValue=c[0].functionValue}}}function d_(e,t){var n=Hu(e);n.nextTransforms=Lo(t)}function Hu(e){return e.originalDatas.beforeRenderable}function om(e){var t=e.originalDatas.beforeRenderable;return t.nextTransforms}function gg(e){return(om(e)||[]).join(" ")}function mg(e){return Hu(e).nextStyle}function dN(e,t,n,r,i){d_(i,t);var a=Ar.drag(e,xh(i,e.state,n,r)),o=a?a.transform:t;return Q(Q({transform:t,drag:a},Dr({transform:o},i)),{afterTransform:o})}function h_(e,t,n,r,i,a){var o=A8(e.state,i,t,a),c=I8(e,n,r,o);return c}function hN(e,t,n,r,i,a,o){var c=h_(e,t,n,i,a,o),u=e.state,d=u.left,h=u.top,g=e.props.groupable,m=g?d:0,b=g?h:0,S=Ut(r,c);return Ut(S,[m,b])}function R8(e,t,n,r,i,a,o){var c=hN(e,t,n,r,i,a,o);return c}function D8(e,t,n){return[t?-1+e[0]/(t/2):0,n?-1+e[1]/(n/2):0]}function I8(e,t,n,r){r===void 0&&(r=e.state.allMatrix);var i=e.state,a=i.width,o=i.height,c=i.is3d,u=c?4:3,d=[a/2*(1+t[0])+n[0],o/2*(1+t[1])+n[1]];return en(r,d,u)}function k8(e,t,n){var r=n.fixedDirection,i=n.fixedPosition,a=n.fixedOffset;return hN(e,"rotate(".concat(t,"deg)"),r,i,a,n)}function N8(e,t,n,r,i,a){var o=e.props.groupable,c=e.state,u=c.transformOrigin,d=c.offsetMatrix,h=c.is3d,g=c.width,m=c.height,b=c.left,S=c.top,w=a.fixedDirection,E=a.nextTargetMatrix||c.targetMatrix,T=h?4:3,D=w8(i,t,n,g,m,u),I=o?b:0,M=o?S:0,z=_h(d,E,D,T),P=T8(r,z,t,n,T,w);return Ut(P,[I,M])}function M8(e,t){return Un(Oi(e.state),t)}function O8(e,t){var n=e.targetGesto,r=e.controlGesto,i;return n?.isFlag()&&(i=n.getEventData()[t]),!i&&r?.isFlag()&&(i=r.getEventData()[t]),i||{}}function P8(e){if(e&&e.getRootNode){var t=e.getRootNode();if(t.nodeType===11)return t}}function V8(e){var t=e("scale"),n=e("rotate"),r=e("translate"),i=[];return r&&r!=="0px"&&r!=="none"&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),n&&n!=="1"&&n!=="none"&&i.push("rotate(".concat(n,")")),t&&t!=="1"&&t!=="none"&&i.push("scale(".concat(t.split(/\s+/).join(","),")")),i}function pN(e,t,n){for(var r=e,i=[],a=Jx(e)||Ko(e),o=!n&&e===t||e===a,c=o,u=!1,d=3,h,g,m,b=!1,S=Hd(t,t,!0).offsetParent,w=1;r&&!c;){c=o;var E=Wr(r),T=E("position"),D=zN(r),I=T==="fixed",M=V8(E),z=AU(MF(D)),P=void 0,A=!1,C=!1,k=0,j=0,L=0,B=0,V={hasTransform:!1,fixedContainer:null};I&&(b=!0,V=zF(r),S=V.fixedContainer);var K=z.length;!u&&(K===16||M.length)&&(u=!0,d=4,Eb(i),m&&(m=Zi(m,3,4))),u&&K===9&&(z=Zi(z,3,4));var Y=jF(r,e),H=Y.tagName,$=Y.hasOffset,et=Y.isSVG,at=Y.origin,X=Y.targetOrigin,U=Y.offset,Z=J(U,2),rt=Z[0],st=Z[1];H==="svg"&&!r.ownerSVGElement&&m&&(i.push({type:"target",target:r,matrix:LF(r,d)}),i.push({type:"offset",target:r,matrix:Ke(d)}));var ht=parseFloat(E("zoom"))||1;if(I)P=V.fixedContainer,A=!0;else{var dt=Hd(r,t,!1,!0,E),bt=dt.offsetZoom;if(P=dt.offsetParent,A=dt.isEnd,C=dt.isStatic,w*=bt,(dt.isCustomElement||bt!==1)&&C)rt-=P.offsetLeft,st-=P.offsetTop;else if(p8||h8){var At=dt.parentSlotElement;if(At){for(var Dt=P,Kt=0,Et=0;Dt&&P8(Dt);)Kt+=Dt.offsetLeft,Et+=Dt.offsetTop,Dt=Dt.offsetParent;rt-=Kt,st-=Et}}}if(nN&&!g8&&$&&!et&&C&&(T==="relative"||T==="static")&&(rt-=P.offsetLeft,st-=P.offsetTop,o=o||A),I)$&&V.hasTransform&&(L=P.clientLeft,B=P.clientTop);else if($&&S!==P&&(k=P.clientLeft,j=P.clientTop),$&&P===a){var Rt=LN(r,!1);rt+=Rt[0],st+=Rt[1]}if(i.push({type:"target",target:r,matrix:Sd(z,d,at)}),M.length&&(i.push({type:"offset",target:r,matrix:Ke(d)}),i.push({type:"target",target:r,matrix:Sd(Gd(M),d,at)})),$){var le=r===e,Vt=le?0:r.scrollLeft,qt=le?0:r.scrollTop;i.push({type:"offset",target:r,matrix:ql([rt-Vt+k-L,st-qt+j-B],d)})}else i.push({type:"offset",target:r,origin:at});if(ht!==1&&i.push({type:"zoom",target:r,matrix:Sd(s_([ht,ht],d),d,[0,0])}),m||(m=z),h||(h=at),g||(g=X),c||I)break;r=P,o=A,(!n||r===a)&&(c=o)}return m||(m=Ke(d)),h||(h=[0,0]),g||(g=[0,0]),{zoom:w,offsetContainer:S,matrixes:i,targetMatrix:m,transformOrigin:h,targetOrigin:g,is3d:u,hasFixed:b}}var Dl=null,Il=null,au=null;function Su(e){e?(window.Map&&(Dl=new Map,Il=new Map),au=[]):(Dl=null,au=null,Il=null)}function j8(e){var t=Il?.get(e);if(t)return t;var n=wd(e,!0);return Il&&Il.set(e,n),n}function z8(e,t){if(au){var n=Xr(au,function(i){return i[0][0]==e&&i[0][1]==t});if(n)return n[1]}var r=pN(e,t,!0);return au&&au.push([[e,t],r]),r}function Wr(e){var t=Dl?.get(e);if(!t){var n=ko(e).getComputedStyle(e);if(!Dl)return function(a){return n[a]};t={style:n,cached:{}},Dl.set(e,t)}var r=t.cached,i=t.style;return function(a){return a in r||(r[a]=i[a]),r[a]}}function Wi(e,t,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return e.moveables.map(function(o,c){return a[c]=a[c]||{},a[c][t]=a[c][t]||{},Q(Q({},n),{isRequestChild:!0,datas:a[c][t],originalDatas:a[c]})})}function a1(e,t,n,r,i,a,o){var c=!!n.match(/Start$/g),u=!!n.match(/End$/g),d=i.isPinch,h=i.datas,g=Wi(e,t.name,i),m=e.moveables,b=[],S=g.map(function(w,E){var T=m[E],D=T.state,I=D.gestos,M=w;if(c)M=new _u(o).dragStart(r,w),b.push(M);else{if(I[o]||(I[o]=h.childGestos[E]),!I[o])return;M=xh(w,D,r,d,a,o),b.push(M)}var z=t[n](T,Q(Q({},M),{parentFlag:!0}));return u&&(I[o]=null),z});return c&&(h.childGestos=m.map(function(w){return w.state.gestos[o]})),{eventParams:S,childEvents:b}}function ys(e,t,n,r,i,a){i===void 0&&(i=function(h,g){return g});var o=!!n.match(/End$/g),c=Wi(e,t.name,r),u=e.moveables,d=c.map(function(h,g){var m=u[g],b=h;b=i(m,h);var S=t[n](m,Q(Q({},b),{parentFlag:!0}));return o&&(m.state.gestos={}),S});return d}function lm(e,t,n,r){var i=n.fixedDirection,a=n.fixedPosition,o=r.datas.startPositions||Oi(t.state),c=Un(o,i),u=J(vr(vh(-e.rotation/180*Math.PI,3),[c[0]-a[0],c[1]-a[1],1],3),2),d=u[0],h=u[1];return r.datas.originalX=d,r.datas.originalY=h,r}function gN(e,t,n,r){var i=e.getState(),a=i.renderPoses,o=i.rotation,c=i.direction,u=$l(e.props,t).zoom,d=_d(o/Math.PI*180),h={},g=e.renderState;g.renderDirectionMap||(g.renderDirectionMap={});var m=g.renderDirectionMap;n.forEach(function(S){var w=S.dir;h[w]=!0});var b=Cr(c);return n.map(function(S){var w=S.data,E=S.classNames,T=S.dir,D=f_[T];if(!D||!h[T])return null;m[T]=!0;var I=(Jt(d,15)+b*sN[T]+720)%180,M={};return Ts(w).forEach(function(z){M["data-".concat(z)]=w[z]}),r.createElement("div",Q({className:jt.apply(void 0,wt(["control","direction",T,t],J(E),!1)),"data-rotation":I,"data-direction":T},M,{key:"direction-".concat(T),style:dm.apply(void 0,wt([o,u],J(D.map(function(z){return a[z]})),!1))}))})}function mN(e,t,n,r){var i=$l(e.props,n),a=i.renderDirections,o=a===void 0?t:a,c=i.displayAroundControls;if(!o)return[];var u=o===!0?c_:o;return wt(wt([],J(c?xN(e,r,n,u):[]),!1),J(gN(e,n,u.map(function(d){return{data:{},classNames:[],dir:d}}),r)),!1)}function qd(e,t,n,r,i,a){for(var o=[],c=6;c<arguments.length;c++)o[c-6]=arguments[c];var u=Sn(n,r),d=t?Jt(u/Math.PI*180,15)%180:-1;return e.createElement("div",{key:"line-".concat(a),className:jt.apply(void 0,wt(["line","direction",t?"edge":"",t],J(o),!1)),"data-rotation":d,"data-line-key":a,"data-direction":t,style:od(n,r,i,u)})}function vN(e,t,n,r,i){var a=n===!0?o8:n;return a.map(function(o,c){var u=J(f_[o],2),d=u[0],h=u[1];if(h!=null)return qd(e,o,r[d],r[h],i,"".concat(t,"Edge").concat(c),t)}).filter(Boolean)}function yN(e){return function(t,n){var r=$l(t.props,e).edge;return r&&(r===!0||r.length)?wt(wt([],J(vN(n,e,r,t.getState().renderPoses,t.props.zoom)),!1),J(L8(t,e,n)),!1):bN(t,e,n)}}function bN(e,t,n){return mN(e,c_,t,n)}function L8(e,t,n){return mN(e,["nw","ne","sw","se"],t,n)}function xN(e,t,n,r){var i=e.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=e.getState(),o=a.renderPoses,c=a.rotation,u=a.direction,d=i.renderDirectionMap,h=e.props.zoom,g=Cr(u),m=c/Math.PI*180;return(r||Ts(d)).map(function(b){var S=f_[b];if(!S)return null;var w=(Jt(m,15)+g*sN[b]+720)%180,E=["around-control"];return n&&E.push("direction",n),t.createElement("div",{className:jt.apply(void 0,wt([],J(E),!1)),"data-rotation":w,"data-direction":b,key:"direction-around-".concat(b),style:dm.apply(void 0,wt([c,h],J(S.map(function(T){return o[T]})),!1))})})}function p_(e,t,n){var r=e||{},i=r.position,a=i===void 0?"client":i,o=r.left,c=o===void 0?-1/0:o,u=r.top,d=u===void 0?-1/0:u,h=r.right,g=h===void 0?1/0:h,m=r.bottom,b=m===void 0?1/0:m,S={position:a,left:c,top:d,right:g,bottom:b};return{vertical:QC(S,t,!0),horizontal:QC(S,n,!1)}}function ev(e,t){var n=e.state,r=n.containerClientRect,i=r.clientHeight,a=r.clientWidth,o=r.clientLeft,c=r.clientTop,u=n.snapOffset,d=u.left,h=u.top,g=u.right,m=u.bottom,b=t||e.props.bounds||{},S=b.position||"client",w=S==="css",E=b.left,T=E===void 0?-1/0:E,D=b.top,I=D===void 0?-1/0:D,M=b.right,z=M===void 0?w?-1/0:1/0:M,P=b.bottom,A=P===void 0?w?-1/0:1/0:P;return w&&(z=a+g-d-z,A=i+m-h-A),{left:T+d-o,right:z+d-o,top:I+h-c,bottom:A+h-c}}function B8(e,t,n){var r=ev(e),i=r.left,a=r.top,o=r.right,c=r.bottom,u=J(n,2),d=u[0],h=u[1],g=J(Ut(n,t),2),m=g[0],b=g[1];xt(m)<Ir&&(m=0),xt(b)<Ir&&(b=0);var S=b>0,w=m>0,E={isBound:!1,offset:0,pos:0},T={isBound:!1,offset:0,pos:0};if(m===0&&b===0)return{vertical:E,horizontal:T};if(m===0)S?c<h&&(T.pos=c,T.offset=h-c):a>h&&(T.pos=a,T.offset=h-a);else if(b===0)w?o<d&&(E.pos=o,E.offset=d-o):i>d&&(E.pos=i,E.offset=d-i);else{var D=b/m,I=n[1]-D*d,M=0,z=0,P=!1;w&&o<=d?(M=D*o+I,z=o,P=!0):!w&&d<=i&&(M=D*i+I,z=i,P=!0),P&&(M<a||M>c)&&(P=!1),P||(S&&c<=h?(M=c,z=(M-I)/D,P=!0):!S&&h<=a&&(M=a,z=(M-I)/D,P=!0)),P&&(E.isBound=!0,E.pos=z,E.offset=d-z,T.isBound=!0,T.pos=M,T.offset=h-M)}return{vertical:E,horizontal:T}}function QC(e,t,n){var r=e[n?"left":"top"],i=e[n?"right":"bottom"],a=Math.min.apply(Math,wt([],J(t),!1)),o=Math.max.apply(Math,wt([],J(t),!1)),c=[];return r+1>a&&c.push({direction:"start",isBound:!0,offset:a-r,pos:r}),i-1<o&&c.push({direction:"end",isBound:!0,offset:o-i,pos:i}),c.length||c.push({isBound:!1,offset:0,pos:0}),c.sort(function(u,d){return xt(d.offset)-xt(u.offset)})}function ZC(e,t,n){var r=n?e.map(function(i){return mh(i,n)}):e;return r.some(function(i){return i[0]<t.left&&xt(i[0]-t.left)>.1||i[0]>t.right&&xt(i[0]-t.right)>.1||i[1]<t.top&&xt(i[1]-t.top)>.1||i[1]>t.bottom&&xt(i[1]-t.bottom)>.1})}function U8(e,t,n){var r=Mi(e),i=Math.sqrt(r*r-t*t)||0;return[i,-i].sort(function(a,o){return xt(a-e[n?0:1])-xt(o-e[n?0:1])}).map(function(a){return Sn([0,0],n?[a,t]:[t,a])})}function F8(e,t,n,r,i){if(!e.props.bounds)return[];var a=i*Math.PI/180,o=ev(e),c=o.left,u=o.top,d=o.right,h=o.bottom,g=c-r[0],m=d-r[0],b=u-r[1],S=h-r[1],w={left:g,top:b,right:m,bottom:S};if(!ZC(n,w,0))return[];var E=[];return[[g,0],[m,0],[b,1],[S,1]].forEach(function(T){var D=J(T,2),I=D[0],M=D[1];n.forEach(function(z){var P=Sn([0,0],z);E.push.apply(E,wt([],J(U8(z,I,M).map(function(A){return a+A-P}).filter(function(A){return!ZC(t,w,A)}).map(function(A){return Jt(A*180/Math.PI,Ir)})),!1))})}),E}var G8=["left","right","center"],q8=["top","bottom","middle"],JC={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},Bo={start:"left",end:"right",center:"center"},Uo={start:"top",end:"bottom",center:"middle"};function su(){return{left:!1,top:!1,right:!1,bottom:!1}}function $u(e,t){var n=e.props,r=n.snappable,i=n.bounds,a=n.innerBounds,o=n.verticalGuidelines,c=n.horizontalGuidelines,u=n.snapGridWidth,d=n.snapGridHeight,h=e.state,g=h.guidelines,m=h.enableSnap;return!r||!m||t&&r!==!0&&r.indexOf(t)<0?!1:!!(u||d||i||a||g&&g.length||o&&o.length||c&&c.length)}function g_(e){return e===!1?{}:e===!0||!e?{left:!0,right:!0,top:!0,bottom:!0}:e}function H8(e,t){var n=g_(e),r={};for(var i in n)i in t&&n[i]&&(r[i]=t[i]);return r}function m_(e,t){var n=H8(e,t),r=q8.filter(function(a){return a in n}),i=G8.filter(function(a){return a in n});return{horizontalNames:r,verticalNames:i,horizontal:r.map(function(a){return n[a]}),vertical:i.map(function(a){return n[a]})}}function $8(e,t,n){var r=en(e,[t.clientLeft,t.clientTop],n);return[t.left+r[0],t.top+r[1]]}function Y8(e){var t=J(e,2),n=t[0],r=t[1],i=r[0]-n[0],a=r[1]-n[1];Math.abs(i)<Nn&&(i=0),Math.abs(a)<Nn&&(a=0);var o=0,c=0,u=0;return i?a?(o=-a/i,c=1,u=o*n[0]-n[1]):(c=1,u=-n[1]):(o=-1,u=n[0]),[o,c,u].map(function(d){return Jt(d,Nn)})}var _N="snapRotationThreshold",SN="snapRotationDegrees",wN="snapHorizontalThreshold",EN="snapVerticalThreshold";function nv(e,t,n,r,i,a,o){var c;r===void 0&&(r=[]),i===void 0&&(i=[]);var u=e.props,d=((c=e.state.snapThresholdInfo)===null||c===void 0?void 0:c.multiples)||[1,1],h=p2(o,u[wN],5),g=p2(a,u[EN],5);return TN(e.state.guidelines,t,n,r,i,h,g,d)}function TN(e,t,n,r,i,a,o,c){return{vertical:e2(e,"vertical",t,o*c[0],r),horizontal:e2(e,"horizontal",n,a*c[1],i)}}function X8(e,t,n){var r=J(n,2),i=r[0],a=r[1],o=J(t,2),c=o[0],u=o[1],d=J(Ut(n,t),2),h=d[0],g=d[1],m=g>0,b=h>0;h=hm(h),g=hm(g);var S={isSnap:!1,offset:0,pos:0},w={isSnap:!1,offset:0,pos:0};if(h===0&&g===0)return{vertical:S,horizontal:w};var E=nv(e,h?[i]:[],g?[a]:[],[],[],void 0,void 0),T=E.vertical,D=E.horizontal;T.posInfos.filter(function(H){var $=H.pos;return b?$>=c:$<=c}),D.posInfos.filter(function(H){var $=H.pos;return m?$>=u:$<=u}),T.isSnap=T.posInfos.length>0,D.isSnap=D.posInfos.length>0;var I=bb(T),M=I.isSnap,z=I.guideline,P=bb(D),A=P.isSnap,C=P.guideline,k=A?C.pos[1]:0,j=M?z.pos[0]:0;if(h===0)A&&(w.isSnap=!0,w.pos=C.pos[1],w.offset=a-w.pos);else if(g===0)M&&(S.isSnap=!0,S.pos=j,S.offset=i-j);else{var L=g/h,B=n[1]-L*i,V=0,K=0,Y=!1;M?(K=j,V=L*K+B,Y=!0):A&&(V=k,K=(V-B)/L,Y=!0),Y&&(S.isSnap=!0,S.pos=K,S.offset=i-K,w.isSnap=!0,w.pos=V,w.offset=a-V)}return{vertical:S,horizontal:w}}function Co(e){var t="";return e===-1||e==="top"||e==="left"?t="start":e===0||e==="center"||e==="middle"?t="center":(e===1||e==="right"||e==="bottom")&&(t="end"),t}function t2(e,t,n,r){var i=m_(e.props.snapDirections,t),a=nv(e,i.vertical,i.horizontal,i.verticalNames.map(function(u){return Co(u)}),i.horizontalNames.map(function(u){return Co(u)}),n,r),o=Co(i.horizontalNames[a.horizontal.index]),c=Co(i.verticalNames[a.vertical.index]);return{vertical:Q(Q({},a.vertical),{direction:c}),horizontal:Q(Q({},a.horizontal),{direction:o})}}function bb(e){var t=e.isSnap;if(!t)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=e.posInfos[0],r=n.guidelineInfos[0],i=r.offset,a=r.dist,o=r.guideline;return{isSnap:t,offset:i,dist:a,pos:n.pos,guideline:o}}function e2(e,t,n,r,i){var a,o;if(i===void 0&&(i=[]),!e||!e.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var c=t==="vertical",u=c?0:1,d=n.map(function(g,m){var b=i[m]||"",S=e.map(function(w){var E=w.pos,T=g-E[u];return{offset:T,dist:xt(T),guideline:w,direction:b}}).filter(function(w){var E=w.guideline,T=w.dist,D=E.type;return!(D!==t||T>r)}).sort(function(w,E){return w.dist-E.dist});return{pos:g,index:m,guidelineInfos:S,direction:b}}).filter(function(g){return g.guidelineInfos.length>0}).sort(function(g,m){return g.guidelineInfos[0].dist-m.guidelineInfos[0].dist}),h=d.length>0;return{isSnap:h,index:h?d[0].index:-1,direction:(o=(a=d[0])===null||a===void 0?void 0:a.direction)!==null&&o!==void 0?o:"",posInfos:d}}function W8(e,t,n,r,i){var a=[];n[0]&&n[1]?a=[n,[-n[0],n[1]],[n[0],-n[1]]]:!n[0]&&!n[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(m,b,S){var w=S[b+1]||S[0];a.push(m),a.push([(m[0]+w[0])/2,(m[1]+w[1])/2])}):e.props.keepRatio?a.push([-1,-1],[-1,1],[1,-1],[1,1],n):(a.push.apply(a,wt([],J(E8([[-1,-1],[1,-1],[-1,-1],[1,1]],n)),!1)),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));var o=a.map(function(m){return Un(t,m)}),c=o.map(function(m){return m[0]}),u=o.map(function(m){return m[1]}),d=nv(e,c,u,a.map(function(m){return Co(m[0])}),a.map(function(m){return Co(m[1])}),r,i),h=Co(a.map(function(m){return m[0]})[d.vertical.index]),g=Co(a.map(function(m){return m[1]})[d.horizontal.index]);return{vertical:Q(Q({},d.vertical),{direction:h}),horizontal:Q(Q({},d.horizontal),{direction:g})}}function AN(e,t){var n=xt(e.offset),r=xt(t.offset);return e.isBound&&t.isBound?r-n:e.isBound?-1:t.isBound?1:e.isSnap&&t.isSnap?r-n:e.isSnap?-1:t.isSnap||n<Ir?1:r<Ir?-1:n-r}function cm(e,t){return e.slice().sort(function(n,r){var i=n.sign[t],a=r.sign[t],o=n.offset[t],c=r.offset[t];if(i){if(!a)return-1}else return 1;return AN({isBound:n.isBound,isSnap:n.isSnap,offset:o},{isBound:r.isBound,isSnap:r.isSnap,offset:c})})[0]}function K8(e,t,n){var r=[];if(n)xt(t[0])!==1||xt(t[1])!==1?r.push([t,[-1,-1]],[t,[-1,1]],[t,[1,-1]],[t,[1,1]]):r.push([t,[e[0],-e[1]]],[t,[-e[0],e[1]]]),r.push([t,e]);else if(e[0]&&e[1]||!e[0]&&!e[1]){var i=e[0]?e:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(c){var u=[o*i[0],c*i[1]];t[0]===u[0]&&t[1]===u[1]||r.push([t,u])})})}else if(e[0]){var a=xt(t[0])===1?[1]:[1,-1];a.forEach(function(o){r.push([[t[0],-1],[o*e[0],-1]],[[t[0],0],[o*e[0],0]],[[t[0],1],[o*e[0],1]])})}else if(e[1]){var a=xt(t[1])===1?[1]:[1,-1];a.forEach(function(c){r.push([[-1,t[1]],[-1,c*e[1]]],[[0,t[1]],[0,c*e[1]]],[[1,t[1]],[1,c*e[1]]])})}return r}function CN(e,t){var n=ib([t[0][0],t[1][0]]),r=ib([t[0][1],t[1][1]]);return{vertical:n<=e[0],horizontal:r<=e[1]}}function v_(e,t){var n=J(t,2),r=n[0],i=n[1],a=i[0]-r[0],o=i[1]-r[1];xt(a)<Ir&&(a=0),xt(o)<Ir&&(o=0);var c,u;if(!a)c=r[0],u=e[0];else if(!o)c=r[1],u=e[1];else{var d=o/a;c=d*(e[0]-r[0])+r[1],u=e[1]}return c-u}function RN(e,t,n,r){return r===void 0&&(r=Ir),e.every(function(i){var a=v_(i,t),o=a<=0;return o===n||xt(a)<=r})}function n2(e,t,n,r,i){return i===void 0&&(i=0),r&&t-i<=e||!r&&e<=n+i?{isBound:!0,offset:r?t-e:n-e}:{isBound:!1,offset:0}}function Q8(e,t){var n=t.line,r=t.centerSign,i=t.verticalSign,a=t.horizontalSign,o=t.lineConstants,c=e.props.innerBounds;if(!c)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=c.left,d=c.top,h=c.width,g=c.height,m=[[u,d],[u,d+g]],b=[[u,d],[u+h,d]],S=[[u+h,d],[u+h,d+g]],w=[[u,d+g],[u+h,d+g]];if(RN([[u,d],[u+h,d],[u,d+g],[u+h,d+g]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var E=Ro(n,o,b,i),T=Ro(n,o,w,i),D=Ro(n,o,m,a),I=Ro(n,o,S,a),M=E.isBound&&T.isBound,z=E.isBound||T.isBound,P=D.isBound&&I.isBound,A=D.isBound||I.isBound,C=wu(E.offset,T.offset),k=wu(D.offset,I.offset),j=[0,0],L=!1,B=!1;return xt(k)<xt(C)?(j=[C,0],L=z,B=M):(j=[0,k],L=A,B=P),{isAllBound:B,isVerticalBound:z,isHorizontalBound:A,isBound:L,offset:j}}function Ro(e,t,n,r,i,a){var o=J(t,2),c=o[0],u=o[1],d=e[0],h=n[0],g=n[1],m=hm(g[1]-h[1]),b=hm(g[0]-h[0]),S=u,w=c,E=-c/u;if(b){if(!m){if(a&&!S)return{isBound:!1,offset:0};if(w){var M=(h[1]-d[1])/E+d[0];return n2(M,h[0],g[0],r,i)}else{var D=h[1]-d[1],I=xt(D)<=(i||0);return{isBound:I,offset:I?D:0}}}}else{if(a&&!w)return{isBound:!1,offset:0};if(S){var T=E*(h[0]-d[0])+d[1];return n2(T,h[1],g[1],r,i)}else{var D=h[0]-d[0],I=xt(D)<=(i||0);return{isBound:I,offset:I?D:0}}}return{isBound:!1,offset:0}}function DN(e,t,n){return t.map(function(r){var i=Q8(e,r),a=i.isBound,o=i.offset,c=i.isVerticalBound,u=i.isHorizontalBound,d=r.multiple,h=qa({datas:n,distX:o[0],distY:o[1]}).map(function(g,m){return g*(d[m]?2/d[m]:0)});return{sign:d,isBound:a,isVerticalBound:c,isHorizontalBound:u,isSnap:!1,offset:h}})}function Z8(e,t,n){var r,i=y_(e,t,[0,0],!1).map(function(m){return Q(Q({},m),{multiple:m.multiple.map(function(b){return xt(b)*2})})}),a=DN(e,i,n),o=cm(a,0),c=cm(a,1),u=0,d=0,h=o.isVerticalBound||c.isVerticalBound,g=o.isHorizontalBound||c.isHorizontalBound;return(h||g)&&(r=J(S8({datas:n,distX:-o.offset[0],distY:-c.offset[1]}),2),u=r[0],d=r[1]),{vertical:{isBound:h,offset:u},horizontal:{isBound:g,offset:d}}}function J8(e,t){var n=[],r=e[0],i=e[1];return r&&i?n.push([[0,i*2],e,[-r,i]],[[r*2,0],e,[r,-i]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),t&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,i*2],[1,i],[-1,i]]),t&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function y_(e,t,n,r){var i=e.state,a=i.allMatrix,o=i.is3d,c=ec(a,100,100,o?4:3),u=Un(c,[0,0]);return J8(n,r).map(function(d){var h=J(d,3),g=h[0],m=h[1],b=h[2],S=[Un(c,m),Un(c,b)],w=Y8(S),E=CN(u,S),T=E.vertical,D=E.horizontal,I=v_(u,S)<=0;return{multiple:g,centerSign:I,verticalSign:T,horizontalSign:D,lineConstants:w,line:[Un(t,m),Un(t,b)]}})}function r2(e,t,n,r){var i=r?e.map(function(a){return mh(a,r)}):e;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var o=v_(n,a)<=0;return!RN(t,a,o)})}function tF(e){var t=J(e,2),n=t[0],r=t[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return xt(n[0]);if(!a)return xt(n[1]);var o=a/i;return xt((-o*n[0]+n[1])/Math.sqrt(Math.pow(o,2)+1))}function eF(e){var t=J(e,2),n=t[0],r=t[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return[n[0],0];if(!a)return[0,n[1]];var o=a/i,c=-o*n[0]+n[1];return[-c/(o+1/o),c/(o*o+1)]}function nF(e,t,n,r,i){var a=e.props.innerBounds,o=i*Math.PI/180;if(!a)return[];var c=a.left,u=a.top,d=a.width,h=a.height,g=c-r[0],m=c+d-r[0],b=u-r[1],S=u+h-r[1],w=[[g,b],[m,b],[g,S],[m,S]],E=Un(n,[0,0]);if(!r2(n,w,E,0))return[];var T=[],D=w.map(function(I){return[Mi(I),Sn([0,0],I)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(I){var M=Sn([0,0],eF(I)),z=tF(I);T.push.apply(T,wt([],J(D.filter(function(P){var A=J(P,1),C=A[0];return C&&z<=C}).map(function(P){var A=J(P,2),C=A[0],k=A[1],j=Math.acos(C?z/C:0),L=k+j,B=k-j;return[o+L-M,o+B-M]}).reduce(function(P,A){return P.push.apply(P,wt([],J(A),!1)),P},[]).filter(function(P){return!r2(t,w,E,P)}).map(function(P){return Jt(P*180/Math.PI,Ir)})),!1))}),T}function rF(e){var t=e.props.innerBounds,n=su();if(!t)return{boundMap:n,vertical:[],horizontal:[]};var r=e.getRect(),i=r.pos1,a=r.pos2,o=r.pos3,c=r.pos4,u=[i,a,o,c],d=Un(u,[0,0]),h=t.left,g=t.top,m=t.width,b=t.height,S=[[h,g],[h,g+b]],w=[[h,g],[h+m,g]],E=[[h+m,g],[h+m,g+b]],T=[[h,g+b],[h+m,g+b]],D=y_(e,u,[0,0],!1),I=[],M=[];return D.forEach(function(z){var P=z.line,A=z.lineConstants,C=CN(d,P),k=C.horizontal,j=C.vertical,L=Ro(P,A,w,j,1,!0),B=Ro(P,A,T,j,1,!0),V=Ro(P,A,S,k,1,!0),K=Ro(P,A,E,k,1,!0);L.isBound&&!n.top&&(I.push(g),n.top=!0),B.isBound&&!n.bottom&&(I.push(g+b),n.bottom=!0),V.isBound&&!n.left&&(M.push(h),n.left=!0),K.isBound&&!n.right&&(M.push(h+m),n.right=!0)}),{boundMap:n,horizontal:I,vertical:M}}function iF(e,t,n,r){var i=t[0]-e[0],a=t[1]-e[1];if(xt(i)<Nn&&(i=0),xt(a)<Nn&&(a=0),!i)return r?[0,0]:[0,n];if(!a)return r?[n,0]:[0,0];var o=a/i,c=e[1]-o*e[0];if(r){var u=o*(t[0]+n)+c;return[n,u-t[1]]}else{var d=(t[1]+n-c)/o;return[d-t[0],n]}}function xb(e,t,n,r,i){var a=iF(e,t,n,r);if(!a)return{isOutside:!1,offset:[0,0]};var o=vs(e,t),c=vs(a,e),u=vs(a,t),d=c>o||u>o,h=J(qa({datas:i,distX:a[0],distY:a[1]}),2),g=h[0],m=h[1];return{offset:[g,m],isOutside:d}}function um(e,t){return e.isBound?e.offset:t.isSnap?bb(t).offset:0}function aF(e,t,n,r,i){var a=J(t,2),o=a[0],c=a[1],u=J(n,2),d=u[0],h=u[1],g=J(r,2),m=g[0],b=g[1],S=J(i,2),w=S[0],E=S[1],T=-w,D=-E;if(e&&o&&c){T=0,D=0;var I=[];if(d&&h?I.push([0,E],[w,0]):d?I.push([w,0]):h?I.push([0,E]):m&&b?I.push([0,E],[w,0]):m?I.push([w,0]):b&&I.push([0,E]),I.length){I.sort(function(A,C){return Mi(Ut([o,c],A))-Mi(Ut([o,c],C))});var M=I[0];if(M[0]&&xt(o)>Nn)T=-M[0],D=c*xt(o+T)/xt(o)-c;else if(M[1]&&xt(c)>Nn){var z=c;D=-M[1],T=o*xt(c+D)/xt(z)-o}if(e&&h&&d)if(xt(T)>Nn&&xt(T)<xt(w)){var P=xt(w)/xt(T);T*=P,D*=P}else if(xt(D)>Nn&&xt(D)<xt(E)){var P=xt(E)/xt(D);T*=P,D*=P}else T=wu(-w,T),D=wu(-E,D)}}else T=o||d?-w:0,D=c||h?-E:0;return[T,D]}function sF(e,t,n,r,i,a){if(!$u(e,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=__(a.absolutePoses,[t,n]),c=Ii(o),u=c.left,d=c.right,h=c.top,g=c.bottom,m={horizontal:o.map(function(K){return K[1]}),vertical:o.map(function(K){return K[0]})},b=g_(e.props.snapDirections),S=m_(b,{left:u,right:d,top:h,bottom:g,center:(u+d)/2,middle:(h+g)/2}),w=rv(e,i,S,m),E=w.vertical,T=w.horizontal,D=Z8(e,o,a),I=D.vertical,M=D.horizontal,z=E.isSnap,P=T.isSnap,A=E.isBound||I.isBound,C=T.isBound||M.isBound,k=wu(E.offset,I.offset),j=wu(T.offset,M.offset),L=J(aF(r,[t,n],[A,C],[z,P],[k,j]),2),B=L[0],V=L[1];return[{isBound:A,isSnap:z,offset:B},{isBound:C,isSnap:P,offset:V}]}function rv(e,t,n,r){r===void 0&&(r=n);var i=p_(ev(e),r.vertical,r.horizontal),a=i.horizontal,o=i.vertical,c=t?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:nv(e,n.vertical,n.horizontal,void 0,void 0,void 0,void 0),u=c.horizontal,d=c.vertical,h=um(a[0],u),g=um(o[0],d),m=xt(h),b=xt(g);return{horizontal:{isBound:a[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:h,dist:m,bounds:a,snap:u},vertical:{isBound:o[0].isBound,isSnap:d.isSnap,snapIndex:d.index,offset:g,dist:b,bounds:o,snap:d}}}function i2(e,t,n,r,i,a,o){o===void 0&&(o=[1,1]);var c=p_(t,n,r),u=c.horizontal,d=c.vertical,h=TN(e,n,r,[],[],i,a,o),g=h.horizontal,m=h.vertical,b=um(u[0],g),S=um(d[0],m),w=xt(b),E=xt(S);return{horizontal:{isBound:u[0].isBound,isSnap:g.isSnap,snapIndex:g.index,offset:b,dist:w,bounds:u,snap:g},vertical:{isBound:d[0].isBound,isSnap:m.isSnap,snapIndex:m.index,offset:S,dist:E,bounds:d,snap:m}}}function oF(e,t,n,r){var i=Sn(e,t)/Math.PI*180,a=n.vertical,o=a.isBound,c=a.isSnap,u=a.dist,d=n.horizontal,h=d.isBound,g=d.isSnap,m=d.dist,b=i%180,S=b<3||b>177,w=b>87&&b<93;return m<u&&(o||c&&!w&&(!r||!S))?"vertical":h||g&&!S&&(!r||!w)?"horizontal":""}function lF(e,t,n,r,i,a){return n.map(function(o){var c=J(o,2),u=c[0],d=c[1],h=Un(t,u),g=Un(t,d),m=r?cF(e,h,g,i):rv(e,i,{vertical:[g[0]],horizontal:[g[1]]}),b=m.horizontal,S=b.offset,w=b.isBound,E=b.isSnap,T=m.vertical,D=T.offset,I=T.isBound,M=T.isSnap,z=Ut(d,u);if(!D&&!S)return{isBound:I||w,isSnap:M||E,sign:z,offset:[0,0]};var P=oF(h,g,m,r);if(!P)return{sign:z,isBound:!1,isSnap:!1,offset:[0,0]};var A=P==="vertical",C=[0,0];return!r&&xt(d[0])===1&&xt(d[1])===1&&u[0]!==d[0]&&u[1]!==d[1]?C=qa({datas:a,distX:-D,distY:-S}):C=xb(h,g,-(A?D:S),A,a).offset,C=C.map(function(k,j){return k*(z[j]?2/z[j]:0)}),{sign:z,isBound:A?I:w,isSnap:A?M:E,offset:C}})}function a2(e,t){return e.isBound?e.offset:t.isSnap?t.offset:0}function cF(e,t,n,r){var i=B8(e,t,n),a=i.horizontal,o=i.vertical,c=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:X8(e,t,n),u=c.horizontal,d=c.vertical,h=a2(a,u),g=a2(o,d),m=xt(h),b=xt(g);return{horizontal:{isBound:a.isBound,isSnap:u.isSnap,offset:h,dist:m},vertical:{isBound:o.isBound,isSnap:d.isSnap,offset:g,dist:b}}}function uF(e,t,n,r,i){var a=[-n[0],-n[1]],o=e.state,c=o.width,u=o.height,d=e.props.bounds,h=1/0,g=1/0;if(d){var m=[[n[0],-n[1]],[-n[0],n[1]]],b=d.left,S=b===void 0?-1/0:b,w=d.top,E=w===void 0?-1/0:w,T=d.right,D=T===void 0?1/0:T,I=d.bottom,M=I===void 0?1/0:I;m.forEach(function(z){var P=z[0]!==a[0],A=z[1]!==a[1],C=Un(t,z),k=Sn(r,C)*360/Math.PI;if(A){var j=C.slice();(xt(k-360)<2||xt(k-180)<2)&&(j[1]=r[1]);var L=xb(r,j,(r[1]<C[1]?M:E)-C[1],!1,i),B=J(L.offset,2),V=B[1],K=L.isOutside;isNaN(V)||(g=u+(K?1:-1)*xt(V))}if(P){var j=C.slice();(xt(k-90)<2||xt(k-270)<2)&&(j[0]=r[0]);var Y=xb(r,j,(r[0]<C[0]?D:S)-C[0],!0,i),H=J(Y.offset,1),$=H[0],et=Y.isOutside;isNaN($)||(h=c+(et?1:-1)*xt($))}})}return{maxWidth:h,maxHeight:g}}var Ar={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(e,t){var n=e.props,r=n.hideThrottleDragRotateLine,i=n.throttleDragRotate,a=n.zoom,o=e.getState(),c=o.dragInfo,u=o.beforeOrigin;if(r||!i||!c)return[];var d=c.dist;if(!d[0]&&!d[1])return[];var h=Mi(d),g=Sn(d,[0,0]);return[t.createElement("div",{className:jt("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(h,"px"),transform:"translate(".concat(u[0],"px, ").concat(u[1],"px) rotate(").concat(g,"rad) scaleY(").concat(a,")")}})]},dragStart:function(e,t){var n=t.datas,r=t.parentEvent,i=t.parentGesto,a=e.state,o=a.gestos,c=a.style;if(o.draggable)return!1;o.draggable=i||e.targetGesto,n.datas={},n.left=parseFloat(c.left||"")||0,n.top=parseFloat(c.top||"")||0,n.bottom=parseFloat(c.bottom||"")||0,n.right=parseFloat(c.right||"")||0,n.startValue=[0,0],tc(e,t),tv(e,t,"translate"),DF(e,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var u=ae(e,t,Q({set:function(h){n.startValue=h}},Jm(e,t))),d=r||Nt(e,"onDragStart",u);return d!==!1?(n.isDrag=!0,e.state.dragInfo={startRect:e.getRect(),dist:[0,0]}):(o.draggable=null,n.isPinch=!1),n.isDrag?u:!1},drag:function(e,t){if(t){Qm(e,t,"translate");var n=t.datas,r=t.parentEvent,i=t.parentFlag,a=t.isPinch,o=t.deltaOffset,c=t.useSnap,u=t.isRequest,d=t.isGroup,h=t.parentThrottleDrag,g=t.distX,m=t.distY,b=n.isDrag,S=n.prevDist,w=n.prevBeforeDist,E=n.startValue;if(b){o&&(g+=o[0],m+=o[1]);var T=e.props,D=T.parentMoveable,I=d?0:T.throttleDrag||h||0,M=r?0:T.throttleDragRotate||0,z=0,P=!1,A=!1,C=!1,k=!1;if(!r&&M>0&&(g||m)){var j=T.startDragRotate||0,L=Jt(j+Sn([0,0],[g,m])*180/Math.PI,M)-j,B=m*Math.abs(Math.cos((L-90)/180*Math.PI)),V=g*Math.abs(Math.cos(L/180*Math.PI)),K=Mi([V,B]);z=L*Math.PI/180,g=K*Math.cos(z),m=K*Math.sin(z)}if(!a&&!r&&!i){var Y=J(sF(e,g,m,M,!c&&u||o,n),2),H=Y[0],$=Y[1];P=H.isSnap,A=H.isBound,C=$.isSnap,k=$.isBound;var et=H.offset,at=$.offset;g+=et,m+=at}var X=Te(uN({datas:n,distX:g,distY:m}),E),U=Te(_8({datas:n,distX:g,distY:m}),E);zC(U,Ir),zC(X,Ir),M||(!P&&!A&&(U[0]=Jt(U[0],I),X[0]=Jt(X[0],I)),!C&&!k&&(U[1]=Jt(U[1],I),X[1]=Jt(X[1],I)));var Z=Ut(X,E),rt=Ut(U,E),st=Ut(rt,S),ht=Ut(Z,w);n.prevDist=rt,n.prevBeforeDist=Z,n.passDelta=st,n.passDist=rt;var dt=n.left+Z[0],bt=n.top+Z[1],At=n.right-Z[0],Dt=n.bottom-Z[1],Kt=Zm(n,"translate(".concat(U[0],"px, ").concat(U[1],"px)"),"translate(".concat(rt[0],"px, ").concat(rt[1],"px)"));if(d_(t,Kt),e.state.dragInfo.dist=r?[0,0]:rt,!(!r&&!D&&st.every(function(qt){return!qt})&&ht.some(function(qt){return!qt}))){var Et=e.state,Rt=Et.width,le=Et.height,Vt=ae(e,t,Q({transform:Kt,dist:rt,delta:st,translate:U,beforeDist:Z,beforeDelta:ht,beforeTranslate:X,left:dt,top:bt,right:At,bottom:Dt,width:Rt,height:le,isPinch:a},Dr({transform:Kt},t)));return!r&&Nt(e,"onDrag",Vt),Vt}}}},dragAfter:function(e,t){var n=t.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(e,Q(Q({},t),{deltaOffset:r}))):!1},dragEnd:function(e,t){var n=t.parentEvent,r=t.datas;if(e.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=ci(e,t,{});return!n&&Nt(e,"onDragEnd",i),i}},dragGroupStart:function(e,t){var n,r,i=t.datas,a=t.clientX,o=t.clientY,c=this.dragStart(e,t);if(!c)return!1;var u=a1(e,this,"dragStart",[a||0,o||0],t,!1,"draggable"),d=u.childEvents,h=u.eventParams,g=Q(Q({},c),{targets:e.props.targets,events:h}),m=Nt(e,"onDragGroupStart",g);i.isDrag=m!==!1;var b=(r=(n=d[0])===null||n===void 0?void 0:n.datas.startValue)!==null&&r!==void 0?r:[0,0];return i.throttleOffset=[b[0]%1,b[1]%1],i.isDrag?c:!1},dragGroup:function(e,t){var n=t.datas;if(n.isDrag){var r=this.drag(e,Q(Q({},t),{parentThrottleDrag:e.props.throttleDrag})),i=t.datas.passDelta,a=a1(e,this,"drag",i,t,!1,"draggable").eventParams;if(r){var o=Q({targets:e.props.targets,events:a},r);return Nt(e,"onDragGroup",o),o}}},dragGroupEnd:function(e,t){var n=t.isDrag,r=t.datas;if(r.isDrag){this.dragEnd(e,t);var i=a1(e,this,"dragEnd",[0,0],t,!1,"draggable").eventParams;return Nt(e,"onDragGroupEnd",ci(e,t,{targets:e.props.targets,events:i})),n}},request:function(e){var t={},n=e.getRect(),r=0,i=0,a=!1;return{isControl:!1,requestStart:function(o){return a=o.useSnap,{datas:t,useSnap:a}},request:function(o){return"x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?i=o.y-n.top:"deltaY"in o&&(i+=o.deltaY),{datas:t,distX:r,distY:i,useSnap:a}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:a}}}},unset:function(e){e.state.gestos.draggable=null,e.state.dragInfo=null}};function IN(e,t){var n=Un(e,t),r=[0,0];return{fixedPosition:n,fixedDirection:t,fixedOffset:r}}function fF(e,t){var n=e.allMatrix,r=e.is3d,i=e.width,a=e.height,o=r?4:3,c=[i/2*(1+t[0]),a/2*(1+t[1])],u=en(n,c,o),d=[0,0];return{fixedPosition:u,fixedDirection:t,fixedOffset:d}}function kN(e,t){var n=e.allMatrix,r=e.is3d,i=e.width,a=e.height,o=r?4:3,c=D8(t,i,a),u=en(n,t,o),d=[i?0:t[0],a?0:t[1]];return{fixedPosition:u,fixedDirection:c,fixedOffset:d}}var s2=E_("resizable"),_b={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:yN("resizable"),dragControlCondition:s2,viewClassName:w_("resizable"),dragControlStart:function(e,t){var n,r=t.inputEvent,i=t.isPinch,a=t.isGroup,o=t.parentDirection,c=t.parentGesto,u=t.datas,d=t.parentFixedDirection,h=t.parentEvent,g=qN(o,i,r,u),m=e.state,b=m.target,S=m.width,w=m.height,E=m.gestos;if(!g||!b||E.resizable)return!1;E.resizable=c||e.controlGesto,!i&&tc(e,t),u.datas={},u.direction=g,u.startOffsetWidth=S,u.startOffsetHeight=w,u.prevWidth=0,u.prevHeight=0,u.minSize=[0,0],u.startWidth=m.inlineCSSWidth||m.cssWidth,u.startHeight=m.inlineCSSHeight||m.cssHeight,u.maxSize=[1/0,1/0],a||(u.minSize=[m.minOffsetWidth,m.minOffsetHeight],u.maxSize=[m.maxOffsetWidth,m.maxOffsetHeight]);var T=e.props.transformOrigin||"% %";u.transformOrigin=Yr(T)?T.split(" "):T,u.startOffsetMatrix=m.offsetMatrix,u.startTransformOrigin=m.transformOrigin,u.isWidth=(n=t?.parentIsWidth)!==null&&n!==void 0?n:!g[0]&&!g[1]||g[0]||!g[1];function D(k){u.ratio=k&&isFinite(k)?k:0}u.startPositions=Oi(e.state);function I(k){var j=IN(u.startPositions,k);u.fixedDirection=j.fixedDirection,u.fixedPosition=j.fixedPosition,u.fixedOffset=j.fixedOffset}function M(k){var j=kN(e.state,k);u.fixedDirection=j.fixedDirection,u.fixedPosition=j.fixedPosition,u.fixedOffset=j.fixedOffset}function z(k){u.minSize=[Ue("".concat(k[0]),0)||0,Ue("".concat(k[1]),0)||0]}function P(k){var j=[k[0]||1/0,k[1]||1/0];(!bu(j[0])||isFinite(j[0]))&&(j[0]=Ue("".concat(j[0]),0)||1/0),(!bu(j[1])||isFinite(j[1]))&&(j[1]=Ue("".concat(j[1]),0)||1/0),u.maxSize=j}D(S/w),I(d||[-g[0],-g[1]]),u.setFixedDirection=I,u.setFixedPosition=M,u.setMin=z,u.setMax=P;var A=ae(e,t,{direction:g,startRatio:u.ratio,set:function(k){var j=J(k,2),L=j[0],B=j[1];u.startWidth=L,u.startHeight=B},setMin:z,setMax:P,setRatio:D,setFixedDirection:I,setFixedPosition:M,setOrigin:function(k){u.transformOrigin=k},dragStart:Ar.dragStart(e,new _u().dragStart([0,0],t))}),C=h||Nt(e,"onResizeStart",A);return u.startFixedDirection=u.fixedDirection,u.startFixedPosition=u.fixedPosition,C!==!1&&(u.isResize=!0,e.state.snapRenderInfo={request:t.isRequest,direction:g}),u.isResize?A:!1},dragControl:function(e,t){var n,r=t.datas,i=t.parentFlag,a=t.isPinch,o=t.parentKeepRatio,c=t.dragClient,u=t.parentDist,d=t.useSnap,h=t.isRequest,g=t.isGroup,m=t.parentEvent,b=t.resolveMatrix,S=r.isResize,w=r.transformOrigin,E=r.startWidth,T=r.startHeight,D=r.prevWidth,I=r.prevHeight,M=r.minSize,z=r.maxSize,P=r.ratio,A=r.startOffsetWidth,C=r.startOffsetHeight,k=r.isWidth;if(!S)return;if(b){var j=e.state.is3d,L=r.startOffsetMatrix,B=r.startTransformOrigin,V=j?4:3,K=Gd(om(t)),Y=Math.sqrt(K.length);V!==Y&&(K=Zi(K,Y,V));var H=_h(L,K,B,V),$=ec(H,A,C,V);r.startPositions=$,r.nextTargetMatrix=K,r.nextAllMatrix=H}var et=$l(e.props,"resizable"),at=et.resizeFormat,X=et.throttleResize,U=X===void 0?i?0:1:X,Z=et.parentMoveable,rt=et.keepRatioFinally,st=r.direction,ht=st,dt=0,bt=0;!st[0]&&!st[1]&&(ht=[1,1]);var At=P&&(o??et.keepRatio)||!1;function Dt(){var ue=r.fixedDirection,Ie=KN(ht,At,r,t);dt=Ie.distWidth,bt=Ie.distHeight;var Wn=ht[0]-ue[0]||At?Math.max(A+dt,Ir):A,or=ht[1]-ue[1]||At?Math.max(C+bt,Ir):C;return At&&A&&C&&(k?or=Wn/P:Wn=or*P),[Wn,or]}var Kt=J(Dt(),2),Et=Kt[0],Rt=Kt[1];m||(r.setFixedDirection(r.fixedDirection),Nt(e,"onBeforeResize",ae(e,t,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(ue){var Ie;return r.setFixedDirection(ue),Ie=J(Dt(),2),Et=Ie[0],Rt=Ie[1],[Et,Rt]},setFixedPosition:function(ue){var Ie;return r.setFixedPosition(ue),Ie=J(Dt(),2),Et=Ie[0],Rt=Ie[1],[Et,Rt]},boundingWidth:Et,boundingHeight:Rt,setSize:function(ue){var Ie;Ie=J(ue,2),Et=Ie[0],Rt=Ie[1]}},!0)));var le=c;c||(!i&&a?le=M8(e,[0,0]):le=r.fixedPosition);var Vt=[0,0];a||(Vt=CF(e,Et,Rt,st,le,!d&&h,r)),u&&(!u[0]&&(Vt[0]=0),!u[1]&&(Vt[1]=0));function qt(){var ue;at&&(ue=J(at([Et,Rt]),2),Et=ue[0],Rt=ue[1]),Et=Jt(Et,U),Rt=Jt(Rt,U)}if(At){ht[0]&&ht[1]&&Vt[0]&&Vt[1]&&(xt(Vt[0])>xt(Vt[1])?Vt[1]=0:Vt[0]=0);var Gt=!Vt[0]&&!Vt[1];Gt&&qt(),ht[0]&&!ht[1]||Vt[0]&&!Vt[1]||Gt&&k?(Et+=Vt[0],Rt=Et/P):(!ht[0]&&ht[1]||!Vt[0]&&Vt[1]||Gt&&!k)&&(Rt+=Vt[1],Et=Rt*P)}else Et+=Vt[0],Rt+=Vt[1],Et=Math.max(0,Et),Rt=Math.max(0,Rt);n=J(Sk([Et,Rt],M,z,At?P:!1),2),Et=n[0],Rt=n[1],qt(),At&&(g||rt)&&(k?Rt=Et/P:Et=Rt*P),dt=Et-A,bt=Rt-C;var ce=[dt-D,bt-I];r.prevWidth=dt,r.prevHeight=bt;var be=N8(e,Et,Rt,le,w,r);if(!(!Z&&ce.every(function(ue){return!ue})&&be.every(function(ue){return!ue}))){var Ot=Ar.drag(e,xh(t,e.state,be,!!a,!1,"draggable")),Lt=Ot.transform,Ne=E+dt,Qe=T+bt,xe=ae(e,t,Q({width:Ne,height:Qe,offsetWidth:Math.round(Et),offsetHeight:Math.round(Rt),startRatio:P,boundingWidth:Et,boundingHeight:Rt,direction:st,dist:[dt,bt],delta:ce,isPinch:!!a,drag:Ot},$N({style:{width:"".concat(Ne,"px"),height:"".concat(Qe,"px")},transform:Lt},Ot,t)));return!m&&Nt(e,"onResize",xe),xe}},dragControlAfter:function(e,t){var n=t.datas,r=n.isResize,i=n.startOffsetWidth,a=n.startOffsetHeight,o=n.prevWidth,c=n.prevHeight;if(!(!r||e.props.checkResizableError===!1)){var u=e.state,d=u.width,h=u.height,g=d-(i+o),m=h-(a+c),b=xt(g)>3,S=xt(m)>3;if(b&&(n.startWidth+=g,n.startOffsetWidth+=g,n.prevWidth+=g),S&&(n.startHeight+=m,n.startOffsetHeight+=m,n.prevHeight+=m),b||S)return this.dragControl(e,t)}},dragControlEnd:function(e,t){var n=t.datas,r=t.parentEvent;if(n.isResize){n.isResize=!1;var i=ci(e,t,{});return!r&&Nt(e,"onResizeEnd",i),i}},dragGroupControlCondition:s2,dragGroupControlStart:function(e,t){var n=t.datas,r=this.dragControlStart(e,Q(Q({},t),{isGroup:!0}));if(!r)return!1;var i=Wi(e,"resizable",t),a=n.startOffsetWidth,o=n.startOffsetHeight;function c(){var b=n.minSize;i.forEach(function(S){var w=S.datas,E=w.minSize,T=w.startOffsetWidth,D=w.startOffsetHeight,I=a*(T?E[0]/T:0),M=o*(D?E[1]/D:0);b[0]=Math.max(b[0],I),b[1]=Math.max(b[1],M)})}function u(){var b=n.maxSize;i.forEach(function(S){var w=S.datas,E=w.maxSize,T=w.startOffsetWidth,D=w.startOffsetHeight,I=a*(T?E[0]/T:0),M=o*(D?E[1]/D:0);b[0]=Math.min(b[0],I),b[1]=Math.min(b[1],M)})}var d=ys(e,this,"dragControlStart",t,function(b,S){return lm(e,b,n,S)});c(),u();var h=function(b){r.setFixedDirection(b),d.forEach(function(S,w){S.setFixedDirection(b),lm(e,S.moveable,n,i[w])})};n.setFixedDirection=h;var g=Q(Q({},r),{targets:e.props.targets,events:d.map(function(b){return Q(Q({},b),{setMin:function(S){b.setMin(S),c()},setMax:function(S){b.setMax(S),u()}})}),setFixedDirection:h,setMin:function(b){r.setMin(b),c()},setMax:function(b){r.setMax(b),u()}}),m=Nt(e,"onResizeGroupStart",g);return n.isResize=m!==!1,n.isResize?r:!1},dragGroupControl:function(e,t){var n=t.datas;if(n.isResize){var r=$l(e.props,"resizable");av(e,"onBeforeResize",function(b){Nt(e,"onBeforeResizeGroup",ae(e,t,Q(Q({},b),{targets:r.targets}),!0))});var i=this.dragControl(e,Q(Q({},t),{isGroup:!0}));if(i){var a=i.boundingWidth,o=i.boundingHeight,c=i.dist,u=r.keepRatio,d=[a/(a-c[0]),o/(o-c[1])],h=n.fixedPosition,g=ys(e,this,"dragControl",t,function(b,S){var w=J(vr(vh(e.rotation/180*Math.PI,3),[S.datas.originalX*d[0],S.datas.originalY*d[1],1],3),2),E=w[0],T=w[1];return Q(Q({},S),{parentDist:null,parentScale:d,dragClient:Te(h,[E,T]),parentKeepRatio:u})}),m=Q({targets:r.targets,events:g},i);return Nt(e,"onResizeGroup",m),m}}},dragGroupControlEnd:function(e,t){var n=t.isDrag,r=t.datas;if(r.isResize){this.dragControlEnd(e,t);var i=ys(e,this,"dragControlEnd",t),a=ci(e,t,{targets:e.props.targets,events:i});return Nt(e,"onResizeGroupEnd",a),n}},request:function(e){var t={},n=0,r=0,i=!1,a=e.getRect();return{isControl:!0,requestStart:function(o){var c;return i=o.useSnap,{datas:t,parentDirection:o.direction||[1,1],parentIsWidth:(c=o?.horizontal)!==null&&c!==void 0?c:!0,useSnap:i}},request:function(o){return"offsetWidth"in o?n=o.offsetWidth-a.offsetWidth:"deltaWidth"in o&&(n+=o.deltaWidth),"offsetHeight"in o?r=o.offsetHeight-a.offsetHeight:"deltaHeight"in o&&(r+=o.deltaHeight),{datas:t,parentDist:[n,r],parentKeepRatio:o.keepRatio,useSnap:i}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:i}}}},unset:function(e){e.state.gestos.resizable=null}};function s1(e,t,n,r,i){var a=e.props.groupable,o=e.state,c=o.is3d?4:3,u=t.origin,d=en(e.state.rootMatrix,Ut([u[0],u[1]],a?[0,0]:[o.left,o.top]),c),h=Te([i.left,i.top],d);t.startAbsoluteOrigin=h,t.prevDeg=Sn(h,[n,r])/Math.PI*180,t.defaultDeg=t.prevDeg,t.prevSnapDeg=0,t.loop=0,t.startDist=vs(h,[n,r])}function zg(e,t,n){var r=n.defaultDeg,i=n.prevDeg,a=i%360,o=Math.floor(i/360);a<0&&(a+=360),a>e&&a>270&&e<90?++o:a<e&&a<90&&e>270&&--o;var c=t*(o*360+e-r);return n.prevDeg=r+c,c}function o1(e,t,n,r){return zg(Sn(r.startAbsoluteOrigin,[e,t])/Math.PI*180,n,r)}function l1(e,t,n,r,i,a){var o=e.props.throttleRotate,c=o===void 0?0:o,u=n.prevSnapDeg,d=0,h=!1;if(a){var g=AF(e,t,r,i+r);h=g.isSnap,d=i+g.dist}h||(d=Jt(i+r,c));var m=d-i;return n.prevSnapDeg=m,[m-u,m,d]}function NN(e,t,n){var r=J(t,4),i=r[0],a=r[1],o=r[2],c=r[3];if(e==="none")return[];if(Pn(e))return e.map(function(E){return NN(E,[i,a,o,c],n)[0]});var u=J((e||"top").split("-"),2),d=u[0],h=u[1],g=[i,a];d==="left"?g=[o,i]:d==="right"?g=[a,c]:d==="bottom"&&(g=[c,o]);var m=[(g[0][0]+g[1][0])/2,(g[0][1]+g[1][1])/2],b=FN(g,n);if(h){var S=h==="top"||h==="left",w=d==="bottom"||d==="left";m=g[S&&!w||!S&&w?0:1]}return[[m,b]]}function Sb(e,t){if(t.isRequest)return t.requestAble==="rotatable";var n=t.inputEvent.target;if(Bn(n,jt("rotation-control"))||e.props.rotateAroundControls&&Bn(n,jt("around-control"))||Bn(n,jt("control"))&&Bn(n,jt("rotatable")))return!0;var r=e.props.rotationTarget;return r?T_(r,!0).some(function(i){return i?n===i||n.contains(i):!1}):!1}var dF=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,hF={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[dF],viewClassName:function(e){return e.isDragging("rotatable")?jt("view-rotation-dragging"):""},render:function(e,t){var n=$l(e.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,a=n.zoom,o=n.renderDirections,c=n.rotateAroundControls,u=n.resolveAblesWithRotatable,d=e.getState(),h=d.renderPoses,g=d.direction;if(!r)return null;var m=NN(i,h,g),b=[];if(m.forEach(function(T,D){var I=J(T,2),M=I[0],z=I[1];b.push(t.createElement("div",{key:"rotation".concat(D),className:jt("rotation"),style:{transform:"translate(-50%) translate(".concat(M[0],"px, ").concat(M[1],"px) rotate(").concat(z,"rad)")}},t.createElement("div",{className:jt("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),t.createElement("div",{className:jt("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),o){var S=Ts(u||{}),w={};S.forEach(function(T){u[T].forEach(function(D){w[D]=T})});var E=[];Pn(o)&&(E=o.map(function(T){var D=w[T];return{data:D?{resolve:D}:{},classNames:D?["move"]:[],dir:T}})),b.push.apply(b,wt([],J(gN(e,"rotatable",E,t)),!1))}return c&&b.push.apply(b,wt([],J(xN(e,t)),!1)),b},dragControlCondition:Sb,dragControlStart:function(e,t){var n,r,i=t.datas,a=t.clientX,o=t.clientY,c=t.parentRotate,u=t.parentFlag,d=t.isPinch,h=t.isRequest,g=e.state,m=g.target,b=g.left,S=g.top,w=g.direction,E=g.beforeDirection,T=g.targetTransform,D=g.moveableClientRect,I=g.offsetMatrix,M=g.targetMatrix,z=g.allMatrix,P=g.width,A=g.height;if(!h&&!m)return!1;var C=e.getRect();i.rect=C,i.transform=T,i.left=b,i.top=S;var k=function(ht){var dt=kN(e.state,ht);i.fixedDirection=dt.fixedDirection,i.fixedOffset=dt.fixedOffset,i.fixedPosition=dt.fixedPosition,U&&U.setFixedPosition(ht)},j=function(ht){var dt=fF(e.state,ht);i.fixedDirection=dt.fixedDirection,i.fixedOffset=dt.fixedOffset,i.fixedPosition=dt.fixedPosition,U&&U.setFixedDirection(ht)},L=a,B=o;if(h||d||u){var V=c||0;i.beforeInfo={origin:C.beforeOrigin,prevDeg:V,defaultDeg:V,prevSnapDeg:0,startDist:0},i.afterInfo=Q(Q({},i.beforeInfo),{origin:C.origin}),i.absoluteInfo=Q(Q({},i.beforeInfo),{origin:C.origin,startValue:V})}else{var K=(r=t.inputEvent)===null||r===void 0?void 0:r.target;if(K){var Y=K.getAttribute("data-direction")||"",H=b8[Y];if(H){i.isControl=!0,i.isAroundControl=Bn(K,jt("around-control")),i.controlDirection=H;var $=K.getAttribute("data-resolve");$&&(i.resolveAble=$);var et=FF(g.rootMatrix,g.renderPoses,D);n=J(Un(et,H),2),L=n[0],B=n[1]}}i.beforeInfo={origin:C.beforeOrigin},i.afterInfo={origin:C.origin},i.absoluteInfo={origin:C.origin,startValue:C.rotation};var at=k;k=function(ht){var dt=g.is3d?4:3,bt=J(Te(Xk(M,dt),ht),2),At=bt[0],Dt=bt[1],Kt=vr(I,Gl([At,Dt],dt)),Et=vr(z,Gl([ht[0],ht[1]],dt));at(ht);var Rt=g.posDelta;i.beforeInfo.origin=Ut(Kt,Rt),i.afterInfo.origin=Ut(Et,Rt),i.absoluteInfo.origin=Ut(Et,Rt),s1(e,i.beforeInfo,L,B,D),s1(e,i.afterInfo,L,B,D),s1(e,i.absoluteInfo,L,B,D)},j=function(ht){var dt=Un([[0,0],[P,0],[0,A],[P,A]],ht);k(dt)}}i.startClientX=L,i.startClientY=B,i.direction=w,i.beforeDirection=E,i.startValue=0,i.datas={},tv(e,t,"rotate");var X=!1,U=!1;if(i.isControl&&i.resolveAble){var Z=i.resolveAble;Z==="resizable"&&(U=_b.dragControlStart(e,Q(Q({},new _u("resizable").dragStart([0,0],t)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}U||(X=Ar.dragStart(e,new _u().dragStart([0,0],t))),k(GF(e));var rt=ae(e,t,Q(Q({set:function(ht){i.startValue=ht*Math.PI/180},setFixedDirection:j,setFixedPosition:k},Jm(e,t)),{dragStart:X,resizeStart:U})),st=Nt(e,"onRotateStart",rt);return i.isRotate=st!==!1,g.snapRenderInfo={request:t.isRequest},i.isRotate?rt:!1},dragControl:function(e,t){var n,r,i,a=t.datas,o=t.clientDistX,c=t.clientDistY,u=t.parentRotate,d=t.parentFlag,h=t.isPinch,g=t.groupDelta,m=t.resolveMatrix,b=a.beforeDirection,S=a.beforeInfo,w=a.afterInfo,E=a.absoluteInfo,T=a.isRotate,D=a.startValue,I=a.rect,M=a.startClientX,z=a.startClientY;if(T){Qm(e,t,"rotate");var P=x8(t),A=b*P,C=e.props.parentMoveable,k=0,j,L,B=0,V,K,Y=0,H,$,et=180/Math.PI*D,at=E.startValue,X=!1,U=M+o,Z=z+c;if(!d&&"parentDist"in t){var rt=t.parentDist;j=rt,V=rt,H=rt}else h||d?(j=zg(u,b,S),V=zg(u,A,w),H=zg(u,A,E)):(j=o1(U,Z,b,S),V=o1(U,Z,A,w),H=o1(U,Z,A,E),X=!0);if(L=et+j,K=et+V,$=at+H,Nt(e,"onBeforeRotate",ae(e,t,{beforeRotation:L,rotation:K,absoluteRotation:$,setRotation:function(le){V=le-et,j=V,H=V}},!0)),n=J(l1(e,I,S,j,et,X),3),k=n[0],j=n[1],L=n[2],r=J(l1(e,I,w,V,et,X),3),B=r[0],V=r[1],K=r[2],i=J(l1(e,I,E,H,at,X),3),Y=i[0],H=i[1],$=i[2],!(!Y&&!B&&!k&&!C&&!m)){var st=Zm(a,"rotate(".concat(K,"deg)"),"rotate(".concat(V,"deg)"));m&&(a.fixedPosition=h_(e,a.targetAllTransform,a.fixedDirection,a.fixedOffset,a));var ht=k8(e,V,a),dt=Ut(Te(g||[0,0],ht),a.prevInverseDist||[0,0]);a.prevInverseDist=ht,a.requestValue=null;var bt=dN(e,st,dt,h,t),At=bt,Dt=vs([U,Z],E.startAbsoluteOrigin)-E.startDist,Kt=void 0;if(a.resolveAble==="resizable"){var Et=_b.dragControl(e,Q(Q({},xh(t,e.state,[t.deltaX,t.deltaY],!!h,!1,"resizable")),{resolveMatrix:!0,parentDistance:Dt}));Et&&(Kt=Et,At=$N(At,Et,t))}var Rt=ae(e,t,Q(Q({delta:B,dist:V,rotate:K,rotation:K,beforeDist:j,beforeDelta:k,beforeRotate:L,beforeRotation:L,absoluteDist:H,absoluteDelta:Y,absoluteRotate:$,absoluteRotation:$,isPinch:!!h,resize:Kt},bt),At));return Nt(e,"onRotate",Rt),Rt}}},dragControlEnd:function(e,t){var n=t.datas;if(n.isRotate){n.isRotate=!1;var r=ci(e,t,{});return Nt(e,"onRotateEnd",r),r}},dragGroupControlCondition:Sb,dragGroupControlStart:function(e,t){var n=t.datas,r=e.state,i=r.left,a=r.top,o=r.beforeOrigin,c=this.dragControlStart(e,t);if(!c)return!1;c.set(n.beforeDirection*e.rotation);var u=ys(e,this,"dragControlStart",t,function(g,m){var b=g.state,S=b.left,w=b.top,E=b.beforeOrigin,T=Te(Ut([S,w],[i,a]),Ut(E,o));return m.datas.startGroupClient=T,m.datas.groupClient=T,Q(Q({},m),{parentRotate:0})}),d=Q(Q({},c),{targets:e.props.targets,events:u}),h=Nt(e,"onRotateGroupStart",d);return n.isRotate=h!==!1,n.isRotate?c:!1},dragGroupControl:function(e,t){var n=t.datas;if(n.isRotate){av(e,"onBeforeRotate",function(d){Nt(e,"onBeforeRotateGroup",ae(e,t,Q(Q({},d),{targets:e.props.targets}),!0))});var r=this.dragControl(e,t);if(r){var i=n.beforeDirection,a=r.beforeDist,o=a/180*Math.PI,c=ys(e,this,"dragControl",t,function(d,h){var g=h.datas.startGroupClient,m=J(h.datas.groupClient,2),b=m[0],S=m[1],w=J(mh(g,o*i),2),E=w[0],T=w[1],D=[E-b,T-S];return h.datas.groupClient=[E,T],Q(Q({},h),{parentRotate:a,groupDelta:D})});e.rotation=i*r.beforeRotation;var u=Q({targets:e.props.targets,events:c,set:function(d){e.rotation=d},setGroupRotation:function(d){e.rotation=d}},r);return Nt(e,"onRotateGroup",u),u}}},dragGroupControlEnd:function(e,t){var n=t.isDrag,r=t.datas;if(r.isRotate){this.dragControlEnd(e,t);var i=ys(e,this,"dragControlEnd",t),a=ci(e,t,{targets:e.props.targets,events:i});return Nt(e,"onRotateGroupEnd",a),n}},request:function(e){var t={},n=0,r=e.getRotation();return{isControl:!0,requestStart:function(){return{datas:t}},request:function(i){return"deltaRotate"in i?n+=i.deltaRotate:"rotate"in i&&(n=i.rotate-r),{datas:t,parentDist:n}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function pF(e,t){var n,r=e.direction,i=e.classNames,a=e.size,o=e.pos,c=e.zoom,u=e.key,d=r==="horizontal",h=d?"Y":"X";return t.createElement("div",{key:u,className:i.join(" "),style:(n={},n[d?"width":"height"]="".concat(a),n.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(h,"(-50%) scale").concat(h,"(").concat(c,")"),n)})}function b_(e,t){return pF(Q(Q({},e),{classNames:wt([jt("line","guideline",e.direction)],J(e.classNames),!1).filter(function(n){return n}),size:e.size||"".concat(e.sizeValue,"px"),pos:e.pos||e.posValue.map(function(n){return"".concat(Jt(n,.1),"px")})}),t)}function o2(e,t,n,r,i,a,o,c){var u=e.props.zoom;return n.map(function(d,h){var g=d.type,m=d.pos,b=[0,0];return b[o]=r,b[o?0:1]=-i+m,b_({key:"".concat(t,"TargetGuideline").concat(h),classNames:[jt("target","bold",g)],posValue:b,sizeValue:a,zoom:u,direction:t},c)})}function l2(e,t,n,r,i,a){var o=e.props,c=o.zoom,u=o.isDisplayInnerSnapDigit,d=t==="horizontal"?Bo:Uo,h=i[d.start],g=i[d.end];return n.filter(function(m){var b=m.hide,S=m.elementRect;if(b)return!1;if(u&&S){var w=S.rect;if(w[d.start]<=h&&g<=w[d.end])return!1}return!0}).map(function(m,b){var S=m.pos,w=m.size,E=m.element,T=m.className,D=[-r[0]+S[0],-r[1]+S[1]];return b_({key:"".concat(t,"-default-guideline-").concat(b),classNames:E?[jt("bold"),T]:[jt("normal"),T],direction:t,posValue:D,sizeValue:w,zoom:c},a)})}function sd(e,t,n,r,i,a,o,c){var u,d=e.props,h=d.snapDigit,g=h===void 0?0:h,m=d.isDisplaySnapDigit,b=m===void 0?!0:m,S=d.snapDistFormat,w=S===void 0?function(z,P){return z}:S,E=d.zoom,T=t==="horizontal"?"X":"Y",D=t==="vertical"?"height":"width",I=Math.abs(i),M=b?parseFloat(I.toFixed(g)):0;return c.createElement("div",{key:"".concat(t,"-").concat(n,"-guideline-").concat(r),className:jt("guideline-group",t),style:(u={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},u[D]="".concat(I,"px"),u)},b_({direction:t,classNames:[jt(n),o],size:"100%",posValue:[0,0],sizeValue:I,zoom:E},c),c.createElement("div",{className:jt("size-value","gap"),style:{transform:"translate".concat(T,"(-50%) scale(").concat(E,")")}},M>0?w(M,t):""))}function gF(e,t,n,r){var i=e==="vertical"?0:1,a=e==="vertical"?1:0,o=i?Bo:Uo,c=n[o.start],u=n[o.end];return YN(t,function(d){return d.pos[i]}).map(function(d){var h=[],g=[],m=[];return d.forEach(function(b){var S,w,E=b.element,T=b.elementRect.rect;if(T[o.end]<c)h.push(b);else if(u<T[o.start])g.push(b);else if(T[o.start]<=c&&u<=T[o.end]&&r){var D=b.pos,I={element:E,rect:Q(Q({},T),(S={},S[o.end]=T[o.start],S))},M={element:E,rect:Q(Q({},T),(w={},w[o.start]=T[o.end],w))},z=[0,0],P=[0,0];z[i]=D[i],z[a]=D[a],P[i]=D[i],P[a]=D[a]+b.size,h.push({type:e,pos:z,size:0,elementRect:I,direction:"",elementDirection:"end"}),g.push({type:e,pos:P,size:0,elementRect:M,direction:"",elementDirection:"start"})}}),h.sort(function(b,S){return S.pos[a]-b.pos[a]}),g.sort(function(b,S){return b.pos[a]-S.pos[a]}),{total:d,start:h,end:g,inner:m}})}function mF(e,t,n,r,i){var a=e.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(c){var u=t.filter(function(E){return E.type===c}),d=c==="vertical"?1:0,h=d?0:1,g=gF(c,u,r,a),m=d?Uo:Bo,b=d?Bo:Uo,S=r[m.start],w=r[m.end];g.forEach(function(E){var T=E.total,D=E.start,I=E.end,M=E.inner,z=n[h]+T[0].pos[h]-r[b.start],P=r;D.forEach(function(A){var C=A.elementRect.rect,k=P[m.start]-C[m.end];if(k>0){var j=[0,0];j[d]=n[d]+P[m.start]-S-k,j[h]=z,o.push(sd(e,c,"dashed",o.length,k,j,A.className,i))}P=C}),P=r,I.forEach(function(A){var C=A.elementRect.rect,k=C[m.start]-P[m.end];if(k>0){var j=[0,0];j[d]=n[d]+P[m.end]-S,j[h]=z,o.push(sd(e,c,"dashed",o.length,k,j,A.className,i))}P=C}),M.forEach(function(A){var C=A.elementRect.rect,k=S-C[m.start],j=C[m.end]-w,L=[0,0],B=[0,0];L[d]=n[d]-k,L[h]=z,B[d]=n[d]+w-S,B[h]=z,o.push(sd(e,c,"dashed",o.length,k,L,A.className,i)),o.push(sd(e,c,"dashed",o.length,j,B,A.className,i))})})}),o}function vF(e,t,n,r,i){var a=[];return["horizontal","vertical"].forEach(function(o){var c=t.filter(function(E){return E.type===o}).slice(0,1),u=o==="vertical"?0:1,d=u?0:1,h=u?Uo:Bo,g=u?Bo:Uo,m=r[h.start],b=r[h.end],S=r[g.start],w=r[g.end];c.forEach(function(E){var T=E.gap,D=E.gapRects,I=Math.max.apply(Math,wt([S],J(D.map(function(P){var A=P.rect;return A[g.start]})),!1)),M=Math.min.apply(Math,wt([w],J(D.map(function(P){var A=P.rect;return A[g.end]})),!1)),z=(I+M)/2;I===M||z===(S+w)/2||D.forEach(function(P){var A=P.rect,C=P.className,k=[n[0],n[1]];if(A[h.end]<m)k[u]+=A[h.end]-m;else if(b<A[h.start])k[u]+=A[h.start]-m-T;else return;k[d]+=z-S,a.push(sd(e,u?"vertical":"horizontal","gap",a.length,T,k,C,i))})})}),a}function wb(e){var t,n,r=e.state,i=r.containerClientRect,a=r.hasFixed,o=i.overflow,c=i.scrollHeight,u=i.scrollWidth,d=i.clientHeight,h=i.clientWidth,g=i.clientLeft,m=i.clientTop,b=e.props,S=b.snapGap,w=S===void 0?!0:S,E=b.verticalGuidelines,T=b.horizontalGuidelines,D=b.snapThreshold,I=D===void 0?5:D,M=b.maxSnapElementGuidelineDistance,z=M===void 0?1/0:M,P=b.isDisplayGridGuidelines,A=Ii(Oi(e.state)),C=A.top,k=A.left,j=A.bottom,L=A.right,B={top:C,left:k,bottom:j,right:L,center:(k+L)/2,middle:(C+j)/2},V=_F(e),K=wt([],J(V),!1),Y=((n=(t=r.snapThresholdInfo)===null||t===void 0?void 0:t.multiples)!==null&&n!==void 0?n:[1,1]).map(function(at){return at*I});w&&K.push.apply(K,wt([],J(yF(e,B,Y)),!1));var H=Q({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(K.push.apply(K,wt([],J(xF(e,o?u:h,o?c:d,g,m,H,P)),!1)),a){var $=i.left,et=i.top;H.left+=$,H.top+=et,H.right+=$,H.bottom+=et}return K.push.apply(K,wt([],J(ON(T||!1,E||!1,o?u:h,o?c:d,g,m,H)),!1)),K=K.filter(function(at){var X=at.element,U=at.elementRect,Z=at.type;if(!X||!U)return!0;var rt=U.rect;return MN(B,rt,Z,z)}),K}function yF(e,t,n){var r=e.props,i=r.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,o=r.maxSnapElementGapDistance,c=o===void 0?1/0:o,u=e.state.elementRects,d=[];return[["vertical",Bo,Uo],["horizontal",Uo,Bo]].forEach(function(h){var g=J(h,3),m=g[0],b=g[1],S=g[2],w=t[b.start],E=t[b.end],T=t[b.center],D=t[S.start],I=t[S.end],M={left:n[0],top:n[1]};function z(C){var k=C.rect,j=M[b.start];return k[b.end]<w+j?w-k[b.end]:E-j<k[b.start]?k[b.start]-E:-1}var P=u.filter(function(C){var k=C.rect;return k[S.start]>I||k[S.end]<D?!1:z(C)>0}).sort(function(C,k){return z(C)-z(k)}),A=[];P.forEach(function(C){P.forEach(function(k){if(C!==k){var j=C.rect,L=k.rect,B=j[S.start],V=j[S.end],K=L[S.start],Y=L[S.end];B>Y||K>V||A.push([C,k])}})}),A.forEach(function(C){var k=J(C,2),j=k[0],L=k[1],B=j.rect,V=L.rect,K=B[b.start],Y=B[b.end],H=V[b.start],$=V[b.end],et=M[b.start],at=0,X=0,U=!1,Z=!1,rt=!1;if(Y<=w&&E<=H){if(Z=!0,at=(H-Y-(E-w))/2,X=Y+at+(E-w)/2,xt(X-T)>et)return}else if(Y<H&&$<w+et){if(U=!0,at=H-Y,X=$+at,xt(X-w)>et)return}else if(Y<H&&E-et<K){if(rt=!0,at=H-Y,X=K-at,xt(X-E)>et)return}else return;at&&MN(t,V,m,a)&&(at>c||d.push({type:m,pos:m==="vertical"?[X,0]:[0,X],element:L.element,size:0,className:L.className,isStart:U,isCenter:Z,isEnd:rt,gap:at,hide:!0,gapRects:[j,L],direction:"",elementDirection:""}))})}),d}function bF(e,t,n,r){var i,a,o=e.props,c=e.state,u=o.snapGridAll,d=o.snapGridWidth,h=d===void 0?0:d,g=o.snapGridHeight,m=g===void 0?0:g,b=c.snapRenderInfo,S=b&&(((i=b.direction)===null||i===void 0?void 0:i[0])||((a=b.direction)===null||a===void 0?void 0:a[1])),w=e.moveables;if(u&&w&&S&&(h||m)){if(c.snapThresholdInfo)return;c.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var E=e.getRect(),T=E.children,D=b.direction;if(T){var I=D.map(function(z,P){var A=P===0?{snapSize:h,posName:"left",sizeName:"width",clientOffset:r.left-t}:{snapSize:m,posName:"top",sizeName:"height",clientOffset:r.top-n},C=A.snapSize,k=A.posName,j=A.sizeName,L=A.clientOffset;if(!C)return{dir:z,multiple:1,snapSize:C,snapOffset:0};var B=E[j],V=E[k],K=wk(T.map(function(U){return[U[k]-V,U[j],B-U[j]-U[k]+V]})).filter(function(U){return U}).sort(function(U,Z){return U-Z}),Y=K[0],H=K.map(function(U){return Jt(U/Y,.1)*C}),$=1,et=Jt(B/Y,.1);for($=1;$<=10&&!H.every(function(U){return U*$%1===0});++$);var at=(-z+1)/2,X=rm(V-L,V-L+B,at,1-at);return{multiple:et*$,dir:z,snapSize:C,snapOffset:Math.round(X/C)}}),M=I.map(function(z){return z.multiple||1});c.snapThresholdInfo.multiples=M,c.snapThresholdInfo.offset=I.map(function(z){return z.snapOffset}),I.forEach(function(z,P){z.snapSize})}}else c.snapThresholdInfo=null}function xF(e,t,n,r,i,a,o){r===void 0&&(r=0),i===void 0&&(i=0);var c=e.props,u=e.state,d=c.snapGridWidth,h=d===void 0?0:d,g=c.snapGridHeight,m=g===void 0?0:g,b=[],S=a.left,w=a.top,E=[0,0];bF(e,r,i,a);var T=u.snapThresholdInfo,D=h,I=m;if(T&&(h*=T.multiples[0]||1,m*=T.multiples[1]||1,E=T.offset),m){for(var M=function(P){b.push({type:"horizontal",pos:[S,Jt(E[1]*I+P-i+w,.1)],className:jt("grid-guideline"),size:t,hide:!o,direction:"",grid:!0})},z=0;z<=n*2;z+=m)M(z);for(var z=-m;z>=-n;z-=m)M(z)}if(h){for(var M=function(A){b.push({type:"vertical",pos:[Jt(E[0]*D+A-r+S,.1),w],className:jt("grid-guideline"),size:n,hide:!o,direction:"",grid:!0})},z=0;z<=t*2;z+=h)M(z);for(var z=-h;z>=-t;z-=h)M(z)}return b}function MN(e,t,n,r){return n==="horizontal"?xt(e.right-t.left)<=r||xt(e.left-t.right)<=r||e.left<=t.right&&t.left<=e.right:n==="vertical"?xt(e.bottom-t.top)<=r||xt(e.top-t.bottom)<=r||e.top<=t.bottom&&t.top<=e.bottom:!0}function _F(e){var t=e.state,n=e.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return t.elementRects=[],[];var i=(t.elementRects||[]).filter(function(m){return!m.refresh}),a=r.map(function(m){return Qi(m)&&"element"in m?Q(Q({},m),{element:Ia(m.element,!0)}):{element:Ia(m,!0)}}).filter(function(m){return m.element}),o=MU(i.map(function(m){return m.element}),a.map(function(m){return m.element})),c=o.maintained,u=o.added,d=[];c.forEach(function(m){var b=J(m,2),S=b[0],w=b[1];d[w]=i[S]}),SF(e,u.map(function(m){return a[m]})).map(function(m,b){d[u[b]]=m}),t.elementRects=d;var h=g_(e.props.elementSnapDirections),g=[];return d.forEach(function(m){var b=m.element,S=m.top,w=S===void 0?h.top:S,E=m.left,T=E===void 0?h.left:E,D=m.right,I=D===void 0?h.right:D,M=m.bottom,z=M===void 0?h.bottom:M,P=m.center,A=P===void 0?h.center:P,C=m.middle,k=C===void 0?h.middle:C,j=m.className,L=m.rect,B=m_({top:w,right:I,left:T,bottom:z,center:A,middle:k},L),V=B.horizontal,K=B.vertical,Y=B.horizontalNames,H=B.verticalNames,$=L.top,et=L.left,at=L.right-et,X=L.bottom-$,U=[at,X];K.forEach(function(Z,rt){g.push({type:"vertical",element:b,pos:[Jt(Z,.1),$],size:X,sizes:U,className:j,elementRect:m,elementDirection:JC[H[rt]]||H[rt],direction:""})}),V.forEach(function(Z,rt){g.push({type:"horizontal",element:b,pos:[et,Jt(Z,.1)],size:at,sizes:U,className:j,elementRect:m,elementDirection:JC[Y[rt]]||Y[rt],direction:""})})}),g}function c2(e,t){return e?e.map(function(n){var r=Qi(n)?n:{pos:n},i=r.pos;return bu(i)?r:Q(Q({},r),{pos:Ue(i,t)})}):[]}function ON(e,t,n,r,i,a,o){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o={left:0,top:0,right:0,bottom:0});var c=[],u=o.left,d=o.top,h=o.bottom,g=o.right,m=n+g-u,b=r+h-d;return c2(e,b).forEach(function(S){c.push({type:"horizontal",pos:[u,Jt(S.pos-a+d,.1)],size:m,className:S.className,direction:""})}),c2(t,m).forEach(function(S){c.push({type:"vertical",pos:[Jt(S.pos-i+u,.1),d],size:b,className:S.className,direction:""})}),c}function SF(e,t){if(!t.length)return[];var n=e.props.groupable,r=e.state,i=r.containerClientRect,a=r.rootMatrix,o=r.is3d,c=r.offsetDelta,u=o?4:3,d=J($8(a,i,u),2),h=d[0],g=d[1],m=n?0:c[0],b=n?0:c[1];return t.map(function(S){var w=S.element.getBoundingClientRect(),E=w.left-h-m,T=w.top-g-b,D=T+w.height,I=E+w.width,M=J(Eu(a,[E,T],u),2),z=M[0],P=M[1],A=J(Eu(a,[I,D],u),2),C=A[0],k=A[1];return Q(Q({},S),{rect:{left:z,right:C,top:P,bottom:k,center:(z+C)/2,middle:(P+k)/2}})})}function vg(e){var t=e.state,n=t.container,r=e.props.snapContainer||n;if(t.snapContainer===r&&t.guidelines&&t.guidelines.length)return!1;var i=t.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(n!==r){var o=Ia(r,!0);if(o){var c=wd(o),u=g2(t,[c.left-i.left,c.top-i.top]),d=g2(t,[c.right-i.right,c.bottom-i.bottom]);a.left=Jt(u[0],1e-5),a.top=Jt(u[1],1e-5),a.right=Jt(d[0],1e-5),a.bottom=Jt(d[1],1e-5)}}return t.snapContainer=r,t.snapOffset=a,t.guidelines=wb(e),t.enableSnap=!0,!0}function PN(e,t,n,r,i,a){var o=ec(e,t,n,a?4:3),c=Un(o,r);return __(o,Ut(i,c))}function u2(e){return e?e/xt(e):0}function wF(e,t,n,r,i,a){var o=a.fixedDirection,c=K8(n,o,r),u=y_(e,t,n,r),d=wt(wt([],J(lF(e,t,c,r,i,a)),!1),J(DN(e,u,a)),!1),h=cm(d,0),g=cm(d,1);return{width:{isBound:h.isBound,offset:h.offset[0]},height:{isBound:g.isBound,offset:g.offset[1]}}}function EF(e,t,n,r,i,a,o,c,u){var d=Un(t,o),h=rv(e,c,{vertical:[d[0]],horizontal:[d[1]]}),g=h.horizontal.offset,m=h.vertical.offset;if(Jt(m,mb)||Jt(g,mb)){var b=J(qa({datas:u,distX:-m,distY:-g}),2),S=b[0],w=b[1],E=Math.min(i||1/0,n+o[0]*S),T=Math.min(a||1/0,r+o[1]*w);return[E-n,T-r]}return[0,0]}function VN(e,t,n,r,i,a,o,c){for(var u=Oi(e.state),d=e.props.keepRatio,h=0,g=0,m=0;m<2;++m){var b=t(h,g),S=wF(e,b,i,d,o,c),w=S.width,E=S.height,T=w.isBound,D=E.isBound,I=w.offset,M=E.offset;if(m===1&&(T||(I=0),D||(M=0)),m===0&&o&&!T&&!D)return[0,0];if(d){var z=xt(I)*(n?1/n:1),P=xt(M)*(r?1/r:1),A=T&&D?z<P:D||!T&&z<P;A?I=n*M/r:M=r*I/n}h+=I,g+=M}if(!d&&i[0]&&i[1]){var C=uF(e,u,i,a,c),k=C.maxWidth,j=C.maxHeight,L=J(EF(e,t(h,g).map(function(K){return K.map(function(Y){return Jt(Y,mb)})}),n+h,r+g,k,j,i,o,c),2),I=L[0],M=L[1];h+=I,g+=M}return[h,g]}function _d(e){return e<0&&(e=e%360+360),e%=360,e}function TF(e,t){t=_d(t);var n=Math.floor(e/360),r=n*360+360-t,i=n*360+t;return xt(e-r)<xt(e-i)?r:i}function c1(e,t){e=_d(e),t=_d(t);var n=_d(e-t);return Math.min(n,360-n)}function AF(e,t,n,r){var i,a=e.props,o=(i=a[_N])!==null&&i!==void 0?i:5,c=a[SN];if($u(e,"rotatable")){var u=t.pos1,d=t.pos2,h=t.pos3,g=t.pos4,m=t.origin,b=n*Math.PI/180,S=[u,d,h,g].map(function(M){return Ut(M,m)}),w=S.map(function(M){return mh(M,b)}),E=wt(wt([],J(F8(e,S,w,m,n)),!1),J(nF(e,S,w,m,n)),!1);E.sort(function(M,z){return xt(M-n)-xt(z-n)});var T=E.length>0;if(T)return{isSnap:T,dist:T?E[0]:n}}if(c?.length&&o){var D=c.slice().sort(function(M,z){return c1(M,r)-c1(z,r)}),I=D[0];if(c1(I,r)<=o)return{isSnap:!0,dist:n+TF(r,I)-r}}return{isSnap:!1,dist:n}}function CF(e,t,n,r,i,a,o){if(!$u(e,"resizable"))return[0,0];var c=o.fixedDirection,u=o.nextAllMatrix,d=e.state,h=d.allMatrix,g=d.is3d;return VN(e,function(m,b){return PN(u||h,t+m,n+b,c,i,g)},t,n,r,i,a,o)}function RF(e,t,n,r,i){if(!$u(e,"scalable"))return[0,0];var a=i.startOffsetWidth,o=i.startOffsetHeight,c=i.fixedPosition,u=i.fixedDirection,d=i.is3d,h=VN(e,function(g,m){return PN(C8(i,Te(t,[g/a,m/o])),a,o,u,c,d)},a,o,n,c,r,i);return[h[0]/a,h[1]/o]}function DF(e,t){t.absolutePoses=Oi(e.state)}function f2(e){var t=[];return e.forEach(function(n){n.guidelineInfos.forEach(function(r){var i=r.guideline;Xr(t,function(a){return a.guideline===i})||(i.direction="",t.push({guideline:i,posInfo:n}))})}),t.map(function(n){var r=n.guideline,i=n.posInfo;return Q(Q({},r),{direction:i.direction})})}function d2(e,t,n,r,i,a){var o=p_(ev(e,a),t,n),c=o.vertical,u=o.horizontal,d=su();c.forEach(function(S){S.isBound&&(S.direction==="start"&&(d.left=!0),S.direction==="end"&&(d.right=!0),r.push({type:"bounds",pos:S.pos}))}),u.forEach(function(S){S.isBound&&(S.direction==="start"&&(d.top=!0),S.direction==="end"&&(d.bottom=!0),i.push({type:"bounds",pos:S.pos}))});var h=rF(e),g=h.boundMap,m=h.vertical,b=h.horizontal;return m.forEach(function(S){Es(r,function(w){var E=w.type,T=w.pos;return E==="bounds"&&T===S})>=0||r.push({type:"bounds",pos:S})}),b.forEach(function(S){Es(i,function(w){var E=w.type,T=w.pos;return E==="bounds"&&T===S})>=0||i.push({type:"bounds",pos:S})}),{boundMap:d,innerBoundMap:g}}var IF=E_("",["resizable","scalable"]),kF={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",_N,SN,wN,EN,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(e,t){var n=e.state,r=n.top,i=n.left,a=n.pos1,o=n.pos2,c=n.pos3,u=n.pos4,d=n.snapRenderInfo,h=e.props.snapRenderThreshold,g=h===void 0?1:h;if(!d||!d.render||!$u(e,""))return lu(e,"boundMap",su(),function(st){return JSON.stringify(st)}),lu(e,"innerBoundMap",su(),function(st){return JSON.stringify(st)}),[];n.guidelines=wb(e);var m=Math.min(a[0],o[0],c[0],u[0]),b=Math.min(a[1],o[1],c[1],u[1]),S=d.externalPoses||[],w=Oi(e.state),E=[],T=[],D=[],I=[],M=[],z=Ii(w),P=z.width,A=z.height,C=z.top,k=z.left,j=z.bottom,L=z.right,B={left:k,right:L,top:C,bottom:j,center:(k+L)/2,middle:(C+j)/2},V=S.length>0,K=V?Ii(S):{};if(!d.request){if(d.direction&&M.push(W8(e,w,d.direction,g,g)),d.snap){var Y=Ii(w);d.center&&(Y.middle=(Y.top+Y.bottom)/2,Y.center=(Y.left+Y.right)/2),M.push(t2(e,Y,g,g))}V&&(d.center&&(K.middle=(K.top+K.bottom)/2,K.center=(K.left+K.right)/2),M.push(t2(e,K,g,g))),M.forEach(function(st){var ht=st.vertical.posInfos,dt=st.horizontal.posInfos;E.push.apply(E,wt([],J(ht.filter(function(bt){var At=bt.guidelineInfos;return At.some(function(Dt){var Kt=Dt.guideline;return!Kt.hide})}).map(function(bt){return{type:"snap",pos:bt.pos}})),!1)),T.push.apply(T,wt([],J(dt.filter(function(bt){var At=bt.guidelineInfos;return At.some(function(Dt){var Kt=Dt.guideline;return!Kt.hide})}).map(function(bt){return{type:"snap",pos:bt.pos}})),!1)),D.push.apply(D,wt([],J(f2(ht)),!1)),I.push.apply(I,wt([],J(f2(dt)),!1))})}var H=d2(e,[k,L],[C,j],E,T),$=H.boundMap,et=H.innerBoundMap;V&&d2(e,[K.left,K.right],[K.top,K.bottom],E,T,d.externalBounds);var at=wt(wt([],J(D),!1),J(I),!1),X=at.filter(function(st){return st.element&&!st.gapRects}),U=at.filter(function(st){return st.gapRects}).sort(function(st,ht){return st.gap-ht.gap});Nt(e,"onSnap",{guidelines:at.filter(function(st){var ht=st.element;return!ht}),elements:X,gaps:U},!0);var Z=lu(e,"boundMap",$,function(st){return JSON.stringify(st)},su()),rt=lu(e,"innerBoundMap",et,function(st){return JSON.stringify(st)},su());return($===Z||et===rt)&&Nt(e,"onBound",{bounds:$,innerBounds:et},!0),wt(wt(wt(wt(wt(wt([],J(mF(e,X,[m,b],B,t)),!1),J(vF(e,U,[m,b],B,t)),!1),J(l2(e,"horizontal",I,[i,r],B,t)),!1),J(l2(e,"vertical",D,[i,r],B,t)),!1),J(o2(e,"horizontal",T,m,r,P,0,t)),!1),J(o2(e,"vertical",E,b,i,A,1,t)),!1)},dragStart:function(e,t){e.state.snapRenderInfo={request:t.isRequest,snap:!0,center:!0},vg(e)},drag:function(e){var t=e.state;vg(e)||(t.guidelines=wb(e)),t.snapRenderInfo&&(t.snapRenderInfo.render=!0)},pinchStart:function(e){this.unset(e)},dragEnd:function(e){this.unset(e)},dragControlCondition:function(e,t){if(IF(e,t)||Sb(e,t))return!0;if(!t.isRequest&&t.inputEvent)return Bn(t.inputEvent.target,jt("snap-control"))},dragControlStart:function(e){e.state.snapRenderInfo=null,vg(e)},dragControl:function(e){this.drag(e)},dragControlEnd:function(e){this.unset(e)},dragGroupStart:function(e,t){this.dragStart(e,t)},dragGroup:function(e){this.drag(e)},dragGroupEnd:function(e){this.unset(e)},dragGroupControlStart:function(e){e.state.snapRenderInfo=null,vg(e)},dragGroupControl:function(e){this.drag(e)},dragGroupControlEnd:function(e){this.unset(e)},unset:function(e){var t=e.state;t.enableSnap=!1,t.guidelines=[],t.snapRenderInfo=null,t.elementRects=[]}};function NF(e,t){return[e[0]*t[0],e[1]*t[1]]}function jt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return CB.apply(void 0,wt([u_],J(e),!1))}function jN(e){e()}function MF(e){return!e||e==="none"?[1,0,0,1,0,0]:Qi(e)?e:Gd(e)}function Sd(e,t,n){return am(t,ql(n,t),e,ql(n.map(function(r){return-r}),t))}function OF(e,t,n){if(t==="%"){var r=x_(e.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function PF(e){var t=VF(S_(e,":before"));return t.map(function(n,r){var i=dh(n),a=i.value,o=i.unit;return a*OF(e,o,r===0)})}function fm(e){return e?e.split(" "):["0","0"]}function VF(e){return fm(e.transformOrigin)}function zN(e){var t=Wr(e),n=t("transform");if(n&&n!=="none")return n;if("transform"in e){var r=e.transform,i=r.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var o=[],c=function(d){var h=i[d].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(g){return h[g]}).join(", "),")"))},u=0;u<a;++u)c(u);return o.join(" ")}return""}function Hd(e,t,n,r,i){var a,o,c=Jx(e)||Ko(e),u=!1,d,h;if(!e||n)d=e;else{var g=(a=e?.assignedSlot)===null||a===void 0?void 0:a.parentElement,m=e.parentElement;g?(u=!0,h=m,d=g):d=m}for(var b=!1,S=e===t||d===t,w="relative",E=1,T=parseFloat(i?.("zoom"))||1,D=i?.("position");d&&d!==c;){t===d&&(S=!0);var I=Wr(d),M=d.tagName.toLowerCase(),z=zN(d),P=I("willChange"),A=parseFloat(I("zoom"))||1;if(w=I("position"),r&&A!==1){E=A;break}if(!n&&r&&T!==1&&D&&D!=="absolute"||M==="svg"||M==="foreignobject"||w!=="static"||z&&z!=="none"||P==="transform")break;var C=(o=e?.assignedSlot)===null||o===void 0?void 0:o.parentNode,k=d.parentNode;C&&(u=!0,h=k);var j=k;if(j&&j.nodeType===11){d=j.host,b=!0,w=Wr(d)("position");break}d=j,w="relative"}return{offsetZoom:E,hasSlot:u,parentSlotElement:h,isCustomElement:b,isStatic:w==="static",isEnd:S||!d||d===c,offsetParent:d||c}}function jF(e,t){var n,r=e.tagName.toLowerCase(),i=e.offsetLeft,a=e.offsetTop,o=Wr(e),c=Ym(i),u=!c,d,h;return!u&&(r!=="svg"||e.ownerSVGElement)?(d=rN?PF(e):fm(o("transformOrigin")).map(function(g){return parseFloat(g)}),h=d.slice(),u=!0,r==="svg"?(i=0,a=0):(n=J(BF(e,d,e===t&&t.tagName.toLowerCase()==="g"),4),i=n[0],a=n[1],d[0]=n[2],d[1]=n[3])):(d=fm(o("transformOrigin")).map(function(g){return parseFloat(g)}),h=d.slice()),{tagName:r,isSVG:c,hasOffset:u,offset:[i||0,a||0],origin:d,targetOrigin:h}}function LN(e,t){var n=Wr(e),r=Wr(Ko(e)),i=r("position");if(!t&&(!i||i==="static"))return[0,0];var a=parseInt(r("marginLeft"),10),o=parseInt(r("marginTop"),10);return n("position")==="absolute"&&((n("top")!=="auto"||n("bottom")!=="auto")&&(o=0),(n("left")!=="auto"||n("right")!=="auto")&&(a=0)),[a,o]}function Eb(e){e.forEach(function(t){var n=t.matrix;n&&(t.matrix=Zi(n,3,4))})}function zF(e){for(var t=e.parentElement,n=!1,r=Ko(e);t;){var i=S_(t).transform;if(i&&i!=="none"){n=!0;break}if(t===r)break;t=t.parentElement}return{fixedContainer:t||r,hasTransform:n}}function iv(e,t){return t===void 0&&(t=e.length>9),"".concat(t?"matrix3d":"matrix","(").concat(Wk(e,!t).join(","),")")}function x_(e){var t=e.clientWidth,n=e.clientHeight;if(!e)return{x:0,y:0,width:0,height:0,clientWidth:t,clientHeight:n};var r=e.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||t,height:i.height||n,clientWidth:t,clientHeight:n}}function LF(e,t){var n,r=x_(e),i=r.width,a=r.height,o=r.clientWidth,c=r.clientHeight,u=o/i,d=c/a,h=e.preserveAspectRatio.baseVal,g=h.align,m=h.meetOrSlice,b=[0,0],S=[u,d],w=[0,0];if(g!==1){var E=(g-2)%3,T=Math.floor((g-2)/3);b[0]=i*E/2,b[1]=a*T/2;var D=m===2?Math.max(d,u):Math.min(u,d);S[0]=D,S[1]=D,w[0]=(o-i)/2*E,w[1]=(c-a)/2*T}var I=s_(S,t);return n=J(w,2),I[t*(t-1)]=n[0],I[t*(t-1)+1]=n[1],Sd(I,t,b)}function BF(e,t,n){var r=e.tagName.toLowerCase();if(!e.getBBox||!n&&r==="g")return[0,0,0,0];var i=Wr(e),a=i("transform-box")==="fill-box",o=e.getBBox(),c=x_(e.ownerSVGElement),u=o.x,d=o.y;r==="foreignobject"&&!u&&!d&&(u=parseFloat(e.getAttribute("x"))||0,d=parseFloat(e.getAttribute("y"))||0);var h=u-c.x,g=d-c.y,m=a?t[0]:t[0]-h,b=a?t[1]:t[1]-g;return[h,g,m,b]}function en(e,t,n){return vr(e,Gl(t,n),n)}function ec(e,t,n,r){return[[0,0],[t,0],[0,n],[t,n]].map(function(i){return en(e,i,r)})}function Ii(e){var t=e.map(function(d){return d[0]}),n=e.map(function(d){return d[1]}),r=Math.min.apply(Math,wt([],J(t),!1)),i=Math.min.apply(Math,wt([],J(n),!1)),a=Math.max.apply(Math,wt([],J(t),!1)),o=Math.max.apply(Math,wt([],J(n),!1)),c=a-r,u=o-i;return{left:r,top:i,right:a,bottom:o,width:c,height:u}}function h2(e,t,n,r){var i=ec(e,t,n,r);return Ii(i)}function UF(e,t,n,r,i){var a,o=e.target,c=e.origin,u=t.matrix,d=UN(o),h=d.offsetWidth,g=d.offsetHeight,m=n.getBoundingClientRect(),b=[0,0];n===Ko(n)&&(b=LN(o,!0));for(var S=o.getBoundingClientRect(),w=S.left-m.left+n.scrollLeft-(n.clientLeft||0)+b[0],E=S.top-m.top+n.scrollTop-(n.clientTop||0)+b[1],T=S.width,D=S.height,I=am(r,i,u),M=h2(I,h,g,r),z=M.left,P=M.top,A=M.width,C=M.height,k=en(I,c,r),j=Ut(k,[z,P]),L=[w+j[0]*T/A,E+j[1]*D/C],B=[0,0],V=0;++V<10;){var K=ja(i,r);a=J(Ut(en(K,L,r),en(K,k,r)),2),B[0]=a[0],B[1]=a[1];var Y=am(r,i,ql(B,r),u),H=h2(Y,h,g,r),$=H.left,et=H.top,at=$-w,X=et-E;if(xt(at)<2&&xt(X)<2)break;L[0]-=at,L[1]-=X}return B.map(function(U){return Math.round(U)})}function FF(e,t,n){var r=e.length===16,i=r?4:3,a=t.map(function(u){return en(e,u,i)}),o=n.left,c=n.top;return a.map(function(u){return[u[0]+o,u[1]+c]})}function Mi(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function BN(e,t){return Mi([t[0]-e[0],t[1]-e[1]])}function od(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=Sn(e,t));var i=BN(e,t);return{transform:"translateY(-50%) translate(".concat(e[0],"px, ").concat(e[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function dm(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,a=n.reduce(function(c,u){return c+u[0]},0)/i,o=n.reduce(function(c,u){return c+u[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(o,"px) rotate(").concat(e,"rad) scale(").concat(t,")")}}function $l(e,t){var n=e[t];return Qi(n)?Q(Q({},e),n):e}function UN(e){var t=e&&!Ym(e.offsetWidth),n=0,r=0,i=0,a=0,o=0,c=0,u=0,d=0,h=0,g=0,m=0,b=0,S=1/0,w=1/0,E=1/0,T=1/0,D=0,I=0,M=!1;if(e)if(!t&&e.ownerSVGElement){var z=e.getBBox();M=!0,n=z.width,r=z.height,o=n,c=r,u=n,d=r,i=n,a=r}else{var P=Wr(e),A=e.style,C=P("boxSizing")==="border-box",k=parseFloat(P("borderLeftWidth"))||0,j=parseFloat(P("borderRightWidth"))||0,L=parseFloat(P("borderTopWidth"))||0,B=parseFloat(P("borderBottomWidth"))||0,V=parseFloat(P("paddingLeft"))||0,K=parseFloat(P("paddingRight"))||0,Y=parseFloat(P("paddingTop"))||0,H=parseFloat(P("paddingBottom"))||0,$=V+K,et=Y+H,at=k+j,X=L+B,U=$+at,Z=et+X,rt=P("position"),st=0,ht=0;if("clientLeft"in e){var dt=null;if(rt==="absolute"){var bt=Hd(e,Ko(e));dt=bt.offsetParent}else dt=e.parentElement;if(dt){var At=Wr(dt);st=parseFloat(At("width")),ht=parseFloat(At("height"))}}h=Math.max($,Ue(P("minWidth"),st)||0),g=Math.max(et,Ue(P("minHeight"),ht)||0),S=Ue(P("maxWidth"),st),w=Ue(P("maxHeight"),ht),isNaN(S)&&(S=1/0),isNaN(w)&&(w=1/0),D=Ue(A.width,0)||0,I=Ue(A.height,0)||0,o=parseFloat(P("width"))||0,c=parseFloat(P("height"))||0,u=xt(o-D)<1?rb(h,D||o,S):o,d=xt(c-I)<1?rb(g,I||c,w):c,n=u,r=d,i=u,a=d,C?(E=S,T=w,m=h,b=g,u=n-U,d=r-Z):(E=S+U,T=w+Z,m=h+U,b=g+Z,n=u+U,r=d+Z),i=u+$,a=d+et}return{svg:M,offsetWidth:n,offsetHeight:r,clientWidth:i,clientHeight:a,contentWidth:u,contentHeight:d,inlineCSSWidth:D,inlineCSSHeight:I,cssWidth:o,cssHeight:c,minWidth:h,minHeight:g,maxWidth:S,maxHeight:w,minOffsetWidth:m,minOffsetHeight:b,maxOffsetWidth:E,maxOffsetHeight:T}}function FN(e,t){return Sn(t>0?e[0]:e[1],t>0?e[1]:e[0])}function yg(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function GN(e,t){var n=e===Ko(e)||e===Jx(e),r={clientLeft:e.clientLeft,clientTop:e.clientTop,clientWidth:e.clientWidth,clientHeight:e.clientHeight,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(t.height,r.clientHeight),r.scrollHeight=Math.max(t.height,r.scrollHeight)),r.overflow=Wr(e)("overflow")!=="visible",Q(Q({},t),r)}function u1(e,t,n,r){var i=e.left,a=e.right,o=e.top,c=e.bottom,u=t.top,d=t.left,h={left:d+i,top:u+o,right:d+a,bottom:u+c,width:a-i,height:c-o};return n&&r?GN(n,h):h}function wd(e,t){var n=0,r=0,i=0,a=0;if(e){var o=e.getBoundingClientRect();n=o.left,r=o.top,i=o.width,a=o.height}var c={left:n,top:r,width:i,height:a,right:n+i,bottom:r+a};return e&&t?GN(e,c):c}function GF(e){var t=e.props,n=t.groupable,r=t.svgOrigin,i=e.getState(),a=i.offsetWidth,o=i.offsetHeight,c=i.svg,u=i.transformOrigin;return!n&&c&&r?A_(r,a,o):u}function qN(e,t,n,r){var i;if(e)i=e;else if(t)i=[0,0];else{var a=n.target;i=HN(a,r)}return i}function HN(e,t){if(e){var n=e.getAttribute("data-rotation")||"",r=e.getAttribute("data-direction");if(t.deg=n,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function __(e,t){return[Te(t,e[0]),Te(t,e[1]),Te(t,e[2]),Te(t,e[3])]}function Oi(e){var t=e.left,n=e.top,r=e.pos1,i=e.pos2,a=e.pos3,o=e.pos4;return __([r,i,a,o],[t,n])}function Tb(e,t){e[t?"controlAbles":"targetAbles"].forEach(function(n){n.unset&&n.unset(e)})}function ou(e,t){var n=t?"controlGesto":"targetGesto",r=e[n];r?.isIdle()===!1&&Tb(e,t),r?.unset(),e[n]=null}function Dr(e,t){if(t){var n=Hu(t);n.nextStyle=Q(Q({},n.nextStyle),e)}return{style:e,cssText:Ts(e).map(function(r){return"".concat(jg(r,"-"),": ").concat(e[r],";")}).join("")}}function $N(e,t,n){var r=t.afterTransform||t.transform;return Q(Q({},Dr(Q(Q(Q({},e.style),t.style),{transform:r}),n)),{afterTransform:r,transform:e.transform})}function ae(e,t,n,r){var i=t.datas;i.datas||(i.datas={});var a=Q(Q({},n),{target:e.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:e,moveable:e,datas:i.datas,isRequest:t.isRequest,isRequestChild:t.isRequestChild,isFirstDrag:!!t.isFirstDrag,isTrusted:t.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var o;(o=t.stop)===null||o===void 0||o.call(t)}});return i.isStartEvent?r||(i.lastEvent=a):i.isStartEvent=!0,a}function ci(e,t,n){var r=t.datas,i="isDrag"in n?n.isDrag:t.isDrag;return r.datas||(r.datas={}),Q(Q({isDrag:i},n),{moveable:e,target:e.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:e,lastEvent:r.lastEvent,isDouble:t.isDouble,datas:r.datas,isFirstDrag:!!t.isFirstDrag})}function av(e,t,n){e._emitter.on(t,n)}function Nt(e,t,n,r,i){return e.triggerEvent(t,n,r,i)}function S_(e,t){return ko(e).getComputedStyle(e,t)}function bg(e,t,n){var r={},i={};return e.filter(function(a){var o=a.name;if(r[o]||!t.some(function(c){return a[c]}))return!1;if(!n&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return r[o]=!0,!0})}function Ab(e,t){return e===t||e==null&&t==null}function p2(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e.length-1,r=0;r<n;++r){var i=e[r];if(!Ym(i))return i}return e[n]}function YN(e,t){var n=[],r=[];return e.forEach(function(i,a){var o=t(i,a,e),c=r.indexOf(o),u=n[c]||[];c===-1&&(r.push(o),n.push(u)),u.push(i)}),n}function qF(e,t){var n=[],r={};return e.forEach(function(i,a){var o=t(i,a,e),c=r[o];c||(c=[],r[o]=c,n.push(c)),c.push(i)}),n}function XN(e){return e.reduce(function(t,n){return t.concat(n)},[])}function wu(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.sort(function(n,r){return xt(r)-xt(n)}),e[0]}function Eu(e,t,n){return vr(ja(e,n),Gl(t,n),n)}function HF(e,t){var n,r=e.is3d,i=e.rootMatrix,a=r?4:3;return n=J(Eu(i,[t.distX,t.distY],a),2),t.distX=n[0],t.distY=n[1],t}function Ei(e,t,n,r){if(!n[0]&&!n[1])return t;var i=en(e,[u2(n[0]||1),0],r),a=en(e,[0,u2(n[1]||1)],r),o=en(e,[n[0]/Mi(i),n[1]/Mi(a)],r);return Te(t,o)}function Hi(e,t,n){return n?"".concat(e/t*100,"%"):"".concat(e,"px")}function hm(e){return xt(e)<=Ir?0:e}function w_(e){return function(t){if(!t.isDragging(e))return"";var n=O8(t,e),r=n.deg;return r?jt("view-control-rotation".concat(r)):""}}function E_(e,t){return t===void 0&&(t=[e]),function(n,r){if(r.isRequest)return t.some(function(a){return r.requestAble===a})?r.parentDirection:!1;var i=r.inputEvent.target;return Bn(i,jt("direction"))&&(!e||Bn(i,jt(e)))}}function $F(e,t,n){var r,i=xu(e,{"x%":function(z){return z/100*t.offsetWidth},"y%":function(z){return z/100*t.offsetHeight}}),a=e.slice(0,n<0?void 0:n),o=e.slice(0,n<0?void 0:n+1),c=e[n]||"",u=n<0?[]:e.slice(n),d=n<0?[]:e.slice(n+1),h=i.slice(0,n<0?void 0:n),g=i.slice(0,n<0?void 0:n+1),m=(r=i[n])!==null&&r!==void 0?r:xu([""])[0],b=n<0?[]:i.slice(n),S=n<0?[]:i.slice(n+1),w=m?[m]:[],E=Yc(h),T=Yc(g),D=Yc(b),I=Yc(S),M=Fe(E,D,4);return{transforms:e,beforeFunctionMatrix:E,beforeFunctionMatrix2:T,targetFunctionMatrix:Yc(w),afterFunctionMatrix:D,afterFunctionMatrix2:I,allFunctionMatrix:M,beforeFunctions:h,beforeFunctions2:g,targetFunction:w[0],afterFunctions:b,afterFunctions2:S,beforeFunctionTexts:a,beforeFunctionTexts2:o,targetFunctionText:c,afterFunctionTexts:u,afterFunctionTexts2:d}}function YF(e){return!e||!Qi(e)||Gu(e)?!1:Pn(e)||"length"in e}function Ia(e,t){return e?Gu(e)?e:Yr(e)?t?document.querySelector(e):e:Kx(e)?e():Ck(e)?e:"current"in e?e.current:e:null}function T_(e,t){if(!e)return[];var n=YF(e)?[].slice.call(e):[e];return n.reduce(function(r,i){return Yr(i)&&t?wt(wt([],J(r),!1),J([].slice.call(document.querySelectorAll(i))),!1):(Pn(i)?r.push(T_(i,t)):r.push(Ia(i,t)),r)},[])}function XF(e,t,n){var r=Sn(e,t)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function g2(e,t){var n=e.rootMatrix,r=e.is3d,i=r?4:3,a=ja(n,i);return r||(a=Zi(a,3,4)),a[12]=0,a[13]=0,a[14]=0,kU(a,t)}function WN(e,t,n,r,i){var a=J(e,2),o=a[0],c=a[1],u=0,d=0;if(i&&o&&c){var h=Sn([0,0],t),g=Sn([0,0],r),m=Mi(t),b=Math.cos(h-g)*m;if(!r[0])d=b,u=d*n;else if(!r[1])u=b,d=u/n;else{var S=r[0]*o,w=r[1]*c,E=Math.atan2(S+t[0],w+t[1]),T=Math.atan2(S,w);E<0&&(E+=Math.PI*2),T<0&&(T+=Math.PI*2);var D=0;xt(E-T)<Math.PI/2||xt(E-T)>Math.PI/2*3||(T+=Math.PI),D=E-T,D>Math.PI*2?D-=Math.PI*2:D>Math.PI?D=2*Math.PI-D:D<-Math.PI&&(D=-2*Math.PI-D);var I=Mi([S+t[0],w+t[1]])*Math.cos(D);u=I*Math.sin(T)-S,d=I*Math.cos(T)-w,r[0]<0&&(u*=-1),r[1]<0&&(d*=-1)}}else u=r[0]*t[0],d=r[1]*t[1];return[u,d]}function KN(e,t,n,r){var i,a=n.ratio,o=n.startOffsetWidth,c=n.startOffsetHeight,u=0,d=0,h=r.distX,g=r.distY,m=r.pinchScale,b=r.parentDistance,S=r.parentDist,w=r.parentScale,E=n.fixedDirection,T=[0,1].map(function(A){return xt(e[A]-E[A])}),D=[0,1].map(function(A){var C=T[A];return C!==0&&(C=2/C),C});if(S)u=S[0],d=S[1],t&&(u?d||(d=u/a):u=d*a);else if(bu(m))u=(m-1)*o,d=(m-1)*c;else if(w)u=(w[0]-1)*o,d=(w[1]-1)*c;else if(b){var I=o*T[0],M=c*T[1],z=Mi([I,M]);u=b/z*I*D[0],d=b/z*M*D[1]}else{var P=qa({datas:n,distX:h,distY:g});P=D.map(function(A,C){return P[C]*A}),i=J(WN([o,c],P,a,e,t),2),u=i[0],d=i[1]}return{distWidth:u,distHeight:d}}function Cb(e,t){if(t){if(e==="left")return{x:"0%",y:"50%"};if(e==="top")return{x:"50%",y:"50%"};if(e==="center")return{x:"50%",y:"50%"};if(e==="right")return{x:"100%",y:"50%"};if(e==="bottom")return{x:"50%",y:"100%"};var n=J(e.split(" "),2),r=n[0],i=n[1],a=Cb(r||""),o=Cb(i||""),c=Q(Q({},a),o),u={x:"50%",y:"50%"};return c.x&&(u.x=c.x),c.y&&(u.y=c.y),c.value&&(c.x&&!c.y&&(u.y=c.value),!c.x&&c.y&&(u.x=c.value)),u}return e==="left"?{x:"0%"}:e==="right"?{x:"100%"}:e==="top"?{y:"0%"}:e==="bottom"?{y:"100%"}:e?e==="center"?{value:"50%"}:{value:e}:{}}function A_(e,t,n){var r=Cb(e,!0),i=r.x,a=r.y;return[Ue(i,t)||0,Ue(a,n)||0]}function WF(e,t,n){var r=e.map(function(a){return Ut(a,t)}),i=r.map(function(a){return mh(a,n)});return{prev:r,next:i,result:i.map(function(a){return Te(a,t)})}}function QN(e,t){return e.length===t.length&&e.every(function(n,r){var i=t[r],a=Pn(n),o=Pn(i);return a&&o?QN(n,i):!a&&!o?n===i:!1})}function lu(e,t,n,r,i){var a=e._store,o=a[t];if(!(t in a))if(i!=null)a[t]=i,o=i;else return a[t]=n,n;return o===n||r(o)===r(n)?o:(a[t]=n,n)}function Cr(e){return e>=0?1:-1}function xt(e){return Math.abs(e)}function f1(e,t){return qB(e).map(function(n){return t(n)})}function ZN(e){return bu(e)?{top:e,left:e,right:e,bottom:e}:{left:e.left||0,top:e.top||0,right:e.right||0,bottom:e.bottom||0}}var KF=bh("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(e,t){var n=t.datas,r=t.targets,i=t.angle,a=t.originalDatas,o=e.props,c=o.pinchable,u=o.ables;if(!c)return!1;var d="onPinch".concat(r?"Group":"","Start"),h="drag".concat(r?"Group":"","ControlStart"),g=(c===!0?e.controlAbles:u.filter(function(w){return c.indexOf(w.name)>-1})).filter(function(w){return w.canPinch&&w[h]}),m=ae(e,t,{});r&&(m.targets=r);var b=Nt(e,d,m);n.isPinch=b!==!1,n.ables=g;var S=n.isPinch;return S?(g.forEach(function(w){if(a[w.name]=a[w.name]||{},!!w[h]){var E=Q(Q({},t),{datas:a[w.name],parentRotate:i,isPinch:!0});w[h](e,E)}}),e.state.snapRenderInfo={request:t.isRequest,direction:[0,0]},S):!1},pinch:function(e,t){var n=t.datas,r=t.scale,i=t.distance,a=t.originalDatas,o=t.inputEvent,c=t.targets,u=t.angle;if(n.isPinch){var d=i*(1-1/r),h=ae(e,t,{});c&&(h.targets=c);var g="onPinch".concat(c?"Group":"");Nt(e,g,h);var m=n.ables,b="drag".concat(c?"Group":"","Control");return m.forEach(function(S){S[b]&&S[b](e,Q(Q({},t),{datas:a[S.name],inputEvent:o,resolveMatrix:!0,pinchScale:r,parentDistance:d,parentRotate:u,isPinch:!0}))}),h}},pinchEnd:function(e,t){var n=t.datas,r=t.isPinch,i=t.inputEvent,a=t.targets,o=t.originalDatas;if(n.isPinch){var c="onPinch".concat(a?"Group":"","End"),u=ci(e,t,{isDrag:r});a&&(u.targets=a),Nt(e,c,u);var d=n.ables,h="drag".concat(a?"Group":"","ControlEnd");return d.forEach(function(g){g[h]&&g[h](e,Q(Q({},t),{isDrag:r,datas:o[g.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(e,t){return this.pinchStart(e,Q(Q({},t),{targets:e.props.targets}))},pinchGroup:function(e,t){return this.pinch(e,Q(Q({},t),{targets:e.props.targets}))},pinchGroupEnd:function(e,t){return this.pinchEnd(e,Q(Q({},t),{targets:e.props.targets}))}}),m2=E_("scalable"),QF={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:yN("scalable"),dragControlCondition:m2,viewClassName:w_("scalable"),dragControlStart:function(e,t){var n=t.datas,r=t.isPinch,i=t.inputEvent,a=t.parentDirection,o=qN(a,r,i,n),c=e.state,u=c.width,d=c.height,h=c.targetTransform,g=c.target,m=c.pos1,b=c.pos2,S=c.pos4;if(!o||!g)return!1;r||tc(e,t),n.datas={},n.transform=h,n.prevDist=[1,1],n.direction=o,n.startOffsetWidth=u,n.startOffsetHeight=d,n.startValue=[1,1];var w=!o[0]&&!o[1]||o[0]||!o[1];tv(e,t,"scale"),n.isWidth=w;function E(P){n.ratio=P&&isFinite(P)?P:0}n.startPositions=Oi(e.state);function T(P){var A=IN(n.startPositions,P);n.fixedDirection=A.fixedDirection,n.fixedPosition=A.fixedPosition,n.fixedOffset=A.fixedOffset}n.setFixedDirection=T,E(vs(m,b)/vs(b,S)),T([-o[0],-o[1]]);var D=function(P){n.minScaleSize=P},I=function(P){n.maxScaleSize=P};D([-1/0,-1/0]),I([1/0,1/0]);var M=ae(e,t,Q(Q({direction:o,set:function(P){n.startValue=P},setRatio:E,setFixedDirection:T,setMinScaleSize:D,setMaxScaleSize:I},Jm(e,t)),{dragStart:Ar.dragStart(e,new _u().dragStart([0,0],t))})),z=Nt(e,"onScaleStart",M);return n.startFixedDirection=n.fixedDirection,z!==!1&&(n.isScale=!0,e.state.snapRenderInfo={request:t.isRequest,direction:o}),n.isScale?M:!1},dragControl:function(e,t){Qm(e,t,"scale");var n=t.datas,r=t.parentKeepRatio,i=t.parentFlag,a=t.isPinch,o=t.dragClient,c=t.isRequest,u=t.useSnap,d=t.resolveMatrix,h=n.prevDist,g=n.direction,m=n.startOffsetWidth,b=n.startOffsetHeight,S=n.isScale,w=n.startValue,E=n.isWidth,T=n.ratio;if(!S)return!1;var D=e.props,I=D.throttleScale,M=D.parentMoveable,z=g;!g[0]&&!g[1]&&(z=[1,1]);var P=T&&(r??D.keepRatio)||!1,A=e.state,C=[w[0],w[1]];function k(){var Et=KN(z,P,n,t),Rt=Et.distWidth,le=Et.distHeight,Vt=m?(m+Rt)/m:1,qt=b?(b+le)/b:1;w[0]||(C[0]=Rt/m),w[1]||(C[1]=le/b);var Gt=(z[0]||P?Vt:1)*C[0],ce=(z[1]||P?qt:1)*C[1];return Gt===0&&(Gt=Cr(h[0])*pg),ce===0&&(ce=Cr(h[1])*pg),[Gt,ce]}var j=k();if(!a&&e.props.groupable){var L=A.snapRenderInfo||{},B=L.direction;Pn(B)&&(B[0]||B[1])&&(A.snapRenderInfo={direction:g,request:t.isRequest})}Nt(e,"onBeforeScale",ae(e,t,{scale:j,setFixedDirection:function(Et){return n.setFixedDirection(Et),j=k(),j},startFixedDirection:n.startFixedDirection,setScale:function(Et){j=Et}},!0));var V=[j[0]/C[0],j[1]/C[1]],K=o,Y=[0,0],H=Cr(V[0]*V[1]),$=!o&&!i&&a;if($||d?K=h_(e,n.targetAllTransform,[0,0],[0,0],n):o||(K=n.fixedPosition),a||(Y=RF(e,V,g,!u&&c,n)),P){z[0]&&z[1]&&Y[0]&&Y[1]&&(Math.abs(Y[0]*m)>Math.abs(Y[1]*b)?Y[1]=0:Y[0]=0);var et=!Y[0]&&!Y[1];if(et&&(E?V[0]=Jt(V[0]*C[0],I)/C[0]:V[1]=Jt(V[1]*C[1],I)/C[1]),z[0]&&!z[1]||Y[0]&&!Y[1]||et&&E){V[0]+=Y[0];var at=m*V[0]*C[0]/T;V[1]=Cr(H*V[0])*xt(at/b/C[1])}else if(!z[0]&&z[1]||!Y[0]&&Y[1]||et&&!E){V[1]+=Y[1];var X=b*V[1]*C[1]*T;V[0]=Cr(H*V[1])*xt(X/m/C[0])}}else V[0]+=Y[0],V[1]+=Y[1],Y[0]||(V[0]=Jt(V[0]*C[0],I)/C[0]),Y[1]||(V[1]=Jt(V[1]*C[1],I)/C[1]);V[0]===0&&(V[0]=Cr(h[0])*pg),V[1]===0&&(V[1]=Cr(h[1])*pg),j=NF(V,[C[0],C[1]]);var U=[m,b],Z=[m*j[0],b*j[1]];Z=Sk(Z,n.minScaleSize,n.maxScaleSize,P?T:!1),j=f1(2,function(Et){return U[Et]?Z[Et]/U[Et]:Z[Et]}),V=f1(2,function(Et){return j[Et]/C[Et]});var rt=f1(2,function(Et){return h[Et]?V[Et]/h[Et]:V[Et]}),st="scale(".concat(V.join(", "),")"),ht="scale(".concat(j.join(", "),")"),dt=Zm(n,ht,st),bt=!w[0]||!w[1],At=R8(e,bt?ht:st,n.fixedDirection,K,n.fixedOffset,n,bt),Dt=$?At:Ut(At,n.prevInverseDist||[0,0]);if(n.prevDist=V,n.prevInverseDist=At,j[0]===h[0]&&j[1]===h[1]&&Dt.every(function(Et){return!Et})&&!M&&!$)return!1;var Kt=ae(e,t,Q({offsetWidth:m,offsetHeight:b,direction:g,scale:j,dist:V,delta:rt,isPinch:!!a},dN(e,dt,Dt,a,t)));return Nt(e,"onScale",Kt),Kt},dragControlEnd:function(e,t){var n=t.datas;if(!n.isScale)return!1;n.isScale=!1;var r=ci(e,t,{});return Nt(e,"onScaleEnd",r),r},dragGroupControlCondition:m2,dragGroupControlStart:function(e,t){var n=t.datas,r=this.dragControlStart(e,t);if(!r)return!1;var i=Wi(e,"resizable",t);n.moveableScale=e.scale;var a=ys(e,this,"dragControlStart",t,function(d,h){return lm(e,d,n,h)}),o=function(d){r.setFixedDirection(d),a.forEach(function(h,g){h.setFixedDirection(d),lm(e,h.moveable,n,i[g])})};n.setFixedDirection=o;var c=Q(Q({},r),{targets:e.props.targets,events:a,setFixedDirection:o}),u=Nt(e,"onScaleGroupStart",c);return n.isScale=u!==!1,n.isScale?c:!1},dragGroupControl:function(e,t){var n=t.datas;if(n.isScale){av(e,"onBeforeScale",function(h){Nt(e,"onBeforeScaleGroup",ae(e,t,Q(Q({},h),{targets:e.props.targets}),!0))});var r=this.dragControl(e,t);if(r){var i=r.dist,a=n.moveableScale;e.scale=[i[0]*a[0],i[1]*a[1]];var o=e.props.keepRatio,c=n.fixedPosition,u=ys(e,this,"dragControl",t,function(h,g){var m=J(vr(vh(e.rotation/180*Math.PI,3),[g.datas.originalX*i[0],g.datas.originalY*i[1],1],3),2),b=m[0],S=m[1];return Q(Q({},g),{parentDist:null,parentScale:i,parentKeepRatio:o,dragClient:Te(c,[b,S])})}),d=Q({targets:e.props.targets,events:u},r);return Nt(e,"onScaleGroup",d),d}}},dragGroupControlEnd:function(e,t){var n=t.isDrag,r=t.datas;if(r.isScale){this.dragControlEnd(e,t);var i=ys(e,this,"dragControlEnd",t),a=ci(e,t,{targets:e.props.targets,events:i});return Nt(e,"onScaleGroupEnd",a),n}},request:function(){var e={},t=0,n=0,r=!1;return{isControl:!0,requestStart:function(i){return r=i.useSnap,{datas:e,parentDirection:i.direction||[1,1],useSnap:r}},request:function(i){return t+=i.deltaWidth,n+=i.deltaHeight,{datas:e,parentDist:[t,n],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:r}}}}};function go(e,t){return e.map(function(n,r){return rm(n,t[r],1,2)})}function v2(e,t,n){var r=Sn(e,t),i=Sn(e,n),a=i-r;return a>=0?a:a+2*Math.PI}function ZF(e,t){var n=v2(e[0],e[1],e[2]),r=v2(t[0],t[1],t[2]),i=Math.PI;return!(n>=i&&r<=i||n<=i&&r>=i)}var JF={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:w_("warpable"),render:function(e,t){var n=e.props,r=n.resizable,i=n.scalable,a=n.warpable,o=n.zoom;if(r||i||!a)return[];var c=e.state,u=c.pos1,d=c.pos2,h=c.pos3,g=c.pos4,m=go(u,d),b=go(d,u),S=go(u,h),w=go(h,u),E=go(h,g),T=go(g,h),D=go(d,g),I=go(g,d);return wt([t.createElement("div",{className:jt("line"),key:"middeLine1",style:od(m,E,o)}),t.createElement("div",{className:jt("line"),key:"middeLine2",style:od(b,T,o)}),t.createElement("div",{className:jt("line"),key:"middeLine3",style:od(S,D,o)}),t.createElement("div",{className:jt("line"),key:"middeLine4",style:od(w,I,o)})],J(bN(e,"warpable",t)),!1)},dragControlCondition:function(e,t){if(t.isRequest)return!1;var n=t.inputEvent.target;return Bn(n,jt("direction"))&&Bn(n,jt("warpable"))},dragControlStart:function(e,t){var n=t.datas,r=t.inputEvent,i=e.props.target,a=r.target,o=HN(a,n);if(!o||!i)return!1;var c=e.state,u=c.transformOrigin,d=c.is3d,h=c.targetTransform,g=c.targetMatrix,m=c.width,b=c.height,S=c.left,w=c.top;n.datas={},n.targetTransform=h,n.warpTargetMatrix=d?g:Zi(g,3,4),n.targetInverseMatrix=Yk(ja(n.warpTargetMatrix,4),3,4),n.direction=o,n.left=S,n.top=w,n.poses=[[0,0],[m,0],[0,b],[m,b]].map(function(D){return Ut(D,u)}),n.nextPoses=n.poses.map(function(D){var I=J(D,2),M=I[0],z=I[1];return vr(n.warpTargetMatrix,[M,z,0,1],4)}),n.startValue=Ke(4),n.prevMatrix=Ke(4),n.absolutePoses=Oi(c),n.posIndexes=fN(o),tc(e,t),tv(e,t,"matrix3d"),c.snapRenderInfo={request:t.isRequest,direction:o};var E=ae(e,t,Q({set:function(D){n.startValue=D}},Jm(e,t))),T=Nt(e,"onWarpStart",E);return T!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(e,t){var n=t.datas,r=t.isRequest,i=t.distX,a=t.distY,o=n.targetInverseMatrix,c=n.prevMatrix,u=n.isWarp,d=n.startValue,h=n.poses,g=n.posIndexes,m=n.absolutePoses;if(!u)return!1;if(Qm(e,t,"matrix3d"),$u(e,"warpable")){var b=g.map(function(k){return m[k]});b.length>1&&b.push([(b[0][0]+b[1][0])/2,(b[0][1]+b[1][1])/2]);var S=rv(e,r,{horizontal:b.map(function(k){return k[1]+a}),vertical:b.map(function(k){return k[0]+i})}),w=S.horizontal,E=S.vertical;a-=w.offset,i-=E.offset}var T=qa({datas:n,distX:i,distY:a},!0),D=n.nextPoses.slice();if(g.forEach(function(k){D[k]=Te(D[k],T)}),!y8.every(function(k){return ZF(k.map(function(j){return h[j]}),k.map(function(j){return D[j]}))}))return!1;var I=o_(h[0],h[2],h[1],h[3],D[0],D[2],D[1],D[3]);if(!I.length)return!1;var M=Fe(o,I,4),z=cN(n,M,!0),P=Fe(ja(c,4),z,4);n.prevMatrix=z;var A=Fe(d,z,4),C=Zm(n,"matrix3d(".concat(A.join(", "),")"),"matrix3d(".concat(z.join(", "),")"));return d_(t,C),Nt(e,"onWarp",ae(e,t,Q({delta:P,matrix:A,dist:z,multiply:Fe,transform:C},Dr({transform:C},t)))),!0},dragControlEnd:function(e,t){var n=t.datas,r=t.isDrag;return n.isWarp?(n.isWarp=!1,Nt(e,"onWarpEnd",ci(e,t,{})),r):!1}},t7=jt("area-pieces"),xg=jt("area-piece"),JN=jt("avoid"),e7=jt("view-dragging");function d1(e){var t=e.areaElement;if(t){var n=e.state,r=n.width,i=n.height;Ak(t,JN),t.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function y2(e){return e.createElement("div",{key:"area_pieces",className:t7},e.createElement("div",{className:xg}),e.createElement("div",{className:xg}),e.createElement("div",{className:xg}),e.createElement("div",{className:xg}))}var tM={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(e,t){var n=e.props,r=n.target,i=n.dragArea,a=n.groupable,o=n.passDragArea,c=e.getState(),u=c.width,d=c.height,h=c.renderPoses,g=o?jt("area","pass"):jt("area");if(a)return[t.createElement("div",{key:"area",ref:ms(e,"areaElement"),className:g}),y2(t)];if(!r||!i)return[];var m=o_([0,0],[u,0],[0,d],[u,d],h[0],h[1],h[2],h[3]),b=m.length?iv(m,!0):"none";return[t.createElement("div",{key:"area",ref:ms(e,"areaElement"),className:g,style:{top:"0px",left:"0px",width:"".concat(u,"px"),height:"".concat(d,"px"),transformOrigin:"0 0",transform:b}}),y2(t)]},dragStart:function(e,t){var n=t.datas,r=t.clientX,i=t.clientY,a=t.inputEvent;if(!a)return!1;n.isDragArea=!1;var o=e.areaElement,c=e.state,u=c.moveableClientRect,d=c.renderPoses,h=c.rootMatrix,g=c.is3d,m=u.left,b=u.top,S=Ii(d),w=S.left,E=S.top,T=S.width,D=S.height,I=g?4:3,M=J(Eu(h,[r-m,i-b],I),2),z=M[0],P=M[1];z-=w,P-=E;var A=[{left:w,top:E,width:T,height:P-10},{left:w,top:E,width:z-10,height:D},{left:w,top:E+P+10,width:T,height:D-P-10},{left:w+z+10,top:E,width:T-z-10,height:D}],C=[].slice.call(o.nextElementSibling.children);A.forEach(function(k,j){C[j].style.cssText="left: ".concat(k.left,"px;top: ").concat(k.top,"px; width: ").concat(k.width,"px; height: ").concat(k.height,"px;")}),Tk(o,JN),c.disableNativeEvent=!0},drag:function(e,t){var n=t.datas,r=t.inputEvent;if(this.enableNativeEvent(e),!r)return!1;n.isDragArea||(n.isDragArea=!0,d1(e))},dragEnd:function(e,t){this.enableNativeEvent(e);var n=t.inputEvent,r=t.datas;if(!n)return!1;r.isDragArea||d1(e)},dragGroupStart:function(e,t){return this.dragStart(e,t)},dragGroup:function(e,t){return this.drag(e,t)},dragGroupEnd:function(e,t){return this.dragEnd(e,t)},unset:function(e){d1(e),e.state.disableNativeEvent=!1},enableNativeEvent:function(e){var t=e.state;t.disableNativeEvent&&_k(function(){t.disableNativeEvent=!1})}},n7=bh("origin",{props:["origin","svgOrigin"],render:function(e,t){var n=e.props,r=n.zoom,i=n.svgOrigin,a=n.groupable,o=e.getState(),c=o.beforeOrigin,u=o.rotation,d=o.svg,h=o.allMatrix,g=o.is3d,m=o.left,b=o.top,S=o.offsetWidth,w=o.offsetHeight,E;if(!a&&d&&i){var T=J(A_(i,S,w),2),D=T[0],I=T[1],M=g?4:3,z=en(h,[D,I],M);E=dm(u,r,Ut(z,[m,b]))}else E=dm(u,r,c);return[t.createElement("div",{className:jt("control","origin"),style:E,key:"beforeOrigin"})]}});function r7(e){var t=e.scrollContainer;return[t.scrollLeft,t.scrollTop]}var i7={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(e,t){var n=e.props,r=n.scrollContainer,i=r===void 0?e.getContainer():r,a=n.scrollOptions,o=new jU,c=Ia(i,!0);t.datas.dragScroll=o,e.state.dragScroll=o;var u=t.isControl?"controlGesto":"targetGesto",d=t.targets;o.on("scroll",function(h){var g=h.container,m=h.direction,b=ae(e,t,{scrollContainer:g,direction:m}),S=d?"onScrollGroup":"onScroll";d&&(b.targets=d),Nt(e,S,b)}).on("move",function(h){var g=h.offsetX,m=h.offsetY,b=h.inputEvent;e[u].scrollBy(g,m,b.inputEvent,!1)}).on("scrollDrag",function(h){var g=h.next;g(e[u].getCurrentEvent())}),o.dragStart(t,Q({container:c},a))},checkScroll:function(e,t){var n=t.datas.dragScroll;if(n){var r=e.props,i=r.scrollContainer,a=i===void 0?e.getContainer():i,o=r.scrollThreshold,c=o===void 0?0:o,u=r.scrollThrottleTime,d=u===void 0?0:u,h=r.getScrollPosition,g=h===void 0?r7:h,m=r.scrollOptions;return n.drag(t,Q({container:a,threshold:c,throttleTime:d,getScrollPosition:function(b){return g({scrollContainer:b.container,direction:b.direction})}},m)),!0}},drag:function(e,t){return this.checkScroll(e,t)},dragEnd:function(e,t){t.datas.dragScroll.dragEnd(),t.datas.dragScroll=null},dragControlStart:function(e,t){return this.dragStart(e,Q(Q({},t),{isControl:!0}))},dragControl:function(e,t){return this.drag(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupStart:function(e,t){return this.dragStart(e,Q(Q({},t),{targets:e.props.targets}))},dragGroup:function(e,t){return this.drag(e,Q(Q({},t),{targets:e.props.targets}))},dragGroupEnd:function(e,t){return this.dragEnd(e,Q(Q({},t),{targets:e.props.targets}))},dragGroupControlStart:function(e,t){return this.dragStart(e,Q(Q({},t),{targets:e.props.targets,isControl:!0}))},dragGroupControl:function(e,t){return this.drag(e,Q(Q({},t),{targets:e.props.targets}))},dragGroupControEnd:function(e,t){return this.dragEnd(e,Q(Q({},t),{targets:e.props.targets}))},unset:function(e){var t,n=e.state;(t=n.dragScroll)===null||t===void 0||t.dragEnd(),n.dragScroll=null}},eM={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},a7=bh("padding",{props:["padding"],render:function(e,t){var n=e.props;if(n.dragArea)return[];var r=ZN(n.padding||{}),i=r.left,a=r.top,o=r.right,c=r.bottom,u=e.getState(),d=u.renderPoses,h=u.pos1,g=u.pos2,m=u.pos3,b=u.pos4,S=[h,g,m,b],w=[];return i>0&&w.push([0,2]),a>0&&w.push([0,1]),o>0&&w.push([1,3]),c>0&&w.push([2,3]),w.map(function(E,T){var D=J(E,2),I=D[0],M=D[1],z=S[I],P=S[M],A=d[I],C=d[M],k=o_([0,0],[100,0],[0,100],[100,100],z,P,A,C);if(k.length)return t.createElement("div",{key:"padding".concat(T),className:jt("padding"),style:{transform:iv(k,!0)}})})}}),b2=["nw","ne","se","sw"];function _g(e,t){var n=e[0]+e[1],r=n>t?t/n:1;return e[0]*=r,e[1]=t-e[1]*r,e}var s7=[1,2,5,6],o7=[0,3,4,7],kl=[1,-1,-1,1],Nl=[1,1,-1,-1];function C_(e,t,n,r,i,a,o,c){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=n),c===void 0&&(c=r);var u=[],d=!1,h=e.filter(function(m){return!m.virtual}),g=h.map(function(m){var b=m.horizontal,S=m.vertical,w=m.pos;if(S&&!d&&(d=!0,u.push("/")),d){var E=Math.max(0,S===1?w[1]-a:c-w[1]);return u.push(Hi(E,r,t)),E}else{var E=Math.max(0,b===1?w[0]-i:o-w[0]);return u.push(Hi(E,n,t)),E}});return{radiusPoses:h,styles:u,raws:g}}function nM(e){for(var t=[0,0],n=[0,0],r=e.length,i=0;i<r;++i){var a=e[i];a.sub&&(a.horizontal&&(t[1]===0&&(t[0]=i),t[1]=i-t[0]+1,n[0]=i+1),a.vertical&&(n[1]===0&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:t,verticalRange:n}}function rM(e,t,n,r,i,a,o){var c,u,d,h;a===void 0&&(a=[0,0]),o===void 0&&(o=!1);var g=e.indexOf("/"),m=(g>-1?e.slice(0,g):e).length,b=e.slice(0,m),S=e.slice(m+1),w=b.length,E=S.length,T=E>0,D=J(b,4),I=D[0],M=I===void 0?"0px":I,z=D[1],P=z===void 0?M:z,A=D[2],C=A===void 0?M:A,k=D[3],j=k===void 0?P:k,L=J(S,4),B=L[0],V=B===void 0?M:B,K=L[1],Y=K===void 0?T?V:P:K,H=L[2],$=H===void 0?T?V:C:H,et=L[3],at=et===void 0?T?Y:j:et,X=[M,P,C,j].map(function(dt){return Ue(dt,t)}),U=[V,Y,$,at].map(function(dt){return Ue(dt,n)}),Z=X.slice(),rt=U.slice();c=J(_g([Z[0],Z[1]],t),2),Z[0]=c[0],Z[1]=c[1],u=J(_g([Z[3],Z[2]],t),2),Z[3]=u[0],Z[2]=u[1],d=J(_g([rt[0],rt[3]],n),2),rt[0]=d[0],rt[3]=d[1],h=J(_g([rt[1],rt[2]],n),2),rt[1]=h[0],rt[2]=h[1];var st=o?Z:Z.slice(0,Math.max(a[0],w)),ht=o?rt:rt.slice(0,Math.max(a[1],E));return wt(wt([],J(st.map(function(dt,bt){var At=b2[bt];return{virtual:bt>=w,horizontal:kl[bt],vertical:0,pos:[r+dt,i+(Nl[bt]===-1?n:0)],sub:!0,raw:X[bt],direction:At}})),!1),J(ht.map(function(dt,bt){var At=b2[bt];return{virtual:bt>=E,horizontal:0,vertical:Nl[bt],pos:[r+(kl[bt]===-1?t:0),i+dt],sub:!0,raw:U[bt],direction:At}})),!1)}function l7(e,t,n,r,i){i===void 0&&(i=t.length);var a=nM(e.slice(r)),o=a.horizontalRange,c=a.verticalRange,u=n-r,d=0;if(u===0)d=i;else if(u>0&&u<o[1])d=o[1]-u;else if(u>=c[0])d=c[0]+c[1]-u;else return;e.splice(n,d),t.splice(n,d)}function c7(e,t,n,r,i,a,o,c,u,d,h){d===void 0&&(d=0),h===void 0&&(h=0);var g=nM(e.slice(n)),m=g.horizontalRange,b=g.verticalRange;if(r>-1)for(var S=kl[r]===1?a-d:c-a,w=m[1];w<=r;++w){var E=Nl[w]===1?h:u,T=0;if(r===w?T=a:w===0?T=d+S:kl[w]===-1&&(T=c-(t[n][0]-d)),e.splice(n+w,0,{horizontal:kl[w],vertical:0,pos:[T,E]}),t.splice(n+w,0,[T,E]),w===0)break}else if(i>-1){var D=Nl[i]===1?o-h:u-o;if(m[1]===0&&b[1]===0){var I=[d+D,h];e.push({horizontal:kl[0],vertical:0,pos:I}),t.push(I)}for(var M=b[0],w=b[1];w<=i;++w){var T=kl[w]===1?d:c,E=0;if(i===w?E=o:w===0?E=h+D:Nl[w]===1?E=t[n+M][1]:Nl[w]===-1&&(E=u-(t[n+M][1]-h)),e.push({horizontal:0,vertical:Nl[w],pos:[T,E]}),t.push([T,E]),w===0)break}}}function u7(e,t){t===void 0&&(t=e.map(function(i){return i.raw}));var n=e.map(function(i,a){return i.horizontal?t[a]:null}).filter(function(i){return i!=null}),r=e.map(function(i,a){return i.vertical?t[a]:null}).filter(function(i){return i!=null});return{horizontals:n,verticals:r}}var f7=[[0,-1,"n"],[1,0,"e"]],d7=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function R_(e,t,n){var r=e.props.clipRelative,i=e.state,a=i.width,o=i.height,c=t,u=c.type,d=c.poses,h=u==="rect",g=u==="circle";if(u==="polygon")return n.map(function(P){return"".concat(Hi(P[0],a,r)," ").concat(Hi(P[1],o,r))});if(h||u==="inset"){var m=n[1][1],b=n[3][0],S=n[7][0],w=n[5][1];if(h)return[m,b,w,S].map(function(P){return"".concat(P,"px")});var E=[m,a-b,o-w,S].map(function(P,A){return Hi(P,A%2?a:o,r)});if(n.length>8){var T=J(Ut(n[4],n[0]),2),D=T[0],I=T[1];E.push.apply(E,wt(["round"],J(C_(d.slice(8).map(function(P,A){return Q(Q({},P),{pos:n[A]})}),r,D,I,S,m,b,w).styles),!1))}return E}else if(g||u==="ellipse"){var M=n[0],z=Hi(xt(n[1][1]-M[1]),g?Math.sqrt((a*a+o*o)/2):o,r),E=g?[z]:[Hi(xt(n[2][0]-M[0]),a,r),z];return E.push("at",Hi(M[0],a,r),Hi(M[1],o,r)),E}}function pm(e,t,n,r){var i=[r,(r+t)/2,t],a=[e,(e+n)/2,n];return d7.map(function(o){var c=J(o,3),u=c[0],d=c[1],h=c[2],g=i[u+1],m=a[d+1];return{vertical:xt(d),horizontal:xt(u),direction:h,pos:[g,m]}})}function iM(e){var t=[1/0,-1/0],n=[1/0,-1/0];return e.forEach(function(r){var i=r.pos;t[0]=Math.min(t[0],i[0]),t[1]=Math.max(t[1],i[0]),n[0]=Math.min(n[0],i[1]),n[1]=Math.max(n[1],i[1])}),[xt(t[1]-t[0]),xt(n[1]-n[0])]}function x2(e,t,n,r,i){var a,o,c,u,d,h,g,m,b;if(e){var S=i;if(!S){var w=Wr(e),E=w("clipPath");S=E!=="none"?E:w("clip")}if(!((!S||S==="none"||S==="auto")&&(S=r,!S))){var T=xk(S),D=T.prefix,I=D===void 0?S:D,M=T.value,z=M===void 0?"":M,P=I==="circle",A=" ";if(I==="polygon"){var C=Pl(z||"0% 0%, 100% 0%, 100% 100%, 0% 100%");A=",";var k=C.map(function(Ne){var Qe=J(Ne.split(" "),2),xe=Qe[0],ue=Qe[1];return{vertical:1,horizontal:1,pos:[Ue(xe,t),Ue(ue,n)]}}),j=Hl(k.map(function(Ne){return Ne.pos}));return{type:I,clipText:S,poses:k,splitter:A,left:j.minX,right:j.maxX,top:j.minY,bottom:j.maxY}}else if(P||I==="ellipse"){var L="",B="",V=0,K=0,C=Lo(z);if(P){var Y="";a=J(C,4),o=a[0],Y=o===void 0?"50%":o,c=a[2],L=c===void 0?"50%":c,u=a[3],B=u===void 0?"50%":u,V=Ue(Y,Math.sqrt((t*t+n*n)/2)),K=V}else{var H="",$="";d=J(C,5),h=d[0],H=h===void 0?"50%":h,g=d[1],$=g===void 0?"50%":g,m=d[3],L=m===void 0?"50%":m,b=d[4],B=b===void 0?"50%":b,V=Ue(H,t),K=Ue($,n)}var et=[Ue(L,t),Ue(B,n)],k=wt([{vertical:1,horizontal:1,pos:et,direction:"nesw"}],J(f7.slice(0,P?1:2).map(function(xe){return{vertical:xt(xe[1]),horizontal:xe[0],direction:xe[2],sub:!0,pos:[et[0]+xe[0]*V,et[1]+xe[1]*K]}})),!1);return{type:I,clipText:S,radiusX:V,radiusY:K,left:et[0]-V,top:et[1]-K,right:et[0]+V,bottom:et[1]+K,poses:k,splitter:A}}else if(I==="inset"){var C=Lo(z||"0 0 0 0"),at=C.indexOf("round"),X=(at>-1?C.slice(0,at):C).length,U=C.slice(X+1),Z=J(C.slice(0,X),4),rt=Z[0],st=Z[1],ht=st===void 0?rt:st,dt=Z[2],bt=dt===void 0?rt:dt,At=Z[3],Dt=At===void 0?ht:At,Kt=J([rt,bt].map(function(xe){return Ue(xe,n)}),2),Et=Kt[0],Rt=Kt[1],le=J([Dt,ht].map(function(xe){return Ue(xe,t)}),2),Vt=le[0],qt=le[1],Gt=t-qt,ce=n-Rt,be=rM(U,Gt-Vt,ce-Et,Vt,Et),k=wt(wt([],J(pm(Et,Gt,ce,Vt)),!1),J(be),!1);return{type:"inset",clipText:S,poses:k,top:Et,left:Vt,right:Gt,bottom:ce,radius:U,splitter:A}}else if(I==="rect"){var C=Pl(z||"0px, ".concat(t,"px, ").concat(n,"px, 0px"));A=",";var Ot=J(C.map(function(Wn){var or=dh(Wn).value;return or}),4),Lt=Ot[0],qt=Ot[1],Rt=Ot[2],Vt=Ot[3],k=pm(Lt,qt,Rt,Vt);return{type:"rect",clipText:S,poses:k,top:Lt,right:qt,bottom:Rt,left:Vt,values:C,splitter:A}}}}}function h7(e,t,n,r,i){var a=e[t],o=a.direction,c=a.sub,u=e.map(function(){return[0,0]}),d=o?o.split(""):[];if(r&&t<8){var h=d.filter(function(V){return V==="w"||V==="e"}),g=d.filter(function(V){return V==="n"||V==="s"}),m=h[0],b=g[0];u[t]=n;var S=J(iM(e),2),w=S[0],E=S[1],T=w&&E?w/E:0;if(T&&i){var D=(t+4)%8,I=e[D].pos,M=[0,0];o.indexOf("w")>-1?M[0]=-1:o.indexOf("e")>-1&&(M[0]=1),o.indexOf("n")>-1?M[1]=-1:o.indexOf("s")>-1&&(M[1]=1);var z=WN([w,E],n,T,M,!0),P=w+z[0],A=E+z[1],C=I[1],k=I[1],j=I[0],L=I[0];M[0]===-1?j=L-P:M[0]===1?L=j+P:(j=j-P/2,L=L+P/2),M[1]===-1?C=k-A:(M[1]===1||(C=k-A/2),k=C+A);var B=pm(C,L,k,j);e.forEach(function(V,K){u[K][0]=B[K].pos[0]-V.pos[0],u[K][1]=B[K].pos[1]-V.pos[1]})}else e.forEach(function(V,K){var Y=V.direction;Y&&(Y.indexOf(m)>-1&&(u[K][0]=n[0]),Y.indexOf(b)>-1&&(u[K][1]=n[1]))}),m&&(u[1][0]=n[0]/2,u[5][0]=n[0]/2),b&&(u[3][1]=n[1]/2,u[7][1]=n[1]/2)}else o&&!c?d.forEach(function(V){var K=V==="n"||V==="s";e.forEach(function(Y,H){var $=Y.direction,et=Y.horizontal,at=Y.vertical;!$||$.indexOf(V)===-1||(u[H]=[K||!et?0:n[0],!K||!at?0:n[1]])})}):u[t]=n;return u}function p7(e,t){var n=J(lN(e,t),2),r=n[0],i=n[1],a=t.datas,o=a.clipPath,c=a.clipIndex,u=o,d=u.type,h=u.poses,g=u.splitter,m=h.map(function(D){return D.pos});if(d==="polygon")m.splice(c,0,[r,i]);else if(d==="inset"){var b=s7.indexOf(c),S=o7.indexOf(c),w=h.length;if(c7(h,m,8,b,S,r,i,m[4][0],m[4][1],m[0][0],m[0][1]),w===h.length)return}else return;var E=R_(e,o,m),T="".concat(d,"(").concat(E.join(g),")");Nt(e,"onClip",ae(e,t,Q({clipEventType:"added",clipType:d,poses:m,clipStyles:E,clipStyle:T,distX:0,distY:0},Dr({clipPath:T},t))))}function g7(e,t){var n=t.datas,r=n.clipPath,i=n.clipIndex,a=r,o=a.type,c=a.poses,u=a.splitter,d=c.map(function(b){return b.pos}),h=d.length;if(o==="polygon")c.splice(i,1),d.splice(i,1);else if(o==="inset"){if(i<8||(l7(c,d,i,8,h),h===c.length))return}else return;var g=R_(e,r,d),m="".concat(o,"(").concat(g.join(u),")");Nt(e,"onClip",ae(e,t,Q({clipEventType:"removed",clipType:o,poses:d,clipStyles:g,clipStyle:m,distX:0,distY:0},Dr({clipPath:m},t))))}var m7={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(e,t){var n=e.props,r=n.customClipPath,i=n.defaultClipPath,a=n.clipArea,o=n.zoom,c=n.groupable,u=e.getState(),d=u.target,h=u.width,g=u.height,m=u.allMatrix,b=u.is3d,S=u.left,w=u.top,E=u.pos1,T=u.pos2,D=u.pos3,I=u.pos4,M=u.clipPathState,z=u.snapBoundInfos,P=u.rotation;if(!d||c)return[];var A=x2(d,h,g,i||"inset",M||r);if(!A)return[];var C=b?4:3,k=A.type,j=A.poses,L=j.map(function(qt){var Gt=en(m,qt.pos,C);return[Gt[0]-S,Gt[1]-w]}),B=[],V=[],K=k==="rect",Y=k==="inset",H=k==="polygon";if(K||Y||H){var $=Y?L.slice(0,8):L;V=$.map(function(qt,Gt){var ce=Gt===0?$[$.length-1]:$[Gt-1],be=Sn(ce,qt),Ot=BN(ce,qt);return t.createElement("div",{key:"clipLine".concat(Gt),className:jt("line","clip-line","snap-control"),"data-clip-index":Gt,style:{width:"".concat(Ot,"px"),transform:"translate(".concat(ce[0],"px, ").concat(ce[1],"px) rotate(").concat(be,"rad) scaleY(").concat(o,")")}})})}if(B=L.map(function(qt,Gt){return t.createElement("div",{key:"clipControl".concat(Gt),className:jt("control","clip-control","snap-control"),"data-clip-index":Gt,style:{transform:"translate(".concat(qt[0],"px, ").concat(qt[1],"px) rotate(").concat(P,"rad) scale(").concat(o,")")}})}),Y&&B.push.apply(B,wt([],J(L.slice(8).map(function(qt,Gt){return t.createElement("div",{key:"clipRadiusControl".concat(Gt),className:jt("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+Gt,style:{transform:"translate(".concat(qt[0],"px, ").concat(qt[1],"px) rotate(").concat(P,"rad) scale(").concat(o,")")}})})),!1)),k==="circle"||k==="ellipse"){var et=A.left,at=A.top,X=A.radiusX,U=A.radiusY,Z=J(Ut(en(m,[et,at],C),en(m,[0,0],C)),2),rt=Z[0],st=Z[1],ht="none";if(!a){for(var dt=Math.max(10,X/5,U/5),bt=[],At=0;At<=dt;++At){var Dt=Math.PI*2/dt*At;bt.push([X+(X-o)*Math.cos(Dt),U+(U-o)*Math.sin(Dt)])}bt.push([X,-2]),bt.push([-2,-2]),bt.push([-2,U*2+2]),bt.push([X*2+2,U*2+2]),bt.push([X*2+2,-2]),bt.push([X,-2]),ht="polygon(".concat(bt.map(function(qt){return"".concat(qt[0],"px ").concat(qt[1],"px")}).join(", "),")")}B.push(t.createElement("div",{key:"clipEllipse",className:jt("clip-ellipse","snap-control"),style:{width:"".concat(X*2,"px"),height:"".concat(U*2,"px"),clipPath:ht,transform:"translate(".concat(-S+rt,"px, ").concat(-w+st,"px) ").concat(iv(m))}}))}if(a){var Kt=Ii(wt([E,T,D,I],J(L),!1)),Et=Kt.width,Rt=Kt.height,le=Kt.left,Vt=Kt.top;if(H||K||Y){var bt=Y?L.slice(0,8):L;B.push(t.createElement("div",{key:"clipArea",className:jt("clip-area","snap-control"),style:{width:"".concat(Et,"px"),height:"".concat(Rt,"px"),transform:"translate(".concat(le,"px, ").concat(Vt,"px)"),clipPath:"polygon(".concat(bt.map(function(Gt){return"".concat(Gt[0]-le,"px ").concat(Gt[1]-Vt,"px")}).join(", "),")")}}))}}return z&&["vertical","horizontal"].forEach(function(qt){var Gt=z[qt],ce=qt==="horizontal";Gt.isSnap&&V.push.apply(V,wt([],J(Gt.snap.posInfos.map(function(be,Ot){var Lt=be.pos,Ne=Ut(en(m,ce?[0,Lt]:[Lt,0],C),[S,w]),Qe=Ut(en(m,ce?[h,Lt]:[Lt,g],C),[S,w]);return qd(t,"",Ne,Qe,o,"clip".concat(qt,"snap").concat(Ot),"guideline")})),!1)),Gt.isBound&&V.push.apply(V,wt([],J(Gt.bounds.map(function(be,Ot){var Lt=be.pos,Ne=Ut(en(m,ce?[0,Lt]:[Lt,0],C),[S,w]),Qe=Ut(en(m,ce?[h,Lt]:[Lt,g],C),[S,w]);return qd(t,"",Ne,Qe,o,"clip".concat(qt,"bounds").concat(Ot),"guideline","bounds","bold")})),!1))}),wt(wt([],J(B),!1),J(V),!1)},dragControlCondition:function(e,t){return t.inputEvent&&(t.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(e,t){var n=e.props,r=n.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(e,t)},drag:function(e,t){return this.dragControl(e,Q(Q({},t),{isDragTarget:!0}))},dragEnd:function(e,t){return this.dragControlEnd(e,t)},dragControlStart:function(e,t){var n=e.state,r=e.props,i=r.defaultClipPath,a=r.customClipPath,o=n.target,c=n.width,u=n.height,d=t.inputEvent?t.inputEvent.target:null,h=d&&d.getAttribute("class")||"",g=t.datas,m=x2(o,c,u,i||"inset",a);if(!m)return!1;var b=m.clipText,S=m.type,w=m.poses,E=Nt(e,"onClipStart",ae(e,t,{clipType:S,clipStyle:b,poses:w.map(function(T){return T.pos})}));return E===!1?(g.isClipStart=!1,!1):(g.isControl=h&&h.indexOf("clip-control")>-1,g.isLine=h.indexOf("clip-line")>-1,g.isArea=h.indexOf("clip-area")>-1||h.indexOf("clip-ellipse")>-1,g.clipIndex=d?parseInt(d.getAttribute("data-clip-index"),10):-1,g.clipPath=m,g.isClipStart=!0,n.clipPathState=b,tc(e,t),!0)},dragControl:function(e,t){var n,r,i,a=t.datas,o=t.originalDatas,c=t.isDragTarget;if(!a.isClipStart)return!1;var u=a,d=u.isControl,h=u.isLine,g=u.isArea,m=u.clipIndex,b=u.clipPath;if(!b)return!1;var S=$l(e.props,"clippable"),w=S.keepRatio,E=0,T=0,D=o.draggable,I=qa(t);c&&D?(n=J(D.prevBeforeDist,2),E=n[0],T=n[1]):(r=J(I,2),E=r[0],T=r[1]);var M=[E,T],z=e.state,P=z.width,A=z.height,C=!g&&!d&&!h,k=b.type,j=b.poses,L=b.splitter,B=j.map(function(St){return St.pos});C&&(E=-E,T=-T);var V=!d||j[m].direction==="nesw",K=k==="inset"||k==="rect",Y=j.map(function(){return[0,0]});if(d&&!V){var H=j[m],$=H.horizontal,et=H.vertical,at=[E*xt($),T*xt(et)];Y=h7(j,m,at,K,w)}else V&&(Y=B.map(function(){return[E,T]}));var X=B.map(function(St,It){return Te(St,Y[It])}),U=wt([],J(X),!1);z.snapBoundInfos=null;var Z=b.type==="circle",rt=b.type==="ellipse";if(Z||rt){var st=Ii(X),ht=xt(st.bottom-st.top),dt=xt(rt?st.right-st.left:ht),bt=X[0][1]+ht,At=X[0][0]-dt,Dt=X[0][0]+dt;Z&&(U.push([Dt,st.bottom]),Y.push([1,0])),U.push([st.left,bt]),Y.push([0,1]),U.push([At,st.bottom]),Y.push([1,0])}var Kt=ON((S.clipHorizontalGuidelines||[]).map(function(St){return Ue("".concat(St),A)}),(S.clipVerticalGuidelines||[]).map(function(St){return Ue("".concat(St),P)}),P,A),Et=[],Rt=[];if(Z||rt)Et=[U[4][0],U[2][0]],Rt=[U[1][1],U[3][1]];else if(K){var le=[U[0],U[2],U[4],U[6]],Vt=[Y[0],Y[2],Y[4],Y[6]];Et=le.filter(function(St,It){return Vt[It][0]}).map(function(St){return St[0]}),Rt=le.filter(function(St,It){return Vt[It][1]}).map(function(St){return St[1]})}else Et=U.filter(function(St,It){return Y[It][0]}).map(function(St){return St[0]}),Rt=U.filter(function(St,It){return Y[It][1]}).map(function(St){return St[1]});var qt=[0,0],Gt=i2(Kt,S.clipTargetBounds&&{left:0,top:0,right:P,bottom:A},Et,Rt,5,5),ce=Gt.horizontal,be=Gt.vertical,Ot=ce.offset,Lt=be.offset;if(ce.isBound&&(qt[1]+=Ot),be.isBound&&(qt[0]+=Lt),(rt||Z)&&Y[0][0]===0&&Y[0][1]===0){var st=Ii(X),Ne=st.bottom-st.top,Qe=rt?st.right-st.left:Ne,xe=be.isBound?xt(Lt):be.snapIndex===0?-Lt:Lt,ue=ce.isBound?xt(Ot):ce.snapIndex===0?-Ot:Ot;Qe-=xe,Ne-=ue,Z&&(Ne=AN(be,ce)>0?Ne:Qe,Qe=Ne);var Ie=U[0];U[1][1]=Ie[1]-Ne,U[2][0]=Ie[0]+Qe,U[3][1]=Ie[1]+Ne,U[4][0]=Ie[0]-Qe}else if(K&&w&&d){var Wn=J(iM(j),2),or=Wn[0],kr=Wn[1],Nr=or&&kr?or/kr:0,Ps=j[m],Pi=Ps.direction||"",ea=U[1][1],bt=U[5][1],At=U[7][0],Dt=U[3][0];xt(Ot)<=xt(Lt)?Ot=Cr(Ot)*xt(Lt)/Nr:Lt=Cr(Lt)*xt(Ot)*Nr,Pi.indexOf("w")>-1?At-=Lt:Pi.indexOf("e")>-1?Dt-=Lt:(At+=Lt/2,Dt-=Lt/2),Pi.indexOf("n")>-1?ea-=Ot:Pi.indexOf("s")>-1?bt-=Ot:(ea+=Ot/2,bt-=Ot/2);var xr=pm(ea,Dt,bt,At);U.forEach(function(we,ln){var pn;pn=J(xr[ln].pos,2),we[0]=pn[0],we[1]=pn[1]})}else U.forEach(function(St,It){var fe=Y[It];fe[0]&&(St[0]-=Lt),fe[1]&&(St[1]-=Ot)});var on=R_(e,b,X),qn="".concat(k,"(").concat(on.join(L),")");if(z.clipPathState=qn,Z||rt)Et=[U[4][0],U[2][0]],Rt=[U[1][1],U[3][1]];else if(K){var le=[U[0],U[2],U[4],U[6]];Et=le.map(function(It){return It[0]}),Rt=le.map(function(It){return It[1]})}else Et=U.map(function(St){return St[0]}),Rt=U.map(function(St){return St[1]});if(z.snapBoundInfos=i2(Kt,S.clipTargetBounds&&{left:0,top:0,right:P,bottom:A},Et,Rt,1,1),D){var $e=z.is3d,Vs=z.allMatrix,na=$e?4:3,ra=qt;c&&(ra=[M[0]+qt[0]-I[0],M[1]+qt[1]-I[1]]),D.deltaOffset=Fe(Vs,[ra[0],ra[1],0,0],na)}return Nt(e,"onClip",ae(e,t,Q({clipEventType:"changed",clipType:k,poses:X,clipStyle:qn,clipStyles:on,distX:E,distY:T},Dr((i={},i[k==="rect"?"clip":"clipPath"]=qn,i),t)))),!0},dragControlEnd:function(e,t){this.unset(e);var n=t.isDrag,r=t.datas,i=t.isDouble,a=r.isLine,o=r.isClipStart,c=r.isControl;return o?(Nt(e,"onClipEnd",ci(e,t,{})),i&&(c?g7(e,t):a&&p7(e,t)),i||n):!1},unset:function(e){e.state.clipPathState="",e.state.snapBoundInfos=null}},v7={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(e,t){return t.isRequest?t.requestAble==="originDraggable":Bn(t.inputEvent.target,jt("origin"))},dragControlStart:function(e,t){var n=t.datas;tc(e,t);var r=ae(e,t,{dragStart:Ar.dragStart(e,new _u().dragStart([0,0],t))}),i=Nt(e,"onDragOriginStart",r);return n.startOrigin=e.state.transformOrigin,n.startTargetOrigin=e.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,i===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(e,t){var n=t.datas,r=t.isPinch,i=t.isRequest;if(!n.isDragOrigin)return!1;var a=J(qa(t),2),o=a[0],c=a[1],u=e.state,d=u.width,h=u.height,g=u.offsetMatrix,m=u.targetMatrix,b=u.is3d,S=e.props.originRelative,w=S===void 0?!0:S,E=b?4:3,T=[o,c];if(i){var D=t.distOrigin;(D[0]||D[1])&&(T=D)}var I=Te(n.startOrigin,T),M=Te(n.startTargetOrigin,T),z=Ut(T,n.prevOrigin),P=_h(g,m,I,E),A=e.getRect(),C=Ii(ec(P,d,h,E)),k=[A.left-C.left,A.top-C.top];n.prevOrigin=T;var j=[Hi(M[0],d,w),Hi(M[1],h,w)].join(" "),L=Ar.drag(e,xh(t,e.state,k,!!r)),B=ae(e,t,Q(Q({width:d,height:h,origin:I,dist:T,delta:z,transformOrigin:j,drag:L},Dr({transformOrigin:j,transform:L.transform},t)),{afterTransform:L.transform}));return Nt(e,"onDragOrigin",B),B},dragControlEnd:function(e,t){var n=t.datas;return n.isDragOrigin?(Nt(e,"onDragOriginEnd",ci(e,t,{})),!0):!1},dragGroupControlCondition:function(e,t){return this.dragControlCondition(e,t)},dragGroupControlStart:function(e,t){var n=this.dragControlStart(e,t);return!!n},dragGroupControl:function(e,t){var n=this.dragControl(e,t);return n?(e.transformOrigin=n.transformOrigin,!0):!1},request:function(e){var t={},n=e.getRect(),r=0,i=0,a=n.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:t}},request:function(c){return"deltaOrigin"in c?(o[0]+=c.deltaOrigin[0],o[1]+=c.deltaOrigin[1]):"origin"in c?(o[0]=c.origin[0]-a[0],o[1]=c.origin[1]-a[1]):("x"in c?r=c.x-n.left:"deltaX"in c&&(r+=c.deltaX),"y"in c?i=c.y-n.top:"deltaY"in c&&(i+=c.deltaY)),{datas:t,distX:r,distY:i,distOrigin:o}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function y7(e,t,n,r){var i=e.filter(function(u){var d=u.virtual,h=u.horizontal;return h&&!d}).length,a=e.filter(function(u){var d=u.virtual,h=u.vertical;return h&&!d}).length,o=-1;if(t===0&&(i===0?o=0:i===1&&(o=1)),t===2&&(i<=2?o=2:i<=3&&(o=3)),t===3&&(a===0?o=4:a<4&&(o=7)),t===1&&(a<=1?o=5:a<=2&&(o=6)),!(o===-1||!e[o].virtual)){var c=e[o];b7(e,o),o<4?c.pos[0]=n:c.pos[1]=r}}function b7(e,t){t<4?e.slice(0,t+1).forEach(function(n){n.virtual=!1}):(e[0].virtual&&(e[0].virtual=!1),e.slice(4,t+1).forEach(function(n){n.virtual=!1}))}function x7(e,t){t<4?e.slice(t,4).forEach(function(n){n.virtual=!0}):e.slice(t).forEach(function(n){n.virtual=!0})}function _2(e,t,n,r,i){r===void 0&&(r=[0,0]);var a=[];return!e||e==="0px"?a=[]:a=Lo(e),rM(a,t,n,0,0,r,i)}function S2(e,t,n,r,i){var a=e.state,o=a.width,c=a.height,u=C_(i,e.props.roundRelative,o,c),d=u.raws,h=u.styles,g=u.radiusPoses,m=u7(g,d),b=m.horizontals,S=m.verticals,w=h.join(" ");a.borderRadiusState=w;var E=ae(e,t,Q({horizontals:b,verticals:S,borderRadius:w,width:o,height:c,delta:r,dist:n},Dr({borderRadius:w},t)));return Nt(e,"onRound",E),E}function w2(e){var t,n,r=e.getState().style,i=r.borderRadius||"";if(!i&&e.props.groupable){var a=e.moveables[0],o=e.getTargets()[0];o&&(a?.props.target===o?(i=(n=(t=e.moveables[0])===null||t===void 0?void 0:t.state.style.borderRadius)!==null&&n!==void 0?n:"",r.borderRadius=i):(i=S_(o).borderRadius,r.borderRadius=i))}return i}var _7={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(e){var t=e.props.roundClickable;return t===!0||t==="line"?jt("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(e,t){var n=e.getState(),r=n.target,i=n.width,a=n.height,o=n.allMatrix,c=n.is3d,u=n.left,d=n.top,h=n.borderRadiusState,g=e.props,m=g.minRoundControls,b=m===void 0?[0,0]:m,S=g.maxRoundControls,w=S===void 0?[4,4]:S,E=g.zoom,T=g.roundPadding,D=T===void 0?0:T,I=g.isDisplayShadowRoundControls,M=g.groupable;if(!r)return null;var z=h||w2(e),P=c?4:3,A=_2(z,i,a,b,!0);if(!A)return null;var C=0,k=0,j=M?[0,0]:[u,d];return A.map(function(L,B){var V=L.horizontal,K=L.vertical,Y=L.direction||"",H=wt([],J(L.pos),!1);k+=Math.abs(V),C+=Math.abs(K),V&&Y.indexOf("n")>-1&&(H[1]-=D),K&&Y.indexOf("w")>-1&&(H[0]-=D),V&&Y.indexOf("s")>-1&&(H[1]+=D),K&&Y.indexOf("e")>-1&&(H[0]+=D);var $=Ut(en(o,H,P),j),et=I&&I!=="horizontal",at=L.vertical?C<=w[1]&&(et||!L.virtual):k<=w[0]&&(I||!L.virtual);return t.createElement("div",{key:"borderRadiusControl".concat(B),className:jt("control","border-radius",L.vertical?"vertical":"",L.virtual?"virtual":""),"data-radius-index":B,style:{display:at?"block":"none",transform:"translate(".concat($[0],"px, ").concat($[1],"px) scale(").concat(E,")")}})})},dragControlCondition:function(e,t){if(!t.inputEvent||t.isRequest)return!1;var n=t.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(e,t){return this.dragControlCondition(e,t)},dragControlStart:function(e,t){var n=t.inputEvent,r=t.datas,i=n.target,a=i.getAttribute("class")||"",o=a.indexOf("border-radius")>-1,c=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,u=o?parseInt(i.getAttribute("data-radius-index"),10):-1,d=-1;if(c){var h=i.getAttribute("data-line-key")||"";h&&(d=parseInt(h.replace(/render-line-/g,""),10),isNaN(d)&&(d=-1))}if(!o&&!c)return!1;var g=ae(e,t,{}),m=Nt(e,"onRoundStart",g);if(m===!1)return!1;r.lineIndex=d,r.controlIndex=u,r.isControl=o,r.isLine=c,tc(e,t);var b=e.props,S=b.roundRelative,w=b.minRoundControls,E=w===void 0?[0,0]:w,T=e.state,D=T.width,I=T.height;r.isRound=!0,r.prevDist=[0,0];var M=w2(e),z=_2(M||"",D,I,E,!0)||[];return r.controlPoses=z,T.borderRadiusState=C_(z,S,D,I).styles.join(" "),g},dragControl:function(e,t){var n=t.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,a=J(qa(t),2),o=a[0],c=a[1],u=[o,c],d=Ut(u,n.prevDist),h=e.props.maxRoundControls,g=h===void 0?[4,4]:h,m=e.state,b=m.width,S=m.height,w=r[i],E=w.vertical,T=w.horizontal,D=r.map(function(M){var z=M.horizontal,P=M.vertical,A=[z*T*u[0],P*E*u[1]];if(z){if(g[0]===1)return A;if(g[0]<4&&z!==T)return A}else{if(g[1]===0)return A[1]=P*T*u[0]/b*S,A;if(E){if(g[1]===1)return A;if(g[1]<4&&P!==E)return A}}return[0,0]});D[i]=u;var I=r.map(function(M,z){return Q(Q({},M),{pos:Te(M.pos,D[z])})});return i<4?I.slice(0,i+1).forEach(function(M){M.virtual=!1}):I.slice(4,i+1).forEach(function(M){M.virtual=!1}),n.prevDist=[o,c],S2(e,t,u,d,I)},dragControlEnd:function(e,t){var n=e.state;n.borderRadiusState="";var r=t.datas,i=t.isDouble;if(!r.isRound)return!1;var a=r.isControl,o=r.controlIndex,c=r.isLine,u=r.lineIndex,d=r.controlPoses,h=d.filter(function(T){var D=T.virtual;return D}).length,g=e.props.roundClickable,m=g===void 0?!0:g;if(i&&m){if(a&&(m===!0||m==="control"))x7(d,o);else if(c&&(m===!0||m==="line")){var b=J(lN(e,t),2),S=b[0],w=b[1];y7(d,u,S,w)}h!==d.filter(function(T){var D=T.virtual;return D}).length&&S2(e,t,[0,0],[0,0],d)}var E=ci(e,t,{});return Nt(e,"onRoundEnd",E),n.borderRadiusState="",E},dragGroupControlStart:function(e,t){var n=this.dragControlStart(e,t);if(!n)return!1;var r=e.moveables,i=e.props.targets,a=Wi(e,"roundable",t),o=Q({targets:e.props.targets,events:a.map(function(c,u){return Q(Q({},c),{target:i[u],moveable:r[u],currentTarget:r[u]})})},n);return Nt(e,"onRoundGroupStart",o),n},dragGroupControl:function(e,t){var n=this.dragControl(e,t);if(!n)return!1;var r=e.moveables,i=e.props.targets,a=Wi(e,"roundable",t),o=Q({targets:e.props.targets,events:a.map(function(c,u){return Q(Q(Q({},c),{target:i[u],moveable:r[u],currentTarget:r[u]}),Dr({borderRadius:n.borderRadius},c))})},n);return Nt(e,"onRoundGroup",o),o},dragGroupControlEnd:function(e,t){var n=e.moveables,r=e.props.targets,i=Wi(e,"roundable",t);av(e,"onRound",function(c){var u=Q({targets:e.props.targets,events:i.map(function(d,h){return Q(Q(Q({},d),{target:r[h],moveable:n[h],currentTarget:n[h]}),Dr({borderRadius:c.borderRadius},d))})},c);Nt(e,"onRoundGroup",u)});var a=this.dragControlEnd(e,t);if(!a)return!1;var o=Q({targets:e.props.targets,events:i.map(function(c,u){var d;return Q(Q({},c),{target:r[u],moveable:n[u],currentTarget:n[u],lastEvent:(d=c.datas)===null||d===void 0?void 0:d.lastEvent})})},a);return Nt(e,"onRoundGroupEnd",o),o},unset:function(e){e.state.borderRadiusState=""}};function S7(e,t){var n=t?4:3,r=Ke(n),i="matrix".concat(t?"3d":"","(").concat(r.join(","),")");return e===i||e==="matrix(1,0,0,1,0,0)"}var aM={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(e,t){var n=e.state,r=n.is3d,i=n.targetMatrix,a=n.inlineTransform,o=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(Wk(i,!0),")"),c=!a||a==="none"?o:a;t.datas.startTransforms=S7(c,r)?[]:Lo(c)},resetStyle:function(e){var t=e.datas;t.nextStyle={},t.nextTransforms=e.datas.startTransforms,t.nextTransformAppendedIndexes=[]},fillDragStartParams:function(e,t){return ae(e,t,{setTransform:function(n){t.datas.startTransforms=Pn(n)?n:Lo(n)},isPinch:!!t.isPinch})},fillDragParams:function(e,t){return ae(e,t,{isPinch:!!t.isPinch})},dragStart:function(e,t){this.setTransform(e,t),this.resetStyle(t),Nt(e,"onBeforeRenderStart",this.fillDragStartParams(e,t))},drag:function(e,t){t.datas.startTransforms||this.setTransform(e,t),this.resetStyle(t),Nt(e,"onBeforeRender",ae(e,t,{isPinch:!!t.isPinch}))},dragEnd:function(e,t){t.datas.startTransforms||(this.setTransform(e,t),this.resetStyle(t)),Nt(e,"onBeforeRenderEnd",ae(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag}))},dragGroupStart:function(e,t){var n=this;this.dragStart(e,t);var r=Wi(e,"beforeRenderable",t),i=e.moveables,a=r.map(function(o,c){var u=i[c];return n.setTransform(u,o),n.resetStyle(o),n.fillDragStartParams(u,o)});Nt(e,"onBeforeRenderGroupStart",ae(e,t,{isPinch:!!t.isPinch,targets:e.props.targets,setTransform:function(){},events:a}))},dragGroup:function(e,t){var n=this;this.drag(e,t);var r=Wi(e,"beforeRenderable",t),i=e.moveables,a=r.map(function(o,c){var u=i[c];return n.resetStyle(o),n.fillDragParams(u,o)});Nt(e,"onBeforeRenderGroup",ae(e,t,{isPinch:!!t.isPinch,targets:e.props.targets,events:a}))},dragGroupEnd:function(e,t){this.dragEnd(e,t),Nt(e,"onBeforeRenderGroupEnd",ae(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag,targets:e.props.targets}))},dragControlStart:function(e,t){return this.dragStart(e,t)},dragControl:function(e,t){return this.drag(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupControlStart:function(e,t){return this.dragGroupStart(e,t)},dragGroupControl:function(e,t){return this.dragGroup(e,t)},dragGroupControlEnd:function(e,t){return this.dragGroupEnd(e,t)}},sM={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(e,t){Nt(e,"onRenderStart",ae(e,t,{isPinch:!!t.isPinch}))},drag:function(e,t){Nt(e,"onRender",this.fillDragParams(e,t))},dragAfter:function(e,t){return this.drag(e,t)},dragEnd:function(e,t){Nt(e,"onRenderEnd",this.fillDragEndParams(e,t))},dragGroupStart:function(e,t){Nt(e,"onRenderGroupStart",ae(e,t,{isPinch:!!t.isPinch,targets:e.props.targets}))},dragGroup:function(e,t){var n=this,r=Wi(e,"beforeRenderable",t),i=e.moveables,a=r.map(function(o,c){var u=i[c];return n.fillDragParams(u,o)});Nt(e,"onRenderGroup",ae(e,t,Q(Q({isPinch:!!t.isPinch,targets:e.props.targets,transform:gg(t),transformObject:{}},Dr(mg(t))),{events:a})))},dragGroupEnd:function(e,t){var n=this,r=Wi(e,"beforeRenderable",t),i=e.moveables,a=r.map(function(o,c){var u=i[c];return n.fillDragEndParams(u,o)});Nt(e,"onRenderGroupEnd",ae(e,t,Q({isPinch:!!t.isPinch,isDrag:t.isDrag,targets:e.props.targets,events:a,transformObject:{},transform:gg(t)},Dr(mg(t)))))},dragControlStart:function(e,t){return this.dragStart(e,t)},dragControl:function(e,t){return this.drag(e,t)},dragControlAfter:function(e,t){return this.dragAfter(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupControlStart:function(e,t){return this.dragGroupStart(e,t)},dragGroupControl:function(e,t){return this.dragGroup(e,t)},dragGroupControlEnd:function(e,t){return this.dragGroupEnd(e,t)},fillDragParams:function(e,t){var n={};return xu(om(t)||[]).forEach(function(r){n[r.name]=r.functionValue}),ae(e,t,Q({isPinch:!!t.isPinch,transformObject:n,transform:gg(t)},Dr(mg(t))))},fillDragEndParams:function(e,t){var n={};return xu(om(t)||[]).forEach(function(r){n[r.name]=r.functionValue}),ae(e,t,Q({isPinch:!!t.isPinch,isDrag:t.isDrag,transformObject:n,transform:gg(t)},Dr(mg(t))))}};function Ed(e,t,n,r,i,a,o){a.clientDistX=a.distX,a.clientDistY=a.distY;var c=i==="Start",u=i==="End",d=i==="After",h=e.state.target,g=a.isRequest,m=r.indexOf("Control")>-1;if(!h||c&&m&&!g&&e.areaElement===a.inputEvent.target)return!1;var b=wt([],J(t),!1);if(g){var S=a.requestAble;b.some(function(B){return B.name===S})||b.push.apply(b,wt([],J(e.props.ables.filter(function(B){return B.name===S})),!1))}if(!b.length||b.every(function(B){return B.dragRelation}))return!1;var w=a.inputEvent,E;u&&w&&(E=document.elementFromPoint(a.clientX,a.clientY)||w.target);var T=!1,D=function(){var B;T=!0,(B=a.stop)===null||B===void 0||B.call(a)},I=c&&(!e.targetGesto||!e.controlGesto||!e.targetGesto.isFlag()||!e.controlGesto.isFlag());I&&e.updateRect(i,!0,!1);var M=a.datas,z=m?"controlGesto":"targetGesto",P=e[z],A=function(B,V,K){if(!(V in B)||P!==e[z])return!1;var Y=B.name,H=M[Y]||(M[Y]={});if(c&&(H.isEventStart=!K||!B[K]||B[K](e,a)),!H.isEventStart)return!1;var $=B[V](e,Q(Q({},a),{stop:D,datas:H,originalDatas:M,inputTarget:E}));return e._emitter.off(),c&&$===!1&&(H.isEventStart=!1),$};I&&b.forEach(function(B){B.unset&&B.unset(e)}),A(aM,"drag".concat(r).concat(i));var C=0,k=0;n.forEach(function(B){if(T)return!1;var V="".concat(B).concat(r).concat(i),K="".concat(B).concat(r,"Condition");i===""&&!g&&HF(e.state,a);var Y=b.filter(function(et){return et[V]});Y=Y.filter(function(et,at){return et.name&&Y.indexOf(et)===at});var H=Y.filter(function(et){return A(et,V,K)}),$=H.length;T&&++C,$&&++k,!T&&c&&Y.length&&!$&&(C+=Y.filter(function(et){var at=et.name,X=M[at];return X.isEventStart?et.dragRelation!=="strong":!1}).length?1:0)}),(!d||k)&&A(sM,"drag".concat(r).concat(i));var j=P!==e[z]||C===n.length;if((u||T||j)&&(e.state.gestos={},e.moveables&&e.moveables.forEach(function(B){B.state.gestos={}}),b.forEach(function(B){B.unset&&B.unset(e)})),c&&!j&&!g&&k&&e.props.preventDefault&&a?.preventDefault(),e.isUnmounted||j)return!1;if(!c&&k&&!o||u){var L=e.props.flushSync||jN;L(function(){e.updateRect(u?i:"",!0,!1),e.forceUpdate()})}return!c&&!u&&!d&&k&&!o&&Ed(e,t,n,r,i+"After",a),!0}function D_(e,t){return function(n,r){var i;r===void 0&&(r=n.inputEvent.target);var a=r,o=e.areaElement,c=e._dragTarget;return!c||!t&&(!((i=e.controlGesto)===null||i===void 0)&&i.isFlag())?!1:a===c||c.contains(a)||a===o||!e.isMoveableElement(a)&&!e.controlBox.contains(a)||Bn(a,"moveable-area")||Bn(a,"moveable-padding")||Bn(a,"moveable-edgeDraggable")}}function oM(e,t,n){var r=e.controlBox,i=[],a=e.props,o=a.dragArea,c=e.state.target,u=a.dragTarget;i.push(r),(!o||u)&&i.push(t),!o&&u&&c&&t!==c&&a.dragTargetSelf&&i.push(c);var d=D_(e);return cM(e,i,"targetAbles",n,{dragStart:d,pinchStart:d})}function lM(e,t){var n=e.controlBox,r=[];r.push(n);var i=D_(e,!0),a=function(o,c){if(c===void 0&&(c=o.inputEvent.target),c===n)return!0;var u=i(o,c);return!u};return cM(e,r,"controlAbles",t,{dragStart:a,pinchStart:a})}function cM(e,t,n,r,i){i===void 0&&(i={});var a=n==="targetAbles",o=e.props,c=o.pinchOutside,u=o.pinchThreshold,d=o.preventClickEventOnDrag,h=o.preventClickDefault,g=o.checkInput,m=o.dragFocusedInput,b=o.preventDefault,S=b===void 0?!0:b,w=o.preventRightClick,E=w===void 0?!0:w,T=o.preventWheelClick,D=T===void 0?!0:T,I=o.dragContainer,M=Ia(I,!0),z={preventDefault:S,preventRightClick:E,preventWheelClick:D,container:M||ko(e.getControlBoxElement()),pinchThreshold:u,pinchOutside:c,preventClickEventOnDrag:a?d:!1,preventClickEventOnDragStart:a?h:!1,preventClickEventByCondition:a?null:function(C){return e.controlBox.contains(C.target)},checkInput:a?g:!1,dragFocusedInput:m},P=new WU(t,z),A=r==="Control";return["drag","pinch"].forEach(function(C){["Start","","End"].forEach(function(k){P.on("".concat(C).concat(k),function(j){var L,B=j.eventType,V=C==="drag"&&j.isPinch;if(i[B]&&!i[B](j)){j.stop();return}if(!V){var K=C==="drag"?[C]:["drag",C],Y=wt([],J(e[n]),!1),H=Ed(e,Y,K,r,k,j);H?(e.props.stopPropagation||k==="Start"&&A)&&((L=j?.inputEvent)===null||L===void 0||L.stopPropagation()):j.stop()}})})}),P}var w7=(function(){function e(t,n,r){var i=this;this.target=t,this.moveable=n,this.eventName=r,this.ables=[],this._onEvent=function(a){var o=i.eventName,c=i.moveable;c.state.disableNativeEvent||i.ables.forEach(function(u){u[o](c,{inputEvent:a})})},t.addEventListener(r.toLowerCase(),this._onEvent)}return e.prototype.setAbles=function(t){this.ables=t},e.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},e})();function E7(e,t,n,r){var i;n===void 0&&(n=t);var a=pN(e,t),o=a.matrixes,c=a.is3d,u=a.targetMatrix,d=a.transformOrigin,h=a.targetOrigin,g=a.offsetContainer,m=a.hasFixed,b=a.zoom,S=z8(g,n),w=S.matrixes,E=S.is3d,T=S.offsetContainer,D=S.zoom,I=r,M=4,z=e.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in e,P=u,A=Ke(M),C=Ke(M),k=Ke(M),j=Ke(M),L=o.length,B=w.map(function(at){return Q(Q({},at),{matrix:at.matrix?wt([],J(at.matrix),!1):void 0})}).reverse();o.reverse(),!c&&I&&(P=Zi(P,3,4),Eb(o)),!E&&I&&Eb(B),B.forEach(function(at){C=Fe(C,at.matrix,M)});var V=n||Ko(e),K=((i=B[0])===null||i===void 0?void 0:i.target)||Hd(V,V,!0).offsetParent,Y=B.slice(1).reduce(function(at,X){return Fe(at,X.matrix,M)},Ke(M));o.forEach(function(at,X){if(L-2===X&&(k=A.slice()),L-1===X&&(j=A.slice()),!at.matrix){var U=o[X+1],Z=UF(at,U,K,M,Fe(Y,A,M));at.matrix=ql(Z,M)}A=Fe(A,at.matrix,M)});var H=!z&&c;P||(P=Ke(H?4:3));var $=iv(z&&P.length===16?Zi(P,4,3):P,H),et=C;return C=Yk(C,M,M),{hasZoom:b!==1||D!==1,hasFixed:m,matrixes:o,rootMatrix:C,originalRootMatrix:et,beforeMatrix:k,offsetMatrix:j,allMatrix:A,targetMatrix:P,targetTransform:$,inlineTransform:e.style.transform,transformOrigin:d,targetOrigin:h,is3d:I,offsetContainer:g,offsetRootContainer:T}}function T7(e,t,n,r){n===void 0&&(n=t);var i=0,a=0,o=0,c={},u=UN(e);if(e&&(i=u.offsetWidth,a=u.offsetHeight),e){var d=E7(e,t,n,r),h=du(d.allMatrix,d.transformOrigin,i,a);c=Q(Q({},d),h);var g=du(d.allMatrix,[50,50],100,100);o=FN([g.pos1,g.pos2],g.direction)}var m=4;return Q(Q(Q({hasZoom:!1,width:i,height:a,rotation:o},u),{originalRootMatrix:Ke(m),rootMatrix:Ke(m),beforeMatrix:Ke(m),offsetMatrix:Ke(m),allMatrix:Ke(m),targetMatrix:Ke(m),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),c)}function Rb(e,t,n,r,i,a){a===void 0&&(a=[]);var o=1,c=[0,0],u=yg(),d=yg(),h=yg(),g=yg(),m=[0,0],b={},S=T7(t,n,i,!0);if(t){var w=Wr(t);a.forEach(function(B){b[B]=w(B)});var E=S.is3d?4:3,T=du(S.offsetMatrix,Te(S.transformOrigin,Xk(S.targetMatrix,E)),S.width,S.height);o=T.direction,c=Te(T.origin,[T.left-S.left,T.top-S.top]),g=wd(S.offsetRootContainer);var D=Hd(r,r,!0).offsetParent||S.offsetRootContainer;if(S.hasZoom){var I=du(Fe(S.originalRootMatrix,S.allMatrix),S.transformOrigin,S.width,S.height),M=du(S.originalRootMatrix,fm(Wr(D)("transformOrigin")).map(function(B){return parseFloat(B)}),D.offsetWidth,D.offsetHeight);if(u=u1(I,g),h=u1(M,g,D,!0),e){var z=I.left,P=I.top;d=u1({left:z,top:P,bottom:P,right:P},g)}}else{u=wd(t),h=j8(D),e&&(d=wd(e));var A=h.left,C=h.top,k=h.clientLeft,j=h.clientTop,L=[u.left-A,u.top-C];m=Ut(Eu(S.rootMatrix,L,4),[k+S.left,j+S.top])}}return Q({targetClientRect:u,containerClientRect:h,moveableClientRect:d,rootContainerClientRect:g,beforeDirection:o,beforeOrigin:c,originalBeforeOrigin:c,target:t,style:b,offsetDelta:m},S)}function E2(e){var t=e.pos1,n=e.pos2,r=e.pos3,i=e.pos4;if(!t||!n||!r||!i)return null;var a=Hl([t,n,r,i]),o=[a.minX,a.minY],c=Ut(e.origin,o);return t=Ut(t,o),n=Ut(n,o),r=Ut(r,o),i=Ut(i,o),Q(Q({},e),{left:e.left,top:e.top,posDelta:o,pos1:t,pos2:n,pos3:r,pos4:i,origin:c,beforeOrigin:c,isPersisted:!0})}var Tu=(function(e){yh(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state=Q({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},Rb(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isMoveableMounted=!1,n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new Km,n._prevOriginalDragTarget=null,n._originalDragTarget=null,n._prevDragTarget=null,n._dragTarget=null,n._prevPropTarget=null,n._propTarget=null,n._prevDragArea=!1,n._isPropTargetChanged=!1,n._hasFirstTarget=!1,n._reiszeObserver=null,n._observerId=0,n._mutationObserver=null,n._rootContainer=null,n._viewContainer=null,n._viewClassNames=[],n._store={},n.checkUpdateRect=function(){if(!n.isDragging()){var r=n.props.parentMoveable;if(r){r.checkUpdateRect();return}BB(n._observerId),n._observerId=_k(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},n}return t.prototype.render=function(){var n=this.props,r=this.getState(),i=n.parentPosition,a=n.className,o=n.target,c=n.zoom,u=n.cspNonce,d=n.translateZ,h=n.cssStyled,g=n.groupable,m=n.linePadding,b=n.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var S=J(i||[0,0],2),w=S[0],E=S[1],T=r.left,D=r.top,I=r.target,M=r.direction,z=r.hasFixed,P=r.offsetDelta,A=n.targets,C=this.isDragging(),k={};this.getEnabledAbles().forEach(function(Y){k["data-able-".concat(Y.name.toLowerCase())]=!0});var j=this._getAbleClassName(),L=A&&A.length&&(I||g)||o||!this._hasFirstTarget&&this.state.isPersisted,B=this.controlBox||this.props.firstRenderState||this.props.persistData,V=[T-w,D-E];!g&&n.useAccuratePosition&&(V[0]+=P[0],V[1]+=P[1]);var K={position:z?"fixed":"absolute",display:L?"block":"none",visibility:B?"visible":"hidden",transform:"translate3d(".concat(V[0],"px, ").concat(V[1],"px, ").concat(d,")"),"--zoom":c,"--zoompx":"".concat(c,"px")};return m&&(K["--moveable-line-padding"]=m),b&&(K["--moveable-control-padding"]=b),Xi(h,Q({cspNonce:u,ref:ms(this,"controlBox"),className:"".concat(jt("control-box",M===-1?"reverse":"",C?"dragging":"")," ").concat(j," ").concat(a)},k,{onClick:this._onPreventClick,style:K}),this.renderAbles(),this._renderLines())},t.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var n=this.props,r=n.parentMoveable,i=n.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!r&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},t.prototype.componentDidUpdate=function(n){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(n)},t.prototype.componentWillUnmount=function(){var n,r;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(n=this._reiszeObserver)===null||n===void 0||n.disconnect(),(r=this._mutationObserver)===null||r===void 0||r.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),ou(this,!1),ou(this,!0);var a=this.events;for(var o in a){var c=a[o];c&&c.destroy()}},t.prototype.getTargets=function(){var n=this.props.target;return n?[n]:[]},t.prototype.getAble=function(n){var r=this.props.ables||[];return Xr(r,function(i){return i.name===n})},t.prototype.getContainer=function(){var n=this.props,r=n.parentMoveable,i=n.wrapperMoveable,a=n.container;return a||i&&i.getContainer()||r&&r.getContainer()||this.controlBox.parentElement},t.prototype.getControlBoxElement=function(){return this.controlBox},t.prototype.getDragElement=function(){return this._dragTarget},t.prototype.isMoveableElement=function(n){var r;return n&&(((r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"class"))||"").indexOf(u_)>-1},t.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=this.targetGesto,a=this.controlGesto;return i&&D_(this)({inputEvent:n},r)?i.isFlag()||i.triggerDragStart(n):a&&this.isMoveableElement(r)&&(a.isFlag()||a.triggerDragStart(n)),this},t.prototype.hitTest=function(n){var r=this.state,i=r.target,a=r.pos1,o=r.pos2,c=r.pos3,u=r.pos4,d=r.targetClientRect;if(!i)return 0;var h;if(Gu(n)){var g=n.getBoundingClientRect();h={left:g.left,top:g.top,width:g.width,height:g.height}}else h=Q({width:0,height:0},n);var m=h.left,b=h.top,S=h.width,w=h.height,E=YC([a,o,u,c],d),T=GU(E,[[m,b],[m+S,b],[m+S,b+w],[m,b+w]]),D=Zk(E);return!T||!D?0:Math.min(100,T/D*100)},t.prototype.isInside=function(n,r){var i=this.state,a=i.target,o=i.pos1,c=i.pos2,u=i.pos3,d=i.pos4,h=i.targetClientRect;return a?fb([n,r],YC([o,c,d,u],h)):!1},t.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0);var a=this.props,o=!a.parentPosition&&!a.wrapperMoveable;o&&Su(!0);var c=a.parentMoveable,u=this.state,d=u.target||a.target,h=this.getContainer(),g=c?c._rootContainer:this._rootContainer,m=Rb(this.controlBox,d,h,h,g||h,this._getRequestStyles());if(!d&&this._hasFirstTarget&&a.persistData){var b=E2(a.persistData);for(var S in b)m[S]=b[S]}o&&Su(),this.updateState(m,c?!1:i)},t.prototype.isDragging=function(n){var r,i,a=this.targetGesto,o=this.controlGesto;if(a?.isFlag()){if(!n)return!0;var c=a.getEventData();return!!(!((r=c[n])===null||r===void 0)&&r.isEventStart)}if(o?.isFlag()){if(!n)return!0;var c=o.getEventData();return!!(!((i=c[n])===null||i===void 0)&&i.isEventStart)}return!1},t.prototype.updateTarget=function(n){this.updateRect(n,!0)},t.prototype.getRect=function(){var n=this.state,r=Oi(this.state),i=J(r,4),a=i[0],o=i[1],c=i[2],u=i[3],d=Ii(r),h=n.width,g=n.height,m=d.width,b=d.height,S=d.left,w=d.top,E=[n.left,n.top],T=Te(E,n.origin),D=Te(E,n.beforeOrigin),I=n.transformOrigin;return{width:m,height:b,left:S,top:w,pos1:a,pos2:o,pos3:c,pos4:u,offsetWidth:h,offsetHeight:g,beforeOrigin:D,origin:T,transformOrigin:I,rotation:this.getRotation()}},t.prototype.getManager=function(){return this},t.prototype.stopDrag=function(n){if(!n||n==="target"){var r=this.targetGesto;r?.isIdle()===!1&&Tb(this,!1),r?.stop()}if(!n||n==="control"){var r=this.controlGesto;r?.isIdle()===!1&&Tb(this,!0),r?.stop()}},t.prototype.getRotation=function(){var n=this.state,r=n.pos1,i=n.pos2,a=n.direction;return XF(r,i,a)},t.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this,o=a.props,c=o.parentMoveable||o.wrapperMoveable||a,u=c.props.ables,d=o.groupable,h=Xr(u,function(T){return T.name===n});if(this.isDragging()||!h||!h.request)return{request:function(){return this},requestEnd:function(){return this}};var g=h.request(a),m=i||r.isInstant,b=g.isControl?"controlAbles":"targetAbles",S="".concat(d?"Group":"").concat(g.isControl?"Control":""),w=wt([],J(c[b]),!1),E={request:function(T){return Ed(a,w,["drag"],S,"",Q(Q({},g.request(T)),{requestAble:n,isRequest:!0}),m),E},requestEnd:function(){return Ed(a,w,["drag"],S,"End",Q(Q({},g.requestEnd()),{requestAble:n,isRequest:!0}),m),E}};return Ed(a,w,["drag"],S,"Start",Q(Q({},g.requestStart(r)),{requestAble:n,isRequest:!0}),m),m?E.request(r).requestEnd():E},t.prototype.getMoveables=function(){return[this]},t.prototype.destroy=function(){this.componentWillUnmount()},t.prototype.updateRenderPoses=function(){var n=this.getState(),r=this.props,i=r.padding,a=n.originalBeforeOrigin,o=n.transformOrigin,c=n.allMatrix,u=n.is3d,d=n.pos1,h=n.pos2,g=n.pos3,m=n.pos4,b=n.left,S=n.top,w=n.isPersisted,E=r.zoom||1;if(!i&&E<=1){n.renderPoses=[d,h,g,m],n.renderLines=[[d,h],[h,m],[m,g],[g,d]];return}var T=ZN(i||{}),D=T.left,I=T.top,M=T.bottom,z=T.right,P=u?4:3,A=[];w?A=o:this.controlBox&&r.groupable?A=a:A=Te(a,[b,S]);var C=am(P,ql(A.map(function(K){return-K}),P),c,ql(o,P)),k=Ei(C,d,[-D,-I],P),j=Ei(C,h,[z,-I],P),L=Ei(C,g,[-D,M],P),B=Ei(C,m,[z,M],P);n.renderPoses=[k,j,L,B],n.renderLines=[[k,j],[j,B],[B,L],[L,k]];{var V=E/2;n.renderLines=[[Ei(C,d,[-D-V,-I],P),Ei(C,h,[z+V,-I],P)],[Ei(C,h,[z,-I-V],P),Ei(C,m,[z,M+V],P)],[Ei(C,m,[z+V,M],P),Ei(C,g,[-D-V,M],P)],[Ei(C,g,[-D,M+V],P),Ei(C,d,[-D,-I-V],P)]]}},t.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,r=n.target,i=n.container,a=n.parentMoveable,o=this.state,c=o.target,u=o.container;if(!(!c&&!r)){this.updateAbles();var d=!Ab(c,r),h=d||!Ab(u,i);if(h){var g=i||this.controlBox;g&&this.unsetAbles(),this.updateState({target:r,container:i}),!a&&g&&this.updateRect("End",!1,!1),this._isPropTargetChanged=d}}},t.prototype.waitToChangeTarget=function(){return new Promise(function(){})},t.prototype.triggerEvent=function(n,r){var i=this.props;if(this._emitter.trigger(n,r),i.parentMoveable&&r.isRequest&&!r.isRequestChild)return i.parentMoveable.triggerEvent(n,r,!0);var a=i[n];return a&&a(r)},t.prototype.useCSS=function(n,r){var i=this.props.customStyledMap,a=n+r;return i[a]||(i[a]=eN(n,r)),i[a]},t.prototype.getState=function(){var n,r=this.props;(r.target||!((n=r.targets)===null||n===void 0)&&n.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,a=r.persistData,o=r.firstRenderState;if(o&&!i)return o;if(!this._hasFirstTarget&&a){var c=E2(a);if(c)return this.updateState(c,!1),this.state}return this.state.isPersisted=!1,this.state},t.prototype.updateSelectors=function(){},t.prototype.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(n)})},t.prototype.updateAbles=function(n,r){n===void 0&&(n=this.props.ables),r===void 0&&(r="");var i=this.props,a=i.triggerAblesSimultaneously,o=this.getEnabledAbles(n),c="drag".concat(r,"Start"),u="pinch".concat(r,"Start"),d="drag".concat(r,"ControlStart"),h=bg(o,[c,u],a),g=bg(o,[d],a);this.enabledAbles=o,this.targetAbles=h,this.controlAbles=g},t.prototype.updateState=function(n,r){if(r){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var a in n)i[a]=n[a]}},t.prototype.getEnabledAbles=function(n){n===void 0&&(n=this.props.ables);var r=this.props;return n.filter(function(i){return i&&(i.always&&r[i.name]!==!1||r[i.name])})},t.prototype.renderAbles=function(){var n=this,r=this.props,i=r.triggerAblesSimultaneously,a={createElement:Xi};return this.renderState={},qF(XN(bg(this.getEnabledAbles(),["render"],i).map(function(o){var c=o.render;return c(n,a)||[]})).filter(function(o){return o}),function(o){var c=o.key;return c}).map(function(o){return o[0]})},t.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},t.prototype._getRequestStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,o,c=(o=(a=i.requestStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return wt(wt([],J(r),!1),J(c),!1)},wt([],J(this.props.requestStyles||[]),!1));return n},t.prototype._updateObserver=function(n){this._updateResizeObserver(n),this._updateMutationObserver(n)},t.prototype._updateEvents=function(){var n=this.targetAbles.length,r=this.controlAbles.length,i=this._dragTarget,a=!n&&this.targetGesto||this._isTargetChanged(!0);a&&(ou(this,!1),this.updateState({gestos:{}})),r||ou(this,!0),i&&n&&!this.targetGesto&&(this.targetGesto=oM(this,i,"")),!this.controlGesto&&r&&(this.controlGesto=lM(this,"Control"))},t.prototype._updateTargets=function(){var n=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=n.dragArea,this._propTarget=n.target,this._originalDragTarget=n.dragTarget||n.target,this._dragTarget=Ia(this._originalDragTarget,!0)},t.prototype._renderLines=function(){var n=this.props,r=n,i=r.zoom,a=r.hideDefaultLines,o=r.hideChildMoveableDefaultLines,c=r.parentMoveable;if(a||c&&o)return[];var u=this.getState(),d={createElement:Xi};return u.renderLines.map(function(h,g){return qd(d,"",h[0],h[1],i,"render-line-".concat(g))})},t.prototype._isTargetChanged=function(n){var r=this.props,i=r.dragTarget||r.target,a=this._prevOriginalDragTarget,o=this._prevDragArea,c=r.dragArea,u=!c&&a!==i,d=(n||c)&&o!==c;return u||d||this._prevPropTarget!=this._propTarget},t.prototype._updateNativeEvents=function(){var n=this,r=this.props,i=r.dragArea?this.areaElement:this.state.target,a=this.events,o=Ts(a);if(this._isTargetChanged())for(var c in a){var u=a[c];u&&u.destroy(),a[c]=null}if(i){var d=this.enabledAbles;o.forEach(function(h){var g=bg(d,[h]),m=g.length>0,b=a[h];if(!m){b&&(b.destroy(),a[h]=null);return}b||(b=new w7(i,n,h),a[h]=b),b.setAbles(g)})}},t.prototype._checkUpdateRootContainer=function(){var n=this.props.rootContainer;!this._rootContainer&&n&&(this._rootContainer=Ia(n,!0))},t.prototype._checkUpdateViewContainer=function(){var n=this.props.viewContainer;!this._viewContainer&&n&&(this._viewContainer=Ia(n,!0));var r=this._viewContainer;r&&this._changeAbleViewClassNames(wt(wt([],J(this._getAbleViewClassNames()),!1),[this.isDragging()?e7:""],!1))},t.prototype._changeAbleViewClassNames=function(n){var r=this._viewContainer,i=YN(n.filter(Boolean),function(d){return d}).map(function(d){var h=J(d,1),g=h[0];return g}),a=this._viewClassNames,o=hh(a,i),c=o.removed,u=o.added;c.forEach(function(d){Ak(r,a[d])}),u.forEach(function(d){Tk(r,i[d])}),this._viewClassNames=i},t.prototype._getAbleViewClassNames=function(){var n=this;return(this.getEnabledAbles().map(function(r){var i;return((i=r.viewClassName)===null||i===void 0?void 0:i.call(r,n))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},t.prototype._getAbleClassName=function(n){var r=this;n===void 0&&(n="");var i=this.getEnabledAbles(),a=this.targetGesto,o=this.controlGesto,c=a?.isFlag()?a.getEventData():{},u=o?.isFlag()?o.getEventData():{};return i.map(function(d){var h,g,m,b=d.name,S=((h=d.className)===null||h===void 0?void 0:h.call(d,r))||"";return(!((g=c[b])===null||g===void 0)&&g.isEventStart||!((m=u[b])===null||m===void 0)&&m.isEventStart)&&(S+=" ".concat(jt("".concat(b).concat(n,"-dragging")))),S.trim()}).filter(Boolean).join(" ")},t.prototype._updateResizeObserver=function(n){var r,i=this.props,a=i.target,o=ko(this.getControlBoxElement());if(!o.ResizeObserver||!a||!i.useResizeObserver){(r=this._reiszeObserver)===null||r===void 0||r.disconnect();return}if(!(n.target===a&&this._reiszeObserver)){var c=new o.ResizeObserver(this.checkUpdateRect);c.observe(a,{box:"border-box"}),this._reiszeObserver=c}},t.prototype._updateMutationObserver=function(n){var r=this,i,a=this.props,o=a.target,c=ko(this.getControlBoxElement());if(!c.MutationObserver||!o||!a.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(n.target===o&&this._mutationObserver)){var u=new c.MutationObserver(function(d){var h,g;try{for(var m=s8(d),b=m.next();!b.done;b=m.next()){var S=b.value;S.type==="attributes"&&S.attributeName==="style"&&r.checkUpdateRect()}}catch(w){h={error:w}}finally{try{b&&!b.done&&(g=m.return)&&g.call(m)}finally{if(h)throw h.error}}});u.observe(o,{attributes:!0}),this._mutationObserver=u}},t.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:jN,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},t})(Mk),I_={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(e,t){var n,r=e.props,i=r.targets||[],a=e.getState(),o=a.left,c=a.top,u=a.isPersisted,d=r.zoom||1,h=e.renderGroupRects,g=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];u?i=g.map(function(){return null}):g=[];var m=lu(e,"parentPosition",[o,c],function(S){return S.join(",")}),b=lu(e,"requestStyles",e.getRequestChildStyles(),function(S){return S.join(",")});return e.moveables=e.moveables.slice(0,i.length),wt(wt([],J(i.map(function(S,w){return t.createElement(Tu,{key:"moveable"+w,ref:vk(e,"moveables",w),target:S,origin:!1,requestStyles:b,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:e,parentPosition:[o,c],persistData:g[w],zoom:d})})),!1),J(XN(h.map(function(S,w){var E=S.pos1,T=S.pos2,D=S.pos3,I=S.pos4,M=[E,T,D,I];return[[0,1],[1,3],[3,2],[2,0]].map(function(z,P){var A=J(z,2),C=A[0],k=A[1];return qd(t,"",Ut(M[C],m),Ut(M[k],m),d,"group-rect-".concat(w,"-").concat(P))})}))),!1)}},A7=bh("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(e,t){t.datas.inputTarget=t.inputEvent&&t.inputEvent.target},dragEnd:function(e,t){var n=e.props.target,r=t.inputEvent,i=t.inputTarget,a=e.isMoveableElement(i),o=!a&&e.controlBox.contains(i);if(!(!r||!i||t.isDrag||e.isMoveableElement(i)||o)){var c=n.contains(i);Nt(e,"onClick",ae(e,t,{isDouble:t.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:e.props.target,containsTarget:c}))}},dragGroupEnd:function(e,t){var n=t.inputEvent,r=t.inputTarget;if(!(!n||!r||t.isDrag||e.isMoveableElement(r)||t.datas.inputTarget===r)){var i=e.props.targets,a=i.indexOf(r),o=a>-1,c=!1;a===-1&&(a=Es(i,function(u){return u.contains(r)}),c=a>-1),Nt(e,"onClickGroup",ae(e,t,{isDouble:t.isDouble,targets:i,inputTarget:r,targetIndex:a,isTarget:o,containsTarget:c,moveableTarget:i[a]}))}},dragControlEnd:function(e,t){this.dragEnd(e,t)},dragGroupControlEnd:function(e,t){this.dragEnd(e,t)}});function Hc(e){var t=e.originalDatas.draggable;return t||(e.originalDatas.draggable={},t=e.originalDatas.draggable),Q(Q({},e),{datas:t})}var C7=bh("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(e,t){var n=e.props,r=n.edgeDraggable;return r?vN(t,"edgeDraggable",r,e.getState().renderPoses,n.zoom):[]},dragCondition:function(e,t){var n,r=e.props,i=(n=t.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&Bn(i,jt("direction"))&&Bn(i,jt("edge"))&&Bn(i,jt("edgeDraggable"))},dragStart:function(e,t){return Ar.dragStart(e,Hc(t))},drag:function(e,t){return Ar.drag(e,Hc(t))},dragEnd:function(e,t){return Ar.dragEnd(e,Hc(t))},dragGroupCondition:function(e,t){var n,r=e.props,i=(n=t.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&Bn(i,jt("direction"))&&Bn(i,jt("line"))},dragGroupStart:function(e,t){return Ar.dragGroupStart(e,Hc(t))},dragGroup:function(e,t){return Ar.dragGroup(e,Hc(t))},dragGroupEnd:function(e,t){return Ar.dragGroupEnd(e,Hc(t))},unset:function(e){return Ar.unset(e)}}),uM={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},k_=[aM,eM,kF,KF,Ar,C7,_b,QF,JF,hF,i7,a7,n7,v7,m7,_7,I_,uM,A7,tM,sM],R7=k_.reduce(function(e,t){return(t.events||[]).forEach(function(n){Ek(e,n)}),e},[]),D7=k_.reduce(function(e,t){return(t.props||[]).forEach(function(n){Ek(e,n)}),e},[]);function T2(e,t){var n=J(e,3),r=n[0],i=n[1],a=n[2];return(r*t[0]+i*t[1]+a)/Math.sqrt(r*r+i*i)}function Sg(e,t){var n=J(e,2),r=n[0],i=n[1];return-r*t[0]-i*t[1]}function A2(e,t){return Math.max.apply(Math,wt([],J(e.map(function(n){var r=J(n,4),i=r[0],a=r[1],o=r[2],c=r[3];return Math.max(i[t],a[t],o[t],c[t])})),!1))}function C2(e,t){return Math.min.apply(Math,wt([],J(e.map(function(n){var r=J(n,4),i=r[0],a=r[1],o=r[2],c=r[3];return Math.min(i[t],a[t],o[t],c[t])})),!1))}function I7(e,t){var n,r,i,a=[0,0],o=[0,0],c=[0,0],u=[0,0],d=0,h=0;if(!e.length)return{pos1:a,pos2:o,pos3:c,pos4:u,minX:0,minY:0,maxX:0,maxY:0,width:d,height:h,rotation:t};var g=Jt(t,Ir);if(g%90){var m=g/180*Math.PI,b=Math.tan(m),S=-1/b,w=[vb,KC],E=[[0,0],[0,0]],T=[vb,KC],D=[[0,0],[0,0]];e.forEach(function(rt){rt.forEach(function(st){var ht=T2([-b,1,0],st),dt=T2([-S,1,0],st);w[0]>ht&&(E[0]=st,w[0]=ht),w[1]<ht&&(E[1]=st,w[1]=ht),T[0]>dt&&(D[0]=st,T[0]=dt),T[1]<dt&&(D[1]=st,T[1]=dt)})});var I=J(E,2),M=I[0],z=I[1],P=J(D,2),A=P[0],C=P[1],k=[-b,1,Sg([-b,1],M)],j=[-b,1,Sg([-b,1],z)],L=[-S,1,Sg([-S,1],A)],B=[-S,1,Sg([-S,1],C)];n=J([[k,L],[k,B],[j,L],[j,B]].map(function(rt){var st=J(rt,2),ht=st[0],dt=st[1];return l_(ht,dt)[0]}),4),a=n[0],o=n[1],c=n[2],u=n[3],d=T[1]-T[0],h=w[1]-w[0]}else{var V=C2(e,0),K=C2(e,1),Y=A2(e,0),H=A2(e,1);if(a=[V,K],o=[Y,K],c=[V,H],u=[Y,H],d=Y-V,h=H-K,g%180){var $=[c,a,u,o];r=J($,4),a=r[0],o=r[1],c=r[2],u=r[3],d=H-K,h=Y-V}}if(g%360>180){var $=[u,c,o,a];i=J($,4),a=i[0],o=i[1],c=i[2],u=i[3]}var et=Hl([a,o,c,u]),at=et.minX,X=et.minY,U=et.maxX,Z=et.maxY;return{pos1:a,pos2:o,pos3:c,pos4:u,width:d,height:h,minX:at,minY:X,maxX:U,maxY:Z,rotation:t}}function fM(e,t){var n=t.map(function(r){if(Pn(r)){var i=fM(e,r),a=i.length;return a>1?i:a===1?i[0]:null}else{var o=Xr(e,function(c){var u=c.manager;return u.props.target===r});return o?(o.finded=!0,o.manager):null}}).filter(Boolean);return n.length===1&&Pn(n[0])?n[0]:n}var k7=(function(e){yh(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.differ=new Qk,n.moveables=[],n.transformOrigin="50% 50%",n.renderGroupRects=[],n._targetGroups=[],n._hasFirstTargets=!1,n}return t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this)},t.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},t.prototype.getTargets=function(){return this.props.targets},t.prototype.updateRect=function(n,r,i){var a;i===void 0&&(i=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;Su(!0),this.moveables.forEach(function(At){At.updateRect(n,!1,!1)});var c=this.props,u=this.moveables,d=o.target||c.target,h=u.map(function(At){return{finded:!1,manager:At}}),g=this.props.targetGroups||[],m=fM(h,g),b=c.useDefaultGroupRotate;m.push.apply(m,wt([],J(h.filter(function(At){var Dt=At.finded;return!Dt}).map(function(At){var Dt=At.manager;return Dt})),!1));var S=[],w=!r||n!==""&&c.updateGroup,E=c.defaultGroupRotate||0;if(!this._hasFirstTargets){var T=(a=c.persistData)===null||a===void 0?void 0:a.rotation;T!=null&&(E=T)}function D(At,Dt,Kt){var Et=At.map(function(be){if(Pn(be)){var Ot=D(be,Dt),Lt=[Ot.pos1,Ot.pos2,Ot.pos3,Ot.pos4];return S.push(Ot),{poses:Lt,rotation:Ot.rotation}}else return{poses:Oi(be.state),rotation:be.getRotation()}}),Rt=Et.map(function(be){var Ot=be.rotation;return Ot}),le=0,Vt=Rt[0],qt=Rt.every(function(be){return Math.abs(Vt-be)<.1});w?le=!b&&qt?Vt:E:le=!b&&!Kt&&qt?Vt:Dt;var Gt=Et.map(function(be){var Ot=be.poses;return Ot}),ce=I7(Gt,le);return ce}var I=D(m,this.rotation,!0);w&&(this.rotation=I.rotation,this.transformOrigin=c.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=g,this.renderGroupRects=S;var M=this.transformOrigin,z=this.rotation,P=this.scale,A=I.width,C=I.height,k=I.minX,j=I.minY,L=WF([[0,0],[A,0],[0,C],[A,C]],A_(M,A,C),this.rotation/180*Math.PI),B=Hl(L.result),V=B.minX,K=B.minY,Y=" rotate(".concat(z,"deg)")+" scale(".concat(Cr(P[0]),", ").concat(Cr(P[1]),")"),H="translate(".concat(-V,"px, ").concat(-K,"px)").concat(Y);this.controlBox.style.transform="translate3d(".concat(k,"px, ").concat(j,"px, ").concat(this.props.translateZ||0,")"),d.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(M,";")+"width:".concat(A,"px;height:").concat(C,"px;")+"transform: ".concat(H),o.width=A,o.height=C;var $=this.getContainer(),et=Rb(this.controlBox,d,this.controlBox,this.getContainer(),this._rootContainer||$,[]),at=[et.left,et.top],X=J(Oi(et),4),U=X[0],Z=X[1],rt=X[2],st=X[3],ht=Hl([U,Z,rt,st]),dt=[ht.minX,ht.minY],bt=Cr(P[0]*P[1]);et.pos1=Ut(U,dt),et.pos2=Ut(Z,dt),et.pos3=Ut(rt,dt),et.pos4=Ut(st,dt),et.left=k-et.left+dt[0],et.top=j-et.top+dt[1],et.origin=Ut(Te(at,et.origin),dt),et.beforeOrigin=Ut(Te(at,et.beforeOrigin),dt),et.originalBeforeOrigin=Te(at,et.originalBeforeOrigin),et.transformOrigin=Ut(Te(at,et.transformOrigin),dt),d.style.transform="translate(".concat(-V-dt[0],"px, ").concat(-K-dt[1],"px)")+Y,Su(),this.updateState(Q(Q({},et),{posDelta:dt,direction:bt,beforeDirection:bt}),i)},t.prototype.getRect=function(){return Q(Q({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},t.prototype.triggerEvent=function(n,r,i){if(i||n.indexOf("Group")>-1)return e.prototype.triggerEvent.call(this,n,r);this._emitter.trigger(n,r)},t.prototype.getRequestChildStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,o,c=(o=(a=i.requestChildStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return wt(wt([],J(r),!1),J(c),!1)},[]);return n},t.prototype.getMoveables=function(){return wt([],J(this.moveables),!1)},t.prototype.updateAbles=function(){e.prototype.updateAbles.call(this,wt(wt([],J(this.props.ables),!1),[I_],!1),"Group")},t.prototype._updateTargets=function(){e.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=Ia(this._originalDragTarget,!0)},t.prototype._updateEvents=function(){var n=this.state,r=this.props,i=this._prevDragTarget,a=r.dragTarget||this.areaElement,o=r.targets,c=this.differ.update(o),u=c.added,d=c.changed,h=c.removed,g=u.length||h.length;(g||this._prevOriginalDragTarget!==this._originalDragTarget)&&(ou(this,!1),ou(this,!0),this.updateState({gestos:{}})),i!==a&&(n.target=null),n.target||(n.target=this.areaElement,this.controlBox.style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=oM(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=lM(this,"GroupControl")));var m=!Ab(n.container,r.container);m&&(n.container=r.container),(m||g||this.transformOrigin!==(r.defaultGroupOrigin||"50% 50%")||d.length||o.length&&!QN(this._targetGroups,r.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!g},t.prototype._updateObserver=function(){},t.defaultProps=Q(Q({},Tu.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),t})(Tu),N7=(function(e){yh(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.moveables=[],n}return t.prototype.render=function(){var n=this,r,i=this.props,a=i.cspNonce,o=i.cssStyled,c=i.persistData,u=i.targets||[],d=u.length,h=this.isUnmounted||!d,g=(r=c?.children)!==null&&r!==void 0?r:[];return h&&!d&&g.length?u=g.map(function(){return null}):h||(g=[]),Xi(o,{cspNonce:a,ref:ms(this,"controlBox"),className:jt("control-box")},u.map(function(m,b){var S,w,E=(w=(S=i.individualGroupableProps)===null||S===void 0?void 0:S.call(i,m,b))!==null&&w!==void 0?w:{};return Xi(Tu,Q({key:"moveable"+b,ref:vk(n,"moveables",b)},i,E,{target:m,wrapperMoveable:n,isWrapperMounted:n.isMoveableMounted,persistData:g[b]}))}))},t.prototype.componentDidMount=function(){},t.prototype.componentDidUpdate=function(){},t.prototype.getTargets=function(){return this.props.targets},t.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0),Su(!0),this.moveables.forEach(function(a){a.updateRect(n,r,i)}),Su()},t.prototype.getRect=function(){return Q(Q({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},t.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this.moveables.map(function(u){return u.request(n,Q(Q({},r),{isInstant:!1}),!1)}),o=i||r.isInstant,c={request:function(u){return a.forEach(function(d){return d.request(u)}),this},requestEnd:function(){return a.forEach(function(u){return u.requestEnd()}),this}};return o?c.request(r).requestEnd():c},t.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=r,a=Xr(this.moveables,function(o){var c=o.getTargets()[0],u=o.getControlBoxElement(),d=o.getDragElement();return!c||!d?!1:d===i||d.contains(i)||d!==c&&c===i||c.contains(i)||u===i||u.contains(i)});return a&&a.dragStart(n,r),this},t.prototype.hitTest=function(){return 0},t.prototype.isInside=function(){return!1},t.prototype.isDragging=function(){return!1},t.prototype.getDragElement=function(){return null},t.prototype.getMoveables=function(){return wt([],J(this.moveables),!1)},t.prototype.updateRenderPoses=function(){},t.prototype.checkUpdate=function(){},t.prototype.triggerEvent=function(){},t.prototype.updateAbles=function(){},t.prototype._updateEvents=function(){},t.prototype._updateObserver=function(){},t})(Tu);function dM(e,t){var n=[];return e.forEach(function(r){if(r){if(Yr(r)){t[r]&&n.push.apply(n,wt([],J(t[r]),!1));return}Pn(r)?n.push.apply(n,wt([],J(dM(r,t)),!1)):n.push(r)}}),n}function hM(e,t){var n=[];return e.forEach(function(r){if(r){if(Yr(r)){t[r]&&n.push.apply(n,wt([],J(t[r]),!1));return}Pn(r)?n.push(hM(r,t)):n.push(r)}}),n}function pM(e,t){return e.length!==t.length||e.some(function(n,r){var i=t[r];return!n&&!i?!1:n!=i?Pn(n)&&Pn(i)?pM(n,i):!0:!1})}var M7=(function(e){yh(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n._differ=new Qk,n._elementTargets=[],n._tmpRefTargets=[],n._tmpSelectorMap={},n._onChangeTargets=null,n}return t.makeStyled=function(){var n={},r=this.getTotalAbles();r.forEach(function(a){var o=a.css;o&&o.forEach(function(c){n[c]=!0})});var i=Ts(n).join(`
`);this.defaultStyled=eN("div",RB(u_,v8+i))},t.getTotalAbles=function(){return wt([eM,I_,uM,tM],J(this.defaultAbles),!1)},t.prototype.render=function(){var n,r=this.constructor;r.defaultStyled||r.makeStyled();var i=this.props,a=i.ables,o=i.props,c=i8(i,["ables","props"]),u=J(this._updateRefs(!0),2),d=u[0],h=u[1],g=dM(d,h),m=g.length>1,b=r.getTotalAbles(),S=wt(wt([],J(b),!1),J(a||[]),!1),w=Q(Q(Q({},c),o||{}),{ables:S,cssStyled:r.defaultStyled,customStyledMap:r.customStyledMap});this._elementTargets=g;var E=null,T=this.moveable,D=c.persistData;if(D?.children&&(m=!0),c.individualGroupable)return Xi(N7,Q({key:"individual-group",ref:ms(this,"moveable")},w,{target:null,targets:g}));if(m){var I=hM(d,h);if(T&&!T.props.groupable&&!T.props.individualGroupable){var M=T.props.target;M&&g.indexOf(M)>-1&&(E=Q({},T.state))}return Xi(k7,Q({key:"group",ref:ms(this,"moveable")},w,(n=c.groupableProps)!==null&&n!==void 0?n:{},{target:null,targets:g,targetGroups:I,firstRenderState:E}))}else{var z=g[0];if(T&&(T.props.groupable||T.props.individualGroupable)){var P=T.moveables||[],A=Xr(P,function(C){return C.props.target===z});A&&(E=Q({},A.state))}return Xi(Tu,Q({key:"single",ref:ms(this,"moveable")},w,{target:z,firstRenderState:E}))}},t.prototype.componentDidMount=function(){this._checkChangeTargets()},t.prototype.componentDidUpdate=function(){this._checkChangeTargets()},t.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},t.prototype.getTargets=function(){var n,r;return(r=(n=this.moveable)===null||n===void 0?void 0:n.getTargets())!==null&&r!==void 0?r:[]},t.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},t.prototype.waitToChangeTarget=function(){var n=this,r;return this._onChangeTargets=function(){n._onChangeTargets=null,r()},new Promise(function(i){r=i})},t.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},t.prototype.getManager=function(){return this.moveable},t.prototype.getMoveables=function(){return this.moveable.getMoveables()},t.prototype.getDragElement=function(){return this.moveable.getDragElement()},t.prototype._updateRefs=function(n){var r=this.refTargets,i=T_(this.props.target||this.props.targets),a=typeof document<"u",o=pM(r,i),c=this.selectorMap,u={};return this.refTargets.forEach(function d(h){if(Yr(h)){var g=c[h];g?u[h]=c[h]:a&&(o=!0,u[h]=[].slice.call(document.querySelectorAll(h)))}else Pn(h)&&h.forEach(d)}),this._tmpRefTargets=i,this._tmpSelectorMap=u,[i,u,!n&&o]},t.prototype._checkChangeTargets=function(){var n,r,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var a=this._differ.update(this._elementTargets),o=a.added,c=a.removed,u=o.length||c.length;u&&((r=(n=this.props).onChangeTargets)===null||r===void 0||r.call(n,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var d=J(this._updateRefs(),3),h=d[0],g=d[1],m=d[2];this.refTargets=h,this.selectorMap=g,m&&this.forceUpdate()},t.defaultAbles=[],t.customStyledMap={},t.defaultStyled=null,a8([DB(oN)],t.prototype,"moveable",void 0),t})(Mk),O7=(function(e){yh(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.defaultAbles=k_,t})(M7),Db=function(e,t){return Db=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Db(e,t)};function N_(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Db(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var $d=function(){return $d=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},$d.apply(this,arguments)};function P7(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}var V7=(function(e){N_(t,e);function t(r){var i=e.call(this,r)||this;return i.state={},i.state=i.props,i}var n=t.prototype;return n.render=function(){return Xi(O7,$d({ref:ms(this,"moveable")},this.state))},t})(n_),j7=D7,z7=oN,L7=R7,B7=(function(e){N_(t,e);function t(r,i){i===void 0&&(i={});var a=e.call(this)||this;a.containerProvider=null,a.selfElement=null,a._warp=!1;var o=$d({},i),c={};L7.forEach(function(h){c[LB("on ".concat(h))]=function(g){return a.trigger(h,g)}});var u;i.warpSelf?(delete i.warpSelf,a._warp=!0,u=r):(u=Fu(r).createElement("div"),r.appendChild(u)),a.containerProvider=qC(Xi(V7,$d({ref:ms(a,"innerMoveable")},o,c)),u),a.selfElement=u;var d=o.target;return Pn(d)&&d.length>1&&a.updateRect(),a}var n=t.prototype;return n.setState=function(r,i){this.innerMoveable.setState(r,i)},n.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},n.dragStart=function(r,i){i===void 0&&(i=r.target);var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r,i)},n.destroy=function(){var r,i=this.selfElement;qC(null,i,this.containerProvider),this._warp||(r=i?.parentElement)===null||r===void 0||r.removeChild(i),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},t=P7([PC(z7,function(r,i){r[i]||(r[i]=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var c=this.getMoveable();if(!(!c||!c[i]))return c[i].apply(c,a)})}),PC(j7,function(r,i){Object.defineProperty(r,i,{get:function(){return this.getMoveable().props[i]},set:function(a){var o;this.setState((o={},o[i]=a,o))},enumerable:!0,configurable:!0})})],t),t})(Km),U7=(function(e){N_(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(B7);const R2=e=>{let t;const n=new Set,r=(d,h)=>{const g=typeof d=="function"?d(t):d;if(!Object.is(g,t)){const m=t;t=h??(typeof g!="object"||g===null)?g:Object.assign({},t,g),n.forEach(b=>b(t,m))}},i=()=>t,c={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d))},u=t=e(r,i,c);return c},F7=(e=>e?R2(e):R2),G7=e=>e;function q7(e,t=G7){const n=ng.useSyncExternalStore(e.subscribe,ng.useCallback(()=>t(e.getState()),[e,t]),ng.useCallback(()=>t(e.getInitialState()),[e,t]));return ng.useDebugValue(n),n}const D2=e=>{const t=F7(e),n=r=>q7(t,r);return Object.assign(n,t),n},sv=(e=>e?D2(e):D2);function H7(e,t){let n;try{n=e()}catch{return}return{getItem:i=>{var a;const o=u=>u===null?null:JSON.parse(u,void 0),c=(a=n.getItem(i))!=null?a:null;return c instanceof Promise?c.then(o):o(c)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const Ib=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return Ib(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Ib(r)(n)}}}},$7=(e,t)=>(n,r,i)=>{let a={storage:H7(()=>localStorage),partialize:w=>w,version:0,merge:(w,E)=>({...E,...w}),...t},o=!1;const c=new Set,u=new Set;let d=a.storage;if(!d)return e((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...w)},r,i);const h=()=>{const w=a.partialize({...r()});return d.setItem(a.name,{state:w,version:a.version})},g=i.setState;i.setState=(w,E)=>(g(w,E),h());const m=e((...w)=>(n(...w),h()),r,i);i.getInitialState=()=>m;let b;const S=()=>{var w,E;if(!d)return;o=!1,c.forEach(D=>{var I;return D((I=r())!=null?I:m)});const T=((E=a.onRehydrateStorage)==null?void 0:E.call(a,(w=r())!=null?w:m))||void 0;return Ib(d.getItem.bind(d))(a.name).then(D=>{if(D)if(typeof D.version=="number"&&D.version!==a.version){if(a.migrate){const I=a.migrate(D.state,D.version);return I instanceof Promise?I.then(M=>[!0,M]):[!0,I]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,D.state];return[!1,void 0]}).then(D=>{var I;const[M,z]=D;if(b=a.merge(z,(I=r())!=null?I:m),n(b,!0),M)return h()}).then(()=>{T?.(b,void 0),b=r(),o=!0,u.forEach(D=>D(b))}).catch(D=>{T?.(void 0,D)})};return i.persist={setOptions:w=>{a={...a,...w},w.storage&&(d=w.storage)},clearStorage:()=>{d?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>S(),hasHydrated:()=>o,onHydrate:w=>(c.add(w),()=>{c.delete(w)}),onFinishHydration:w=>(u.add(w),()=>{u.delete(w)})},a.skipHydration||S(),b||m},M_=$7;var cu=9e15,Qo=1e9,kb="0123456789abcdef",gm="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",mm="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Nb={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-cu,maxE:cu,crypto:!1},gM,ds,Qt=!0,ov="[DecimalError] ",Fo=ov+"Invalid argument: ",mM=ov+"Precision limit exceeded",vM=ov+"crypto unavailable",yM="[object Decimal]",yr=Math.floor,Ln=Math.pow,Y7=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,X7=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,W7=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,bM=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ki=1e7,$t=7,K7=9007199254740991,Q7=gm.length-1,Mb=mm.length-1,_t={toStringTag:yM};_t.absoluteValue=_t.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),zt(e)};_t.ceil=function(){return zt(new this.constructor(this),this.e+1,2)};_t.clampedTo=_t.clamp=function(e,t){var n,r=this,i=r.constructor;if(e=new i(e),t=new i(t),!e.s||!t.s)return new i(NaN);if(e.gt(t))throw Error(Fo+t);return n=r.cmp(e),n<0?e:r.cmp(t)>0?t:new i(r)};_t.comparedTo=_t.cmp=function(e){var t,n,r,i,a=this,o=a.d,c=(e=new a.constructor(e)).d,u=a.s,d=e.s;if(!o||!c)return!u||!d?NaN:u!==d?u:o===c?0:!o^u<0?1:-1;if(!o[0]||!c[0])return o[0]?u:c[0]?-d:0;if(u!==d)return u;if(a.e!==e.e)return a.e>e.e^u<0?1:-1;for(r=o.length,i=c.length,t=0,n=r<i?r:i;t<n;++t)if(o[t]!==c[t])return o[t]>c[t]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1};_t.cosine=_t.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+$t,r.rounding=1,n=Z7(r,EM(r,n)),r.precision=e,r.rounding=t,zt(ds==2||ds==3?n.neg():n,e,t,!0)):new r(1):new r(NaN)};_t.cubeRoot=_t.cbrt=function(){var e,t,n,r,i,a,o,c,u,d,h=this,g=h.constructor;if(!h.isFinite()||h.isZero())return new g(h);for(Qt=!1,a=h.s*Ln(h.s*h,1/3),!a||Math.abs(a)==1/0?(n=ar(h.d),e=h.e,(a=(e-n.length+1)%3)&&(n+=a==1||a==-2?"0":"00"),a=Ln(n,1/3),e=yr((e+1)/3)-(e%3==(e<0?-1:2)),a==1/0?n="5e"+e:(n=a.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),r=new g(n),r.s=h.s):r=new g(a.toString()),o=(e=g.precision)+3;;)if(c=r,u=c.times(c).times(c),d=u.plus(h),r=qe(d.plus(h).times(c),d.plus(u),o+2,1),ar(c.d).slice(0,o)===(n=ar(r.d)).slice(0,o))if(n=n.slice(o-3,o+1),n=="9999"||!i&&n=="4999"){if(!i&&(zt(c,e+1,0),c.times(c).times(c).eq(h))){r=c;break}o+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(zt(r,e+1,1),t=!r.times(r).times(r).eq(h));break}return Qt=!0,zt(r,e,g.rounding,t)};_t.decimalPlaces=_t.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-yr(this.e/$t))*$t,e=t[e],e)for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n};_t.dividedBy=_t.div=function(e){return qe(this,new this.constructor(e))};_t.dividedToIntegerBy=_t.divToInt=function(e){var t=this,n=t.constructor;return zt(qe(t,new n(e),0,1,1),n.precision,n.rounding)};_t.equals=_t.eq=function(e){return this.cmp(e)===0};_t.floor=function(){return zt(new this.constructor(this),this.e+1,3)};_t.greaterThan=_t.gt=function(e){return this.cmp(e)>0};_t.greaterThanOrEqualTo=_t.gte=function(e){var t=this.cmp(e);return t==1||t===0};_t.hyperbolicCosine=_t.cosh=function(){var e,t,n,r,i,a=this,o=a.constructor,c=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return c;n=o.precision,r=o.rounding,o.precision=n+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<32?(e=Math.ceil(i/3),t=(1/cv(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),a=Au(o,1,a.times(t),new o(1),!0);for(var u,d=e,h=new o(8);d--;)u=a.times(a),a=c.minus(u.times(h.minus(u.times(h))));return zt(a,o.precision=n,o.rounding=r,!0)};_t.hyperbolicSine=_t.sinh=function(){var e,t,n,r,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(t=a.precision,n=a.rounding,a.precision=t+Math.max(i.e,i.sd())+4,a.rounding=1,r=i.d.length,r<3)i=Au(a,2,i,i,!0);else{e=1.4*Math.sqrt(r),e=e>16?16:e|0,i=i.times(1/cv(5,e)),i=Au(a,2,i,i,!0);for(var o,c=new a(5),u=new a(16),d=new a(20);e--;)o=i.times(i),i=i.times(c.plus(o.times(u.times(o).plus(d))))}return a.precision=t,a.rounding=n,zt(i,t,n,!0)};_t.hyperbolicTangent=_t.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,qe(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)};_t.inverseCosine=_t.acos=function(){var e=this,t=e.constructor,n=e.abs().cmp(1),r=t.precision,i=t.rounding;return n!==-1?n===0?e.isNeg()?Aa(t,r,i):new t(0):new t(NaN):e.isZero()?Aa(t,r+4,i).times(.5):(t.precision=r+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=r,t.rounding=i,e.times(2))};_t.inverseHyperbolicCosine=_t.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,Qt=!1,n=n.times(n).minus(1).sqrt().plus(n),Qt=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)};_t.inverseHyperbolicSine=_t.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,Qt=!1,n=n.times(n).plus(1).sqrt().plus(n),Qt=!0,r.precision=e,r.rounding=t,n.ln())};_t.inverseHyperbolicTangent=_t.atanh=function(){var e,t,n,r,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=a.precision,t=a.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?zt(new a(i),e,t,!0):(a.precision=n=r-i.e,i=qe(i.plus(1),new a(1).minus(i),n+e,1),a.precision=e+4,a.rounding=1,i=i.ln(),a.precision=e,a.rounding=t,i.times(.5))):new a(NaN)};_t.inverseSine=_t.asin=function(){var e,t,n,r,i=this,a=i.constructor;return i.isZero()?new a(i):(t=i.abs().cmp(1),n=a.precision,r=a.rounding,t!==-1?t===0?(e=Aa(a,n+4,r).times(.5),e.s=i.s,e):new a(NaN):(a.precision=n+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=n,a.rounding=r,i.times(2)))};_t.inverseTangent=_t.atan=function(){var e,t,n,r,i,a,o,c,u,d=this,h=d.constructor,g=h.precision,m=h.rounding;if(d.isFinite()){if(d.isZero())return new h(d);if(d.abs().eq(1)&&g+4<=Mb)return o=Aa(h,g+4,m).times(.25),o.s=d.s,o}else{if(!d.s)return new h(NaN);if(g+4<=Mb)return o=Aa(h,g+4,m).times(.5),o.s=d.s,o}for(h.precision=c=g+10,h.rounding=1,n=Math.min(28,c/$t+2|0),e=n;e;--e)d=d.div(d.times(d).plus(1).sqrt().plus(1));for(Qt=!1,t=Math.ceil(c/$t),r=1,u=d.times(d),o=new h(d),i=d;e!==-1;)if(i=i.times(u),a=o.minus(i.div(r+=2)),i=i.times(u),o=a.plus(i.div(r+=2)),o.d[t]!==void 0)for(e=t;o.d[e]===a.d[e]&&e--;);return n&&(o=o.times(2<<n-1)),Qt=!0,zt(o,h.precision=g,h.rounding=m,!0)};_t.isFinite=function(){return!!this.d};_t.isInteger=_t.isInt=function(){return!!this.d&&yr(this.e/$t)>this.d.length-2};_t.isNaN=function(){return!this.s};_t.isNegative=_t.isNeg=function(){return this.s<0};_t.isPositive=_t.isPos=function(){return this.s>0};_t.isZero=function(){return!!this.d&&this.d[0]===0};_t.lessThan=_t.lt=function(e){return this.cmp(e)<0};_t.lessThanOrEqualTo=_t.lte=function(e){return this.cmp(e)<1};_t.logarithm=_t.log=function(e){var t,n,r,i,a,o,c,u,d=this,h=d.constructor,g=h.precision,m=h.rounding,b=5;if(e==null)e=new h(10),t=!0;else{if(e=new h(e),n=e.d,e.s<0||!n||!n[0]||e.eq(1))return new h(NaN);t=e.eq(10)}if(n=d.d,d.s<0||!n||!n[0]||d.eq(1))return new h(n&&!n[0]?-1/0:d.s!=1?NaN:n?0:1/0);if(t)if(n.length>1)a=!0;else{for(i=n[0];i%10===0;)i/=10;a=i!==1}if(Qt=!1,c=g+b,o=Do(d,c),r=t?vm(h,c+10):Do(e,c),u=qe(o,r,c,1),Yd(u.d,i=g,m))do if(c+=10,o=Do(d,c),r=t?vm(h,c+10):Do(e,c),u=qe(o,r,c,1),!a){+ar(u.d).slice(i+1,i+15)+1==1e14&&(u=zt(u,g+1,0));break}while(Yd(u.d,i+=10,m));return Qt=!0,zt(u,g,m)};_t.minus=_t.sub=function(e){var t,n,r,i,a,o,c,u,d,h,g,m,b=this,S=b.constructor;if(e=new S(e),!b.d||!e.d)return!b.s||!e.s?e=new S(NaN):b.d?e.s=-e.s:e=new S(e.d||b.s!==e.s?b:NaN),e;if(b.s!=e.s)return e.s=-e.s,b.plus(e);if(d=b.d,m=e.d,c=S.precision,u=S.rounding,!d[0]||!m[0]){if(m[0])e.s=-e.s;else if(d[0])e=new S(b);else return new S(u===3?-0:0);return Qt?zt(e,c,u):e}if(n=yr(e.e/$t),h=yr(b.e/$t),d=d.slice(),a=h-n,a){for(g=a<0,g?(t=d,a=-a,o=m.length):(t=m,n=h,o=d.length),r=Math.max(Math.ceil(c/$t),o)+2,a>r&&(a=r,t.length=1),t.reverse(),r=a;r--;)t.push(0);t.reverse()}else{for(r=d.length,o=m.length,g=r<o,g&&(o=r),r=0;r<o;r++)if(d[r]!=m[r]){g=d[r]<m[r];break}a=0}for(g&&(t=d,d=m,m=t,e.s=-e.s),o=d.length,r=m.length-o;r>0;--r)d[o++]=0;for(r=m.length;r>a;){if(d[--r]<m[r]){for(i=r;i&&d[--i]===0;)d[i]=Ki-1;--d[i],d[r]+=Ki}d[r]-=m[r]}for(;d[--o]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(e.d=d,e.e=lv(d,n),Qt?zt(e,c,u):e):new S(u===3?-0:0)};_t.modulo=_t.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?zt(new r(n),r.precision,r.rounding):(Qt=!1,r.modulo==9?(t=qe(n,e.abs(),0,3,1),t.s*=e.s):t=qe(n,e,0,r.modulo,1),t=t.times(e),Qt=!0,n.minus(t))};_t.naturalExponential=_t.exp=function(){return Ob(this)};_t.naturalLogarithm=_t.ln=function(){return Do(this)};_t.negated=_t.neg=function(){var e=new this.constructor(this);return e.s=-e.s,zt(e)};_t.plus=_t.add=function(e){var t,n,r,i,a,o,c,u,d,h,g=this,m=g.constructor;if(e=new m(e),!g.d||!e.d)return!g.s||!e.s?e=new m(NaN):g.d||(e=new m(e.d||g.s===e.s?g:NaN)),e;if(g.s!=e.s)return e.s=-e.s,g.minus(e);if(d=g.d,h=e.d,c=m.precision,u=m.rounding,!d[0]||!h[0])return h[0]||(e=new m(g)),Qt?zt(e,c,u):e;if(a=yr(g.e/$t),r=yr(e.e/$t),d=d.slice(),i=a-r,i){for(i<0?(n=d,i=-i,o=h.length):(n=h,r=a,o=d.length),a=Math.ceil(c/$t),o=a>o?a+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=d.length,i=h.length,o-i<0&&(i=o,n=h,h=d,d=n),t=0;i;)t=(d[--i]=d[i]+h[i]+t)/Ki|0,d[i]%=Ki;for(t&&(d.unshift(t),++r),o=d.length;d[--o]==0;)d.pop();return e.d=d,e.e=lv(d,r),Qt?zt(e,c,u):e};_t.precision=_t.sd=function(e){var t,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Fo+e);return n.d?(t=xM(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t};_t.round=function(){var e=this,t=e.constructor;return zt(new t(e),e.e+1,t.rounding)};_t.sine=_t.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+$t,r.rounding=1,n=tG(r,EM(r,n)),r.precision=e,r.rounding=t,zt(ds>2?n.neg():n,e,t,!0)):new r(NaN)};_t.squareRoot=_t.sqrt=function(){var e,t,n,r,i,a,o=this,c=o.d,u=o.e,d=o.s,h=o.constructor;if(d!==1||!c||!c[0])return new h(!d||d<0&&(!c||c[0])?NaN:c?o:1/0);for(Qt=!1,d=Math.sqrt(+o),d==0||d==1/0?(t=ar(c),(t.length+u)%2==0&&(t+="0"),d=Math.sqrt(t),u=yr((u+1)/2)-(u<0||u%2),d==1/0?t="5e"+u:(t=d.toExponential(),t=t.slice(0,t.indexOf("e")+1)+u),r=new h(t)):r=new h(d.toString()),n=(u=h.precision)+3;;)if(a=r,r=a.plus(qe(o,a,n+2,1)).times(.5),ar(a.d).slice(0,n)===(t=ar(r.d)).slice(0,n))if(t=t.slice(n-3,n+1),t=="9999"||!i&&t=="4999"){if(!i&&(zt(a,u+1,0),a.times(a).eq(o))){r=a;break}n+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(zt(r,u+1,1),e=!r.times(r).eq(o));break}return Qt=!0,zt(r,u,h.rounding,e)};_t.tangent=_t.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,n=n.sin(),n.s=1,n=qe(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,zt(ds==2||ds==4?n.neg():n,e,t,!0)):new r(NaN)};_t.times=_t.mul=function(e){var t,n,r,i,a,o,c,u,d,h=this,g=h.constructor,m=h.d,b=(e=new g(e)).d;if(e.s*=h.s,!m||!m[0]||!b||!b[0])return new g(!e.s||m&&!m[0]&&!b||b&&!b[0]&&!m?NaN:!m||!b?e.s/0:e.s*0);for(n=yr(h.e/$t)+yr(e.e/$t),u=m.length,d=b.length,u<d&&(a=m,m=b,b=a,o=u,u=d,d=o),a=[],o=u+d,r=o;r--;)a.push(0);for(r=d;--r>=0;){for(t=0,i=u+r;i>r;)c=a[i]+b[r]*m[i-r-1]+t,a[i--]=c%Ki|0,t=c/Ki|0;a[i]=(a[i]+t)%Ki|0}for(;!a[--o];)a.pop();return t?++n:a.shift(),e.d=a,e.e=lv(a,n),Qt?zt(e,g.precision,g.rounding):e};_t.toBinary=function(e,t){return O_(this,2,e,t)};_t.toDecimalPlaces=_t.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Kr(e,0,Qo),t===void 0?t=r.rounding:Kr(t,0,8),zt(n,e+n.e+1,t))};_t.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=za(r,!0):(Kr(e,0,Qo),t===void 0?t=i.rounding:Kr(t,0,8),r=zt(new i(r),e+1,t),n=za(r,!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n};_t.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?n=za(i):(Kr(e,0,Qo),t===void 0?t=a.rounding:Kr(t,0,8),r=zt(new a(i),e+i.e+1,t),n=za(r,!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};_t.toFraction=function(e){var t,n,r,i,a,o,c,u,d,h,g,m,b=this,S=b.d,w=b.constructor;if(!S)return new w(b);if(d=n=new w(1),r=u=new w(0),t=new w(r),a=t.e=xM(S)-b.e-1,o=a%$t,t.d[0]=Ln(10,o<0?$t+o:o),e==null)e=a>0?t:d;else{if(c=new w(e),!c.isInt()||c.lt(d))throw Error(Fo+c);e=c.gt(t)?a>0?t:d:c}for(Qt=!1,c=new w(ar(S)),h=w.precision,w.precision=a=S.length*$t*2;g=qe(c,t,0,1,1),i=n.plus(g.times(r)),i.cmp(e)!=1;)n=r,r=i,i=d,d=u.plus(g.times(i)),u=i,i=t,t=c.minus(g.times(i)),c=i;return i=qe(e.minus(n),r,0,1,1),u=u.plus(i.times(d)),n=n.plus(i.times(r)),u.s=d.s=b.s,m=qe(d,r,a,1).minus(b).abs().cmp(qe(u,n,a,1).minus(b).abs())<1?[d,r]:[u,n],w.precision=h,Qt=!0,m};_t.toHexadecimal=_t.toHex=function(e,t){return O_(this,16,e,t)};_t.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),e==null){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),t===void 0?t=r.rounding:Kr(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(Qt=!1,n=qe(n,e,0,t,1).times(e),Qt=!0,zt(n)):(e.s=n.s,n=e),n};_t.toNumber=function(){return+this};_t.toOctal=function(e,t){return O_(this,8,e,t)};_t.toPower=_t.pow=function(e){var t,n,r,i,a,o,c=this,u=c.constructor,d=+(e=new u(e));if(!c.d||!e.d||!c.d[0]||!e.d[0])return new u(Ln(+c,d));if(c=new u(c),c.eq(1))return c;if(r=u.precision,a=u.rounding,e.eq(1))return zt(c,r,a);if(t=yr(e.e/$t),t>=e.d.length-1&&(n=d<0?-d:d)<=K7)return i=_M(u,c,n,r),e.s<0?new u(1).div(i):zt(i,r,a);if(o=c.s,o<0){if(t<e.d.length-1)return new u(NaN);if((e.d[t]&1)==0&&(o=1),c.e==0&&c.d[0]==1&&c.d.length==1)return c.s=o,c}return n=Ln(+c,d),t=n==0||!isFinite(n)?yr(d*(Math.log("0."+ar(c.d))/Math.LN10+c.e+1)):new u(n+"").e,t>u.maxE+1||t<u.minE-1?new u(t>0?o/0:0):(Qt=!1,u.rounding=c.s=1,n=Math.min(12,(t+"").length),i=Ob(e.times(Do(c,r+n)),r),i.d&&(i=zt(i,r+5,1),Yd(i.d,r,a)&&(t=r+10,i=zt(Ob(e.times(Do(c,t+n)),t),t+5,1),+ar(i.d).slice(r+1,r+15)+1==1e14&&(i=zt(i,r+1,0)))),i.s=o,Qt=!0,u.rounding=a,zt(i,r,a))};_t.toPrecision=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=za(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(Kr(e,1,Qo),t===void 0?t=i.rounding:Kr(t,0,8),r=zt(new i(r),e,t),n=za(r,e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n};_t.toSignificantDigits=_t.toSD=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Kr(e,1,Qo),t===void 0?t=r.rounding:Kr(t,0,8)),zt(new r(n),e,t)};_t.toString=function(){var e=this,t=e.constructor,n=za(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n};_t.truncated=_t.trunc=function(){return zt(new this.constructor(this),this.e+1,1)};_t.valueOf=_t.toJSON=function(){var e=this,t=e.constructor,n=za(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};function ar(e){var t,n,r,i=e.length-1,a="",o=e[0];if(i>0){for(a+=o,t=1;t<i;t++)r=e[t]+"",n=$t-r.length,n&&(a+=_o(n)),a+=r;o=e[t],r=o+"",n=$t-r.length,n&&(a+=_o(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function Kr(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Fo+e)}function Yd(e,t,n,r){var i,a,o,c;for(a=e[0];a>=10;a/=10)--t;return--t<0?(t+=$t,i=0):(i=Math.ceil((t+1)/$t),t%=$t),a=Ln(10,$t-t),c=e[i]%a|0,r==null?t<3?(t==0?c=c/100|0:t==1&&(c=c/10|0),o=n<4&&c==99999||n>3&&c==49999||c==5e4||c==0):o=(n<4&&c+1==a||n>3&&c+1==a/2)&&(e[i+1]/a/100|0)==Ln(10,t-2)-1||(c==a/2||c==0)&&(e[i+1]/a/100|0)==0:t<4?(t==0?c=c/1e3|0:t==1?c=c/100|0:t==2&&(c=c/10|0),o=(r||n<4)&&c==9999||!r&&n>3&&c==4999):o=((r||n<4)&&c+1==a||!r&&n>3&&c+1==a/2)&&(e[i+1]/a/1e3|0)==Ln(10,t-3)-1,o}function Lg(e,t,n){for(var r,i=[0],a,o=0,c=e.length;o<c;){for(a=i.length;a--;)i[a]*=t;for(i[0]+=kb.indexOf(e.charAt(o++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function Z7(e,t){var n,r,i;if(t.isZero())return t;r=t.d.length,r<32?(n=Math.ceil(r/3),i=(1/cv(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),e.precision+=n,t=Au(e,1,t.times(i),new e(1));for(var a=n;a--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=n,t}var qe=(function(){function e(r,i,a){var o,c=0,u=r.length;for(r=r.slice();u--;)o=r[u]*i+c,r[u]=o%a|0,c=o/a|0;return c&&r.unshift(c),r}function t(r,i,a,o){var c,u;if(a!=o)u=a>o?1:-1;else for(c=u=0;c<a;c++)if(r[c]!=i[c]){u=r[c]>i[c]?1:-1;break}return u}function n(r,i,a,o){for(var c=0;a--;)r[a]-=c,c=r[a]<i[a]?1:0,r[a]=c*o+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o,c,u){var d,h,g,m,b,S,w,E,T,D,I,M,z,P,A,C,k,j,L,B,V=r.constructor,K=r.s==i.s?1:-1,Y=r.d,H=i.d;if(!Y||!Y[0]||!H||!H[0])return new V(!r.s||!i.s||(Y?H&&Y[0]==H[0]:!H)?NaN:Y&&Y[0]==0||!H?K*0:K/0);for(u?(b=1,h=r.e-i.e):(u=Ki,b=$t,h=yr(r.e/b)-yr(i.e/b)),L=H.length,k=Y.length,T=new V(K),D=T.d=[],g=0;H[g]==(Y[g]||0);g++);if(H[g]>(Y[g]||0)&&h--,a==null?(P=a=V.precision,o=V.rounding):c?P=a+(r.e-i.e)+1:P=a,P<0)D.push(1),S=!0;else{if(P=P/b+2|0,g=0,L==1){for(m=0,H=H[0],P++;(g<k||m)&&P--;g++)A=m*u+(Y[g]||0),D[g]=A/H|0,m=A%H|0;S=m||g<k}else{for(m=u/(H[0]+1)|0,m>1&&(H=e(H,m,u),Y=e(Y,m,u),L=H.length,k=Y.length),C=L,I=Y.slice(0,L),M=I.length;M<L;)I[M++]=0;B=H.slice(),B.unshift(0),j=H[0],H[1]>=u/2&&++j;do m=0,d=t(H,I,L,M),d<0?(z=I[0],L!=M&&(z=z*u+(I[1]||0)),m=z/j|0,m>1?(m>=u&&(m=u-1),w=e(H,m,u),E=w.length,M=I.length,d=t(w,I,E,M),d==1&&(m--,n(w,L<E?B:H,E,u))):(m==0&&(d=m=1),w=H.slice()),E=w.length,E<M&&w.unshift(0),n(I,w,M,u),d==-1&&(M=I.length,d=t(H,I,L,M),d<1&&(m++,n(I,L<M?B:H,M,u))),M=I.length):d===0&&(m++,I=[0]),D[g++]=m,d&&I[0]?I[M++]=Y[C]||0:(I=[Y[C]],M=1);while((C++<k||I[0]!==void 0)&&P--);S=I[0]!==void 0}D[0]||D.shift()}if(b==1)T.e=h,gM=S;else{for(g=1,m=D[0];m>=10;m/=10)g++;T.e=g+h*b-1,zt(T,c?a+T.e+1:a,o,S)}return T}})();function zt(e,t,n,r){var i,a,o,c,u,d,h,g,m,b=e.constructor;t:if(t!=null){if(g=e.d,!g)return e;for(i=1,c=g[0];c>=10;c/=10)i++;if(a=t-i,a<0)a+=$t,o=t,h=g[m=0],u=h/Ln(10,i-o-1)%10|0;else if(m=Math.ceil((a+1)/$t),c=g.length,m>=c)if(r){for(;c++<=m;)g.push(0);h=u=0,i=1,a%=$t,o=a-$t+1}else break t;else{for(h=c=g[m],i=1;c>=10;c/=10)i++;a%=$t,o=a-$t+i,u=o<0?0:h/Ln(10,i-o-1)%10|0}if(r=r||t<0||g[m+1]!==void 0||(o<0?h:h%Ln(10,i-o-1)),d=n<4?(u||r)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||r||n==6&&(a>0?o>0?h/Ln(10,i-o):0:g[m-1])%10&1||n==(e.s<0?8:7)),t<1||!g[0])return g.length=0,d?(t-=e.e+1,g[0]=Ln(10,($t-t%$t)%$t),e.e=-t||0):g[0]=e.e=0,e;if(a==0?(g.length=m,c=1,m--):(g.length=m+1,c=Ln(10,$t-a),g[m]=o>0?(h/Ln(10,i-o)%Ln(10,o)|0)*c:0),d)for(;;)if(m==0){for(a=1,o=g[0];o>=10;o/=10)a++;for(o=g[0]+=c,c=1;o>=10;o/=10)c++;a!=c&&(e.e++,g[0]==Ki&&(g[0]=1));break}else{if(g[m]+=c,g[m]!=Ki)break;g[m--]=0,c=1}for(a=g.length;g[--a]===0;)g.pop()}return Qt&&(e.e>b.maxE?(e.d=null,e.e=NaN):e.e<b.minE&&(e.e=0,e.d=[0])),e}function za(e,t,n){if(!e.isFinite())return wM(e);var r,i=e.e,a=ar(e.d),o=a.length;return t?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+_o(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(e.e<0?"e":"e+")+e.e):i<0?(a="0."+_o(-i-1)+a,n&&(r=n-o)>0&&(a+=_o(r))):i>=o?(a+=_o(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+_o(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=_o(r))),a}function lv(e,t){var n=e[0];for(t*=$t;n>=10;n/=10)t++;return t}function vm(e,t,n){if(t>Q7)throw Qt=!0,n&&(e.precision=n),Error(mM);return zt(new e(gm),t,1,!0)}function Aa(e,t,n){if(t>Mb)throw Error(mM);return zt(new e(mm),t,n,!0)}function xM(e){var t=e.length-1,n=t*$t+1;if(t=e[t],t){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function _o(e){for(var t="";e--;)t+="0";return t}function _M(e,t,n,r){var i,a=new e(1),o=Math.ceil(r/$t+4);for(Qt=!1;;){if(n%2&&(a=a.times(t),k2(a.d,o)&&(i=!0)),n=yr(n/2),n===0){n=a.d.length-1,i&&a.d[n]===0&&++a.d[n];break}t=t.times(t),k2(t.d,o)}return Qt=!0,a}function I2(e){return e.d[e.d.length-1]&1}function SM(e,t,n){for(var r,i,a=new e(t[0]),o=0;++o<t.length;){if(i=new e(t[o]),!i.s){a=i;break}r=a.cmp(i),(r===n||r===0&&a.s===n)&&(a=i)}return a}function Ob(e,t){var n,r,i,a,o,c,u,d=0,h=0,g=0,m=e.constructor,b=m.rounding,S=m.precision;if(!e.d||!e.d[0]||e.e>17)return new m(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(Qt=!1,u=S):u=t,c=new m(.03125);e.e>-2;)e=e.times(c),g+=5;for(r=Math.log(Ln(2,g))/Math.LN10*2+5|0,u+=r,n=a=o=new m(1),m.precision=u;;){if(a=zt(a.times(e),u,1),n=n.times(++h),c=o.plus(qe(a,n,u,1)),ar(c.d).slice(0,u)===ar(o.d).slice(0,u)){for(i=g;i--;)o=zt(o.times(o),u,1);if(t==null)if(d<3&&Yd(o.d,u-r,b,d))m.precision=u+=10,n=a=c=new m(1),h=0,d++;else return zt(o,m.precision=S,b,Qt=!0);else return m.precision=S,o}o=c}}function Do(e,t){var n,r,i,a,o,c,u,d,h,g,m,b=1,S=10,w=e,E=w.d,T=w.constructor,D=T.rounding,I=T.precision;if(w.s<0||!E||!E[0]||!w.e&&E[0]==1&&E.length==1)return new T(E&&!E[0]?-1/0:w.s!=1?NaN:E?0:w);if(t==null?(Qt=!1,h=I):h=t,T.precision=h+=S,n=ar(E),r=n.charAt(0),Math.abs(a=w.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)w=w.times(e),n=ar(w.d),r=n.charAt(0),b++;a=w.e,r>1?(w=new T("0."+n),a++):w=new T(r+"."+n.slice(1))}else return d=vm(T,h+2,I).times(a+""),w=Do(new T(r+"."+n.slice(1)),h-S).plus(d),T.precision=I,t==null?zt(w,I,D,Qt=!0):w;for(g=w,u=o=w=qe(w.minus(1),w.plus(1),h,1),m=zt(w.times(w),h,1),i=3;;){if(o=zt(o.times(m),h,1),d=u.plus(qe(o,new T(i),h,1)),ar(d.d).slice(0,h)===ar(u.d).slice(0,h))if(u=u.times(2),a!==0&&(u=u.plus(vm(T,h+2,I).times(a+""))),u=qe(u,new T(b),h,1),t==null)if(Yd(u.d,h-S,D,c))T.precision=h+=S,d=o=w=qe(g.minus(1),g.plus(1),h,1),m=zt(w.times(w),h,1),i=c=1;else return zt(u,T.precision=I,D,Qt=!0);else return T.precision=I,u;u=d,i+=2}}function wM(e){return String(e.s*e.s/0)}function Bg(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;r++);for(i=t.length;t.charCodeAt(i-1)===48;--i);if(t=t.slice(r,i),t){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%$t,n<0&&(r+=$t),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=$t;r<i;)e.d.push(+t.slice(r,r+=$t));t=t.slice(r),r=$t-t.length}else r-=i;for(;r--;)t+="0";e.d.push(+t),Qt&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function J7(e,t){var n,r,i,a,o,c,u,d,h;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),bM.test(t))return Bg(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(X7.test(t))n=16,t=t.toLowerCase();else if(Y7.test(t))n=2;else if(W7.test(t))n=8;else throw Error(Fo+t);for(a=t.search(/p/i),a>0?(u=+t.slice(a+1),t=t.substring(2,a)):t=t.slice(2),a=t.indexOf("."),o=a>=0,r=e.constructor,o&&(t=t.replace(".",""),c=t.length,a=c-a,i=_M(r,new r(n),a,a*2)),d=Lg(t,n,Ki),h=d.length-1,a=h;d[a]===0;--a)d.pop();return a<0?new r(e.s*0):(e.e=lv(d,h),e.d=d,Qt=!1,o&&(e=qe(e,i,c*4)),u&&(e=e.times(Math.abs(u)<54?Ln(2,u):Gr.pow(2,u))),Qt=!0,e)}function tG(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:Au(e,2,t,t);n=1.4*Math.sqrt(r),n=n>16?16:n|0,t=t.times(1/cv(5,n)),t=Au(e,2,t,t);for(var i,a=new e(5),o=new e(16),c=new e(20);n--;)i=t.times(t),t=t.times(a.plus(i.times(o.times(i).minus(c))));return t}function Au(e,t,n,r,i){var a,o,c,u,d=e.precision,h=Math.ceil(d/$t);for(Qt=!1,u=n.times(n),c=new e(r);;){if(o=qe(c.times(u),new e(t++*t++),d,1),c=i?r.plus(o):r.minus(o),r=qe(o.times(u),new e(t++*t++),d,1),o=c.plus(r),o.d[h]!==void 0){for(a=h;o.d[a]===c.d[a]&&a--;);if(a==-1)break}a=c,c=r,r=o,o=a}return Qt=!0,o.d.length=h+1,o}function cv(e,t){for(var n=e;--t;)n*=e;return n}function EM(e,t){var n,r=t.s<0,i=Aa(e,e.precision,1),a=i.times(.5);if(t=t.abs(),t.lte(a))return ds=r?4:1,t;if(n=t.divToInt(i),n.isZero())ds=r?3:2;else{if(t=t.minus(n.times(i)),t.lte(a))return ds=I2(n)?r?2:3:r?4:1,t;ds=I2(n)?r?1:4:r?3:2}return t.minus(i).abs()}function O_(e,t,n,r){var i,a,o,c,u,d,h,g,m,b=e.constructor,S=n!==void 0;if(S?(Kr(n,1,Qo),r===void 0?r=b.rounding:Kr(r,0,8)):(n=b.precision,r=b.rounding),!e.isFinite())h=wM(e);else{for(h=za(e),o=h.indexOf("."),S?(i=2,t==16?n=n*4-3:t==8&&(n=n*3-2)):i=t,o>=0&&(h=h.replace(".",""),m=new b(1),m.e=h.length-o,m.d=Lg(za(m),10,i),m.e=m.d.length),g=Lg(h,10,i),a=u=g.length;g[--u]==0;)g.pop();if(!g[0])h=S?"0p+0":"0";else{if(o<0?a--:(e=new b(e),e.d=g,e.e=a,e=qe(e,m,n,r,0,i),g=e.d,a=e.e,d=gM),o=g[n],c=i/2,d=d||g[n+1]!==void 0,d=r<4?(o!==void 0||d)&&(r===0||r===(e.s<0?3:2)):o>c||o===c&&(r===4||d||r===6&&g[n-1]&1||r===(e.s<0?8:7)),g.length=n,d)for(;++g[--n]>i-1;)g[n]=0,n||(++a,g.unshift(1));for(u=g.length;!g[u-1];--u);for(o=0,h="";o<u;o++)h+=kb.charAt(g[o]);if(S){if(u>1)if(t==16||t==8){for(o=t==16?4:3,--u;u%o;u++)h+="0";for(g=Lg(h,i,t),u=g.length;!g[u-1];--u);for(o=1,h="1.";o<u;o++)h+=kb.charAt(g[o])}else h=h.charAt(0)+"."+h.slice(1);h=h+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)h="0"+h;h="0."+h}else if(++a>u)for(a-=u;a--;)h+="0";else a<u&&(h=h.slice(0,a)+"."+h.slice(a))}h=(t==16?"0x":t==2?"0b":t==8?"0o":"")+h}return e.s<0?"-"+h:h}function k2(e,t){if(e.length>t)return e.length=t,!0}function eG(e){return new this(e).abs()}function nG(e){return new this(e).acos()}function rG(e){return new this(e).acosh()}function iG(e,t){return new this(e).plus(t)}function aG(e){return new this(e).asin()}function sG(e){return new this(e).asinh()}function oG(e){return new this(e).atan()}function lG(e){return new this(e).atanh()}function cG(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,a=r+4;return!e.s||!t.s?n=new this(NaN):!e.d&&!t.d?(n=Aa(this,a,1).times(t.s>0?.25:.75),n.s=e.s):!t.d||e.isZero()?(n=t.s<0?Aa(this,r,i):new this(0),n.s=e.s):!e.d||t.isZero()?(n=Aa(this,a,1).times(.5),n.s=e.s):t.s<0?(this.precision=a,this.rounding=1,n=this.atan(qe(e,t,a,1)),t=Aa(this,a,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(qe(e,t,a,1)),n}function uG(e){return new this(e).cbrt()}function fG(e){return zt(e=new this(e),e.e+1,2)}function dG(e,t,n){return new this(e).clamp(t,n)}function hG(e){if(!e||typeof e!="object")throw Error(ov+"Object expected");var t,n,r,i=e.defaults===!0,a=["precision",1,Qo,"rounding",0,8,"toExpNeg",-cu,0,"toExpPos",0,cu,"maxE",0,cu,"minE",-cu,0,"modulo",0,9];for(t=0;t<a.length;t+=3)if(n=a[t],i&&(this[n]=Nb[n]),(r=e[n])!==void 0)if(yr(r)===r&&r>=a[t+1]&&r<=a[t+2])this[n]=r;else throw Error(Fo+n+": "+r);if(n="crypto",i&&(this[n]=Nb[n]),(r=e[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(vM);else this[n]=!1;else throw Error(Fo+n+": "+r);return this}function pG(e){return new this(e).cos()}function gG(e){return new this(e).cosh()}function TM(e){var t,n,r;function i(a){var o,c,u,d=this;if(!(d instanceof i))return new i(a);if(d.constructor=i,N2(a)){d.s=a.s,Qt?!a.d||a.e>i.maxE?(d.e=NaN,d.d=null):a.e<i.minE?(d.e=0,d.d=[0]):(d.e=a.e,d.d=a.d.slice()):(d.e=a.e,d.d=a.d?a.d.slice():a.d);return}if(u=typeof a,u==="number"){if(a===0){d.s=1/a<0?-1:1,d.e=0,d.d=[0];return}if(a<0?(a=-a,d.s=-1):d.s=1,a===~~a&&a<1e7){for(o=0,c=a;c>=10;c/=10)o++;Qt?o>i.maxE?(d.e=NaN,d.d=null):o<i.minE?(d.e=0,d.d=[0]):(d.e=o,d.d=[a]):(d.e=o,d.d=[a]);return}if(a*0!==0){a||(d.s=NaN),d.e=NaN,d.d=null;return}return Bg(d,a.toString())}if(u==="string")return(c=a.charCodeAt(0))===45?(a=a.slice(1),d.s=-1):(c===43&&(a=a.slice(1)),d.s=1),bM.test(a)?Bg(d,a):J7(d,a);if(u==="bigint")return a<0?(a=-a,d.s=-1):d.s=1,Bg(d,a.toString());throw Error(Fo+a)}if(i.prototype=_t,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=hG,i.clone=TM,i.isDecimal=N2,i.abs=eG,i.acos=nG,i.acosh=rG,i.add=iG,i.asin=aG,i.asinh=sG,i.atan=oG,i.atanh=lG,i.atan2=cG,i.cbrt=uG,i.ceil=fG,i.clamp=dG,i.cos=pG,i.cosh=gG,i.div=mG,i.exp=vG,i.floor=yG,i.hypot=bG,i.ln=xG,i.log=_G,i.log10=wG,i.log2=SG,i.max=EG,i.min=TG,i.mod=AG,i.mul=CG,i.pow=RG,i.random=DG,i.round=IG,i.sign=kG,i.sin=NG,i.sinh=MG,i.sqrt=OG,i.sub=PG,i.sum=VG,i.tan=jG,i.tanh=zG,i.trunc=LG,e===void 0&&(e={}),e&&e.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function mG(e,t){return new this(e).div(t)}function vG(e){return new this(e).exp()}function yG(e){return zt(e=new this(e),e.e+1,3)}function bG(){var e,t,n=new this(0);for(Qt=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return Qt=!0,new this(1/0);n=t}return Qt=!0,n.sqrt()}function N2(e){return e instanceof Gr||e&&e.toStringTag===yM||!1}function xG(e){return new this(e).ln()}function _G(e,t){return new this(e).log(t)}function SG(e){return new this(e).log(2)}function wG(e){return new this(e).log(10)}function EG(){return SM(this,arguments,-1)}function TG(){return SM(this,arguments,1)}function AG(e,t){return new this(e).mod(t)}function CG(e,t){return new this(e).mul(t)}function RG(e,t){return new this(e).pow(t)}function DG(e){var t,n,r,i,a=0,o=new this(1),c=[];if(e===void 0?e=this.precision:Kr(e,1,Qo),r=Math.ceil(e/$t),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));a<r;)i=t[a],i>=429e7?t[a]=crypto.getRandomValues(new Uint32Array(1))[0]:c[a++]=i%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(r*=4);a<r;)i=t[a]+(t[a+1]<<8)+(t[a+2]<<16)+((t[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(t,a):(c.push(i%1e7),a+=4);a=r/4}else throw Error(vM);else for(;a<r;)c[a++]=Math.random()*1e7|0;for(r=c[--a],e%=$t,r&&e&&(i=Ln(10,$t-e),c[a]=(r/i|0)*i);c[a]===0;a--)c.pop();if(a<0)n=0,c=[0];else{for(n=-1;c[0]===0;n-=$t)c.shift();for(r=1,i=c[0];i>=10;i/=10)r++;r<$t&&(n-=$t-r)}return o.e=n,o.d=c,o}function IG(e){return zt(e=new this(e),e.e+1,this.rounding)}function kG(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function NG(e){return new this(e).sin()}function MG(e){return new this(e).sinh()}function OG(e){return new this(e).sqrt()}function PG(e,t){return new this(e).sub(t)}function VG(){var e=0,t=arguments,n=new this(t[e]);for(Qt=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return Qt=!0,zt(n,this.precision,this.rounding)}function jG(e){return new this(e).tan()}function zG(e){return new this(e).tanh()}function LG(e){return zt(e=new this(e),e.e+1,1)}_t[Symbol.for("nodejs.util.inspect.custom")]=_t.toString;_t[Symbol.toStringTag]="Decimal";var Gr=_t.constructor=TM(Nb);gm=new Gr(gm);mm=new Gr(mm);const BG=()=>{};var M2={};const AM=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},UG=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=e[n++];t[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=e[n++],o=e[n++],c=e[n++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const a=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return t.join("")},CM={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const a=e[i],o=i+1<e.length,c=o?e[i+1]:0,u=i+2<e.length,d=u?e[i+2]:0,h=a>>2,g=(a&3)<<4|c>>4;let m=(c&15)<<2|d>>6,b=d&63;u||(b=64,o||(m=64)),r.push(n[h],n[g],n[m],n[b])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(AM(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):UG(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const a=n[e.charAt(i++)],c=i<e.length?n[e.charAt(i)]:0;++i;const d=i<e.length?n[e.charAt(i)]:64;++i;const g=i<e.length?n[e.charAt(i)]:64;if(++i,a==null||c==null||d==null||g==null)throw new FG;const m=a<<2|c>>4;if(r.push(m),d!==64){const b=c<<4&240|d>>2;if(r.push(b),g!==64){const S=d<<6&192|g;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class FG extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GG=function(e){const t=AM(e);return CM.encodeByteArray(t,!0)},ym=function(e){return GG(e).replace(/\./g,"")},RM=function(e){try{return CM.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function qG(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const HG=()=>qG().__FIREBASE_DEFAULTS__,$G=()=>{if(typeof process>"u"||typeof M2>"u")return;const e=M2.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},YG=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&RM(e[1]);return t&&JSON.parse(t)},uv=()=>{try{return BG()||HG()||$G()||YG()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},DM=e=>uv()?.emulatorHosts?.[e],XG=e=>{const t=DM(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},IM=()=>uv()?.config,kM=e=>uv()?.[`_${e}`];class WG{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}function Yu(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function NM(e){return(await fetch(e,{credentials:"include"})).ok}function KG(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,a=e.sub||e.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...e};return[ym(JSON.stringify(n)),ym(JSON.stringify(o)),""].join(".")}const Td={};function QG(){const e={prod:[],emulator:[]};for(const t of Object.keys(Td))Td[t]?e.emulator.push(t):e.prod.push(t);return e}function ZG(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let O2=!1;function MM(e,t){if(typeof window>"u"||typeof document>"u"||!Yu(window.location.host)||Td[e]===t||Td[e]||O2)return;Td[e]=t;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",a=QG().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,b){m.setAttribute("width","24"),m.setAttribute("id",b),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{O2=!0,o()},m}function h(m,b){m.setAttribute("id",b),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=ZG(r),b=n("text"),S=document.getElementById(b)||document.createElement("span"),w=n("learnmore"),E=document.getElementById(w)||document.createElement("a"),T=n("preprendIcon"),D=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const I=m.element;c(I),h(E,w);const M=d();u(D,T),I.append(D,S,E,M),document.body.appendChild(I)}a?(S.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function br(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JG(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(br())}function tq(){const e=uv()?.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eq(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nq(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function rq(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iq(){const e=br();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function aq(){return!tq()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sq(){try{return typeof indexedDB=="object"}catch{return!1}}function oq(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(n){t(n)}})}const lq="FirebaseError";class Ns extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=lq,Object.setPrototypeOf(this,Ns.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sh.prototype.create)}}class Sh{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,a=this.errors[t],o=a?cq(a,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Ns(i,c,r)}}function cq(e,t){return e.replace(uq,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const uq=/\{\$([^}]+)}/g;function fq(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Yl(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const a=e[i],o=t[i];if(P2(a)&&P2(o)){if(!Yl(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function P2(e){return e!==null&&typeof e=="object"}function wh(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function ld(e){const t={};return e.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");t[decodeURIComponent(i)]=decodeURIComponent(a)}}),t}function cd(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function dq(e,t){const n=new hq(e,t);return n.subscribe.bind(n)}class hq{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");pq(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=h1),i.error===void 0&&(i.error=h1),i.complete===void 0&&(i.complete=h1);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pq(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function h1(){}function an(e){return e&&e._delegate?e._delegate:e}class Xl{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Rl="[DEFAULT]";class gq{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new WG;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(vq(t))try{this.getOrInitializeService({instanceIdentifier:Rl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(t=Rl){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Rl){return this.instances.has(t)}getOptions(t=Rl){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(i)}return i}onInit(t,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(t),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&t(a,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mq(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Rl){return this.component?this.component.multipleInstances?t:Rl:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mq(e){return e===Rl?void 0:e}function vq(e){return e.instantiationMode==="EAGER"}class yq{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new gq(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}var me;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(me||(me={}));const bq={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},xq=me.INFO,_q={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},Sq=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=_q[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class P_{constructor(t){this.name=t,this._logLevel=xq,this._logHandler=Sq,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in me))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?bq[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...t),this._logHandler(this,me.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...t),this._logHandler(this,me.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,me.INFO,...t),this._logHandler(this,me.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,me.WARN,...t),this._logHandler(this,me.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...t),this._logHandler(this,me.ERROR,...t)}}const wq=(e,t)=>t.some(n=>e instanceof n);let V2,j2;function Eq(){return V2||(V2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Tq(){return j2||(j2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OM=new WeakMap,Pb=new WeakMap,PM=new WeakMap,p1=new WeakMap,V_=new WeakMap;function Aq(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",a),e.removeEventListener("error",o)},a=()=>{n(No(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",a),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&OM.set(n,e)}).catch(()=>{}),V_.set(t,e),t}function Cq(e){if(Pb.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",o),e.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",a),e.addEventListener("error",o),e.addEventListener("abort",o)});Pb.set(e,t)}let Vb={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Pb.get(e);if(t==="objectStoreNames")return e.objectStoreNames||PM.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return No(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Rq(e){Vb=e(Vb)}function Dq(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(g1(this),t,...n);return PM.set(r,t.sort?t.sort():[t]),No(r)}:Tq().includes(e)?function(...t){return e.apply(g1(this),t),No(OM.get(this))}:function(...t){return No(e.apply(g1(this),t))}}function Iq(e){return typeof e=="function"?Dq(e):(e instanceof IDBTransaction&&Cq(e),wq(e,Eq())?new Proxy(e,Vb):e)}function No(e){if(e instanceof IDBRequest)return Aq(e);if(p1.has(e))return p1.get(e);const t=Iq(e);return t!==e&&(p1.set(e,t),V_.set(t,e)),t}const g1=e=>V_.get(e);function kq(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(e,t),c=No(o);return r&&o.addEventListener("upgradeneeded",u=>{r(No(o.result),u.oldVersion,u.newVersion,No(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const Nq=["get","getKey","getAll","getAllKeys","count"],Mq=["put","add","delete","clear"],m1=new Map;function z2(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(m1.get(t))return m1.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Mq.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Nq.includes(n)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),i&&u.done]))[0]};return m1.set(t,a),a}Rq(e=>({...e,get:(t,n,r)=>z2(t,n)||e.get(t,n,r),has:(t,n)=>!!z2(t,n)||e.has(t,n)}));class Oq{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Pq(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Pq(e){return e.getComponent()?.type==="VERSION"}const jb="@firebase/app",L2="0.14.6";const As=new P_("@firebase/app"),Vq="@firebase/app-compat",jq="@firebase/analytics-compat",zq="@firebase/analytics",Lq="@firebase/app-check-compat",Bq="@firebase/app-check",Uq="@firebase/auth",Fq="@firebase/auth-compat",Gq="@firebase/database",qq="@firebase/data-connect",Hq="@firebase/database-compat",$q="@firebase/functions",Yq="@firebase/functions-compat",Xq="@firebase/installations",Wq="@firebase/installations-compat",Kq="@firebase/messaging",Qq="@firebase/messaging-compat",Zq="@firebase/performance",Jq="@firebase/performance-compat",tH="@firebase/remote-config",eH="@firebase/remote-config-compat",nH="@firebase/storage",rH="@firebase/storage-compat",iH="@firebase/firestore",aH="@firebase/ai",sH="@firebase/firestore-compat",oH="firebase",lH="12.6.0";const zb="[DEFAULT]",cH={[jb]:"fire-core",[Vq]:"fire-core-compat",[zq]:"fire-analytics",[jq]:"fire-analytics-compat",[Bq]:"fire-app-check",[Lq]:"fire-app-check-compat",[Uq]:"fire-auth",[Fq]:"fire-auth-compat",[Gq]:"fire-rtdb",[qq]:"fire-data-connect",[Hq]:"fire-rtdb-compat",[$q]:"fire-fn",[Yq]:"fire-fn-compat",[Xq]:"fire-iid",[Wq]:"fire-iid-compat",[Kq]:"fire-fcm",[Qq]:"fire-fcm-compat",[Zq]:"fire-perf",[Jq]:"fire-perf-compat",[tH]:"fire-rc",[eH]:"fire-rc-compat",[nH]:"fire-gcs",[rH]:"fire-gcs-compat",[iH]:"fire-fst",[sH]:"fire-fst-compat",[aH]:"fire-vertex","fire-js":"fire-js",[oH]:"fire-js-all"};const bm=new Map,uH=new Map,Lb=new Map;function B2(e,t){try{e.container.addComponent(t)}catch(n){As.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Cu(e){const t=e.name;if(Lb.has(t))return As.debug(`There were multiple attempts to register component ${t}.`),!1;Lb.set(t,e);for(const n of bm.values())B2(n,e);for(const n of uH.values())B2(n,e);return!0}function j_(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ai(e){return e==null?!1:e.settings!==void 0}const fH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mo=new Sh("app","Firebase",fH);class dH{constructor(t,n,r){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Mo.create("app-deleted",{appName:this._name})}}const Xu=lH;function VM(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r={name:zb,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!="string"||!i)throw Mo.create("bad-app-name",{appName:String(i)});if(n||(n=IM()),!n)throw Mo.create("no-options");const a=bm.get(i);if(a){if(Yl(n,a.options)&&Yl(r,a.config))return a;throw Mo.create("duplicate-app",{appName:i})}const o=new yq(i);for(const u of Lb.values())o.addComponent(u);const c=new dH(n,r,o);return bm.set(i,c),c}function jM(e=zb){const t=bm.get(e);if(!t&&e===zb&&IM())return VM();if(!t)throw Mo.create("no-app",{appName:e});return t}function Oo(e,t,n){let r=cH[e]??e;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const o=[`Unable to register library "${r}" with version "${t}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),As.warn(o.join(" "));return}Cu(new Xl(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const hH="firebase-heartbeat-database",pH=1,Xd="firebase-heartbeat-store";let v1=null;function zM(){return v1||(v1=kq(hH,pH,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Xd)}catch(n){console.warn(n)}}}}).catch(e=>{throw Mo.create("idb-open",{originalErrorMessage:e.message})})),v1}async function gH(e){try{const n=(await zM()).transaction(Xd),r=await n.objectStore(Xd).get(LM(e));return await n.done,r}catch(t){if(t instanceof Ns)As.warn(t.message);else{const n=Mo.create("idb-get",{originalErrorMessage:t?.message});As.warn(n.message)}}}async function U2(e,t){try{const r=(await zM()).transaction(Xd,"readwrite");await r.objectStore(Xd).put(t,LM(e)),await r.done}catch(n){if(n instanceof Ns)As.warn(n.message);else{const r=Mo.create("idb-set",{originalErrorMessage:n?.message});As.warn(r.message)}}}function LM(e){return`${e.name}!${e.options.appId}`}const mH=1024,vH=30;class yH{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new xH(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=F2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>vH){const i=_H(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){As.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=F2(),{heartbeatsToSend:n,unsentEntries:r}=bH(this._heartbeatsCache.heartbeats),i=ym(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return As.warn(t),""}}}function F2(){return new Date().toISOString().substring(0,10)}function bH(e,t=mH){const n=[];let r=e.slice();for(const i of e){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),G2(n)>t){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),G2(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class xH{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sq()?oq().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gH(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return U2(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return U2(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function G2(e){return ym(JSON.stringify({version:2,heartbeats:e})).length}function _H(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function SH(e){Cu(new Xl("platform-logger",t=>new Oq(t),"PRIVATE")),Cu(new Xl("heartbeat",t=>new yH(t),"PRIVATE")),Oo(jb,L2,e),Oo(jb,L2,"esm2020"),Oo("fire-js","")}SH("");function BM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wH=BM,UM=new Sh("auth","Firebase",BM());const xm=new P_("@firebase/auth");function EH(e,...t){xm.logLevel<=me.WARN&&xm.warn(`Auth (${Xu}): ${e}`,...t)}function Ug(e,...t){xm.logLevel<=me.ERROR&&xm.error(`Auth (${Xu}): ${e}`,...t)}function Ji(e,...t){throw z_(e,...t)}function ka(e,...t){return z_(e,...t)}function FM(e,t,n){const r={...wH(),[t]:n};return new Sh("auth","Firebase",r).create(t,{appName:e.name})}function bs(e){return FM(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function z_(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return UM.create(e,...t)}function Yt(e,t,...n){if(!e)throw z_(t,...n)}function hs(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ug(t),new Error(t)}function Cs(e,t){e||hs(t)}function Bb(){return typeof self<"u"&&self.location?.href||""}function TH(){return q2()==="http:"||q2()==="https:"}function q2(){return typeof self<"u"&&self.location?.protocol||null}function AH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TH()||nq()||"connection"in navigator)?navigator.onLine:!0}function CH(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}class Eh{constructor(t,n){this.shortDelay=t,this.longDelay=n,Cs(n>t,"Short delay should be less than long delay!"),this.isMobile=JG()||rq()}get(){return AH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function L_(e,t){Cs(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class GM{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const RH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const DH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],IH=new Eh(3e4,6e4);function Ms(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Ha(e,t,n,r,i={}){return qM(e,i,async()=>{let a={},o={};r&&(t==="GET"?o=r:a={body:JSON.stringify(r)});const c=wh({key:e.config.apiKey,...o}).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const d={method:t,headers:u,...a};return eq()||(d.referrerPolicy="no-referrer"),e.emulatorConfig&&Yu(e.emulatorConfig.host)&&(d.credentials="include"),GM.fetch()(await HM(e,e.config.apiHost,n,c),d)})}async function qM(e,t,n){e._canInitEmulator=!1;const r={...RH,...t};try{const i=new NH(e),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw wg(e,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw wg(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw wg(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw wg(e,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw FM(e,h,d);Ji(e,h)}}catch(i){if(i instanceof Ns)throw i;Ji(e,"network-request-failed",{message:String(i)})}}async function Th(e,t,n,r,i={}){const a=await Ha(e,t,n,r,i);return"mfaPendingCredential"in a&&Ji(e,"multi-factor-auth-required",{_serverResponse:a}),a}async function HM(e,t,n,r){const i=`${t}${n}?${r}`,a=e,o=a.config.emulator?L_(e.config,i):`${e.config.apiScheme}://${i}`;return DH.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function kH(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NH{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ka(this.auth,"network-request-failed")),IH.get())})}}function wg(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ka(e,t,r);return i.customData._tokenResponse=n,i}function H2(e){return e!==void 0&&e.enterprise!==void 0}class MH{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return kH(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function OH(e,t){return Ha(e,"GET","/v2/recaptchaConfig",Ms(e,t))}async function PH(e,t){return Ha(e,"POST","/v1/accounts:delete",t)}async function _m(e,t){return Ha(e,"POST","/v1/accounts:lookup",t)}function Ad(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function VH(e,t=!1){const n=an(e),r=await n.getIdToken(t),i=B_(r);Yt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:Ad(y1(i.auth_time)),issuedAtTime:Ad(y1(i.iat)),expirationTime:Ad(y1(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function y1(e){return Number(e)*1e3}function B_(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return Ug("JWT malformed, contained fewer than 3 sections"),null;try{const i=RM(n);return i?JSON.parse(i):(Ug("Failed to decode base64 JWT payload"),null)}catch(i){return Ug("Caught error parsing JWT payload as JSON",i?.toString()),null}}function $2(e){const t=B_(e);return Yt(t,"internal-error"),Yt(typeof t.exp<"u","internal-error"),Yt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function Ru(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Ns&&jH(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function jH({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}class zH{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Ub{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ad(this.lastLoginAt),this.creationTime=Ad(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Sm(e){const t=e.auth,n=await e.getIdToken(),r=await Ru(e,_m(t,{idToken:n}));Yt(r?.users.length,t,"internal-error");const i=r.users[0];e._notifyReloadListener(i);const a=i.providerUserInfo?.length?$M(i.providerUserInfo):[],o=BH(e.providerData,a),c=e.isAnonymous,u=!(e.email&&i.passwordHash)&&!o?.length,d=c?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ub(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(e,h)}async function LH(e){const t=an(e);await Sm(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function BH(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function $M(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function UH(e,t){const n=await qM(e,{},async()=>{const r=wh({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:a}=e.config,o=await HM(e,i,"/v1/token",`key=${a}`),c=await e._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return e.emulatorConfig&&Yu(e.emulatorConfig.host)&&(u.credentials="include"),GM.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function FH(e,t){return Ha(e,"POST","/v2/accounts:revokeToken",Ms(e,t))}class hu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Yt(t.idToken,"internal-error"),Yt(typeof t.idToken<"u","internal-error"),Yt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):$2(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Yt(t.length!==0,"internal-error");const n=$2(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Yt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await UH(t,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new hu;return r&&(Yt(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(Yt(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),a&&(Yt(typeof a=="number","internal-error",{appName:t}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new hu,this.toJSON())}_performRefresh(){return hs("not implemented")}}function mo(e,t){Yt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class $i{constructor({uid:t,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new zH(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ub(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const n=await Ru(this,this.stsTokenManager.getToken(this.auth,t));return Yt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return VH(this,t)}reload(){return LH(this)}_assign(t){this!==t&&(Yt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new $i({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){Yt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await Sm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ai(this.auth.app))return Promise.reject(bs(this.auth));const t=await this.getIdToken();return await Ru(this,PH(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:b,providerData:S,stsTokenManager:w}=n;Yt(g&&w,t,"internal-error");const E=hu.fromJSON(this.name,w);Yt(typeof g=="string",t,"internal-error"),mo(r,t.name),mo(i,t.name),Yt(typeof m=="boolean",t,"internal-error"),Yt(typeof b=="boolean",t,"internal-error"),mo(a,t.name),mo(o,t.name),mo(c,t.name),mo(u,t.name),mo(d,t.name),mo(h,t.name);const T=new $i({uid:g,auth:t,email:i,emailVerified:m,displayName:r,isAnonymous:b,photoURL:o,phoneNumber:a,tenantId:c,stsTokenManager:E,createdAt:d,lastLoginAt:h});return S&&Array.isArray(S)&&(T.providerData=S.map(D=>({...D}))),u&&(T._redirectEventId=u),T}static async _fromIdTokenResponse(t,n,r=!1){const i=new hu;i.updateFromServerResponse(n);const a=new $i({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await Sm(a),a}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];Yt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?$M(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!a?.length,c=new hu;c.updateFromIdToken(r);const u=new $i({uid:i.localId,auth:t,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Ub(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(u,d),u}}const Y2=new Map;function ps(e){Cs(e instanceof Function,"Expected a class definition");let t=Y2.get(e);return t?(Cs(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Y2.set(e,t),t)}class YM{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}YM.type="NONE";const X2=YM;function Fg(e,t,n){return`firebase:${e}:${t}:${n}`}class pu{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Fg(this.userKey,i.apiKey,a),this.fullPersistenceKey=Fg("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await _m(this.auth,{idToken:t}).catch(()=>{});return n?$i._fromGetAccountInfoResponse(this.auth,n,t):null}return $i._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new pu(ps(X2),t,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||ps(X2);const o=Fg(r,t.config.apiKey,t.name);let c=null;for(const d of n)try{const h=await d._get(o);if(h){let g;if(typeof h=="string"){const m=await _m(t,{idToken:h}).catch(()=>{});if(!m)break;g=await $i._fromGetAccountInfoResponse(t,m,h)}else g=$i._fromJSON(t,h);d!==a&&(c=g),a=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new pu(a,t,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new pu(a,t,r))}}function W2(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(QM(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(XM(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(JM(t))return"Blackberry";if(tO(t))return"Webos";if(WM(t))return"Safari";if((t.includes("chrome/")||KM(t))&&!t.includes("edge/"))return"Chrome";if(ZM(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function XM(e=br()){return/firefox\//i.test(e)}function WM(e=br()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function KM(e=br()){return/crios\//i.test(e)}function QM(e=br()){return/iemobile/i.test(e)}function ZM(e=br()){return/android/i.test(e)}function JM(e=br()){return/blackberry/i.test(e)}function tO(e=br()){return/webos/i.test(e)}function U_(e=br()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function GH(e=br()){return U_(e)&&!!window.navigator?.standalone}function qH(){return iq()&&document.documentMode===10}function eO(e=br()){return U_(e)||ZM(e)||tO(e)||JM(e)||/windows phone/i.test(e)||QM(e)}function nO(e,t=[]){let n;switch(e){case"Browser":n=W2(br());break;case"Worker":n=`${W2(br())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xu}/${r}`}class HH{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=a=>new Promise((o,c)=>{try{const u=t(a);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function $H(e,t={}){return Ha(e,"GET","/v2/passwordPolicy",Ms(e,t))}const YH=6;class XH{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??YH,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=a))}}class WH{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new K2(this),this.idTokenSubscription=new K2(this),this.beforeStateQueue=new HH(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=UM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=ps(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await pu.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await _m(this,{idToken:t}),r=await $i._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Ai(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(t);(!a||a===o)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Yt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Sm(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=CH()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ai(this.app))return Promise.reject(bs(this));const n=t?an(t):null;return n&&Yt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Yt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Ai(this.app)?Promise.reject(bs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ai(this.app)?Promise.reject(bs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ps(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await $H(this),n=new XH(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Sh("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await FH(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&ps(t)||this._popupRedirectResolver;Yt(n,this,"argument-error"),this.redirectPersistenceManager=await pu.create(this,[ps(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Yt(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Yt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=nO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){if(Ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&EH(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Zo(e){return an(e)}class K2{constructor(t){this.auth=t,this.observer=null,this.addObserver=dq(n=>this.observer=n)}get next(){return Yt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let fv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KH(e){fv=e}function rO(e){return fv.loadJS(e)}function QH(){return fv.recaptchaEnterpriseScript}function ZH(){return fv.gapiScript}function JH(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class t${constructor(){this.enterprise=new e$}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class e${ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const n$="recaptcha-enterprise",iO="NO_RECAPTCHA";class r${constructor(t){this.type=n$,this.auth=Zo(t)}async verify(t="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{OH(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new MH(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function i(a,o,c){const u=window.grecaptcha;H2(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:t}).then(d=>{o(d)}).catch(()=>{o(iO)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new t$().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(c=>{if(!n&&H2(window.grecaptcha))i(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=QH();u.length!==0&&(u+=c),rO(u).then(()=>{i(c,a,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function Q2(e,t,n,r=!1,i=!1){const a=new r$(e);let o;if(i)o=iO;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}const c={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function wm(e,t,n,r,i){if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Q2(e,t,n,n==="getOobCode");return r(e,a)}else return r(e,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Q2(e,t,n,n==="getOobCode");return r(e,o)}else return Promise.reject(a)})}function i$(e,t){const n=j_(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Yl(a,t??{}))return i;Ji(i,"already-initialized")}return n.initialize({options:t})}function a$(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ps);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function s$(e,t,n){const r=Zo(e);Yt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,a=aO(t),{host:o,port:c}=o$(t),u=c===null?"":`:${c}`,d={url:`${a}//${o}${u}/`},h=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Yt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Yt(Yl(d,r.config.emulator)&&Yl(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Yu(o)?(NM(`${a}//${o}${u}`),MM("Auth",!0)):l$()}function aO(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function o$(e){const t=aO(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:Z2(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:Z2(o)}}}function Z2(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function l$(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}class F_{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return hs("not implemented")}_getIdTokenResponse(t){return hs("not implemented")}_linkToIdToken(t,n){return hs("not implemented")}_getReauthenticationResolver(t){return hs("not implemented")}}async function c$(e,t){return Ha(e,"POST","/v1/accounts:signUp",t)}async function u$(e,t){return Th(e,"POST","/v1/accounts:signInWithPassword",Ms(e,t))}async function sO(e,t){return Ha(e,"POST","/v1/accounts:sendOobCode",Ms(e,t))}async function f$(e,t){return sO(e,t)}async function d$(e,t){return sO(e,t)}async function h$(e,t){return Th(e,"POST","/v1/accounts:signInWithEmailLink",Ms(e,t))}async function p$(e,t){return Th(e,"POST","/v1/accounts:signInWithEmailLink",Ms(e,t))}class Wd extends F_{constructor(t,n,r,i=null){super("password",r),this._email=t,this._password=n,this._tenantId=i}static _fromEmailAndPassword(t,n){return new Wd(t,n,"password")}static _fromEmailAndCode(t,n,r=null){return new Wd(t,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wm(t,n,"signInWithPassword",u$);case"emailLink":return h$(t,{email:this._email,oobCode:this._password});default:Ji(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wm(t,r,"signUpPassword",c$);case"emailLink":return p$(t,{idToken:n,email:this._email,oobCode:this._password});default:Ji(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function gu(e,t){return Th(e,"POST","/v1/accounts:signInWithIdp",Ms(e,t))}const g$="http://localhost";class Wl extends F_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Wl(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Ji("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const o=new Wl(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return gu(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,gu(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,gu(t,n)}buildRequest(){const t={requestUri:g$,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=wh(n)}return t}}function m$(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function v$(e){const t=ld(cd(e)).link,n=t?ld(cd(t)).deep_link_id:null,r=ld(cd(e)).deep_link_id;return(r?ld(cd(r)).link:null)||r||n||t||e}class G_{constructor(t){const n=ld(cd(t)),r=n.apiKey??null,i=n.oobCode??null,a=m$(n.mode??null);Yt(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=v$(t);try{return new G_(n)}catch{return null}}}class nc{constructor(){this.providerId=nc.PROVIDER_ID}static credential(t,n){return Wd._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const r=G_.parseLink(n);return Yt(r,"argument-error"),Wd._fromEmailAndCode(t,r.code,r.tenantId)}}nc.PROVIDER_ID="password";nc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";nc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class oO{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class Ah extends oO{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class So extends Ah{constructor(){super("facebook.com")}static credential(t){return Wl._fromParams({providerId:So.PROVIDER_ID,signInMethod:So.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return So.credentialFromTaggedObject(t)}static credentialFromError(t){return So.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return So.credential(t.oauthAccessToken)}catch{return null}}}So.FACEBOOK_SIGN_IN_METHOD="facebook.com";So.PROVIDER_ID="facebook.com";class wo extends Ah{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Wl._fromParams({providerId:wo.PROVIDER_ID,signInMethod:wo.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return wo.credentialFromTaggedObject(t)}static credentialFromError(t){return wo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return wo.credential(n,r)}catch{return null}}}wo.GOOGLE_SIGN_IN_METHOD="google.com";wo.PROVIDER_ID="google.com";class Eo extends Ah{constructor(){super("github.com")}static credential(t){return Wl._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Eo.credentialFromTaggedObject(t)}static credentialFromError(t){return Eo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Eo.credential(t.oauthAccessToken)}catch{return null}}}Eo.GITHUB_SIGN_IN_METHOD="github.com";Eo.PROVIDER_ID="github.com";class To extends Ah{constructor(){super("twitter.com")}static credential(t,n){return Wl._fromParams({providerId:To.PROVIDER_ID,signInMethod:To.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return To.credentialFromTaggedObject(t)}static credentialFromError(t){return To.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return To.credential(n,r)}catch{return null}}}To.TWITTER_SIGN_IN_METHOD="twitter.com";To.PROVIDER_ID="twitter.com";async function y$(e,t){return Th(e,"POST","/v1/accounts:signUp",Ms(e,t))}class Kl{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const a=await $i._fromIdTokenResponse(t,r,i),o=J2(r);return new Kl({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=J2(r);return new Kl({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function J2(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Em extends Ns{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Em.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new Em(t,n,r,i)}}function lO(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Em._fromErrorAndOperation(e,a,t,r):a})}async function b$(e,t,n=!1){const r=await Ru(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Kl._forOperation(e,"link",r)}async function cO(e,t,n=!1){const{auth:r}=e;if(Ai(r.app))return Promise.reject(bs(r));const i="reauthenticate";try{const a=await Ru(e,lO(r,i,t,e),n);Yt(a.idToken,r,"internal-error");const o=B_(a.idToken);Yt(o,r,"internal-error");const{sub:c}=o;return Yt(e.uid===c,r,"user-mismatch"),Kl._forOperation(e,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&Ji(r,"user-mismatch"),a}}async function uO(e,t,n=!1){if(Ai(e.app))return Promise.reject(bs(e));const r="signIn",i=await lO(e,r,t),a=await Kl._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}async function x$(e,t){return uO(Zo(e),t)}async function _$(e,t){return cO(an(e),t)}async function fO(e){const t=Zo(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function S$(e,t,n){const r=Zo(e);await wm(r,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",d$)}async function w$(e,t,n){if(Ai(e.app))return Promise.reject(bs(e));const r=Zo(e),o=await wm(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",y$).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&fO(e),u}),c=await Kl._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function E$(e,t,n){return Ai(e.app)?Promise.reject(bs(e)):x$(an(e),nc.credential(t,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&fO(e),r})}async function tR(e,t){const n=an(e),i={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()},{email:a}=await f$(n.auth,i);a!==e.email&&await e.reload()}async function T$(e,t){return Ha(e,"POST","/v1/accounts:update",t)}async function A$(e,{displayName:t,photoURL:n}){if(t===void 0&&n===void 0)return;const r=an(e),a={idToken:await r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},o=await Ru(r,T$(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function C$(e,t,n,r){return an(e).onIdTokenChanged(t,n,r)}function R$(e,t,n){return an(e).beforeAuthStateChanged(t,n)}function D$(e,t,n,r){return an(e).onAuthStateChanged(t,n,r)}function eR(e){return an(e).signOut()}async function I$(e){return an(e).delete()}const Tm="__sak";class dO{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Tm,"1"),this.storage.removeItem(Tm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const k$=1e3,N$=10;class hO extends dO{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eO(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);qH()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,N$):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},k$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}hO.type="LOCAL";const M$=hO;class pO extends dO{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}pO.type="SESSION";const gO=pO;function O$(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}class dv{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new dv(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:a}=n.data,o=this.handlersMap[i];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async d=>d(n.origin,a)),u=await O$(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dv.receivers=[];function q_(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}class P${constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const d=q_("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const m=g;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(m.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Na(){return window}function V$(e){Na().location.href=e}function mO(){return typeof Na().WorkerGlobalScope<"u"&&typeof Na().importScripts=="function"}async function j$(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function z$(){return navigator?.serviceWorker?.controller||null}function L$(){return mO()?self:null}const vO="firebaseLocalStorageDb",B$=1,Am="firebaseLocalStorage",yO="fbase_key";class Ch{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hv(e,t){return e.transaction([Am],t?"readwrite":"readonly").objectStore(Am)}function U$(){const e=indexedDB.deleteDatabase(vO);return new Ch(e).toPromise()}function Fb(){const e=indexedDB.open(vO,B$);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(Am,{keyPath:yO})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(Am)?t(r):(r.close(),await U$(),t(await Fb()))})})}async function nR(e,t,n){const r=hv(e,!0).put({[yO]:t,value:n});return new Ch(r).toPromise()}async function F$(e,t){const n=hv(e,!1).get(t),r=await new Ch(n).toPromise();return r===void 0?null:r.value}function rR(e,t){const n=hv(e,!0).delete(t);return new Ch(n).toPromise()}const G$=800,q$=3;class bO{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fb(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>q$)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mO()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dv._getInstance(L$()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await j$(),!this.activeServiceWorker)return;this.sender=new P$(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||z$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Fb();return await nR(t,Tm,"1"),await rR(t,Tm),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>nR(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>F$(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>rR(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const a=hv(i,!1).getAll();return new Ch(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:a}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),G$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bO.type="LOCAL";const H$=bO;new Eh(3e4,6e4);function $$(e,t){return t?ps(t):(Yt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}class H_ extends F_{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return gu(t,this._buildIdpRequest())}_linkToIdToken(t,n){return gu(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return gu(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Y$(e){return uO(e.auth,new H_(e),e.bypassAuthState)}function X$(e){const{auth:t,user:n}=e;return Yt(n,t,"internal-error"),cO(n,new H_(e),e.bypassAuthState)}async function W$(e){const{auth:t,user:n}=e;return Yt(n,t,"internal-error"),b$(n,new H_(e),e.bypassAuthState)}class xO{constructor(t,n,r,i,a=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:o,type:c}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Y$;case"linkViaPopup":case"linkViaRedirect":return W$;case"reauthViaPopup":case"reauthViaRedirect":return X$;default:Ji(this.auth,"internal-error")}}resolve(t){Cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const K$=new Eh(2e3,1e4);class uu extends xO{constructor(t,n,r,i,a){super(t,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,uu.currentPopupAction&&uu.currentPopupAction.cancel(),uu.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Yt(t,this.auth,"internal-error"),t}async onExecution(){Cs(this.filter.length===1,"Popup operations only handle one event");const t=q_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ka(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ka(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,uu.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ka(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,K$.get())};t()}}uu.currentPopupAction=null;const Q$="pendingRedirect",Gg=new Map;class Z$ extends xO{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=Gg.get(this.auth._key());if(!t){try{const r=await J$(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}Gg.set(this.auth._key(),t)}return this.bypassAuthState||Gg.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function J$(e,t){const n=nY(t),r=eY(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function tY(e,t){Gg.set(e._key(),t)}function eY(e){return ps(e._redirectPersistence)}function nY(e){return Fg(Q$,e.config.apiKey,e.name)}async function rY(e,t,n=!1){if(Ai(e.app))return Promise.reject(bs(e));const r=Zo(e),i=$$(r,t),o=await new Z$(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}const iY=600*1e3;class aY{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!sY(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!_O(t)){const r=t.error.code?.split("auth/")[1]||"internal-error";n.onError(ka(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=iY&&this.cachedEventUids.clear(),this.cachedEventUids.has(iR(t))}saveEventToCache(t){this.cachedEventUids.add(iR(t)),this.lastProcessedEventTime=Date.now()}}function iR(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function _O({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function sY(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _O(e);default:return!1}}async function oY(e,t={}){return Ha(e,"GET","/v1/projects",t)}const lY=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cY=/^https?/;async function uY(e){if(e.config.emulator)return;const{authorizedDomains:t}=await oY(e);for(const n of t)try{if(fY(n))return}catch{}Ji(e,"unauthorized-domain")}function fY(e){const t=Bb(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!cY.test(n))return!1;if(lY.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const dY=new Eh(3e4,6e4);function aR(){const e=Na().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function hY(e){return new Promise((t,n)=>{function r(){aR(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{aR(),n(ka(e,"network-request-failed"))},timeout:dY.get()})}if(Na().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Na().gapi?.load)r();else{const i=JH("iframefcb");return Na()[i]=()=>{gapi.load?r():n(ka(e,"network-request-failed"))},rO(`${ZH()}?onload=${i}`).catch(a=>n(a))}}).catch(t=>{throw qg=null,t})}let qg=null;function pY(e){return qg=qg||hY(e),qg}const gY=new Eh(5e3,15e3),mY="__/auth/iframe",vY="emulator/auth/iframe",yY={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bY=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xY(e){const t=e.config;Yt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?L_(t,vY):`https://${e.config.authDomain}/${mY}`,r={apiKey:t.apiKey,appName:e.name,v:Xu},i=bY.get(e.config.apiHost);i&&(r.eid=i);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${wh(r).slice(1)}`}async function _Y(e){const t=await pY(e),n=Na().gapi;return Yt(n,e,"internal-error"),t.open({where:document.body,url:xY(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yY,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=ka(e,"network-request-failed"),c=Na().setTimeout(()=>{a(o)},gY.get());function u(){Na().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{a(o)})}))}const SY={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wY=500,EY=600,TY="_blank",AY="http://localhost";class sR{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CY(e,t,n,r=wY,i=EY){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...SY,width:r.toString(),height:i.toString(),top:a,left:o},d=br().toLowerCase();n&&(c=KM(d)?TY:n),XM(d)&&(t=t||AY,u.scrollbars="yes");const h=Object.entries(u).reduce((m,[b,S])=>`${m}${b}=${S},`,"");if(GH(d)&&c!=="_self")return RY(t||"",c),new sR(null);const g=window.open(t||"",c,h);Yt(g,e,"popup-blocked");try{g.focus()}catch{}return new sR(g)}function RY(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const DY="__/auth/handler",IY="emulator/auth/handler",kY=encodeURIComponent("fac");async function oR(e,t,n,r,i,a){Yt(e.config.authDomain,e,"auth-domain-config-required"),Yt(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Xu,eventId:i};if(t instanceof oO){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",fq(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[h,g]of Object.entries({}))o[h]=g}if(t instanceof Ah){const h=t.getScopes().filter(g=>g!=="");h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);const c=o;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const u=await e._getAppCheckToken(),d=u?`#${kY}=${encodeURIComponent(u)}`:"";return`${NY(e)}?${wh(c).slice(1)}${d}`}function NY({config:e}){return e.emulator?L_(e,IY):`https://${e.authDomain}/${DY}`}const b1="webStorageSupport";class MY{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gO,this._completeRedirectFn=rY,this._overrideRedirectResult=tY}async _openPopup(t,n,r,i){Cs(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const a=await oR(t,n,r,Bb(),i);return CY(t,a,q_())}async _openRedirect(t,n,r,i){await this._originValidation(t);const a=await oR(t,n,r,Bb(),i);return V$(a),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Cs(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await _Y(t),r=new aY(t);return n.register("authEvent",i=>(Yt(i?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(b1,{type:b1},i=>{const a=i?.[0]?.[b1];a!==void 0&&n(!!a),Ji(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=uY(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return eO()||WM()||U_()}}const OY=MY;var lR="@firebase/auth",cR="1.11.1";class PY{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Yt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function VY(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jY(e){Cu(new Xl("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),a=t.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;Yt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nO(e)},d=new WH(r,i,a,u);return a$(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Cu(new Xl("auth-internal",t=>{const n=Zo(t.getProvider("auth").getImmediate());return(r=>new PY(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Oo(lR,cR,VY(e)),Oo(lR,cR,"esm2020")}const zY=300,LY=kM("authIdTokenMaxAge")||zY;let uR=null;const BY=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>LY)return;const i=n?.token;uR!==i&&(uR=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function UY(e=jM()){const t=j_(e,"auth");if(t.isInitialized())return t.getImmediate();const n=i$(e,{popupRedirectResolver:OY,persistence:[H$,M$,gO]}),r=kM("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=BY(a.toString());R$(n,o,()=>o(n.currentUser)),C$(n,c=>o(c))}}const i=DM("auth");return i&&s$(n,`http://${i}`),n}function FY(){return document.getElementsByTagName("head")?.[0]??document}KH({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const a=ka("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",FY().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jY("Browser");var GY="firebase",qY="12.6.0";Oo(GY,qY,"app");var fR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Po,SO;(function(){var e;function t(A,C){function k(){}k.prototype=C.prototype,A.F=C.prototype,A.prototype=new k,A.prototype.constructor=A,A.D=function(j,L,B){for(var V=Array(arguments.length-2),K=2;K<arguments.length;K++)V[K-2]=arguments[K];return C.prototype[L].apply(j,V)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,C,k){k||(k=0);const j=Array(16);if(typeof C=="string")for(var L=0;L<16;++L)j[L]=C.charCodeAt(k++)|C.charCodeAt(k++)<<8|C.charCodeAt(k++)<<16|C.charCodeAt(k++)<<24;else for(L=0;L<16;++L)j[L]=C[k++]|C[k++]<<8|C[k++]<<16|C[k++]<<24;C=A.g[0],k=A.g[1],L=A.g[2];let B=A.g[3],V;V=C+(B^k&(L^B))+j[0]+3614090360&4294967295,C=k+(V<<7&4294967295|V>>>25),V=B+(L^C&(k^L))+j[1]+3905402710&4294967295,B=C+(V<<12&4294967295|V>>>20),V=L+(k^B&(C^k))+j[2]+606105819&4294967295,L=B+(V<<17&4294967295|V>>>15),V=k+(C^L&(B^C))+j[3]+3250441966&4294967295,k=L+(V<<22&4294967295|V>>>10),V=C+(B^k&(L^B))+j[4]+4118548399&4294967295,C=k+(V<<7&4294967295|V>>>25),V=B+(L^C&(k^L))+j[5]+1200080426&4294967295,B=C+(V<<12&4294967295|V>>>20),V=L+(k^B&(C^k))+j[6]+2821735955&4294967295,L=B+(V<<17&4294967295|V>>>15),V=k+(C^L&(B^C))+j[7]+4249261313&4294967295,k=L+(V<<22&4294967295|V>>>10),V=C+(B^k&(L^B))+j[8]+1770035416&4294967295,C=k+(V<<7&4294967295|V>>>25),V=B+(L^C&(k^L))+j[9]+2336552879&4294967295,B=C+(V<<12&4294967295|V>>>20),V=L+(k^B&(C^k))+j[10]+4294925233&4294967295,L=B+(V<<17&4294967295|V>>>15),V=k+(C^L&(B^C))+j[11]+2304563134&4294967295,k=L+(V<<22&4294967295|V>>>10),V=C+(B^k&(L^B))+j[12]+1804603682&4294967295,C=k+(V<<7&4294967295|V>>>25),V=B+(L^C&(k^L))+j[13]+4254626195&4294967295,B=C+(V<<12&4294967295|V>>>20),V=L+(k^B&(C^k))+j[14]+2792965006&4294967295,L=B+(V<<17&4294967295|V>>>15),V=k+(C^L&(B^C))+j[15]+1236535329&4294967295,k=L+(V<<22&4294967295|V>>>10),V=C+(L^B&(k^L))+j[1]+4129170786&4294967295,C=k+(V<<5&4294967295|V>>>27),V=B+(k^L&(C^k))+j[6]+3225465664&4294967295,B=C+(V<<9&4294967295|V>>>23),V=L+(C^k&(B^C))+j[11]+643717713&4294967295,L=B+(V<<14&4294967295|V>>>18),V=k+(B^C&(L^B))+j[0]+3921069994&4294967295,k=L+(V<<20&4294967295|V>>>12),V=C+(L^B&(k^L))+j[5]+3593408605&4294967295,C=k+(V<<5&4294967295|V>>>27),V=B+(k^L&(C^k))+j[10]+38016083&4294967295,B=C+(V<<9&4294967295|V>>>23),V=L+(C^k&(B^C))+j[15]+3634488961&4294967295,L=B+(V<<14&4294967295|V>>>18),V=k+(B^C&(L^B))+j[4]+3889429448&4294967295,k=L+(V<<20&4294967295|V>>>12),V=C+(L^B&(k^L))+j[9]+568446438&4294967295,C=k+(V<<5&4294967295|V>>>27),V=B+(k^L&(C^k))+j[14]+3275163606&4294967295,B=C+(V<<9&4294967295|V>>>23),V=L+(C^k&(B^C))+j[3]+4107603335&4294967295,L=B+(V<<14&4294967295|V>>>18),V=k+(B^C&(L^B))+j[8]+1163531501&4294967295,k=L+(V<<20&4294967295|V>>>12),V=C+(L^B&(k^L))+j[13]+2850285829&4294967295,C=k+(V<<5&4294967295|V>>>27),V=B+(k^L&(C^k))+j[2]+4243563512&4294967295,B=C+(V<<9&4294967295|V>>>23),V=L+(C^k&(B^C))+j[7]+1735328473&4294967295,L=B+(V<<14&4294967295|V>>>18),V=k+(B^C&(L^B))+j[12]+2368359562&4294967295,k=L+(V<<20&4294967295|V>>>12),V=C+(k^L^B)+j[5]+4294588738&4294967295,C=k+(V<<4&4294967295|V>>>28),V=B+(C^k^L)+j[8]+2272392833&4294967295,B=C+(V<<11&4294967295|V>>>21),V=L+(B^C^k)+j[11]+1839030562&4294967295,L=B+(V<<16&4294967295|V>>>16),V=k+(L^B^C)+j[14]+4259657740&4294967295,k=L+(V<<23&4294967295|V>>>9),V=C+(k^L^B)+j[1]+2763975236&4294967295,C=k+(V<<4&4294967295|V>>>28),V=B+(C^k^L)+j[4]+1272893353&4294967295,B=C+(V<<11&4294967295|V>>>21),V=L+(B^C^k)+j[7]+4139469664&4294967295,L=B+(V<<16&4294967295|V>>>16),V=k+(L^B^C)+j[10]+3200236656&4294967295,k=L+(V<<23&4294967295|V>>>9),V=C+(k^L^B)+j[13]+681279174&4294967295,C=k+(V<<4&4294967295|V>>>28),V=B+(C^k^L)+j[0]+3936430074&4294967295,B=C+(V<<11&4294967295|V>>>21),V=L+(B^C^k)+j[3]+3572445317&4294967295,L=B+(V<<16&4294967295|V>>>16),V=k+(L^B^C)+j[6]+76029189&4294967295,k=L+(V<<23&4294967295|V>>>9),V=C+(k^L^B)+j[9]+3654602809&4294967295,C=k+(V<<4&4294967295|V>>>28),V=B+(C^k^L)+j[12]+3873151461&4294967295,B=C+(V<<11&4294967295|V>>>21),V=L+(B^C^k)+j[15]+530742520&4294967295,L=B+(V<<16&4294967295|V>>>16),V=k+(L^B^C)+j[2]+3299628645&4294967295,k=L+(V<<23&4294967295|V>>>9),V=C+(L^(k|~B))+j[0]+4096336452&4294967295,C=k+(V<<6&4294967295|V>>>26),V=B+(k^(C|~L))+j[7]+1126891415&4294967295,B=C+(V<<10&4294967295|V>>>22),V=L+(C^(B|~k))+j[14]+2878612391&4294967295,L=B+(V<<15&4294967295|V>>>17),V=k+(B^(L|~C))+j[5]+4237533241&4294967295,k=L+(V<<21&4294967295|V>>>11),V=C+(L^(k|~B))+j[12]+1700485571&4294967295,C=k+(V<<6&4294967295|V>>>26),V=B+(k^(C|~L))+j[3]+2399980690&4294967295,B=C+(V<<10&4294967295|V>>>22),V=L+(C^(B|~k))+j[10]+4293915773&4294967295,L=B+(V<<15&4294967295|V>>>17),V=k+(B^(L|~C))+j[1]+2240044497&4294967295,k=L+(V<<21&4294967295|V>>>11),V=C+(L^(k|~B))+j[8]+1873313359&4294967295,C=k+(V<<6&4294967295|V>>>26),V=B+(k^(C|~L))+j[15]+4264355552&4294967295,B=C+(V<<10&4294967295|V>>>22),V=L+(C^(B|~k))+j[6]+2734768916&4294967295,L=B+(V<<15&4294967295|V>>>17),V=k+(B^(L|~C))+j[13]+1309151649&4294967295,k=L+(V<<21&4294967295|V>>>11),V=C+(L^(k|~B))+j[4]+4149444226&4294967295,C=k+(V<<6&4294967295|V>>>26),V=B+(k^(C|~L))+j[11]+3174756917&4294967295,B=C+(V<<10&4294967295|V>>>22),V=L+(C^(B|~k))+j[2]+718787259&4294967295,L=B+(V<<15&4294967295|V>>>17),V=k+(B^(L|~C))+j[9]+3951481745&4294967295,A.g[0]=A.g[0]+C&4294967295,A.g[1]=A.g[1]+(L+(V<<21&4294967295|V>>>11))&4294967295,A.g[2]=A.g[2]+L&4294967295,A.g[3]=A.g[3]+B&4294967295}r.prototype.v=function(A,C){C===void 0&&(C=A.length);const k=C-this.blockSize,j=this.C;let L=this.h,B=0;for(;B<C;){if(L==0)for(;B<=k;)i(this,A,B),B+=this.blockSize;if(typeof A=="string"){for(;B<C;)if(j[L++]=A.charCodeAt(B++),L==this.blockSize){i(this,j),L=0;break}}else for(;B<C;)if(j[L++]=A[B++],L==this.blockSize){i(this,j),L=0;break}}this.h=L,this.o+=C},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var C=1;C<A.length-8;++C)A[C]=0;C=this.o*8;for(var k=A.length-8;k<A.length;++k)A[k]=C&255,C/=256;for(this.v(A),A=Array(16),C=0,k=0;k<4;++k)for(let j=0;j<32;j+=8)A[C++]=this.g[k]>>>j&255;return A};function a(A,C){var k=c;return Object.prototype.hasOwnProperty.call(k,A)?k[A]:k[A]=C(A)}function o(A,C){this.h=C;const k=[];let j=!0;for(let L=A.length-1;L>=0;L--){const B=A[L]|0;j&&B==C||(k[L]=B,j=!1)}this.g=k}var c={};function u(A){return-128<=A&&A<128?a(A,function(C){return new o([C|0],C<0?-1:0)}):new o([A|0],A<0?-1:0)}function d(A){if(isNaN(A)||!isFinite(A))return g;if(A<0)return E(d(-A));const C=[];let k=1;for(let j=0;A>=k;j++)C[j]=A/k|0,k*=4294967296;return new o(C,0)}function h(A,C){if(A.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(A.charAt(0)=="-")return E(h(A.substring(1),C));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=d(Math.pow(C,8));let j=g;for(let B=0;B<A.length;B+=8){var L=Math.min(8,A.length-B);const V=parseInt(A.substring(B,B+L),C);L<8?(L=d(Math.pow(C,L)),j=j.j(L).add(d(V))):(j=j.j(k),j=j.add(d(V)))}return j}var g=u(0),m=u(1),b=u(16777216);e=o.prototype,e.m=function(){if(w(this))return-E(this).m();let A=0,C=1;for(let k=0;k<this.g.length;k++){const j=this.i(k);A+=(j>=0?j:4294967296+j)*C,C*=4294967296}return A},e.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(S(this))return"0";if(w(this))return"-"+E(this).toString(A);const C=d(Math.pow(A,6));var k=this;let j="";for(;;){const L=M(k,C).g;k=T(k,L.j(C));let B=((k.g.length>0?k.g[0]:k.h)>>>0).toString(A);if(k=L,S(k))return B+j;for(;B.length<6;)B="0"+B;j=B+j}},e.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function S(A){if(A.h!=0)return!1;for(let C=0;C<A.g.length;C++)if(A.g[C]!=0)return!1;return!0}function w(A){return A.h==-1}e.l=function(A){return A=T(this,A),w(A)?-1:S(A)?0:1};function E(A){const C=A.g.length,k=[];for(let j=0;j<C;j++)k[j]=~A.g[j];return new o(k,~A.h).add(m)}e.abs=function(){return w(this)?E(this):this},e.add=function(A){const C=Math.max(this.g.length,A.g.length),k=[];let j=0;for(let L=0;L<=C;L++){let B=j+(this.i(L)&65535)+(A.i(L)&65535),V=(B>>>16)+(this.i(L)>>>16)+(A.i(L)>>>16);j=V>>>16,B&=65535,V&=65535,k[L]=V<<16|B}return new o(k,k[k.length-1]&-2147483648?-1:0)};function T(A,C){return A.add(E(C))}e.j=function(A){if(S(this)||S(A))return g;if(w(this))return w(A)?E(this).j(E(A)):E(E(this).j(A));if(w(A))return E(this.j(E(A)));if(this.l(b)<0&&A.l(b)<0)return d(this.m()*A.m());const C=this.g.length+A.g.length,k=[];for(var j=0;j<2*C;j++)k[j]=0;for(j=0;j<this.g.length;j++)for(let L=0;L<A.g.length;L++){const B=this.i(j)>>>16,V=this.i(j)&65535,K=A.i(L)>>>16,Y=A.i(L)&65535;k[2*j+2*L]+=V*Y,D(k,2*j+2*L),k[2*j+2*L+1]+=B*Y,D(k,2*j+2*L+1),k[2*j+2*L+1]+=V*K,D(k,2*j+2*L+1),k[2*j+2*L+2]+=B*K,D(k,2*j+2*L+2)}for(A=0;A<C;A++)k[A]=k[2*A+1]<<16|k[2*A];for(A=C;A<2*C;A++)k[A]=0;return new o(k,0)};function D(A,C){for(;(A[C]&65535)!=A[C];)A[C+1]+=A[C]>>>16,A[C]&=65535,C++}function I(A,C){this.g=A,this.h=C}function M(A,C){if(S(C))throw Error("division by zero");if(S(A))return new I(g,g);if(w(A))return C=M(E(A),C),new I(E(C.g),E(C.h));if(w(C))return C=M(A,E(C)),new I(E(C.g),C.h);if(A.g.length>30){if(w(A)||w(C))throw Error("slowDivide_ only works with positive integers.");for(var k=m,j=C;j.l(A)<=0;)k=z(k),j=z(j);var L=P(k,1),B=P(j,1);for(j=P(j,2),k=P(k,2);!S(j);){var V=B.add(j);V.l(A)<=0&&(L=L.add(k),B=V),j=P(j,1),k=P(k,1)}return C=T(A,L.j(C)),new I(L,C)}for(L=g;A.l(C)>=0;){for(k=Math.max(1,Math.floor(A.m()/C.m())),j=Math.ceil(Math.log(k)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),B=d(k),V=B.j(C);w(V)||V.l(A)>0;)k-=j,B=d(k),V=B.j(C);S(B)&&(B=m),L=L.add(B),A=T(A,V)}return new I(L,A)}e.B=function(A){return M(this,A).h},e.and=function(A){const C=Math.max(this.g.length,A.g.length),k=[];for(let j=0;j<C;j++)k[j]=this.i(j)&A.i(j);return new o(k,this.h&A.h)},e.or=function(A){const C=Math.max(this.g.length,A.g.length),k=[];for(let j=0;j<C;j++)k[j]=this.i(j)|A.i(j);return new o(k,this.h|A.h)},e.xor=function(A){const C=Math.max(this.g.length,A.g.length),k=[];for(let j=0;j<C;j++)k[j]=this.i(j)^A.i(j);return new o(k,this.h^A.h)};function z(A){const C=A.g.length+1,k=[];for(let j=0;j<C;j++)k[j]=A.i(j)<<1|A.i(j-1)>>>31;return new o(k,A.h)}function P(A,C){const k=C>>5;C%=32;const j=A.g.length-k,L=[];for(let B=0;B<j;B++)L[B]=C>0?A.i(B+k)>>>C|A.i(B+k+1)<<32-C:A.i(B+k);return new o(L,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,SO=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Po=o}).apply(typeof fR<"u"?fR:typeof self<"u"?self:typeof window<"u"?window:{});var Eg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var wO,ud,EO,Hg,Gb,TO,AO,CO;(function(){var e,t=Object.defineProperty;function n(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof Eg=="object"&&Eg];for(var R=0;R<v.length;++R){var O=v[R];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var r=n(this);function i(v,R){if(R)t:{var O=r;v=v.split(".");for(var G=0;G<v.length-1;G++){var it=v[G];if(!(it in O))break t;O=O[it]}v=v[v.length-1],G=O[v],R=R(G),R!=G&&R!=null&&t(O,v,{configurable:!0,writable:!0,value:R})}}i("Symbol.dispose",function(v){return v||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(v){return v||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(v){return v||function(R){var O=[],G;for(G in R)Object.prototype.hasOwnProperty.call(R,G)&&O.push([G,R[G]]);return O}});var a=a||{},o=this||self;function c(v){var R=typeof v;return R=="object"&&v!=null||R=="function"}function u(v,R,O){return v.call.apply(v.bind,arguments)}function d(v,R,O){return d=u,d.apply(null,arguments)}function h(v,R){var O=Array.prototype.slice.call(arguments,1);return function(){var G=O.slice();return G.push.apply(G,arguments),v.apply(this,G)}}function g(v,R){function O(){}O.prototype=R.prototype,v.Z=R.prototype,v.prototype=new O,v.prototype.constructor=v,v.Ob=function(G,it,ut){for(var Tt=Array(arguments.length-2),re=2;re<arguments.length;re++)Tt[re-2]=arguments[re];return R.prototype[it].apply(G,Tt)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?v=>v&&AsyncContext.Snapshot.wrap(v):v=>v;function b(v){const R=v.length;if(R>0){const O=Array(R);for(let G=0;G<R;G++)O[G]=v[G];return O}return[]}function S(v,R){for(let G=1;G<arguments.length;G++){const it=arguments[G];var O=typeof it;if(O=O!="object"?O:it?Array.isArray(it)?"array":O:"null",O=="array"||O=="object"&&typeof it.length=="number"){O=v.length||0;const ut=it.length||0;v.length=O+ut;for(let Tt=0;Tt<ut;Tt++)v[O+Tt]=it[Tt]}else v.push(it)}}class w{constructor(R,O){this.i=R,this.j=O,this.h=0,this.g=null}get(){let R;return this.h>0?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function E(v){o.setTimeout(()=>{throw v},0)}function T(){var v=A;let R=null;return v.g&&(R=v.g,v.g=v.g.next,v.g||(v.h=null),R.next=null),R}class D{constructor(){this.h=this.g=null}add(R,O){const G=I.get();G.set(R,O),this.h?this.h.next=G:this.g=G,this.h=G}}var I=new w(()=>new M,v=>v.reset());class M{constructor(){this.next=this.g=this.h=null}set(R,O){this.h=R,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let z,P=!1,A=new D,C=()=>{const v=Promise.resolve(void 0);z=()=>{v.then(k)}};function k(){for(var v;v=T();){try{v.h.call(v.g)}catch(O){E(O)}var R=I;R.j(v),R.h<100&&(R.h++,v.next=R.g,R.g=v)}P=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(v,R){this.type=v,this.g=this.target=R,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var v=!1,R=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const O=()=>{};o.addEventListener("test",O,R),o.removeEventListener("test",O,R)}catch{}return v})();function V(v){return/^[\s\xa0]*$/.test(v)}function K(v,R){L.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v&&this.init(v,R)}g(K,L),K.prototype.init=function(v,R){const O=this.type=v.type,G=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;this.target=v.target||v.srcElement,this.g=R,R=v.relatedTarget,R||(O=="mouseover"?R=v.fromElement:O=="mouseout"&&(R=v.toElement)),this.relatedTarget=R,G?(this.clientX=G.clientX!==void 0?G.clientX:G.pageX,this.clientY=G.clientY!==void 0?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=v.pointerType,this.state=v.state,this.i=v,v.defaultPrevented&&K.Z.h.call(this)},K.prototype.h=function(){K.Z.h.call(this);const v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var Y="closure_listenable_"+(Math.random()*1e6|0),H=0;function $(v,R,O,G,it){this.listener=v,this.proxy=null,this.src=R,this.type=O,this.capture=!!G,this.ha=it,this.key=++H,this.da=this.fa=!1}function et(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function at(v,R,O){for(const G in v)R.call(O,v[G],G,v)}function X(v,R){for(const O in v)R.call(void 0,v[O],O,v)}function U(v){const R={};for(const O in v)R[O]=v[O];return R}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rt(v,R){let O,G;for(let it=1;it<arguments.length;it++){G=arguments[it];for(O in G)v[O]=G[O];for(let ut=0;ut<Z.length;ut++)O=Z[ut],Object.prototype.hasOwnProperty.call(G,O)&&(v[O]=G[O])}}function st(v){this.src=v,this.g={},this.h=0}st.prototype.add=function(v,R,O,G,it){const ut=v.toString();v=this.g[ut],v||(v=this.g[ut]=[],this.h++);const Tt=dt(v,R,G,it);return Tt>-1?(R=v[Tt],O||(R.fa=!1)):(R=new $(R,this.src,ut,!!G,it),R.fa=O,v.push(R)),R};function ht(v,R){const O=R.type;if(O in v.g){var G=v.g[O],it=Array.prototype.indexOf.call(G,R,void 0),ut;(ut=it>=0)&&Array.prototype.splice.call(G,it,1),ut&&(et(R),v.g[O].length==0&&(delete v.g[O],v.h--))}}function dt(v,R,O,G){for(let it=0;it<v.length;++it){const ut=v[it];if(!ut.da&&ut.listener==R&&ut.capture==!!O&&ut.ha==G)return it}return-1}var bt="closure_lm_"+(Math.random()*1e6|0),At={};function Dt(v,R,O,G,it){if(Array.isArray(R)){for(let ut=0;ut<R.length;ut++)Dt(v,R[ut],O,G,it);return null}return O=be(O),v&&v[Y]?v.J(R,O,c(G)?!!G.capture:!1,it):Kt(v,R,O,!1,G,it)}function Kt(v,R,O,G,it,ut){if(!R)throw Error("Invalid event type");const Tt=c(it)?!!it.capture:!!it;let re=Gt(v);if(re||(v[bt]=re=new st(v)),O=re.add(R,O,G,Tt,ut),O.proxy)return O;if(G=Et(),O.proxy=G,G.src=v,G.listener=O,v.addEventListener)B||(it=Tt),it===void 0&&(it=!1),v.addEventListener(R.toString(),G,it);else if(v.attachEvent)v.attachEvent(Vt(R.toString()),G);else if(v.addListener&&v.removeListener)v.addListener(G);else throw Error("addEventListener and attachEvent are unavailable.");return O}function Et(){function v(O){return R.call(v.src,v.listener,O)}const R=qt;return v}function Rt(v,R,O,G,it){if(Array.isArray(R))for(var ut=0;ut<R.length;ut++)Rt(v,R[ut],O,G,it);else G=c(G)?!!G.capture:!!G,O=be(O),v&&v[Y]?(v=v.i,ut=String(R).toString(),ut in v.g&&(R=v.g[ut],O=dt(R,O,G,it),O>-1&&(et(R[O]),Array.prototype.splice.call(R,O,1),R.length==0&&(delete v.g[ut],v.h--)))):v&&(v=Gt(v))&&(R=v.g[R.toString()],v=-1,R&&(v=dt(R,O,G,it)),(O=v>-1?R[v]:null)&&le(O))}function le(v){if(typeof v!="number"&&v&&!v.da){var R=v.src;if(R&&R[Y])ht(R.i,v);else{var O=v.type,G=v.proxy;R.removeEventListener?R.removeEventListener(O,G,v.capture):R.detachEvent?R.detachEvent(Vt(O),G):R.addListener&&R.removeListener&&R.removeListener(G),(O=Gt(R))?(ht(O,v),O.h==0&&(O.src=null,R[bt]=null)):et(v)}}}function Vt(v){return v in At?At[v]:At[v]="on"+v}function qt(v,R){if(v.da)v=!0;else{R=new K(R,this);const O=v.listener,G=v.ha||v.src;v.fa&&le(v),v=O.call(G,R)}return v}function Gt(v){return v=v[bt],v instanceof st?v:null}var ce="__closure_events_fn_"+(Math.random()*1e9>>>0);function be(v){return typeof v=="function"?v:(v[ce]||(v[ce]=function(R){return v.handleEvent(R)}),v[ce])}function Ot(){j.call(this),this.i=new st(this),this.M=this,this.G=null}g(Ot,j),Ot.prototype[Y]=!0,Ot.prototype.removeEventListener=function(v,R,O,G){Rt(this,v,R,O,G)};function Lt(v,R){var O,G=v.G;if(G)for(O=[];G;G=G.G)O.push(G);if(v=v.M,G=R.type||R,typeof R=="string")R=new L(R,v);else if(R instanceof L)R.target=R.target||v;else{var it=R;R=new L(G,v),rt(R,it)}it=!0;let ut,Tt;if(O)for(Tt=O.length-1;Tt>=0;Tt--)ut=R.g=O[Tt],it=Ne(ut,G,!0,R)&&it;if(ut=R.g=v,it=Ne(ut,G,!0,R)&&it,it=Ne(ut,G,!1,R)&&it,O)for(Tt=0;Tt<O.length;Tt++)ut=R.g=O[Tt],it=Ne(ut,G,!1,R)&&it}Ot.prototype.N=function(){if(Ot.Z.N.call(this),this.i){var v=this.i;for(const R in v.g){const O=v.g[R];for(let G=0;G<O.length;G++)et(O[G]);delete v.g[R],v.h--}}this.G=null},Ot.prototype.J=function(v,R,O,G){return this.i.add(String(v),R,!1,O,G)},Ot.prototype.K=function(v,R,O,G){return this.i.add(String(v),R,!0,O,G)};function Ne(v,R,O,G){if(R=v.i.g[String(R)],!R)return!0;R=R.concat();let it=!0;for(let ut=0;ut<R.length;++ut){const Tt=R[ut];if(Tt&&!Tt.da&&Tt.capture==O){const re=Tt.listener,vn=Tt.ha||Tt.src;Tt.fa&&ht(v.i,Tt),it=re.call(vn,G)!==!1&&it}}return it&&!G.defaultPrevented}function Qe(v,R){if(typeof v!="function")if(v&&typeof v.handleEvent=="function")v=d(v.handleEvent,v);else throw Error("Invalid listener argument");return Number(R)>2147483647?-1:o.setTimeout(v,R||0)}function xe(v){v.g=Qe(()=>{v.g=null,v.i&&(v.i=!1,xe(v))},v.l);const R=v.h;v.h=null,v.m.apply(null,R)}class ue extends j{constructor(R,O){super(),this.m=R,this.l=O,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:xe(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ie(v){j.call(this),this.h=v,this.g={}}g(Ie,j);var Wn=[];function or(v){at(v.g,function(R,O){this.g.hasOwnProperty(O)&&le(R)},v),v.g={}}Ie.prototype.N=function(){Ie.Z.N.call(this),or(this)},Ie.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kr=o.JSON.stringify,Nr=o.JSON.parse,Ps=class{stringify(v){return o.JSON.stringify(v,void 0)}parse(v){return o.JSON.parse(v,void 0)}};function Pi(){}function ea(){}var xr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function on(){L.call(this,"d")}g(on,L);function qn(){L.call(this,"c")}g(qn,L);var $e={},Vs=null;function na(){return Vs=Vs||new Ot}$e.Ia="serverreachability";function ra(v){L.call(this,$e.Ia,v)}g(ra,L);function St(v){const R=na();Lt(R,new ra(R))}$e.STAT_EVENT="statevent";function It(v,R){L.call(this,$e.STAT_EVENT,v),this.stat=R}g(It,L);function fe(v){const R=na();Lt(R,new It(R,v))}$e.Ja="timingevent";function we(v,R){L.call(this,$e.Ja,v),this.size=R}g(we,L);function ln(v,R){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){v()},R)}function pn(){this.g=!0}pn.prototype.ua=function(){this.g=!1};function ui(v,R,O,G,it,ut){v.info(function(){if(v.g)if(ut){var Tt="",re=ut.split("&");for(let Re=0;Re<re.length;Re++){var vn=re[Re].split("=");if(vn.length>1){const Ze=vn[0];vn=vn[1];const pi=Ze.split("_");Tt=pi.length>=2&&pi[1]=="type"?Tt+(Ze+"="+vn+"&"):Tt+(Ze+"=redacted&")}}}else Tt=null;else Tt=ut;return"XMLHTTP REQ ("+G+") [attempt "+it+"]: "+R+`
`+O+`
`+Tt})}function se(v,R,O,G,it,ut,Tt){v.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+it+"]: "+R+`
`+O+`
`+ut+" "+Tt})}function gn(v,R,O,G){v.info(function(){return"XMLHTTP TEXT ("+R+"): "+lr(v,O)+(G?" "+G:"")})}function Vn(v,R){v.info(function(){return"TIMEOUT: "+R})}pn.prototype.info=function(){};function lr(v,R){if(!v.g)return R;if(!R)return null;try{const ut=JSON.parse(R);if(ut){for(v=0;v<ut.length;v++)if(Array.isArray(ut[v])){var O=ut[v];if(!(O.length<2)){var G=O[1];if(Array.isArray(G)&&!(G.length<1)){var it=G[0];if(it!="noop"&&it!="stop"&&it!="close")for(let Tt=1;Tt<G.length;Tt++)G[Tt]=""}}}}return kr(ut)}catch{return R}}var Mr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},_r={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},mn;function Sr(){}g(Sr,Pi),Sr.prototype.g=function(){return new XMLHttpRequest},mn=new Sr;function cr(v){return encodeURIComponent(String(v))}function el(v){var R=1;v=v.split(":");const O=[];for(;R>0&&v.length;)O.push(v.shift()),R--;return v.length&&O.push(v.join(":")),O}function ur(v,R,O,G){this.j=v,this.i=R,this.l=O,this.S=G||1,this.V=new Ie(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new wr}function wr(){this.i=null,this.g="",this.h=!1}var Ye={},Hn={};function ia(v,R,O){v.M=1,v.A=nl(En(R)),v.u=O,v.R=!0,ac(v,null)}function ac(v,R){v.F=Date.now(),aa(v),v.B=En(v.A);var O=v.B,G=v.S;Array.isArray(G)||(G=[String(G)]),cc(O.i,"t",G),v.C=0,O=v.j.L,v.h=new wr,v.g=Wh(v.j,O?R:null,!v.u),v.P>0&&(v.O=new ue(d(v.Y,v,v.g),v.P)),R=v.V,O=v.g,G=v.ba;var it="readystatechange";Array.isArray(it)||(it&&(Wn[0]=it.toString()),it=Wn);for(let ut=0;ut<it.length;ut++){const Tt=Dt(O,it[ut],G||R.handleEvent,!1,R.h||R);if(!Tt)break;R.g[Tt.key]=Tt}R=v.J?U(v.J):{},v.u?(v.v||(v.v="POST"),R["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.B,v.v,v.u,R)):(v.v="GET",v.g.ea(v.B,v.v,null,R)),St(),ui(v.i,v.v,v.B,v.l,v.S,v.u)}ur.prototype.ba=function(v){v=v.target;const R=this.O;R&&zi(v)==3?R.j():this.Y(v)},ur.prototype.Y=function(v){try{if(v==this.g)t:{const re=zi(this.g),vn=this.g.ya(),Re=this.g.ca();if(!(re<3)&&(re!=3||this.g&&(this.h.h||this.g.la()||Kn(this.g)))){this.K||re!=4||vn==7||(vn==8||Re<=0?St(3):St(2)),sa(this);var R=this.g.ca();this.X=R;var O=Vv(this);if(this.o=R==200,se(this.i,this.v,this.B,this.l,this.S,re,R),this.o){if(this.U&&!this.L){e:{if(this.g){var G,it=this.g;if((G=it.g?it.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(G)){var ut=G;break e}}ut=null}if(v=ut)gn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,oa(this,v);else{this.o=!1,this.m=3,fe(12),Qr(this),fi(this);break t}}if(this.R){v=!0;let Ze;for(;!this.K&&this.C<O.length;)if(Ze=Vh(this,O),Ze==Hn){re==4&&(this.m=4,fe(14),v=!1),gn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ze==Ye){this.m=4,fe(15),gn(this.i,this.l,O,"[Invalid Chunk]"),v=!1;break}else gn(this.i,this.l,Ze,null),oa(this,Ze);if(Ph(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),re!=4||O.length!=0||this.h.h||(this.m=1,fe(16),v=!1),this.o=this.o&&v,!v)gn(this.i,this.l,O,"[Invalid Chunked Response]"),Qr(this),fi(this);else if(O.length>0&&!this.W){this.W=!0;var Tt=this.j;Tt.g==this&&Tt.aa&&!Tt.P&&(Tt.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),mf(Tt),Tt.P=!0,fe(11))}}else gn(this.i,this.l,O,null),oa(this,O);re==4&&Qr(this),this.o&&!this.K&&(re==4?Hh(this.j,this):(this.o=!1,aa(this)))}else Ya(this.g),R==400&&O.indexOf("Unknown SID")>0?(this.m=3,fe(12)):(this.m=0,fe(13)),Qr(this),fi(this)}}}catch{}finally{}};function Vv(v){if(!Ph(v))return v.g.la();const R=Kn(v.g);if(R==="")return"";let O="";const G=R.length,it=zi(v.g)==4;if(!v.h.i){if(typeof TextDecoder>"u")return Qr(v),fi(v),"";v.h.i=new o.TextDecoder}for(let ut=0;ut<G;ut++)v.h.h=!0,O+=v.h.i.decode(R[ut],{stream:!(it&&ut==G-1)});return R.length=0,v.h.g+=O,v.C=0,v.h.g}function Ph(v){return v.g?v.v=="GET"&&v.M!=2&&v.j.Aa:!1}function Vh(v,R){var O=v.C,G=R.indexOf(`
`,O);return G==-1?Hn:(O=Number(R.substring(O,G)),isNaN(O)?Ye:(G+=1,G+O>R.length?Hn:(R=R.slice(G,G+O),v.C=G+O,R)))}ur.prototype.cancel=function(){this.K=!0,Qr(this)};function aa(v){v.T=Date.now()+v.H,sc(v,v.H)}function sc(v,R){if(v.D!=null)throw Error("WatchDog timer not null");v.D=ln(d(v.aa,v),R)}function sa(v){v.D&&(o.clearTimeout(v.D),v.D=null)}ur.prototype.aa=function(){this.D=null;const v=Date.now();v-this.T>=0?(Vn(this.i,this.B),this.M!=2&&(St(),fe(17)),Qr(this),this.m=2,fi(this)):sc(this,this.T-v)};function fi(v){v.j.I==0||v.K||Hh(v.j,v)}function Qr(v){sa(v);var R=v.O;R&&typeof R.dispose=="function"&&R.dispose(),v.O=null,or(v.V),v.g&&(R=v.g,v.g=null,R.abort(),R.dispose())}function oa(v,R){try{var O=v.j;if(O.I!=0&&(O.g==v||ca(O.h,v))){if(!v.L&&ca(O.h,v)&&O.I==3){try{var G=O.Ba.g.parse(R)}catch{G=null}if(Array.isArray(G)&&G.length==3){var it=G;if(it[0]==0){t:if(!O.v){if(O.g)if(O.g.F+3e3<v.F)pc(O),qs(O);else break t;cl(O),fe(18)}}else O.xa=it[1],0<O.xa-O.K&&it[2]<37500&&O.F&&O.A==0&&!O.C&&(O.C=ln(d(O.Va,O),6e3));la(O.h)<=1&&O.ta&&(O.ta=void 0)}else ga(O,11)}else if((v.L||O.g==v)&&pc(O),!V(R))for(it=O.Ba.g.parse(R),R=0;R<it.length;R++){let Re=it[R];const Ze=Re[0];if(!(Ze<=O.K))if(O.K=Ze,Re=Re[1],O.I==2)if(Re[0]=="c"){O.M=Re[1],O.ba=Re[2];const pi=Re[3];pi!=null&&(O.ka=pi,O.j.info("VER="+O.ka));const ma=Re[4];ma!=null&&(O.za=ma,O.j.info("SVER="+O.za));const Li=Re[5];Li!=null&&typeof Li=="number"&&Li>0&&(G=1.5*Li,O.O=G,O.j.info("backChannelRequestTimeoutMs_="+G)),G=O;const Bi=v.g;if(Bi){const ul=Bi.g?Bi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ul){var ut=G.h;ut.g||ul.indexOf("spdy")==-1&&ul.indexOf("quic")==-1&&ul.indexOf("h2")==-1||(ut.j=ut.l,ut.g=new Set,ut.h&&(rf(ut,ut.h),ut.h=null))}if(G.G){const gc=Bi.g?Bi.g.getResponseHeader("X-HTTP-Session-Id"):null;gc&&(G.wa=gc,Me(G.J,G.G,gc))}}O.I=3,O.l&&O.l.ra(),O.aa&&(O.T=Date.now()-v.F,O.j.info("Handshake RTT: "+O.T+"ms")),G=O;var Tt=v;if(G.na=Xh(G,G.L?G.ba:null,G.W),Tt.L){af(G.h,Tt);var re=Tt,vn=G.O;vn&&(re.H=vn),re.D&&(sa(re),aa(re)),G.g=Tt}else Gh(G);O.i.length>0&&pa(O)}else Re[0]!="stop"&&Re[0]!="close"||ga(O,7);else O.I==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?ga(O,7):pf(O):Re[0]!="noop"&&O.l&&O.l.qa(Re),O.A=0)}}St(4)}catch{}}var wn=class{constructor(v,R){this.g=v,this.map=R}};function ef(v){this.l=v||10,o.PerformanceNavigationTiming?(v=o.performance.getEntriesByType("navigation"),v=v.length>0&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function nf(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function la(v){return v.h?1:v.g?v.g.size:0}function ca(v,R){return v.h?v.h==R:v.g?v.g.has(R):!1}function rf(v,R){v.g?v.g.add(R):v.h=R}function af(v,R){v.h&&v.h==R?v.h=null:v.g&&v.g.has(R)&&v.g.delete(R)}ef.prototype.cancel=function(){if(this.i=sf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function sf(v){if(v.h!=null)return v.i.concat(v.h.G);if(v.g!=null&&v.g.size!==0){let R=v.i;for(const O of v.g.values())R=R.concat(O.G);return R}return b(v.i)}var jh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oc(v,R){if(v){v=v.split("&");for(let O=0;O<v.length;O++){const G=v[O].indexOf("=");let it,ut=null;G>=0?(it=v[O].substring(0,G),ut=v[O].substring(G+1)):it=v[O],R(it,ut?decodeURIComponent(ut.replace(/\+/g," ")):"")}}}function Zr(v){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let R;v instanceof Zr?(this.l=v.l,$n(this,v.j),this.o=v.o,this.g=v.g,js(this,v.u),this.h=v.h,of(this,Uh(v.i)),this.m=v.m):v&&(R=String(v).match(jh))?(this.l=!1,$n(this,R[1]||"",!0),this.o=ua(R[2]||""),this.g=ua(R[3]||"",!0),js(this,R[4]),this.h=ua(R[5]||"",!0),of(this,R[6]||"",!0),this.m=ua(R[7]||"")):(this.l=!1,this.i=new Ls(null,this.l))}Zr.prototype.toString=function(){const v=[];var R=this.j;R&&v.push(rl(R,lc,!0),":");var O=this.g;return(O||R=="file")&&(v.push("//"),(R=this.o)&&v.push(rl(R,lc,!0),"@"),v.push(cr(O).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.u,O!=null&&v.push(":",String(O))),(O=this.h)&&(this.g&&O.charAt(0)!="/"&&v.push("/"),v.push(rl(O,O.charAt(0)=="/"?lf:zh,!0))),(O=this.i.toString())&&v.push("?",O),(O=this.m)&&v.push("#",rl(O,Lh)),v.join("")},Zr.prototype.resolve=function(v){const R=En(this);let O=!!v.j;O?$n(R,v.j):O=!!v.o,O?R.o=v.o:O=!!v.g,O?R.g=v.g:O=v.u!=null;var G=v.h;if(O)js(R,v.u);else if(O=!!v.h){if(G.charAt(0)!="/")if(this.g&&!this.h)G="/"+G;else{var it=R.h.lastIndexOf("/");it!=-1&&(G=R.h.slice(0,it+1)+G)}if(it=G,it==".."||it==".")G="";else if(it.indexOf("./")!=-1||it.indexOf("/.")!=-1){G=it.lastIndexOf("/",0)==0,it=it.split("/");const ut=[];for(let Tt=0;Tt<it.length;){const re=it[Tt++];re=="."?G&&Tt==it.length&&ut.push(""):re==".."?((ut.length>1||ut.length==1&&ut[0]!="")&&ut.pop(),G&&Tt==it.length&&ut.push("")):(ut.push(re),G=!0)}G=ut.join("/")}else G=it}return O?R.h=G:O=v.i.toString()!=="",O?of(R,Uh(v.i)):O=!!v.m,O&&(R.m=v.m),R};function En(v){return new Zr(v)}function $n(v,R,O){v.j=O?ua(R,!0):R,v.j&&(v.j=v.j.replace(/:$/,""))}function js(v,R){if(R){if(R=Number(R),isNaN(R)||R<0)throw Error("Bad port number "+R);v.u=R}else v.u=null}function of(v,R,O){R instanceof Ls?(v.i=R,uc(v.i,v.l)):(O||(R=rl(R,zs)),v.i=new Ls(R,v.l))}function Me(v,R,O){v.i.set(R,O)}function nl(v){return Me(v,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),v}function ua(v,R){return v?R?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function rl(v,R,O){return typeof v=="string"?(v=encodeURI(v).replace(R,Or),O&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function Or(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var lc=/[#\/\?@]/g,zh=/[#\?:]/g,lf=/[#\?]/g,zs=/[#\?@]/g,Lh=/#/g;function Ls(v,R){this.h=this.g=null,this.i=v||null,this.j=!!R}function Pr(v){v.g||(v.g=new Map,v.h=0,v.i&&oc(v.i,function(R,O){v.add(decodeURIComponent(R.replace(/\+/g," ")),O)}))}e=Ls.prototype,e.add=function(v,R){Pr(this),this.i=null,v=Bs(this,v);let O=this.g.get(v);return O||this.g.set(v,O=[]),O.push(R),this.h+=1,this};function Bh(v,R){Pr(v),R=Bs(v,R),v.g.has(R)&&(v.i=null,v.h-=v.g.get(R).length,v.g.delete(R))}function cf(v,R){return Pr(v),R=Bs(v,R),v.g.has(R)}e.forEach=function(v,R){Pr(this),this.g.forEach(function(O,G){O.forEach(function(it){v.call(R,it,G,this)},this)},this)};function uf(v,R){Pr(v);let O=[];if(typeof R=="string")cf(v,R)&&(O=O.concat(v.g.get(Bs(v,R))));else for(v=Array.from(v.g.values()),R=0;R<v.length;R++)O=O.concat(v[R]);return O}e.set=function(v,R){return Pr(this),this.i=null,v=Bs(this,v),cf(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[R]),this.h+=1,this},e.get=function(v,R){return v?(v=uf(this,v),v.length>0?String(v[0]):R):R};function cc(v,R,O){Bh(v,R),O.length>0&&(v.i=null,v.g.set(Bs(v,R),b(O)),v.h+=O.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],R=Array.from(this.g.keys());for(let G=0;G<R.length;G++){var O=R[G];const it=cr(O);O=uf(this,O);for(let ut=0;ut<O.length;ut++){let Tt=it;O[ut]!==""&&(Tt+="="+cr(O[ut])),v.push(Tt)}}return this.i=v.join("&")};function Uh(v){const R=new Ls;return R.i=v.i,v.g&&(R.g=new Map(v.g),R.h=v.h),R}function Bs(v,R){return R=String(R),v.j&&(R=R.toLowerCase()),R}function uc(v,R){R&&!v.j&&(Pr(v),v.i=null,v.g.forEach(function(O,G){const it=G.toLowerCase();G!=it&&(Bh(this,G),cc(this,it,O))},v)),v.j=R}function Vi(v,R){const O=new pn;if(o.Image){const G=new Image;G.onload=h(di,O,"TestLoadImage: loaded",!0,R,G),G.onerror=h(di,O,"TestLoadImage: error",!1,R,G),G.onabort=h(di,O,"TestLoadImage: abort",!1,R,G),G.ontimeout=h(di,O,"TestLoadImage: timeout",!1,R,G),o.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=v}else R(!1)}function ff(v,R){const O=new pn,G=new AbortController,it=setTimeout(()=>{G.abort(),di(O,"TestPingServer: timeout",!1,R)},1e4);fetch(v,{signal:G.signal}).then(ut=>{clearTimeout(it),ut.ok?di(O,"TestPingServer: ok",!0,R):di(O,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(it),di(O,"TestPingServer: error",!1,R)})}function di(v,R,O,G,it){try{it&&(it.onload=null,it.onerror=null,it.onabort=null,it.ontimeout=null),G(O)}catch{}}function Us(){this.g=new Ps}function fa(v){this.i=v.Sb||null,this.h=v.ab||!1}g(fa,Pi),fa.prototype.g=function(){return new il(this.i,this.h)};function il(v,R){Ot.call(this),this.H=v,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(il,Ot),e=il.prototype,e.open=function(v,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=v,this.D=R,this.readyState=1,ji(this)},e.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const R={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};v&&(R.body=v),(this.H||o).fetch(new Request(this.D,R)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Fs(this)),this.readyState=0},e.Pa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,ji(this)),this.g&&(this.readyState=3,ji(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;fc(this)}else v.text().then(this.Oa.bind(this),this.ga.bind(this))};function fc(v){v.j.read().then(v.Ma.bind(v)).catch(v.ga.bind(v))}e.Ma=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var R=v.value?v.value:new Uint8Array(0);(R=this.B.decode(R,{stream:!v.done}))&&(this.response=this.responseText+=R)}v.done?Fs(this):ji(this),this.readyState==3&&fc(this)}},e.Oa=function(v){this.g&&(this.response=this.responseText=v,Fs(this))},e.Na=function(v){this.g&&(this.response=v,Fs(this))},e.ga=function(){this.g&&Fs(this)};function Fs(v){v.readyState=4,v.l=null,v.j=null,v.B=null,ji(v)}e.setRequestHeader=function(v,R){this.A.append(v,R)},e.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],R=this.h.entries();for(var O=R.next();!O.done;)O=O.value,v.push(O[0]+": "+O[1]),O=R.next();return v.join(`\r
`)};function ji(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(il.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function hi(v){let R="";return at(v,function(O,G){R+=G,R+=":",R+=O,R+=`\r
`}),R}function al(v,R,O){t:{for(G in O){var G=!1;break t}G=!0}G||(O=hi(O),typeof v=="string"?O!=null&&cr(O):Me(v,R,O))}function je(v){Ot.call(this),this.headers=new Map,this.L=v||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(je,Ot);var da=/^https?$/i,df=["POST","PUT"];e=je.prototype,e.Fa=function(v){this.H=v},e.ea=function(v,R,O,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);R=R?R.toUpperCase():"GET",this.D=v,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():mn.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(R,String(v),!0),this.B=!1}catch(ut){sl(this,ut);return}if(v=O||"",O=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var it in G)O.set(it,G[it]);else if(typeof G.keys=="function"&&typeof G.get=="function")for(const ut of G.keys())O.set(ut,G.get(ut));else throw Error("Unknown input type for opt_headers: "+String(G));G=Array.from(O.keys()).find(ut=>ut.toLowerCase()=="content-type"),it=o.FormData&&v instanceof o.FormData,!(Array.prototype.indexOf.call(df,R,void 0)>=0)||G||it||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ut,Tt]of O)this.g.setRequestHeader(ut,Tt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(v),this.v=!1}catch(ut){sl(this,ut)}};function sl(v,R){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=R,v.o=5,hf(v),$a(v)}function hf(v){v.A||(v.A=!0,Lt(v,"complete"),Lt(v,"error"))}e.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=v||7,Lt(this,"complete"),Lt(this,"abort"),$a(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$a(this,!0)),je.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?ol(this):this.Xa())},e.Xa=function(){ol(this)};function ol(v){if(v.h&&typeof a<"u"){if(v.v&&zi(v)==4)setTimeout(v.Ca.bind(v),0);else if(Lt(v,"readystatechange"),zi(v)==4){v.h=!1;try{const ut=v.ca();t:switch(ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break t;default:R=!1}var O;if(!(O=R)){var G;if(G=ut===0){let Tt=String(v.D).match(jh)[1]||null;!Tt&&o.self&&o.self.location&&(Tt=o.self.location.protocol.slice(0,-1)),G=!da.test(Tt?Tt.toLowerCase():"")}O=G}if(O)Lt(v,"complete"),Lt(v,"success");else{v.o=6;try{var it=zi(v)>2?v.g.statusText:""}catch{it=""}v.l=it+" ["+v.ca()+"]",hf(v)}}finally{$a(v)}}}}function $a(v,R){if(v.g){v.m&&(clearTimeout(v.m),v.m=null);const O=v.g;v.g=null,R||Lt(v,"ready");try{O.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function zi(v){return v.g?v.g.readyState:0}e.ca=function(){try{return zi(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.La=function(v){if(this.g){var R=this.g.responseText;return v&&R.indexOf(v)==0&&(R=R.substring(v.length)),Nr(R)}};function Kn(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.F){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function Ya(v){const R={};v=(v.g&&zi(v)>=2&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let G=0;G<v.length;G++){if(V(v[G]))continue;var O=el(v[G]);const it=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const ut=R[it]||[];R[it]=ut,ut.push(O)}X(R,function(G){return G.join(", ")})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ha(v,R,O){return O&&O.internalChannelParams&&O.internalChannelParams[v]||R}function Gs(v){this.za=0,this.i=[],this.j=new pn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ha("failFast",!1,v),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ha("baseRetryDelayMs",5e3,v),this.Za=ha("retryDelaySeedMs",1e4,v),this.Ta=ha("forwardChannelMaxRetries",2,v),this.va=ha("forwardChannelRequestTimeoutMs",2e4,v),this.ma=v&&v.xmlHttpFactory||void 0,this.Ua=v&&v.Rb||void 0,this.Aa=v&&v.useFetchStreams||!1,this.O=void 0,this.L=v&&v.supportsCrossDomainXhr||!1,this.M="",this.h=new ef(v&&v.concurrentRequestLimit),this.Ba=new Us,this.S=v&&v.fastHandshake||!1,this.R=v&&v.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=v&&v.Pb||!1,v&&v.ua&&this.j.ua(),v&&v.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&v&&v.detectBufferingProxy||!1,this.ia=void 0,v&&v.longPollingTimeout&&v.longPollingTimeout>0&&(this.ia=v.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=Gs.prototype,e.ka=8,e.I=1,e.connect=function(v,R,O,G){fe(0),this.W=v,this.H=R||{},O&&G!==void 0&&(this.H.OSID=O,this.H.OAID=G),this.F=this.X,this.J=Xh(this,null,this.W),pa(this)};function pf(v){if(dc(v),v.I==3){var R=v.V++,O=En(v.J);if(Me(O,"SID",v.M),Me(O,"RID",R),Me(O,"TYPE","terminate"),ll(v,O),R=new ur(v,v.j,R),R.M=2,R.A=nl(En(O)),O=!1,o.navigator&&o.navigator.sendBeacon)try{O=o.navigator.sendBeacon(R.A.toString(),"")}catch{}!O&&o.Image&&(new Image().src=R.A,O=!0),O||(R.g=Wh(R.j,null),R.g.ea(R.A)),R.F=Date.now(),aa(R)}Yh(v)}function qs(v){v.g&&(mf(v),v.g.cancel(),v.g=null)}function dc(v){qs(v),v.v&&(o.clearTimeout(v.v),v.v=null),pc(v),v.h.cancel(),v.m&&(typeof v.m=="number"&&o.clearTimeout(v.m),v.m=null)}function pa(v){if(!nf(v.h)&&!v.m){v.m=!0;var R=v.Ea;z||C(),P||(z(),P=!0),A.add(R,v),v.D=0}}function hc(v,R){return la(v.h)>=v.h.j-(v.m?1:0)?!1:v.m?(v.i=R.G.concat(v.i),!0):v.I==1||v.I==2||v.D>=(v.Sa?0:v.Ta)?!1:(v.m=ln(d(v.Ea,v,R),$h(v,v.D)),v.D++,!0)}e.Ea=function(v){if(this.m)if(this.m=null,this.I==1){if(!v){this.V=Math.floor(Math.random()*1e5),v=this.V++;const it=new ur(this,this.j,v);let ut=this.o;if(this.U&&(ut?(ut=U(ut),rt(ut,this.U)):ut=this.U),this.u!==null||this.R||(it.J=ut,ut=null),this.S)t:{for(var R=0,O=0;O<this.i.length;O++){e:{var G=this.i[O];if("__data__"in G.map&&(G=G.map.__data__,typeof G=="string")){G=G.length;break e}G=void 0}if(G===void 0)break;if(R+=G,R>4096){R=O;break t}if(R===4096||O===this.i.length-1){R=O+1;break t}}R=1e3}else R=1e3;R=Fh(this,it,R),O=En(this.J),Me(O,"RID",v),Me(O,"CVER",22),this.G&&Me(O,"X-HTTP-Session-Id",this.G),ll(this,O),ut&&(this.R?R="headers="+cr(hi(ut))+"&"+R:this.u&&al(O,this.u,ut)),rf(this.h,it),this.Ra&&Me(O,"TYPE","init"),this.S?(Me(O,"$req",R),Me(O,"SID","null"),it.U=!0,ia(it,O,null)):ia(it,O,R),this.I=2}}else this.I==3&&(v?gf(this,v):this.i.length==0||nf(this.h)||gf(this))};function gf(v,R){var O;R?O=R.l:O=v.V++;const G=En(v.J);Me(G,"SID",v.M),Me(G,"RID",O),Me(G,"AID",v.K),ll(v,G),v.u&&v.o&&al(G,v.u,v.o),O=new ur(v,v.j,O,v.D+1),v.u===null&&(O.J=v.o),R&&(v.i=R.G.concat(v.i)),R=Fh(v,O,1e3),O.H=Math.round(v.va*.5)+Math.round(v.va*.5*Math.random()),rf(v.h,O),ia(O,G,R)}function ll(v,R){v.H&&at(v.H,function(O,G){Me(R,G,O)}),v.l&&at({},function(O,G){Me(R,G,O)})}function Fh(v,R,O){O=Math.min(v.i.length,O);const G=v.l?d(v.l.Ka,v.l,v):null;t:{var it=v.i;let re=-1;for(;;){const vn=["count="+O];re==-1?O>0?(re=it[0].g,vn.push("ofs="+re)):re=0:vn.push("ofs="+re);let Re=!0;for(let Ze=0;Ze<O;Ze++){var ut=it[Ze].g;const pi=it[Ze].map;if(ut-=re,ut<0)re=Math.max(0,it[Ze].g-100),Re=!1;else try{ut="req"+ut+"_"||"";try{var Tt=pi instanceof Map?pi:Object.entries(pi);for(const[ma,Li]of Tt){let Bi=Li;c(Li)&&(Bi=kr(Li)),vn.push(ut+ma+"="+encodeURIComponent(Bi))}}catch(ma){throw vn.push(ut+"type="+encodeURIComponent("_badmap")),ma}}catch{G&&G(pi)}}if(Re){Tt=vn.join("&");break t}}Tt=void 0}return v=v.i.splice(0,O),R.G=v,Tt}function Gh(v){if(!v.g&&!v.v){v.Y=1;var R=v.Da;z||C(),P||(z(),P=!0),A.add(R,v),v.A=0}}function cl(v){return v.g||v.v||v.A>=3?!1:(v.Y++,v.v=ln(d(v.Da,v),$h(v,v.A)),v.A++,!0)}e.Da=function(){if(this.v=null,qh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var v=4*this.T;this.j.info("BP detection timer enabled: "+v),this.B=ln(d(this.Wa,this),v)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,fe(10),qs(this),qh(this))};function mf(v){v.B!=null&&(o.clearTimeout(v.B),v.B=null)}function qh(v){v.g=new ur(v,v.j,"rpc",v.Y),v.u===null&&(v.g.J=v.o),v.g.P=0;var R=En(v.na);Me(R,"RID","rpc"),Me(R,"SID",v.M),Me(R,"AID",v.K),Me(R,"CI",v.F?"0":"1"),!v.F&&v.ia&&Me(R,"TO",v.ia),Me(R,"TYPE","xmlhttp"),ll(v,R),v.u&&v.o&&al(R,v.u,v.o),v.O&&(v.g.H=v.O);var O=v.g;v=v.ba,O.M=1,O.A=nl(En(R)),O.u=null,O.R=!0,ac(O,v)}e.Va=function(){this.C!=null&&(this.C=null,qs(this),cl(this),fe(19))};function pc(v){v.C!=null&&(o.clearTimeout(v.C),v.C=null)}function Hh(v,R){var O=null;if(v.g==R){pc(v),mf(v),v.g=null;var G=2}else if(ca(v.h,R))O=R.G,af(v.h,R),G=1;else return;if(v.I!=0){if(R.o)if(G==1){O=R.u?R.u.length:0,R=Date.now()-R.F;var it=v.D;G=na(),Lt(G,new we(G,O)),pa(v)}else Gh(v);else if(it=R.m,it==3||it==0&&R.X>0||!(G==1&&hc(v,R)||G==2&&cl(v)))switch(O&&O.length>0&&(R=v.h,R.i=R.i.concat(O)),it){case 1:ga(v,5);break;case 4:ga(v,10);break;case 3:ga(v,6);break;default:ga(v,2)}}}function $h(v,R){let O=v.Qa+Math.floor(Math.random()*v.Za);return v.isActive()||(O*=2),O*R}function ga(v,R){if(v.j.info("Error code "+R),R==2){var O=d(v.bb,v),G=v.Ua;const it=!G;G=new Zr(G||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||$n(G,"https"),nl(G),it?Vi(G.toString(),O):ff(G.toString(),O)}else fe(2);v.I=0,v.l&&v.l.pa(R),Yh(v),dc(v)}e.bb=function(v){v?(this.j.info("Successfully pinged google.com"),fe(2)):(this.j.info("Failed to ping google.com"),fe(1))};function Yh(v){if(v.I=0,v.ja=[],v.l){const R=sf(v.h);(R.length!=0||v.i.length!=0)&&(S(v.ja,R),S(v.ja,v.i),v.h.i.length=0,b(v.i),v.i.length=0),v.l.oa()}}function Xh(v,R,O){var G=O instanceof Zr?En(O):new Zr(O);if(G.g!="")R&&(G.g=R+"."+G.g),js(G,G.u);else{var it=o.location;G=it.protocol,R=R?R+"."+it.hostname:it.hostname,it=+it.port;const ut=new Zr(null);G&&$n(ut,G),R&&(ut.g=R),it&&js(ut,it),O&&(ut.h=O),G=ut}return O=v.G,R=v.wa,O&&R&&Me(G,O,R),Me(G,"VER",v.ka),ll(v,G),G}function Wh(v,R,O){if(R&&!v.L)throw Error("Can't create secondary domain capable XhrIo object.");return R=v.Aa&&!v.ma?new je(new fa({ab:O})):new je(v.ma),R.Fa(v.L),R}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kh(){}e=Kh.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function Hs(){}Hs.prototype.g=function(v,R){return new Er(v,R)};function Er(v,R){Ot.call(this),this.g=new Gs(R),this.l=v,this.h=R&&R.messageUrlParams||null,v=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(v?v["X-WebChannel-Content-Type"]=R.messageContentType:v={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.sa&&(v?v["X-WebChannel-Client-Profile"]=R.sa:v={"X-WebChannel-Client-Profile":R.sa}),this.g.U=v,(v=R&&R.Qb)&&!V(v)&&(this.g.u=v),this.A=R&&R.supportsCrossDomainXhr||!1,this.v=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!V(R)&&(this.g.G=R,v=this.h,v!==null&&R in v&&(v=this.h,R in v&&delete v[R])),this.j=new Xa(this)}g(Er,Ot),Er.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Er.prototype.close=function(){pf(this.g)},Er.prototype.o=function(v){var R=this.g;if(typeof v=="string"){var O={};O.__data__=v,v=O}else this.v&&(O={},O.__data__=kr(v),v=O);R.i.push(new wn(R.Ya++,v)),R.I==3&&pa(R)},Er.prototype.N=function(){this.g.l=null,delete this.j,pf(this.g),delete this.g,Er.Z.N.call(this)};function Qh(v){on.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var R=v.__sm__;if(R){t:{for(const O in R){v=O;break t}v=void 0}(this.i=v)&&(v=this.i,R=R!==null&&v in R?R[v]:void 0),this.data=R}else this.data=v}g(Qh,on);function Zh(){qn.call(this),this.status=1}g(Zh,qn);function Xa(v){this.g=v}g(Xa,Kh),Xa.prototype.ra=function(){Lt(this.g,"a")},Xa.prototype.qa=function(v){Lt(this.g,new Qh(v))},Xa.prototype.pa=function(v){Lt(this.g,new Zh)},Xa.prototype.oa=function(){Lt(this.g,"b")},Hs.prototype.createWebChannel=Hs.prototype.g,Er.prototype.send=Er.prototype.o,Er.prototype.open=Er.prototype.m,Er.prototype.close=Er.prototype.close,CO=function(){return new Hs},AO=function(){return na()},TO=$e,Gb={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Mr.NO_ERROR=0,Mr.TIMEOUT=8,Mr.HTTP_ERROR=6,Hg=Mr,_r.COMPLETE="complete",EO=_r,ea.EventType=xr,xr.OPEN="a",xr.CLOSE="b",xr.ERROR="c",xr.MESSAGE="d",Ot.prototype.listen=Ot.prototype.J,ud=ea,je.prototype.listenOnce=je.prototype.K,je.prototype.getLastError=je.prototype.Ha,je.prototype.getLastErrorCode=je.prototype.ya,je.prototype.getStatus=je.prototype.ca,je.prototype.getResponseJson=je.prototype.La,je.prototype.getResponseText=je.prototype.la,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Fa,wO=je}).apply(typeof Eg<"u"?Eg:typeof self<"u"?self:typeof window<"u"?window:{});const dR="@firebase/firestore",hR="4.9.2";class pr{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}pr.UNAUTHENTICATED=new pr(null),pr.GOOGLE_CREDENTIALS=new pr("google-credentials-uid"),pr.FIRST_PARTY=new pr("first-party-uid"),pr.MOCK_USER=new pr("mock-user");let Wu="12.3.0";const Ql=new P_("@firebase/firestore");function Xc(){return Ql.logLevel}function kt(e,...t){if(Ql.logLevel<=me.DEBUG){const n=t.map($_);Ql.debug(`Firestore (${Wu}): ${e}`,...n)}}function Rs(e,...t){if(Ql.logLevel<=me.ERROR){const n=t.map($_);Ql.error(`Firestore (${Wu}): ${e}`,...n)}}function Du(e,...t){if(Ql.logLevel<=me.WARN){const n=t.map($_);Ql.warn(`Firestore (${Wu}): ${e}`,...n)}}function $_(e){if(typeof e=="string")return e;try{return(function(n){return JSON.stringify(n)})(e)}catch{return e}}function Xt(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,RO(e,r,n)}function RO(e,t,n){let r=`FIRESTORE (${Wu}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Rs(r),new Error(r)}function ke(e,t,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,e||RO(t,i,r)}function ne(e,t){return e}const mt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ct extends Ns{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xs{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}class DO{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class HY{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(pr.UNAUTHENTICATED)))}shutdown(){}}class $Y{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class YY{constructor(t){this.t=t,this.currentUser=pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ke(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new xs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new xs,t.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const u=a;t.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},c=u=>{kt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(kt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new xs)}}),0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==t?(kt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ke(typeof r.accessToken=="string",31837,{l:r}),new DO(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ke(t===null||typeof t=="string",2055,{h:t}),new pr(t)}}class XY{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=pr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class WY{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new XY(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(pr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class pR{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KY{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ai(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ke(this.o===void 0,3512);const r=a=>{a.error!=null&&kt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,kt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{t.enqueueRetryable((()=>r(a)))};const i=a=>{kt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):kt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new pR(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new pR(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function QY(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Y_{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=QY(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=t.charAt(i[a]%62))}return r}}function ve(e,t){return e<t?-1:e>t?1:0}function qb(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const i=e.charAt(r),a=t.charAt(r);if(i!==a)return x1(i)===x1(a)?ve(i,a):x1(i)?1:-1}return ve(e.length,t.length)}const ZY=55296,JY=57343;function x1(e){const t=e.charCodeAt(0);return t>=ZY&&t<=JY}function Iu(e,t,n){return e.length===t.length&&e.every(((r,i)=>n(r,t[i])))}const gR="__name__";class Sa{constructor(t,n,r){n===void 0?n=0:n>t.length&&Xt(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&Xt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Sa.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Sa?t.forEach((r=>{n.push(r)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const a=Sa.compareSegments(t.get(i),n.get(i));if(a!==0)return a}return ve(t.length,n.length)}static compareSegments(t,n){const r=Sa.isNumericId(t),i=Sa.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Sa.extractNumericId(t).compare(Sa.extractNumericId(n)):qb(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Po.fromString(t.substring(4,t.length-2))}}class He extends Sa{construct(t,n,r){return new He(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Ct(mt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new He(n)}static emptyPath(){return new He([])}}const tX=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ir extends Sa{construct(t,n,r){return new ir(t,n,r)}static isValidIdentifier(t){return tX.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ir.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gR}static keyField(){return new ir([gR])}static fromServerFormat(t){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Ct(mt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const c=t[i];if(c==="\\"){if(i+1===t.length)throw new Ct(mt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ct(mt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(a(),i++)}if(a(),o)throw new Ct(mt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ir(n)}static emptyPath(){return new ir([])}}class Ft{constructor(t){this.path=t}static fromPath(t){return new Ft(He.fromString(t))}static fromName(t){return new Ft(He.fromString(t).popFirst(5))}static empty(){return new Ft(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&He.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return He.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ft(new He(t.slice()))}}function IO(e,t,n){if(!n)throw new Ct(mt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function eX(e,t,n,r){if(t===!0&&r===!0)throw new Ct(mt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function mR(e){if(!Ft.isDocumentKey(e))throw new Ct(mt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function vR(e){if(Ft.isDocumentKey(e))throw new Ct(mt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function kO(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function pv(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Xt(12329,{type:typeof e})}function $r(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ct(mt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pv(e);throw new Ct(mt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function On(e,t){const n={typeString:e};return t&&(n.value=t),n}function Rh(e,t){if(!kO(e))throw new Ct(mt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,a="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Ct(mt.INVALID_ARGUMENT,n);return!0}const yR=-62135596800,bR=1e6;class Se{static now(){return Se.fromMillis(Date.now())}static fromDate(t){return Se.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*bR);return new Se(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Ct(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ct(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<yR)throw new Ct(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ct(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bR}_compareTo(t){return this.seconds===t.seconds?ve(this.nanoseconds,t.nanoseconds):ve(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Se._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Rh(t,Se._jsonSchema))return new Se(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-yR;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Se._jsonSchemaVersion="firestore/timestamp/1.0",Se._jsonSchema={type:On("string",Se._jsonSchemaVersion),seconds:On("number"),nanoseconds:On("number")};class Zt{static fromTimestamp(t){return new Zt(t)}static min(){return new Zt(new Se(0,0))}static max(){return new Zt(new Se(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Kd=-1;function nX(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Zt.fromTimestamp(r===1e9?new Se(n+1,0):new Se(n,r));return new Go(i,Ft.empty(),t)}function rX(e){return new Go(e.readTime,e.key,Kd)}class Go{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Go(Zt.min(),Ft.empty(),Kd)}static max(){return new Go(Zt.max(),Ft.empty(),Kd)}}function iX(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Ft.comparator(e.documentKey,t.documentKey),n!==0?n:ve(e.largestBatchId,t.largestBatchId))}const aX="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sX{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Ku(e){if(e.code!==mt.FAILED_PRECONDITION||e.message!==aX)throw e;kt("LocalStore","Unexpectedly lost primary lease")}class yt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Xt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new yt(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(t,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof yt?n:yt.resolve(n)}catch(n){return yt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):yt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):yt.reject(n)}static resolve(t){return new yt(((n,r)=>{n(t)}))}static reject(t){return new yt(((n,r)=>{r(t)}))}static waitFor(t){return new yt(((n,r)=>{let i=0,a=0,o=!1;t.forEach((c=>{++i,c.next((()=>{++a,o&&a===i&&n()}),(u=>r(u)))})),o=!0,a===i&&n()}))}static or(t){let n=yt.resolve(!1);for(const r of t)n=n.next((i=>i?yt.resolve(i):r()));return n}static forEach(t,n){const r=[];return t.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(t,n){return new yt(((r,i)=>{const a=t.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const d=u;n(t[d]).next((h=>{o[d]=h,++c,c===a&&r(o)}),(h=>i(h)))}}))}static doWhile(t,n){return new yt(((r,i)=>{const a=()=>{t()===!0?n().next((()=>{a()}),i):r()};a()}))}}function oX(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Qu(e){return e.name==="IndexedDbTransactionError"}class gv{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}gv.ce=-1;const X_=-1;function mv(e){return e==null}function Cm(e){return e===0&&1/e==-1/0}function lX(e){return typeof e=="number"&&Number.isInteger(e)&&!Cm(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const NO="";function cX(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=xR(t)),t=uX(e.get(n),t);return xR(t)}function uX(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const a=e.charAt(i);switch(a){case"\0":n+="";break;case NO:n+="";break;default:n+=a}}return n}function xR(e){return e+NO+""}function _R(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Jo(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function MO(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class sn{constructor(t,n){this.comparator=t,this.root=n||rr.EMPTY}insert(t,n){return new sn(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,rr.BLACK,null,null))}remove(t){return new sn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,rr.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,r)=>(t(n,r),!1)))}toString(){const t=[];return this.inorderTraversal(((n,r)=>(t.push(`${n}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Tg(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Tg(this.root,t,this.comparator,!1)}getReverseIterator(){return new Tg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Tg(this.root,t,this.comparator,!0)}}class Tg{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(a===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class rr{constructor(t,n,r,i,a){this.key=t,this.value=n,this.color=r??rr.RED,this.left=i??rr.EMPTY,this.right=a??rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,a){return new rr(t??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const a=r(t,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(t,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return rr.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return rr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Xt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Xt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Xt(27949);return t+(this.isRed()?0:1)}}rr.EMPTY=null,rr.RED=!0,rr.BLACK=!1;rr.EMPTY=new class{constructor(){this.size=0}get key(){throw Xt(57766)}get value(){throw Xt(16141)}get color(){throw Xt(16727)}get left(){throw Xt(29726)}get right(){throw Xt(36894)}copy(t,n,r,i,a){return this}insert(t,n,r){return new rr(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Fn{constructor(t){this.comparator=t,this.data=new sn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,r)=>(t(n),!1)))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new SR(this.data.getIterator())}getIteratorFrom(t){return new SR(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((r=>{n=n.add(r)})),n}isEqual(t){if(!(t instanceof Fn)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Fn(this.comparator);return n.data=t,n}}class SR{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class oi{constructor(t){this.fields=t,t.sort(ir.comparator)}static empty(){return new oi([])}unionWith(t){let n=new Fn(ir.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new oi(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Iu(this.fields,t.fields,((n,r)=>n.isEqual(r)))}}class OO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class sr{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new OO("Invalid base64 string: "+a):a}})(t);return new sr(n)}static fromUint8Array(t){const n=(function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a})(t);return new sr(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ve(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}sr.EMPTY_BYTE_STRING=new sr("");const fX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qo(e){if(ke(!!e,39018),typeof e=="string"){let t=0;const n=fX.exec(e);if(ke(!!n,46558,{timestamp:e}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:_n(e.seconds),nanos:_n(e.nanos)}}function _n(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Ho(e){return typeof e=="string"?sr.fromBase64String(e):sr.fromUint8Array(e)}const PO="server_timestamp",VO="__type__",jO="__previous_value__",zO="__local_write_time__";function W_(e){return(e?.mapValue?.fields||{})[VO]?.stringValue===PO}function vv(e){const t=e.mapValue.fields[jO];return W_(t)?vv(t):t}function Qd(e){const t=qo(e.mapValue.fields[zO].timestampValue);return new Se(t.seconds,t.nanos)}class dX{constructor(t,n,r,i,a,o,c,u,d,h){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const Rm="(default)";class Zd{constructor(t,n){this.projectId=t,this.database=n||Rm}static empty(){return new Zd("","")}get isDefaultDatabase(){return this.database===Rm}isEqual(t){return t instanceof Zd&&t.projectId===this.projectId&&t.database===this.database}}const LO="__type__",hX="__max__",Ag={mapValue:{}},BO="__vector__",Dm="value";function $o(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?W_(e)?4:gX(e)?9007199254740991:pX(e)?10:11:Xt(28295,{value:e})}function La(e,t){if(e===t)return!0;const n=$o(e);if(n!==$o(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Qd(e).isEqual(Qd(t));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=qo(i.timestampValue),c=qo(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(i,a){return Ho(i.bytesValue).isEqual(Ho(a.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(i,a){return _n(i.geoPointValue.latitude)===_n(a.geoPointValue.latitude)&&_n(i.geoPointValue.longitude)===_n(a.geoPointValue.longitude)})(e,t);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return _n(i.integerValue)===_n(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=_n(i.doubleValue),c=_n(a.doubleValue);return o===c?Cm(o)===Cm(c):isNaN(o)&&isNaN(c)}return!1})(e,t);case 9:return Iu(e.arrayValue.values||[],t.arrayValue.values||[],La);case 10:case 11:return(function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(_R(o)!==_R(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!La(o[u],c[u])))return!1;return!0})(e,t);default:return Xt(52216,{left:e})}}function Jd(e,t){return(e.values||[]).find((n=>La(n,t)))!==void 0}function ku(e,t){if(e===t)return 0;const n=$o(e),r=$o(t);if(n!==r)return ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(e.booleanValue,t.booleanValue);case 2:return(function(a,o){const c=_n(a.integerValue||a.doubleValue),u=_n(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(e,t);case 3:return wR(e.timestampValue,t.timestampValue);case 4:return wR(Qd(e),Qd(t));case 5:return qb(e.stringValue,t.stringValue);case 6:return(function(a,o){const c=Ho(a),u=Ho(o);return c.compareTo(u)})(e.bytesValue,t.bytesValue);case 7:return(function(a,o){const c=a.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const h=ve(c[d],u[d]);if(h!==0)return h}return ve(c.length,u.length)})(e.referenceValue,t.referenceValue);case 8:return(function(a,o){const c=ve(_n(a.latitude),_n(o.latitude));return c!==0?c:ve(_n(a.longitude),_n(o.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return ER(e.arrayValue,t.arrayValue);case 10:return(function(a,o){const c=a.fields||{},u=o.fields||{},d=c[Dm]?.arrayValue,h=u[Dm]?.arrayValue,g=ve(d?.values?.length||0,h?.values?.length||0);return g!==0?g:ER(d,h)})(e.mapValue,t.mapValue);case 11:return(function(a,o){if(a===Ag.mapValue&&o===Ag.mapValue)return 0;if(a===Ag.mapValue)return 1;if(o===Ag.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){const m=qb(u[g],h[g]);if(m!==0)return m;const b=ku(c[u[g]],d[h[g]]);if(b!==0)return b}return ve(u.length,h.length)})(e.mapValue,t.mapValue);default:throw Xt(23264,{he:n})}}function wR(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ve(e,t);const n=qo(e),r=qo(t),i=ve(n.seconds,r.seconds);return i!==0?i:ve(n.nanos,r.nanos)}function ER(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=ku(n[i],r[i]);if(a)return a}return ve(n.length,r.length)}function Nu(e){return Hb(e)}function Hb(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const r=qo(n);return`time(${r.seconds},${r.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return Ho(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return Ft.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=Hb(a);return r+"]"})(e.arrayValue):"mapValue"in e?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${Hb(n.fields[o])}`;return i+"}"})(e.mapValue):Xt(61005,{value:e})}function $g(e){switch($o(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=vv(e);return t?16+$g(t):16;case 5:return 2*e.stringValue.length;case 6:return Ho(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+$g(a)),0)})(e.arrayValue);case 10:case 11:return(function(r){let i=0;return Jo(r.fields,((a,o)=>{i+=a.length+$g(o)})),i})(e.mapValue);default:throw Xt(13486,{value:e})}}function TR(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function $b(e){return!!e&&"integerValue"in e}function K_(e){return!!e&&"arrayValue"in e}function AR(e){return!!e&&"nullValue"in e}function CR(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Yg(e){return!!e&&"mapValue"in e}function pX(e){return(e?.mapValue?.fields||{})[LO]?.stringValue===BO}function Cd(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Jo(e.mapValue.fields,((n,r)=>t.mapValue.fields[n]=Cd(r))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Cd(e.arrayValue.values[n]);return t}return{...e}}function gX(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===hX}class qr{constructor(t){this.value=t}static empty(){return new qr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Yg(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Cd(n)}setAll(t){let n=ir.emptyPath(),r={},i=[];t.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=Cd(o):i.push(c.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(t){const n=this.field(t.popLast());Yg(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return La(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];Yg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){Jo(n,((i,a)=>t[i]=a));for(const i of r)delete t[i]}clone(){return new qr(Cd(this.value))}}function UO(e){const t=[];return Jo(e.fields,((n,r)=>{const i=new ir([n]);if(Yg(r)){const a=UO(r.mapValue).fields;if(a.length===0)t.push(i);else for(const o of a)t.push(i.child(o))}else t.push(i)})),new oi(t)}class gr{constructor(t,n,r,i,a,o,c){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(t){return new gr(t,0,Zt.min(),Zt.min(),Zt.min(),qr.empty(),0)}static newFoundDocument(t,n,r,i){return new gr(t,1,n,Zt.min(),r,i,0)}static newNoDocument(t,n){return new gr(t,2,n,Zt.min(),Zt.min(),qr.empty(),0)}static newUnknownDocument(t,n){return new gr(t,3,n,Zt.min(),Zt.min(),qr.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Zt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=qr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=qr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof gr&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new gr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Im{constructor(t,n){this.position=t,this.inclusive=n}}function RR(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const a=t[i],o=e.position[i];if(a.field.isKeyField()?r=Ft.comparator(Ft.fromName(o.referenceValue),n.key):r=ku(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function DR(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!La(e.position[n],t.position[n]))return!1;return!0}class th{constructor(t,n="asc"){this.field=t,this.dir=n}}function mX(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class FO{}class Mn extends FO{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new yX(t,n,r):n==="array-contains"?new _X(t,r):n==="in"?new SX(t,r):n==="not-in"?new wX(t,r):n==="array-contains-any"?new EX(t,r):new Mn(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new bX(t,r):new xX(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ku(n,this.value)):n!==null&&$o(this.value)===$o(n)&&this.matchesComparison(ku(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Xt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ta extends FO{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new ta(t,n)}matches(t){return GO(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function GO(e){return e.op==="and"}function qO(e){return vX(e)&&GO(e)}function vX(e){for(const t of e.filters)if(t instanceof ta)return!1;return!0}function Yb(e){if(e instanceof Mn)return e.field.canonicalString()+e.op.toString()+Nu(e.value);if(qO(e))return e.filters.map((t=>Yb(t))).join(",");{const t=e.filters.map((n=>Yb(n))).join(",");return`${e.op}(${t})`}}function HO(e,t){return e instanceof Mn?(function(r,i){return i instanceof Mn&&r.op===i.op&&r.field.isEqual(i.field)&&La(r.value,i.value)})(e,t):e instanceof ta?(function(r,i){return i instanceof ta&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,o,c)=>a&&HO(o,i.filters[c])),!0):!1})(e,t):void Xt(19439)}function $O(e){return e instanceof Mn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Nu(n.value)}`})(e):e instanceof ta?(function(n){return n.op.toString()+" {"+n.getFilters().map($O).join(" ,")+"}"})(e):"Filter"}class yX extends Mn{constructor(t,n,r){super(t,n,r),this.key=Ft.fromName(r.referenceValue)}matches(t){const n=Ft.comparator(t.key,this.key);return this.matchesComparison(n)}}class bX extends Mn{constructor(t,n){super(t,"in",n),this.keys=YO("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class xX extends Mn{constructor(t,n){super(t,"not-in",n),this.keys=YO("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function YO(e,t){return(t.arrayValue?.values||[]).map((n=>Ft.fromName(n.referenceValue)))}class _X extends Mn{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return K_(n)&&Jd(n.arrayValue,this.value)}}class SX extends Mn{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Jd(this.value.arrayValue,n)}}class wX extends Mn{constructor(t,n){super(t,"not-in",n)}matches(t){if(Jd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Jd(this.value.arrayValue,n)}}class EX extends Mn{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!K_(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Jd(this.value.arrayValue,r)))}}class TX{constructor(t,n=null,r=[],i=[],a=null,o=null,c=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.Te=null}}function IR(e,t=null,n=[],r=[],i=null,a=null,o=null){return new TX(e,t,n,r,i,a,o)}function Q_(e){const t=ne(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((r=>Yb(r))).join(","),n+="|ob:",n+=t.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),mv(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>Nu(r))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>Nu(r))).join(",")),t.Te=n}return t.Te}function Z_(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!mX(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!HO(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!DR(e.startAt,t.startAt)&&DR(e.endAt,t.endAt)}function Xb(e){return Ft.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}class Zu{constructor(t,n=null,r=[],i=[],a=null,o="F",c=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function AX(e,t,n,r,i,a,o,c){return new Zu(e,t,n,r,i,a,o,c)}function yv(e){return new Zu(e)}function kR(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function XO(e){return e.collectionGroup!==null}function Rd(e){const t=ne(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const a of t.explicitOrderBy)t.Ie.push(a),n.add(a.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Fn(ir.comparator);return o.filters.forEach((u=>{u.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(t).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||t.Ie.push(new th(a,r))})),n.has(ir.keyField().canonicalString())||t.Ie.push(new th(ir.keyField(),r))}return t.Ie}function Ma(e){const t=ne(e);return t.Ee||(t.Ee=CX(t,Rd(e))),t.Ee}function CX(e,t){if(e.limitType==="F")return IR(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new th(i.field,a)}));const n=e.endAt?new Im(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Im(e.startAt.position,e.startAt.inclusive):null;return IR(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Wb(e,t){const n=e.filters.concat([t]);return new Zu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function km(e,t,n){return new Zu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function bv(e,t){return Z_(Ma(e),Ma(t))&&e.limitType===t.limitType}function WO(e){return`${Q_(Ma(e))}|lt:${e.limitType}`}function Wc(e){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>$O(i))).join(", ")}]`),mv(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Nu(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Nu(i))).join(",")),`Target(${r})`})(Ma(e))}; limitType=${e.limitType})`}function xv(e,t){return t.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ft.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(e,t)&&(function(r,i){for(const a of Rd(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(e,t)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(e,t)&&(function(r,i){return!(r.startAt&&!(function(o,c,u){const d=RR(o,c,u);return o.inclusive?d<=0:d<0})(r.startAt,Rd(r),i)||r.endAt&&!(function(o,c,u){const d=RR(o,c,u);return o.inclusive?d>=0:d>0})(r.endAt,Rd(r),i))})(e,t)}function RX(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function KO(e){return(t,n)=>{let r=!1;for(const i of Rd(e)){const a=DX(i,t,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function DX(e,t,n){const r=e.field.isKeyField()?Ft.comparator(t.key,n.key):(function(a,o,c){const u=o.data.field(a),d=c.data.field(a);return u!==null&&d!==null?ku(u,d):Xt(42886)})(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Xt(19790,{direction:e.dir})}}class rc{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,t))return a}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],t))return void(i[a]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Jo(this.inner,((n,r)=>{for(const[i,a]of r)t(i,a)}))}isEmpty(){return MO(this.inner)}size(){return this.innerSize}}const IX=new sn(Ft.comparator);function Ds(){return IX}const QO=new sn(Ft.comparator);function fd(...e){let t=QO;for(const n of e)t=t.insert(n.key,n);return t}function ZO(e){let t=QO;return e.forEach(((n,r)=>t=t.insert(n,r.overlayedDocument))),t}function Vl(){return Dd()}function JO(){return Dd()}function Dd(){return new rc((e=>e.toString()),((e,t)=>e.isEqual(t)))}const kX=new sn(Ft.comparator),NX=new Fn(Ft.comparator);function ye(...e){let t=NX;for(const n of e)t=t.add(n);return t}const MX=new Fn(ve);function OX(){return MX}function J_(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cm(t)?"-0":t}}function t4(e){return{integerValue:""+e}}function PX(e,t){return lX(t)?t4(t):J_(e,t)}class _v{constructor(){this._=void 0}}function VX(e,t,n){return e instanceof Nm?(function(i,a){const o={fields:{[VO]:{stringValue:PO},[zO]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&W_(a)&&(a=vv(a)),a&&(o.fields[jO]=a),{mapValue:o}})(n,t):e instanceof eh?n4(e,t):e instanceof nh?r4(e,t):(function(i,a){const o=e4(i,a),c=NR(o)+NR(i.Ae);return $b(o)&&$b(i.Ae)?t4(c):J_(i.serializer,c)})(e,t)}function jX(e,t,n){return e instanceof eh?n4(e,t):e instanceof nh?r4(e,t):n}function e4(e,t){return e instanceof Mm?(function(r){return $b(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(t)?t:{integerValue:0}:null}class Nm extends _v{}class eh extends _v{constructor(t){super(),this.elements=t}}function n4(e,t){const n=i4(t);for(const r of e.elements)n.some((i=>La(i,r)))||n.push(r);return{arrayValue:{values:n}}}class nh extends _v{constructor(t){super(),this.elements=t}}function r4(e,t){let n=i4(t);for(const r of e.elements)n=n.filter((i=>!La(i,r)));return{arrayValue:{values:n}}}class Mm extends _v{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function NR(e){return _n(e.integerValue||e.doubleValue)}function i4(e){return K_(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function zX(e,t){return e.field.isEqual(t.field)&&(function(r,i){return r instanceof eh&&i instanceof eh||r instanceof nh&&i instanceof nh?Iu(r.elements,i.elements,La):r instanceof Mm&&i instanceof Mm?La(r.Ae,i.Ae):r instanceof Nm&&i instanceof Nm})(e.transform,t.transform)}class LX{constructor(t,n){this.version=t,this.transformResults=n}}class ki{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new ki}static exists(t){return new ki(void 0,t)}static updateTime(t){return new ki(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Xg(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Sv{}function a4(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new tS(e.key,ki.none()):new Dh(e.key,e.data,ki.none());{const n=e.data,r=qr.empty();let i=new Fn(ir.comparator);for(let a of t.fields)if(!i.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new tl(e.key,r,new oi(i.toArray()),ki.none())}}function BX(e,t,n){e instanceof Dh?(function(i,a,o){const c=i.value.clone(),u=OR(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(e,t,n):e instanceof tl?(function(i,a,o){if(!Xg(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=OR(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(s4(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(e,t,n):(function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,t,n)}function Id(e,t,n,r){return e instanceof Dh?(function(a,o,c,u){if(!Xg(a.precondition,o))return c;const d=a.value.clone(),h=PR(a.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(e,t,n,r):e instanceof tl?(function(a,o,c,u){if(!Xg(a.precondition,o))return c;const d=PR(a.fieldTransforms,u,o),h=o.data;return h.setAll(s4(a)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(e,t,n,r):(function(a,o,c){return Xg(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(e,t,n)}function UX(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),a=e4(r.transform,i||null);a!=null&&(n===null&&(n=qr.empty()),n.set(r.field,a))}return n||null}function MR(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Iu(r,i,((a,o)=>zX(a,o)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Dh extends Sv{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class tl extends Sv{constructor(t,n,r,i,a=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function s4(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function OR(e,t,n){const r=new Map;ke(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const a=e[i],o=a.transform,c=t.data.field(a.field);r.set(a.field,jX(o,c,n[i]))}return r}function PR(e,t,n){const r=new Map;for(const i of e){const a=i.transform,o=n.data.field(i.field);r.set(i.field,VX(a,o,t))}return r}class tS extends Sv{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class FX extends Sv{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class GX{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(t.key)&&BX(a,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Id(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Id(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=JO();return this.mutations.forEach((i=>{const a=t.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=n.has(i.key)?null:c;const u=a4(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Zt.min())})),r}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),ye())}isEqual(t){return this.batchId===t.batchId&&Iu(this.mutations,t.mutations,((n,r)=>MR(n,r)))&&Iu(this.baseMutations,t.baseMutations,((n,r)=>MR(n,r)))}}class eS{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){ke(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let i=(function(){return kX})();const a=t.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new eS(t,n,r,i)}}class qX{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class HX{constructor(t,n){this.count=t,this.unchangedNames=n}}var In,Ee;function $X(e){switch(e){case mt.OK:return Xt(64938);case mt.CANCELLED:case mt.UNKNOWN:case mt.DEADLINE_EXCEEDED:case mt.RESOURCE_EXHAUSTED:case mt.INTERNAL:case mt.UNAVAILABLE:case mt.UNAUTHENTICATED:return!1;case mt.INVALID_ARGUMENT:case mt.NOT_FOUND:case mt.ALREADY_EXISTS:case mt.PERMISSION_DENIED:case mt.FAILED_PRECONDITION:case mt.ABORTED:case mt.OUT_OF_RANGE:case mt.UNIMPLEMENTED:case mt.DATA_LOSS:return!0;default:return Xt(15467,{code:e})}}function o4(e){if(e===void 0)return Rs("GRPC error has no .code"),mt.UNKNOWN;switch(e){case In.OK:return mt.OK;case In.CANCELLED:return mt.CANCELLED;case In.UNKNOWN:return mt.UNKNOWN;case In.DEADLINE_EXCEEDED:return mt.DEADLINE_EXCEEDED;case In.RESOURCE_EXHAUSTED:return mt.RESOURCE_EXHAUSTED;case In.INTERNAL:return mt.INTERNAL;case In.UNAVAILABLE:return mt.UNAVAILABLE;case In.UNAUTHENTICATED:return mt.UNAUTHENTICATED;case In.INVALID_ARGUMENT:return mt.INVALID_ARGUMENT;case In.NOT_FOUND:return mt.NOT_FOUND;case In.ALREADY_EXISTS:return mt.ALREADY_EXISTS;case In.PERMISSION_DENIED:return mt.PERMISSION_DENIED;case In.FAILED_PRECONDITION:return mt.FAILED_PRECONDITION;case In.ABORTED:return mt.ABORTED;case In.OUT_OF_RANGE:return mt.OUT_OF_RANGE;case In.UNIMPLEMENTED:return mt.UNIMPLEMENTED;case In.DATA_LOSS:return mt.DATA_LOSS;default:return Xt(39323,{code:e})}}(Ee=In||(In={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";function YX(){return new TextEncoder}const XX=new Po([4294967295,4294967295],0);function VR(e){const t=YX().encode(e),n=new SO;return n.update(t),new Uint8Array(n.digest())}function jR(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Po([n,r],0),new Po([i,a],0)]}class nS{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new dd(`Invalid padding: ${n}`);if(r<0)throw new dd(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new dd(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new dd(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Po.fromNumber(this.ge)}ye(t,n,r){let i=t.add(n.multiply(Po.fromNumber(r)));return i.compare(XX)===1&&(i=new Po([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=VR(t),[r,i]=jR(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);if(!this.we(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,a=new Uint8Array(Math.ceil(t/8)),o=new nS(a,i,n);return r.forEach((c=>o.insert(c))),o}insert(t){if(this.ge===0)return;const n=VR(t),[r,i]=jR(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);this.Se(o)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class dd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class wv{constructor(t,n,r,i,a){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,Ih.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new wv(Zt.min(),i,new sn(ve),Ds(),ye())}}class Ih{constructor(t,n,r,i,a){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Ih(r,n,ye(),ye(),ye())}}class Wg{constructor(t,n,r,i){this.be=t,this.removedTargetIds=n,this.key=r,this.De=i}}class l4{constructor(t,n){this.targetId=t,this.Ce=n}}class c4{constructor(t,n,r=sr.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class zR{constructor(){this.ve=0,this.Fe=LR(),this.Me=sr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ye(),n=ye(),r=ye();return this.Fe.forEach(((i,a)=>{switch(a){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Xt(38017,{changeType:a})}})),new Ih(this.Me,this.xe,t,n,r)}qe(){this.Oe=!1,this.Fe=LR()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class WX{constructor(t){this.Ge=t,this.ze=new Map,this.je=Ds(),this.Je=Cg(),this.He=Cg(),this.Ye=new sn(ve)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const r=this.nt(n);switch(t.state){case 0:this.rt(n)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(t.resumeToken));break;default:Xt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(t){const n=t.targetId,r=t.Ce.count,i=this.ot(n);if(i){const a=i.target;if(Xb(a))if(r===0){const o=new Ft(a.path);this.et(n,o,gr.newNoDocument(o,Zt.min()))}else ke(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(t),u=c?this.ct(c,t,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let o,c;try{o=Ho(r).toUint8Array()}catch(u){if(u instanceof OO)return Du("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new nS(o,i,a)}catch(u){return Du(u instanceof dd?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(t,n,r){return n.Ce.count===r-this.Pt(t,n.targetId)?0:2}Pt(t,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;t.mightContain(c)||(this.et(n,a,null),i++)})),i}Tt(t){const n=new Map;this.ze.forEach(((a,o)=>{const c=this.ot(o);if(c){if(a.current&&Xb(c.target)){const u=new Ft(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,gr.newNoDocument(u,t))}a.Be&&(n.set(o,a.ke()),a.qe())}}));let r=ye();this.He.forEach(((a,o)=>{let c=!0;o.forEachWhile((u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(a))})),this.je.forEach(((a,o)=>o.setReadTime(t)));const i=new wv(t,n,this.Ye,this.je,r);return this.je=Ds(),this.Je=Cg(),this.He=Cg(),this.Ye=new sn(ve),i}Xe(t,n){if(!this.rt(t))return;const r=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,r){if(!this.rt(t))return;const i=this.nt(t);this.Et(t,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),r&&(this.je=this.je.insert(n,r))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new zR,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Fn(ve),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Fn(ve),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||kt("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new zR),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Cg(){return new sn(Ft.comparator)}function LR(){return new sn(Ft.comparator)}const KX={asc:"ASCENDING",desc:"DESCENDING"},QX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZX={and:"AND",or:"OR"};class JX{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Kb(e,t){return e.useProto3Json||mv(t)?t:{value:t}}function Om(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function u4(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function tW(e,t){return Om(e,t.toTimestamp())}function Oa(e){return ke(!!e,49232),Zt.fromTimestamp((function(n){const r=qo(n);return new Se(r.seconds,r.nanos)})(e))}function rS(e,t){return Qb(e,t).canonicalString()}function Qb(e,t){const n=(function(i){return new He(["projects",i.projectId,"databases",i.database])})(e).child("documents");return t===void 0?n:n.child(t)}function f4(e){const t=He.fromString(e);return ke(m4(t),10190,{key:t.toString()}),t}function Zb(e,t){return rS(e.databaseId,t.path)}function _1(e,t){const n=f4(t);if(n.get(1)!==e.databaseId.projectId)throw new Ct(mt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ct(mt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ft(h4(n))}function d4(e,t){return rS(e.databaseId,t)}function eW(e){const t=f4(e);return t.length===4?He.emptyPath():h4(t)}function Jb(e){return new He(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function h4(e){return ke(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function BR(e,t,n){return{name:Zb(e,t),fields:n.value.mapValue.fields}}function nW(e,t){let n;if("targetChange"in t){t.targetChange;const r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Xt(39313,{state:d})})(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=(function(d,h){return d.useProto3Json?(ke(h===void 0||typeof h=="string",58123),sr.fromBase64String(h||"")):(ke(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),sr.fromUint8Array(h||new Uint8Array))})(e,t.targetChange.resumeToken),o=t.targetChange.cause,c=o&&(function(d){const h=d.code===void 0?mt.UNKNOWN:o4(d.code);return new Ct(h,d.message||"")})(o);n=new c4(r,i,a,c||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=_1(e,r.document.name),a=Oa(r.document.updateTime),o=r.document.createTime?Oa(r.document.createTime):Zt.min(),c=new qr({mapValue:{fields:r.document.fields}}),u=gr.newFoundDocument(i,a,o,c),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Wg(d,h,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=_1(e,r.document),a=r.readTime?Oa(r.readTime):Zt.min(),o=gr.newNoDocument(i,a),c=r.removedTargetIds||[];n=new Wg([],c,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=_1(e,r.document),a=r.removedTargetIds||[];n=new Wg([],a,i,null)}else{if(!("filter"in t))return Xt(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new HX(i,a),c=r.targetId;n=new l4(c,o)}}return n}function rW(e,t){let n;if(t instanceof Dh)n={update:BR(e,t.key,t.value)};else if(t instanceof tS)n={delete:Zb(e,t.key)};else if(t instanceof tl)n={update:BR(e,t.key,t.data),updateMask:dW(t.fieldMask)};else{if(!(t instanceof FX))return Xt(16599,{Vt:t.type});n={verify:Zb(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((r=>(function(a,o){const c=o.transform;if(c instanceof Nm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof eh)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof nh)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Mm)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw Xt(20930,{transform:o.transform})})(0,r)))),t.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:tW(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Xt(27497)})(e,t.precondition)),n}function iW(e,t){return e&&e.length>0?(ke(t!==void 0,14353),e.map((n=>(function(i,a){let o=i.updateTime?Oa(i.updateTime):Oa(a);return o.isEqual(Zt.min())&&(o=Oa(a)),new LX(o,i.transformResults||[])})(n,t)))):[]}function aW(e,t){return{documents:[d4(e,t.path)]}}function sW(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=d4(e,i);const a=(function(d){if(d.length!==0)return g4(ta.create(d,"and"))})(t.filters);a&&(n.structuredQuery.where=a);const o=(function(d){if(d.length!==0)return d.map((h=>(function(m){return{field:Kc(m.field),direction:cW(m.dir)}})(h)))})(t.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Kb(e,t.limit);return c!==null&&(n.structuredQuery.limit=c),t.startAt&&(n.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(t.endAt)),{ft:n,parent:i}}function oW(e){let t=eW(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ke(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:t=t.child(h.collectionId)}let a=[];n.where&&(a=(function(g){const m=p4(g);return m instanceof ta&&qO(m)?m.getFilters():[m]})(n.where));let o=[];n.orderBy&&(o=(function(g){return g.map((m=>(function(S){return new th(Qc(S.field),(function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(m)))})(n.orderBy));let c=null;n.limit&&(c=(function(g){let m;return m=typeof g=="object"?g.value:g,mv(m)?null:m})(n.limit));let u=null;n.startAt&&(u=(function(g){const m=!!g.before,b=g.values||[];return new Im(b,m)})(n.startAt));let d=null;return n.endAt&&(d=(function(g){const m=!g.before,b=g.values||[];return new Im(b,m)})(n.endAt)),AX(t,i,o,a,c,"F",u,d)}function lW(e,t){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xt(28987,{purpose:i})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function p4(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Qc(n.unaryFilter.field);return Mn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Qc(n.unaryFilter.field);return Mn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Qc(n.unaryFilter.field);return Mn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qc(n.unaryFilter.field);return Mn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Xt(61313);default:return Xt(60726)}})(e):e.fieldFilter!==void 0?(function(n){return Mn.create(Qc(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Xt(58110);default:return Xt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return ta.create(n.compositeFilter.filters.map((r=>p4(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Xt(1026)}})(n.compositeFilter.op))})(e):Xt(30097,{filter:e})}function cW(e){return KX[e]}function uW(e){return QX[e]}function fW(e){return ZX[e]}function Kc(e){return{fieldPath:e.canonicalString()}}function Qc(e){return ir.fromServerFormat(e.fieldPath)}function g4(e){return e instanceof Mn?(function(n){if(n.op==="=="){if(CR(n.value))return{unaryFilter:{field:Kc(n.field),op:"IS_NAN"}};if(AR(n.value))return{unaryFilter:{field:Kc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(CR(n.value))return{unaryFilter:{field:Kc(n.field),op:"IS_NOT_NAN"}};if(AR(n.value))return{unaryFilter:{field:Kc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kc(n.field),op:uW(n.op),value:n.value}}})(e):e instanceof ta?(function(n){const r=n.getFilters().map((i=>g4(i)));return r.length===1?r[0]:{compositeFilter:{op:fW(n.op),filters:r}}})(e):Xt(54877,{filter:e})}function dW(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function m4(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}class Io{constructor(t,n,r,i,a=Zt.min(),o=Zt.min(),c=sr.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(t){return new Io(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Io(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Io(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Io(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class hW{constructor(t){this.yt=t}}function pW(e){const t=oW({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?km(t,t.limit,"L"):t}class gW{constructor(){this.Cn=new mW}addToCollectionParentIndex(t,n){return this.Cn.add(n),yt.resolve()}getCollectionParents(t,n){return yt.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return yt.resolve()}deleteFieldIndex(t,n){return yt.resolve()}deleteAllFieldIndexes(t){return yt.resolve()}createTargetIndexes(t,n){return yt.resolve()}getDocumentsMatchingTarget(t,n){return yt.resolve(null)}getIndexType(t,n){return yt.resolve(0)}getFieldIndexes(t,n){return yt.resolve([])}getNextCollectionGroupToUpdate(t){return yt.resolve(null)}getMinOffset(t,n){return yt.resolve(Go.min())}getMinOffsetFromCollectionGroup(t,n){return yt.resolve(Go.min())}updateCollectionGroup(t,n,r){return yt.resolve()}updateIndexEntries(t,n){return yt.resolve()}}class mW{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Fn(He.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Fn(He.comparator)).toArray()}}const UR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},v4=41943040;class Fr{static withCacheSize(t){return new Fr(t,Fr.DEFAULT_COLLECTION_PERCENTILE,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Fr.DEFAULT_COLLECTION_PERCENTILE=10,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fr.DEFAULT=new Fr(v4,Fr.DEFAULT_COLLECTION_PERCENTILE,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fr.DISABLED=new Fr(-1,0,0);class Mu{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Mu(0)}static cr(){return new Mu(-1)}}const FR="LruGarbageCollector",vW=1048576;function GR([e,t],[n,r]){const i=ve(e,n);return i===0?ve(t,r):i}class yW{constructor(t){this.Ir=t,this.buffer=new Fn(GR),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();GR(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class bW{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){kt(FR,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Qu(n)?kt(FR,"Ignoring IndexedDB error during garbage collection: ",n):await Ku(n)}await this.Vr(3e5)}))}}class xW{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(t,n){if(n===0)return yt.resolve(gv.ce);const r=new yW(n);return this.mr.forEachTarget(t,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(t,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(t,n,r){return this.mr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(kt("LruGarbageCollector","Garbage collection skipped; disabled"),yt.resolve(UR)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(kt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),UR):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let r,i,a,o,c,u,d;const h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(kt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(t,i)))).next((g=>(r=g,c=Date.now(),this.removeTargets(t,r,n)))).next((g=>(a=g,u=Date.now(),this.removeOrphanedDocuments(t,r)))).next((g=>(d=Date.now(),Xc()<=me.DEBUG&&kt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${a} targets in `+(u-c)+`ms
	Removed ${g} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),yt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:g}))))}}function _W(e,t){return new xW(e,t)}class SW{constructor(){this.changes=new rc((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,gr.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?yt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class wW{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}class EW{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(t,n)))).next((i=>(r!==null&&Id(r.mutation,i,oi.empty(),Se.now()),i)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.getLocalViewOfDocuments(t,r,ye()).next((()=>r))))}getLocalViewOfDocuments(t,n,r=ye()){const i=Vl();return this.populateOverlays(t,i,n).next((()=>this.computeViews(t,n,i,r).next((a=>{let o=fd();return a.forEach(((c,u)=>{o=o.insert(c,u.overlayedDocument)})),o}))))}getOverlayedDocuments(t,n){const r=Vl();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,ye())))}populateOverlays(t,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(t,i).next((a=>{a.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(t,n,r,i){let a=Ds();const o=Dd(),c=(function(){return Dd()})();return n.forEach(((u,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof tl)?a=a.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Id(h.mutation,d,h.mutation.getFieldMask(),Se.now())):o.set(d.key,oi.empty())})),this.recalculateAndSaveOverlays(t,a).next((u=>(u.forEach(((d,h)=>o.set(d,h))),n.forEach(((d,h)=>c.set(d,new wW(h,o.get(d)??null)))),c)))}recalculateAndSaveOverlays(t,n){const r=Dd();let i=new sn(((o,c)=>o-c)),a=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((o=>{for(const c of o)c.keys().forEach((u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||oi.empty();h=c.applyToLocalView(d,h),r.set(u,h);const g=(i.get(c.batchId)||ye()).add(u);i=i.insert(c.batchId,g)}))})).next((()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,h=u.value,g=JO();h.forEach((m=>{if(!a.has(m)){const b=a4(n.get(m),r.get(m));b!==null&&g.set(m,b),a=a.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(t,d,g))}return yt.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,n,r,i){return(function(o){return Ft.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):XO(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next((a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-a.size):yt.resolve(Vl());let c=Kd,u=a;return o.next((d=>yt.forEach(d,((h,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),a.get(h)?yt.resolve():this.remoteDocumentCache.getEntry(t,h).next((m=>{u=u.insert(h,m)}))))).next((()=>this.populateOverlays(t,d,a))).next((()=>this.computeViews(t,u,d,ye()))).next((h=>({batchId:c,changes:ZO(h)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Ft(n)).next((r=>{let i=fd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const a=n.collectionGroup;let o=fd();return this.indexManager.getCollectionParents(t,a).next((c=>yt.forEach(c,(u=>{const d=(function(g,m){return new Zu(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(t,d,r,i).next((h=>{h.forEach(((g,m)=>{o=o.insert(g,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(t,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,a,i)))).next((o=>{a.forEach(((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,gr.newInvalidDocument(h)))}));let c=fd();return o.forEach(((u,d)=>{const h=a.get(u);h!==void 0&&Id(h.mutation,d,oi.empty(),Se.now()),xv(n,d)&&(c=c.insert(u,d))})),c}))}}class TW{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return yt.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Oa(i.createTime)}})(n)),yt.resolve()}getNamedQuery(t,n){return yt.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:pW(i.bundledQuery),readTime:Oa(i.readTime)}})(n)),yt.resolve()}}class AW{constructor(){this.overlays=new sn(Ft.comparator),this.qr=new Map}getOverlay(t,n){return yt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Vl();return yt.forEach(n,(i=>this.getOverlay(t,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(t,n,r){return r.forEach(((i,a)=>{this.St(t,n,a)})),yt.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),yt.resolve()}getOverlaysForCollection(t,n,r){const i=Vl(),a=n.length+1,o=new Ft(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return yt.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let a=new sn(((d,h)=>d-h));const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=a.get(d.largestBatchId);h===null&&(h=Vl(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const c=Vl(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((d,h)=>c.set(d,h))),!(c.size()>=i)););return yt.resolve(c)}St(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new qX(n,r));let a=this.qr.get(n);a===void 0&&(a=ye(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}class CW{constructor(){this.sessionToken=sr.EMPTY_BYTE_STRING}getSessionToken(t){return yt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,yt.resolve()}}class iS{constructor(){this.Qr=new Fn(Xn.$r),this.Ur=new Fn(Xn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const r=new Xn(t,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,n){t.forEach((r=>this.addReference(r,n)))}removeReference(t,n){this.Gr(new Xn(t,n))}zr(t,n){t.forEach((r=>this.removeReference(r,n)))}jr(t){const n=new Ft(new He([])),r=new Xn(n,t),i=new Xn(n,t+1),a=[];return this.Ur.forEachInRange([r,i],(o=>{this.Gr(o),a.push(o.key)})),a}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new Ft(new He([])),r=new Xn(n,t),i=new Xn(n,t+1);let a=ye();return this.Ur.forEachInRange([r,i],(o=>{a=a.add(o.key)})),a}containsKey(t){const n=new Xn(t,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Xn{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return Ft.comparator(t.key,n.key)||ve(t.Yr,n.Yr)}static Kr(t,n){return ve(t.Yr,n.Yr)||Ft.comparator(t.key,n.key)}}class RW{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Fn(Xn.$r)}checkEmpty(t){return yt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new GX(a,n,r,i);this.mutationQueue.push(o);for(const c of i)this.Zr=this.Zr.add(new Xn(c.key,a)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return yt.resolve(o)}lookupMutationBatch(t,n){return yt.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.ei(r),a=i<0?0:i;return yt.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return yt.resolve(this.mutationQueue.length===0?X_:this.tr-1)}getAllMutationBatches(t){return yt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Xn(n,0),i=new Xn(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(o=>{const c=this.Xr(o.Yr);a.push(c)})),yt.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Fn(ve);return n.forEach((i=>{const a=new Xn(i,0),o=new Xn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],(c=>{r=r.add(c.Yr)}))})),yt.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let a=r;Ft.isDocumentKey(a)||(a=a.child(""));const o=new Xn(new Ft(a),0);let c=new Fn(ve);return this.Zr.forEachWhile((u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Yr)),!0)}),o),yt.resolve(this.ti(c))}ti(t){const n=[];return t.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(t,n){ke(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return yt.forEach(n.mutations,(i=>{const a=new Xn(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,n){const r=new Xn(n,0),i=this.Zr.firstAfterOrEqual(r);return yt.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,yt.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class DW{constructor(t){this.ri=t,this.docs=(function(){return new sn(Ft.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return yt.resolve(r?r.document.mutableCopy():gr.newInvalidDocument(n))}getEntries(t,n){let r=Ds();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():gr.newInvalidDocument(i))})),yt.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let a=Ds();const o=n.path,c=new Ft(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||iX(rX(h),r)<=0||(i.has(h.key)||xv(n,h))&&(a=a.insert(h.key,h.mutableCopy()))}return yt.resolve(a)}getAllFromCollectionGroup(t,n,r,i){Xt(9500)}ii(t,n){return yt.forEach(this.docs,(r=>n(r)))}newChangeBuffer(t){return new IW(this)}getSize(t){return yt.resolve(this.size)}}class IW extends SW{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(t,i)):this.Nr.removeEntry(r)})),yt.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}class kW{constructor(t){this.persistence=t,this.si=new rc((n=>Q_(n)),Z_),this.lastRemoteSnapshotVersion=Zt.min(),this.highestTargetId=0,this.oi=0,this._i=new iS,this.targetCount=0,this.ai=Mu.ur()}forEachTarget(t,n){return this.si.forEach(((r,i)=>n(i))),yt.resolve()}getLastRemoteSnapshotVersion(t){return yt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return yt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),yt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),yt.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Mu(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,yt.resolve()}updateTargetData(t,n){return this.Pr(n),yt.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,yt.resolve()}removeTargets(t,n,r){let i=0;const a=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(t,c.targetId)),i++)})),yt.waitFor(a).next((()=>i))}getTargetCount(t){return yt.resolve(this.targetCount)}getTargetData(t,n){const r=this.si.get(n)||null;return yt.resolve(r)}addMatchingKeys(t,n,r){return this._i.Wr(n,r),yt.resolve()}removeMatchingKeys(t,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((o=>{a.push(i.markPotentiallyOrphaned(t,o))})),yt.waitFor(a)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),yt.resolve()}getMatchingKeysForTargetId(t,n){const r=this._i.Hr(n);return yt.resolve(r)}containsKey(t,n){return yt.resolve(this._i.containsKey(n))}}class y4{constructor(t,n){this.ui={},this.overlays={},this.ci=new gv(0),this.li=!1,this.li=!0,this.hi=new CW,this.referenceDelegate=t(this),this.Pi=new kW(this),this.indexManager=new gW,this.remoteDocumentCache=(function(i){return new DW(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new hW(n),this.Ii=new TW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new AW,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ui[t.toKey()];return r||(r=new RW(n,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,r){kt("MemoryPersistence","Starting transaction:",t);const i=new NW(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(t,n){return yt.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,n))))}}class NW extends sX{constructor(t){super(),this.currentSequenceNumber=t}}class aS{constructor(t){this.persistence=t,this.Ri=new iS,this.Vi=null}static mi(t){return new aS(t)}get fi(){if(this.Vi)return this.Vi;throw Xt(60996)}addReference(t,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),yt.resolve()}removeReference(t,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),yt.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),yt.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return yt.forEach(this.fi,(r=>{const i=Ft.fromPath(r);return this.gi(t,i).next((a=>{a||n.removeEntry(i,Zt.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return yt.or([()=>yt.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Pm{constructor(t,n){this.persistence=t,this.pi=new rc((r=>cX(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=_W(this,n)}static mi(t,n){return new Pm(t,n)}Ei(){}di(t){return yt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>n.next((i=>r+i))))}wr(t){let n=0;return this.pr(t,(r=>{n++})).next((()=>n))}pr(t,n){return yt.forEach(this.pi,((r,i)=>this.br(t,r,i).next((a=>a?yt.resolve():n(i)))))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(t,(o=>this.br(t,o,n).next((c=>{c||(r++,a.removeEntry(o,Zt.min()))})))).next((()=>a.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),yt.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),yt.resolve()}removeReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),yt.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),yt.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=$g(t.data.value)),n}br(t,n,r){return yt.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.pi.get(n);return yt.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class sS{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.Es=r,this.ds=i}static As(t,n){let r=ye(),i=ye();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new sS(t,n.fromCache,r,i)}}class MW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class OW{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return aq()?8:oX(br())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,r,i){const a={result:null};return this.ys(t,n).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.ws(t,n,i,r).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new MW;return this.Ss(t,n,o).next((c=>{if(a.result=c,this.Vs)return this.bs(t,n,o,c.size)}))})).next((()=>a.result))}bs(t,n,r,i){return r.documentReadCount<this.fs?(Xc()<=me.DEBUG&&kt("QueryEngine","SDK will not create cache indexes for query:",Wc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),yt.resolve()):(Xc()<=me.DEBUG&&kt("QueryEngine","Query:",Wc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Xc()<=me.DEBUG&&kt("QueryEngine","The SDK decides to create cache indexes for query:",Wc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ma(n))):yt.resolve())}ys(t,n){if(kR(n))return yt.resolve(null);let r=Ma(n);return this.indexManager.getIndexType(t,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=km(n,null,"F"),r=Ma(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next((a=>{const o=ye(...a);return this.ps.getDocuments(t,o).next((c=>this.indexManager.getMinOffset(t,r).next((u=>{const d=this.Ds(n,c);return this.Cs(n,d,o,u.readTime)?this.ys(t,km(n,null,"F")):this.vs(t,d,n,u)}))))})))))}ws(t,n,r,i){return kR(n)||i.isEqual(Zt.min())?yt.resolve(null):this.ps.getDocuments(t,r).next((a=>{const o=this.Ds(n,a);return this.Cs(n,o,r,i)?yt.resolve(null):(Xc()<=me.DEBUG&&kt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Wc(n)),this.vs(t,o,n,nX(i,Kd)).next((c=>c)))}))}Ds(t,n){let r=new Fn(KO(t));return n.forEach(((i,a)=>{xv(t,a)&&(r=r.add(a))})),r}Cs(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const a=t.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(t,n,r){return Xc()<=me.DEBUG&&kt("QueryEngine","Using full collection scan to execute query:",Wc(n)),this.ps.getDocumentsMatchingQuery(t,n,Go.min(),r)}vs(t,n,r,i){return this.ps.getDocumentsMatchingQuery(t,r,i).next((a=>(n.forEach((o=>{a=a.insert(o.key,o)})),a)))}}const oS="LocalStore",PW=3e8;class VW{constructor(t,n,r,i){this.persistence=t,this.Fs=n,this.serializer=i,this.Ms=new sn(ve),this.xs=new rc((a=>Q_(a)),Z_),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new EW(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function jW(e,t,n,r){return new VW(e,t,n,r)}async function b4(e,t){const n=ne(e);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.Bs(t),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const o=[],c=[];let u=ye();for(const d of i){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of a){c.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next((d=>({Ls:d,removedBatchIds:o,addedBatchIds:c})))}))}))}function zW(e,t){const n=ne(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=t.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,d,h){const g=d.batch,m=g.keys();let b=yt.resolve();return m.forEach((S=>{b=b.next((()=>h.getEntry(u,S))).next((w=>{const E=d.docVersions.get(S);ke(E!==null,48541),w.version.compareTo(E)<0&&(g.applyToRemoteDocument(w,d),w.isValidDocument()&&(w.setReadTime(d.commitVersion),h.addEntry(w)))}))})),b.next((()=>c.mutationQueue.removeMutationBatch(u,g)))})(n,r,t,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=ye();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u})(t)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function x4(e){const t=ne(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function LW(e,t){const n=ne(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const c=[];t.targetChanges.forEach(((h,g)=>{const m=i.get(g);if(!m)return;c.push(n.Pi.removeMatchingKeys(a,h.removedDocuments,g).next((()=>n.Pi.addMatchingKeys(a,h.addedDocuments,g))));let b=m.withSequenceNumber(a.currentSequenceNumber);t.targetMismatches.get(g)!==null?b=b.withResumeToken(sr.EMPTY_BYTE_STRING,Zt.min()).withLastLimboFreeSnapshotVersion(Zt.min()):h.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(h.resumeToken,r)),i=i.insert(g,b),(function(w,E,T){return w.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=PW?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0})(m,b,h)&&c.push(n.Pi.updateTargetData(a,b))}));let u=Ds(),d=ye();if(t.documentUpdates.forEach((h=>{t.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,h))})),c.push(BW(a,o,t.documentUpdates).next((h=>{u=h.ks,d=h.qs}))),!r.isEqual(Zt.min())){const h=n.Pi.getLastRemoteSnapshotVersion(a).next((g=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));c.push(h)}return yt.waitFor(c).next((()=>o.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,u,d))).next((()=>u))})).then((a=>(n.Ms=i,a)))}function BW(e,t,n){let r=ye(),i=ye();return n.forEach((a=>r=r.add(a))),t.getEntries(e,r).next((a=>{let o=Ds();return n.forEach(((c,u)=>{const d=a.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Zt.min())?(t.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(t.addEntry(u),o=o.insert(c,u)):kt(oS,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)})),{ks:o,qs:i}}))}function UW(e,t){const n=ne(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=X_),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function FW(e,t){const n=ne(e);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,t).next((a=>a?(i=a,yt.resolve(i)):n.Pi.allocateTargetId(r).next((o=>(i=new Io(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(t,r.targetId)),r}))}async function tx(e,t,n){const r=ne(e),i=r.Ms.get(t),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Qu(o))throw o;kt(oS,`Failed to update sequence numbers for target ${t}: ${o}`)}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function qR(e,t,n){const r=ne(e);let i=Zt.min(),a=ye();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(u,d,h){const g=ne(u),m=g.xs.get(h);return m!==void 0?yt.resolve(g.Ms.get(m)):g.Pi.getTargetData(d,h)})(r,o,Ma(t)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next((u=>{a=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,t,n?i:Zt.min(),n?a:ye()))).next((c=>(GW(r,RX(t),c),{documents:c,Qs:a})))))}function GW(e,t,n){let r=e.Os.get(t)||Zt.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),e.Os.set(t,r)}class HR{constructor(){this.activeTargetIds=OX()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class qW{constructor(){this.Mo=new HR,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,r){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new HR,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class HW{Oo(t){}shutdown(){}}const $R="ConnectivityMonitor";class YR{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){kt($R,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){kt($R,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Rg=null;function ex(){return Rg===null?Rg=(function(){return 268435456+Math.round(2147483648*Math.random())})():Rg++,"0x"+Rg.toString(16)}const S1="RestConnection",$W={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YW{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Rm?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(t,n,r,i,a){const o=ex(),c=this.zo(t,n.toUriEncodedString());kt(S1,`Sending RPC '${t}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,a);const{host:d}=new URL(c),h=Yu(d);return this.Jo(t,c,u,r,h).then((g=>(kt(S1,`Received RPC '${t}' ${o}: `,g),g)),(g=>{throw Du(S1,`RPC '${t}' ${o} failed with error: `,g,"url: ",c,"request:",r),g}))}Ho(t,n,r,i,a,o){return this.Go(t,n,r,i,a)}jo(t,n,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Wu})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,a)=>t[a]=i)),r&&r.headers.forEach(((i,a)=>t[a]=i))}zo(t,n){const r=$W[t];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class XW{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const dr="WebChannelConnection";class WW extends YW{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,i,a){const o=ex();return new Promise(((c,u)=>{const d=new wO;d.setWithCredentials(!0),d.listenOnce(EO.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Hg.NO_ERROR:const g=d.getResponseJson();kt(dr,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(g)),c(g);break;case Hg.TIMEOUT:kt(dr,`RPC '${t}' ${o} timed out`),u(new Ct(mt.DEADLINE_EXCEEDED,"Request time out"));break;case Hg.HTTP_ERROR:const m=d.getStatus();if(kt(dr,`RPC '${t}' ${o} failed with status:`,m,"response text:",d.getResponseText()),m>0){let b=d.getResponseJson();Array.isArray(b)&&(b=b[0]);const S=b?.error;if(S&&S.status&&S.message){const w=(function(T){const D=T.toLowerCase().replace(/_/g,"-");return Object.values(mt).indexOf(D)>=0?D:mt.UNKNOWN})(S.status);u(new Ct(w,S.message))}else u(new Ct(mt.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Ct(mt.UNAVAILABLE,"Connection failed."));break;default:Xt(9055,{l_:t,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{kt(dr,`RPC '${t}' ${o} completed.`)}}));const h=JSON.stringify(i);kt(dr,`RPC '${t}' ${o} sending request:`,i),d.send(n,"POST",h,r,15)}))}T_(t,n,r){const i=ex(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=CO(),c=AO(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=a.join("");kt(dr,`Creating RPC '${t}' stream ${i}: ${h}`,u);const g=o.createWebChannel(h,u);this.I_(g);let m=!1,b=!1;const S=new XW({Yo:E=>{b?kt(dr,`Not sending because RPC '${t}' stream ${i} is closed:`,E):(m||(kt(dr,`Opening RPC '${t}' stream ${i} transport.`),g.open(),m=!0),kt(dr,`RPC '${t}' stream ${i} sending:`,E),g.send(E))},Zo:()=>g.close()}),w=(E,T,D)=>{E.listen(T,(I=>{try{D(I)}catch(M){setTimeout((()=>{throw M}),0)}}))};return w(g,ud.EventType.OPEN,(()=>{b||(kt(dr,`RPC '${t}' stream ${i} transport opened.`),S.o_())})),w(g,ud.EventType.CLOSE,(()=>{b||(b=!0,kt(dr,`RPC '${t}' stream ${i} transport closed`),S.a_(),this.E_(g))})),w(g,ud.EventType.ERROR,(E=>{b||(b=!0,Du(dr,`RPC '${t}' stream ${i} transport errored. Name:`,E.name,"Message:",E.message),S.a_(new Ct(mt.UNAVAILABLE,"The operation could not be completed")))})),w(g,ud.EventType.MESSAGE,(E=>{if(!b){const T=E.data[0];ke(!!T,16349);const D=T,I=D?.error||D[0]?.error;if(I){kt(dr,`RPC '${t}' stream ${i} received error:`,I);const M=I.status;let z=(function(C){const k=In[C];if(k!==void 0)return o4(k)})(M),P=I.message;z===void 0&&(z=mt.INTERNAL,P="Unknown error status: "+M+" with message "+I.message),b=!0,S.a_(new Ct(z,P)),g.close()}else kt(dr,`RPC '${t}' stream ${i} received:`,T),S.u_(T)}})),w(c,TO.STAT_EVENT,(E=>{E.stat===Gb.PROXY?kt(dr,`RPC '${t}' stream ${i} detected buffering proxy`):E.stat===Gb.NOPROXY&&kt(dr,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{S.__()}),0),S}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function w1(){return typeof document<"u"?document:null}function Ev(e){return new JX(e,!0)}class _4{constructor(t,n,r=1e3,i=1.5,a=6e4){this.Mi=t,this.timerId=n,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&kt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const XR="PersistentStream";class S4{constructor(t,n,r,i,a,o,c,u){this.Mi=t,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new _4(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===mt.RESOURCE_EXHAUSTED?(Rs(n.toString()),Rs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===mt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{t((()=>{const i=new Ct(mt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(t,n){const r=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return kt(XR,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(kt(XR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class KW extends S4{constructor(t,n,r,i,a,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=nW(this.serializer,t),r=(function(a){if(!("targetChange"in a))return Zt.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Zt.min():o.readTime?Oa(o.readTime):Zt.min()})(t);return this.listener.H_(n,r)}Y_(t){const n={};n.database=Jb(this.serializer),n.addTarget=(function(a,o){let c;const u=o.target;if(c=Xb(u)?{documents:aW(a,u)}:{query:sW(a,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=u4(a,o.resumeToken);const d=Kb(a,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(Zt.min())>0){c.readTime=Om(a,o.snapshotVersion.toTimestamp());const d=Kb(a,o.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,t);const r=lW(this.serializer,t);r&&(n.labels=r),this.q_(n)}Z_(t){const n={};n.database=Jb(this.serializer),n.removeTarget=t,this.q_(n)}}class QW extends S4{constructor(t,n,r,i,a,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return ke(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ke(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ke(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=iW(t.writeResults,t.commitTime),r=Oa(t.commitTime);return this.listener.na(r,n)}ra(){const t={};t.database=Jb(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((r=>rW(this.serializer,r)))};this.q_(n)}}class ZW{}class JW extends ZW{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ct(mt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Go(t,Qb(n,r),i,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ct(mt.UNKNOWN,a.toString())}))}Ho(t,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(t,Qb(n,r),i,o,c,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ct(mt.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class tK{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Rs(n),this.aa=!1):kt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Zl="RemoteStore";class eK{constructor(t,n,r,i,a){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{ic(this)&&(kt(Zl,"Restarting streams for network reachability change."),await(async function(u){const d=ne(u);d.Ea.add(4),await kh(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Tv(d)})(this))}))})),this.Ra=new tK(r,i)}}async function Tv(e){if(ic(e))for(const t of e.da)await t(!0)}async function kh(e){for(const t of e.da)await t(!1)}function w4(e,t){const n=ne(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),fS(n)?uS(n):Ju(n).O_()&&cS(n,t))}function lS(e,t){const n=ne(e),r=Ju(n);n.Ia.delete(t),r.O_()&&E4(n,t),n.Ia.size===0&&(r.O_()?r.L_():ic(n)&&n.Ra.set("Unknown"))}function cS(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Zt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ju(e).Y_(t)}function E4(e,t){e.Va.Ue(t),Ju(e).Z_(t)}function uS(e){e.Va=new WX({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Ju(e).start(),e.Ra.ua()}function fS(e){return ic(e)&&!Ju(e).x_()&&e.Ia.size>0}function ic(e){return ne(e).Ea.size===0}function T4(e){e.Va=void 0}async function nK(e){e.Ra.set("Online")}async function rK(e){e.Ia.forEach(((t,n)=>{cS(e,t)}))}async function iK(e,t){T4(e),fS(e)?(e.Ra.ha(t),uS(e)):e.Ra.set("Unknown")}async function aK(e,t,n){if(e.Ra.set("Online"),t instanceof c4&&t.state===2&&t.cause)try{await(async function(i,a){const o=a.cause;for(const c of a.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Ia.delete(c),i.Va.removeTarget(c))})(e,t)}catch(r){kt(Zl,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Vm(e,r)}else if(t instanceof Wg?e.Va.Ze(t):t instanceof l4?e.Va.st(t):e.Va.tt(t),!n.isEqual(Zt.min()))try{const r=await x4(e.localStore);n.compareTo(r)>=0&&await(function(a,o){const c=a.Va.Tt(o);return c.targetChanges.forEach(((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.Ia.get(d);h&&a.Ia.set(d,h.withResumeToken(u.resumeToken,o))}})),c.targetMismatches.forEach(((u,d)=>{const h=a.Ia.get(u);if(!h)return;a.Ia.set(u,h.withResumeToken(sr.EMPTY_BYTE_STRING,h.snapshotVersion)),E4(a,u);const g=new Io(h.target,u,d,h.sequenceNumber);cS(a,g)})),a.remoteSyncer.applyRemoteEvent(c)})(e,n)}catch(r){kt(Zl,"Failed to raise snapshot:",r),await Vm(e,r)}}async function Vm(e,t,n){if(!Qu(t))throw t;e.Ea.add(1),await kh(e),e.Ra.set("Offline"),n||(n=()=>x4(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{kt(Zl,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Tv(e)}))}function A4(e,t){return t().catch((n=>Vm(e,n,t)))}async function Av(e){const t=ne(e),n=Yo(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:X_;for(;sK(t);)try{const i=await UW(t.localStore,r);if(i===null){t.Ta.length===0&&n.L_();break}r=i.batchId,oK(t,i)}catch(i){await Vm(t,i)}C4(t)&&R4(t)}function sK(e){return ic(e)&&e.Ta.length<10}function oK(e,t){e.Ta.push(t);const n=Yo(e);n.O_()&&n.X_&&n.ea(t.mutations)}function C4(e){return ic(e)&&!Yo(e).x_()&&e.Ta.length>0}function R4(e){Yo(e).start()}async function lK(e){Yo(e).ra()}async function cK(e){const t=Yo(e);for(const n of e.Ta)t.ea(n.mutations)}async function uK(e,t,n){const r=e.Ta.shift(),i=eS.from(r,t,n);await A4(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Av(e)}async function fK(e,t){t&&Yo(e).X_&&await(async function(r,i){if((function(o){return $X(o)&&o!==mt.ABORTED})(i.code)){const a=r.Ta.shift();Yo(r).B_(),await A4(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Av(r)}})(e,t),C4(e)&&R4(e)}async function WR(e,t){const n=ne(e);n.asyncQueue.verifyOperationInProgress(),kt(Zl,"RemoteStore received new credentials");const r=ic(n);n.Ea.add(3),await kh(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Tv(n)}async function dK(e,t){const n=ne(e);t?(n.Ea.delete(2),await Tv(n)):t||(n.Ea.add(2),await kh(n),n.Ra.set("Unknown"))}function Ju(e){return e.ma||(e.ma=(function(n,r,i){const a=ne(n);return a.sa(),new KW(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(e.datastore,e.asyncQueue,{Xo:nK.bind(null,e),t_:rK.bind(null,e),r_:iK.bind(null,e),H_:aK.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),fS(e)?uS(e):e.Ra.set("Unknown")):(await e.ma.stop(),T4(e))}))),e.ma}function Yo(e){return e.fa||(e.fa=(function(n,r,i){const a=ne(n);return a.sa(),new QW(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:lK.bind(null,e),r_:fK.bind(null,e),ta:cK.bind(null,e),na:uK.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await Av(e)):(await e.fa.stop(),e.Ta.length>0&&(kt(Zl,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}class dS{constructor(t,n,r,i,a){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,a){const o=Date.now()+r,c=new dS(t,n,o,i,a);return c.start(r),c}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ct(mt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hS(e,t){if(Rs("AsyncQueue",`${t}: ${e}`),Qu(e))return new Ct(mt.UNAVAILABLE,`${t}: ${e}`);throw e}class mu{static emptySet(t){return new mu(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||Ft.comparator(n.key,r.key):(n,r)=>Ft.comparator(n.key,r.key),this.keyedMap=fd(),this.sortedSet=new sn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,r)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof mu)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new mu;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}class KR{constructor(){this.ga=new sn(Ft.comparator)}track(t){const n=t.doc.key,r=this.ga.get(n);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(n,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(n):t.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Xt(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,r)=>{t.push(r)})),t}}class Ou{constructor(t,n,r,i,a,o,c,u,d){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(t,n,r,i,a){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new Ou(t,n,mu.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&bv(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class hK{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class pK{constructor(){this.queries=QR(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ne(n),a=i.queries;i.queries=QR(),a.forEach(((o,c)=>{for(const u of c.Sa)u.onError(r)}))})(this,new Ct(mt.ABORTED,"Firestore shutting down"))}}function QR(){return new rc((e=>WO(e)),bv)}async function pS(e,t){const n=ne(e);let r=3;const i=t.query;let a=n.queries.get(i);a?!a.ba()&&t.Da()&&(r=2):(a=new hK,r=t.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=hS(o,`Initialization of query '${Wc(t.query)}' failed`);return void t.onError(c)}n.queries.set(i,a),a.Sa.push(t),t.va(n.onlineState),a.wa&&t.Fa(a.wa)&&mS(n)}async function gS(e,t){const n=ne(e),r=t.query;let i=3;const a=n.queries.get(r);if(a){const o=a.Sa.indexOf(t);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=t.Da()?0:1:!a.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function gK(e,t){const n=ne(e);let r=!1;for(const i of t){const a=i.query,o=n.queries.get(a);if(o){for(const c of o.Sa)c.Fa(i)&&(r=!0);o.wa=i}}r&&mS(n)}function mK(e,t,n){const r=ne(e),i=r.queries.get(t);if(i)for(const a of i.Sa)a.onError(n);r.queries.delete(t)}function mS(e){e.Ca.forEach((t=>{t.next()}))}var nx,ZR;(ZR=nx||(nx={})).Ma="default",ZR.Cache="cache";class vS{constructor(t,n,r){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new Ou(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Ou.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==nx.Cache}}class D4{constructor(t){this.key=t}}class I4{constructor(t){this.key=t}}class vK{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ye(),this.mutatedKeys=ye(),this.eu=KO(t),this.tu=new mu(this.eu)}get nu(){return this.Ya}ru(t,n){const r=n?n.iu:new KR,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((h,g)=>{const m=i.get(h),b=xv(this.query,g)?g:null,S=!!m&&this.mutatedKeys.has(m.key),w=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let E=!1;m&&b?m.data.isEqual(b.data)?S!==w&&(r.track({type:3,doc:b}),E=!0):this.su(m,b)||(r.track({type:2,doc:b}),E=!0,(u&&this.eu(b,u)>0||d&&this.eu(b,d)<0)&&(c=!0)):!m&&b?(r.track({type:0,doc:b}),E=!0):m&&!b&&(r.track({type:1,doc:m}),E=!0,(u||d)&&(c=!0)),E&&(b?(o=o.add(b),a=w?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:c,mutatedKeys:a}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const a=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort(((h,g)=>(function(b,S){const w=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xt(20277,{Rt:E})}};return w(b)-w(S)})(h.type,g.type)||this.eu(h.doc,g.doc))),this.ou(r),i=i??!1;const c=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new Ou(this.query,t.tu,a,o,t.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new KR,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ye(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return t.forEach((r=>{this.Xa.has(r)||n.push(new I4(r))})),this.Xa.forEach((r=>{t.has(r)||n.push(new D4(r))})),n}cu(t){this.Ya=t.Qs,this.Xa=ye();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Ou.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const yS="SyncEngine";class yK{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class bK{constructor(t){this.key=t,this.hu=!1}}class xK{constructor(t,n,r,i,a,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new rc((c=>WO(c)),bv),this.Iu=new Map,this.Eu=new Set,this.du=new sn(Ft.comparator),this.Au=new Map,this.Ru=new iS,this.Vu={},this.mu=new Map,this.fu=Mu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _K(e,t,n=!0){const r=V4(e);let i;const a=r.Tu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await k4(r,t,n,!0),i}async function SK(e,t){const n=V4(e);await k4(n,t,!0,!1)}async function k4(e,t,n,r){const i=await FW(e.localStore,Ma(t)),a=i.targetId,o=e.sharedClientState.addLocalQueryTarget(a,n);let c;return r&&(c=await wK(e,t,a,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&w4(e.remoteStore,i),c}async function wK(e,t,n,r,i){e.pu=(g,m,b)=>(async function(w,E,T,D){let I=E.view.ru(T);I.Cs&&(I=await qR(w.localStore,E.query,!1).then((({documents:A})=>E.view.ru(A,I))));const M=D&&D.targetChanges.get(E.targetId),z=D&&D.targetMismatches.get(E.targetId)!=null,P=E.view.applyChanges(I,w.isPrimaryClient,M,z);return tD(w,E.targetId,P.au),P.snapshot})(e,g,m,b);const a=await qR(e.localStore,t,!0),o=new vK(t,a.Qs),c=o.ru(a.documents),u=Ih.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),d=o.applyChanges(c,e.isPrimaryClient,u);tD(e,n,d.au);const h=new yK(t,n,o);return e.Tu.set(t,h),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),d.snapshot}async function EK(e,t,n){const r=ne(e),i=r.Tu.get(t),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((o=>!bv(o,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await tx(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&lS(r.remoteStore,i.targetId),rx(r,i.targetId)})).catch(Ku)):(rx(r,i.targetId),await tx(r.localStore,i.targetId,!0))}async function TK(e,t){const n=ne(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),lS(n.remoteStore,r.targetId))}async function AK(e,t,n){const r=MK(e);try{const i=await(function(o,c){const u=ne(o),d=Se.now(),h=c.reduce(((b,S)=>b.add(S.key)),ye());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let S=Ds(),w=ye();return u.Ns.getEntries(b,h).next((E=>{S=E,S.forEach(((T,D)=>{D.isValidDocument()||(w=w.add(T))}))})).next((()=>u.localDocuments.getOverlayedDocuments(b,S))).next((E=>{g=E;const T=[];for(const D of c){const I=UX(D,g.get(D.key).overlayedDocument);I!=null&&T.push(new tl(D.key,I,UO(I.value.mapValue),ki.exists(!0)))}return u.mutationQueue.addMutationBatch(b,d,T,c)})).next((E=>{m=E;const T=E.applyToLocalDocumentSet(g,w);return u.documentOverlayCache.saveOverlays(b,E.batchId,T)}))})).then((()=>({batchId:m.batchId,changes:ZO(g)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),(function(o,c,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new sn(ve)),d=d.insert(c,u),o.Vu[o.currentUser.toKey()]=d})(r,i.batchId,n),await Nh(r,i.changes),await Av(r.remoteStore)}catch(i){const a=hS(i,"Failed to persist write");n.reject(a)}}async function N4(e,t){const n=ne(e);try{const r=await LW(n.localStore,t);t.targetChanges.forEach(((i,a)=>{const o=n.Au.get(a);o&&(ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ke(o.hu,14607):i.removedDocuments.size>0&&(ke(o.hu,42227),o.hu=!1))})),await Nh(n,r,t)}catch(r){await Ku(r)}}function JR(e,t,n){const r=ne(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((a,o)=>{const c=o.view.va(t);c.snapshot&&i.push(c.snapshot)})),(function(o,c){const u=ne(o);u.onlineState=c;let d=!1;u.queries.forEach(((h,g)=>{for(const m of g.Sa)m.va(c)&&(d=!0)})),d&&mS(u)})(r.eventManager,t),i.length&&r.Pu.H_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function CK(e,t,n){const r=ne(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),a=i&&i.key;if(a){let o=new sn(Ft.comparator);o=o.insert(a,gr.newNoDocument(a,Zt.min()));const c=ye().add(a),u=new wv(Zt.min(),new Map,new sn(ve),o,c);await N4(r,u),r.du=r.du.remove(a),r.Au.delete(t),bS(r)}else await tx(r.localStore,t,!1).then((()=>rx(r,t,n))).catch(Ku)}async function RK(e,t){const n=ne(e),r=t.batch.batchId;try{const i=await zW(n.localStore,t);O4(n,r,null),M4(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Nh(n,i)}catch(i){await Ku(i)}}async function DK(e,t,n){const r=ne(e);try{const i=await(function(o,c){const u=ne(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let h;return u.mutationQueue.lookupMutationBatch(d,c).next((g=>(ke(g!==null,37113),h=g.keys(),u.mutationQueue.removeMutationBatch(d,g)))).next((()=>u.mutationQueue.performConsistencyCheck(d))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h))).next((()=>u.localDocuments.getDocuments(d,h)))}))})(r.localStore,t);O4(r,t,n),M4(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Nh(r,i)}catch(i){await Ku(i)}}function M4(e,t){(e.mu.get(t)||[]).forEach((n=>{n.resolve()})),e.mu.delete(t)}function O4(e,t,n){const r=ne(e);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function rx(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((r=>{e.Ru.containsKey(r)||P4(e,r)}))}function P4(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(lS(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),bS(e))}function tD(e,t,n){for(const r of n)r instanceof D4?(e.Ru.addReference(r.key,t),IK(e,r)):r instanceof I4?(kt(yS,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||P4(e,r.key)):Xt(19791,{wu:r})}function IK(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(kt(yS,"New document in limbo: "+n),e.Eu.add(r),bS(e))}function bS(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Ft(He.fromString(t)),r=e.fu.next();e.Au.set(r,new bK(n)),e.du=e.du.insert(n,r),w4(e.remoteStore,new Io(Ma(yv(n.path)),r,"TargetPurposeLimboResolution",gv.ce))}}async function Nh(e,t,n){const r=ne(e),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,u)=>{o.push(r.pu(u,t,n).then((d=>{if((d||n)&&r.isPrimaryClient){const h=d?!d.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(d){i.push(d);const h=sS.As(u.targetId,d);a.push(h)}})))})),await Promise.all(o),r.Pu.H_(i),await(async function(u,d){const h=ne(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>yt.forEach(d,(m=>yt.forEach(m.Es,(b=>h.persistence.referenceDelegate.addReference(g,m.targetId,b))).next((()=>yt.forEach(m.ds,(b=>h.persistence.referenceDelegate.removeReference(g,m.targetId,b)))))))))}catch(g){if(!Qu(g))throw g;kt(oS,"Failed to update sequence numbers: "+g)}for(const g of d){const m=g.targetId;if(!g.fromCache){const b=h.Ms.get(m),S=b.snapshotVersion,w=b.withLastLimboFreeSnapshotVersion(S);h.Ms=h.Ms.insert(m,w)}}})(r.localStore,a))}async function kK(e,t){const n=ne(e);if(!n.currentUser.isEqual(t)){kt(yS,"User change. New user:",t.toKey());const r=await b4(n.localStore,t);n.currentUser=t,(function(a,o){a.mu.forEach((c=>{c.forEach((u=>{u.reject(new Ct(mt.CANCELLED,o))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Nh(n,r.Ls)}}function NK(e,t){const n=ne(e),r=n.Au.get(t);if(r&&r.hu)return ye().add(r.key);{let i=ye();const a=n.Iu.get(t);if(!a)return i;for(const o of a){const c=n.Tu.get(o);i=i.unionWith(c.view.nu)}return i}}function V4(e){const t=ne(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=N4.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=NK.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=CK.bind(null,t),t.Pu.H_=gK.bind(null,t.eventManager),t.Pu.yu=mK.bind(null,t.eventManager),t}function MK(e){const t=ne(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=RK.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=DK.bind(null,t),t}class jm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Ev(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return jW(this.persistence,new OW,t.initialUser,this.serializer)}Cu(t){return new y4(aS.mi,this.serializer)}Du(t){return new qW}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jm.provider={build:()=>new jm};class OK extends jm{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){ke(this.persistence.referenceDelegate instanceof Pm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new bW(r,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Fr.withCacheSize(this.cacheSizeBytes):Fr.DEFAULT;return new y4((r=>Pm.mi(r,n)),this.serializer)}}class ix{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>JR(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kK.bind(null,this.syncEngine),await dK(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new pK})()}createDatastore(t){const n=Ev(t.databaseInfo.databaseId),r=(function(a){return new WW(a)})(t.databaseInfo);return(function(a,o,c,u){return new JW(a,o,c,u)})(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return(function(r,i,a,o,c){return new eK(r,i,a,o,c)})(this.localStore,this.datastore,t.asyncQueue,(n=>JR(this.syncEngine,n,0)),(function(){return YR.v()?new YR:new HW})())}createSyncEngine(t,n){return(function(i,a,o,c,u,d,h){const g=new xK(i,a,o,c,u,d);return h&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=ne(n);kt(Zl,"RemoteStore shutting down."),r.Ea.add(5),await kh(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ix.provider={build:()=>new ix};class xS{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Rs("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}const Xo="FirestoreClient";class PK{constructor(t,n,r,i,a){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=pr.UNAUTHENTICATED,this.clientId=Y_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async o=>{kt(Xo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(kt(Xo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=hS(n,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function E1(e,t){e.asyncQueue.verifyOperationInProgress(),kt(Xo,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async i=>{r.isEqual(i)||(await b4(t.localStore,i),r=i)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function eD(e,t){e.asyncQueue.verifyOperationInProgress();const n=await VK(e);kt(Xo,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((r=>WR(t.remoteStore,r))),e.setAppCheckTokenChangeListener(((r,i)=>WR(t.remoteStore,i))),e._onlineComponents=t}async function VK(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){kt(Xo,"Using user provided OfflineComponentProvider");try{await E1(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(i){return i.name==="FirebaseError"?i.code===mt.FAILED_PRECONDITION||i.code===mt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Du("Error using user provided cache. Falling back to memory cache: "+n),await E1(e,new jm)}}else kt(Xo,"Using default OfflineComponentProvider"),await E1(e,new OK(void 0));return e._offlineComponents}async function j4(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(kt(Xo,"Using user provided OnlineComponentProvider"),await eD(e,e._uninitializedComponentsProvider._online)):(kt(Xo,"Using default OnlineComponentProvider"),await eD(e,new ix))),e._onlineComponents}function jK(e){return j4(e).then((t=>t.syncEngine))}async function zm(e){const t=await j4(e),n=t.eventManager;return n.onListen=_K.bind(null,t.syncEngine),n.onUnlisten=EK.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=SK.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=TK.bind(null,t.syncEngine),n}function zK(e,t,n={}){const r=new xs;return e.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,d){const h=new xS({next:m=>{h.Nu(),o.enqueueAndForget((()=>gS(a,g)));const b=m.docs.has(c);!b&&m.fromCache?d.reject(new Ct(mt.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&m.fromCache&&u&&u.source==="server"?d.reject(new Ct(mt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new vS(yv(c.path),h,{includeMetadataChanges:!0,qa:!0});return pS(a,g)})(await zm(e),e.asyncQueue,t,n,r))),r.promise}function LK(e,t,n={}){const r=new xs;return e.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,d){const h=new xS({next:m=>{h.Nu(),o.enqueueAndForget((()=>gS(a,g))),m.fromCache&&u.source==="server"?d.reject(new Ct(mt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new vS(c,h,{includeMetadataChanges:!0,qa:!0});return pS(a,g)})(await zm(e),e.asyncQueue,t,n,r))),r.promise}function z4(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}const nD=new Map;const L4="firestore.googleapis.com",rD=!0;class iD{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Ct(mt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=L4,this.ssl=rD}else this.host=t.host,this.ssl=t.ssl??rD;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=v4;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<vW)throw new Ct(mt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}eX("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=z4(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ct(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ct(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ct(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Cv{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iD({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ct(mt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ct(mt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iD(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new HY;switch(r.type){case"firstParty":return new WY(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ct(mt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=nD.get(n);r&&(kt("ComponentProvider","Removing Datastore"),nD.delete(n),r.terminate())})(this),Promise.resolve()}}function BK(e,t,n,r={}){e=$r(e,Cv);const i=Yu(t),a=e._getSettings(),o={...a,emulatorOptions:e._getEmulatorOptions()},c=`${t}:${n}`;i&&(NM(`https://${c}`),MM("Firestore",!0)),a.host!==L4&&a.host!==c&&Du("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...a,host:c,ssl:i,emulatorOptions:r};if(!Yl(u,o)&&(e._setSettings(u),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=pr.MOCK_USER;else{d=KG(r.mockUserToken,e._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Ct(mt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new pr(g)}e._authCredentials=new $Y(new DO(d,h))}}class Os{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Os(this.firestore,t,this._query)}}class hn{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vo(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new hn(this.firestore,t,this._key)}toJSON(){return{type:hn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(Rh(n,hn._jsonSchema))return new hn(t,r||null,new Ft(He.fromString(n.referencePath)))}}hn._jsonSchemaVersion="firestore/documentReference/1.0",hn._jsonSchema={type:On("string",hn._jsonSchemaVersion),referencePath:On("string")};class Vo extends Os{constructor(t,n,r){super(t,n,yv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new hn(this.firestore,null,new Ft(t))}withConverter(t){return new Vo(this.firestore,t,this._path)}}function wa(e,t,...n){if(e=an(e),IO("collection","path",t),e instanceof Cv){const r=He.fromString(t,...n);return vR(r),new Vo(e,null,r)}{if(!(e instanceof hn||e instanceof Vo))throw new Ct(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(He.fromString(t,...n));return vR(r),new Vo(e.firestore,null,r)}}function dn(e,t,...n){if(e=an(e),arguments.length===1&&(t=Y_.newId()),IO("doc","path",t),e instanceof Cv){const r=He.fromString(t,...n);return mR(r),new hn(e,null,new Ft(r))}{if(!(e instanceof hn||e instanceof Vo))throw new Ct(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(He.fromString(t,...n));return mR(r),new hn(e.firestore,e instanceof Vo?e.converter:null,new Ft(r))}}const aD="AsyncQueue";class sD{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new _4(this,"async_queue_retry"),this._c=()=>{const r=w1();r&&kt(aD,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const n=w1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=w1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new xs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Qu(t))throw t;kt(aD,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,Rs("INTERNAL UNHANDLED ERROR: ",oD(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(t,n,r){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const i=dS.createAndSchedule(this,t,n,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Xt(47125,{Pc:oD(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function oD(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}function lD(e){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(e,["next","error","complete"])}class Is extends Cv{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=new sD,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new sD(t),this._firestoreClient=void 0,await t}}}function UK(e,t){const n=typeof e=="object"?e:jM(),r=typeof e=="string"?e:Rm,i=j_(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=XG("firestore");a&&BK(i,...a)}return i}function Rv(e){if(e._terminated)throw new Ct(mt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||FK(e),e._firestoreClient}function FK(e){const t=e._freezeSettings(),n=(function(i,a,o,c){return new dX(i,a,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,z4(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new PK(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(e._componentsProvider))}class Ci{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ci(sr.fromBase64String(t))}catch(n){throw new Ct(mt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ci(sr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ci._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Rh(t,Ci._jsonSchema))return Ci.fromBase64String(t.bytes)}}Ci._jsonSchemaVersion="firestore/bytes/1.0",Ci._jsonSchema={type:On("string",Ci._jsonSchemaVersion),bytes:On("string")};class Dv{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Ct(mt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ir(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class _S{constructor(t){this._methodName=t}}class Pa{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Ct(mt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Ct(mt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return ve(this._lat,t._lat)||ve(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pa._jsonSchemaVersion}}static fromJSON(t){if(Rh(t,Pa._jsonSchema))return new Pa(t.latitude,t.longitude)}}Pa._jsonSchemaVersion="firestore/geoPoint/1.0",Pa._jsonSchema={type:On("string",Pa._jsonSchemaVersion),latitude:On("number"),longitude:On("number")};class Va{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Va._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Rh(t,Va._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new Va(t.vectorValues);throw new Ct(mt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Va._jsonSchemaVersion="firestore/vectorValue/1.0",Va._jsonSchema={type:On("string",Va._jsonSchemaVersion),vectorValues:On("object")};const GK=/^__.*__$/;class qK{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new tl(t,this.data,this.fieldMask,n,this.fieldTransforms):new Dh(t,this.data,n,this.fieldTransforms)}}class B4{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new tl(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function U4(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xt(40011,{Ac:e})}}class SS{constructor(t,n,r,i,a,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new SS({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),r=this.Vc({path:n,fc:!1});return r.gc(t),r}yc(t){const n=this.path?.child(t),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Lm(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(U4(this.Ac)&&GK.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class HK{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Ev(t)}Cc(t,n,r,i=!1){return new SS({Ac:t,methodName:n,Dc:r,path:ir.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Iv(e){const t=e._freezeSettings(),n=Ev(e._databaseId);return new HK(e._databaseId,!!t.ignoreUndefinedProperties,n)}function F4(e,t,n,r,i,a={}){const o=e.Cc(a.merge||a.mergeFields?2:0,t,n,i);wS("Data must be an object, but it was:",o,r);const c=G4(r,o);let u,d;if(a.merge)u=new oi(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const g of a.mergeFields){const m=ax(t,g,n);if(!o.contains(m))throw new Ct(mt.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);H4(h,m)||h.push(m)}u=new oi(h),d=o.fieldTransforms.filter((g=>u.covers(g.field)))}else u=null,d=o.fieldTransforms;return new qK(new qr(c),u,d)}class kv extends _S{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof kv}}function $K(e,t,n,r){const i=e.Cc(1,t,n);wS("Data must be an object, but it was:",i,r);const a=[],o=qr.empty();Jo(r,((u,d)=>{const h=ES(t,u,n);d=an(d);const g=i.yc(h);if(d instanceof kv)a.push(h);else{const m=Mh(d,g);m!=null&&(a.push(h),o.set(h,m))}}));const c=new oi(a);return new B4(o,c,i.fieldTransforms)}function YK(e,t,n,r,i,a){const o=e.Cc(1,t,n),c=[ax(t,r,n)],u=[i];if(a.length%2!=0)throw new Ct(mt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)c.push(ax(t,a[m])),u.push(a[m+1]);const d=[],h=qr.empty();for(let m=c.length-1;m>=0;--m)if(!H4(d,c[m])){const b=c[m];let S=u[m];S=an(S);const w=o.yc(b);if(S instanceof kv)d.push(b);else{const E=Mh(S,w);E!=null&&(d.push(b),h.set(b,E))}}const g=new oi(d);return new B4(h,g,o.fieldTransforms)}function XK(e,t,n,r=!1){return Mh(n,e.Cc(r?4:3,t))}function Mh(e,t){if(q4(e=an(e)))return wS("Unsupported field value:",t,e),G4(e,t);if(e instanceof _S)return(function(r,i){if(!U4(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let o=0;for(const c of r){let u=Mh(c,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}})(e,t)}return(function(r,i){if((r=an(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return PX(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Se.fromDate(r);return{timestampValue:Om(i.serializer,a)}}if(r instanceof Se){const a=new Se(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Om(i.serializer,a)}}if(r instanceof Pa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ci)return{bytesValue:u4(i.serializer,r._byteString)};if(r instanceof hn){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:rS(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Va)return(function(o,c){return{mapValue:{fields:{[LO]:{stringValue:BO},[Dm]:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return J_(c.serializer,d)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${pv(r)}`)})(e,t)}function G4(e,t){const n={};return MO(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Jo(e,((r,i)=>{const a=Mh(i,t.mc(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function q4(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Se||e instanceof Pa||e instanceof Ci||e instanceof hn||e instanceof _S||e instanceof Va)}function wS(e,t,n){if(!q4(n)||!kO(n)){const r=pv(n);throw r==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function ax(e,t,n){if((t=an(t))instanceof Dv)return t._internalPath;if(typeof t=="string")return ES(e,t);throw Lm("Field path arguments must be of type string or ",e,!1,void 0,n)}const WK=new RegExp("[~\\*/\\[\\]]");function ES(e,t,n){if(t.search(WK)>=0)throw Lm(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Dv(...t.split("."))._internalPath}catch{throw Lm(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Lm(e,t,n,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${t}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Ct(mt.INVALID_ARGUMENT,c+e+u)}function H4(e,t){return e.some((n=>n.isEqual(t)))}class $4{constructor(t,n,r,i,a){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new KK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Nv("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class KK extends $4{data(){return super.data()}}function Nv(e,t){return typeof t=="string"?ES(e,t):t instanceof Dv?t._internalPath:t._delegate._internalPath}function Y4(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Ct(mt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class TS{}class AS extends TS{}function Yi(e,t,...n){let r=[];t instanceof TS&&r.push(t),r=r.concat(n),(function(a){const o=a.filter((u=>u instanceof CS)).length,c=a.filter((u=>u instanceof Mv)).length;if(o>1||o>0&&c>0)throw new Ct(mt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)e=i._apply(e);return e}class Mv extends AS{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new Mv(t,n,r)}_apply(t){const n=this._parse(t);return X4(t._query,n),new Os(t.firestore,t.converter,Wb(t._query,n))}_parse(t){const n=Iv(t.firestore);return(function(a,o,c,u,d,h,g){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Ct(mt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){fD(g,h);const S=[];for(const w of g)S.push(uD(u,a,w));m={arrayValue:{values:S}}}else m=uD(u,a,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||fD(g,h),m=XK(c,o,g,h==="in"||h==="not-in");return Mn.create(d,h,m)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function vo(e,t,n){const r=t,i=Nv("where",e);return Mv._create(i,r,n)}class CS extends TS{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new CS(t,n)}_parse(t){const n=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ta.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)X4(o,u),o=Wb(o,u)})(t._query,n),new Os(t.firestore,t.converter,Wb(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class RS extends AS{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new RS(t,n)}_apply(t){const n=(function(i,a,o){if(i.startAt!==null)throw new Ct(mt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ct(mt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new th(a,o)})(t._query,this._field,this._direction);return new Os(t.firestore,t.converter,(function(i,a){const o=i.explicitOrderBy.concat([a]);return new Zu(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(t._query,n))}}function rh(e,t="asc"){const n=t,r=Nv("orderBy",e);return RS._create(r,n)}class DS extends AS{constructor(t,n,r){super(),this.type=t,this._limit=n,this._limitType=r}static _create(t,n,r){return new DS(t,n,r)}_apply(t){return new Os(t.firestore,t.converter,km(t._query,this._limit,this._limitType))}}function cD(e){return DS._create("limit",e,"F")}function uD(e,t,n){if(typeof(n=an(n))=="string"){if(n==="")throw new Ct(mt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XO(t)&&n.indexOf("/")!==-1)throw new Ct(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(He.fromString(n));if(!Ft.isDocumentKey(r))throw new Ct(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return TR(e,new Ft(r))}if(n instanceof hn)return TR(e,n._key);throw new Ct(mt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pv(n)}.`)}function fD(e,t){if(!Array.isArray(e)||e.length===0)throw new Ct(mt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function X4(e,t){const n=(function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(e.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new Ct(mt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ct(mt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class QK{convertValue(t,n="none"){switch($o(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _n(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Ho(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Xt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Jo(t,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(t){const n=t.fields?.[Dm].arrayValue?.values?.map((r=>_n(r.doubleValue)));return new Va(n)}convertGeoPoint(t){return new Pa(_n(t.latitude),_n(t.longitude))}convertArray(t,n){return(t.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const r=vv(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qd(t));default:return null}}convertTimestamp(t){const n=qo(t);return new Se(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=He.fromString(t);ke(m4(r),9688,{name:t});const i=new Zd(r.get(1),r.get(3)),a=new Ft(r.popFirst(5));return i.isEqual(n)||Rs(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}function W4(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class hd{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Bl extends $4{constructor(t,n,r,i,a,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=a}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Kg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Nv("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ct(mt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Bl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Bl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bl._jsonSchema={type:On("string",Bl._jsonSchemaVersion),bundleSource:On("string","DocumentSnapshot"),bundleName:On("string"),bundle:On("string")};class Kg extends Bl{data(t={}){return super.data(t)}}class Ul{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new hd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((r=>{t.call(n,new Kg(this._firestore,this._userDataWriter,r.key,r,new hd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ct(mt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((c=>{const u=new Kg(i._firestore,i._userDataWriter,c.doc.key,c.doc,new hd(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const u=new Kg(i._firestore,i._userDataWriter,c.doc.key,c.doc,new hd(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),h=o.indexOf(c.doc.key)),{type:ZK(c.type),doc:u,oldIndex:d,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ct(mt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ul._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Y_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function ZK(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xt(61501,{type:e})}}function JK(e){e=$r(e,hn);const t=$r(e.firestore,Is);return zK(Rv(t),e._key).then((n=>K4(t,e,n)))}Ul._jsonSchemaVersion="firestore/querySnapshot/1.0",Ul._jsonSchema={type:On("string",Ul._jsonSchemaVersion),bundleSource:On("string","QuerySnapshot"),bundleName:On("string"),bundle:On("string")};class IS extends QK{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ci(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new hn(this.firestore,null,n)}}function Pu(e){e=$r(e,Os);const t=$r(e.firestore,Is),n=Rv(t),r=new IS(t);return Y4(e._query),LK(n,e._query).then((i=>new Ul(t,r,e,i)))}function Ao(e,t,n){e=$r(e,hn);const r=$r(e.firestore,Is),i=W4(e.converter,t,n);return Pv(r,[F4(Iv(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,ki.none())])}function Oh(e,t,n,...r){e=$r(e,hn);const i=$r(e.firestore,Is),a=Iv(i);let o;return o=typeof(t=an(t))=="string"||t instanceof Dv?YK(a,"updateDoc",e._key,t,n,r):$K(a,"updateDoc",e._key,t),Pv(i,[o.toMutation(e._key,ki.exists(!0))])}function Vu(e){return Pv($r(e.firestore,Is),[new tS(e._key,ki.none())])}function Ov(e,t){const n=$r(e.firestore,Is),r=dn(e),i=W4(e.converter,t);return Pv(n,[F4(Iv(e.firestore),"addDoc",r._key,i,e.converter!==null,{}).toMutation(r._key,ki.exists(!1))]).then((()=>r))}function Fl(e,...t){e=an(e);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||lD(t[r])||(n=t[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(lD(t[r])){const u=t[r];t[r]=u.next?.bind(u),t[r+1]=u.error?.bind(u),t[r+2]=u.complete?.bind(u)}let a,o,c;if(e instanceof hn)o=$r(e.firestore,Is),c=yv(e._key.path),a={next:u=>{t[r]&&t[r](K4(o,e,u))},error:t[r+1],complete:t[r+2]};else{const u=$r(e,Os);o=$r(u.firestore,Is),c=u._query;const d=new IS(o);a={next:h=>{t[r]&&t[r](new Ul(o,d,u,h))},error:t[r+1],complete:t[r+2]},Y4(e._query)}return(function(d,h,g,m){const b=new xS(m),S=new vS(h,b,g);return d.asyncQueue.enqueueAndForget((async()=>pS(await zm(d),S))),()=>{b.Nu(),d.asyncQueue.enqueueAndForget((async()=>gS(await zm(d),S)))}})(Rv(o),c,i,a)}function Pv(e,t){return(function(r,i){const a=new xs;return r.asyncQueue.enqueueAndForget((async()=>AK(await jK(r),i,a))),a.promise})(Rv(e),t)}function K4(e,t,n){const r=n.docs.get(t._key),i=new IS(e);return new Bl(e,i,t._key,r,new hd(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(i){Wu=i})(Xu),Cu(new Xl("firestore",((r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new Is(new YY(r.getProvider("auth-internal")),new KY(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ct(mt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zd(d.options.projectId,h)})(o,i),o);return a={useFetchStreams:n,...a},c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),Oo(dR,hR,t),Oo(dR,hR,"esm2020")})();const tQ={apiKey:"AIzaSyDwUA0paVI6n01aENV5Q2aLwVz1DEDtNuA",authDomain:"personal-budget-pwa-5defb.firebaseapp.com",projectId:"personal-budget-pwa-5defb",storageBucket:"personal-budget-pwa-5defb.firebasestorage.app",messagingSenderId:"137454342284",appId:"1:137454342284:web:d7a8169fd53f437e42aba9"},Q4=VM(tQ),yo=UY(Q4),Ve=UK(Q4),T1=e=>({id:e.uid,username:e.email||e.uid,displayName:e.displayName||e.email?.split("@")[0]||"User",email:e.email||void 0}),Ni=sv()(M_(e=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,lastAuthTime:null,offlineGracePeriod:10080*60*1e3,lastVerificationEmailSent:null,login:async(t,n)=>{e({isLoading:!0,loginError:null});try{const i=(await E$(yo,t,n)).user;if(!i.emailVerified)return await eR(yo),e({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Please verify your email address before signing in. Check your email for a verification link."}),console.log(` Login blocked: ${i.email} not verified`),!1;const a=T1(i);return e({currentUser:a,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),console.log(` User logged in: ${a.email}`),!0}catch(r){console.error("Login error:",r),console.error("Error code:",r.code),console.error("Error message:",r.message);let i="Login failed. Please try again.";if(r.code)switch(r.code){case"auth/invalid-email":i="Invalid email address.";break;case"auth/user-disabled":i="This account has been disabled.";break;case"auth/user-not-found":i="No account found with this email.";break;case"auth/wrong-password":i="Incorrect password.";break;case"auth/too-many-requests":i="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break;case"auth/invalid-credential":i="Invalid email or password.";break;default:console.warn(`Unhandled Firebase error code: ${r.code}`),i="Authentication failed. Please try again.";break}else console.warn("Non-Firebase error in login:",r),i="An unexpected error occurred. Please try again.";return e({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:i}),!1}},register:async(t,n,r)=>{e({isLoading:!0,loginError:null});try{const a=(await w$(yo,t,n)).user;await A$(a,{displayName:r}),await tR(a);const o=T1(a);return e({currentUser:o,isAuthenticated:!1,isLoading:!1,loginError:null,lastVerificationEmailSent:Date.now()}),console.log(` User registered: ${o.email}, verification email sent`),!0}catch(i){console.error("Registration error:",i);let a="Registration failed. Please try again.";switch(i.code){case"auth/email-already-in-use":a="An account with this email already exists.";break;case"auth/invalid-email":a="Invalid email address.";break;case"auth/weak-password":a="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":a="Email/password accounts are not enabled.";break}return e({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:a}),!1}},logout:async()=>{try{await eR(yo),console.log(" User logged out")}catch(t){console.error("Logout error:",t)}},clearError:()=>{e({loginError:null})},sendPasswordReset:async t=>{e({isLoading:!0,loginError:null});try{return await S$(yo,t),e({isLoading:!1}),!0}catch(n){console.error("Password reset error:",n);let r="Failed to send password reset email. Please try again.";switch(n.code){case"auth/user-not-found":r="No account found with this email.";break;case"auth/invalid-email":r="Invalid email address.";break;case"auth/too-many-requests":r="Too many attempts. Please try again later.";break}return e({isLoading:!1,loginError:r}),!1}},sendEmailVerification:async()=>{const t=yo.currentUser;if(!t)return e({loginError:"No user is currently signed in."}),!1;e({isLoading:!0,loginError:null});try{return await tR(t),e({isLoading:!1,lastVerificationEmailSent:Date.now()}),console.log(` Verification email sent to: ${t.email}`),!0}catch(n){console.error("Email verification error:",n);let r="Failed to send verification email. Please try again.";switch(n.code){case"auth/too-many-requests":r="Too many verification emails sent. Please wait before trying again.";break}return e({isLoading:!1,loginError:r}),!1}},resendEmailVerification:async()=>{const t=Ni.getState();if(t.lastVerificationEmailSent){const n=Date.now()-t.lastVerificationEmailSent,r=60*1e3;if(n<r){const i=Math.ceil((r-n)/1e3);return e({loginError:`Please wait ${i} seconds before requesting another verification email.`}),!1}}return t.sendEmailVerification()},deleteAccount:async t=>{const n=yo.currentUser;if(!n||!n.email)return e({loginError:"No user is currently signed in."}),!1;e({isLoading:!0,loginError:null});try{const r=nc.credential(n.email,t);return await _$(n,r),await I$(n),e({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:null,lastAuthTime:null}),console.log(` Account permanently deleted: ${n.email}`),!0}catch(r){console.error("Account deletion error:",r);let i="Failed to delete account. Please try again.";switch(r.code){case"auth/requires-recent-login":i="For security, please log out and log back in before deleting your account.";break;case"auth/wrong-password":i="Incorrect password. Please enter your current password.";break;case"auth/too-many-requests":i="Too many deletion attempts. Please wait before trying again.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break}return e({isLoading:!1,loginError:i}),!1}},initializeAuth:()=>Ni.getState().isInitialized?()=>{}:(e({isInitialized:!1}),D$(yo,r=>{const i=Date.now(),a=Ni.getState(),o=r?T1(r):null,c=a.lastAuthTime&&i-a.lastAuthTime<a.offlineGracePeriod,d=typeof navigator<"u"&&!navigator.onLine&&a.isAuthenticated&&c&&!o,h=r?r.emailVerified:!0,g=r&&h||!!d,m=r?o:d?a.currentUser:null;e({currentUser:m,isAuthenticated:g,isInitialized:!0,isLoading:!1,loginError:null,lastAuthTime:r&&h?i:a.lastAuthTime}),m?console.log(` Auth state: User is signed in (${m.email})`,d?"(offline grace period)":h?"(verified)":"(unverified)"):console.log(" Auth state: User is signed out")}))}),{name:"auth-storage",partialize:e=>({isAuthenticated:e.isAuthenticated,currentUser:e.currentUser,lastAuthTime:e.lastAuthTime,offlineGracePeriod:e.offlineGracePeriod,lastVerificationEmailSent:e.lastVerificationEmailSent})})),eQ=e=>e==="income"?"Income":e==="expense"?"Expense":e==="transfer"?"Transfer":e,Z4=e=>{const t=e.toLowerCase();return t==="income"||t==="expense"||t==="transfer"?t:"expense"},kS=e=>{const t=e.date?.toDate?.()?e.date.toDate().toISOString():e.date,n=new Date(t),r=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;return{id:e.id,date:t,amount:typeof e.amount=="string"?parseFloat(e.amount)||0:e.amount,description:e.description||"",merchant:e.merchant||void 0,envelopeId:e.envelopeId||"",reconciled:e.reconciled??!1,type:eQ(e.type),transferId:e.transferId??void 0,userId:e.userId,month:r,isAutomatic:e.isAutomatic??void 0}},nQ=(e,t)=>{const n={id:e.id,userId:t,envelopeId:e.envelopeId,amount:e.amount.toString(),date:Se.fromDate(new Date(e.date)),description:e.description,merchant:e.merchant||null,reconciled:e.reconciled??!1,type:Z4(e.type),transferId:e.transferId??null};return e.isAutomatic===!0&&(n.isAutomatic=!0),n},rQ=e=>{const t={envelopeId:e.envelopeId,amount:e.amount.toString(),date:Se.fromDate(new Date(e.date)),description:e.description,merchant:e.merchant||null,reconciled:e.reconciled??!1,type:Z4(e.type),transferId:e.transferId??null};return e.isAutomatic===!0&&(t.isAutomatic=!0),t},A1=e=>wa(Ve,"users",e,"transactions"),Ca={subscribeToTransactions:(e,t)=>{const n=Yi(A1(e),rh("date","desc"));return Fl(n,i=>{const a=i.docs.map(o=>({id:o.id,...o.data()}));t(a)})},getAllTransactions:async e=>{console.log(` TransactionService.getAllTransactions: Fetching for user ${e}`);const t=Yi(A1(e),rh("date","desc")),r=(await Pu(t)).docs.map(i=>{const a={id:i.id,...i.data()};return kS(a)});return console.log(` Fetched ${r.length} transactions:`,r.map(i=>({id:i.id,description:i.description,month:i.month}))),r},addTransaction:async e=>{const{userId:t,id:n,...r}=e;if(!t)throw new Error("User ID is required to create transaction");console.log(` TransactionService.addTransaction: Adding transaction for user ${t}:`,r),console.log(` Original transaction had temp ID: ${n}`);try{console.log(" About to call addDoc with:",r);const i=await Ov(A1(t),r);console.log(" addDoc succeeded, docRef:",i),console.log(` Document ID: ${i.id}`),console.log(` Document path: ${i.path}`);const a={id:i.id,...r,userId:t};return console.log(" Final result object:",a),a}catch(i){throw console.error(" addDoc failed:",i),console.error("Error message:",i.message),i}},updateTransaction:async(e,t,n)=>{const r=dn(Ve,"users",e,"transactions",t);return await Oh(r,n)},deleteTransaction:async(e,t)=>{console.log(` TransactionService.deleteTransaction: Deleting transaction ${t} for user ${e}`);try{const n=dn(Ve,"users",e,"transactions",t);console.log(` Deleting document at path: ${n.path}`),await Vu(n),console.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${t}`)}catch(n){throw console.error(` TransactionService.deleteTransaction: Failed to delete transaction ${t}:`,n),console.error("Error message:",n.message),n}}},C1=e=>wa(Ve,"users",e,"envelopes"),Ea={subscribeToEnvelopes:(e,t)=>{const n=Yi(C1(e),rh("orderIndex","asc"));return Fl(n,i=>{const a=i.docs.map(o=>({id:o.id,...o.data()}));t(a)})},getAllEnvelopes:async e=>{try{console.log(" EnvelopeService.getAllEnvelopes called for user:",e);const t=C1(e),i=(await Pu(t)).docs.map((a,o)=>({id:a.id,...a.data(),orderIndex:a.data().orderIndex??o})).sort((a,o)=>{const c=a.orderIndex??0,u=o.orderIndex??0;return c-u});return console.log(" Fetched envelopes:",i.length),i}catch(t){return console.error(" EnvelopeService.getAllEnvelopes failed:",t),[]}},createEnvelope:async e=>{const{userId:t,id:n,...r}=e;if(!t)throw new Error("User ID is required to create envelope");try{return{id:(await Ov(C1(t),r)).id,...r,userId:t}}catch(i){throw console.error(" Envelope addDoc failed:",i),i}},saveEnvelope:async(e,t)=>{if(!t.id)throw new Error("Envelope ID is required for save operation");const n=dn(Ve,"users",e,"envelopes",t.id);return await Ao(n,t,{merge:!0})},updateBalance:async(e,t,n)=>{const r=dn(Ve,"users",e,"envelopes",t);return await Oh(r,{currentBalance:n,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(e,t)=>{console.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${t} for user ${e}`);const n=dn(Ve,"users",e,"envelopes",t);await Vu(n),console.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${t}`)}},dD=e=>{const t={...e},n=t;if(Object.keys(t).forEach(r=>{t[r]===void 0&&delete n[r]}),t.piggybankConfig){const r={...t.piggybankConfig},i=r;Object.keys(r).forEach(a=>{r[a]===void 0&&delete i[a]}),t.piggybankConfig=r}return t},iQ=({set:e,get:t,getCurrentUserId:n,isNetworkError:r})=>{const i=a=>({id:a.id,date:a.date?.toDate?.()?a.date.toDate().toISOString():a.date,amount:parseFloat(a.amount)||0,description:a.description||"",envelopeId:a.envelopeId||"",reconciled:a.reconciled||!1,type:a.type==="income"?"Income":a.type==="expense"?"Expense":"Transfer",transferId:a.transferId||void 0,userId:a.userId||void 0});return{createEnvelope:async a=>{const o=a.currentBalance&&a.currentBalance>0,c=o?{...a,currentBalance:0,orderIndex:a.orderIndex??0}:{...a,orderIndex:a.orderIndex??0},u=`temp-${Date.now()}-${Math.random()}`,d={...c,id:u};if(e(h=>({envelopes:[...h.envelopes,d],isLoading:!0})),o){console.log(` Creating initial deposit transaction locally first: ${d.name} (tempId: ${u})`);try{await t().addTransaction({description:"Initial Deposit",amount:a.currentBalance,envelopeId:u,date:new Date().toISOString(),type:"Income",reconciled:!1}),console.log(" Initial deposit transaction created locally");const h=t().getEnvelopeBalance(u);console.log(` Test balance for temp envelope ${u}: $${h.toNumber()}`)}catch(h){console.error(" Failed to create initial deposit transaction locally:",h)}}try{console.log(" Attempting Firebase envelope creation...");const h=n(),g={...c,id:"",userId:h},m=await Ea.createEnvelope(g);console.log(" Firebase envelope creation successful:",m);const b={id:m.id,name:m.name,currentBalance:m.currentBalance,lastUpdated:m.lastUpdated,isActive:m.isActive??!0,orderIndex:m.orderIndex??0,userId:m.userId,createdAt:m.createdAt,isPiggybank:m.isPiggybank,piggybankConfig:m.piggybankConfig};if(e(S=>({envelopes:S.envelopes.map(w=>w.id===u?b:w),isLoading:!1,pendingSync:!1})),o){console.log(` Updating transactions from temp envelope ID ${u} to real ID ${m.id}`),console.log(" Transactions before update:",t().transactions.map(w=>({id:w.id,envelopeId:w.envelopeId,description:w.description}))),e(w=>({transactions:w.transactions.map(E=>E.envelopeId===u?{...E,envelopeId:m.id}:E)})),console.log(" Transactions after envelopeId update:",t().transactions.map(w=>({id:w.id,envelopeId:w.envelopeId,description:w.description})));const S=t().transactions.filter(w=>w.envelopeId===m.id&&w.id&&w.id.startsWith("temp-"));console.log(` Found ${S.length} transactions to sync for envelope ${m.id}:`,S.map(w=>({id:w.id,envelopeId:w.envelopeId})));for(const w of S)try{console.log(" Syncing transaction:",w);const E={...w,amount:w.amount.toString(),type:w.type.toLowerCase(),date:Se.fromDate(new Date(w.date))},T=await Ca.addTransaction(E);console.log(" Transaction synced:",T);const D=i(T);console.log(` Replacing temp transaction ${w.id} with Firebase transaction ${T.id}`),e(I=>({transactions:I.transactions.map(M=>M.id===w.id?D:M)}))}catch(E){console.error(` Failed to sync transaction ${w.id}:`,E)}console.log(" Final transactions after sync:",t().transactions.map(w=>({id:w.id,envelopeId:w.envelopeId,description:w.description}))),e({pendingSync:!1}),console.log(` All transactions synced for envelope ${m.id}`)}return m}catch(h){if(console.error("Create Envelope Failed:",h),console.log("Error details:",{code:h?.code,message:h?.message,name:h?.name,isNetworkError:r(h)}),r(h))return console.log(" Treating as offline scenario - keeping temp envelope and transactions"),e({isLoading:!1,pendingSync:!0,error:null}),d;throw console.log(" Real error - removing temp envelope"),e(g=>({envelopes:g.envelopes.filter(m=>m.id!==u),transactions:g.transactions.filter(m=>m.envelopeId!==u),error:h.message,isLoading:!1})),h}return d},addToEnvelope:async(a,o,c,u)=>{const d=u?typeof u=="string"?u:u.toISOString():new Date().toISOString();await t().addTransaction({description:c,amount:o,envelopeId:a,date:d,type:"Income",reconciled:!1})},spendFromEnvelope:async(a,o,c,u)=>{const d=u?typeof u=="string"?u:u.toISOString():new Date().toISOString();await t().addTransaction({description:c,amount:o,envelopeId:a,date:d,type:"Expense",reconciled:!1})},transferFunds:async(a,o,c,u,d)=>{console.log(`Transferring ${c} from ${a} to ${o} with note: ${u}`);const h=d?typeof d=="string"?d:d.toISOString():new Date().toISOString(),g=`transfer-${Date.now()}-${Math.random()}`;await t().addTransaction({description:`Transfer to ${t().envelopes.find(m=>m.id===o)?.name||"envelope"}`,amount:c,envelopeId:a,date:h,type:"Expense",transferId:g,reconciled:!1}),await t().addTransaction({description:`Transfer from ${t().envelopes.find(m=>m.id===a)?.name||"envelope"}`,amount:c,envelopeId:o,date:h,type:"Income",transferId:g,reconciled:!1})},deleteEnvelope:async a=>{const o=t().transactions.filter(c=>c.envelopeId===a);e(c=>({envelopes:c.envelopes.filter(u=>u.id!==a),transactions:c.transactions.filter(u=>u.envelopeId!==a),isLoading:!0}));try{const c=n();await Ea.deleteEnvelope(c,a);for(const u of o)u.id&&!u.id.startsWith("temp-")&&await Ca.deleteTransaction(c,u.id);await t().removeEnvelopeFromTemplates(a),e({isLoading:!1})}catch(c){if(console.error("Delete Envelope Failed:",c),r(c))e({isLoading:!1,pendingSync:!0,error:null});else{const u=t().envelopes.find(d=>d.id===a);e(u?d=>({envelopes:[...d.envelopes,u],transactions:[...d.transactions,...o],error:c.message,isLoading:!1}):{error:c.message,isLoading:!1})}}},reorderEnvelopes:async a=>{if(!a.length)return;const o=t(),c=new Map;a.forEach((g,m)=>{c.set(g,m)});const u=o.envelopes,d=u.map(g=>{if(!c.has(g.id))return g;const m=c.get(g.id);return g.orderIndex===m?g:{...g,orderIndex:m}}),h=d.filter((g,m)=>g!==u[m]);if(h.length){e({envelopes:d,isLoading:!0});try{const g=n();await Promise.all(h.map(m=>{const b=dD(m);return Ea.saveEnvelope(g,b)})),e({isLoading:!1})}catch(g){if(console.error("Reorder envelopes failed:",g),r(g))e({isLoading:!1,pendingSync:!0,error:null});else throw e({envelopes:u,isLoading:!1,error:g?.message??"Failed to reorder envelopes"}),g}}},updateEnvelope:async a=>{const o=dD(a);e(c=>({envelopes:c.envelopes.map(u=>u.id===o.id?o:u),isLoading:!0}));try{const c=n();await Ea.saveEnvelope(c,o),e({isLoading:!1})}catch(c){console.error("Update Envelope Failed:",c),r(c)?e({isLoading:!1,pendingSync:!0,error:null}):e({error:c.message,isLoading:!1})}},renameEnvelope:async(a,o)=>{e(c=>({envelopes:c.envelopes.map(u=>u.id===a?{...u,name:o}:u),isLoading:!0}));try{e({isLoading:!1})}catch(c){console.error("Rename Envelope Failed:",c),e({error:c.message,isLoading:!1})}}}},R1=e=>wa(Ve,"users",e,"distributionTemplates"),si={subscribeToDistributionTemplates:(e,t)=>{const n=Yi(R1(e),rh("lastUsed","desc"));return Fl(n,i=>{const a=i.docs.map(o=>({id:o.id,...o.data()}));t(a)})},getAllDistributionTemplates:async e=>{const t=Yi(R1(e),rh("lastUsed","desc"));return(await Pu(t)).docs.map(r=>({id:r.id,...r.data()}))},createDistributionTemplate:async e=>{const{userId:t,id:n,...r}=e;if(!t)throw new Error("User ID is required to create distribution template");console.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${t}:`,r);try{const i=await Ov(R1(t),r);console.log(" Template addDoc succeeded, docRef:",i);const a={id:i.id,...r,userId:t};return console.log(" Final template result object:",a),a}catch(i){throw console.error(" Template addDoc failed:",i),i}},saveDistributionTemplate:async(e,t)=>{const n=dn(Ve,"users",e,"distributionTemplates",t.id);return await Ao(n,t,{merge:!0})},updateDistributionTemplate:async(e,t,n)=>{const r=dn(Ve,"users",e,"distributionTemplates",t);return await Oh(r,n)},deleteDistributionTemplate:async(e,t)=>{console.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${t} for user ${e}`);const n=dn(Ve,"users",e,"distributionTemplates",t);await Vu(n),console.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${t}`)}},aQ=({set:e,get:t,getCurrentUserId:n,isNetworkError:r})=>({saveTemplate:async(i,a,o)=>{console.log(" saveTemplate called with:",{name:i,distributions:a,note:o});try{const c=n(),u={id:`temp-${Date.now()}`,userId:c,name:i,note:o,lastUsed:new Date().toISOString(),distributions:a};console.log(" Attempting Firebase template save..."),console.log(" Current online status:",navigator.onLine);try{const d=si.createDistributionTemplate(u),h=new Promise((m,b)=>setTimeout(()=>b(new Error("Firebase timeout - likely offline")),5e3)),g=await Promise.race([d,h]);console.log(" Firebase template save succeeded (online mode):",g),console.log(" Template saved to Firebase - real-time subscription will update local state"),console.log(" Template saved to Firebase:",g),console.log(" Store now has templates:",t().distributionTemplates.length)}catch(d){throw console.log(" Firebase template save failed or timed out:",d.message),d}}catch(c){console.error(" Failed to save template to Firebase, saving locally:",c),console.log(" Error details:",{name:c?.name||"Unknown",message:c?.message||"Unknown",code:c?.code||"Unknown",isNetworkError:r(c)});const u=n(),d={id:`local-${Date.now()}`,userId:u,name:i,note:o,lastUsed:new Date().toISOString(),distributions:a};console.log(" Saving template locally (offline):",d),e(h=>({distributionTemplates:[...h.distributionTemplates,d],pendingSync:!0})),console.log(" Template saved locally as fallback:",d),console.log(" Store now has templates:",t().distributionTemplates.length)}},updateTemplate:async i=>{try{const a=n();await si.updateDistributionTemplate(a,i.id,{name:i.name,note:i.note,distributions:i.distributions,lastUsed:i.lastUsed}),e(o=>({distributionTemplates:o.distributionTemplates.map(c=>c.id===i.id?i:c)})),console.log(" Template updated in Firebase:",i.id)}catch(a){throw console.error(" Failed to update template in Firebase:",a),a}},deleteTemplate:async i=>{try{const a=n();await si.deleteDistributionTemplate(a,i),e(o=>({distributionTemplates:o.distributionTemplates.filter(c=>c.id!==i)})),console.log(" Template deleted from Firebase:",i)}catch(a){throw console.error(" Failed to delete template from Firebase:",a),a}},cleanupOrphanedTemplates:async()=>{console.log(" Cleaning up orphaned templates...");const i=t().distributionTemplates,a=t().envelopes,o=new Set(a.map(u=>u.id));let c=0;for(const u of i){const d={...u.distributions},h={};for(const[g,m]of Object.entries(u.distributions))o.has(g)&&(h[g]=m);if(Object.keys(h).length===0){console.log(` Deleting orphaned template: ${u.name}`);const g=n();await si.deleteDistributionTemplate(g,u.id),c++}else if(JSON.stringify(h)!==JSON.stringify(d)){console.log(` Updating template ${u.name} - removed orphaned envelope references`);const g=n();await si.updateDistributionTemplate(g,u.id,{distributions:h}),c++}}c>0?console.log(` Cleaned up ${c} templates`):console.log(" No orphaned templates found")},updateTemplateEnvelopeReferences:async(i,a)=>{console.log(` Updating template references: ${i}  ${a}`);const o=t().distributionTemplates;let c=0;for(const u of o)if(u.distributions[i]!==void 0){const d={...u.distributions};d[a]=d[i],delete d[i],console.log(` Updating template: ${u.name}`);const h=n();await si.updateDistributionTemplate(h,u.id,{distributions:d}),c++}c>0&&console.log(` Updated ${c} templates with new envelope reference`)},removeEnvelopeFromTemplates:async i=>{console.log(` Removing envelope ${i} from all templates`);const a=t().distributionTemplates;let o=0,c=0;for(const u of a)if(u.distributions[i]!==void 0){const d={...u.distributions};if(delete d[i],Object.keys(d).length===0){console.log(` Deleting template ${u.name} - no envelopes left`);const h=n();await si.deleteDistributionTemplate(h,u.id),c++}else{console.log(` Removing envelope from template: ${u.name}`);const h=n();await si.updateDistributionTemplate(h,u.id,{distributions:d}),o++}}(o>0||c>0)&&console.log(` Updated ${o} templates, deleted ${c} empty templates`)}}),D1=e=>wa(Ve,"users",e,"appSettings"),fs={subscribeToAppSettings:(e,t)=>{const n=Yi(D1(e),cD(1));return Fl(n,i=>{if(i.empty){t(null);return}const a=i.docs.map(o=>({id:o.id,...o.data()}))[0];t(a)})},getAppSettings:async e=>{const t=Yi(D1(e),cD(1)),n=await Pu(t);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data()}},createAppSettings:async e=>{const{userId:t,...n}=e;if(!t)throw new Error("User ID is required to create app settings");console.log(` AppSettingsService.createAppSettings: Creating settings for user ${t}:`,n);try{const r=await Ov(D1(t),n);console.log(" Settings addDoc succeeded, docRef:",r);const i={id:r.id,...n,userId:t};return console.log(" Final settings result object:",i),i}catch(r){throw console.error(" Settings addDoc failed:",r),r}},saveAppSettings:async(e,t)=>{const n=dn(Ve,"users",e,"appSettings",t.id);return await Ao(n,t,{merge:!0})},updateAppSettings:async(e,t,n)=>{const r=dn(Ve,"users",e,"appSettings",t);return await Oh(r,n)},deleteAppSettings:async(e,t)=>{console.log(` AppSettingsService.deleteAppSettings: Deleting settings ${t} for user ${e}`);const n=dn(Ve,"users",e,"appSettings",t);await Vu(n),console.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${t}`)}},J4=({set:e,get:t,getCurrentUserId:n})=>({updateAppSettings:async r=>{const i=t();if(!i.appSettings){try{await J4({set:e,get:t,getCurrentUserId:n}).initializeAppSettings();const a=t();if(a.appSettings){const o={...a.appSettings,...r};e({appSettings:o});const c=n();await fs.updateAppSettings(c,a.appSettings.id,r),console.log(" App settings updated successfully")}}catch(a){console.error(" Failed to initialize/update settings:",a)}return}try{e(o=>({appSettings:{...o.appSettings,...r}}));const a=n();await fs.updateAppSettings(a,i.appSettings.id,r),console.log(" App settings updated successfully")}catch(a){throw console.error(" Failed to update app settings:",a),e(o=>({appSettings:o.appSettings})),a}},initializeAppSettings:async()=>{try{const i={userId:n(),theme:"system",enableMoveableReorder:!1},a=await fs.createAppSettings(i);e({appSettings:a}),console.log(" App settings initialized successfully")}catch(r){console.error(" Failed to initialize app settings:",r);const i=n();e({appSettings:{id:"local-settings",userId:i,theme:"system",enableMoveableReorder:!1}})}}});class hr{static instance;static getInstance(){return hr.instance||(hr.instance=new hr),hr.instance}async getMonthlyBudget(t,n){try{const r=dn(Ve,"monthlyBudgets",`${t}_${n}`),i=await JK(r);if(i.exists()){const a=i.data();return{id:a.id,userId:a.userId,month:a.month,totalIncome:parseFloat(a.totalIncome),availableToBudget:parseFloat(a.availableToBudget),createdAt:a.createdAt.toDate().toISOString(),updatedAt:a.updatedAt.toDate().toISOString()}}return null}catch(r){throw console.error("Error getting monthly budget:",r),r}}async createOrUpdateMonthlyBudget(t){try{const n=Se.now(),r=`${t.userId}_${t.month}`,i={id:r,userId:t.userId,month:t.month,totalIncome:t.totalIncome.toString(),availableToBudget:t.availableToBudget.toString(),createdAt:n,updatedAt:n};return await Ao(dn(Ve,"monthlyBudgets",r),i),{...t,id:r,createdAt:n.toDate().toISOString(),updatedAt:n.toDate().toISOString()}}catch(n){throw console.error("Error creating/updating monthly budget:",n),n}}async getIncomeSources(t,n){try{const r=Yi(wa(Ve,"incomeSources"),vo("userId","==",t),vo("month","==",n));return(await Pu(r)).docs.map(a=>{const o=a.data();return{id:o.id,userId:o.userId,month:o.month,name:o.name,amount:parseFloat(o.amount),frequency:o.frequency,category:o.category,createdAt:o.createdAt.toDate().toISOString(),updatedAt:o.updatedAt.toDate().toISOString()}}).sort((a,o)=>new Date(a.createdAt).getTime()-new Date(o.createdAt).getTime())}catch(r){throw console.error("Error getting income sources:",r),r}}async createIncomeSource(t){try{const n=Se.now(),r=dn(wa(Ve,"incomeSources")),i={id:r.id,userId:t.userId,month:t.month,name:t.name,amount:t.amount.toString(),frequency:t.frequency||"monthly",...t.category&&{category:t.category},createdAt:n,updatedAt:n};return await Ao(r,i),{...t,frequency:t.frequency||"monthly",id:r.id,createdAt:n.toDate().toISOString(),updatedAt:n.toDate().toISOString()}}catch(n){throw console.error("Error creating income source:",n),n}}async getEnvelopeAllocations(t,n){try{const r=Yi(wa(Ve,"envelopeAllocations"),vo("userId","==",t),vo("month","==",n));return(await Pu(r)).docs.map(a=>{const o=a.data();return{id:o.id,userId:o.userId,envelopeId:o.envelopeId,month:o.month,budgetedAmount:parseFloat(o.budgetedAmount),createdAt:o.createdAt.toDate().toISOString(),updatedAt:o.updatedAt.toDate().toISOString()}}).sort((a,o)=>new Date(a.createdAt).getTime()-new Date(o.createdAt).getTime())}catch(r){throw console.error("Error getting envelope allocations:",r),r}}async createEnvelopeAllocation(t){try{const n=Se.now(),r=dn(wa(Ve,"envelopeAllocations")),i={id:r.id,userId:t.userId,envelopeId:t.envelopeId,month:t.month,budgetedAmount:t.budgetedAmount.toString(),createdAt:n,updatedAt:n};return await Ao(r,i),{...t,id:r.id,createdAt:n.toDate().toISOString(),updatedAt:n.toDate().toISOString()}}catch(n){throw console.error("Error creating envelope allocation:",n),n}}async copyMonthData(t,n,r){try{const i=await this.getIncomeSources(t,n);for(const d of i)await this.createIncomeSource({...d,month:r});const a=await this.getEnvelopeAllocations(t,n);for(const d of a)await this.createEnvelopeAllocation({...d,month:r});const o=i.reduce((d,h)=>d+h.amount,0),c=a.reduce((d,h)=>d+h.budgetedAmount,0),u=o-c;await this.createOrUpdateMonthlyBudget({userId:t,month:r,totalIncome:o,availableToBudget:u})}catch(i){throw console.error("Error copying month data:",i),i}}async deleteIncomeSource(t){try{const n=dn(Ve,"incomeSources",t);await Vu(n)}catch(n){throw console.error("Error deleting income source:",n),n}}async updateIncomeSource(t,n){try{const r=dn(Ve,"incomeSources",t),i={...n,updatedAt:Se.now()};await Ao(r,i,{merge:!0})}catch(r){throw console.error("Error updating income source:",r),r}}async deleteEnvelopeAllocation(t){try{const n=dn(Ve,"envelopeAllocations",t);await Vu(n)}catch(n){throw console.error("Error deleting envelope allocation:",n),n}}async updateEnvelopeAllocation(t,n){try{const r=dn(Ve,"envelopeAllocations",t),i={...n,updatedAt:Se.now()};await Ao(r,i,{merge:!0})}catch(r){throw console.error("Error updating envelope allocation:",r),r}}async clearMonthData(t,n){try{const[r,i]=await Promise.all([this.getIncomeSources(t,n),this.getEnvelopeAllocations(t,n)]),a=r.map(c=>this.deleteIncomeSource(c.id)),o=i.map(c=>this.deleteEnvelopeAllocation(c.id));await Promise.all([...a,...o]),await this.createOrUpdateMonthlyBudget({userId:t,month:n,totalIncome:0,availableToBudget:0})}catch(r){throw console.error("Error clearing month data:",r),r}}async calculateAvailableToBudget(t,n){try{const r=await this.getIncomeSources(t,n),i=await this.getEnvelopeAllocations(t,n),a=r.reduce((c,u)=>c+u.amount,0),o=i.reduce((c,u)=>c+u.budgetedAmount,0);return a-o}catch(r){throw console.error("Error calculating available to budget:",r),r}}subscribeToMonthlyBudget(t,n,r){const i=dn(Ve,"monthlyBudgets",`${t}_${n}`);return Fl(i,a=>{if(a.exists()){const o=a.data();r(o)}else r(null)})}subscribeToIncomeSources(t,n,r){const i=Yi(wa(Ve,"incomeSources"),vo("userId","==",t),vo("month","==",n));return Fl(i,a=>{const o=a.docs.map(c=>({id:c.id,...c.data()})).sort((c,u)=>{const d=c.createdAt?.toDate?.()?.getTime()||0,h=u.createdAt?.toDate?.()?.getTime()||0;return d-h});r(o)})}subscribeToEnvelopeAllocations(t,n,r){const i=Yi(wa(Ve,"envelopeAllocations"),vo("userId","==",t),vo("month","==",n));return Fl(i,a=>{const o=a.docs.map(c=>({id:c.id,...c.data()}));r(o)})}}const sQ=e=>e?{id:e.id,userId:e.userId,month:e.month,totalIncome:parseFloat(e.totalIncome),availableToBudget:parseFloat(e.availableToBudget),createdAt:e.createdAt?.toDate?.()?e.createdAt.toDate().toISOString():e.createdAt||new Date().toISOString(),updatedAt:e.updatedAt?.toDate?.()?e.updatedAt.toDate().toISOString():e.updatedAt||new Date().toISOString()}:null,oQ=e=>({id:e.id,userId:e.userId,month:e.month,name:e.name,amount:parseFloat(e.amount),frequency:e.frequency,category:e.category,createdAt:e.createdAt?.toDate?.()?e.createdAt.toDate().toISOString():e.createdAt||new Date().toISOString(),updatedAt:e.updatedAt?.toDate?.()?e.updatedAt.toDate().toISOString():e.updatedAt||new Date().toISOString()}),lQ=e=>({id:e.id,userId:e.userId,envelopeId:e.envelopeId,month:e.month,budgetedAmount:parseFloat(e.budgetedAmount),createdAt:e.createdAt?.toDate?.()?e.createdAt.toDate().toISOString():e.createdAt||new Date().toISOString(),updatedAt:e.updatedAt?.toDate?.()?e.updatedAt.toDate().toISOString():e.updatedAt||new Date().toISOString()}),I1=(e,t,n)=>{if(window.__monthlyBudgetUnsubscribers){console.log(" Monthly budget real-time subscriptions already active, skipping setup");return}console.log(" Setting up monthly budget real-time Firebase subscriptions for month:",n);const r=hr.getInstance(),i=r.subscribeToMonthlyBudget(t,n,c=>{const u=e.getState();if(u.isOnline&&!u.pendingSync&&!u.resetPending){console.log(" Real-time sync: Monthly budget updated",c?"found":"null");const d=sQ(c);e.setState({monthlyBudget:d})}}),a=r.subscribeToIncomeSources(t,n,c=>{const u=e.getState();if(u.isOnline&&!u.pendingSync&&!u.resetPending){const d=c.map(oQ),h=new Set,g=d.filter(m=>h.has(m.id)?!1:(h.add(m.id),!0));e.setState({incomeSources:g})}}),o=r.subscribeToEnvelopeAllocations(t,n,c=>{const u=e.getState();if(u.isOnline&&!u.pendingSync&&!u.resetPending){console.log(" Real-time sync: Envelope allocations updated",c.length);const d=c.map(lQ);e.setState({envelopeAllocations:d})}});window.__monthlyBudgetUnsubscribers={monthlyBudget:i,incomeSources:a,envelopeAllocations:o},console.log(" Monthly budget real-time subscriptions active for month:",n)},hD=()=>{if(window.__monthlyBudgetUnsubscribers){const e=window.__monthlyBudgetUnsubscribers;e.monthlyBudget&&e.monthlyBudget(),e.incomeSources&&e.incomeSources(),e.envelopeAllocations&&e.envelopeAllocations(),delete window.__monthlyBudgetUnsubscribers,console.log(" Cleaned up monthly budget Firebase subscriptions")}},cQ=e=>{const{useMonthlyBudgetStore:t,useAuthStore:n,getCurrentUserId:r}=e;if(typeof window>"u")return;window.addEventListener("online",async()=>{console.log(" Browser online event detected"),await t.getState().updateOnlineStatus();const u=t.getState();u.isOnline&&(u.pendingSync||u.resetPending)&&(console.log(" Auto-syncing pending operations..."),u.syncData())}),window.addEventListener("offline",()=>{console.log(" Browser offline event detected"),t.setState({isOnline:!1})}),setTimeout(()=>{t.getState().updateOnlineStatus()},1e3);let i=null;const a=()=>{i&&clearInterval(i),i=setInterval(async()=>{const u=t.getState();if(!u.isOnline&&!u.testingConnectivity){console.log(" Periodic offline retry: testing connectivity..."),t.setState({testingConnectivity:!0});try{await(async()=>(await t.getState().updateOnlineStatus(),t.getState().isOnline))()?(console.log(" Periodic retry succeeded - back online!"),t.setState({isOnline:!0,testingConnectivity:!1}),(u.pendingSync||u.resetPending)&&t.getState().syncData(),i&&(clearInterval(i),i=null)):t.setState({testingConnectivity:!1})}catch(d){console.log(" Periodic retry failed:",d),t.setState({testingConnectivity:!1})}}else u.isOnline&&i&&(clearInterval(i),i=null)},3e4)};a(),t.subscribe(u=>{!u.isOnline&&!i&&(console.log(" Starting periodic connectivity retry"),a())});let o=null;t.subscribe(u=>{if(o!==null&&u.currentMonth!==o){console.log(" Month changed from",o,"to",u.currentMonth),hD();const d=n.getState();d.isAuthenticated&&d.currentUser&&I1(t,r(),u.currentMonth)}o=u.currentMonth});const c=n.getState();if(c.isAuthenticated&&c.currentUser){console.log(" User already authenticated on app load, setting up monthly budget real-time subscriptions");const u=t.getState().currentMonth;I1(t,r(),u)}n.subscribe(u=>{if(u.isAuthenticated&&u.currentUser){console.log(" User authenticated, setting up monthly budget real-time subscriptions");const d=t.getState().currentMonth;I1(t,r(),d)}else!u.isAuthenticated&&!u.isLoading&&(console.log(" User logged out, clearing monthly budget data and unsubscribing"),hD(),t.getState().handleUserLogout())})},uQ=()=>{const e=new Date;return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}`},us=()=>{const e=Ni.getState().currentUser;if(!e)throw new Error("User not authenticated");return e.id},fQ=us,dQ=async(e,t,n)=>{const{transactions:r,addTransaction:i,deleteTransaction:a}=Gn.getState(),o="Monthly Budget Allocation",[c,u]=n.split("-").map(Number);console.log(" Syncing budget allocation transaction:",{envelopeId:e,budgetedAmount:t,month:n,totalTransactions:r.length});const d=r.filter(g=>{if(g.envelopeId!==e||g.description!==o)return!1;try{let m;if(typeof g.date=="string")m=new Date(g.date);else if(g.date?.toDate&&typeof g.date.toDate=="function")m=g.date.toDate();else return!1;return m.getFullYear()===c&&m.getMonth()+1===u}catch{return!1}});console.log(" Found existing transactions:",d.length);for(const g of d)console.log(" Deleting old allocation transaction:",g.id,"amount:",g.amount),await a(g.id);const h=new Gr(t.toString()||"0");if(h.gt(0)){console.log(" Creating new allocation transaction with amount",h.toNumber());const g=new Date(c,u-1,2).toISOString();await i({description:o,amount:h.toNumber(),envelopeId:e,date:g,type:"Income",reconciled:!0})}else console.log(" No new transaction needed (amount is 0)")},ks=sv()(M_((e,t)=>({currentMonth:uQ(),monthlyBudget:null,incomeSources:[],envelopeAllocations:[],isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1,testingConnectivity:!1,setCurrentMonth:n=>{e({currentMonth:n,isLoading:!0}),t().fetchMonthlyData()},fetchMonthlyData:async()=>{try{e({isLoading:!0,error:null});const n=us(),r=t().currentMonth,i=hr.getInstance(),[a,o,c]=await Promise.all([i.getMonthlyBudget(n,r),i.getIncomeSources(n,r),i.getEnvelopeAllocations(n,r)]);e({monthlyBudget:a,incomeSources:o,envelopeAllocations:c,isLoading:!1}),await t().processMonthlyPiggybankContributions(r)}catch(n){console.error("Error fetching monthly data:",n),e({error:n instanceof Error?n.message:"Failed to fetch monthly data",isLoading:!1})}},createIncomeSource:async n=>{try{const r=us(),i=t().currentMonth,a=hr.getInstance();await a.createIncomeSource({...n,userId:r,month:i});const o=await a.getIncomeSources(r,i);e({incomeSources:o})}catch(r){throw console.error("Error creating income source:",r),r}},updateIncomeSource:async(n,r)=>{try{const i={updatedAt:Se.now()};r.name!==void 0&&(i.name=r.name),r.amount!==void 0&&(i.amount=r.amount.toString()),r.frequency!==void 0&&(i.frequency=r.frequency),r.category!==void 0&&(i.category=r.category);const a=dn(Ve,"incomeSources",n);await Oh(a,i);const o=hr.getInstance(),c=us(),u=t().currentMonth,d=await o.getIncomeSources(c,u);e({incomeSources:d})}catch(i){throw console.error("Error updating income source:",i),i}},deleteIncomeSource:async n=>{e(i=>({incomeSources:i.incomeSources.filter(a=>a.id!==n)})),hr.getInstance().deleteIncomeSource(n).catch(i=>{console.error("Error deleting income source from Firebase:",i)})},restoreIncomeSource:async(n,r)=>{try{e(i=>{const a=[...i.incomeSources];return r!==void 0&&r>=0&&r<=a.length?a.splice(r,0,n):a.push(n),{incomeSources:a}}),await t().refreshAvailableToBudget()}catch(i){throw console.error("Error restoring income source:",i),i}},createEnvelopeAllocation:async n=>{try{const r=us(),i=t().currentMonth,a=hr.getInstance();await a.createEnvelopeAllocation({...n,userId:r,month:i});const o=await a.getEnvelopeAllocations(r,i);e({envelopeAllocations:o})}catch(r){throw console.error("Error creating envelope allocation:",r),r}},updateEnvelopeAllocation:async(n,r)=>{try{const i=us(),a=t().currentMonth,o=hr.getInstance(),c={};r.envelopeId!==void 0&&(c.envelopeId=r.envelopeId),r.budgetedAmount!==void 0&&(c.budgetedAmount=r.budgetedAmount.toString()),await o.updateEnvelopeAllocation(n,c);const u=await o.getEnvelopeAllocations(i,a);e({envelopeAllocations:u})}catch(i){throw console.error("Error updating envelope allocation:",i),i}},deleteEnvelopeAllocation:async n=>{e(i=>({envelopeAllocations:i.envelopeAllocations.filter(a=>a.id!==n)})),hr.getInstance().deleteEnvelopeAllocation(n).catch(i=>{console.error("Error deleting envelope allocation from Firebase:",i)})},restoreEnvelopeAllocation:async(n,r)=>{try{e(i=>{const a=[...i.envelopeAllocations];return r!==void 0&&r>=0&&r<=a.length?a.splice(r,0,n):a.push(n),{envelopeAllocations:a}}),await t().refreshAvailableToBudget()}catch(i){throw console.error("Error restoring envelope allocation:",i),i}},setEnvelopeAllocation:async(n,r)=>{try{console.log(" setEnvelopeAllocation called:",{envelopeId:n,budgetedAmount:r});const i=t().envelopeAllocations.find(o=>o.envelopeId===n);console.log(" Existing allocation:",i),i?(console.log(" Updating existing allocation..."),await t().updateEnvelopeAllocation(i.id,{budgetedAmount:r}),console.log(" Allocation updated")):(console.log(" Creating new allocation..."),await t().createEnvelopeAllocation({envelopeId:n,budgetedAmount:r}),console.log(" Allocation created")),console.log(" Syncing budget allocation transaction...");const a=t().currentMonth;await dQ(n,r,a),console.log(" Transaction synced"),console.log(" Refreshing available to budget..."),await t().refreshAvailableToBudget(),console.log(" Available to budget refreshed")}catch(i){throw console.error(" Error setting envelope allocation:",i),console.error("Error details:",i instanceof Error?i.message:i),i}},copyFromPreviousMonth:async()=>{try{e({isLoading:!0,error:null});const n=us(),r=t().currentMonth,[i,a]=r.split("-").map(Number);let o=i,c=a-1;c<1&&(o=i-1,c=12);const u=`${o}-${c.toString().padStart(2,"0")}`,d=hr.getInstance(),[h,g]=await Promise.all([d.getIncomeSources(n,u),d.getEnvelopeAllocations(n,u)]);for(const m of h)await t().createIncomeSource({name:m.name,amount:m.amount});for(const m of g)await t().setEnvelopeAllocation(m.envelopeId,m.budgetedAmount);await t().processMonthlyPiggybankContributions(r),await t().fetchMonthlyData()}catch(n){console.error("Error copying from previous month:",n),e({error:n instanceof Error?n.message:"Failed to copy month data",isLoading:!1})}},processMonthlyPiggybankContributions:async n=>{try{console.log(" Processing piggybank contributions for month:",n);const{envelopes:r,transactions:i,addTransaction:a}=Gn.getState(),o=new Date,c=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}`;if(n>c){console.log(`Skipping piggybank contributions for ${n} - future month beyond ${c}`);return}const u=r.filter(g=>g.isPiggybank&&g.isActive);if(console.log(`Found ${u.length} active piggybanks`),u.length===0){console.log("No piggybanks to process");return}const[d,h]=n.split("-").map(Number);for(const g of u){const m=g.piggybankConfig?.monthlyContribution||0;if(g.piggybankConfig?.paused||!1){console.log(`Skipping ${g.name} - contributions paused`);continue}if(m<=0){console.log(`Skipping ${g.name} - no contribution set`);continue}if(g.createdAt){const E=new Date(g.createdAt),T=`${E.getFullYear()}-${String(E.getMonth()+1).padStart(2,"0")}`;if(n<T){console.log(`Skipping ${g.name} - month ${n} is before creation month ${T}`);continue}}if(i.find(E=>E.envelopeId===g.id&&E.isAutomatic===!0&&E.month===n&&E.type==="Income")){console.log(`Auto-contribution already exists for ${g.name} in ${n}`);continue}console.log(`Creating auto-contribution for ${g.name}: $${m}`);const w=new Date(d,h-1,1,12,0,0);await a({amount:m,description:`Monthly contribution to ${g.name}`,date:w.toISOString(),envelopeId:g.id,type:"Income",reconciled:!1,isAutomatic:!0}),console.log(` Created auto-contribution for ${g.name}`)}await t().refreshAvailableToBudget()}catch(r){throw console.error("Error processing piggybank contributions:",r),r}},calculateAvailableToBudget:()=>{const n=t(),r=n.incomeSources.reduce((a,o)=>a+o.amount,0),i=n.envelopeAllocations.reduce((a,o)=>a+o.budgetedAmount,0);return r-i},refreshAvailableToBudget:async()=>{try{const n=t(),r=us(),i=n.currentMonth,a=n.incomeSources.reduce((h,g)=>h+g.amount,0),o=n.envelopeAllocations.reduce((h,g)=>h+g.budgetedAmount,0),c=a-o,u=hr.getInstance(),d=n.monthlyBudget;if(d){const h={...d,availableToBudget:c,totalIncome:a};await u.createOrUpdateMonthlyBudget(h),e({monthlyBudget:h})}else{const h=await u.createOrUpdateMonthlyBudget({userId:r,month:i,totalIncome:a,availableToBudget:c});e({monthlyBudget:h})}}catch(n){console.error("Error refreshing available to budget:",n)}},loadDemoData:(n,r)=>{e({incomeSources:n,envelopeAllocations:r,isLoading:!1})},clearMonthData:async()=>{try{const n=us(),r=t().currentMonth,i=hr.getInstance(),{transactions:a,deleteTransaction:o}=Gn.getState(),c="Monthly Budget Allocation",[u,d]=r.split("-").map(Number),h=a.filter(g=>{if(g.description!==c)return!1;try{const m=new Date(g.date);return m.getFullYear()===u&&m.getMonth()+1===d}catch{return!1}});for(const g of h)await o(g.id);await i.clearMonthData(n,r),e({incomeSources:[],envelopeAllocations:[]}),await t().refreshAvailableToBudget()}catch(n){throw console.error("Error clearing month data:",n),n}},updateOnlineStatus:async()=>{console.log("Monthly budget updateOnlineStatus called")},syncData:async()=>{console.log("Monthly budget syncData called")},handleUserLogout:()=>{e({monthlyBudget:null,incomeSources:[],envelopeAllocations:[],isLoading:!1,error:null,pendingSync:!1,resetPending:!1,testingConnectivity:!1})}}),{name:"monthly-budget-store",version:1,partialize:e=>({})}));cQ({useMonthlyBudgetStore:ks,useAuthStore:Ni,getCurrentUserId:fQ});const hQ=({set:e,get:t,getCurrentUserId:n,isNetworkError:r})=>({addTransaction:async i=>{const a=`temp-${Date.now()}-${Math.random()}`,o=n(),c=new Date(i.date),u=`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}`;console.log(" Month calculation in addTransaction:",{originalDate:i.date,dateObj:c,calculatedMonth:u,currentMonth:ks.getState().currentMonth});const d={...i,id:a,userId:o,month:u};if(e(h=>({transactions:[...h.transactions,d],isLoading:!0})),i.envelopeId.startsWith("temp-"))console.log(` Skipping Firebase sync for transaction with temp envelopeId: ${i.envelopeId}`),e({isLoading:!1,pendingSync:!0});else try{const h=nQ(d,o),g=await Ca.addTransaction(h);console.log(` Replacing temp transaction ${a} with Firebase transaction:`,g);const m=kS(g);e(b=>({transactions:b.transactions.map(S=>S.id===a?m:S),isLoading:!1,pendingSync:!1}))}catch(h){console.error("Add Transaction Failed:",h),r(h)?e({isLoading:!1,pendingSync:!0,error:null}):e(g=>({transactions:g.transactions.filter(m=>m.id!==a),error:h.message,isLoading:!1}))}},deleteTransaction:async i=>{const a=t().transactions.find(c=>c.id===i);if(!a)return;const o=[i];if(a.transferId){const c=t().transactions.find(u=>u.transferId===a.transferId&&u.id!==i);c&&c.id&&o.push(c.id)}e(c=>({transactions:c.transactions.filter(u=>u.id&&!o.includes(u.id)),isLoading:!0}));try{const c=n(),u=o.filter(d=>!d.startsWith("temp-"));for(const d of u)console.log(` About to delete transaction ID: ${d}`),await Ca.deleteTransaction(c,d),console.log(` Deleted transaction ID: ${d}`);console.log(" All transaction deletions completed"),e({isLoading:!1})}catch(c){if(console.error("Delete Transaction Failed:",c),r(c))e({isLoading:!1,pendingSync:!0,error:null});else{const u=o.map(d=>t().transactions.find(h=>h.id===d)||a).filter(Boolean);e(d=>({transactions:[...d.transactions,...u],error:c.message,isLoading:!1}))}}},updateTransaction:async i=>{console.log(" updateTransaction called:",i),e(a=>({transactions:a.transactions.map(o=>o.id===i.id?i:o),isLoading:!0}));try{const a=n(),o=Ca.updateTransaction(a,i.id,rQ(i)),c=new Promise((u,d)=>setTimeout(()=>d(new Error("Firebase timeout - likely offline")),5e3));await Promise.race([o,c]),console.log(" Transaction updated in Firebase"),e({isLoading:!1})}catch(a){console.error("Update Transaction Failed:",a),console.log(" Error details:",{name:a?.name||"Unknown",message:a?.message||"Unknown",code:a?.code||"Unknown",isNetworkError:r(a)}),r(a)?(console.log(" Treating as offline scenario - keeping local transaction update"),e({isLoading:!1,pendingSync:!0,error:null})):e({error:a.message,isLoading:!1})}},restoreTransaction:async i=>{e(a=>({transactions:[...a.transactions,i],isLoading:!0}));try{e({isLoading:!1})}catch(a){console.error("Restore Transaction Failed:",a),e({error:a.message,isLoading:!1})}}}),pQ=({set:e,get:t,getCurrentUserId:n,isNetworkError:r,loadFallbackData:i,checkOnlineStatus:a,clearUserData:o})=>{const c=async()=>{const w=t(),E=n();if(w.resetPending){console.log(" fetchData: Reset pending detected, performing Firebase reset instead..."),await t().performFirebaseReset();return}console.log(" fetchData: Starting data fetch for user:",E),e({isLoading:!0,error:null});try{let T,D,I,M;[T,D,I,M]=await Promise.all([Ea.getAllEnvelopes(E).catch(A=>(console.error(" Failed to fetch envelopes:",A),[])),Ca.getAllTransactions(E).catch(A=>(console.error(" Failed to fetch transactions:",A),[])),si.getAllDistributionTemplates(E).catch(A=>(console.error(" Failed to fetch templates:",A),[])),fs.getAppSettings(E).catch(A=>(console.error(" Failed to fetch settings:",A),null))]),console.log(" fetchData: Firebase calls completed"),console.log(" Fetched data counts:",{envelopes:T?.length||0,transactions:D?.length||0,templates:I?.length||0,settings:M?"found":"null"}),t().markOnlineFromFirebaseSuccess();const z=(T?.length||0)>0||(D?.length||0)>0||(I?.length||0)>0;let P=null;z||(console.log(" No data from Firebase, loading fallback data..."),P=await i(),P&&(console.log(" Using fallback data for initialization"),T=P.envelopes||[],D=P.transactions||[],I=P.distributionTemplates||[],M=P.appSettings||null)),e(A=>{const C=X=>X.map(U=>({...U,date:U.date&&typeof U.date=="object"&&U.date.toDate?U.date.toDate().toISOString():U.date,type:U.type==="income"?"Income":U.type==="expense"?"Expense":U.type==="transfer"?"Transfer":U.type,amount:typeof U.amount=="string"?parseFloat(U.amount):U.amount})),k=X=>({id:X.id,name:X.name,currentBalance:X.currentBalance||0,lastUpdated:X.lastUpdated,isActive:X.isActive??!0,orderIndex:X.orderIndex??0,createdAt:X.createdAt,isPiggybank:X.isPiggybank,piggybankConfig:X.piggybankConfig}),j=T.filter(X=>!("orderIndex"in X));j.length>0&&(console.log(` Migrating ${j.length} envelopes to add orderIndex...`),j.forEach((X,U)=>{const Z=U,rt=n();Ea.saveEnvelope(rt,{...X,orderIndex:Z}).then(()=>console.log(` Migrated envelope ${X.name} with orderIndex ${Z}`)).catch(st=>console.warn(`Failed to migrate envelope ${X.id}:`,st))}));const L=T.map(k),B=new Set([...A.envelopes.map(X=>X.id),...T.map(X=>X.id)]),V=A.envelopes.filter(X=>X.id&&!T.some(U=>U.id===X.id)&&!X.id.startsWith("temp-")),K=A.transactions.filter(X=>X.id&&!D.some(U=>U.id===X.id)&&(!X.id.startsWith("temp-")||B.has(X.envelopeId)));let Y,H=[];navigator.onLine?(Y=I,console.log(` Online mode: Using Firebase templates only (${Y.length} templates)`)):(H=A.distributionTemplates.filter(X=>X.id&&!I.some(U=>U.id===X.id)),Y=I.concat(H),console.log(` Offline mode: Merged ${I.length} Firebase + ${H.length} local templates`)),console.log(" fetchData merge details:"),console.log("  Store envelopes:",A.envelopes.map(X=>({id:X.id,name:X.name}))),console.log("  Firebase envelopes:",T.map(X=>({id:X.id,name:X.name}))),console.log("  Store transactions:",A.transactions.map(X=>({id:X.id,envelopeId:X.envelopeId,description:X.description}))),console.log("  Firebase transactions:",D.map(X=>({id:X.id,envelopeId:X.envelopeId,description:X.description}))),console.log("  Store templates:",A.distributionTemplates.map(X=>({id:X.id,name:X.name}))),console.log("  Firebase templates:",I.map(X=>({id:X.id,name:X.name}))),console.log("  Local-only envelopes:",V.map(X=>({id:X.id,name:X.name}))),console.log("  Local-only transactions:",K.map(X=>({id:X.id,envelopeId:X.envelopeId,description:X.description}))),console.log("  Local-only templates:",H.map(X=>({id:X.id,name:X.name}))),console.log("  Total merged templates:",Y.length,Y.map(X=>({id:X.id,name:X.name})));const $=L.concat(V),et=C(D).concat(K);let at=M;if(M&&"isDarkMode"in M&&!("theme"in M)){const X=M;if(at={...X,theme:X.isDarkMode?"dark":"light"},delete at.isDarkMode,at&&at.id){const U=n();fs.updateAppSettings(U,at.id,{theme:at.theme}).catch(Z=>console.warn("Failed to migrate app settings:",Z))}}return{envelopes:$,transactions:et,distributionTemplates:Y,appSettings:at,isLoading:!1,pendingSync:!1}})}catch(T){console.error("Sync Failed:",T),r(T)?e({isLoading:!1,pendingSync:!0}):e({error:T.message,isLoading:!1})}},u=async()=>{if(!t().isOnline)return;if(t().resetPending){console.log(" Sync detected pending reset - performing Firebase reset..."),e({pendingSync:!0});try{await t().performFirebaseReset(),console.log(" Pending reset completed during sync")}catch(E){console.error("Firebase reset during sync failed:",E)}return}e({pendingSync:!0});try{await t().fetchData()}catch(E){console.error("Manual sync failed:",E)}},d=async()=>{const w=await a();e({isOnline:w})},h=()=>{t().isOnline||(console.log(" Firebase operation succeeded - marking as online"),e({isOnline:!0}))},g=()=>{o()},m=async w=>{try{if(!w.envelopes||!w.transactions)return{success:!1,message:"Invalid backup format: Missing core data."};const E=n();console.log(` Importing data for user: ${E}`),console.log(" Clearing existing Firebase data before import..."),await b(),e({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,error:null,pendingSync:!0,isLoading:!0}),console.log(" Local state cleared before import");const T=w.envelopes.map(A=>({id:A.id||`imported-${Date.now()}-${Math.random()}`,name:A.name,currentBalance:A.currentBalance||A.budget||0,lastUpdated:new Date().toISOString(),isActive:A.isActive??!0,orderIndex:A.orderIndex??0,userId:E})),D=w.transactions.map(A=>({...A,id:A.id||`imported-${Date.now()}-${Math.random()}`,userId:E,date:A.date,amount:typeof A.amount=="number"?A.amount:parseFloat(A.amount)||0,type:A.type,reconciled:A.reconciled??!1})),I=(w.distributionTemplates||[]).map(A=>({...A,id:A.id||`imported-${Date.now()}-${Math.random()}`,userId:E})),M=w.appSettings?{...w.appSettings,id:w.appSettings.id||`settings-${E}`,userId:E}:null;console.log(` Importing: ${T.length} envelopes, ${D.length} transactions, ${I.length} templates`),e({envelopes:T,transactions:D,distributionTemplates:I,appSettings:M,error:null,pendingSync:!0});try{console.log(" Syncing imported data to Firebase...");for(const A of T)try{await Ea.saveEnvelope(E,A),console.log(` Synced envelope: ${A.name}`)}catch(C){console.error(` Failed to sync envelope ${A.name}:`,C)}for(const A of D)try{const C={...A,amount:A.amount.toString(),type:A.type.toLowerCase(),date:Se.fromDate(new Date(A.date))};await Ca.addTransaction(C),console.log(` Synced transaction: ${A.description}`)}catch(C){console.error(` Failed to sync transaction ${A.description}:`,C)}for(const A of I)try{await si.createDistributionTemplate(A),console.log(` Synced template: ${A.name}`)}catch(C){console.error(` Failed to sync template ${A.name}:`,C)}if(M)try{await fs.createAppSettings(M),console.log(" Synced app settings")}catch(A){console.error(" Failed to sync app settings:",A)}console.log(" All imported data synced to Firebase"),e({pendingSync:!1,isLoading:!1})}catch(A){console.error(" Error syncing to Firebase:",A),e({pendingSync:!0})}const z=I.length,P=M?"Settings imported.":"";return{success:!0,message:`Imported and synced ${T.length} envelopes, ${D.length} transactions${z>0?`, ${z} templates`:""} to Firebase.${P?` ${P}`:""}`}}catch(E){return console.error("Import failed:",E),{success:!1,message:"Failed to import data. Check file format."}}},b=async()=>{console.log(" performFirebaseReset: Starting complete Firebase reset..."),e({isLoading:!0});try{const w=n();console.log(" Querying Firebase for all data to delete...");const[E,T,D,I]=await Promise.all([Ea.getAllEnvelopes(w).catch(A=>(console.error(" Failed to fetch envelopes for reset:",A),[])),Ca.getAllTransactions(w).catch(A=>(console.error(" Failed to fetch transactions for reset:",A),[])),si.getAllDistributionTemplates(w).catch(A=>(console.error(" Failed to fetch templates for reset:",A),[])),fs.getAppSettings(w).catch(A=>(console.error(" Failed to fetch settings for reset:",A),null))]);console.log(` Found in Firebase: ${E.length} envelopes, ${T.length} transactions, ${D.length} templates`);let M=0;for(const A of E)if(A.id)try{await Ea.deleteEnvelope(w,A.id),M++,console.log(` Deleted envelope: ${A.name||A.id}`)}catch(C){console.error(` Failed to delete envelope ${A.id}:`,C)}let z=0;for(const A of T)if(A.id)try{await Ca.deleteTransaction(w,A.id),z++,console.log(` Deleted transaction: ${A.id}`)}catch(C){console.error(` Failed to delete transaction ${A.id}:`,C)}let P=0;for(const A of D)if(A.id)try{await si.deleteDistributionTemplate(w,A.id),P++,console.log(` Deleted template: ${A.name||A.id}`)}catch(C){console.error(` Failed to delete template ${A.id}:`,C)}if(I?.id)try{await fs.deleteAppSettings(w,I.id),console.log(" Deleted app settings")}catch(A){console.error(" Failed to delete app settings:",A)}console.log(` Firebase reset complete: Deleted ${M} envelopes, ${z} transactions, ${P} templates`),e({resetPending:!1,isLoading:!1,pendingSync:!1})}catch(w){throw console.error(" Error during Firebase reset:",w),e({isLoading:!1,pendingSync:!0}),w}};return{fetchData:c,syncData:u,updateOnlineStatus:d,markOnlineFromFirebaseSuccess:h,handleUserLogout:g,importData:m,performFirebaseReset:b,resetData:async()=>{if(console.log(" Starting complete data reset (offline-first)..."),e({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,error:null,resetPending:!0,isLoading:!0}),console.log(" Local state cleared immediately"),t().isOnline){console.log(" Online - performing Firebase reset immediately...");try{await t().performFirebaseReset(),console.log(" Firebase reset completed immediately")}catch(E){console.error(" Firebase reset failed, will retry on next sync:",E),e({isLoading:!1,pendingSync:!0})}}else console.log(" Offline - Firebase reset will be performed when connection is restored"),e({isLoading:!1,pendingSync:!0})}}},gQ=e=>kS(e),mQ=e=>({id:e.id,name:e.name||"",currentBalance:e.currentBalance||0,lastUpdated:e.lastUpdated,isActive:e.isActive??!0,orderIndex:e.orderIndex??0,userId:e.userId||void 0,createdAt:e.createdAt,isPiggybank:e.isPiggybank,piggybankConfig:e.piggybankConfig}),vQ=e=>({id:e.id,name:e.name||"",distributions:e.distributions||{},lastUsed:e.lastUsed?.toDate?.()?e.lastUsed.toDate().toISOString():e.lastUsed||new Date().toISOString(),note:e.note||"",userId:e.userId||void 0}),pD=(e,t)=>{if(window.__firebaseUnsubscribers){console.log(" Real-time subscriptions already active, skipping setup");return}console.log(" Setting up real-time Firebase subscriptions...");const n=Ea.subscribeToEnvelopes(t,o=>{const c=e.getState();if(c.isOnline&&!c.pendingSync&&!c.resetPending){console.log(" Real-time sync: Envelopes updated",o.length);const u=o.map(mQ);e.setState({envelopes:u})}}),r=Ca.subscribeToTransactions(t,o=>{const c=e.getState();if(c.isOnline&&!c.pendingSync&&!c.resetPending){console.log(" Real-time sync: Transactions updated",o.length);const u=o.map(gQ);e.setState({transactions:u})}}),i=si.subscribeToDistributionTemplates(t,o=>{const c=e.getState();if(c.isOnline&&!c.pendingSync&&!c.resetPending){console.log(" Real-time sync: Templates updated from Firebase",o.length),console.log(" Firebase templates:",o.map(d=>({id:d.id,name:d.name})));const u=o.map(vQ);console.log(" Setting store templates to:",u.map(d=>({id:d.id,name:d.name}))),e.setState({distributionTemplates:u})}else console.log(" Real-time sync: Skipping template update (offline or pending changes)")}),a=fs.subscribeToAppSettings(t,o=>{const c=e.getState();c.isOnline&&!c.pendingSync&&!c.resetPending&&(console.log(" Real-time sync: Settings updated",o?"found":"null"),e.setState({appSettings:o}))});window.__firebaseUnsubscribers={envelopes:n,transactions:r,templates:i,settings:a},console.log(" Real-time subscriptions active - cross-device sync enabled")},yQ=e=>{const{useEnvelopeStore:t,useAuthStore:n,getCurrentUserId:r}=e;if(typeof window>"u")return;window.addEventListener("online",async()=>{console.log(" Browser online event detected"),await t.getState().updateOnlineStatus();const c=t.getState();c.isOnline&&(c.pendingSync||c.resetPending)&&(console.log(" Auto-syncing pending operations..."),c.syncData())}),window.addEventListener("offline",()=>{console.log(" Browser offline event detected"),t.setState({isOnline:!1})}),setTimeout(()=>{t.getState().updateOnlineStatus()},1e3);let i=null;const a=()=>{i&&clearInterval(i),i=setInterval(async()=>{const c=t.getState();if(!c.isOnline&&!c.testingConnectivity){console.log(" Periodic offline retry: testing connectivity..."),t.setState({testingConnectivity:!0});try{await(async()=>(await t.getState().updateOnlineStatus(),t.getState().isOnline))()?(console.log(" Periodic retry succeeded - back online!"),t.setState({isOnline:!0,testingConnectivity:!1}),(c.pendingSync||c.resetPending)&&t.getState().syncData(),i&&(clearInterval(i),i=null)):t.setState({testingConnectivity:!1})}catch(u){console.log(" Periodic retry failed:",u),t.setState({testingConnectivity:!1})}}else c.isOnline&&i&&(clearInterval(i),i=null)},3e4)};a(),t.subscribe(c=>{!c.isOnline&&!i&&(console.log(" Starting periodic connectivity retry"),a())});const o=n.getState();o.isAuthenticated&&o.currentUser&&(console.log(" User already authenticated on app load, setting up real-time subscriptions"),pD(t,r())),n.subscribe(c=>{if(c.isAuthenticated&&c.currentUser)console.log(" User authenticated, setting up real-time subscriptions"),pD(t,r());else if(!c.isAuthenticated&&!c.isLoading){if(console.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const u=window.__firebaseUnsubscribers;u.envelopes&&u.envelopes(),u.transactions&&u.transactions(),u.templates&&u.templates(),u.settings&&u.settings(),delete window.__firebaseUnsubscribers,console.log(" Cleaned up Firebase subscriptions")}t.getState().handleUserLogout()}})},bQ=async()=>{try{console.log(" Attempting to load fallback data from backup file...");const e=await fetch("/HouseBudget_Backup_2025-11-25.json");if(e.ok){const t=await e.json();return console.log(" Loaded fallback data:",{envelopes:t.envelopes?.length||0,transactions:t.transactions?.length||0,templates:t.distributionTemplates?.length||0}),t}}catch(e){console.log(" Could not load fallback data:",e)}return null},Zc=()=>{const{currentUser:e}=Ni.getState();if(!e)throw new Error("No authenticated user found");return e.id},xQ=()=>{console.log(" Clearing user data on logout"),Gn.setState({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1})},gD=async()=>{if(typeof navigator>"u"||!navigator.onLine)return console.log(" Browser reports offline"),!1;const e=async(n,r={})=>{try{const i=new AbortController,a=setTimeout(()=>i.abort(),4e3);return await fetch(n,{method:"HEAD",mode:"no-cors",cache:"no-cache",signal:i.signal,...r}),clearTimeout(a),!0}catch(i){return console.log(` Connectivity test failed for ${n}:`,i instanceof Error?i.message:"Unknown error"),!1}},t=[e("https://httpbin.org/status/200",{method:"GET"}),e("https://www.cloudflare.com/favicon.ico"),e("https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"),e("https://www.google.com/favicon.ico")];console.log(" Testing connectivity with multiple endpoints...");try{const n=await Promise.allSettled(t),r=n.filter(a=>a.status==="fulfilled"&&a.value===!0).length,i=n.length;return r>0?(console.log(` Connectivity confirmed (${r}/${i} tests passed)`),!0):(console.log(` All connectivity tests failed (${i} tests)`),!1)}catch(n){return console.log(" Connectivity testing error:",n),!1}},Dg=e=>{const t=e?.code?.toLowerCase()||"",n=e?.message?.toLowerCase()||"",r=e?.name?.toLowerCase()||"";return!!(t==="unavailable"||t==="cancelled"||n.includes("network")||n.includes("offline")||n.includes("disconnected")||n.includes("connection")||n.includes("fetch")||n.includes("timeout")||n.includes("err_internet_disconnected")||n.includes("err_network_changed")||n.includes("err_connection_refused")||!navigator.onLine||r==="undefined"&&n==="undefined")},Gn=sv()(M_((e,t)=>{const n=iQ({set:e,get:t,getCurrentUserId:Zc,isNetworkError:Dg}),r=aQ({set:e,get:t,getCurrentUserId:Zc,isNetworkError:Dg}),i=J4({set:e,get:t,getCurrentUserId:Zc}),a=hQ({set:e,get:t,getCurrentUserId:Zc,isNetworkError:Dg}),o=pQ({set:e,get:t,getCurrentUserId:Zc,isNetworkError:Dg,loadFallbackData:bQ,checkOnlineStatus:gD,clearUserData:xQ});return{envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1,testingConnectivity:!1,addEnvelope:async c=>(await n.createEnvelope(c)).id,updateEnvelope:n.updateEnvelope,reorderEnvelopes:n.reorderEnvelopes,deleteEnvelope:n.deleteEnvelope,renameEnvelope:n.renameEnvelope,transferFunds:n.transferFunds,addTransaction:a.addTransaction,updateTransaction:a.updateTransaction,deleteTransaction:a.deleteTransaction,restoreTransaction:a.restoreTransaction,addDistributionTemplate:r.saveTemplate,updateDistributionTemplate:r.updateTemplate,deleteDistributionTemplate:r.deleteTemplate,removeEnvelopeFromTemplates:r.removeEnvelopeFromTemplates,cleanupOrphanedTemplates:r.cleanupOrphanedTemplates,updateAppSettings:i.updateAppSettings,initializeAppSettings:i.initializeAppSettings,fetchData:o.fetchData,syncData:o.syncData,updateOnlineStatus:o.updateOnlineStatus,markOnlineFromFirebaseSuccess:o.markOnlineFromFirebaseSuccess,handleUserLogout:o.handleUserLogout,importData:o.importData,performFirebaseReset:o.performFirebaseReset,resetData:o.resetData,getEnvelopeBalance:c=>{const u=t();if(!u.envelopes.find(E=>E.id===c))return console.log(` getEnvelopeBalance: Envelope ${c} not found`),new Gr(0);const h=u.transactions.filter(E=>E.envelopeId===c),g=h.filter(E=>E.type==="Expense"),m=h.filter(E=>E.type==="Income"),b=g.reduce((E,T)=>E.plus(new Gr(T.amount||0)),new Gr(0));return m.reduce((E,T)=>E.plus(new Gr(T.amount||0)),new Gr(0)).minus(b)},getTransactionsForMonth:c=>t().transactions.filter(d=>d.month===c),resetAllData:async()=>{console.log(" Resetting all data"),e({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1})},testConnectivity:async()=>{console.log(" Testing connectivity"),await gD()}}},{name:"envelope-storage",partialize:e=>({envelopes:e.envelopes,transactions:e.transactions,distributionTemplates:e.distributionTemplates,appSettings:e.appSettings})}));yQ({useEnvelopeStore:Gn,useAuthStore:Ni,getCurrentUserId:Zc});const _Q=({currentMonth:e,onMonthChange:t})=>{const[n,r]=e.split("-").map(Number),a=["January","February","March","April","May","June","July","August","September","October","November","December"][r-1],o=()=>{let d=n,h=r-1;h<1&&(d=n-1,h=12);const g=`${d}-${h.toString().padStart(2,"0")}`;t(g)},c=()=>{let d=n,h=r+1;h>12&&(d=n+1,h=1);const g=`${d}-${h.toString().padStart(2,"0")}`;t(g)},u=()=>{const d=new Date,h=`${d.getFullYear()}-${(d.getMonth()+1).toString().padStart(2,"0")}`;t(h)};return _.jsx("div",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 py-3",children:_.jsxs("div",{className:"flex items-center justify-between max-w-md mx-auto",children:[_.jsx("button",{onClick:o,className:"p-2 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Previous month",children:_.jsx(M5,{size:20})}),_.jsx("div",{className:"flex-1 text-center",children:_.jsxs("button",{onClick:u,className:"text-lg font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Click to go to current month",children:[a," ",n]})}),_.jsx("button",{onClick:c,className:"p-2 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Next month",children:_.jsx($c,{size:20})})]})})},SQ=({amount:e,totalIncome:t,totalAllocated:n,isLoading:r=!1})=>{const i=t>0?n/t*100:0,a=Math.abs(e)<.01,o=e<0,c=e>0,d=a?{icon:dx,color:"text-green-600 dark:text-emerald-400",bgColor:"bg-green-50 dark:bg-emerald-900/20",borderColor:"border-green-200 dark:border-emerald-800",title:"Budget Balanced!",subtitle:"Every dollar has a job"}:o?{icon:Rj,color:"text-red-600 dark:text-red-400",bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",title:"Over Budget",subtitle:"Reduce allocations or add income"}:{icon:Ej,color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",title:"Available to Budget",subtitle:"Assign money to envelopes"},h=d.icon;return r?_.jsxs("div",{className:"bg-gray-50 dark:bg-zinc-900 rounded-2xl p-6 border border-gray-200 dark:border-zinc-800 animate-pulse",children:[_.jsxs("div",{className:"flex items-center justify-between mb-4",children:[_.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-32"}),_.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20"})]}),_.jsx("div",{className:"h-2 bg-gray-200 dark:bg-zinc-700 rounded"})]}):_.jsxs("div",{className:`rounded-2xl p-6 border ${d.bgColor} ${d.borderColor}`,children:[_.jsxs("div",{className:"flex items-center justify-between mb-4",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:`p-2 rounded-xl ${d.bgColor} ${d.borderColor}`,children:_.jsx(h,{size:24,className:d.color})}),_.jsxs("div",{children:[_.jsx("h3",{className:`font-semibold ${d.color}`,children:d.title}),_.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:d.subtitle})]})]}),_.jsxs("div",{className:"text-right",children:[_.jsxs("div",{className:`text-3xl font-bold ${d.color}`,children:[o?"-":"","$",Math.abs(e).toFixed(2)]}),a&&_.jsx("div",{className:"text-sm text-green-600 dark:text-emerald-400 font-medium",children:"Perfect Balance"})]})]}),!a&&t>0&&_.jsxs("div",{className:"space-y-2",children:[_.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-zinc-400",children:[_.jsx("span",{children:"Allocated"}),_.jsxs("span",{children:[i.toFixed(0),"% of income"]})]}),_.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2",children:_.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${o?"bg-red-500":c?"bg-blue-500":"bg-green-500"}`,style:{width:`${Math.min(i,100)}%`}})}),_.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-zinc-500",children:[_.jsxs("span",{children:["$",n.toFixed(2)," allocated"]}),_.jsxs("span",{children:["$",t.toFixed(2)," income"]})]})]}),_.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-zinc-700",children:_.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[_.jsxs("div",{children:[_.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",t.toFixed(2)]}),_.jsx("div",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Total Income"})]}),_.jsxs("div",{children:[_.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",n.toFixed(2)]}),_.jsx("div",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Allocated"})]})]})})]})},wQ=()=>{const[e,t]=q.useState(!1),n=q.useRef(null),{currentUser:r,logout:i}=Ni(),{handleUserLogout:a}=Gn(),o=Ga();q.useEffect(()=>{const d=h=>{n.current&&!n.current.contains(h.target)&&t(!1)};if(e)return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[e]);const c=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{a(),i(),o("/"),t(!1)}catch(d){console.error("Logout failed:",d)}};if(!r)return null;const u=r.displayName?.charAt(0)?.toUpperCase()||r.email?.charAt(0)?.toUpperCase()||"U";return _.jsxs("div",{className:"relative",ref:n,children:[_.jsxs("button",{onClick:()=>t(!e),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors",children:[_.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-semibold",children:u}),_.jsx("span",{className:"hidden sm:block text-sm font-medium text-gray-700 dark:text-gray-300",children:r.displayName||r.email?.split("@")[0]||"User"}),_.jsx(PD,{size:16,className:`text-gray-500 dark:text-gray-400 transition-transform ${e?"rotate-180":""}`})]}),e&&_.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-zinc-900 rounded-xl shadow-lg border border-gray-200 dark:border-zinc-800 overflow-hidden z-50",children:[_.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-zinc-800",children:_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:u}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:r.displayName||r.email?.split("@")[0]||"User"}),_.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 truncate",children:r.email})]})]})}),_.jsxs("div",{className:"py-1",children:[_.jsxs("button",{onClick:()=>{o("/settings"),t(!1)},className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:[_.jsx(VD,{size:18,className:"text-gray-500 dark:text-gray-400"}),"Settings"]}),_.jsxs("button",{onClick:c,className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors",children:[_.jsx(pj,{size:18}),"Log Out"]})]})]})]})},NS=({children:e,onDelete:t,threshold:n=-100})=>{const r=AB(),[i,a]=q.useState(!1),o=q.useRef(0),c=()=>{a(!0),o.current=Date.now()},u=async(d,h)=>{const g=h.offset.x,m=h.velocity.x;if(setTimeout(()=>a(!1),100),g<n||g<-50&&m<-500){const b=t();b===!1?r.start({x:0}):b instanceof Promise&&b.then(S=>{S===!1&&r.start({x:0})})}else r.start({x:0})};return _.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[_.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:_.jsx(Ng,{className:"text-white w-6 h-6"})}),_.jsx(Uu.div,{drag:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:c,onDragEnd:u,animate:r,className:`relative bg-white dark:bg-zinc-900 rounded-xl ${i?"z-20":"z-10"}`,style:{touchAction:"pan-y",pointerEvents:i?"none":"auto"},children:e})]})},tP=({message:e="Loading your budget...",showTimeout:t=!1})=>_.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex flex-col items-center justify-center px-4",children:[_.jsx("div",{className:"mb-8",children:_.jsxs("div",{className:"relative",children:[_.jsx(jl,{size:48,className:"text-blue-500 animate-spin"}),_.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:_.jsx(hx,{size:24,className:"text-blue-600 dark:text-blue-400"})})]})}),_.jsxs("div",{className:"text-center space-y-3",children:[_.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e}),_.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 max-w-md",children:"This may take a moment on slow connections. We're fetching your budget data securely."})]}),_.jsxs("div",{className:"mt-12 w-full max-w-md space-y-4",children:[_.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-24 animate-pulse"}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),_.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),_.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]})]})}),_.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-zinc-800",children:[_.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-32 mb-2 animate-pulse"}),_.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20 animate-pulse"})]}),_.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[_.jsxs("div",{className:"flex justify-between items-center mb-4",children:[_.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-28 animate-pulse"}),_.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),_.jsxs("div",{className:"space-y-3",children:[_.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),_.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]}),_.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[_.jsxs("div",{className:"flex justify-between items-center mb-4",children:[_.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-32 animate-pulse"}),_.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),_.jsxs("div",{className:"space-y-3",children:[_.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),_.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),_.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]})]}),t&&_.jsx("div",{className:"mt-8 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 max-w-md",children:_.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 text-center",children:"This is taking longer than usual. If you're on a very slow connection, this is normal. Your data will load shortly."})}),_.jsx("div",{className:"mt-8 w-full max-w-md",children:_.jsx("div",{className:"h-1 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:_.jsx("div",{className:"h-full bg-blue-500 rounded-full animate-pulse",style:{width:"60%"}})})})]}),tf=sv((e,t)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(n,r="neutral",i)=>{e({message:n,type:r,isVisible:!0,undoAction:i}),setTimeout(()=>{t().hideToast()},6e3)},hideToast:()=>{e({isVisible:!1})}})),EQ=({isVisible:e,onClose:t,mode:n,initialIncomeSource:r})=>{const{createIncomeSource:i,updateIncomeSource:a}=ks(),{showToast:o}=tf(),[c,u]=q.useState(""),[d,h]=q.useState(""),[g,m]=q.useState(!1);q.useEffect(()=>{if(!e)return;const S=window.setTimeout(()=>{n==="edit"&&r?(u(r.name),h(r.amount.toString())):(u(""),h(""))},0);return()=>window.clearTimeout(S)},[e,n,r]);const b=async S=>{if(S.preventDefault(),!c.trim()||!d||parseFloat(d)<=0){o("Please fill in all required fields with valid values","error");return}m(!0);try{if(n==="add")await i({name:c.trim(),amount:parseFloat(d)}),o(`Added "${c.trim()}" as income source`,"success");else if(n==="edit"){if(!r){o("Error: No income source to edit","error");return}await a(r.id,{name:c.trim(),amount:parseFloat(d)}),o(`Updated "${c.trim()}" income source`,"success")}t()}catch(w){console.error("Error saving income source:",w),o("Failed to save income source. Please try again.","error")}finally{m(!1)}};return e?_.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:_.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[_.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[_.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n==="add"?"Add Income Source":"Edit Income Source"}),_.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:""})]}),_.jsxs("form",{onSubmit:b,className:"p-6 space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Income Source Name *"}),_.jsx("input",{type:"text",value:c,onChange:S=>u(S.target.value),placeholder:"e.g., Primary Job, Freelance, Investments",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Amount *"}),_.jsxs("div",{className:"relative",children:[_.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-zinc-400",children:"$"}),_.jsx("input",{type:"number",value:d,onChange:S=>h(S.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]})]}),_.jsxs("div",{className:"flex gap-3 pt-4",children:[_.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),_.jsx("button",{type:"submit",disabled:g||!c.trim()||!d||parseFloat(d)<=0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Saving...":n==="add"?"Add Income":"Save Changes"})]})]})]})}):null},TQ=({isVisible:e,onClose:t,onConfirm:n,currentMonth:r,incomeCount:i,totalIncome:a,allocationCount:o,totalAllocated:c,isLoading:u=!1})=>{const[d,h]=q.useState(""),[g,m]=q.useState("confirm"),b=E=>{const[T,D]=E.split("-");return new Date(parseInt(T),parseInt(D)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},S=()=>{g==="confirm"?m("type"):g==="type"&&d==="START FRESH"&&n()},w=()=>{m("confirm"),h(""),t()};return e?_.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:_.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[_.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[_.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Start Fresh for ",b(r)]}),_.jsx("button",{onClick:w,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",disabled:u,children:""})]}),_.jsx("div",{className:"p-6 space-y-4",children:g==="confirm"?_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:_.jsxs("div",{className:"flex items-start",children:[_.jsx("div",{className:"flex-shrink-0",children:_.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:_.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),_.jsxs("div",{className:"ml-3",children:[_.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action will permanently delete:"}),_.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:_.jsxs("ul",{className:"space-y-1",children:[_.jsxs("li",{children:[" ",i," income source",i!==1?"s":""," (totaling $",a.toFixed(2),"/month)"]}),_.jsxs("li",{children:[" ",o," envelope allocation",o!==1?"s":""," (totaling $",c.toFixed(2),")"]})]})})]})]})}),_.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:_.jsxs("div",{className:"flex",children:[_.jsx("div",{className:"flex-shrink-0",children:_.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:_.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),_.jsx("div",{className:"ml-3",children:_.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[_.jsx("strong",{children:"All other months will remain completely unchanged."})," This only affects the current month's budget data."]})})]})}),_.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"You can undo this action within 30 seconds if you change your mind."})]}):_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"text-center",children:[_.jsxs("p",{className:"text-sm text-gray-900 dark:text-white mb-4",children:["Type ",_.jsx("strong",{children:"START FRESH"})," to confirm:"]}),_.jsx("input",{type:"text",value:d,onChange:E=>h(E.target.value),placeholder:"START FRESH",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-zinc-800 dark:text-white text-center font-mono text-lg",autoFocus:!0})]}),_.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500 text-center",children:"This action cannot be undone after 30 seconds"})]})}),_.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200 dark:border-zinc-800",children:[_.jsx("button",{type:"button",onClick:w,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",disabled:u,children:"Cancel"}),_.jsx("button",{type:"button",onClick:S,disabled:u||g==="type"&&d!=="START FRESH",className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?"Clearing...":g==="confirm"?"Continue":"Start Fresh"})]})]})}):null},AQ=({currentMonth:e,onCopy:t,onDismiss:n,isLoading:r=!1})=>{const i=o=>{const[c,u]=o.split("-");return new Date(parseInt(c),parseInt(u)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},a=o=>{const[c,u]=o.split("-").map(Number);let d=c,h=u-1;return h<1&&(d=c-1,h=12),i(`${d}-${h.toString().padStart(2,"0")}`)};return _.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-6 mb-6",children:[_.jsxs("div",{className:"flex items-start justify-between",children:[_.jsxs("div",{className:"flex items-start space-x-3",children:[_.jsx("div",{className:"flex-shrink-0",children:_.jsx(Y5,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),_.jsxs("div",{className:"flex-1",children:[_.jsx("h3",{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:"Copy Previous Month?"}),_.jsxs("p",{className:"mt-1 text-sm text-blue-700 dark:text-blue-300",children:["Would you like to copy your budget setup from ",a(e)," to get started with ",i(e),"?"]}),_.jsx("p",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400",children:"This will copy your income sources and envelope allocations, but not transactions."})]})]}),_.jsx("button",{onClick:n,className:"flex-shrink-0 text-blue-400 hover:text-blue-600 dark:hover:text-blue-300 transition-colors","aria-label":"Dismiss",children:_.jsx(oh,{className:"h-5 w-5"})})]}),_.jsxs("div",{className:"mt-4 flex space-x-3",children:[_.jsx("button",{onClick:n,className:"flex-1 px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-300 bg-white dark:bg-zinc-800 border border-blue-300 dark:border-blue-600 rounded-lg hover:bg-blue-50 dark:hover:bg-zinc-700 transition-colors",disabled:r,children:"Start Fresh"}),_.jsx("button",{onClick:t,disabled:r,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?"Copying...":"Copy Previous Month"})]})]})},CQ=({piggybank:e,balance:t,onNavigate:n})=>{const r=Gn(K=>K.updateEnvelope),i=Gn(K=>K.transactions),a=Gn(K=>K.updateTransaction),o=ks(K=>K.currentMonth),c=ks(K=>K.processMonthlyPiggybankContributions),u=tf(K=>K.showToast),d=e.piggybankConfig?.targetAmount,h=e.piggybankConfig?.monthlyContribution||0,g=e.piggybankConfig?.color||"#3B82F6",m=e.piggybankConfig?.paused||!1,b=t.toNumber(),S=(K,Y=1)=>{const H=K.replace("#",""),$=parseInt(H,16),et=$>>16&255,at=$>>8&255,X=$&255;return`rgba(${et}, ${at}, ${X}, ${Y})`},w=`linear-gradient(135deg, ${S(g,.14)} 0%, ${S(g,.05)} 100%)`,E=S(g,.4),[T,D]=q.useState(!1),[I,M]=q.useState(h?h.toFixed(2):"0.00"),[z,P]=q.useState(!1),A=q.useRef(null),C=d&&d>0?Math.min(b/d*100,100):0,k=d&&b>=d;q.useEffect(()=>{T||M(h?h.toFixed(2):"0.00")},[h,T]);const j=K=>{K.stopPropagation(),!z&&(M(h?h.toFixed(2):"0.00"),D(!0),requestAnimationFrame(()=>{A.current?.focus(),A.current?.select()}))},L=()=>{D(!1),M(h?h.toFixed(2):"0.00")},B=async()=>{if(!T||z)return;const K=parseFloat(I);if(Number.isNaN(K)||K<0){u("Enter a valid contribution amount","error");return}if(K===h){D(!1);return}P(!0);try{const Y={...e,lastUpdated:new Date().toISOString(),piggybankConfig:{monthlyContribution:K,targetAmount:e.piggybankConfig?.targetAmount,color:e.piggybankConfig?.color,icon:e.piggybankConfig?.icon,paused:e.piggybankConfig?.paused}};await r(Y);const H=i.find($=>$.envelopeId===e.id&&$.isAutomatic===!0&&$.month===o&&$.type==="Income");H&&H.id?H.amount!==K&&await a({...H,amount:K}):K>0&&!m&&await c(o),u("Monthly contribution updated","success"),M(K.toFixed(2)),D(!1)}catch(Y){console.error("Failed to update piggybank contribution",Y),u("Failed to update contribution","error")}finally{P(!1)}},V=K=>{K.key==="Enter"?(K.preventDefault(),B()):K.key==="Escape"&&(K.preventDefault(),L())};return _.jsxs("div",{onClick:()=>n(e.id),className:"rounded-xl p-4 border transition-all cursor-pointer shadow-sm hover:shadow-md",style:{background:w,borderColor:E},children:[_.jsxs("div",{className:"flex items-start justify-between mb-3",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${g}20`},children:_.jsx(Md,{size:20,style:{color:g}})}),_.jsxs("div",{children:[_.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e.name}),k&&_.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:" Goal Reached!"})]})]}),_.jsxs("div",{className:"text-right",children:[_.jsxs("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["$",b.toFixed(2)]}),d&&_.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["of $",d.toFixed(2)]})]})]}),d&&d>0&&_.jsxs("div",{className:"mb-3",children:[_.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-800 rounded-full h-2 overflow-hidden",children:_.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${C}%`,backgroundColor:g}})}),_.jsxs("div",{className:"flex justify-between items-center mt-1",children:[_.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:[C.toFixed(0),"% complete"]}),_.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["$",(d-b).toFixed(2)," to go"]}),_.jsx("span",{className:"ml-2 px-2 py-0.5 text-[11px] font-semibold rounded-full uppercase tracking-wide",style:{backgroundColor:S(g,.15),color:g},children:"Piggybank"})]})]}),_.jsx("div",{className:"mt-2",children:m?_.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-zinc-400",children:[_.jsx(vj,{size:14,className:"text-orange-500"}),_.jsx("span",{className:"text-orange-600 dark:text-orange-400",children:"Paused"})]}):_.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-zinc-400",children:[_.jsx(Ij,{size:14,style:{color:g}}),T?_.jsxs("form",{onSubmit:K=>{K.preventDefault(),B()},className:"flex items-center gap-2",children:[_.jsxs("div",{className:"relative",children:[_.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),_.jsx("input",{ref:A,type:"number",min:"0",step:"0.01",value:I,onChange:K=>M(K.target.value),onBlur:B,onKeyDown:V,disabled:z,className:"w-28 pl-6 pr-3 py-1.5 rounded-lg border border-gray-300 dark:border-zinc-600 bg-white dark:bg-zinc-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),z&&_.jsx(uj,{size:16,className:"animate-spin text-gray-400"})]}):_.jsxs("button",{type:"button",onClick:j,className:"font-medium text-gray-900 dark:text-white hover:underline focus:outline-none",children:["$",h.toFixed(2),"/month"]})]})})]})},rd=(e,t=1)=>{const n=e.replace("#",""),r=parseInt(n,16),i=r>>16&255,a=r>>8&255,o=r&255;return`rgba(${i}, ${a}, ${o}, ${t})`},RQ=12,DQ=(e,t,n)=>Math.min(Math.max(e,t),n),IQ=({env:e,budgetedAmount:t,remainingBalance:n,editingEnvelopeId:r,setEditingEnvelopeId:i,editingAmount:a,setEditingAmount:o,handleBudgetSave:c,navigate:u,inputRef:d,transactions:h,currentMonth:g,setMoveableRef:m,isReorderingActive:b,activelyDraggingId:S,onItemDragStart:w,onMoveUp:E,onMoveDown:T,isFirst:D,isLast:I})=>{const M=!!e.isPiggybank,z=e.piggybankConfig?.color||"#3B82F6",P=M?`linear-gradient(135deg, ${rd(z,.18)} 0%, ${rd(z,.08)} 100%)`:void 0,A=M?rd(z,.5):void 0,C=q.useRef(null),[k,j]=q.useState(!1),L=h.filter(X=>X.envelopeId===e.id&&X.month===g),B=L.filter(X=>X.type==="Expense"),V=L.filter(X=>X.type==="Income"),K=B.reduce((X,U)=>X+(U.amount||0),0),Y=V.reduce((X,U)=>X+(U.amount||0),0),H=Math.max(0,K/Y*100),$=X=>{if(k||b){X.preventDefault(),X.stopPropagation();return}r!==e.id&&u(`/envelope/${e.id}`)};q.useEffect(()=>{S&&S!==e.id&&j(!1)},[S,e.id]),q.useEffect(()=>{S===e.id&&(j(!0),w(e.id))},[S,e.id,w]),q.useEffect(()=>{if(!S&&k){const X=setTimeout(()=>{j(!1)},300);return()=>clearTimeout(X)}},[S,k]);const et=_.jsxs("div",{className:"flex items-center gap-2 w-full",children:[_.jsxs("div",{className:"flex flex-col gap-1",children:[_.jsx("button",{onClick:X=>{X.stopPropagation(),E()},disabled:D,className:`p-1 rounded transition-colors ${D?"text-gray-300 dark:text-zinc-700 cursor-not-allowed":"text-gray-500 dark:text-zinc-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,title:"Move up","aria-label":"Move envelope up",children:_.jsx(V5,{size:18})}),_.jsx("button",{onClick:X=>{X.stopPropagation(),T()},disabled:I,className:`p-1 rounded transition-colors ${I?"text-gray-300 dark:text-zinc-700 cursor-not-allowed":"text-gray-500 dark:text-zinc-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,title:"Move down","aria-label":"Move envelope down",children:_.jsx(PD,{size:18})})]}),_.jsxs("div",{className:"flex-1",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[M&&_.jsx("span",{className:"w-8 h-8 rounded-full flex items-center justify-center border",style:{borderColor:rd(z,.4),backgroundColor:rd(z,.15),color:z},children:_.jsx(Md,{size:16})}),_.jsxs("div",{children:[_.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e.name}),M&&_.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",style:{color:z},children:"Piggybank"})]})]}),_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("div",{className:"flex items-center space-x-4",onClick:X=>X.stopPropagation(),onPointerDown:X=>X.stopPropagation(),children:r===e.id?_.jsxs("div",{className:"flex items-center space-x-1",children:[_.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),_.jsx("form",{onSubmit:X=>{X.preventDefault(),c()},children:_.jsx("input",{ref:d,type:"number",value:a,onChange:X=>o(X.target.value),onBlur:c,className:"w-24 px-2 py-1 text-sm border rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white",step:"0.01",autoFocus:!0})})]}):_.jsxs("div",{onClick:X=>{X.stopPropagation(),i(e.id),o(t.toString())},className:"flex items-center space-x-1 hover:bg-gray-200 dark:hover:bg-zinc-700 px-2 py-1 rounded transition-colors",children:[_.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),_.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["$",t.toFixed(2)]})]})}),_.jsxs("div",{className:"text-right",children:[_.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 block",children:"Remaining"}),_.jsxs("span",{className:`font-bold ${n.toNumber()<0||100-H<=5?"text-red-500":H>=80?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-emerald-400"}`,children:["$",n.toNumber().toFixed(2)]})]})]}),t>0&&_.jsx("div",{className:"mt-3",onClick:X=>X.stopPropagation(),children:_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-zinc-400 mb-1",children:[_.jsx("span",{children:"Budget Used"}),_.jsxs("span",{children:[H.toFixed(0),"%"]})]}),_.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2 overflow-hidden",children:_.jsx("div",{className:`h-full transition-all duration-300 ease-out ${n.toNumber()<0||100-H<=5?"bg-red-500":H>=80?"bg-yellow-500":"bg-green-400"}`,style:{width:`${Math.max(100-H,2)}%`}})})]})})]})]}),at=S===e.id;return _.jsx(Uu.div,{layout:!at,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},ref:X=>{m(e.id)(X),C.current=X},onClick:$,style:{boxShadow:"0 1px 2px rgba(15,23,42,0.08)",touchAction:"none",background:P,borderColor:A,cursor:"pointer"},className:`p-4 rounded-xl active:scale-[0.99] transition-all select-none border ${M?"bg-white/70 dark:bg-zinc-800/80":"bg-gray-50 dark:bg-zinc-800 border-transparent"}`,children:et})},kQ=()=>{const{envelopes:e,transactions:t,fetchData:n,isLoading:r,isOnline:i,pendingSync:a,syncData:o,testingConnectivity:c,reorderEnvelopes:u}=Gn(),d=q.useCallback(St=>It=>{It?Gt.current[St]=It:delete Gt.current[St]},[]),{currentMonth:h,fetchMonthlyData:g,incomeSources:m,envelopeAllocations:b,calculateAvailableToBudget:S,deleteIncomeSource:w,restoreIncomeSource:E,clearMonthData:T,copyFromPreviousMonth:D,setEnvelopeAllocation:I,isLoading:M}=ks(),{showToast:z}=tf(),P=Ga(),A=q.useCallback(async St=>{if(!St.length)return;const It=St.map(fe=>fe.id);try{await u(It)}catch(fe){console.error("Failed to persist envelope order:",fe),z("Failed to save envelope order","error")}},[u,z]),[C,k]=q.useState(!1),[j,L]=q.useState("add"),[B,V]=q.useState(null),[K,Y]=q.useState(!1),[H,$]=q.useState(!1),[et,at]=q.useState(!1),X=q.useRef(null),[U,Z]=q.useState(!0),[rt,st]=q.useState(!1),ht=q.useRef(null),[dt,bt]=q.useState(null),[At,Dt]=q.useState(""),Kt=q.useRef(null),Et=St=>{const It=t.filter(se=>se.envelopeId===St&&se.month===h),fe=It.filter(se=>se.type==="Expense"),we=It.filter(se=>se.type==="Income"),ln=fe.reduce((se,gn)=>se.plus(new Gr(gn.amount||0)),new Gr(0));return we.reduce((se,gn)=>se.plus(new Gr(gn.amount||0)),new Gr(0)).minus(ln)};q.useEffect(()=>(console.log(" Starting initial data load, isInitialLoading:",U),(async()=>{console.log(" Setting timeout for loading message"),ht.current=setTimeout(()=>{console.log(" Loading timeout reached, showing timeout message"),st(!0)},8e3);try{console.log(" Fetching data in parallel..."),await Promise.all([n().then(()=>console.log(" Envelope data fetched")),g().then(()=>console.log(" Monthly budget data fetched"))]),ht.current&&clearTimeout(ht.current),console.log(" Data load complete, hiding loading screen"),Z(!1),st(!1)}catch(It){console.error(" Error loading initial data:",It),Z(!1),st(!1)}})(),()=>{ht.current&&clearTimeout(ht.current)}),[]),q.useEffect(()=>{if(!M&&!U){const St=m.length===0&&b.length===0;at(St)}},[M,U,m,b,h]),q.useEffect(()=>{dt&&Kt.current&&(Kt.current.focus(),Kt.current.select())},[dt]);const[Rt,le]=q.useState(!1),Vt=q.useRef(null),qt=q.useRef(0),Gt=q.useRef({}),ce=q.useRef({}),[be,Ot]=q.useState(null),Lt=q.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0}),[Ne,Qe]=q.useState([]),xe=q.useRef([]),ue=e.filter(St=>St.isPiggybank===!0&&St.isActive);q.useEffect(()=>{if(!Rt){const St=e.filter(It=>!It.isPiggybank&&It.isActive!==!1&&b.some(fe=>fe.envelopeId===It.id)).sort((It,fe)=>{const we=It.orderIndex??0,ln=fe.orderIndex??0;return we-ln});Qe(St),xe.current=St}},[e,b,Rt]);const Ie=q.useCallback(()=>le(!0),[]),Wn=q.useCallback(()=>{le(!1),xe.current.length&&A(xe.current)},[A]),or=q.useCallback(St=>{},[]),kr=q.useCallback(St=>{dt!==St&&P(`/envelope/${St}`)},[dt,P]),Nr=Ne;q.useEffect(()=>{const St=()=>{Object.values(ce.current).forEach(we=>we?.destroy()),ce.current={}};if(!Nr.length)return;const It=()=>{Nr.forEach(we=>{const ln=Gt.current[we.id];if(!ln)return;const pn=ce.current[we.id];if(pn){pn.target=ln;return}const ui=new U7(document.body,{target:ln,draggable:!0,throttleDrag:0,edgeDraggable:!1,startDragRotate:0,throttleDragRotate:0,rotatable:!1,scalable:!1,resizable:!1,warpable:!1,pinchable:!1,snappable:!0,snapThreshold:5,isDisplaySnapDigit:!1,isDisplayInnerSnapDigit:!1,snapGap:!0,snapDirections:{top:!0,bottom:!0,left:!1,right:!1},elementSnapDirections:{top:!0,bottom:!0,left:!1,right:!1},clickable:!0,preventClickDefault:!1,preventClickEventOnDrag:!0,checkInput:!1,dragArea:!0,hideDefaultLines:!0,hideChildMoveableDefaultLines:!0,renderDirections:[]});ui.on("dragStart",gn=>{const Vn=xe.current.findIndex(mn=>mn.id===we.id),lr=gn.target,_r=lr.getBoundingClientRect().height+RQ;Ot(we.id),Lt.current={activeId:we.id,startIndex:Vn,currentIndex:Vn,itemHeight:_r},lr&&(lr.style.transition="none",lr.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",lr.style.zIndex="20"),Ie()});let se=null;ui.on("drag",gn=>{const Vn=gn.target;se!==null&&cancelAnimationFrame(se),se=requestAnimationFrame(()=>{const lr=Lt.current;if(lr.activeId!==we.id)return;const Mr=gn.beforeTranslate[1];Vn.style.transform=`translateY(${Mr}px)`,Vn.style.transition="none";const{itemHeight:_r,startIndex:mn}=lr;if(!_r)return;const Sr=Math.round(Mr/_r),cr=DQ(mn+Sr,0,xe.current.length-1);cr!==lr.currentIndex&&(lr.currentIndex=cr,xe.current.forEach((el,ur)=>{if(el.id===we.id)return;const wr=Gt.current[el.id];if(!wr)return;let Ye=0;mn<cr?ur>mn&&ur<=cr&&(Ye=-_r):mn>cr&&ur>=cr&&ur<mn&&(Ye=_r),wr.style.transform=Ye?`translateY(${Ye}px)`:"",wr.style.transition="transform 0.2s ease"})),se=null})}),ui.on("dragEnd",gn=>{se!==null&&(cancelAnimationFrame(se),se=null);const Vn=gn.target,lr=Lt.current,{startIndex:Mr,currentIndex:_r}=lr;if(Vn.style.transform="",Vn.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",Vn.style.boxShadow="",xe.current.forEach(mn=>{if(mn.id===we.id)return;const Sr=Gt.current[mn.id];Sr&&(Sr.style.transform="",Sr.style.transition="")}),Mr!==_r){const mn=[...xe.current],[Sr]=mn.splice(Mr,1);mn.splice(_r,0,Sr),xe.current=mn,Qe(mn)}setTimeout(()=>{Vn.style.zIndex="",Vn.style.transition="",Ot(null)},300),Lt.current={activeId:null,startIndex:0,currentIndex:0,itemHeight:0},qt.current=Date.now(),Wn()}),ui.on("click",()=>{kr(we.id)}),ce.current[we.id]=ui})},fe=window.setTimeout(It,80);return()=>{clearTimeout(fe),St()}},[Nr,Ie,Wn,kr]);const Ps=e.reduce((St,It)=>St+Et(It.id).toNumber(),0);console.log(" Total balance:",Ps);const Pi=async()=>{if(dt)try{const St=parseFloat(At)||0;await I(dt,St)}catch(St){console.error("Failed to save budget amount:",St),z("Failed to update budget","error")}finally{bt(null),Dt("")}},ea=()=>{L("add"),V(null),k(!0)},xr=St=>{X.current&&clearTimeout(X.current),!K&&(L("edit"),V(St),k(!0))},on=St=>{X.current&&clearTimeout(X.current),Y(!0);const It=m.findIndex(we=>we.id===St.id),fe={...St};w(St.id).catch(console.error),z(`Deleted "${St.name}"`,"neutral",()=>E(fe,It)),setTimeout(()=>Y(!1),500)},qn=()=>{k(!1),V(null)},$e=()=>{$(!0)},Vs=async()=>{try{await T(),$(!1),z(`"${h}" budget cleared`,"neutral",()=>z('Cannot undo "Start Fresh" after 30 seconds',"error"))}catch(St){console.error("Error clearing month data:",St),z("Failed to clear month data","error")}},na=async()=>{try{await D(),at(!1),z("Previous month budget copied","success")}catch(St){console.error("Error copying previous month:",St),z("Failed to copy previous month","error")}},ra=S();return console.log(" Checking loading screen condition, isInitialLoading:",U),U?(console.log(" Showing loading screen"),_.jsx(tP,{message:rt?"Still loading... This is normal on slow connections":"Loading your budget...",showTimeout:rt})):(console.log(" Showing main content"),_.jsxs(_.Fragment,{children:[_.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .moveable-control { display: none !important; }
        .moveable-origin { display: none !important; }
        .moveable-line { display: none !important; }
      `}}),_.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[_.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 z-30",children:[_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("div",{className:"flex items-center gap-2",children:i?r?_.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[_.jsx(jl,{size:16,className:"animate-spin"}),_.jsx("span",{className:"text-sm font-medium",children:"Syncing..."})]}):a?_.jsxs("button",{onClick:o,className:"flex items-center gap-1 text-orange-500 hover:text-orange-600 transition-colors",title:"Sync pending - tap to sync",children:[_.jsx(jl,{size:16}),_.jsx("span",{className:"text-sm font-medium",children:"Sync"})]}):_.jsxs("div",{className:"flex items-center gap-1 text-green-500",children:[_.jsx(Fj,{size:16}),_.jsx("span",{className:"text-sm font-medium",children:"Online"})]}):_.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[_.jsx(Bj,{size:16}),_.jsx("span",{className:"text-sm font-medium",children:c?"Testing...":r?"Saving...":"Offline"})]})}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("button",{onClick:$e,className:"text-orange-500 hover:text-orange-600 dark:hover:text-orange-400 transition-colors",title:"Start Fresh - Clear current month budget",children:_.jsx(jl,{size:22})}),_.jsx(wQ,{})]})]}),_.jsx("div",{className:"mt-4",children:_.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:"Personal Budget"})})]}),_.jsxs("div",{className:"p-4 max-w-md mx-auto space-y-6",children:[_.jsx(_Q,{currentMonth:h,onMonthChange:St=>{at(!1),ks.getState().setCurrentMonth(St)}}),_.jsx(SQ,{amount:ra,totalIncome:m.reduce((St,It)=>St+It.amount,0),totalAllocated:b.reduce((St,It)=>St+It.budgetedAmount,0),isLoading:r}),et&&_.jsx(AQ,{currentMonth:h,onCopy:na,onDismiss:()=>at(!1)}),_.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[_.jsxs("div",{className:"flex justify-between items-center mb-4",children:[_.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Income Sources"}),_.jsx("button",{onClick:ea,className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:_.jsx(ig,{size:20})})]}),m.length===0?_.jsx("div",{className:"text-center py-6",children:_.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm",children:"No income sources yet. Add your monthly income."})}):_.jsx("div",{className:"space-y-3",children:_.jsx(jd,{initial:!1,mode:"popLayout",children:m.map(St=>_.jsx(Uu.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:_.jsx(NS,{onDelete:()=>on(St),children:_.jsxs("div",{className:"flex justify-between items-center py-3 px-4 bg-gray-50 dark:bg-zinc-800 rounded-xl cursor-pointer",onClick:()=>xr(St),children:[_.jsxs("div",{className:"flex-1",children:[_.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:St.name}),_.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Monthly income"})]}),_.jsxs("p",{className:"font-semibold text-green-600 dark:text-emerald-400",children:["$",St.amount.toFixed(2)]})]})})},St.id))})})]}),_.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[_.jsxs("div",{className:"flex justify-between items-center mb-4",children:[_.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[_.jsx(Md,{size:20,className:"text-blue-600 dark:text-blue-400"}),"Piggybanks"]}),_.jsx("button",{onClick:()=>P("/add-envelope?type=piggybank"),className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",title:"Create New Piggybank",children:_.jsx(ig,{size:20})})]}),ue.length>0?_.jsx("div",{className:"space-y-3",children:ue.map(St=>_.jsx(CQ,{piggybank:St,balance:Et(St.id),onNavigate:It=>P(`/envelope/${It}`)},St.id))}):_.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-zinc-400",children:[_.jsx(Md,{size:48,className:"mx-auto mb-3 opacity-30"}),_.jsx("p",{className:"text-sm",children:"No piggybanks yet"}),_.jsx("p",{className:"text-xs mt-1",children:"Click the + button above to create your first piggybank"})]})]}),_.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[_.jsxs("div",{className:"flex justify-between items-center mb-4",children:[_.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Spending Envelopes"}),_.jsx("button",{onClick:()=>P("/add-envelope"),className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",title:"Create New Envelope",children:_.jsx(ig,{size:20})})]}),Nr.length===0?_.jsxs("div",{className:"text-center py-6",children:[_.jsx(hx,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto mb-3"}),_.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm mb-4",children:e.length>0?"No envelopes added to this month. Copy from previous month or add new ones.":"No envelopes yet. Create one to get started."}),_.jsx("button",{onClick:()=>P("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:"Create First Envelope"})]}):_.jsx("div",{ref:Vt,children:_.jsx(jd,{initial:!1,children:_.jsx("div",{className:"space-y-3",children:Nr.map((St,It)=>{const we=b.find(se=>se.envelopeId===St.id)?.budgetedAmount||0,ln=Et(St.id),pn=()=>{if(It===0)return;const se=[...xe.current];[se[It-1],se[It]]=[se[It],se[It-1]],xe.current=se,Qe(se),A(se)},ui=()=>{if(It===Nr.length-1)return;const se=[...xe.current];[se[It],se[It+1]]=[se[It+1],se[It]],xe.current=se,Qe(se),A(se)};return _.jsx(IQ,{env:St,budgetedAmount:we,remainingBalance:ln,editingEnvelopeId:dt,setEditingEnvelopeId:bt,editingAmount:At,setEditingAmount:Dt,handleBudgetSave:Pi,navigate:P,inputRef:Kt,transactions:t,currentMonth:h,setMoveableRef:d,isReorderingActive:Rt,activelyDraggingId:be,onItemDragStart:or,onMoveUp:pn,onMoveDown:ui,isFirst:It===0,isLast:It===Nr.length-1},St.id)})})})})]}),_.jsx("button",{onClick:()=>P("/add-transaction"),className:"fixed bottom-24 right-6 md:bottom-10 bg-blue-600 text-white p-4 rounded-full shadow-lg active:scale-90 transition-transform z-40 pointer-events-auto",children:_.jsx(ig,{size:28})}),_.jsx(EQ,{isVisible:C,onClose:qn,mode:j,initialIncomeSource:B}),_.jsx(TQ,{isVisible:H,onClose:()=>$(!1),onConfirm:Vs,currentMonth:h,incomeCount:m.length,totalIncome:m.reduce((St,It)=>St+It.amount,0),allocationCount:b.length,totalAllocated:b.reduce((St,It)=>St+It.budgetedAmount,0)})]})]})]}))},eP=({isVisible:e,onClose:t,mode:n,currentEnvelope:r,initialTransaction:i})=>{const{addTransaction:a,updateTransaction:o,deleteTransaction:c}=Gn(),[u,d]=q.useState(""),[h,g]=q.useState(""),[m,b]=q.useState(""),[S,w]=q.useState(new Date().toISOString().split("T")[0]);if(q.useEffect(()=>{if(!e)return;const M=window.setTimeout(()=>{if(n==="edit"&&i){d(i.amount.toString()),g(i.merchant||""),b(i.description);try{const z=new Date(i.date);isNaN(z.getTime())?(console.warn("Invalid date in transaction:",i.date),w(new Date().toISOString().split("T")[0])):w(z.toISOString().split("T")[0])}catch(z){console.error("Error parsing transaction date:",z),w(new Date().toISOString().split("T")[0])}}else d(""),g(""),b(""),w(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(M)},[e,n,i]),!e)return null;const E=async M=>{M.preventDefault();const z=parseFloat(u);if(isNaN(z)||z<=0){console.log(" Invalid amount:",u);return}console.log(" Saving transaction:",{mode:n,amount:z,note:m,date:S,envelopeId:r.id});try{n==="add"?(console.log(" Adding income transaction"),await a({amount:z,description:m,merchant:h||void 0,date:new Date(S).toISOString(),envelopeId:r.id,type:"Income",reconciled:!1})):n==="spend"?(console.log(" Adding expense transaction"),await a({amount:z,description:m,merchant:h||void 0,date:new Date(S).toISOString(),envelopeId:r.id,type:"Expense",reconciled:!1})):n==="edit"&&i&&(console.log(" Updating transaction"),await o({...i,amount:z,description:m,merchant:h||void 0,date:new Date(S).toISOString()})),console.log(" Transaction saved successfully"),t()}catch(P){console.error(" Error saving transaction:",P),alert("Failed to save transaction: "+(P instanceof Error?P.message:"Unknown error"))}},T=()=>{!i||!i.id||window.confirm("Are you sure you want to delete this transaction?")&&(c(i.id),t())},D=n==="add"?"Add Money":n==="spend"?"Spend Money":"Edit Transaction",I=n==="add"?"text-green-500":"text-red-500";return _.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:_.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[_.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[_.jsx("button",{onClick:t,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),_.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:D}),_.jsx("button",{onClick:E,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!u||parseFloat(u)<=0,children:"Save"})]}),_.jsxs("form",{onSubmit:E,className:"p-6 space-y-6",children:[_.jsxs("div",{className:"text-center",children:[_.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),_.jsxs("div",{className:"relative inline-block",children:[_.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${I}`,children:"$"}),_.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:u,onChange:M=>{const z=M.target.value;(z===""||!isNaN(parseFloat(z))&&parseFloat(z)>=0)&&d(z)},onKeyDown:M=>{(M.key==="e"||M.key==="E"||M.key==="+"||M.key==="-")&&M.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${I} placeholder-gray-700`})]})]}),_.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[_.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),_.jsx("input",{type:"text",value:h,onChange:M=>g(M.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),_.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[_.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),_.jsx("input",{type:"text",value:m,onChange:M=>b(M.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),_.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[_.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),_.jsx("input",{type:"date",value:S,onChange:M=>{console.log("Date changed to:",M.target.value),w(M.target.value)},required:!0,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),n==="edit"&&_.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:_.jsxs("button",{type:"button",onClick:T,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[_.jsx(jD,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})})},NQ=({isVisible:e,onClose:t,sourceEnvelope:n})=>{const{envelopes:r,transferFunds:i}=Gn(),[a,o]=q.useState(""),[c,u]=q.useState(""),[d,h]=q.useState(""),[g,m]=q.useState(new Date().toISOString().split("T")[0]),b=r.filter(E=>E.id!==n.id);if(q.useEffect(()=>{if(!e)return;const E=window.setTimeout(()=>{o(""),u(""),h(""),m(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(E)},[e]),!e)return null;const S=E=>{E.preventDefault();const T=parseFloat(c);isNaN(T)||T<=0||!a||(i(n.id,a,T,d,new Date(g)),t())},w=r.find(E=>E.id===a);return _.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:_.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[_.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[_.jsx("button",{onClick:t,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),_.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),_.jsx("button",{onClick:S,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!c||parseFloat(c)<=0||!a,children:"Transfer"})]}),_.jsxs("form",{onSubmit:S,className:"p-6 space-y-6",children:[_.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[_.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),_.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:n.name})]}),_.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[_.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),_.jsxs("select",{value:a,onChange:E=>o(E.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[_.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),b.map(E=>_.jsx("option",{value:E.id,className:"bg-white dark:bg-zinc-900",children:E.name},E.id))]})]}),_.jsxs("div",{className:"text-center",children:[_.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),_.jsxs("div",{className:"relative inline-block",children:[_.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),_.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:c,onChange:E=>u(E.target.value),onKeyDown:E=>{(E.key==="e"||E.key==="E"||E.key==="+"||E.key==="-")&&E.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),_.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[_.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),_.jsx("input",{type:"text",value:d,onChange:E=>h(E.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),_.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[_.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),_.jsx("input",{type:"date",value:g,onChange:E=>m(E.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),w&&c&&parseFloat(c)>0&&_.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",_.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(c).toFixed(2)]})," from"," ",_.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:n.name})," to"," ",_.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:w.name})]})]})]})})},MQ=e=>{if(!e)return"No Date";try{let t;return e&&typeof e=="object"&&e.toDate&&typeof e.toDate=="function"?t=e.toDate():typeof e=="number"?e<1e10?t=new Date((e+978307200)*1e3):t=new Date(e):t=new Date(e),isNaN(t.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(t)}catch(t){return console.error("Date error:",t),"Error"}},OQ=e=>{const t=typeof e=="string"?parseFloat(e):e;return typeof t!="number"||isNaN(t)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(t))},nP=({transaction:e,envelopeName:t,onReconcile:n,onEdit:r})=>{if(!e)return null;const i=e.type==="Income",a=e.type==="Expense";let o="text-gray-900 dark:text-white";return i&&(o="text-green-600 dark:text-green-400"),a&&(o="text-red-600 dark:text-red-400"),_.jsxs("div",{onClick:r,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 transition-colors cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[_.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:e.merchant||e.description||"No Description"}),e.reconciled&&_.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),e.merchant&&e.description&&e.description!==e.merchant&&_.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400 truncate",children:e.description}),_.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1",children:[_.jsx("span",{children:MQ(e.date)}),t&&_.jsxs(_.Fragment,{children:[_.jsx("span",{children:""}),_.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:t})]})]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${o}`,children:[a?"-":i?"+":"",OQ(e.amount)]}),n?_.jsx("button",{type:"button",onClick:c=>{c.stopPropagation(),n()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":e.reconciled?"Mark as unreconciled":"Mark as reconciled",children:e.reconciled?_.jsx(yA,{className:"text-green-500",size:20}):_.jsx(xA,{className:"text-gray-400",size:20})}):_.jsx("span",{children:e.reconciled?_.jsx(yA,{className:"text-green-500",size:20}):_.jsx(xA,{className:"text-gray-400",size:20})})]})]})},PQ=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),VQ=()=>{const{id:e}=TV(),{envelopes:t,transactions:n,fetchData:r,isLoading:i,deleteEnvelope:a,renameEnvelope:o,updateTransaction:c,deleteTransaction:u,restoreTransaction:d,getEnvelopeBalance:h}=Gn(),{showToast:g}=tf(),m=Ga(),b=Fa(),[S,w]=q.useState(!1),[E,T]=q.useState(!1),[D,I]=q.useState(!1),[M,z]=q.useState(null);q.useEffect(()=>{t.length===0&&r()},[]);const P=t.find(L=>L.id===e);if(!P)return i?_.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:_.jsx("p",{children:"Loading envelope..."})}):_.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:_.jsx("p",{children:"Envelope not found."})});const A=n.filter(L=>L.envelopeId===P.id).sort((L,B)=>new Date(B.date).getTime()-new Date(L.date).getTime()),C=()=>{b.state?.fromGlobalFAB?m("/"):m(-1)},k=()=>{e&&(a(e),m(-1))},j=L=>{const B={...L,reconciled:!L.reconciled};c(B)};return _.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4 pb-28",children:[_.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[_.jsx("button",{onClick:()=>{const L=prompt("Rename envelope:",P.name);L&&L.trim()&&e&&o(e,L)},className:"text-blue-600 dark:text-blue-400 font-medium",children:"Rename"}),_.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:P.name}),_.jsx("button",{onClick:C,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),_.jsx("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:_.jsxs("div",{className:"flex justify-between items-center mb-2",children:[_.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const L=h(P.id).toNumber();return console.log(`Debug: Envelope ${P.name} Balance:`,L),_.jsx("span",{className:`text-xl font-bold ${L<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:PQ(L)})})()]})}),_.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[_.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>w(!0),children:[_.jsx(B5,{className:"w-5 h-5 mr-3"}),"Add Money"]}),_.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>T(!0),children:[_.jsx(z5,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),_.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>I(!0),children:[_.jsx(R5,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),_.jsxs("section",{className:"mt-6",children:[_.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),_.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:A.length===0?_.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):_.jsx(jd,{initial:!1,mode:"popLayout",children:A.map(L=>_.jsx(Uu.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:_.jsx(NS,{onDelete:()=>{if(!L.id)return;const B={...L};u(L.id),g("Transaction deleted","neutral",()=>d(B))},children:_.jsx(nP,{transaction:L,onReconcile:()=>j(L),onEdit:()=>z(L)})})},L.id))})})]}),_.jsx("div",{className:"mt-8",children:_.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{confirm(`Are you sure you want to delete "${P.name}"? This will delete all transactions.`)&&k()},children:[_.jsx(jD,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),(S||E||M)&&_.jsx(eP,{isVisible:S||E||!!M,onClose:()=>{w(!1),T(!1),z(null)},mode:S?"add":E?"spend":"edit",currentEnvelope:P,initialTransaction:M}),D&&_.jsx(NQ,{isVisible:D,onClose:()=>I(!1),sourceEnvelope:P})]})},jQ="1.1.0",zQ={version:jQ},LQ=()=>{const e=Ga(),t=q.useRef(null),{envelopes:n,transactions:r,distributionTemplates:i,resetData:a,importData:o,getEnvelopeBalance:c,appSettings:u,updateAppSettings:d,initializeAppSettings:h}=Gn(),{currentUser:g,deleteAccount:m}=Ni(),[b,S]=q.useState(null),[w,E]=q.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[T,D]=q.useState(!1),[I,M]=q.useState(""),[z,P]=q.useState(!1),A=978307200,C=u?.theme??"system";q.useEffect(()=>{u||h().catch($=>{console.error("Failed to initialize app settings:",$)})},[u,h]);const k=($,et)=>{S({type:$,text:et}),setTimeout(()=>S(null),3500)},j=q.useMemo(()=>{const $=n.length,et=r.length,at=i.length,X=n.reduce((st,ht)=>st+c(ht.id).toNumber(),0),U=0,Z=r.reduce((st,ht)=>{let dt=0;if(typeof ht.date=="string"){const bt=Date.parse(ht.date);dt=Number.isNaN(bt)?0:bt}else typeof ht.date=="number"&&(dt=ht.date<2e9?(ht.date+A)*1e3:ht.date);return Math.max(st,dt)},0),rt=U||Z?new Date(Math.max(U,Z)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:$,transactionCount:et,templateCount:at,totalBalance:X,lastUpdated:rt}},[n,r,i]),L=()=>{try{const $={appVersion:"2.0 (PWA)",backupDate:Date.now(),appSettings:u||{theme:"system"},envelopes:n.map(Z=>({...Z,currentBalance:c(Z.id).toNumber(),lastUpdated:new Date().toISOString()})),transactions:r,distributionTemplates:i},et=new Blob([JSON.stringify($,null,2)],{type:"application/json"}),at=URL.createObjectURL(et),X=document.createElement("a");X.href=at,X.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(X),X.click(),document.body.removeChild(X),URL.revokeObjectURL(at);const U=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",U),E(U),k("success","Backup downloaded successfully.")}catch($){console.error($),k("error","Failed to create backup file.")}},B=()=>{try{const $=["Date","Description","Amount","Type","Envelope","Reconciled"],et=r.map(rt=>{const st=n.find(bt=>bt.id===rt.envelopeId)?.name||"Unknown",ht=(rt.description||"").replace(/"/g,'""');let dt="Invalid Date";if(rt.date){if(typeof rt.date=="string")dt=rt.date.split("T")[0];else if(typeof rt.date=="number"){const bt=rt.date<2e9?(rt.date+A)*1e3:rt.date;dt=new Date(bt).toISOString().split("T")[0]}}return[dt,`"${ht}"`,rt.amount.toFixed(2),rt.type,`"${st}"`,rt.reconciled?"Yes":"No"].join(",")}),at=[$.join(","),...et].join(`
`),X=new Blob([at],{type:"text/csv;charset=utf-8;"}),U=URL.createObjectURL(X),Z=document.createElement("a");Z.href=U,Z.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(U),k("success","CSV export ready to open in Excel/Numbers.")}catch($){console.error($),k("error","Failed to export CSV.")}},V=()=>{t.current?.click()},K=$=>{const et=$.target.files?.[0];if(!et)return;const at=new FileReader;at.onload=async X=>{try{const U=JSON.parse(X.target?.result),Z=await o(U);if(!Z.success){k("error",Z.message);return}if(U.appSettings?.theme)try{await d({theme:U.appSettings.theme})}catch(rt){console.error("Failed to update imported settings:",rt)}else if(U.appSettings?.isDarkMode!==void 0)try{const rt=U.appSettings.isDarkMode?"dark":"light";await d({theme:rt})}catch(rt){console.error("Failed to update imported settings:",rt)}k("success",`Loaded ${U.envelopes?.length??0} envelopes, ${U.transactions?.length??0} transactions, and ${U.distributionTemplates?.length??0} templates.`)}catch(U){console.error(U),k("error","Invalid backup file. Please verify the JSON.")}},at.readAsText(et),$.target.value=""},Y=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, templates, and settings from the cloud. This action cannot be undone."))try{await a(),k("success","All data has been permanently deleted."),e("/")}catch($){console.error("Reset failed:",$),k("error","Failed to delete all data. Some data may remain.")}},H=async()=>{if(!I.trim()){k("error","Please enter your password to confirm account deletion.");return}D(!0);try{await a(),await m(I)?k("success","Your account has been permanently deleted."):k("error","Failed to delete account. Please try again.")}catch($){console.error("Account deletion failed:",$),k("error","Failed to delete account. Please try again.")}finally{D(!1),P(!1),M("")}};return _.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[_.jsx("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:_.jsxs("div",{className:"flex items-center",children:[_.jsx("button",{onClick:()=>e(-1),className:"mr-3 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),_.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]})}),_.jsxs("div",{className:"p-4 space-y-6 max-w-2xl mx-auto",children:[b&&_.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${b.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[b.type==="success"?_.jsx(dx,{size:18}):_.jsx(Ng,{size:18}),b.text]}),_.jsx("section",{children:_.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx(_A,{className:"text-blue-500",size:22}),_.jsxs("div",{children:[_.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),_.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, templates, and settings."})]})]}),_.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[_.jsxs("div",{children:[_.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),_.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:j.envelopeCount})]}),_.jsxs("div",{children:[_.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),_.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:j.transactionCount})]}),_.jsxs("div",{children:[_.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Templates"}),_.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:j.templateCount})]}),_.jsxs("div",{children:[_.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Data Last Modified"}),_.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:j.lastUpdated})]})]})]})}),_.jsxs("section",{children:[_.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),_.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4",children:[_.jsxs("div",{className:"flex items-center justify-between mb-3",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[C==="light"&&_.jsx("span",{className:"text-orange-500 text-lg",children:""}),C==="dark"&&_.jsx("span",{className:"text-purple-500 text-lg",children:""}),C==="system"&&_.jsx("span",{className:"text-gray-500 text-lg",children:""}),_.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),_.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:C})]}),_.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-500 mb-3",children:"Choose your preferred appearance."}),_.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map($=>_.jsx("button",{onClick:async()=>{try{await d({theme:$.value})}catch(et){console.error("Failed to update theme setting:",et)}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${C===$.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:$.label},$.value))})]})]}),_.jsxs("section",{children:[_.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),_.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[_.jsxs("button",{onClick:L,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx(_A,{className:"text-blue-500",size:20}),_.jsxs("div",{className:"flex flex-col items-start",children:[_.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),_.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",w]})]})]}),_.jsx($c,{className:"text-gray-400",size:18})]}),_.jsxs("button",{onClick:V,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx(Pj,{className:"text-blue-500",size:20}),_.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),_.jsx($c,{className:"text-gray-400",size:18})]}),_.jsxs("button",{onClick:B,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx(tj,{className:"text-blue-500",size:20}),_.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Export Transactions (CSV)"})]}),_.jsx($c,{className:"text-gray-400",size:18})]}),_.jsx("input",{type:"file",ref:t,onChange:K,accept:".json",className:"hidden"})]})]}),_.jsxs("section",{children:[_.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Tips"}),_.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 text-sm text-gray-600 dark:text-zinc-300 space-y-2",children:[_.jsx("p",{children:"Create regular backups before major changes."}),_.jsx("p",{children:"Store backups in iCloud, Files, or another safe location."}),_.jsx("p",{children:"Backups are plain JSON files and can be inspected in any text editor."}),_.jsx("p",{children:"Restoring replaces all current envelopes, transactions, templates, and settings."})]})]}),_.jsxs("section",{children:[_.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),_.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:[_.jsxs("button",{onClick:Y,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors group border-b border-gray-100 dark:border-zinc-800",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx(Ng,{className:"text-red-500 group-hover:text-red-600",size:20}),_.jsx("span",{className:"text-red-500 group-hover:text-red-600 font-medium",children:"Reset All Data"})]}),_.jsx($c,{className:"text-gray-400",size:18})]}),_.jsxs("button",{onClick:()=>P(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors group",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx(Ng,{className:"text-red-600 group-hover:text-red-700",size:20}),_.jsx("span",{className:"text-red-600 group-hover:text-red-700 font-medium",children:"Delete Account"})]}),_.jsx($c,{className:"text-gray-400",size:18})]})]}),_.jsxs("div",{className:"px-1 pt-2 text-xs text-gray-500 dark:text-zinc-500 space-y-1",children:[_.jsx("div",{children:"This clears every envelope, transaction, and template. Use with caution."}),_.jsx("div",{children:"Deleting your account permanently removes all data and cannot be undone."})]})]}),_.jsxs("div",{className:"text-center pt-4 pb-12 text-xs text-gray-400 dark:text-zinc-500 font-medium",children:["House Budget PWA  App Version ",zQ.version]})]}),z&&_.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:_.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full p-6 shadow-xl",children:[_.jsxs("div",{className:"flex items-center justify-between mb-4",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:_.jsx(zD,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),_.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Account"})]}),_.jsx("button",{onClick:()=>P(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:_.jsx(oh,{size:20})})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[_.jsx("p",{className:"text-sm text-red-800 dark:text-red-200 font-medium mb-2",children:"This action cannot be undone"}),_.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Deleting your account will permanently remove all your data including envelopes, transactions, templates, and settings. This action is irreversible."})]}),_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Account Email: ",_.jsx("span",{className:"font-semibold",children:g?.email})]}),_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm Password"}),_.jsx("input",{type:"password",value:I,onChange:$=>M($.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your password",disabled:T})]}),_.jsxs("div",{className:"flex gap-3",children:[_.jsx("button",{onClick:()=>P(!1),disabled:T,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors disabled:opacity-50",children:"Cancel"}),_.jsx("button",{onClick:H,disabled:T||!I.trim(),className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-md transition-colors disabled:cursor-not-allowed flex items-center justify-center gap-2",children:T?_.jsxs(_.Fragment,{children:[_.jsx(dj,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Account"})]})]})]})})]})},BQ=()=>{const{addEnvelope:e}=Gn(),{setEnvelopeAllocation:t}=ks(),n=Ga(),[r]=g5(),[i,a]=q.useState(""),[o,c]=q.useState(""),u=r.get("type")==="piggybank",[d,h]=q.useState(""),[g,m]=q.useState(""),[b,S]=q.useState("#3B82F6"),w=async E=>{if(E.preventDefault(),!i.trim())return;const T=parseFloat(o),D=isNaN(T)?0:T,I=Gn.getState().envelopes,z=(I.length>0?Math.max(...I.map(C=>C.orderIndex??0)):-1)+1,P={name:i,currentBalance:D,lastUpdated:new Date().toISOString(),createdAt:new Date().toISOString(),isActive:!0,orderIndex:z};u&&(P.isPiggybank=!0,P.piggybankConfig={targetAmount:d?parseFloat(d):void 0,monthlyContribution:parseFloat(g||"0"),color:b,icon:"piggy-bank"});const A=await e(P);A&&await t(A,0),n("/")};return _.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-28",children:[_.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[_.jsx("button",{onClick:()=>n("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:_.jsx(Nd,{size:24})}),_.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:u?"New Piggybank":"New Envelope"})]}),_.jsx("div",{className:"p-4 max-w-md mx-auto",children:_.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[_.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:_.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:u?_.jsx(Md,{size:40}):_.jsx(nj,{size:40})})}),_.jsxs("form",{onSubmit:w,className:"p-6 space-y-6 pb-6",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:u?"Piggybank Name":"Envelope Name"}),_.jsx("input",{type:"text",id:"name",value:i,onChange:E=>a(E.target.value),placeholder:u?"e.g. Vacation Fund, Emergency Savings":"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),u&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),_.jsxs("div",{className:"relative",children:[_.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),_.jsx("input",{type:"number",id:"monthly-contribution",value:g,onChange:E=>m(E.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:u})]}),_.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),_.jsxs("div",{className:"relative",children:[_.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),_.jsx("input",{type:"number",id:"target-amount",value:d,onChange:E=>h(E.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),_.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),_.jsx("div",{className:"grid grid-cols-6 gap-2",children:[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}].map(E=>_.jsx("button",{type:"button",onClick:()=>S(E.value),className:`w-full aspect-square rounded-lg transition-all ${b===E.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:E.value},title:E.label},E.value))})]})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx("label",{htmlFor:"balance",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Initial Deposit (Optional)"}),_.jsxs("div",{className:"relative",children:[_.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),_.jsx("input",{type:"number",id:"balance",value:o,onChange:E=>c(E.target.value),onKeyDown:E=>{(E.key==="e"||E.key==="E"||E.key==="+"||E.key==="-")&&E.preventDefault()},placeholder:"0.00",step:"0.01",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),_.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:'This creates an "Initial Deposit" income transaction. You can also add money later by editing the envelope budget on the main screen.'})]}),_.jsxs("div",{className:"pt-4 flex gap-3",children:[_.jsx("button",{type:"button",onClick:()=>n("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),_.jsx("button",{type:"submit",disabled:!i.trim()||u&&!g,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${i.trim()&&(!u||g)?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:u?"Create Piggybank":"Create Envelope"})]})]})]})})]})},UQ=({envelopes:e,transactionAmount:t,onSplitChange:n})=>{const[r,i]=q.useState([]),[a,o]=q.useState({}),[c,u]=q.useState(t),d=S=>{i(w=>w.includes(S)?w.filter(E=>E!==S):[...w,S])},h=(S,w)=>{o(E=>({...E,[S]:w}))};q.useEffect(()=>{const S=Object.values(a).reduce((w,E)=>w+(E||0),0);u(t-S),n(a)},[a,t,n]),q.useEffect(()=>{const S={...a};Object.keys(S).forEach(w=>{r.includes(w)||delete S[w]}),Object.keys(S).length!==Object.keys(a).length&&o(S)},[r,a]);const g=()=>{i([]),o({})},m=Math.abs(c)<.01&&r.length>0,b=r.length>0&&Math.abs(c)>.01;return _.jsxs("div",{className:"space-y-3",children:[r.length>1&&_.jsxs("div",{className:`p-3 rounded-lg ${b?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":m?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700"}`,children:[_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Remaining to Split:"}),_.jsxs("span",{className:`font-bold text-lg ${b?"text-red-600 dark:text-red-400":m?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:["$",c.toFixed(2)]})]}),b&&_.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Split amounts must equal transaction total"})]}),_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("label",{className:"text-xs text-gray-500 dark:text-zinc-400",children:r.length>1?"Split Across Envelopes":"Select Envelope"}),r.length>0&&_.jsx("button",{type:"button",onClick:g,className:"text-xs text-blue-600 dark:text-blue-400",children:"Clear All"})]}),_.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-200 dark:border-zinc-800 rounded-lg",children:e.map(S=>_.jsxs("div",{className:"flex items-center py-3 px-3 border-b border-gray-100 dark:border-zinc-800 last:border-b-0 hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[_.jsx("input",{type:"checkbox",checked:r.includes(S.id),onChange:()=>d(S.id),className:"mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),_.jsx("span",{className:"flex-1 text-gray-900 dark:text-white",children:S.name}),r.includes(S.id)&&_.jsxs("div",{className:"flex items-center",children:[_.jsx("span",{className:"mr-1 text-gray-500 dark:text-zinc-400",children:"$"}),_.jsx("input",{type:"number",min:"0",step:"0.01",value:a[S.id]||"",onChange:w=>h(S.id,parseFloat(w.target.value)||0),className:"w-24 px-2 py-1 border border-gray-300 dark:border-zinc-700 rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]},S.id))})]})},FQ=()=>{const e=Ga(),{envelopes:t,addTransaction:n}=Gn(),[r,i]=q.useState(""),[a,o]=q.useState(""),[c,u]=q.useState(""),[d,h]=q.useState(new Date().toISOString().split("T")[0]),[g,m]=q.useState("expense"),[b,S]=q.useState({}),w=Object.keys(b).length>0,E=Object.values(b).reduce((P,A)=>P+(A||0),0),T=Math.abs(E-parseFloat(r||"0"))<.01,D=r&&parseFloat(r)>0&&w&&T,I=async P=>{if(P.preventDefault(),!D)return;const[A,C,k]=d.split("-").map(Number),j=new Date(A,C-1,k,12,0,0);console.log(" Selected date:",d),console.log(" Parsed date:",j.toISOString());try{const L=Object.entries(b).filter(([B,V])=>V>0);for(const[B,V]of L)await n({amount:V,description:c,merchant:a||void 0,date:j.toISOString(),envelopeId:B,type:g==="income"?"Income":"Expense",reconciled:!1});e("/")}catch(L){console.error("Error saving transaction:",L),alert("Failed to save transaction: "+(L instanceof Error?L.message:"Unknown error"))}},M=[...t].sort((P,A)=>{const C=P.orderIndex??0,k=A.orderIndex??0;return C!==k?C-k:P.name.localeCompare(A.name)}),z=g==="income"?"text-green-500":"text-red-500";return _.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[_.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center justify-between",children:[_.jsx("button",{onClick:()=>e(-1),className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),_.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),_.jsx("button",{onClick:I,disabled:!D,className:"text-blue-600 dark:text-blue-400 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]}),_.jsx("div",{className:"p-4 max-w-md mx-auto",children:_.jsxs("form",{onSubmit:I,className:"space-y-6",children:[_.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:_.jsxs("div",{className:"flex",children:[_.jsx("button",{type:"button",onClick:()=>m("expense"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${g==="expense"?"bg-red-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Expense"}),_.jsx("button",{type:"button",onClick:()=>m("income"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${g==="income"?"bg-green-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Income"})]})}),_.jsxs("div",{className:"text-center",children:[_.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),_.jsxs("div",{className:"relative inline-block",children:[_.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${z}`,children:"$"}),_.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:r,onChange:P=>{const A=P.target.value;(A===""||!isNaN(parseFloat(A))&&parseFloat(A)>=0)&&i(A)},onKeyDown:P=>{(P.key==="e"||P.key==="E"||P.key==="+"||P.key==="-")&&P.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${z} placeholder-gray-700`})]})]}),_.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[_.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),_.jsx("input",{type:"text",value:a,onChange:P=>o(P.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),_.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[_.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),_.jsx("input",{type:"text",value:c,onChange:P=>u(P.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),_.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[_.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),_.jsx("input",{type:"date",value:d,onChange:P=>h(P.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),_.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:_.jsx(UQ,{envelopes:M,transactionAmount:parseFloat(r)||0,onSplitChange:S})})]})})]})},GQ=()=>{const e=Ga(),{transactions:t,envelopes:n,updateTransaction:r,deleteTransaction:i,restoreTransaction:a}=Gn(),{showToast:o}=tf(),{currentMonth:c}=ks(),[u,d]=q.useState(!1),[h,g]=q.useState(""),[m,b]=q.useState("all"),[S,w]=q.useState("All"),[E,T]=q.useState(!1),[D,I]=q.useState("all"),[M,z]=q.useState(!1),[P,A]=q.useState(()=>{const Y=new Date;return Y.setMonth(Y.getMonth()-1),Y.toISOString().split("T")[0]}),[C,k]=q.useState(()=>new Date().toISOString().split("T")[0]),[j,L]=q.useState(null),B=q.useMemo(()=>{console.log(" Filtering transactions:",{totalTransactions:t.length,showAllTime:M,currentMonth:c,transactionMonths:t.map($=>({id:$.id,month:$.month,date:$.date}))});let Y=t;return M||(Y=t.filter($=>$.month===c||!$.month),console.log(" After month filter:",Y.length,"transactions remain")),Y.map($=>{if(!$)return null;let et=$.date;if(typeof $.date=="number"){const X=($.date+978307200)*1e3;et=new Date(X).toISOString()}else if(!$.date||typeof $.date!="string")return null;return{...$,date:et}}).filter(Boolean).filter($=>{if(h){const at=h.toLowerCase(),X=n.find(rt=>rt.id===$.envelopeId)?.name.toLowerCase()||"",U=$.amount.toFixed(2);if(!($.description.toLowerCase().includes(at)||X.includes(at)||U.includes(at)))return!1}if(m!=="all"&&$.envelopeId!==m||S!=="All"&&$.type!==S||!$.date||typeof $.date!="string")return!1;const et=$.date.split("T")[0];return!(D!=="all"&&new Date(et).getMonth()!==parseInt(D)||E&&!$.reconciled)}).sort(($,et)=>new Date(et.date).getTime()-new Date($.date).getTime())},[t,n,h,m,S,P,C,E,M,c]);console.log(" Final filtered transactions:",{count:B.length,transactions:B.map(Y=>({id:Y.id,description:Y.description,amount:Y.amount,date:Y.date,month:Y.month,type:Y.type}))});const V=j?n.find(Y=>Y.id===j.envelopeId):null,K=Y=>{const H={...Y,reconciled:!Y.reconciled};r(H)};return _.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20 transition-colors duration-200",children:[_.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[_.jsxs("div",{className:"flex items-center",children:[_.jsx("button",{onClick:()=>e(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:_.jsx(Nd,{size:24})}),_.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),_.jsx("button",{onClick:()=>d(!u),className:`p-2 rounded-full transition-colors ${u?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:_.jsx(ij,{size:20,className:u?"fill-current":""})})]}),_.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 flex justify-between items-center",children:[_.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:["Month: ",c]}),_.jsx("button",{onClick:()=>z(!M),className:`text-sm px-3 py-1 rounded-md ${M?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-zinc-800 dark:text-zinc-300"}`,children:M?"Current Month Only":"All Time"})]}),_.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${u?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:_.jsxs("div",{className:"p-4 space-y-4",children:[_.jsxs("div",{className:"relative",children:[_.jsx(_j,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),_.jsx("input",{type:"text",placeholder:"Search transactions...",value:h,onChange:Y=>g(Y.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),h&&_.jsx("button",{onClick:()=>g(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:_.jsx(oh,{size:16})})]}),_.jsxs("div",{className:"space-y-1",children:[_.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),_.jsxs("select",{value:m,onChange:Y=>b(Y.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[_.jsx("option",{value:"all",children:"All Envelopes"}),n.sort((Y,H)=>Y.name.localeCompare(H.name)).map(Y=>_.jsx("option",{value:Y.id,children:Y.name},Y.id))]})]}),_.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(Y=>_.jsx("button",{onClick:()=>w(Y),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${S===Y?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:Y},Y))}),_.jsxs("div",{className:"space-y-1",children:[_.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Month"}),_.jsxs("select",{value:D,onChange:Y=>I(Y.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[_.jsx("option",{value:"all",children:"All Months"}),Array.from({length:12},(Y,H)=>H).map(Y=>_.jsx("option",{value:Y,children:new Date(2022,Y).toLocaleString("default",{month:"long"})},Y))]})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{className:"space-y-1",children:[_.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"From"}),_.jsx("div",{className:"relative",children:_.jsx("input",{type:"date",value:P,onChange:Y=>A(Y.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),_.jsxs("div",{className:"space-y-1",children:[_.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"To"}),_.jsx("div",{className:"relative",children:_.jsx("input",{type:"date",value:C,onChange:Y=>k(Y.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]}),_.jsxs("div",{className:"flex items-center justify-between pt-2",children:[_.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),_.jsx("button",{onClick:()=>T(!E),className:`w-11 h-6 rounded-full transition-colors relative ${E?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:_.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${E?"translate-x-5":"translate-x-0"}`})})]}),_.jsxs("div",{className:"flex items-center justify-between pt-2",children:[_.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show all time"}),_.jsx("button",{onClick:()=>z(!M),className:`w-11 h-6 rounded-full transition-colors relative ${M?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:_.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${M?"translate-x-5":"translate-x-0"}`})})]})]})}),_.jsx("div",{className:"p-4 max-w-2xl mx-auto",children:_.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:B.length===0?_.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):_.jsx(jd,{initial:!1,mode:"popLayout",children:B.map(Y=>{const H=n.find($=>$.id===Y.envelopeId);return _.jsx(Uu.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:_.jsx(NS,{onDelete:()=>{if(!Y.id)return;const $={...Y};i(Y.id),o("Transaction deleted","neutral",()=>a($))},children:_.jsx(nP,{transaction:Y,envelopeName:H?.name||"Unknown Envelope",onReconcile:()=>K(Y),onEdit:()=>{H?L(Y):alert("Cannot edit: Envelope deleted.")}})})},Y.id)})})})}),j&&V&&_.jsx(eP,{isVisible:!!j,onClose:()=>L(null),mode:"edit",currentEnvelope:V,initialTransaction:j})]})},rP=[{id:"length",label:"Minimum 12 characters",regex:/^.{12,}$/},{id:"uppercase",label:"At least one uppercase letter (A-Z)",regex:/[A-Z]/},{id:"lowercase",label:"At least one lowercase letter (a-z)",regex:/[a-z]/},{id:"number",label:"At least one number (0-9)",regex:/\d/},{id:"special",label:"At least one special character (!@#$%^&*)",regex:/[!@#$%^&*]/}],qQ=e=>{if(!e)return{score:0,level:"weak",color:"text-gray-400",label:"Enter password"};const r=rP.map(c=>({...c,met:c.regex.test(e)})).filter(c=>c.met).length;let i,a,o;return r<=1?(i="weak",a="text-red-500",o="Weak"):r<=3?(i="medium",a="text-yellow-500",o="Medium"):r===4?(i="strong",a="text-blue-500",o="Strong"):(i="very-strong",a="text-green-500",o="Very Strong"),{score:r,level:i,color:a,label:o}},MS=e=>{const t=rP.map(i=>({...i,met:i.regex.test(e)})),n=qQ(e),r=t.every(i=>i.met);return{requirements:t,strength:n,isValid:r,isEmpty:!e.trim()}},HQ=({password:e,className:t=""})=>{const{strength:n,isEmpty:r}=MS(e);return r?null:_.jsxs("div",{className:`flex items-center gap-2 ${t}`,children:[_.jsx("div",{className:"flex-1",children:_.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(i=>_.jsx("div",{className:`h-1 flex-1 rounded-full ${i<=n.score?n.score<=1?"bg-red-500":n.score<=3?"bg-yellow-500":n.score===4?"bg-blue-500":"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`},i))})}),_.jsx("span",{className:`text-sm font-medium ${n.color}`,children:n.label})]})},$Q=({password:e,className:t=""})=>{const{requirements:n,isEmpty:r}=MS(e);return r?null:_.jsx("div",{className:`space-y-1 ${t}`,children:n.map(i=>_.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.met?_.jsx(I5,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):_.jsx(oh,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),_.jsx("span",{className:i.met?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400",children:i.label})]},i.id))})},YQ=()=>{const[e,t]=q.useState(""),[n,r]=q.useState(""),[i,a]=q.useState(""),[o,c]=q.useState(!1),[u,d]=q.useState(!1),[h,g]=q.useState(!1),[m,b]=q.useState(!1),{login:S,register:w,sendPasswordReset:E,isLoading:T,loginError:D,clearError:I}=Ni(),M=MS(n),z=async A=>{if(A.preventDefault(),I(),e.trim()&&n.trim())if(u){if(!i.trim()||!M.isValid)return;await w(e.trim(),n,i.trim())}else await S(e.trim(),n)},P=async A=>{A.preventDefault(),e.trim()&&await E(e.trim())&&b(!0)};return q.useEffect(()=>{t(""),r(""),a(""),b(!1)},[u,h]),_.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:_.jsxs("div",{className:"max-w-md w-full space-y-8",children:[_.jsx("div",{className:"text-center",children:_.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),_.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"Personal Budget"})]}),_.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for personal finance"})]})}),_.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:h?_.jsxs("form",{onSubmit:P,className:"space-y-6",children:[_.jsxs("div",{className:"text-center mb-2",children:[_.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),_.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:_.jsx(O1,{className:"h-5 w-5 text-gray-400"})}),_.jsx("input",{id:"reset-email",type:"email",value:e,onChange:A=>t(A.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:T,autoComplete:"email"})]})]}),m?_.jsxs("div",{className:"text-center py-4",children:[_.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:_.jsx(O1,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),_.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),_.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",_.jsx("span",{className:"font-medium",children:e})]}),_.jsxs("button",{type:"button",onClick:()=>g(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[_.jsx(Nd,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):_.jsxs(_.Fragment,{children:[_.jsx("button",{type:"submit",disabled:T||!e.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:T?"Sending...":"Send Reset Link"}),_.jsx("div",{className:"mt-4 text-center",children:_.jsxs("button",{type:"button",onClick:()=>g(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:T,children:[_.jsx(Nd,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):_.jsxs("form",{onSubmit:z,className:"space-y-6",children:[_.jsxs("div",{className:"text-center mb-6",children:[_.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:u?"Create Account":"Sign In"}),_.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:u?"Create a new account to get started":"Sign in to your account"})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),_.jsx("input",{id:"email",type:"email",value:e,onChange:A=>t(A.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:T,autoComplete:"username"})]}),u&&_.jsxs("div",{children:[_.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),_.jsx("input",{id:"displayName",type:"text",value:i,onChange:A=>a(A.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:T})]}),_.jsxs("div",{children:[_.jsxs("div",{className:"flex items-center justify-between mb-2",children:[_.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!u&&_.jsx("button",{type:"button",onClick:()=>g(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:T,children:"Forgot password?"})]}),_.jsxs("div",{className:"relative",children:[_.jsx("input",{id:"password",type:o?"text":"password",value:n,onChange:A=>r(A.target.value),className:`w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${u&&n&&!M.isValid?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your password",required:!0,disabled:T,autoComplete:u?"new-password":"current-password"}),_.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:T,children:o?_.jsx(K5,{className:"h-5 w-5"}):_.jsx(Z5,{className:"h-5 w-5"})})]}),u&&n&&_.jsx("div",{className:"mt-2",children:_.jsx(HQ,{password:n})}),u&&n&&_.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:_.jsx($Q,{password:n})})]}),D&&_.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:[D,D.includes("verify your email")&&_.jsx("div",{className:"mt-3",children:_.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Please check your email and click the verification link to continue."})})]}),_.jsx("button",{type:"submit",disabled:T||!e.trim()||!n.trim()||u&&!i.trim()||u&&!M.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:T?u?"Creating Account...":"Signing in...":u?"Create Account":"Sign In"}),_.jsx("div",{className:"mt-6 text-center",children:_.jsxs("button",{type:"button",onClick:()=>{d(!u),g(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:T,children:[_.jsx(jj,{className:"h-4 w-4"}),u?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},mD=()=>{const[e,t]=q.useState(!1),[n,r]=q.useState(!1),{currentUser:i,resendEmailVerification:a,logout:o,loginError:c}=Ni();q.useEffect(()=>{i||console.warn("EmailVerificationView: No current user, this should not happen")},[i]);const u=async()=>{t(!0),r(!1);const h=await a();t(!1),h&&(r(!0),setTimeout(()=>r(!1),3e3))},d=async()=>{await o()};return i?_.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:_.jsxs("div",{className:"max-w-md w-full space-y-8",children:[_.jsx("div",{className:"text-center",children:_.jsx("div",{className:"flex flex-col items-center gap-3 mb-2",children:_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),_.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]})})}),_.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:_.jsx(O1,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),_.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Check your email"}),_.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a verification link to"," ",_.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.email})]}),_.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:_.jsxs("div",{className:"flex items-start gap-3",children:[_.jsx(dx,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),_.jsxs("div",{className:"text-left",children:[_.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"What to do next:"}),_.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[_.jsx("li",{children:"1. Open your email inbox"}),_.jsx("li",{children:"2. Find the email from House Budget"}),_.jsx("li",{children:'3. Click the "Verify Email" link'}),_.jsx("li",{children:"4. Return here and sign in"})]})]})]})}),c&&_.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:c}),n&&_.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:"Verification email sent successfully!"}),_.jsx("button",{onClick:u,disabled:e,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed mb-4 flex items-center justify-center gap-2",children:e?_.jsxs(_.Fragment,{children:[_.jsx(jl,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):_.jsxs(_.Fragment,{children:[_.jsx(jl,{className:"h-4 w-4"}),"Resend verification email"]})}),_.jsxs("button",{onClick:d,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",children:[_.jsx(Nd,{className:"h-4 w-4"}),"Back to sign in"]})]})}),_.jsx("div",{className:"text-center",children:_.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Didn't receive the email? Check your spam folder or try resending."})})]})}):null},XQ=()=>{const{message:e,type:t,isVisible:n,undoAction:r,hideToast:i}=tf(),a=()=>{switch(t){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return _.jsx(jd,{children:n&&_.jsx(Uu.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-4 right-4 z-50 mb-[calc(env(safe-area-inset-bottom)+20px)]",children:_.jsxs("div",{className:`rounded-xl shadow-lg p-4 flex items-center justify-between ${a()}`,children:[_.jsx("div",{className:"flex items-center flex-1 min-w-0",children:_.jsx("span",{className:"text-sm font-medium truncate pr-2",children:e})}),_.jsxs("div",{className:"flex items-center gap-2 ml-3 flex-shrink-0",children:[r&&_.jsxs("button",{onClick:()=>{r(),i()},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-bold transition-colors",children:[_.jsx(Mj,{size:14,className:"inline mr-1"}),"Undo"]}),_.jsx("button",{onClick:i,className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:_.jsx(oh,{size:16})})]})]})})})};class _a extends q.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("ErrorBoundary caught an error:",t,n),this.setState({error:t,errorInfo:n}),this.props.onError&&this.props.onError(t,n)}componentDidUpdate(t){this.props.resetKeys&&this.props.resetOnPropsChange&&this.props.resetKeys.some((r,i)=>r!==t.resetKeys?.[i])&&this.state.hasError&&this.resetErrorBoundary()}resetErrorBoundary=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:_.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:_.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[_.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900/30 rounded-full",children:_.jsx(zD,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),_.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),_.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. You can try refreshing or going back to the home screen."}),!1,_.jsxs("div",{className:"flex flex-col gap-3",children:[_.jsxs("button",{onClick:this.resetErrorBoundary,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:[_.jsx(jl,{className:"h-4 w-4"}),"Try Again"]}),_.jsxs("button",{onClick:()=>window.location.href="/#/",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-md transition-colors",children:[_.jsx(sj,{className:"h-4 w-4"}),"Go to Home"]})]})]})}):this.props.children}}const WQ=()=>{const e=Ga(),t=Fa(),n=[{path:"/",label:"Budget",icon:_.jsx(hx,{className:"w-6 h-6"}),enabled:!0},{path:"/transactions",label:"Transactions",icon:_.jsx(lj,{className:"w-6 h-6"}),enabled:!0},{path:"/settings",label:"Settings",icon:_.jsx(VD,{className:"w-6 h-6"}),enabled:!0},{path:"#",label:"Future",icon:_.jsx(bA,{className:"w-6 h-6"}),enabled:!1},{path:"#",label:"Future",icon:_.jsx(bA,{className:"w-6 h-6"}),enabled:!1}],r=(a,o)=>{o&&a!=="#"&&e(a)},i=a=>a==="/"?t.pathname==="/":t.pathname.startsWith(a);return _.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-zinc-900 border-t border-gray-200 dark:border-zinc-800 safe-area-inset-bottom z-50",children:_.jsx("div",{className:"flex justify-around items-center h-16 max-w-screen-xl mx-auto px-2",children:n.map((a,o)=>_.jsxs("button",{onClick:()=>r(a.path,a.enabled),disabled:!a.enabled,className:`flex flex-col items-center justify-center flex-1 h-full transition-colors ${a.enabled?i(a.path)?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white":"text-gray-300 dark:text-zinc-700 cursor-not-allowed"}`,children:[_.jsx("div",{className:`transition-transform ${i(a.path)&&a.enabled?"scale-110":""}`,children:a.icon}),_.jsx("span",{className:"text-xs mt-1 font-medium",children:a.label})]},o))})})};function KQ(){const[e,t]=q.useState(!0),{appSettings:n}=Gn(),{isAuthenticated:r,isInitialized:i,initializeAuth:a,lastAuthTime:o,offlineGracePeriod:c,currentUser:u}=Ni();if(q.useEffect(()=>{const g=setTimeout(()=>{t(!1)},2e3);return()=>clearTimeout(g)},[]),q.useEffect(()=>a(),[a]),q.useEffect(()=>{const g=document.documentElement,m=window.matchMedia("(prefers-color-scheme: dark)"),b=()=>{const S=n?.theme??"system",w=m.matches;S==="dark"||S==="system"&&w?g.classList.add("dark"):g.classList.remove("dark")};if(b(),n?.theme==="system")return m.addEventListener("change",b),()=>m.removeEventListener("change",b)},[n]),e||!i)return _.jsx(tP,{message:"Initializing Personal Budget..."});if(!r)return u?_.jsx(_a,{children:_.jsx(mD,{})}):_.jsx(_a,{children:_.jsx(YQ,{})});const h=typeof navigator<"u"&&!navigator.onLine&&r&&o&&Date.now()-o<c;return _.jsxs(_a,{children:[h&&_.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200 p-4",children:_.jsxs("div",{className:"flex",children:[_.jsx("div",{className:"flex-shrink-0",children:_.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:_.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),_.jsx("div",{className:"ml-3",children:_.jsxs("p",{className:"text-sm",children:[_.jsx("strong",{children:"Offline Access:"})," You're using cached authentication. Expires in"," ",Math.ceil((c-(Date.now()-o))/(1440*60*1e3))," ","days. Connect to internet to refresh."]})})]})}),_.jsxs(u5,{children:[_.jsxs(BV,{children:[_.jsx(bo,{path:"/",element:_.jsx(_a,{children:_.jsx(kQ,{})})}),_.jsx(bo,{path:"/envelope/:id",element:_.jsx(_a,{children:_.jsx(VQ,{})})}),_.jsx(bo,{path:"/add-envelope",element:_.jsx(_a,{children:_.jsx(BQ,{})})}),_.jsx(bo,{path:"/add-transaction",element:_.jsx(_a,{children:_.jsx(FQ,{})})}),_.jsx(bo,{path:"/transactions",element:_.jsx(_a,{children:_.jsx(GQ,{})})}),_.jsx(bo,{path:"/settings",element:_.jsx(_a,{children:_.jsx(LQ,{})})}),_.jsx(bo,{path:"/verify-email",element:_.jsx(_a,{children:_.jsx(mD,{})})})]}),_.jsx(WQ,{})]}),_.jsx(XQ,{})]})}X3({onNeedRefresh(){},onOfflineReady(){console.log("App is ready for offline work")}});q3.createRoot(document.getElementById("root")).render(_.jsx(q.StrictMode,{children:_.jsx(KQ,{})}));
