(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function F5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var s1={exports:{}},qf={};var XC;function G5(){if(XC)return qf;XC=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:a}}return qf.Fragment=e,qf.jsx=n,qf.jsxs=n,qf}var WC;function q5(){return WC||(WC=1,s1.exports=G5()),s1.exports}var y=q5(),o1={exports:{}},st={};var QC;function H5(){if(QC)return st;QC=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),m=Symbol.iterator;function x(B){return B===null||typeof B!="object"?null:(B=m&&B[m]||B["@@iterator"],typeof B=="function"?B:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,S={};function T(B,Y,ne){this.props=B,this.context=Y,this.refs=S,this.updater=ne||_}T.prototype.isReactComponent={},T.prototype.setState=function(B,Y){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Y,"setState")},T.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function D(){}D.prototype=T.prototype;function R(B,Y,ne){this.props=B,this.context=Y,this.refs=S,this.updater=ne||_}var O=R.prototype=new D;O.constructor=R,E(O,T.prototype),O.isPureReactComponent=!0;var L=Array.isArray;function j(){}var A={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function k(B,Y,ne){var ae=ne.ref;return{$$typeof:t,type:B,key:Y,ref:ae!==void 0?ae:null,props:ne}}function M(B,Y){return k(B.type,Y,B.props)}function U(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function z(B){var Y={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ne){return Y[ne]})}var P=/\/+/g;function W(B,Y){return typeof B=="object"&&B!==null&&B.key!=null?z(""+B.key):Y.toString(36)}function Q(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(j,j):(B.status="pending",B.then(function(Y){B.status==="pending"&&(B.status="fulfilled",B.value=Y)},function(Y){B.status==="pending"&&(B.status="rejected",B.reason=Y)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function $(B,Y,ne,ae,he){var le=typeof B;(le==="undefined"||le==="boolean")&&(B=null);var ge=!1;if(B===null)ge=!0;else switch(le){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(B.$$typeof){case t:case e:ge=!0;break;case h:return ge=B._init,$(ge(B._payload),Y,ne,ae,he)}}if(ge)return he=he(B),ge=ae===""?"."+W(B,0):ae,L(he)?(ne="",ge!=null&&(ne=ge.replace(P,"$&/")+"/"),$(he,Y,ne,"",function(Ue){return Ue})):he!=null&&(U(he)&&(he=M(he,ne+(he.key==null||B&&B.key===he.key?"":(""+he.key).replace(P,"$&/")+"/")+ge)),Y.push(he)),1;ge=0;var xe=ae===""?".":ae+":";if(L(B))for(var Se=0;Se<B.length;Se++)ae=B[Se],le=xe+W(ae,Se),ge+=$(ae,Y,ne,le,he);else if(Se=x(B),typeof Se=="function")for(B=Se.call(B),Se=0;!(ae=B.next()).done;)ae=ae.value,le=xe+W(ae,Se++),ge+=$(ae,Y,ne,le,he);else if(le==="object"){if(typeof B.then=="function")return $(Q(B),Y,ne,ae,he);throw Y=String(B),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return ge}function H(B,Y,ne){if(B==null)return B;var ae=[],he=0;return $(B,ae,"","",function(le){return Y.call(ne,le,he++)}),ae}function ee(B){if(B._status===-1){var Y=B._result;Y=Y(),Y.then(function(ne){(B._status===0||B._status===-1)&&(B._status=1,B._result=ne)},function(ne){(B._status===0||B._status===-1)&&(B._status=2,B._result=ne)}),B._status===-1&&(B._status=0,B._result=Y)}if(B._status===1)return B._result.default;throw B._result}var te=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},fe={map:H,forEach:function(B,Y,ne){H(B,function(){Y.apply(this,arguments)},ne)},count:function(B){var Y=0;return H(B,function(){Y++}),Y},toArray:function(B){return H(B,function(Y){return Y})||[]},only:function(B){if(!U(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return st.Activity=g,st.Children=fe,st.Component=T,st.Fragment=n,st.Profiler=i,st.PureComponent=R,st.StrictMode=r,st.Suspense=u,st.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,st.__COMPILER_RUNTIME={__proto__:null,c:function(B){return A.H.useMemoCache(B)}},st.cache=function(B){return function(){return B.apply(null,arguments)}},st.cacheSignal=function(){return null},st.cloneElement=function(B,Y,ne){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var ae=E({},B.props),he=B.key;if(Y!=null)for(le in Y.key!==void 0&&(he=""+Y.key),Y)!C.call(Y,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&Y.ref===void 0||(ae[le]=Y[le]);var le=arguments.length-2;if(le===1)ae.children=ne;else if(1<le){for(var ge=Array(le),xe=0;xe<le;xe++)ge[xe]=arguments[xe+2];ae.children=ge}return k(B.type,he,ae)},st.createContext=function(B){return B={$$typeof:o,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:a,_context:B},B},st.createElement=function(B,Y,ne){var ae,he={},le=null;if(Y!=null)for(ae in Y.key!==void 0&&(le=""+Y.key),Y)C.call(Y,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(he[ae]=Y[ae]);var ge=arguments.length-2;if(ge===1)he.children=ne;else if(1<ge){for(var xe=Array(ge),Se=0;Se<ge;Se++)xe[Se]=arguments[Se+2];he.children=xe}if(B&&B.defaultProps)for(ae in ge=B.defaultProps,ge)he[ae]===void 0&&(he[ae]=ge[ae]);return k(B,le,he)},st.createRef=function(){return{current:null}},st.forwardRef=function(B){return{$$typeof:c,render:B}},st.isValidElement=U,st.lazy=function(B){return{$$typeof:h,_payload:{_status:-1,_result:B},_init:ee}},st.memo=function(B,Y){return{$$typeof:d,type:B,compare:Y===void 0?null:Y}},st.startTransition=function(B){var Y=A.T,ne={};A.T=ne;try{var ae=B(),he=A.S;he!==null&&he(ne,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(j,te)}catch(le){te(le)}finally{Y!==null&&ne.types!==null&&(Y.types=ne.types),A.T=Y}},st.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},st.use=function(B){return A.H.use(B)},st.useActionState=function(B,Y,ne){return A.H.useActionState(B,Y,ne)},st.useCallback=function(B,Y){return A.H.useCallback(B,Y)},st.useContext=function(B){return A.H.useContext(B)},st.useDebugValue=function(){},st.useDeferredValue=function(B,Y){return A.H.useDeferredValue(B,Y)},st.useEffect=function(B,Y){return A.H.useEffect(B,Y)},st.useEffectEvent=function(B){return A.H.useEffectEvent(B)},st.useId=function(){return A.H.useId()},st.useImperativeHandle=function(B,Y,ne){return A.H.useImperativeHandle(B,Y,ne)},st.useInsertionEffect=function(B,Y){return A.H.useInsertionEffect(B,Y)},st.useLayoutEffect=function(B,Y){return A.H.useLayoutEffect(B,Y)},st.useMemo=function(B,Y){return A.H.useMemo(B,Y)},st.useOptimistic=function(B,Y){return A.H.useOptimistic(B,Y)},st.useReducer=function(B,Y,ne){return A.H.useReducer(B,Y,ne)},st.useRef=function(B){return A.H.useRef(B)},st.useState=function(B){return A.H.useState(B)},st.useSyncExternalStore=function(B,Y,ne){return A.H.useSyncExternalStore(B,Y,ne)},st.useTransition=function(){return A.H.useTransition()},st.version="19.2.0",st}var ZC;function K_(){return ZC||(ZC=1,o1.exports=H5()),o1.exports}var G=K_();const hm=F5(G);var l1={exports:{}},Hf={},c1={exports:{}},u1={};var JC;function $5(){return JC||(JC=1,(function(t){function e($,H){var ee=$.length;$.push(H);e:for(;0<ee;){var te=ee-1>>>1,fe=$[te];if(0<i(fe,H))$[te]=H,$[ee]=fe,ee=te;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var H=$[0],ee=$.pop();if(ee!==H){$[0]=ee;e:for(var te=0,fe=$.length,B=fe>>>1;te<B;){var Y=2*(te+1)-1,ne=$[Y],ae=Y+1,he=$[ae];if(0>i(ne,ee))ae<fe&&0>i(he,ne)?($[te]=he,$[ae]=ee,te=ae):($[te]=ne,$[Y]=ee,te=Y);else if(ae<fe&&0>i(he,ee))$[te]=he,$[ae]=ee,te=ae;else break e}}return H}function i($,H){var ee=$.sortIndex-H.sortIndex;return ee!==0?ee:$.id-H.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],h=1,g=null,m=3,x=!1,_=!1,E=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function O($){for(var H=n(d);H!==null;){if(H.callback===null)r(d);else if(H.startTime<=$)r(d),H.sortIndex=H.expirationTime,e(u,H);else break;H=n(d)}}function L($){if(E=!1,O($),!_)if(n(u)!==null)_=!0,j||(j=!0,z());else{var H=n(d);H!==null&&Q(L,H.startTime-$)}}var j=!1,A=-1,C=5,k=-1;function M(){return S?!0:!(t.unstable_now()-k<C)}function U(){if(S=!1,j){var $=t.unstable_now();k=$;var H=!0;try{e:{_=!1,E&&(E=!1,D(A),A=-1),x=!0;var ee=m;try{t:{for(O($),g=n(u);g!==null&&!(g.expirationTime>$&&M());){var te=g.callback;if(typeof te=="function"){g.callback=null,m=g.priorityLevel;var fe=te(g.expirationTime<=$);if($=t.unstable_now(),typeof fe=="function"){g.callback=fe,O($),H=!0;break t}g===n(u)&&r(u),O($)}else r(u);g=n(u)}if(g!==null)H=!0;else{var B=n(d);B!==null&&Q(L,B.startTime-$),H=!1}}break e}finally{g=null,m=ee,x=!1}H=void 0}}finally{H?z():j=!1}}}var z;if(typeof R=="function")z=function(){R(U)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,W=P.port2;P.port1.onmessage=U,z=function(){W.postMessage(null)}}else z=function(){T(U,0)};function Q($,H){A=T(function(){$(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function($){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var ee=m;m=H;try{return $()}finally{m=ee}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function($,H){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ee=m;m=$;try{return H()}finally{m=ee}},t.unstable_scheduleCallback=function($,H,ee){var te=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?te+ee:te):ee=te,$){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=ee+fe,$={id:h++,callback:H,priorityLevel:$,startTime:ee,expirationTime:fe,sortIndex:-1},ee>te?($.sortIndex=ee,e(d,$),n(u)===null&&$===n(d)&&(E?(D(A),A=-1):E=!0,Q(L,ee-te))):($.sortIndex=fe,e(u,$),_||x||(_=!0,j||(j=!0,z()))),$},t.unstable_shouldYield=M,t.unstable_wrapCallback=function($){var H=m;return function(){var ee=m;m=H;try{return $.apply(this,arguments)}finally{m=ee}}}})(u1)),u1}var e2;function Y5(){return e2||(e2=1,c1.exports=$5()),c1.exports}var d1={exports:{}},vr={};var t2;function K5(){if(t2)return vr;t2=1;var t=K_();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,d,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:u,containerInfo:d,implementation:h}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return vr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,vr.createPortal=function(u,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(u,d,null,h)},vr.flushSync=function(u){var d=o.T,h=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=h,r.d.f()}},vr.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},vr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},vr.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var h=d.as,g=c(h,d.crossOrigin),m=typeof d.integrity=="string"?d.integrity:void 0,x=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:m,fetchPriority:x}):h==="script"&&r.d.X(u,{crossOrigin:g,integrity:m,fetchPriority:x,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},vr.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=c(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},vr.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,g=c(h,d.crossOrigin);r.d.L(u,h,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},vr.preloadModule=function(u,d){if(typeof u=="string")if(d){var h=c(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},vr.requestFormReset=function(u){r.d.r(u)},vr.unstable_batchedUpdates=function(u,d){return u(d)},vr.useFormState=function(u,d,h){return o.H.useFormState(u,d,h)},vr.useFormStatus=function(){return o.H.useHostTransitionStatus()},vr.version="19.2.0",vr}var n2;function X5(){if(n2)return d1.exports;n2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),d1.exports=K5(),d1.exports}var r2;function W5(){if(r2)return Hf;r2=1;var t=Y5(),e=K_(),n=X5();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,f=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(f=l.return),s=l.return;while(s)}return l.tag===3?f:null}function o(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function c(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(r(188))}function d(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(r(188));return l!==s?null:s}for(var f=s,p=l;;){var b=f.return;if(b===null)break;var w=b.alternate;if(w===null){if(p=b.return,p!==null){f=p;continue}break}if(b.child===w.child){for(w=b.child;w;){if(w===f)return u(b),s;if(w===p)return u(b),l;w=w.sibling}throw Error(r(188))}if(f.return!==p.return)f=b,p=w;else{for(var N=!1,F=b.child;F;){if(F===f){N=!0,f=b,p=w;break}if(F===p){N=!0,p=b,f=w;break}F=F.sibling}if(!N){for(F=w.child;F;){if(F===f){N=!0,f=w,p=b;break}if(F===p){N=!0,p=w,f=b;break}F=F.sibling}if(!N)throw Error(r(189))}}if(f.alternate!==p)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?s:l}function h(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=h(s),l!==null)return l;s=s.sibling}return null}var g=Object.assign,m=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),R=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function z(s){return s===null||typeof s!="object"?null:(s=U&&s[U]||s["@@iterator"],typeof s=="function"?s:null)}var P=Symbol.for("react.client.reference");function W(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===P?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case E:return"Fragment";case T:return"Profiler";case S:return"StrictMode";case L:return"Suspense";case j:return"SuspenseList";case k:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case _:return"Portal";case R:return s.displayName||"Context";case D:return(s._context.displayName||"Context")+".Consumer";case O:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case A:return l=s.displayName||null,l!==null?l:W(s.type)||"Memo";case C:l=s._payload,s=s._init;try{return W(s(l))}catch{}}return null}var Q=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},te=[],fe=-1;function B(s){return{current:s}}function Y(s){0>fe||(s.current=te[fe],te[fe]=null,fe--)}function ne(s,l){fe++,te[fe]=s.current,s.current=l}var ae=B(null),he=B(null),le=B(null),ge=B(null);function xe(s,l){switch(ne(le,l),ne(he,s),ne(ae,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?yC(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=yC(l),s=bC(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Y(ae),ne(ae,s)}function Se(){Y(ae),Y(he),Y(le)}function Ue(s){s.memoizedState!==null&&ne(ge,s);var l=ae.current,f=bC(l,s.type);l!==f&&(ne(he,s),ne(ae,f))}function Ee(s){he.current===s&&(Y(ae),Y(he)),ge.current===s&&(Y(ge),Bf._currentValue=ee)}var Ce,He;function je(s){if(Ce===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);Ce=l&&l[1]||"",He=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ce+s+He}var $e=!1;function Qe(s,l){if(!s||$e)return"";$e=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(l){var be=function(){throw Error()};if(Object.defineProperty(be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(be,[])}catch(pe){var ue=pe}Reflect.construct(s,[],be)}else{try{be.call()}catch(pe){ue=pe}s.call(be.prototype)}}else{try{throw Error()}catch(pe){ue=pe}(be=s())&&typeof be.catch=="function"&&be.catch(function(){})}}catch(pe){if(pe&&ue&&typeof pe.stack=="string")return[pe.stack,ue.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=p.DetermineComponentFrameRoot(),N=w[0],F=w[1];if(N&&F){var K=N.split(`
`),ce=F.split(`
`);for(b=p=0;p<K.length&&!K[p].includes("DetermineComponentFrameRoot");)p++;for(;b<ce.length&&!ce[b].includes("DetermineComponentFrameRoot");)b++;if(p===K.length||b===ce.length)for(p=K.length-1,b=ce.length-1;1<=p&&0<=b&&K[p]!==ce[b];)b--;for(;1<=p&&0<=b;p--,b--)if(K[p]!==ce[b]){if(p!==1||b!==1)do if(p--,b--,0>b||K[p]!==ce[b]){var ve=`
`+K[p].replace(" at new "," at ");return s.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",s.displayName)),ve}while(1<=p&&0<=b);break}}}finally{$e=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?je(f):""}function vt(s,l){switch(s.tag){case 26:case 27:case 5:return je(s.type);case 16:return je("Lazy");case 13:return s.child!==l&&l!==null?je("Suspense Fallback"):je("Suspense");case 19:return je("SuspenseList");case 0:case 15:return Qe(s.type,!1);case 11:return Qe(s.type.render,!1);case 1:return Qe(s.type,!0);case 31:return je("Activity");default:return""}}function yt(s){try{var l="",f=null;do l+=vt(s,f),f=s,s=s.return;while(s);return l}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var Pe=Object.prototype.hasOwnProperty,Ye=t.unstable_scheduleCallback,Pt=t.unstable_cancelCallback,wn=t.unstable_shouldYield,cn=t.unstable_requestPaint,pt=t.unstable_now,Vt=t.unstable_getCurrentPriorityLevel,gr=t.unstable_ImmediatePriority,mr=t.unstable_UserBlockingPriority,ei=t.unstable_NormalPriority,qs=t.unstable_LowPriority,Oe=t.unstable_IdlePriority,Ze=t.log,Ui=t.unstable_setDisableYieldValue,Gt=null,Zt=null;function En(s){if(typeof Ze=="function"&&Ui(s),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(Gt,s)}catch{}}var Dt=Math.clz32?Math.clz32:un,Ct=Math.log,rr=Math.LN2;function un(s){return s>>>=0,s===0?32:31-(Ct(s)/rr|0)|0}var We=256,Ot=262144,Tt=4194304;function jt(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Rn(s,l,f){var p=s.pendingLanes;if(p===0)return 0;var b=0,w=s.suspendedLanes,N=s.pingedLanes;s=s.warmLanes;var F=p&134217727;return F!==0?(p=F&~w,p!==0?b=jt(p):(N&=F,N!==0?b=jt(N):f||(f=F&~s,f!==0&&(b=jt(f))))):(F=p&~w,F!==0?b=jt(F):N!==0?b=jt(N):f||(f=p&~s,f!==0&&(b=jt(f)))),b===0?0:l!==0&&l!==b&&(l&w)===0&&(w=b&-b,f=l&-l,w>=f||w===32&&(f&4194048)!==0)?l:b}function mn(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function Pc(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ja(){var s=Tt;return Tt<<=1,(Tt&62914560)===0&&(Tt=4194304),s}function zr(s){for(var l=[],f=0;31>f;f++)l.push(s);return l}function gi(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function dy(s,l,f,p,b,w){var N=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var F=s.entanglements,K=s.expirationTimes,ce=s.hiddenUpdates;for(f=N&~f;0<f;){var ve=31-Dt(f),be=1<<ve;F[ve]=0,K[ve]=-1;var ue=ce[ve];if(ue!==null)for(ce[ve]=null,ve=0;ve<ue.length;ve++){var pe=ue[ve];pe!==null&&(pe.lane&=-536870913)}f&=~be}p!==0&&dl(s,p,0),w!==0&&b===0&&s.tag!==0&&(s.suspendedLanes|=w&~(N&~l))}function dl(s,l,f){s.pendingLanes|=l,s.suspendedLanes&=~l;var p=31-Dt(l);s.entangledLanes|=l,s.entanglements[p]=s.entanglements[p]|1073741824|f&261930}function qd(s,l){var f=s.entangledLanes|=l;for(s=s.entanglements;f;){var p=31-Dt(f),b=1<<p;b&l|s[p]&l&&(s[p]|=l),f&=~b}}function Hd(s,l){var f=l&-l;return f=(f&42)!==0?1:fl(f),(f&(s.suspendedLanes|l))!==0?0:f}function fl(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function es(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Hp(){var s=H.p;return s!==0?s:(s=window.event,s===void 0?32:FC(s.type))}function Fi(s,l){var f=H.p;try{return H.p=s,l()}finally{H.p=f}}var Gi=Math.random().toString(36).slice(2),Dn="__reactFiber$"+Gi,Jn="__reactProps$"+Gi,da="__reactContainer$"+Gi,Oc="__reactEvents$"+Gi,fy="__reactListeners$"+Gi,$p="__reactHandles$"+Gi,Yp="__reactResources$"+Gi,fa="__reactMarker$"+Gi;function Vc(s){delete s[Dn],delete s[Jn],delete s[Oc],delete s[fy],delete s[$p]}function ha(s){var l=s[Dn];if(l)return l;for(var f=s.parentNode;f;){if(l=f[da]||f[Dn]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(s=AC(s);s!==null;){if(f=s[Dn])return f;s=AC(s)}return l}s=f,f=s.parentNode}return null}function mi(s){if(s=s[Dn]||s[da]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function ti(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function pa(s){var l=s[Yp];return l||(l=s[Yp]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function kn(s){s[fa]=!0}var $d=new Set,Yd={};function ga(s,l){ma(s,l),ma(s+"Capture",l)}function ma(s,l){for(Yd[s]=l,s=0;s<l.length;s++)$d.add(l[s])}var Kd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xd={},Wd={};function Kp(s){return Pe.call(Wd,s)?!0:Pe.call(Xd,s)?!1:Kd.test(s)?Wd[s]=!0:(Xd[s]=!0,!1)}function jc(s,l,f){if(Kp(l))if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var p=l.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+f)}}function ni(s,l,f){if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+f)}}function Nn(s,l,f,p){if(p===null)s.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(f);return}s.setAttributeNS(l,f,""+p)}}function er(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Hs(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Qd(s,l,f){var p=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var b=p.get,w=p.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return b.call(this)},set:function(N){f=""+N,w.call(this,N)}}),Object.defineProperty(s,l,{enumerable:p.enumerable}),{getValue:function(){return f},setValue:function(N){f=""+N},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function zt(s){if(!s._valueTracker){var l=Hs(s)?"checked":"value";s._valueTracker=Qd(s,l,""+s[l])}}function hl(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var f=l.getValue(),p="";return s&&(p=Hs(s)?s.checked?"true":"false":s.value),s=p,s!==f?(l.setValue(s),!0):!1}function va(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var pl=/[\n"\\]/g;function Lr(s){return s.replace(pl,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function zc(s,l,f,p,b,w,N,F){s.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?s.type=N:s.removeAttribute("type"),l!=null?N==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+er(l)):s.value!==""+er(l)&&(s.value=""+er(l)):N!=="submit"&&N!=="reset"||s.removeAttribute("value"),l!=null?Zd(s,N,er(l)):f!=null?Zd(s,N,er(f)):p!=null&&s.removeAttribute("value"),b==null&&w!=null&&(s.defaultChecked=!!w),b!=null&&(s.checked=b&&typeof b!="function"&&typeof b!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?s.name=""+er(F):s.removeAttribute("name")}function Xp(s,l,f,p,b,w,N,F){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.type=w),l!=null||f!=null){if(!(w!=="submit"&&w!=="reset"||l!=null)){zt(s);return}f=f!=null?""+er(f):"",l=l!=null?""+er(l):f,F||l===s.value||(s.value=l),s.defaultValue=l}p=p??b,p=typeof p!="function"&&typeof p!="symbol"&&!!p,s.checked=F?s.checked:!!p,s.defaultChecked=!!p,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(s.name=N),zt(s)}function Zd(s,l,f){l==="number"&&va(s.ownerDocument)===s||s.defaultValue===""+f||(s.defaultValue=""+f)}function $s(s,l,f,p){if(s=s.options,l){l={};for(var b=0;b<f.length;b++)l["$"+f[b]]=!0;for(f=0;f<s.length;f++)b=l.hasOwnProperty("$"+s[f].value),s[f].selected!==b&&(s[f].selected=b),b&&p&&(s[f].defaultSelected=!0)}else{for(f=""+er(f),l=null,b=0;b<s.length;b++){if(s[b].value===f){s[b].selected=!0,p&&(s[b].defaultSelected=!0);return}l!==null||s[b].disabled||(l=s[b])}l!==null&&(l.selected=!0)}}function Wp(s,l,f){if(l!=null&&(l=""+er(l),l!==s.value&&(s.value=l),f==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=f!=null?""+er(f):""}function Ys(s,l,f,p){if(l==null){if(p!=null){if(f!=null)throw Error(r(92));if(Q(p)){if(1<p.length)throw Error(r(93));p=p[0]}f=p}f==null&&(f=""),l=f}f=er(l),s.defaultValue=f,p=s.textContent,p===f&&p!==""&&p!==null&&(s.value=p),zt(s)}function Br(s,l){if(l){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=l;return}}s.textContent=l}var Qp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jd(s,l,f){var p=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?p?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":p?s.setProperty(l,f):typeof f!="number"||f===0||Qp.has(l)?l==="float"?s.cssFloat=f:s[l]=(""+f).trim():s[l]=f+"px"}function ef(s,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,f!=null){for(var p in f)!f.hasOwnProperty(p)||l!=null&&l.hasOwnProperty(p)||(p.indexOf("--")===0?s.setProperty(p,""):p==="float"?s.cssFloat="":s[p]="");for(var b in l)p=l[b],l.hasOwnProperty(b)&&f[b]!==p&&Jd(s,b,p)}else for(var w in l)l.hasOwnProperty(w)&&Jd(s,w,l[w])}function Lc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ks=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bc(s){return Ks.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function qi(){}var tf=null;function vi(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Xs=null,ya=null;function gl(s){var l=mi(s);if(l&&(s=l.stateNode)){var f=s[Jn]||null;e:switch(s=l.stateNode,l.type){case"input":if(zc(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Lr(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var p=f[l];if(p!==s&&p.form===s.form){var b=p[Jn]||null;if(!b)throw Error(r(90));zc(p,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(l=0;l<f.length;l++)p=f[l],p.form===s.form&&hl(p)}break e;case"textarea":Wp(s,f.value,f.defaultValue);break e;case"select":l=f.value,l!=null&&$s(s,!!f.multiple,l,!1)}}}var Uc=!1;function Ws(s,l,f){if(Uc)return s(l,f);Uc=!0;try{var p=s(l);return p}finally{if(Uc=!1,(Xs!==null||ya!==null)&&(Hg(),Xs&&(l=Xs,s=ya,ya=Xs=null,gl(l),s)))for(l=0;l<s.length;l++)gl(s[l])}}function Hi(s,l){var f=s.stateNode;if(f===null)return null;var p=f[Jn]||null;if(p===null)return null;f=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break e;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ml=!1;if(yi)try{var qt={};Object.defineProperty(qt,"passive",{get:function(){ml=!0}}),window.addEventListener("test",qt,qt),window.removeEventListener("test",qt,qt)}catch{ml=!1}var ba=null,nf=null,vl=null;function rf(){if(vl)return vl;var s,l=nf,f=l.length,p,b="value"in ba?ba.value:ba.textContent,w=b.length;for(s=0;s<f&&l[s]===b[s];s++);var N=f-s;for(p=1;p<=N&&l[f-p]===b[w-p];p++);return vl=b.slice(s,1<p?1-p:void 0)}function yl(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function ts(){return!0}function $i(){return!1}function ir(s){function l(f,p,b,w,N){this._reactName=f,this._targetInst=b,this.type=p,this.nativeEvent=w,this.target=N,this.currentTarget=null;for(var F in s)s.hasOwnProperty(F)&&(f=s[F],this[F]=f?f(w):w[F]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ts:$i,this.isPropagationStopped=$i,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=ts)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=ts)},persist:function(){},isPersistent:ts}),l}var ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xa=ir(ns),Qs=g({},ns,{view:0,detail:0}),af=ir(Qs),Zs,Fc,_a,Gc=g({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Js,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==_a&&(_a&&s.type==="mousemove"?(Zs=s.screenX-_a.screenX,Fc=s.screenY-_a.screenY):Fc=Zs=0,_a=s),Zs)},movementY:function(s){return"movementY"in s?s.movementY:Fc}}),sf=ir(Gc),bl=g({},Gc,{dataTransfer:0}),Jp=ir(bl),eg=g({},Qs,{relatedTarget:0}),xl=ir(eg),of=g({},ns,{animationName:0,elapsedTime:0,pseudoElement:0}),tg=ir(of),qc=g({},ns,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ng=ir(qc),rg=g({},ns,{data:0}),wa=ir(rg),ig={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ag={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function og(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=sg[s])?!!l[s]:!1}function Js(){return og}var Cr=g({},Qs,{key:function(s){if(s.key){var l=ig[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=yl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ag[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Js,charCode:function(s){return s.type==="keypress"?yl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?yl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),lg=ir(Cr),cg=g({},Gc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rs=ir(cg),v=g({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Js}),I=ir(v),V=g({},ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),q=ir(V),se=g({},Gc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),de=ir(se),Re=g({},ns,{newState:0,oldState:0}),ot=ir(Re),Sn=[9,13,27,32],kt=yi&&"CompositionEvent"in window,rn=null;yi&&"documentMode"in document&&(rn=document.documentMode);var bi=yi&&"TextEvent"in window&&!rn,Ea=yi&&(!kt||rn&&8<rn&&11>=rn),Yi=" ",Ki=!1;function _l(s,l){switch(s){case"keyup":return Sn.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hc(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var $c=!1;function fj(s,l){switch(s){case"compositionend":return Hc(l);case"keypress":return l.which!==32?null:(Ki=!0,Yi);case"textInput":return s=l.data,s===Yi&&Ki?null:s;default:return null}}function hj(s,l){if($c)return s==="compositionend"||!kt&&_l(s,l)?(s=rf(),vl=nf=ba=null,$c=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Ea&&l.locale!=="ko"?null:l.data;default:return null}}var pj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function RS(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!pj[s.type]:l==="textarea"}function DS(s,l,f,p){Xs?ya?ya.push(p):ya=[p]:Xs=p,l=Zg(l,"onChange"),0<l.length&&(f=new xa("onChange","change",null,f,p),s.push({event:f,listeners:l}))}var lf=null,cf=null;function gj(s){fC(s,0)}function ug(s){var l=ti(s);if(hl(l))return s}function kS(s,l){if(s==="change")return l}var NS=!1;if(yi){var hy;if(yi){var py="oninput"in document;if(!py){var MS=document.createElement("div");MS.setAttribute("oninput","return;"),py=typeof MS.oninput=="function"}hy=py}else hy=!1;NS=hy&&(!document.documentMode||9<document.documentMode)}function PS(){lf&&(lf.detachEvent("onpropertychange",OS),cf=lf=null)}function OS(s){if(s.propertyName==="value"&&ug(cf)){var l=[];DS(l,cf,s,vi(s)),Ws(gj,l)}}function mj(s,l,f){s==="focusin"?(PS(),lf=l,cf=f,lf.attachEvent("onpropertychange",OS)):s==="focusout"&&PS()}function vj(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ug(cf)}function yj(s,l){if(s==="click")return ug(l)}function bj(s,l){if(s==="input"||s==="change")return ug(l)}function xj(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var ri=typeof Object.is=="function"?Object.is:xj;function uf(s,l){if(ri(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var f=Object.keys(s),p=Object.keys(l);if(f.length!==p.length)return!1;for(p=0;p<f.length;p++){var b=f[p];if(!Pe.call(l,b)||!ri(s[b],l[b]))return!1}return!0}function VS(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function jS(s,l){var f=VS(s);s=0;for(var p;f;){if(f.nodeType===3){if(p=s+f.textContent.length,s<=l&&p>=l)return{node:f,offset:l-s};s=p}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=VS(f)}}function zS(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?zS(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function LS(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=va(s.document);l instanceof s.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)s=l.contentWindow;else break;l=va(s.document)}return l}function gy(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var _j=yi&&"documentMode"in document&&11>=document.documentMode,Yc=null,my=null,df=null,vy=!1;function BS(s,l,f){var p=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;vy||Yc==null||Yc!==va(p)||(p=Yc,"selectionStart"in p&&gy(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),df&&uf(df,p)||(df=p,p=Zg(my,"onSelect"),0<p.length&&(l=new xa("onSelect","select",null,l,f),s.push({event:l,listeners:p}),l.target=Yc)))}function wl(s,l){var f={};return f[s.toLowerCase()]=l.toLowerCase(),f["Webkit"+s]="webkit"+l,f["Moz"+s]="moz"+l,f}var Kc={animationend:wl("Animation","AnimationEnd"),animationiteration:wl("Animation","AnimationIteration"),animationstart:wl("Animation","AnimationStart"),transitionrun:wl("Transition","TransitionRun"),transitionstart:wl("Transition","TransitionStart"),transitioncancel:wl("Transition","TransitionCancel"),transitionend:wl("Transition","TransitionEnd")},yy={},US={};yi&&(US=document.createElement("div").style,"AnimationEvent"in window||(delete Kc.animationend.animation,delete Kc.animationiteration.animation,delete Kc.animationstart.animation),"TransitionEvent"in window||delete Kc.transitionend.transition);function El(s){if(yy[s])return yy[s];if(!Kc[s])return s;var l=Kc[s],f;for(f in l)if(l.hasOwnProperty(f)&&f in US)return yy[s]=l[f];return s}var FS=El("animationend"),GS=El("animationiteration"),qS=El("animationstart"),wj=El("transitionrun"),Ej=El("transitionstart"),Sj=El("transitioncancel"),HS=El("transitionend"),$S=new Map,by="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");by.push("scrollEnd");function Xi(s,l){$S.set(s,l),ga(l,[s])}var dg=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},xi=[],Xc=0,xy=0;function fg(){for(var s=Xc,l=xy=Xc=0;l<s;){var f=xi[l];xi[l++]=null;var p=xi[l];xi[l++]=null;var b=xi[l];xi[l++]=null;var w=xi[l];if(xi[l++]=null,p!==null&&b!==null){var N=p.pending;N===null?b.next=b:(b.next=N.next,N.next=b),p.pending=b}w!==0&&YS(f,b,w)}}function hg(s,l,f,p){xi[Xc++]=s,xi[Xc++]=l,xi[Xc++]=f,xi[Xc++]=p,xy|=p,s.lanes|=p,s=s.alternate,s!==null&&(s.lanes|=p)}function _y(s,l,f,p){return hg(s,l,f,p),pg(s)}function Sl(s,l){return hg(s,null,null,l),pg(s)}function YS(s,l,f){s.lanes|=f;var p=s.alternate;p!==null&&(p.lanes|=f);for(var b=!1,w=s.return;w!==null;)w.childLanes|=f,p=w.alternate,p!==null&&(p.childLanes|=f),w.tag===22&&(s=w.stateNode,s===null||s._visibility&1||(b=!0)),s=w,w=w.return;return s.tag===3?(w=s.stateNode,b&&l!==null&&(b=31-Dt(f),s=w.hiddenUpdates,p=s[b],p===null?s[b]=[l]:p.push(l),l.lane=f|536870912),w):null}function pg(s){if(50<Mf)throw Mf=0,Db=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var Wc={};function Tj(s,l,f,p){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ii(s,l,f,p){return new Tj(s,l,f,p)}function wy(s){return s=s.prototype,!(!s||!s.isReactComponent)}function is(s,l){var f=s.alternate;return f===null?(f=ii(s.tag,l,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=l,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&65011712,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,l=s.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function KS(s,l){s.flags&=65011714;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,l=f.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function gg(s,l,f,p,b,w){var N=0;if(p=s,typeof s=="function")wy(s)&&(N=1);else if(typeof s=="string")N=D5(s,f,ae.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case k:return s=ii(31,f,l,b),s.elementType=k,s.lanes=w,s;case E:return Tl(f.children,b,w,l);case S:N=8,b|=24;break;case T:return s=ii(12,f,l,b|2),s.elementType=T,s.lanes=w,s;case L:return s=ii(13,f,l,b),s.elementType=L,s.lanes=w,s;case j:return s=ii(19,f,l,b),s.elementType=j,s.lanes=w,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case R:N=10;break e;case D:N=9;break e;case O:N=11;break e;case A:N=14;break e;case C:N=16,p=null;break e}N=29,f=Error(r(130,s===null?"null":typeof s,"")),p=null}return l=ii(N,f,l,b),l.elementType=s,l.type=p,l.lanes=w,l}function Tl(s,l,f,p){return s=ii(7,s,p,l),s.lanes=f,s}function Ey(s,l,f){return s=ii(6,s,null,l),s.lanes=f,s}function XS(s){var l=ii(18,null,null,0);return l.stateNode=s,l}function Sy(s,l,f){return l=ii(4,s.children!==null?s.children:[],s.key,l),l.lanes=f,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var WS=new WeakMap;function _i(s,l){if(typeof s=="object"&&s!==null){var f=WS.get(s);return f!==void 0?f:(l={value:s,source:l,stack:yt(l)},WS.set(s,l),l)}return{value:s,source:l,stack:yt(l)}}var Qc=[],Zc=0,mg=null,ff=0,wi=[],Ei=0,eo=null,Sa=1,Ta="";function as(s,l){Qc[Zc++]=ff,Qc[Zc++]=mg,mg=s,ff=l}function QS(s,l,f){wi[Ei++]=Sa,wi[Ei++]=Ta,wi[Ei++]=eo,eo=s;var p=Sa;s=Ta;var b=32-Dt(p)-1;p&=~(1<<b),f+=1;var w=32-Dt(l)+b;if(30<w){var N=b-b%5;w=(p&(1<<N)-1).toString(32),p>>=N,b-=N,Sa=1<<32-Dt(l)+b|f<<b|p,Ta=w+s}else Sa=1<<w|f<<b|p,Ta=s}function Ty(s){s.return!==null&&(as(s,1),QS(s,1,0))}function Ay(s){for(;s===mg;)mg=Qc[--Zc],Qc[Zc]=null,ff=Qc[--Zc],Qc[Zc]=null;for(;s===eo;)eo=wi[--Ei],wi[Ei]=null,Ta=wi[--Ei],wi[Ei]=null,Sa=wi[--Ei],wi[Ei]=null}function ZS(s,l){wi[Ei++]=Sa,wi[Ei++]=Ta,wi[Ei++]=eo,Sa=l.id,Ta=l.overflow,eo=s}var ar=null,en=null,Et=!1,to=null,Si=!1,Cy=Error(r(519));function no(s){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hf(_i(l,s)),Cy}function JS(s){var l=s.stateNode,f=s.type,p=s.memoizedProps;switch(l[Dn]=s,l[Jn]=p,f){case"dialog":mt("cancel",l),mt("close",l);break;case"iframe":case"object":case"embed":mt("load",l);break;case"video":case"audio":for(f=0;f<Of.length;f++)mt(Of[f],l);break;case"source":mt("error",l);break;case"img":case"image":case"link":mt("error",l),mt("load",l);break;case"details":mt("toggle",l);break;case"input":mt("invalid",l),Xp(l,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":mt("invalid",l);break;case"textarea":mt("invalid",l),Ys(l,p.value,p.defaultValue,p.children)}f=p.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||p.suppressHydrationWarning===!0||mC(l.textContent,f)?(p.popover!=null&&(mt("beforetoggle",l),mt("toggle",l)),p.onScroll!=null&&mt("scroll",l),p.onScrollEnd!=null&&mt("scrollend",l),p.onClick!=null&&(l.onclick=qi),l=!0):l=!1,l||no(s,!0)}function eT(s){for(ar=s.return;ar;)switch(ar.tag){case 5:case 31:case 13:Si=!1;return;case 27:case 3:Si=!0;return;default:ar=ar.return}}function Jc(s){if(s!==ar)return!1;if(!Et)return eT(s),Et=!0,!1;var l=s.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=s.type,f=!(f!=="form"&&f!=="button")||Hb(s.type,s.memoizedProps)),f=!f),f&&en&&no(s),eT(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));en=TC(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));en=TC(s)}else l===27?(l=en,vo(s.type)?(s=Wb,Wb=null,en=s):en=l):en=ar?Ai(s.stateNode.nextSibling):null;return!0}function Al(){en=ar=null,Et=!1}function Iy(){var s=to;return s!==null&&(qr===null?qr=s:qr.push.apply(qr,s),to=null),s}function hf(s){to===null?to=[s]:to.push(s)}var Ry=B(null),Cl=null,ss=null;function ro(s,l,f){ne(Ry,l._currentValue),l._currentValue=f}function os(s){s._currentValue=Ry.current,Y(Ry)}function Dy(s,l,f){for(;s!==null;){var p=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),s===f)break;s=s.return}}function ky(s,l,f,p){var b=s.child;for(b!==null&&(b.return=s);b!==null;){var w=b.dependencies;if(w!==null){var N=b.child;w=w.firstContext;e:for(;w!==null;){var F=w;w=b;for(var K=0;K<l.length;K++)if(F.context===l[K]){w.lanes|=f,F=w.alternate,F!==null&&(F.lanes|=f),Dy(w.return,f,s),p||(N=null);break e}w=F.next}}else if(b.tag===18){if(N=b.return,N===null)throw Error(r(341));N.lanes|=f,w=N.alternate,w!==null&&(w.lanes|=f),Dy(N,f,s),N=null}else N=b.child;if(N!==null)N.return=b;else for(N=b;N!==null;){if(N===s){N=null;break}if(b=N.sibling,b!==null){b.return=N.return,N=b;break}N=N.return}b=N}}function eu(s,l,f,p){s=null;for(var b=l,w=!1;b!==null;){if(!w){if((b.flags&524288)!==0)w=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var N=b.alternate;if(N===null)throw Error(r(387));if(N=N.memoizedProps,N!==null){var F=b.type;ri(b.pendingProps.value,N.value)||(s!==null?s.push(F):s=[F])}}else if(b===ge.current){if(N=b.alternate,N===null)throw Error(r(387));N.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(s!==null?s.push(Bf):s=[Bf])}b=b.return}s!==null&&ky(l,s,f,p),l.flags|=262144}function vg(s){for(s=s.firstContext;s!==null;){if(!ri(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Il(s){Cl=s,ss=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function sr(s){return tT(Cl,s)}function yg(s,l){return Cl===null&&Il(s),tT(s,l)}function tT(s,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},ss===null){if(s===null)throw Error(r(308));ss=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else ss=ss.next=l;return f}var Aj=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(f,p){s.push(p)}};this.abort=function(){l.aborted=!0,s.forEach(function(f){return f()})}},Cj=t.unstable_scheduleCallback,Ij=t.unstable_NormalPriority,Mn={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ny(){return{controller:new Aj,data:new Map,refCount:0}}function pf(s){s.refCount--,s.refCount===0&&Cj(Ij,function(){s.controller.abort()})}var gf=null,My=0,tu=0,nu=null;function Rj(s,l){if(gf===null){var f=gf=[];My=0,tu=Vb(),nu={status:"pending",value:void 0,then:function(p){f.push(p)}}}return My++,l.then(nT,nT),l}function nT(){if(--My===0&&gf!==null){nu!==null&&(nu.status="fulfilled");var s=gf;gf=null,tu=0,nu=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function Dj(s,l){var f=[],p={status:"pending",value:null,reason:null,then:function(b){f.push(b)}};return s.then(function(){p.status="fulfilled",p.value=l;for(var b=0;b<f.length;b++)(0,f[b])(l)},function(b){for(p.status="rejected",p.reason=b,b=0;b<f.length;b++)(0,f[b])(void 0)}),p}var rT=$.S;$.S=function(s,l){BA=pt(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&Rj(s,l),rT!==null&&rT(s,l)};var Rl=B(null);function Py(){var s=Rl.current;return s!==null?s:Wt.pooledCache}function bg(s,l){l===null?ne(Rl,Rl.current):ne(Rl,l.pool)}function iT(){var s=Py();return s===null?null:{parent:Mn._currentValue,pool:s}}var ru=Error(r(460)),Oy=Error(r(474)),xg=Error(r(542)),_g={then:function(){}};function aT(s){return s=s.status,s==="fulfilled"||s==="rejected"}function sT(s,l,f){switch(f=s[f],f===void 0?s.push(l):f!==l&&(l.then(qi,qi),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,lT(s),s;default:if(typeof l.status=="string")l.then(qi,qi);else{if(s=Wt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(p){if(l.status==="pending"){var b=l;b.status="fulfilled",b.value=p}},function(p){if(l.status==="pending"){var b=l;b.status="rejected",b.reason=p}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,lT(s),s}throw kl=l,ru}}function Dl(s){try{var l=s._init;return l(s._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(kl=f,ru):f}}var kl=null;function oT(){if(kl===null)throw Error(r(459));var s=kl;return kl=null,s}function lT(s){if(s===ru||s===xg)throw Error(r(483))}var iu=null,mf=0;function wg(s){var l=mf;return mf+=1,iu===null&&(iu=[]),sT(iu,s,l)}function vf(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function Eg(s,l){throw l.$$typeof===m?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function cT(s){function l(re,J){if(s){var oe=re.deletions;oe===null?(re.deletions=[J],re.flags|=16):oe.push(J)}}function f(re,J){if(!s)return null;for(;J!==null;)l(re,J),J=J.sibling;return null}function p(re){for(var J=new Map;re!==null;)re.key!==null?J.set(re.key,re):J.set(re.index,re),re=re.sibling;return J}function b(re,J){return re=is(re,J),re.index=0,re.sibling=null,re}function w(re,J,oe){return re.index=oe,s?(oe=re.alternate,oe!==null?(oe=oe.index,oe<J?(re.flags|=67108866,J):oe):(re.flags|=67108866,J)):(re.flags|=1048576,J)}function N(re){return s&&re.alternate===null&&(re.flags|=67108866),re}function F(re,J,oe,ye){return J===null||J.tag!==6?(J=Ey(oe,re.mode,ye),J.return=re,J):(J=b(J,oe),J.return=re,J)}function K(re,J,oe,ye){var Fe=oe.type;return Fe===E?ve(re,J,oe.props.children,ye,oe.key):J!==null&&(J.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===C&&Dl(Fe)===J.type)?(J=b(J,oe.props),vf(J,oe),J.return=re,J):(J=gg(oe.type,oe.key,oe.props,null,re.mode,ye),vf(J,oe),J.return=re,J)}function ce(re,J,oe,ye){return J===null||J.tag!==4||J.stateNode.containerInfo!==oe.containerInfo||J.stateNode.implementation!==oe.implementation?(J=Sy(oe,re.mode,ye),J.return=re,J):(J=b(J,oe.children||[]),J.return=re,J)}function ve(re,J,oe,ye,Fe){return J===null||J.tag!==7?(J=Tl(oe,re.mode,ye,Fe),J.return=re,J):(J=b(J,oe),J.return=re,J)}function be(re,J,oe){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=Ey(""+J,re.mode,oe),J.return=re,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case x:return oe=gg(J.type,J.key,J.props,null,re.mode,oe),vf(oe,J),oe.return=re,oe;case _:return J=Sy(J,re.mode,oe),J.return=re,J;case C:return J=Dl(J),be(re,J,oe)}if(Q(J)||z(J))return J=Tl(J,re.mode,oe,null),J.return=re,J;if(typeof J.then=="function")return be(re,wg(J),oe);if(J.$$typeof===R)return be(re,yg(re,J),oe);Eg(re,J)}return null}function ue(re,J,oe,ye){var Fe=J!==null?J.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Fe!==null?null:F(re,J,""+oe,ye);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case x:return oe.key===Fe?K(re,J,oe,ye):null;case _:return oe.key===Fe?ce(re,J,oe,ye):null;case C:return oe=Dl(oe),ue(re,J,oe,ye)}if(Q(oe)||z(oe))return Fe!==null?null:ve(re,J,oe,ye,null);if(typeof oe.then=="function")return ue(re,J,wg(oe),ye);if(oe.$$typeof===R)return ue(re,J,yg(re,oe),ye);Eg(re,oe)}return null}function pe(re,J,oe,ye,Fe){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return re=re.get(oe)||null,F(J,re,""+ye,Fe);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case x:return re=re.get(ye.key===null?oe:ye.key)||null,K(J,re,ye,Fe);case _:return re=re.get(ye.key===null?oe:ye.key)||null,ce(J,re,ye,Fe);case C:return ye=Dl(ye),pe(re,J,oe,ye,Fe)}if(Q(ye)||z(ye))return re=re.get(oe)||null,ve(J,re,ye,Fe,null);if(typeof ye.then=="function")return pe(re,J,oe,wg(ye),Fe);if(ye.$$typeof===R)return pe(re,J,oe,yg(J,ye),Fe);Eg(J,ye)}return null}function Ne(re,J,oe,ye){for(var Fe=null,It=null,Ve=J,ut=J=0,xt=null;Ve!==null&&ut<oe.length;ut++){Ve.index>ut?(xt=Ve,Ve=null):xt=Ve.sibling;var Rt=ue(re,Ve,oe[ut],ye);if(Rt===null){Ve===null&&(Ve=xt);break}s&&Ve&&Rt.alternate===null&&l(re,Ve),J=w(Rt,J,ut),It===null?Fe=Rt:It.sibling=Rt,It=Rt,Ve=xt}if(ut===oe.length)return f(re,Ve),Et&&as(re,ut),Fe;if(Ve===null){for(;ut<oe.length;ut++)Ve=be(re,oe[ut],ye),Ve!==null&&(J=w(Ve,J,ut),It===null?Fe=Ve:It.sibling=Ve,It=Ve);return Et&&as(re,ut),Fe}for(Ve=p(Ve);ut<oe.length;ut++)xt=pe(Ve,re,ut,oe[ut],ye),xt!==null&&(s&&xt.alternate!==null&&Ve.delete(xt.key===null?ut:xt.key),J=w(xt,J,ut),It===null?Fe=xt:It.sibling=xt,It=xt);return s&&Ve.forEach(function(wo){return l(re,wo)}),Et&&as(re,ut),Fe}function Ke(re,J,oe,ye){if(oe==null)throw Error(r(151));for(var Fe=null,It=null,Ve=J,ut=J=0,xt=null,Rt=oe.next();Ve!==null&&!Rt.done;ut++,Rt=oe.next()){Ve.index>ut?(xt=Ve,Ve=null):xt=Ve.sibling;var wo=ue(re,Ve,Rt.value,ye);if(wo===null){Ve===null&&(Ve=xt);break}s&&Ve&&wo.alternate===null&&l(re,Ve),J=w(wo,J,ut),It===null?Fe=wo:It.sibling=wo,It=wo,Ve=xt}if(Rt.done)return f(re,Ve),Et&&as(re,ut),Fe;if(Ve===null){for(;!Rt.done;ut++,Rt=oe.next())Rt=be(re,Rt.value,ye),Rt!==null&&(J=w(Rt,J,ut),It===null?Fe=Rt:It.sibling=Rt,It=Rt);return Et&&as(re,ut),Fe}for(Ve=p(Ve);!Rt.done;ut++,Rt=oe.next())Rt=pe(Ve,re,ut,Rt.value,ye),Rt!==null&&(s&&Rt.alternate!==null&&Ve.delete(Rt.key===null?ut:Rt.key),J=w(Rt,J,ut),It===null?Fe=Rt:It.sibling=Rt,It=Rt);return s&&Ve.forEach(function(U5){return l(re,U5)}),Et&&as(re,ut),Fe}function Yt(re,J,oe,ye){if(typeof oe=="object"&&oe!==null&&oe.type===E&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case x:e:{for(var Fe=oe.key;J!==null;){if(J.key===Fe){if(Fe=oe.type,Fe===E){if(J.tag===7){f(re,J.sibling),ye=b(J,oe.props.children),ye.return=re,re=ye;break e}}else if(J.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===C&&Dl(Fe)===J.type){f(re,J.sibling),ye=b(J,oe.props),vf(ye,oe),ye.return=re,re=ye;break e}f(re,J);break}else l(re,J);J=J.sibling}oe.type===E?(ye=Tl(oe.props.children,re.mode,ye,oe.key),ye.return=re,re=ye):(ye=gg(oe.type,oe.key,oe.props,null,re.mode,ye),vf(ye,oe),ye.return=re,re=ye)}return N(re);case _:e:{for(Fe=oe.key;J!==null;){if(J.key===Fe)if(J.tag===4&&J.stateNode.containerInfo===oe.containerInfo&&J.stateNode.implementation===oe.implementation){f(re,J.sibling),ye=b(J,oe.children||[]),ye.return=re,re=ye;break e}else{f(re,J);break}else l(re,J);J=J.sibling}ye=Sy(oe,re.mode,ye),ye.return=re,re=ye}return N(re);case C:return oe=Dl(oe),Yt(re,J,oe,ye)}if(Q(oe))return Ne(re,J,oe,ye);if(z(oe)){if(Fe=z(oe),typeof Fe!="function")throw Error(r(150));return oe=Fe.call(oe),Ke(re,J,oe,ye)}if(typeof oe.then=="function")return Yt(re,J,wg(oe),ye);if(oe.$$typeof===R)return Yt(re,J,yg(re,oe),ye);Eg(re,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,J!==null&&J.tag===6?(f(re,J.sibling),ye=b(J,oe),ye.return=re,re=ye):(f(re,J),ye=Ey(oe,re.mode,ye),ye.return=re,re=ye),N(re)):f(re,J)}return function(re,J,oe,ye){try{mf=0;var Fe=Yt(re,J,oe,ye);return iu=null,Fe}catch(Ve){if(Ve===ru||Ve===xg)throw Ve;var It=ii(29,Ve,null,re.mode);return It.lanes=ye,It.return=re,It}finally{}}}var Nl=cT(!0),uT=cT(!1),io=!1;function Vy(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jy(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ao(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function so(s,l,f){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(Nt&2)!==0){var b=p.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),p.pending=l,l=pg(s),YS(s,null,f),l}return hg(s,p,l,f),pg(s)}function yf(s,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var p=l.lanes;p&=s.pendingLanes,f|=p,l.lanes=f,qd(s,f)}}function zy(s,l){var f=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,f===p)){var b=null,w=null;if(f=f.firstBaseUpdate,f!==null){do{var N={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};w===null?b=w=N:w=w.next=N,f=f.next}while(f!==null);w===null?b=w=l:w=w.next=l}else b=w=l;f={baseState:p.baseState,firstBaseUpdate:b,lastBaseUpdate:w,shared:p.shared,callbacks:p.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=l:s.next=l,f.lastBaseUpdate=l}var Ly=!1;function bf(){if(Ly){var s=nu;if(s!==null)throw s}}function xf(s,l,f,p){Ly=!1;var b=s.updateQueue;io=!1;var w=b.firstBaseUpdate,N=b.lastBaseUpdate,F=b.shared.pending;if(F!==null){b.shared.pending=null;var K=F,ce=K.next;K.next=null,N===null?w=ce:N.next=ce,N=K;var ve=s.alternate;ve!==null&&(ve=ve.updateQueue,F=ve.lastBaseUpdate,F!==N&&(F===null?ve.firstBaseUpdate=ce:F.next=ce,ve.lastBaseUpdate=K))}if(w!==null){var be=b.baseState;N=0,ve=ce=K=null,F=w;do{var ue=F.lane&-536870913,pe=ue!==F.lane;if(pe?(bt&ue)===ue:(p&ue)===ue){ue!==0&&ue===tu&&(Ly=!0),ve!==null&&(ve=ve.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});e:{var Ne=s,Ke=F;ue=l;var Yt=f;switch(Ke.tag){case 1:if(Ne=Ke.payload,typeof Ne=="function"){be=Ne.call(Yt,be,ue);break e}be=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Ke.payload,ue=typeof Ne=="function"?Ne.call(Yt,be,ue):Ne,ue==null)break e;be=g({},be,ue);break e;case 2:io=!0}}ue=F.callback,ue!==null&&(s.flags|=64,pe&&(s.flags|=8192),pe=b.callbacks,pe===null?b.callbacks=[ue]:pe.push(ue))}else pe={lane:ue,tag:F.tag,payload:F.payload,callback:F.callback,next:null},ve===null?(ce=ve=pe,K=be):ve=ve.next=pe,N|=ue;if(F=F.next,F===null){if(F=b.shared.pending,F===null)break;pe=F,F=pe.next,pe.next=null,b.lastBaseUpdate=pe,b.shared.pending=null}}while(!0);ve===null&&(K=be),b.baseState=K,b.firstBaseUpdate=ce,b.lastBaseUpdate=ve,w===null&&(b.shared.lanes=0),fo|=N,s.lanes=N,s.memoizedState=be}}function dT(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function fT(s,l){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)dT(f[s],l)}var au=B(null),Sg=B(0);function hT(s,l){s=ms,ne(Sg,s),ne(au,l),ms=s|l.baseLanes}function By(){ne(Sg,ms),ne(au,au.current)}function Uy(){ms=Sg.current,Y(au),Y(Sg)}var ai=B(null),Ti=null;function oo(s){var l=s.alternate;ne(Tn,Tn.current&1),ne(ai,s),Ti===null&&(l===null||au.current!==null||l.memoizedState!==null)&&(Ti=s)}function Fy(s){ne(Tn,Tn.current),ne(ai,s),Ti===null&&(Ti=s)}function pT(s){s.tag===22?(ne(Tn,Tn.current),ne(ai,s),Ti===null&&(Ti=s)):lo()}function lo(){ne(Tn,Tn.current),ne(ai,ai.current)}function si(s){Y(ai),Ti===s&&(Ti=null),Y(Tn)}var Tn=B(0);function Tg(s){for(var l=s;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||Kb(f)||Xb(f)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var ls=0,lt=null,Ht=null,Pn=null,Ag=!1,su=!1,Ml=!1,Cg=0,_f=0,ou=null,kj=0;function vn(){throw Error(r(321))}function Gy(s,l){if(l===null)return!1;for(var f=0;f<l.length&&f<s.length;f++)if(!ri(s[f],l[f]))return!1;return!0}function qy(s,l,f,p,b,w){return ls=w,lt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,$.H=s===null||s.memoizedState===null?QT:ab,Ml=!1,w=f(p,b),Ml=!1,su&&(w=mT(l,f,p,b)),gT(s),w}function gT(s){$.H=Sf;var l=Ht!==null&&Ht.next!==null;if(ls=0,Pn=Ht=lt=null,Ag=!1,_f=0,ou=null,l)throw Error(r(300));s===null||On||(s=s.dependencies,s!==null&&vg(s)&&(On=!0))}function mT(s,l,f,p){lt=s;var b=0;do{if(su&&(ou=null),_f=0,su=!1,25<=b)throw Error(r(301));if(b+=1,Pn=Ht=null,s.updateQueue!=null){var w=s.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}$.H=ZT,w=l(f,p)}while(su);return w}function Nj(){var s=$.H,l=s.useState()[0];return l=typeof l.then=="function"?wf(l):l,s=s.useState()[0],(Ht!==null?Ht.memoizedState:null)!==s&&(lt.flags|=1024),l}function Hy(){var s=Cg!==0;return Cg=0,s}function $y(s,l,f){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~f}function Yy(s){if(Ag){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Ag=!1}ls=0,Pn=Ht=lt=null,su=!1,_f=Cg=0,ou=null}function Ir(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?lt.memoizedState=Pn=s:Pn=Pn.next=s,Pn}function An(){if(Ht===null){var s=lt.alternate;s=s!==null?s.memoizedState:null}else s=Ht.next;var l=Pn===null?lt.memoizedState:Pn.next;if(l!==null)Pn=l,Ht=s;else{if(s===null)throw lt.alternate===null?Error(r(467)):Error(r(310));Ht=s,s={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},Pn===null?lt.memoizedState=Pn=s:Pn=Pn.next=s}return Pn}function Ig(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wf(s){var l=_f;return _f+=1,ou===null&&(ou=[]),s=sT(ou,s,l),l=lt,(Pn===null?l.memoizedState:Pn.next)===null&&(l=l.alternate,$.H=l===null||l.memoizedState===null?QT:ab),s}function Rg(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return wf(s);if(s.$$typeof===R)return sr(s)}throw Error(r(438,String(s)))}function Ky(s){var l=null,f=lt.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var p=lt.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(l={data:p.data.map(function(b){return b.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=Ig(),lt.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(s),p=0;p<s;p++)f[p]=M;return l.index++,f}function cs(s,l){return typeof l=="function"?l(s):l}function Dg(s){var l=An();return Xy(l,Ht,s)}function Xy(s,l,f){var p=s.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=f;var b=s.baseQueue,w=p.pending;if(w!==null){if(b!==null){var N=b.next;b.next=w.next,w.next=N}l.baseQueue=b=w,p.pending=null}if(w=s.baseState,b===null)s.memoizedState=w;else{l=b.next;var F=N=null,K=null,ce=l,ve=!1;do{var be=ce.lane&-536870913;if(be!==ce.lane?(bt&be)===be:(ls&be)===be){var ue=ce.revertLane;if(ue===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),be===tu&&(ve=!0);else if((ls&ue)===ue){ce=ce.next,ue===tu&&(ve=!0);continue}else be={lane:0,revertLane:ce.revertLane,gesture:null,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},K===null?(F=K=be,N=w):K=K.next=be,lt.lanes|=ue,fo|=ue;be=ce.action,Ml&&f(w,be),w=ce.hasEagerState?ce.eagerState:f(w,be)}else ue={lane:be,revertLane:ce.revertLane,gesture:ce.gesture,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},K===null?(F=K=ue,N=w):K=K.next=ue,lt.lanes|=be,fo|=be;ce=ce.next}while(ce!==null&&ce!==l);if(K===null?N=w:K.next=F,!ri(w,s.memoizedState)&&(On=!0,ve&&(f=nu,f!==null)))throw f;s.memoizedState=w,s.baseState=N,s.baseQueue=K,p.lastRenderedState=w}return b===null&&(p.lanes=0),[s.memoizedState,p.dispatch]}function Wy(s){var l=An(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=s;var p=f.dispatch,b=f.pending,w=l.memoizedState;if(b!==null){f.pending=null;var N=b=b.next;do w=s(w,N.action),N=N.next;while(N!==b);ri(w,l.memoizedState)||(On=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),f.lastRenderedState=w}return[w,p]}function vT(s,l,f){var p=lt,b=An(),w=Et;if(w){if(f===void 0)throw Error(r(407));f=f()}else f=l();var N=!ri((Ht||b).memoizedState,f);if(N&&(b.memoizedState=f,On=!0),b=b.queue,Jy(xT.bind(null,p,b,s),[s]),b.getSnapshot!==l||N||Pn!==null&&Pn.memoizedState.tag&1){if(p.flags|=2048,lu(9,{destroy:void 0},bT.bind(null,p,b,f,l),null),Wt===null)throw Error(r(349));w||(ls&127)!==0||yT(p,l,f)}return f}function yT(s,l,f){s.flags|=16384,s={getSnapshot:l,value:f},l=lt.updateQueue,l===null?(l=Ig(),lt.updateQueue=l,l.stores=[s]):(f=l.stores,f===null?l.stores=[s]:f.push(s))}function bT(s,l,f,p){l.value=f,l.getSnapshot=p,_T(l)&&wT(s)}function xT(s,l,f){return f(function(){_T(l)&&wT(s)})}function _T(s){var l=s.getSnapshot;s=s.value;try{var f=l();return!ri(s,f)}catch{return!0}}function wT(s){var l=Sl(s,2);l!==null&&Hr(l,s,2)}function Qy(s){var l=Ir();if(typeof s=="function"){var f=s;if(s=f(),Ml){En(!0);try{f()}finally{En(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:s},l}function ET(s,l,f,p){return s.baseState=f,Xy(s,Ht,typeof p=="function"?p:cs)}function Mj(s,l,f,p,b){if(Mg(s))throw Error(r(485));if(s=l.action,s!==null){var w={payload:b,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){w.listeners.push(N)}};$.T!==null?f(!0):w.isTransition=!1,p(w),f=l.pending,f===null?(w.next=l.pending=w,ST(l,w)):(w.next=f.next,l.pending=f.next=w)}}function ST(s,l){var f=l.action,p=l.payload,b=s.state;if(l.isTransition){var w=$.T,N={};$.T=N;try{var F=f(b,p),K=$.S;K!==null&&K(N,F),TT(s,l,F)}catch(ce){Zy(s,l,ce)}finally{w!==null&&N.types!==null&&(w.types=N.types),$.T=w}}else try{w=f(b,p),TT(s,l,w)}catch(ce){Zy(s,l,ce)}}function TT(s,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(p){AT(s,l,p)},function(p){return Zy(s,l,p)}):AT(s,l,f)}function AT(s,l,f){l.status="fulfilled",l.value=f,CT(l),s.state=f,l=s.pending,l!==null&&(f=l.next,f===l?s.pending=null:(f=f.next,l.next=f,ST(s,f)))}function Zy(s,l,f){var p=s.pending;if(s.pending=null,p!==null){p=p.next;do l.status="rejected",l.reason=f,CT(l),l=l.next;while(l!==p)}s.action=null}function CT(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function IT(s,l){return l}function RT(s,l){if(Et){var f=Wt.formState;if(f!==null){e:{var p=lt;if(Et){if(en){t:{for(var b=en,w=Si;b.nodeType!==8;){if(!w){b=null;break t}if(b=Ai(b.nextSibling),b===null){b=null;break t}}w=b.data,b=w==="F!"||w==="F"?b:null}if(b){en=Ai(b.nextSibling),p=b.data==="F!";break e}}no(p)}p=!1}p&&(l=f[0])}}return f=Ir(),f.memoizedState=f.baseState=l,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:IT,lastRenderedState:l},f.queue=p,f=KT.bind(null,lt,p),p.dispatch=f,p=Qy(!1),w=ib.bind(null,lt,!1,p.queue),p=Ir(),b={state:l,dispatch:null,action:s,pending:null},p.queue=b,f=Mj.bind(null,lt,b,w,f),b.dispatch=f,p.memoizedState=s,[l,f,!1]}function DT(s){var l=An();return kT(l,Ht,s)}function kT(s,l,f){if(l=Xy(s,l,IT)[0],s=Dg(cs)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var p=wf(l)}catch(N){throw N===ru?xg:N}else p=l;l=An();var b=l.queue,w=b.dispatch;return f!==l.memoizedState&&(lt.flags|=2048,lu(9,{destroy:void 0},Pj.bind(null,b,f),null)),[p,w,s]}function Pj(s,l){s.action=l}function NT(s){var l=An(),f=Ht;if(f!==null)return kT(l,f,s);An(),l=l.memoizedState,f=An();var p=f.queue.dispatch;return f.memoizedState=s,[l,p,!1]}function lu(s,l,f,p){return s={tag:s,create:f,deps:p,inst:l,next:null},l=lt.updateQueue,l===null&&(l=Ig(),lt.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=s.next=s:(p=f.next,f.next=s,s.next=p,l.lastEffect=s),s}function MT(){return An().memoizedState}function kg(s,l,f,p){var b=Ir();lt.flags|=s,b.memoizedState=lu(1|l,{destroy:void 0},f,p===void 0?null:p)}function Ng(s,l,f,p){var b=An();p=p===void 0?null:p;var w=b.memoizedState.inst;Ht!==null&&p!==null&&Gy(p,Ht.memoizedState.deps)?b.memoizedState=lu(l,w,f,p):(lt.flags|=s,b.memoizedState=lu(1|l,w,f,p))}function PT(s,l){kg(8390656,8,s,l)}function Jy(s,l){Ng(2048,8,s,l)}function Oj(s){lt.flags|=4;var l=lt.updateQueue;if(l===null)l=Ig(),lt.updateQueue=l,l.events=[s];else{var f=l.events;f===null?l.events=[s]:f.push(s)}}function OT(s){var l=An().memoizedState;return Oj({ref:l,nextImpl:s}),function(){if((Nt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function VT(s,l){return Ng(4,2,s,l)}function jT(s,l){return Ng(4,4,s,l)}function zT(s,l){if(typeof l=="function"){s=s();var f=l(s);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function LT(s,l,f){f=f!=null?f.concat([s]):null,Ng(4,4,zT.bind(null,l,s),f)}function eb(){}function BT(s,l){var f=An();l=l===void 0?null:l;var p=f.memoizedState;return l!==null&&Gy(l,p[1])?p[0]:(f.memoizedState=[s,l],s)}function UT(s,l){var f=An();l=l===void 0?null:l;var p=f.memoizedState;if(l!==null&&Gy(l,p[1]))return p[0];if(p=s(),Ml){En(!0);try{s()}finally{En(!1)}}return f.memoizedState=[p,l],p}function tb(s,l,f){return f===void 0||(ls&1073741824)!==0&&(bt&261930)===0?s.memoizedState=l:(s.memoizedState=f,s=FA(),lt.lanes|=s,fo|=s,f)}function FT(s,l,f,p){return ri(f,l)?f:au.current!==null?(s=tb(s,f,p),ri(s,l)||(On=!0),s):(ls&42)===0||(ls&1073741824)!==0&&(bt&261930)===0?(On=!0,s.memoizedState=f):(s=FA(),lt.lanes|=s,fo|=s,l)}function GT(s,l,f,p,b){var w=H.p;H.p=w!==0&&8>w?w:8;var N=$.T,F={};$.T=F,ib(s,!1,l,f);try{var K=b(),ce=$.S;if(ce!==null&&ce(F,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var ve=Dj(K,p);Ef(s,l,ve,ci(s))}else Ef(s,l,p,ci(s))}catch(be){Ef(s,l,{then:function(){},status:"rejected",reason:be},ci())}finally{H.p=w,N!==null&&F.types!==null&&(N.types=F.types),$.T=N}}function Vj(){}function nb(s,l,f,p){if(s.tag!==5)throw Error(r(476));var b=qT(s).queue;GT(s,b,l,ee,f===null?Vj:function(){return HT(s),f(p)})}function qT(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:ee},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:f},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function HT(s){var l=qT(s);l.next===null&&(l=s.alternate.memoizedState),Ef(s,l.next.queue,{},ci())}function rb(){return sr(Bf)}function $T(){return An().memoizedState}function YT(){return An().memoizedState}function jj(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var f=ci();s=ao(f);var p=so(l,s,f);p!==null&&(Hr(p,l,f),yf(p,l,f)),l={cache:Ny()},s.payload=l;return}l=l.return}}function zj(s,l,f){var p=ci();f={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Mg(s)?XT(l,f):(f=_y(s,l,f,p),f!==null&&(Hr(f,s,p),WT(f,l,p)))}function KT(s,l,f){var p=ci();Ef(s,l,f,p)}function Ef(s,l,f,p){var b={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Mg(s))XT(l,b);else{var w=s.alternate;if(s.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var N=l.lastRenderedState,F=w(N,f);if(b.hasEagerState=!0,b.eagerState=F,ri(F,N))return hg(s,l,b,0),Wt===null&&fg(),!1}catch{}finally{}if(f=_y(s,l,b,p),f!==null)return Hr(f,s,p),WT(f,l,p),!0}return!1}function ib(s,l,f,p){if(p={lane:2,revertLane:Vb(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Mg(s)){if(l)throw Error(r(479))}else l=_y(s,f,p,2),l!==null&&Hr(l,s,2)}function Mg(s){var l=s.alternate;return s===lt||l!==null&&l===lt}function XT(s,l){su=Ag=!0;var f=s.pending;f===null?l.next=l:(l.next=f.next,f.next=l),s.pending=l}function WT(s,l,f){if((f&4194048)!==0){var p=l.lanes;p&=s.pendingLanes,f|=p,l.lanes=f,qd(s,f)}}var Sf={readContext:sr,use:Rg,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useLayoutEffect:vn,useInsertionEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useSyncExternalStore:vn,useId:vn,useHostTransitionStatus:vn,useFormState:vn,useActionState:vn,useOptimistic:vn,useMemoCache:vn,useCacheRefresh:vn};Sf.useEffectEvent=vn;var QT={readContext:sr,use:Rg,useCallback:function(s,l){return Ir().memoizedState=[s,l===void 0?null:l],s},useContext:sr,useEffect:PT,useImperativeHandle:function(s,l,f){f=f!=null?f.concat([s]):null,kg(4194308,4,zT.bind(null,l,s),f)},useLayoutEffect:function(s,l){return kg(4194308,4,s,l)},useInsertionEffect:function(s,l){kg(4,2,s,l)},useMemo:function(s,l){var f=Ir();l=l===void 0?null:l;var p=s();if(Ml){En(!0);try{s()}finally{En(!1)}}return f.memoizedState=[p,l],p},useReducer:function(s,l,f){var p=Ir();if(f!==void 0){var b=f(l);if(Ml){En(!0);try{f(l)}finally{En(!1)}}}else b=l;return p.memoizedState=p.baseState=b,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:b},p.queue=s,s=s.dispatch=zj.bind(null,lt,s),[p.memoizedState,s]},useRef:function(s){var l=Ir();return s={current:s},l.memoizedState=s},useState:function(s){s=Qy(s);var l=s.queue,f=KT.bind(null,lt,l);return l.dispatch=f,[s.memoizedState,f]},useDebugValue:eb,useDeferredValue:function(s,l){var f=Ir();return tb(f,s,l)},useTransition:function(){var s=Qy(!1);return s=GT.bind(null,lt,s.queue,!0,!1),Ir().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,f){var p=lt,b=Ir();if(Et){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),Wt===null)throw Error(r(349));(bt&127)!==0||yT(p,l,f)}b.memoizedState=f;var w={value:f,getSnapshot:l};return b.queue=w,PT(xT.bind(null,p,w,s),[s]),p.flags|=2048,lu(9,{destroy:void 0},bT.bind(null,p,w,f,l),null),f},useId:function(){var s=Ir(),l=Wt.identifierPrefix;if(Et){var f=Ta,p=Sa;f=(p&~(1<<32-Dt(p)-1)).toString(32)+f,l="_"+l+"R_"+f,f=Cg++,0<f&&(l+="H"+f.toString(32)),l+="_"}else f=kj++,l="_"+l+"r_"+f.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:rb,useFormState:RT,useActionState:RT,useOptimistic:function(s){var l=Ir();l.memoizedState=l.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=ib.bind(null,lt,!0,f),f.dispatch=l,[s,l]},useMemoCache:Ky,useCacheRefresh:function(){return Ir().memoizedState=jj.bind(null,lt)},useEffectEvent:function(s){var l=Ir(),f={impl:s};return l.memoizedState=f,function(){if((Nt&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},ab={readContext:sr,use:Rg,useCallback:BT,useContext:sr,useEffect:Jy,useImperativeHandle:LT,useInsertionEffect:VT,useLayoutEffect:jT,useMemo:UT,useReducer:Dg,useRef:MT,useState:function(){return Dg(cs)},useDebugValue:eb,useDeferredValue:function(s,l){var f=An();return FT(f,Ht.memoizedState,s,l)},useTransition:function(){var s=Dg(cs)[0],l=An().memoizedState;return[typeof s=="boolean"?s:wf(s),l]},useSyncExternalStore:vT,useId:$T,useHostTransitionStatus:rb,useFormState:DT,useActionState:DT,useOptimistic:function(s,l){var f=An();return ET(f,Ht,s,l)},useMemoCache:Ky,useCacheRefresh:YT};ab.useEffectEvent=OT;var ZT={readContext:sr,use:Rg,useCallback:BT,useContext:sr,useEffect:Jy,useImperativeHandle:LT,useInsertionEffect:VT,useLayoutEffect:jT,useMemo:UT,useReducer:Wy,useRef:MT,useState:function(){return Wy(cs)},useDebugValue:eb,useDeferredValue:function(s,l){var f=An();return Ht===null?tb(f,s,l):FT(f,Ht.memoizedState,s,l)},useTransition:function(){var s=Wy(cs)[0],l=An().memoizedState;return[typeof s=="boolean"?s:wf(s),l]},useSyncExternalStore:vT,useId:$T,useHostTransitionStatus:rb,useFormState:NT,useActionState:NT,useOptimistic:function(s,l){var f=An();return Ht!==null?ET(f,Ht,s,l):(f.baseState=s,[s,f.queue.dispatch])},useMemoCache:Ky,useCacheRefresh:YT};ZT.useEffectEvent=OT;function sb(s,l,f,p){l=s.memoizedState,f=f(p,l),f=f==null?l:g({},l,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var ob={enqueueSetState:function(s,l,f){s=s._reactInternals;var p=ci(),b=ao(p);b.payload=l,f!=null&&(b.callback=f),l=so(s,b,p),l!==null&&(Hr(l,s,p),yf(l,s,p))},enqueueReplaceState:function(s,l,f){s=s._reactInternals;var p=ci(),b=ao(p);b.tag=1,b.payload=l,f!=null&&(b.callback=f),l=so(s,b,p),l!==null&&(Hr(l,s,p),yf(l,s,p))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var f=ci(),p=ao(f);p.tag=2,l!=null&&(p.callback=l),l=so(s,p,f),l!==null&&(Hr(l,s,f),yf(l,s,f))}};function JT(s,l,f,p,b,w,N){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,w,N):l.prototype&&l.prototype.isPureReactComponent?!uf(f,p)||!uf(b,w):!0}function eA(s,l,f,p){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,p),l.state!==s&&ob.enqueueReplaceState(l,l.state,null)}function Pl(s,l){var f=l;if("ref"in l){f={};for(var p in l)p!=="ref"&&(f[p]=l[p])}if(s=s.defaultProps){f===l&&(f=g({},f));for(var b in s)f[b]===void 0&&(f[b]=s[b])}return f}function tA(s){dg(s)}function nA(s){console.error(s)}function rA(s){dg(s)}function Pg(s,l){try{var f=s.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(p){setTimeout(function(){throw p})}}function iA(s,l,f){try{var p=s.onCaughtError;p(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function lb(s,l,f){return f=ao(f),f.tag=3,f.payload={element:null},f.callback=function(){Pg(s,l)},f}function aA(s){return s=ao(s),s.tag=3,s}function sA(s,l,f,p){var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var w=p.value;s.payload=function(){return b(w)},s.callback=function(){iA(l,f,p)}}var N=f.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(s.callback=function(){iA(l,f,p),typeof b!="function"&&(ho===null?ho=new Set([this]):ho.add(this));var F=p.stack;this.componentDidCatch(p.value,{componentStack:F!==null?F:""})})}function Lj(s,l,f,p,b){if(f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(l=f.alternate,l!==null&&eu(l,f,b,!0),f=ai.current,f!==null){switch(f.tag){case 31:case 13:return Ti===null?$g():f.alternate===null&&yn===0&&(yn=3),f.flags&=-257,f.flags|=65536,f.lanes=b,p===_g?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([p]):l.add(p),Mb(s,p,b)),!1;case 22:return f.flags|=65536,p===_g?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([p])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([p]):f.add(p)),Mb(s,p,b)),!1}throw Error(r(435,f.tag))}return Mb(s,p,b),$g(),!1}if(Et)return l=ai.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=b,p!==Cy&&(s=Error(r(422),{cause:p}),hf(_i(s,f)))):(p!==Cy&&(l=Error(r(423),{cause:p}),hf(_i(l,f))),s=s.current.alternate,s.flags|=65536,b&=-b,s.lanes|=b,p=_i(p,f),b=lb(s.stateNode,p,b),zy(s,b),yn!==4&&(yn=2)),!1;var w=Error(r(520),{cause:p});if(w=_i(w,f),Nf===null?Nf=[w]:Nf.push(w),yn!==4&&(yn=2),l===null)return!0;p=_i(p,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,s=b&-b,f.lanes|=s,s=lb(f.stateNode,p,s),zy(f,s),!1;case 1:if(l=f.type,w=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ho===null||!ho.has(w))))return f.flags|=65536,b&=-b,f.lanes|=b,b=aA(b),sA(b,s,f,p),zy(f,b),!1}f=f.return}while(f!==null);return!1}var cb=Error(r(461)),On=!1;function or(s,l,f,p){l.child=s===null?uT(l,null,f,p):Nl(l,s.child,f,p)}function oA(s,l,f,p,b){f=f.render;var w=l.ref;if("ref"in p){var N={};for(var F in p)F!=="ref"&&(N[F]=p[F])}else N=p;return Il(l),p=qy(s,l,f,N,w,b),F=Hy(),s!==null&&!On?($y(s,l,b),us(s,l,b)):(Et&&F&&Ty(l),l.flags|=1,or(s,l,p,b),l.child)}function lA(s,l,f,p,b){if(s===null){var w=f.type;return typeof w=="function"&&!wy(w)&&w.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=w,cA(s,l,w,p,b)):(s=gg(f.type,null,p,l,l.mode,b),s.ref=l.ref,s.return=l,l.child=s)}if(w=s.child,!vb(s,b)){var N=w.memoizedProps;if(f=f.compare,f=f!==null?f:uf,f(N,p)&&s.ref===l.ref)return us(s,l,b)}return l.flags|=1,s=is(w,p),s.ref=l.ref,s.return=l,l.child=s}function cA(s,l,f,p,b){if(s!==null){var w=s.memoizedProps;if(uf(w,p)&&s.ref===l.ref)if(On=!1,l.pendingProps=p=w,vb(s,b))(s.flags&131072)!==0&&(On=!0);else return l.lanes=s.lanes,us(s,l,b)}return ub(s,l,f,p,b)}function uA(s,l,f,p){var b=p.children,w=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((l.flags&128)!==0){if(w=w!==null?w.baseLanes|f:f,s!==null){for(p=l.child=s.child,b=0;p!==null;)b=b|p.lanes|p.childLanes,p=p.sibling;p=b&~w}else p=0,l.child=null;return dA(s,l,w,f,p)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&bg(l,w!==null?w.cachePool:null),w!==null?hT(l,w):By(),pT(l);else return p=l.lanes=536870912,dA(s,l,w!==null?w.baseLanes|f:f,f,p)}else w!==null?(bg(l,w.cachePool),hT(l,w),lo(),l.memoizedState=null):(s!==null&&bg(l,null),By(),lo());return or(s,l,b,f),l.child}function Tf(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function dA(s,l,f,p,b){var w=Py();return w=w===null?null:{parent:Mn._currentValue,pool:w},l.memoizedState={baseLanes:f,cachePool:w},s!==null&&bg(l,null),By(),pT(l),s!==null&&eu(s,l,p,!0),l.childLanes=b,null}function Og(s,l){return l=jg({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function fA(s,l,f){return Nl(l,s.child,null,f),s=Og(l,l.pendingProps),s.flags|=2,si(l),l.memoizedState=null,s}function Bj(s,l,f){var p=l.pendingProps,b=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(Et){if(p.mode==="hidden")return s=Og(l,p),l.lanes=536870912,Tf(null,s);if(Fy(l),(s=en)?(s=SC(s,Si),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:eo!==null?{id:Sa,overflow:Ta}:null,retryLane:536870912,hydrationErrors:null},f=XS(s),f.return=l,l.child=f,ar=l,en=null)):s=null,s===null)throw no(l);return l.lanes=536870912,null}return Og(l,p)}var w=s.memoizedState;if(w!==null){var N=w.dehydrated;if(Fy(l),b)if(l.flags&256)l.flags&=-257,l=fA(s,l,f);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(r(558));else if(On||eu(s,l,f,!1),b=(f&s.childLanes)!==0,On||b){if(p=Wt,p!==null&&(N=Hd(p,f),N!==0&&N!==w.retryLane))throw w.retryLane=N,Sl(s,N),Hr(p,s,N),cb;$g(),l=fA(s,l,f)}else s=w.treeContext,en=Ai(N.nextSibling),ar=l,Et=!0,to=null,Si=!1,s!==null&&ZS(l,s),l=Og(l,p),l.flags|=4096;return l}return s=is(s.child,{mode:p.mode,children:p.children}),s.ref=l.ref,l.child=s,s.return=l,s}function Vg(s,l){var f=l.ref;if(f===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(s===null||s.ref!==f)&&(l.flags|=4194816)}}function ub(s,l,f,p,b){return Il(l),f=qy(s,l,f,p,void 0,b),p=Hy(),s!==null&&!On?($y(s,l,b),us(s,l,b)):(Et&&p&&Ty(l),l.flags|=1,or(s,l,f,b),l.child)}function hA(s,l,f,p,b,w){return Il(l),l.updateQueue=null,f=mT(l,p,f,b),gT(s),p=Hy(),s!==null&&!On?($y(s,l,w),us(s,l,w)):(Et&&p&&Ty(l),l.flags|=1,or(s,l,f,w),l.child)}function pA(s,l,f,p,b){if(Il(l),l.stateNode===null){var w=Wc,N=f.contextType;typeof N=="object"&&N!==null&&(w=sr(N)),w=new f(p,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=ob,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=p,w.state=l.memoizedState,w.refs={},Vy(l),N=f.contextType,w.context=typeof N=="object"&&N!==null?sr(N):Wc,w.state=l.memoizedState,N=f.getDerivedStateFromProps,typeof N=="function"&&(sb(l,f,N,p),w.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(N=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),N!==w.state&&ob.enqueueReplaceState(w,w.state,null),xf(l,p,w,b),bf(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),p=!0}else if(s===null){w=l.stateNode;var F=l.memoizedProps,K=Pl(f,F);w.props=K;var ce=w.context,ve=f.contextType;N=Wc,typeof ve=="object"&&ve!==null&&(N=sr(ve));var be=f.getDerivedStateFromProps;ve=typeof be=="function"||typeof w.getSnapshotBeforeUpdate=="function",F=l.pendingProps!==F,ve||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(F||ce!==N)&&eA(l,w,p,N),io=!1;var ue=l.memoizedState;w.state=ue,xf(l,p,w,b),bf(),ce=l.memoizedState,F||ue!==ce||io?(typeof be=="function"&&(sb(l,f,be,p),ce=l.memoizedState),(K=io||JT(l,f,K,p,ue,ce,N))?(ve||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=ce),w.props=p,w.state=ce,w.context=N,p=K):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{w=l.stateNode,jy(s,l),N=l.memoizedProps,ve=Pl(f,N),w.props=ve,be=l.pendingProps,ue=w.context,ce=f.contextType,K=Wc,typeof ce=="object"&&ce!==null&&(K=sr(ce)),F=f.getDerivedStateFromProps,(ce=typeof F=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N!==be||ue!==K)&&eA(l,w,p,K),io=!1,ue=l.memoizedState,w.state=ue,xf(l,p,w,b),bf();var pe=l.memoizedState;N!==be||ue!==pe||io||s!==null&&s.dependencies!==null&&vg(s.dependencies)?(typeof F=="function"&&(sb(l,f,F,p),pe=l.memoizedState),(ve=io||JT(l,f,ve,p,ue,pe,K)||s!==null&&s.dependencies!==null&&vg(s.dependencies))?(ce||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(p,pe,K),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(p,pe,K)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||N===s.memoizedProps&&ue===s.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&ue===s.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=pe),w.props=p,w.state=pe,w.context=K,p=ve):(typeof w.componentDidUpdate!="function"||N===s.memoizedProps&&ue===s.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&ue===s.memoizedState||(l.flags|=1024),p=!1)}return w=p,Vg(s,l),p=(l.flags&128)!==0,w||p?(w=l.stateNode,f=p&&typeof f.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,s!==null&&p?(l.child=Nl(l,s.child,null,b),l.child=Nl(l,null,f,b)):or(s,l,f,b),l.memoizedState=w.state,s=l.child):s=us(s,l,b),s}function gA(s,l,f,p){return Al(),l.flags|=256,or(s,l,f,p),l.child}var db={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fb(s){return{baseLanes:s,cachePool:iT()}}function hb(s,l,f){return s=s!==null?s.childLanes&~f:0,l&&(s|=li),s}function mA(s,l,f){var p=l.pendingProps,b=!1,w=(l.flags&128)!==0,N;if((N=w)||(N=s!==null&&s.memoizedState===null?!1:(Tn.current&2)!==0),N&&(b=!0,l.flags&=-129),N=(l.flags&32)!==0,l.flags&=-33,s===null){if(Et){if(b?oo(l):lo(),(s=en)?(s=SC(s,Si),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:eo!==null?{id:Sa,overflow:Ta}:null,retryLane:536870912,hydrationErrors:null},f=XS(s),f.return=l,l.child=f,ar=l,en=null)):s=null,s===null)throw no(l);return Xb(s)?l.lanes=32:l.lanes=536870912,null}var F=p.children;return p=p.fallback,b?(lo(),b=l.mode,F=jg({mode:"hidden",children:F},b),p=Tl(p,b,f,null),F.return=l,p.return=l,F.sibling=p,l.child=F,p=l.child,p.memoizedState=fb(f),p.childLanes=hb(s,N,f),l.memoizedState=db,Tf(null,p)):(oo(l),pb(l,F))}var K=s.memoizedState;if(K!==null&&(F=K.dehydrated,F!==null)){if(w)l.flags&256?(oo(l),l.flags&=-257,l=gb(s,l,f)):l.memoizedState!==null?(lo(),l.child=s.child,l.flags|=128,l=null):(lo(),F=p.fallback,b=l.mode,p=jg({mode:"visible",children:p.children},b),F=Tl(F,b,f,null),F.flags|=2,p.return=l,F.return=l,p.sibling=F,l.child=p,Nl(l,s.child,null,f),p=l.child,p.memoizedState=fb(f),p.childLanes=hb(s,N,f),l.memoizedState=db,l=Tf(null,p));else if(oo(l),Xb(F)){if(N=F.nextSibling&&F.nextSibling.dataset,N)var ce=N.dgst;N=ce,p=Error(r(419)),p.stack="",p.digest=N,hf({value:p,source:null,stack:null}),l=gb(s,l,f)}else if(On||eu(s,l,f,!1),N=(f&s.childLanes)!==0,On||N){if(N=Wt,N!==null&&(p=Hd(N,f),p!==0&&p!==K.retryLane))throw K.retryLane=p,Sl(s,p),Hr(N,s,p),cb;Kb(F)||$g(),l=gb(s,l,f)}else Kb(F)?(l.flags|=192,l.child=s.child,l=null):(s=K.treeContext,en=Ai(F.nextSibling),ar=l,Et=!0,to=null,Si=!1,s!==null&&ZS(l,s),l=pb(l,p.children),l.flags|=4096);return l}return b?(lo(),F=p.fallback,b=l.mode,K=s.child,ce=K.sibling,p=is(K,{mode:"hidden",children:p.children}),p.subtreeFlags=K.subtreeFlags&65011712,ce!==null?F=is(ce,F):(F=Tl(F,b,f,null),F.flags|=2),F.return=l,p.return=l,p.sibling=F,l.child=p,Tf(null,p),p=l.child,F=s.child.memoizedState,F===null?F=fb(f):(b=F.cachePool,b!==null?(K=Mn._currentValue,b=b.parent!==K?{parent:K,pool:K}:b):b=iT(),F={baseLanes:F.baseLanes|f,cachePool:b}),p.memoizedState=F,p.childLanes=hb(s,N,f),l.memoizedState=db,Tf(s.child,p)):(oo(l),f=s.child,s=f.sibling,f=is(f,{mode:"visible",children:p.children}),f.return=l,f.sibling=null,s!==null&&(N=l.deletions,N===null?(l.deletions=[s],l.flags|=16):N.push(s)),l.child=f,l.memoizedState=null,f)}function pb(s,l){return l=jg({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function jg(s,l){return s=ii(22,s,null,l),s.lanes=0,s}function gb(s,l,f){return Nl(l,s.child,null,f),s=pb(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function vA(s,l,f){s.lanes|=l;var p=s.alternate;p!==null&&(p.lanes|=l),Dy(s.return,l,f)}function mb(s,l,f,p,b,w){var N=s.memoizedState;N===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:b,treeForkCount:w}:(N.isBackwards=l,N.rendering=null,N.renderingStartTime=0,N.last=p,N.tail=f,N.tailMode=b,N.treeForkCount=w)}function yA(s,l,f){var p=l.pendingProps,b=p.revealOrder,w=p.tail;p=p.children;var N=Tn.current,F=(N&2)!==0;if(F?(N=N&1|2,l.flags|=128):N&=1,ne(Tn,N),or(s,l,p,f),p=Et?ff:0,!F&&s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&vA(s,f,l);else if(s.tag===19)vA(s,f,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(b){case"forwards":for(f=l.child,b=null;f!==null;)s=f.alternate,s!==null&&Tg(s)===null&&(b=f),f=f.sibling;f=b,f===null?(b=l.child,l.child=null):(b=f.sibling,f.sibling=null),mb(l,!1,b,f,w,p);break;case"backwards":case"unstable_legacy-backwards":for(f=null,b=l.child,l.child=null;b!==null;){if(s=b.alternate,s!==null&&Tg(s)===null){l.child=b;break}s=b.sibling,b.sibling=f,f=b,b=s}mb(l,!0,f,null,w,p);break;case"together":mb(l,!1,null,null,void 0,p);break;default:l.memoizedState=null}return l.child}function us(s,l,f){if(s!==null&&(l.dependencies=s.dependencies),fo|=l.lanes,(f&l.childLanes)===0)if(s!==null){if(eu(s,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,f=is(s,s.pendingProps),l.child=f,f.return=l;s.sibling!==null;)s=s.sibling,f=f.sibling=is(s,s.pendingProps),f.return=l;f.sibling=null}return l.child}function vb(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&vg(s)))}function Uj(s,l,f){switch(l.tag){case 3:xe(l,l.stateNode.containerInfo),ro(l,Mn,s.memoizedState.cache),Al();break;case 27:case 5:Ue(l);break;case 4:xe(l,l.stateNode.containerInfo);break;case 10:ro(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,Fy(l),null;break;case 13:var p=l.memoizedState;if(p!==null)return p.dehydrated!==null?(oo(l),l.flags|=128,null):(f&l.child.childLanes)!==0?mA(s,l,f):(oo(l),s=us(s,l,f),s!==null?s.sibling:null);oo(l);break;case 19:var b=(s.flags&128)!==0;if(p=(f&l.childLanes)!==0,p||(eu(s,l,f,!1),p=(f&l.childLanes)!==0),b){if(p)return yA(s,l,f);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),ne(Tn,Tn.current),p)break;return null;case 22:return l.lanes=0,uA(s,l,f,l.pendingProps);case 24:ro(l,Mn,s.memoizedState.cache)}return us(s,l,f)}function bA(s,l,f){if(s!==null)if(s.memoizedProps!==l.pendingProps)On=!0;else{if(!vb(s,f)&&(l.flags&128)===0)return On=!1,Uj(s,l,f);On=(s.flags&131072)!==0}else On=!1,Et&&(l.flags&1048576)!==0&&QS(l,ff,l.index);switch(l.lanes=0,l.tag){case 16:e:{var p=l.pendingProps;if(s=Dl(l.elementType),l.type=s,typeof s=="function")wy(s)?(p=Pl(s,p),l.tag=1,l=pA(null,l,s,p,f)):(l.tag=0,l=ub(null,l,s,p,f));else{if(s!=null){var b=s.$$typeof;if(b===O){l.tag=11,l=oA(null,l,s,p,f);break e}else if(b===A){l.tag=14,l=lA(null,l,s,p,f);break e}}throw l=W(s)||s,Error(r(306,l,""))}}return l;case 0:return ub(s,l,l.type,l.pendingProps,f);case 1:return p=l.type,b=Pl(p,l.pendingProps),pA(s,l,p,b,f);case 3:e:{if(xe(l,l.stateNode.containerInfo),s===null)throw Error(r(387));p=l.pendingProps;var w=l.memoizedState;b=w.element,jy(s,l),xf(l,p,null,f);var N=l.memoizedState;if(p=N.cache,ro(l,Mn,p),p!==w.cache&&ky(l,[Mn],f,!0),bf(),p=N.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:N.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=gA(s,l,p,f);break e}else if(p!==b){b=_i(Error(r(424)),l),hf(b),l=gA(s,l,p,f);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(en=Ai(s.firstChild),ar=l,Et=!0,to=null,Si=!0,f=uT(l,null,p,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Al(),p===b){l=us(s,l,f);break e}or(s,l,p,f)}l=l.child}return l;case 26:return Vg(s,l),s===null?(f=DC(l.type,null,l.pendingProps,null))?l.memoizedState=f:Et||(f=l.type,s=l.pendingProps,p=Jg(le.current).createElement(f),p[Dn]=l,p[Jn]=s,lr(p,f,s),kn(p),l.stateNode=p):l.memoizedState=DC(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return Ue(l),s===null&&Et&&(p=l.stateNode=CC(l.type,l.pendingProps,le.current),ar=l,Si=!0,b=en,vo(l.type)?(Wb=b,en=Ai(p.firstChild)):en=b),or(s,l,l.pendingProps.children,f),Vg(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&Et&&((b=p=en)&&(p=v5(p,l.type,l.pendingProps,Si),p!==null?(l.stateNode=p,ar=l,en=Ai(p.firstChild),Si=!1,b=!0):b=!1),b||no(l)),Ue(l),b=l.type,w=l.pendingProps,N=s!==null?s.memoizedProps:null,p=w.children,Hb(b,w)?p=null:N!==null&&Hb(b,N)&&(l.flags|=32),l.memoizedState!==null&&(b=qy(s,l,Nj,null,null,f),Bf._currentValue=b),Vg(s,l),or(s,l,p,f),l.child;case 6:return s===null&&Et&&((s=f=en)&&(f=y5(f,l.pendingProps,Si),f!==null?(l.stateNode=f,ar=l,en=null,s=!0):s=!1),s||no(l)),null;case 13:return mA(s,l,f);case 4:return xe(l,l.stateNode.containerInfo),p=l.pendingProps,s===null?l.child=Nl(l,null,p,f):or(s,l,p,f),l.child;case 11:return oA(s,l,l.type,l.pendingProps,f);case 7:return or(s,l,l.pendingProps,f),l.child;case 8:return or(s,l,l.pendingProps.children,f),l.child;case 12:return or(s,l,l.pendingProps.children,f),l.child;case 10:return p=l.pendingProps,ro(l,l.type,p.value),or(s,l,p.children,f),l.child;case 9:return b=l.type._context,p=l.pendingProps.children,Il(l),b=sr(b),p=p(b),l.flags|=1,or(s,l,p,f),l.child;case 14:return lA(s,l,l.type,l.pendingProps,f);case 15:return cA(s,l,l.type,l.pendingProps,f);case 19:return yA(s,l,f);case 31:return Bj(s,l,f);case 22:return uA(s,l,f,l.pendingProps);case 24:return Il(l),p=sr(Mn),s===null?(b=Py(),b===null&&(b=Wt,w=Ny(),b.pooledCache=w,w.refCount++,w!==null&&(b.pooledCacheLanes|=f),b=w),l.memoizedState={parent:p,cache:b},Vy(l),ro(l,Mn,b)):((s.lanes&f)!==0&&(jy(s,l),xf(l,null,null,f),bf()),b=s.memoizedState,w=l.memoizedState,b.parent!==p?(b={parent:p,cache:p},l.memoizedState=b,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=b),ro(l,Mn,p)):(p=w.cache,ro(l,Mn,p),p!==b.cache&&ky(l,[Mn],f,!0))),or(s,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function ds(s){s.flags|=4}function yb(s,l,f,p,b){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(b&335544128)===b)if(s.stateNode.complete)s.flags|=8192;else if($A())s.flags|=8192;else throw kl=_g,Oy}else s.flags&=-16777217}function xA(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!OC(l))if($A())s.flags|=8192;else throw kl=_g,Oy}function zg(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Ja():536870912,s.lanes|=l,fu|=l)}function Af(s,l){if(!Et)switch(s.tailMode){case"hidden":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function tn(s){var l=s.alternate!==null&&s.alternate.child===s.child,f=0,p=0;if(l)for(var b=s.child;b!==null;)f|=b.lanes|b.childLanes,p|=b.subtreeFlags&65011712,p|=b.flags&65011712,b.return=s,b=b.sibling;else for(b=s.child;b!==null;)f|=b.lanes|b.childLanes,p|=b.subtreeFlags,p|=b.flags,b.return=s,b=b.sibling;return s.subtreeFlags|=p,s.childLanes=f,l}function Fj(s,l,f){var p=l.pendingProps;switch(Ay(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(l),null;case 1:return tn(l),null;case 3:return f=l.stateNode,p=null,s!==null&&(p=s.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),os(Mn),Se(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(Jc(l)?ds(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Iy())),tn(l),null;case 26:var b=l.type,w=l.memoizedState;return s===null?(ds(l),w!==null?(tn(l),xA(l,w)):(tn(l),yb(l,b,null,p,f))):w?w!==s.memoizedState?(ds(l),tn(l),xA(l,w)):(tn(l),l.flags&=-16777217):(s=s.memoizedProps,s!==p&&ds(l),tn(l),yb(l,b,s,p,f)),null;case 27:if(Ee(l),f=le.current,b=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==p&&ds(l);else{if(!p){if(l.stateNode===null)throw Error(r(166));return tn(l),null}s=ae.current,Jc(l)?JS(l):(s=CC(b,p,f),l.stateNode=s,ds(l))}return tn(l),null;case 5:if(Ee(l),b=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==p&&ds(l);else{if(!p){if(l.stateNode===null)throw Error(r(166));return tn(l),null}if(w=ae.current,Jc(l))JS(l);else{var N=Jg(le.current);switch(w){case 1:w=N.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:w=N.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":w=N.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":w=N.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":w=N.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof p.is=="string"?N.createElement("select",{is:p.is}):N.createElement("select"),p.multiple?w.multiple=!0:p.size&&(w.size=p.size);break;default:w=typeof p.is=="string"?N.createElement(b,{is:p.is}):N.createElement(b)}}w[Dn]=l,w[Jn]=p;e:for(N=l.child;N!==null;){if(N.tag===5||N.tag===6)w.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===l)break e;for(;N.sibling===null;){if(N.return===null||N.return===l)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}l.stateNode=w;e:switch(lr(w,b,p),b){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&ds(l)}}return tn(l),yb(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,f),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==p&&ds(l);else{if(typeof p!="string"&&l.stateNode===null)throw Error(r(166));if(s=le.current,Jc(l)){if(s=l.stateNode,f=l.memoizedProps,p=null,b=ar,b!==null)switch(b.tag){case 27:case 5:p=b.memoizedProps}s[Dn]=l,s=!!(s.nodeValue===f||p!==null&&p.suppressHydrationWarning===!0||mC(s.nodeValue,f)),s||no(l,!0)}else s=Jg(s).createTextNode(p),s[Dn]=l,l.stateNode=s}return tn(l),null;case 31:if(f=l.memoizedState,s===null||s.memoizedState!==null){if(p=Jc(l),f!==null){if(s===null){if(!p)throw Error(r(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Dn]=l}else Al(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;tn(l),s=!1}else f=Iy(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),s=!0;if(!s)return l.flags&256?(si(l),l):(si(l),null);if((l.flags&128)!==0)throw Error(r(558))}return tn(l),null;case 13:if(p=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(b=Jc(l),p!==null&&p.dehydrated!==null){if(s===null){if(!b)throw Error(r(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[Dn]=l}else Al(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;tn(l),b=!1}else b=Iy(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=b),b=!0;if(!b)return l.flags&256?(si(l),l):(si(l),null)}return si(l),(l.flags&128)!==0?(l.lanes=f,l):(f=p!==null,s=s!==null&&s.memoizedState!==null,f&&(p=l.child,b=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(b=p.alternate.memoizedState.cachePool.pool),w=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(w=p.memoizedState.cachePool.pool),w!==b&&(p.flags|=2048)),f!==s&&f&&(l.child.flags|=8192),zg(l,l.updateQueue),tn(l),null);case 4:return Se(),s===null&&Bb(l.stateNode.containerInfo),tn(l),null;case 10:return os(l.type),tn(l),null;case 19:if(Y(Tn),p=l.memoizedState,p===null)return tn(l),null;if(b=(l.flags&128)!==0,w=p.rendering,w===null)if(b)Af(p,!1);else{if(yn!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(w=Tg(s),w!==null){for(l.flags|=128,Af(p,!1),s=w.updateQueue,l.updateQueue=s,zg(l,s),l.subtreeFlags=0,s=f,f=l.child;f!==null;)KS(f,s),f=f.sibling;return ne(Tn,Tn.current&1|2),Et&&as(l,p.treeForkCount),l.child}s=s.sibling}p.tail!==null&&pt()>Gg&&(l.flags|=128,b=!0,Af(p,!1),l.lanes=4194304)}else{if(!b)if(s=Tg(w),s!==null){if(l.flags|=128,b=!0,s=s.updateQueue,l.updateQueue=s,zg(l,s),Af(p,!0),p.tail===null&&p.tailMode==="hidden"&&!w.alternate&&!Et)return tn(l),null}else 2*pt()-p.renderingStartTime>Gg&&f!==536870912&&(l.flags|=128,b=!0,Af(p,!1),l.lanes=4194304);p.isBackwards?(w.sibling=l.child,l.child=w):(s=p.last,s!==null?s.sibling=w:l.child=w,p.last=w)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=pt(),s.sibling=null,f=Tn.current,ne(Tn,b?f&1|2:f&1),Et&&as(l,p.treeForkCount),s):(tn(l),null);case 22:case 23:return si(l),Uy(),p=l.memoizedState!==null,s!==null?s.memoizedState!==null!==p&&(l.flags|=8192):p&&(l.flags|=8192),p?(f&536870912)!==0&&(l.flags&128)===0&&(tn(l),l.subtreeFlags&6&&(l.flags|=8192)):tn(l),f=l.updateQueue,f!==null&&zg(l,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==f&&(l.flags|=2048),s!==null&&Y(Rl),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),os(Mn),tn(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function Gj(s,l){switch(Ay(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return os(Mn),Se(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return Ee(l),null;case 31:if(l.memoizedState!==null){if(si(l),l.alternate===null)throw Error(r(340));Al()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(si(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Al()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Y(Tn),null;case 4:return Se(),null;case 10:return os(l.type),null;case 22:case 23:return si(l),Uy(),s!==null&&Y(Rl),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return os(Mn),null;case 25:return null;default:return null}}function _A(s,l){switch(Ay(l),l.tag){case 3:os(Mn),Se();break;case 26:case 27:case 5:Ee(l);break;case 4:Se();break;case 31:l.memoizedState!==null&&si(l);break;case 13:si(l);break;case 19:Y(Tn);break;case 10:os(l.type);break;case 22:case 23:si(l),Uy(),s!==null&&Y(Rl);break;case 24:os(Mn)}}function Cf(s,l){try{var f=l.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var b=p.next;f=b;do{if((f.tag&s)===s){p=void 0;var w=f.create,N=f.inst;p=w(),N.destroy=p}f=f.next}while(f!==b)}}catch(F){Bt(l,l.return,F)}}function co(s,l,f){try{var p=l.updateQueue,b=p!==null?p.lastEffect:null;if(b!==null){var w=b.next;p=w;do{if((p.tag&s)===s){var N=p.inst,F=N.destroy;if(F!==void 0){N.destroy=void 0,b=l;var K=f,ce=F;try{ce()}catch(ve){Bt(b,K,ve)}}}p=p.next}while(p!==w)}}catch(ve){Bt(l,l.return,ve)}}function wA(s){var l=s.updateQueue;if(l!==null){var f=s.stateNode;try{fT(l,f)}catch(p){Bt(s,s.return,p)}}}function EA(s,l,f){f.props=Pl(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(p){Bt(s,l,p)}}function If(s,l){try{var f=s.ref;if(f!==null){switch(s.tag){case 26:case 27:case 5:var p=s.stateNode;break;case 30:p=s.stateNode;break;default:p=s.stateNode}typeof f=="function"?s.refCleanup=f(p):f.current=p}}catch(b){Bt(s,l,b)}}function Aa(s,l){var f=s.ref,p=s.refCleanup;if(f!==null)if(typeof p=="function")try{p()}catch(b){Bt(s,l,b)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(b){Bt(s,l,b)}else f.current=null}function SA(s){var l=s.type,f=s.memoizedProps,p=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&p.focus();break e;case"img":f.src?p.src=f.src:f.srcSet&&(p.srcset=f.srcSet)}}catch(b){Bt(s,s.return,b)}}function bb(s,l,f){try{var p=s.stateNode;d5(p,s.type,f,l),p[Jn]=l}catch(b){Bt(s,s.return,b)}}function TA(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&vo(s.type)||s.tag===4}function xb(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||TA(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&vo(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function _b(s,l,f){var p=s.tag;if(p===5||p===6)s=s.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(s,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(s),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=qi));else if(p!==4&&(p===27&&vo(s.type)&&(f=s.stateNode,l=null),s=s.child,s!==null))for(_b(s,l,f),s=s.sibling;s!==null;)_b(s,l,f),s=s.sibling}function Lg(s,l,f){var p=s.tag;if(p===5||p===6)s=s.stateNode,l?f.insertBefore(s,l):f.appendChild(s);else if(p!==4&&(p===27&&vo(s.type)&&(f=s.stateNode),s=s.child,s!==null))for(Lg(s,l,f),s=s.sibling;s!==null;)Lg(s,l,f),s=s.sibling}function AA(s){var l=s.stateNode,f=s.memoizedProps;try{for(var p=s.type,b=l.attributes;b.length;)l.removeAttributeNode(b[0]);lr(l,p,f),l[Dn]=s,l[Jn]=f}catch(w){Bt(s,s.return,w)}}var fs=!1,Vn=!1,wb=!1,CA=typeof WeakSet=="function"?WeakSet:Set,tr=null;function qj(s,l){if(s=s.containerInfo,Gb=sm,s=LS(s),gy(s)){if("selectionStart"in s)var f={start:s.selectionStart,end:s.selectionEnd};else e:{f=(f=s.ownerDocument)&&f.defaultView||window;var p=f.getSelection&&f.getSelection();if(p&&p.rangeCount!==0){f=p.anchorNode;var b=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{f.nodeType,w.nodeType}catch{f=null;break e}var N=0,F=-1,K=-1,ce=0,ve=0,be=s,ue=null;t:for(;;){for(var pe;be!==f||b!==0&&be.nodeType!==3||(F=N+b),be!==w||p!==0&&be.nodeType!==3||(K=N+p),be.nodeType===3&&(N+=be.nodeValue.length),(pe=be.firstChild)!==null;)ue=be,be=pe;for(;;){if(be===s)break t;if(ue===f&&++ce===b&&(F=N),ue===w&&++ve===p&&(K=N),(pe=be.nextSibling)!==null)break;be=ue,ue=be.parentNode}be=pe}f=F===-1||K===-1?null:{start:F,end:K}}else f=null}f=f||{start:0,end:0}}else f=null;for(qb={focusedElem:s,selectionRange:f},sm=!1,tr=l;tr!==null;)if(l=tr,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,tr=s;else for(;tr!==null;){switch(l=tr,w=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(f=0;f<s.length;f++)b=s[f],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&w!==null){s=void 0,f=l,b=w.memoizedProps,w=w.memoizedState,p=f.stateNode;try{var Ne=Pl(f.type,b);s=p.getSnapshotBeforeUpdate(Ne,w),p.__reactInternalSnapshotBeforeUpdate=s}catch(Ke){Bt(f,f.return,Ke)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,f=s.nodeType,f===9)Yb(s);else if(f===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Yb(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,tr=s;break}tr=l.return}}function IA(s,l,f){var p=f.flags;switch(f.tag){case 0:case 11:case 15:ps(s,f),p&4&&Cf(5,f);break;case 1:if(ps(s,f),p&4)if(s=f.stateNode,l===null)try{s.componentDidMount()}catch(N){Bt(f,f.return,N)}else{var b=Pl(f.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(b,l,s.__reactInternalSnapshotBeforeUpdate)}catch(N){Bt(f,f.return,N)}}p&64&&wA(f),p&512&&If(f,f.return);break;case 3:if(ps(s,f),p&64&&(s=f.updateQueue,s!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{fT(s,l)}catch(N){Bt(f,f.return,N)}}break;case 27:l===null&&p&4&&AA(f);case 26:case 5:ps(s,f),l===null&&p&4&&SA(f),p&512&&If(f,f.return);break;case 12:ps(s,f);break;case 31:ps(s,f),p&4&&kA(s,f);break;case 13:ps(s,f),p&4&&NA(s,f),p&64&&(s=f.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(f=Jj.bind(null,f),b5(s,f))));break;case 22:if(p=f.memoizedState!==null||fs,!p){l=l!==null&&l.memoizedState!==null||Vn,b=fs;var w=Vn;fs=p,(Vn=l)&&!w?gs(s,f,(f.subtreeFlags&8772)!==0):ps(s,f),fs=b,Vn=w}break;case 30:break;default:ps(s,f)}}function RA(s){var l=s.alternate;l!==null&&(s.alternate=null,RA(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&Vc(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var an=null,Ur=!1;function hs(s,l,f){for(f=f.child;f!==null;)DA(s,l,f),f=f.sibling}function DA(s,l,f){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(Gt,f)}catch{}switch(f.tag){case 26:Vn||Aa(f,l),hs(s,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Vn||Aa(f,l);var p=an,b=Ur;vo(f.type)&&(an=f.stateNode,Ur=!1),hs(s,l,f),jf(f.stateNode),an=p,Ur=b;break;case 5:Vn||Aa(f,l);case 6:if(p=an,b=Ur,an=null,hs(s,l,f),an=p,Ur=b,an!==null)if(Ur)try{(an.nodeType===9?an.body:an.nodeName==="HTML"?an.ownerDocument.body:an).removeChild(f.stateNode)}catch(w){Bt(f,l,w)}else try{an.removeChild(f.stateNode)}catch(w){Bt(f,l,w)}break;case 18:an!==null&&(Ur?(s=an,wC(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,f.stateNode),xu(s)):wC(an,f.stateNode));break;case 4:p=an,b=Ur,an=f.stateNode.containerInfo,Ur=!0,hs(s,l,f),an=p,Ur=b;break;case 0:case 11:case 14:case 15:co(2,f,l),Vn||co(4,f,l),hs(s,l,f);break;case 1:Vn||(Aa(f,l),p=f.stateNode,typeof p.componentWillUnmount=="function"&&EA(f,l,p)),hs(s,l,f);break;case 21:hs(s,l,f);break;case 22:Vn=(p=Vn)||f.memoizedState!==null,hs(s,l,f),Vn=p;break;default:hs(s,l,f)}}function kA(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{xu(s)}catch(f){Bt(l,l.return,f)}}}function NA(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{xu(s)}catch(f){Bt(l,l.return,f)}}function Hj(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new CA),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new CA),l;default:throw Error(r(435,s.tag))}}function Bg(s,l){var f=Hj(s);l.forEach(function(p){if(!f.has(p)){f.add(p);var b=e5.bind(null,s,p);p.then(b,b)}})}function Fr(s,l){var f=l.deletions;if(f!==null)for(var p=0;p<f.length;p++){var b=f[p],w=s,N=l,F=N;e:for(;F!==null;){switch(F.tag){case 27:if(vo(F.type)){an=F.stateNode,Ur=!1;break e}break;case 5:an=F.stateNode,Ur=!1;break e;case 3:case 4:an=F.stateNode.containerInfo,Ur=!0;break e}F=F.return}if(an===null)throw Error(r(160));DA(w,N,b),an=null,Ur=!1,w=b.alternate,w!==null&&(w.return=null),b.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)MA(l,s),l=l.sibling}var Wi=null;function MA(s,l){var f=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Fr(l,s),Gr(s),p&4&&(co(3,s,s.return),Cf(3,s),co(5,s,s.return));break;case 1:Fr(l,s),Gr(s),p&512&&(Vn||f===null||Aa(f,f.return)),p&64&&fs&&(s=s.updateQueue,s!==null&&(p=s.callbacks,p!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?p:f.concat(p))));break;case 26:var b=Wi;if(Fr(l,s),Gr(s),p&512&&(Vn||f===null||Aa(f,f.return)),p&4){var w=f!==null?f.memoizedState:null;if(p=s.memoizedState,f===null)if(p===null)if(s.stateNode===null){e:{p=s.type,f=s.memoizedProps,b=b.ownerDocument||b;t:switch(p){case"title":w=b.getElementsByTagName("title")[0],(!w||w[fa]||w[Dn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=b.createElement(p),b.head.insertBefore(w,b.querySelector("head > title"))),lr(w,p,f),w[Dn]=s,kn(w),p=w;break e;case"link":var N=MC("link","href",b).get(p+(f.href||""));if(N){for(var F=0;F<N.length;F++)if(w=N[F],w.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&w.getAttribute("rel")===(f.rel==null?null:f.rel)&&w.getAttribute("title")===(f.title==null?null:f.title)&&w.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){N.splice(F,1);break t}}w=b.createElement(p),lr(w,p,f),b.head.appendChild(w);break;case"meta":if(N=MC("meta","content",b).get(p+(f.content||""))){for(F=0;F<N.length;F++)if(w=N[F],w.getAttribute("content")===(f.content==null?null:""+f.content)&&w.getAttribute("name")===(f.name==null?null:f.name)&&w.getAttribute("property")===(f.property==null?null:f.property)&&w.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&w.getAttribute("charset")===(f.charSet==null?null:f.charSet)){N.splice(F,1);break t}}w=b.createElement(p),lr(w,p,f),b.head.appendChild(w);break;default:throw Error(r(468,p))}w[Dn]=s,kn(w),p=w}s.stateNode=p}else PC(b,s.type,s.stateNode);else s.stateNode=NC(b,p,s.memoizedProps);else w!==p?(w===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):w.count--,p===null?PC(b,s.type,s.stateNode):NC(b,p,s.memoizedProps)):p===null&&s.stateNode!==null&&bb(s,s.memoizedProps,f.memoizedProps)}break;case 27:Fr(l,s),Gr(s),p&512&&(Vn||f===null||Aa(f,f.return)),f!==null&&p&4&&bb(s,s.memoizedProps,f.memoizedProps);break;case 5:if(Fr(l,s),Gr(s),p&512&&(Vn||f===null||Aa(f,f.return)),s.flags&32){b=s.stateNode;try{Br(b,"")}catch(Ne){Bt(s,s.return,Ne)}}p&4&&s.stateNode!=null&&(b=s.memoizedProps,bb(s,b,f!==null?f.memoizedProps:b)),p&1024&&(wb=!0);break;case 6:if(Fr(l,s),Gr(s),p&4){if(s.stateNode===null)throw Error(r(162));p=s.memoizedProps,f=s.stateNode;try{f.nodeValue=p}catch(Ne){Bt(s,s.return,Ne)}}break;case 3:if(nm=null,b=Wi,Wi=em(l.containerInfo),Fr(l,s),Wi=b,Gr(s),p&4&&f!==null&&f.memoizedState.isDehydrated)try{xu(l.containerInfo)}catch(Ne){Bt(s,s.return,Ne)}wb&&(wb=!1,PA(s));break;case 4:p=Wi,Wi=em(s.stateNode.containerInfo),Fr(l,s),Gr(s),Wi=p;break;case 12:Fr(l,s),Gr(s);break;case 31:Fr(l,s),Gr(s),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,Bg(s,p)));break;case 13:Fr(l,s),Gr(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Fg=pt()),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,Bg(s,p)));break;case 22:b=s.memoizedState!==null;var K=f!==null&&f.memoizedState!==null,ce=fs,ve=Vn;if(fs=ce||b,Vn=ve||K,Fr(l,s),Vn=ve,fs=ce,Gr(s),p&8192)e:for(l=s.stateNode,l._visibility=b?l._visibility&-2:l._visibility|1,b&&(f===null||K||fs||Vn||Ol(s)),f=null,l=s;;){if(l.tag===5||l.tag===26){if(f===null){K=f=l;try{if(w=K.stateNode,b)N=w.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{F=K.stateNode;var be=K.memoizedProps.style,ue=be!=null&&be.hasOwnProperty("display")?be.display:null;F.style.display=ue==null||typeof ue=="boolean"?"":(""+ue).trim()}}catch(Ne){Bt(K,K.return,Ne)}}}else if(l.tag===6){if(f===null){K=l;try{K.stateNode.nodeValue=b?"":K.memoizedProps}catch(Ne){Bt(K,K.return,Ne)}}}else if(l.tag===18){if(f===null){K=l;try{var pe=K.stateNode;b?EC(pe,!0):EC(K.stateNode,!1)}catch(Ne){Bt(K,K.return,Ne)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}p&4&&(p=s.updateQueue,p!==null&&(f=p.retryQueue,f!==null&&(p.retryQueue=null,Bg(s,f))));break;case 19:Fr(l,s),Gr(s),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,Bg(s,p)));break;case 30:break;case 21:break;default:Fr(l,s),Gr(s)}}function Gr(s){var l=s.flags;if(l&2){try{for(var f,p=s.return;p!==null;){if(TA(p)){f=p;break}p=p.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var b=f.stateNode,w=xb(s);Lg(s,w,b);break;case 5:var N=f.stateNode;f.flags&32&&(Br(N,""),f.flags&=-33);var F=xb(s);Lg(s,F,N);break;case 3:case 4:var K=f.stateNode.containerInfo,ce=xb(s);_b(s,ce,K);break;default:throw Error(r(161))}}catch(ve){Bt(s,s.return,ve)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function PA(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;PA(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function ps(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)IA(s,l.alternate,l),l=l.sibling}function Ol(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:co(4,l,l.return),Ol(l);break;case 1:Aa(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&EA(l,l.return,f),Ol(l);break;case 27:jf(l.stateNode);case 26:case 5:Aa(l,l.return),Ol(l);break;case 22:l.memoizedState===null&&Ol(l);break;case 30:Ol(l);break;default:Ol(l)}s=s.sibling}}function gs(s,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var p=l.alternate,b=s,w=l,N=w.flags;switch(w.tag){case 0:case 11:case 15:gs(b,w,f),Cf(4,w);break;case 1:if(gs(b,w,f),p=w,b=p.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(ce){Bt(p,p.return,ce)}if(p=w,b=p.updateQueue,b!==null){var F=p.stateNode;try{var K=b.shared.hiddenCallbacks;if(K!==null)for(b.shared.hiddenCallbacks=null,b=0;b<K.length;b++)dT(K[b],F)}catch(ce){Bt(p,p.return,ce)}}f&&N&64&&wA(w),If(w,w.return);break;case 27:AA(w);case 26:case 5:gs(b,w,f),f&&p===null&&N&4&&SA(w),If(w,w.return);break;case 12:gs(b,w,f);break;case 31:gs(b,w,f),f&&N&4&&kA(b,w);break;case 13:gs(b,w,f),f&&N&4&&NA(b,w);break;case 22:w.memoizedState===null&&gs(b,w,f),If(w,w.return);break;case 30:break;default:gs(b,w,f)}l=l.sibling}}function Eb(s,l){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&pf(f))}function Sb(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&pf(s))}function Qi(s,l,f,p){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)OA(s,l,f,p),l=l.sibling}function OA(s,l,f,p){var b=l.flags;switch(l.tag){case 0:case 11:case 15:Qi(s,l,f,p),b&2048&&Cf(9,l);break;case 1:Qi(s,l,f,p);break;case 3:Qi(s,l,f,p),b&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&pf(s)));break;case 12:if(b&2048){Qi(s,l,f,p),s=l.stateNode;try{var w=l.memoizedProps,N=w.id,F=w.onPostCommit;typeof F=="function"&&F(N,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(K){Bt(l,l.return,K)}}else Qi(s,l,f,p);break;case 31:Qi(s,l,f,p);break;case 13:Qi(s,l,f,p);break;case 23:break;case 22:w=l.stateNode,N=l.alternate,l.memoizedState!==null?w._visibility&2?Qi(s,l,f,p):Rf(s,l):w._visibility&2?Qi(s,l,f,p):(w._visibility|=2,cu(s,l,f,p,(l.subtreeFlags&10256)!==0||!1)),b&2048&&Eb(N,l);break;case 24:Qi(s,l,f,p),b&2048&&Sb(l.alternate,l);break;default:Qi(s,l,f,p)}}function cu(s,l,f,p,b){for(b=b&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var w=s,N=l,F=f,K=p,ce=N.flags;switch(N.tag){case 0:case 11:case 15:cu(w,N,F,K,b),Cf(8,N);break;case 23:break;case 22:var ve=N.stateNode;N.memoizedState!==null?ve._visibility&2?cu(w,N,F,K,b):Rf(w,N):(ve._visibility|=2,cu(w,N,F,K,b)),b&&ce&2048&&Eb(N.alternate,N);break;case 24:cu(w,N,F,K,b),b&&ce&2048&&Sb(N.alternate,N);break;default:cu(w,N,F,K,b)}l=l.sibling}}function Rf(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=s,p=l,b=p.flags;switch(p.tag){case 22:Rf(f,p),b&2048&&Eb(p.alternate,p);break;case 24:Rf(f,p),b&2048&&Sb(p.alternate,p);break;default:Rf(f,p)}l=l.sibling}}var Df=8192;function uu(s,l,f){if(s.subtreeFlags&Df)for(s=s.child;s!==null;)VA(s,l,f),s=s.sibling}function VA(s,l,f){switch(s.tag){case 26:uu(s,l,f),s.flags&Df&&s.memoizedState!==null&&k5(f,Wi,s.memoizedState,s.memoizedProps);break;case 5:uu(s,l,f);break;case 3:case 4:var p=Wi;Wi=em(s.stateNode.containerInfo),uu(s,l,f),Wi=p;break;case 22:s.memoizedState===null&&(p=s.alternate,p!==null&&p.memoizedState!==null?(p=Df,Df=16777216,uu(s,l,f),Df=p):uu(s,l,f));break;default:uu(s,l,f)}}function jA(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function kf(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var p=l[f];tr=p,LA(p,s)}jA(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)zA(s),s=s.sibling}function zA(s){switch(s.tag){case 0:case 11:case 15:kf(s),s.flags&2048&&co(9,s,s.return);break;case 3:kf(s);break;case 12:kf(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Ug(s)):kf(s);break;default:kf(s)}}function Ug(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var p=l[f];tr=p,LA(p,s)}jA(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:co(8,l,l.return),Ug(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,Ug(l));break;default:Ug(l)}s=s.sibling}}function LA(s,l){for(;tr!==null;){var f=tr;switch(f.tag){case 0:case 11:case 15:co(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var p=f.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:pf(f.memoizedState.cache)}if(p=f.child,p!==null)p.return=f,tr=p;else e:for(f=s;tr!==null;){p=tr;var b=p.sibling,w=p.return;if(RA(p),p===f){tr=null;break e}if(b!==null){b.return=w,tr=b;break e}tr=w}}}var $j={getCacheForType:function(s){var l=sr(Mn),f=l.data.get(s);return f===void 0&&(f=s(),l.data.set(s,f)),f},cacheSignal:function(){return sr(Mn).controller.signal}},Yj=typeof WeakMap=="function"?WeakMap:Map,Nt=0,Wt=null,gt=null,bt=0,Lt=0,oi=null,uo=!1,du=!1,Tb=!1,ms=0,yn=0,fo=0,Vl=0,Ab=0,li=0,fu=0,Nf=null,qr=null,Cb=!1,Fg=0,BA=0,Gg=1/0,qg=null,ho=null,qn=0,po=null,hu=null,vs=0,Ib=0,Rb=null,UA=null,Mf=0,Db=null;function ci(){return(Nt&2)!==0&&bt!==0?bt&-bt:$.T!==null?Vb():Hp()}function FA(){if(li===0)if((bt&536870912)===0||Et){var s=Ot;Ot<<=1,(Ot&3932160)===0&&(Ot=262144),li=s}else li=536870912;return s=ai.current,s!==null&&(s.flags|=32),li}function Hr(s,l,f){(s===Wt&&(Lt===2||Lt===9)||s.cancelPendingCommit!==null)&&(pu(s,0),go(s,bt,li,!1)),gi(s,f),((Nt&2)===0||s!==Wt)&&(s===Wt&&((Nt&2)===0&&(Vl|=f),yn===4&&go(s,bt,li,!1)),Ca(s))}function GA(s,l,f){if((Nt&6)!==0)throw Error(r(327));var p=!f&&(l&127)===0&&(l&s.expiredLanes)===0||mn(s,l),b=p?Wj(s,l):Nb(s,l,!0),w=p;do{if(b===0){du&&!p&&go(s,l,0,!1);break}else{if(f=s.current.alternate,w&&!Kj(f)){b=Nb(s,l,!1),w=!1;continue}if(b===2){if(w=l,s.errorRecoveryDisabledLanes&w)var N=0;else N=s.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){l=N;e:{var F=s;b=Nf;var K=F.current.memoizedState.isDehydrated;if(K&&(pu(F,N).flags|=256),N=Nb(F,N,!1),N!==2){if(Tb&&!K){F.errorRecoveryDisabledLanes|=w,Vl|=w,b=4;break e}w=qr,qr=b,w!==null&&(qr===null?qr=w:qr.push.apply(qr,w))}b=N}if(w=!1,b!==2)continue}}if(b===1){pu(s,0),go(s,l,0,!0);break}e:{switch(p=s,w=b,w){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:go(p,l,li,!uo);break e;case 2:qr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(b=Fg+300-pt(),10<b)){if(go(p,l,li,!uo),Rn(p,0,!0)!==0)break e;vs=l,p.timeoutHandle=xC(qA.bind(null,p,f,qr,qg,Cb,l,li,Vl,fu,uo,w,"Throttled",-0,0),b);break e}qA(p,f,qr,qg,Cb,l,li,Vl,fu,uo,w,null,-0,0)}}break}while(!0);Ca(s)}function qA(s,l,f,p,b,w,N,F,K,ce,ve,be,ue,pe){if(s.timeoutHandle=-1,be=l.subtreeFlags,be&8192||(be&16785408)===16785408){be={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qi},VA(l,w,be);var Ne=(w&62914560)===w?Fg-pt():(w&4194048)===w?BA-pt():0;if(Ne=N5(be,Ne),Ne!==null){vs=w,s.cancelPendingCommit=Ne(ZA.bind(null,s,l,w,f,p,b,N,F,K,ve,be,null,ue,pe)),go(s,w,N,!ce);return}}ZA(s,l,w,f,p,b,N,F,K)}function Kj(s){for(var l=s;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var p=0;p<f.length;p++){var b=f[p],w=b.getSnapshot;b=b.value;try{if(!ri(w(),b))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function go(s,l,f,p){l&=~Ab,l&=~Vl,s.suspendedLanes|=l,s.pingedLanes&=~l,p&&(s.warmLanes|=l),p=s.expirationTimes;for(var b=l;0<b;){var w=31-Dt(b),N=1<<w;p[w]=-1,b&=~N}f!==0&&dl(s,f,l)}function Hg(){return(Nt&6)===0?(Pf(0),!1):!0}function kb(){if(gt!==null){if(Lt===0)var s=gt.return;else s=gt,ss=Cl=null,Yy(s),iu=null,mf=0,s=gt;for(;s!==null;)_A(s.alternate,s),s=s.return;gt=null}}function pu(s,l){var f=s.timeoutHandle;f!==-1&&(s.timeoutHandle=-1,p5(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),vs=0,kb(),Wt=s,gt=f=is(s.current,null),bt=l,Lt=0,oi=null,uo=!1,du=mn(s,l),Tb=!1,fu=li=Ab=Vl=fo=yn=0,qr=Nf=null,Cb=!1,(l&8)!==0&&(l|=l&32);var p=s.entangledLanes;if(p!==0)for(s=s.entanglements,p&=l;0<p;){var b=31-Dt(p),w=1<<b;l|=s[b],p&=~w}return ms=l,fg(),f}function HA(s,l){lt=null,$.H=Sf,l===ru||l===xg?(l=oT(),Lt=3):l===Oy?(l=oT(),Lt=4):Lt=l===cb?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,oi=l,gt===null&&(yn=1,Pg(s,_i(l,s.current)))}function $A(){var s=ai.current;return s===null?!0:(bt&4194048)===bt?Ti===null:(bt&62914560)===bt||(bt&536870912)!==0?s===Ti:!1}function YA(){var s=$.H;return $.H=Sf,s===null?Sf:s}function KA(){var s=$.A;return $.A=$j,s}function $g(){yn=4,uo||(bt&4194048)!==bt&&ai.current!==null||(du=!0),(fo&134217727)===0&&(Vl&134217727)===0||Wt===null||go(Wt,bt,li,!1)}function Nb(s,l,f){var p=Nt;Nt|=2;var b=YA(),w=KA();(Wt!==s||bt!==l)&&(qg=null,pu(s,l)),l=!1;var N=yn;e:do try{if(Lt!==0&&gt!==null){var F=gt,K=oi;switch(Lt){case 8:kb(),N=6;break e;case 3:case 2:case 9:case 6:ai.current===null&&(l=!0);var ce=Lt;if(Lt=0,oi=null,gu(s,F,K,ce),f&&du){N=0;break e}break;default:ce=Lt,Lt=0,oi=null,gu(s,F,K,ce)}}Xj(),N=yn;break}catch(ve){HA(s,ve)}while(!0);return l&&s.shellSuspendCounter++,ss=Cl=null,Nt=p,$.H=b,$.A=w,gt===null&&(Wt=null,bt=0,fg()),N}function Xj(){for(;gt!==null;)XA(gt)}function Wj(s,l){var f=Nt;Nt|=2;var p=YA(),b=KA();Wt!==s||bt!==l?(qg=null,Gg=pt()+500,pu(s,l)):du=mn(s,l);e:do try{if(Lt!==0&&gt!==null){l=gt;var w=oi;t:switch(Lt){case 1:Lt=0,oi=null,gu(s,l,w,1);break;case 2:case 9:if(aT(w)){Lt=0,oi=null,WA(l);break}l=function(){Lt!==2&&Lt!==9||Wt!==s||(Lt=7),Ca(s)},w.then(l,l);break e;case 3:Lt=7;break e;case 4:Lt=5;break e;case 7:aT(w)?(Lt=0,oi=null,WA(l)):(Lt=0,oi=null,gu(s,l,w,7));break;case 5:var N=null;switch(gt.tag){case 26:N=gt.memoizedState;case 5:case 27:var F=gt;if(N?OC(N):F.stateNode.complete){Lt=0,oi=null;var K=F.sibling;if(K!==null)gt=K;else{var ce=F.return;ce!==null?(gt=ce,Yg(ce)):gt=null}break t}}Lt=0,oi=null,gu(s,l,w,5);break;case 6:Lt=0,oi=null,gu(s,l,w,6);break;case 8:kb(),yn=6;break e;default:throw Error(r(462))}}Qj();break}catch(ve){HA(s,ve)}while(!0);return ss=Cl=null,$.H=p,$.A=b,Nt=f,gt!==null?0:(Wt=null,bt=0,fg(),yn)}function Qj(){for(;gt!==null&&!wn();)XA(gt)}function XA(s){var l=bA(s.alternate,s,ms);s.memoizedProps=s.pendingProps,l===null?Yg(s):gt=l}function WA(s){var l=s,f=l.alternate;switch(l.tag){case 15:case 0:l=hA(f,l,l.pendingProps,l.type,void 0,bt);break;case 11:l=hA(f,l,l.pendingProps,l.type.render,l.ref,bt);break;case 5:Yy(l);default:_A(f,l),l=gt=KS(l,ms),l=bA(f,l,ms)}s.memoizedProps=s.pendingProps,l===null?Yg(s):gt=l}function gu(s,l,f,p){ss=Cl=null,Yy(l),iu=null,mf=0;var b=l.return;try{if(Lj(s,b,l,f,bt)){yn=1,Pg(s,_i(f,s.current)),gt=null;return}}catch(w){if(b!==null)throw gt=b,w;yn=1,Pg(s,_i(f,s.current)),gt=null;return}l.flags&32768?(Et||p===1?s=!0:du||(bt&536870912)!==0?s=!1:(uo=s=!0,(p===2||p===9||p===3||p===6)&&(p=ai.current,p!==null&&p.tag===13&&(p.flags|=16384))),QA(l,s)):Yg(l)}function Yg(s){var l=s;do{if((l.flags&32768)!==0){QA(l,uo);return}s=l.return;var f=Fj(l.alternate,l,ms);if(f!==null){gt=f;return}if(l=l.sibling,l!==null){gt=l;return}gt=l=s}while(l!==null);yn===0&&(yn=5)}function QA(s,l){do{var f=Gj(s.alternate,s);if(f!==null){f.flags&=32767,gt=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(s=s.sibling,s!==null)){gt=s;return}gt=s=f}while(s!==null);yn=6,gt=null}function ZA(s,l,f,p,b,w,N,F,K){s.cancelPendingCommit=null;do Kg();while(qn!==0);if((Nt&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(w=l.lanes|l.childLanes,w|=xy,dy(s,f,w,N,F,K),s===Wt&&(gt=Wt=null,bt=0),hu=l,po=s,vs=f,Ib=w,Rb=b,UA=p,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,t5(ei,function(){return rC(),null})):(s.callbackNode=null,s.callbackPriority=0),p=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||p){p=$.T,$.T=null,b=H.p,H.p=2,N=Nt,Nt|=4;try{qj(s,l,f)}finally{Nt=N,H.p=b,$.T=p}}qn=1,JA(),eC(),tC()}}function JA(){if(qn===1){qn=0;var s=po,l=hu,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=$.T,$.T=null;var p=H.p;H.p=2;var b=Nt;Nt|=4;try{MA(l,s);var w=qb,N=LS(s.containerInfo),F=w.focusedElem,K=w.selectionRange;if(N!==F&&F&&F.ownerDocument&&zS(F.ownerDocument.documentElement,F)){if(K!==null&&gy(F)){var ce=K.start,ve=K.end;if(ve===void 0&&(ve=ce),"selectionStart"in F)F.selectionStart=ce,F.selectionEnd=Math.min(ve,F.value.length);else{var be=F.ownerDocument||document,ue=be&&be.defaultView||window;if(ue.getSelection){var pe=ue.getSelection(),Ne=F.textContent.length,Ke=Math.min(K.start,Ne),Yt=K.end===void 0?Ke:Math.min(K.end,Ne);!pe.extend&&Ke>Yt&&(N=Yt,Yt=Ke,Ke=N);var re=jS(F,Ke),J=jS(F,Yt);if(re&&J&&(pe.rangeCount!==1||pe.anchorNode!==re.node||pe.anchorOffset!==re.offset||pe.focusNode!==J.node||pe.focusOffset!==J.offset)){var oe=be.createRange();oe.setStart(re.node,re.offset),pe.removeAllRanges(),Ke>Yt?(pe.addRange(oe),pe.extend(J.node,J.offset)):(oe.setEnd(J.node,J.offset),pe.addRange(oe))}}}}for(be=[],pe=F;pe=pe.parentNode;)pe.nodeType===1&&be.push({element:pe,left:pe.scrollLeft,top:pe.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<be.length;F++){var ye=be[F];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}sm=!!Gb,qb=Gb=null}finally{Nt=b,H.p=p,$.T=f}}s.current=l,qn=2}}function eC(){if(qn===2){qn=0;var s=po,l=hu,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=$.T,$.T=null;var p=H.p;H.p=2;var b=Nt;Nt|=4;try{IA(s,l.alternate,l)}finally{Nt=b,H.p=p,$.T=f}}qn=3}}function tC(){if(qn===4||qn===3){qn=0,cn();var s=po,l=hu,f=vs,p=UA;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?qn=5:(qn=0,hu=po=null,nC(s,s.pendingLanes));var b=s.pendingLanes;if(b===0&&(ho=null),es(f),l=l.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(Gt,l,void 0,(l.current.flags&128)===128)}catch{}if(p!==null){l=$.T,b=H.p,H.p=2,$.T=null;try{for(var w=s.onRecoverableError,N=0;N<p.length;N++){var F=p[N];w(F.value,{componentStack:F.stack})}}finally{$.T=l,H.p=b}}(vs&3)!==0&&Kg(),Ca(s),b=s.pendingLanes,(f&261930)!==0&&(b&42)!==0?s===Db?Mf++:(Mf=0,Db=s):Mf=0,Pf(0)}}function nC(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,pf(l)))}function Kg(){return JA(),eC(),tC(),rC()}function rC(){if(qn!==5)return!1;var s=po,l=Ib;Ib=0;var f=es(vs),p=$.T,b=H.p;try{H.p=32>f?32:f,$.T=null,f=Rb,Rb=null;var w=po,N=vs;if(qn=0,hu=po=null,vs=0,(Nt&6)!==0)throw Error(r(331));var F=Nt;if(Nt|=4,zA(w.current),OA(w,w.current,N,f),Nt=F,Pf(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(Gt,w)}catch{}return!0}finally{H.p=b,$.T=p,nC(s,l)}}function iC(s,l,f){l=_i(f,l),l=lb(s.stateNode,l,2),s=so(s,l,2),s!==null&&(gi(s,2),Ca(s))}function Bt(s,l,f){if(s.tag===3)iC(s,s,f);else for(;l!==null;){if(l.tag===3){iC(l,s,f);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(ho===null||!ho.has(p))){s=_i(f,s),f=aA(2),p=so(l,f,2),p!==null&&(sA(f,p,l,s),gi(p,2),Ca(p));break}}l=l.return}}function Mb(s,l,f){var p=s.pingCache;if(p===null){p=s.pingCache=new Yj;var b=new Set;p.set(l,b)}else b=p.get(l),b===void 0&&(b=new Set,p.set(l,b));b.has(f)||(Tb=!0,b.add(f),s=Zj.bind(null,s,l,f),l.then(s,s))}function Zj(s,l,f){var p=s.pingCache;p!==null&&p.delete(l),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,Wt===s&&(bt&f)===f&&(yn===4||yn===3&&(bt&62914560)===bt&&300>pt()-Fg?(Nt&2)===0&&pu(s,0):Ab|=f,fu===bt&&(fu=0)),Ca(s)}function aC(s,l){l===0&&(l=Ja()),s=Sl(s,l),s!==null&&(gi(s,l),Ca(s))}function Jj(s){var l=s.memoizedState,f=0;l!==null&&(f=l.retryLane),aC(s,f)}function e5(s,l){var f=0;switch(s.tag){case 31:case 13:var p=s.stateNode,b=s.memoizedState;b!==null&&(f=b.retryLane);break;case 19:p=s.stateNode;break;case 22:p=s.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(l),aC(s,f)}function t5(s,l){return Ye(s,l)}var Xg=null,mu=null,Pb=!1,Wg=!1,Ob=!1,mo=0;function Ca(s){s!==mu&&s.next===null&&(mu===null?Xg=mu=s:mu=mu.next=s),Wg=!0,Pb||(Pb=!0,r5())}function Pf(s,l){if(!Ob&&Wg){Ob=!0;do for(var f=!1,p=Xg;p!==null;){if(s!==0){var b=p.pendingLanes;if(b===0)var w=0;else{var N=p.suspendedLanes,F=p.pingedLanes;w=(1<<31-Dt(42|s)+1)-1,w&=b&~(N&~F),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(f=!0,cC(p,w))}else w=bt,w=Rn(p,p===Wt?w:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(w&3)===0||mn(p,w)||(f=!0,cC(p,w));p=p.next}while(f);Ob=!1}}function n5(){sC()}function sC(){Wg=Pb=!1;var s=0;mo!==0&&h5()&&(s=mo);for(var l=pt(),f=null,p=Xg;p!==null;){var b=p.next,w=oC(p,l);w===0?(p.next=null,f===null?Xg=b:f.next=b,b===null&&(mu=f)):(f=p,(s!==0||(w&3)!==0)&&(Wg=!0)),p=b}qn!==0&&qn!==5||Pf(s),mo!==0&&(mo=0)}function oC(s,l){for(var f=s.suspendedLanes,p=s.pingedLanes,b=s.expirationTimes,w=s.pendingLanes&-62914561;0<w;){var N=31-Dt(w),F=1<<N,K=b[N];K===-1?((F&f)===0||(F&p)!==0)&&(b[N]=Pc(F,l)):K<=l&&(s.expiredLanes|=F),w&=~F}if(l=Wt,f=bt,f=Rn(s,s===l?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p=s.callbackNode,f===0||s===l&&(Lt===2||Lt===9)||s.cancelPendingCommit!==null)return p!==null&&p!==null&&Pt(p),s.callbackNode=null,s.callbackPriority=0;if((f&3)===0||mn(s,f)){if(l=f&-f,l===s.callbackPriority)return l;switch(p!==null&&Pt(p),es(f)){case 2:case 8:f=mr;break;case 32:f=ei;break;case 268435456:f=Oe;break;default:f=ei}return p=lC.bind(null,s),f=Ye(f,p),s.callbackPriority=l,s.callbackNode=f,l}return p!==null&&p!==null&&Pt(p),s.callbackPriority=2,s.callbackNode=null,2}function lC(s,l){if(qn!==0&&qn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var f=s.callbackNode;if(Kg()&&s.callbackNode!==f)return null;var p=bt;return p=Rn(s,s===Wt?p:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p===0?null:(GA(s,p,l),oC(s,pt()),s.callbackNode!=null&&s.callbackNode===f?lC.bind(null,s):null)}function cC(s,l){if(Kg())return null;GA(s,l,!0)}function r5(){g5(function(){(Nt&6)!==0?Ye(gr,n5):sC()})}function Vb(){if(mo===0){var s=tu;s===0&&(s=We,We<<=1,(We&261888)===0&&(We=256)),mo=s}return mo}function uC(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Bc(""+s)}function dC(s,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,s.id&&f.setAttribute("form",s.id),l.parentNode.insertBefore(f,l),s=new FormData(s),f.parentNode.removeChild(f),s}function i5(s,l,f,p,b){if(l==="submit"&&f&&f.stateNode===b){var w=uC((b[Jn]||null).action),N=p.submitter;N&&(l=(l=N[Jn]||null)?uC(l.formAction):N.getAttribute("formAction"),l!==null&&(w=l,N=null));var F=new xa("action","action",null,p,b);s.push({event:F,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(mo!==0){var K=N?dC(b,N):new FormData(b);nb(f,{pending:!0,data:K,method:b.method,action:w},null,K)}}else typeof w=="function"&&(F.preventDefault(),K=N?dC(b,N):new FormData(b),nb(f,{pending:!0,data:K,method:b.method,action:w},w,K))},currentTarget:b}]})}}for(var jb=0;jb<by.length;jb++){var zb=by[jb],a5=zb.toLowerCase(),s5=zb[0].toUpperCase()+zb.slice(1);Xi(a5,"on"+s5)}Xi(FS,"onAnimationEnd"),Xi(GS,"onAnimationIteration"),Xi(qS,"onAnimationStart"),Xi("dblclick","onDoubleClick"),Xi("focusin","onFocus"),Xi("focusout","onBlur"),Xi(wj,"onTransitionRun"),Xi(Ej,"onTransitionStart"),Xi(Sj,"onTransitionCancel"),Xi(HS,"onTransitionEnd"),ma("onMouseEnter",["mouseout","mouseover"]),ma("onMouseLeave",["mouseout","mouseover"]),ma("onPointerEnter",["pointerout","pointerover"]),ma("onPointerLeave",["pointerout","pointerover"]),ga("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ga("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ga("onBeforeInput",["compositionend","keypress","textInput","paste"]),ga("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ga("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ga("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Of="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Of));function fC(s,l){l=(l&4)!==0;for(var f=0;f<s.length;f++){var p=s[f],b=p.event;p=p.listeners;e:{var w=void 0;if(l)for(var N=p.length-1;0<=N;N--){var F=p[N],K=F.instance,ce=F.currentTarget;if(F=F.listener,K!==w&&b.isPropagationStopped())break e;w=F,b.currentTarget=ce;try{w(b)}catch(ve){dg(ve)}b.currentTarget=null,w=K}else for(N=0;N<p.length;N++){if(F=p[N],K=F.instance,ce=F.currentTarget,F=F.listener,K!==w&&b.isPropagationStopped())break e;w=F,b.currentTarget=ce;try{w(b)}catch(ve){dg(ve)}b.currentTarget=null,w=K}}}}function mt(s,l){var f=l[Oc];f===void 0&&(f=l[Oc]=new Set);var p=s+"__bubble";f.has(p)||(hC(l,s,2,!1),f.add(p))}function Lb(s,l,f){var p=0;l&&(p|=4),hC(f,s,p,l)}var Qg="_reactListening"+Math.random().toString(36).slice(2);function Bb(s){if(!s[Qg]){s[Qg]=!0,$d.forEach(function(f){f!=="selectionchange"&&(o5.has(f)||Lb(f,!1,s),Lb(f,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Qg]||(l[Qg]=!0,Lb("selectionchange",!1,l))}}function hC(s,l,f,p){switch(FC(l)){case 2:var b=O5;break;case 8:b=V5;break;default:b=t1}f=b.bind(null,l,f,s),b=void 0,!ml||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),p?b!==void 0?s.addEventListener(l,f,{capture:!0,passive:b}):s.addEventListener(l,f,!0):b!==void 0?s.addEventListener(l,f,{passive:b}):s.addEventListener(l,f,!1)}function Ub(s,l,f,p,b){var w=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var N=p.tag;if(N===3||N===4){var F=p.stateNode.containerInfo;if(F===b)break;if(N===4)for(N=p.return;N!==null;){var K=N.tag;if((K===3||K===4)&&N.stateNode.containerInfo===b)return;N=N.return}for(;F!==null;){if(N=ha(F),N===null)return;if(K=N.tag,K===5||K===6||K===26||K===27){p=w=N;continue e}F=F.parentNode}}p=p.return}Ws(function(){var ce=w,ve=vi(f),be=[];e:{var ue=$S.get(s);if(ue!==void 0){var pe=xa,Ne=s;switch(s){case"keypress":if(yl(f)===0)break e;case"keydown":case"keyup":pe=lg;break;case"focusin":Ne="focus",pe=xl;break;case"focusout":Ne="blur",pe=xl;break;case"beforeblur":case"afterblur":pe=xl;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=sf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=Jp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=I;break;case FS:case GS:case qS:pe=tg;break;case HS:pe=q;break;case"scroll":case"scrollend":pe=af;break;case"wheel":pe=de;break;case"copy":case"cut":case"paste":pe=ng;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=rs;break;case"toggle":case"beforetoggle":pe=ot}var Ke=(l&4)!==0,Yt=!Ke&&(s==="scroll"||s==="scrollend"),re=Ke?ue!==null?ue+"Capture":null:ue;Ke=[];for(var J=ce,oe;J!==null;){var ye=J;if(oe=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||oe===null||re===null||(ye=Hi(J,re),ye!=null&&Ke.push(Vf(J,ye,oe))),Yt)break;J=J.return}0<Ke.length&&(ue=new pe(ue,Ne,null,f,ve),be.push({event:ue,listeners:Ke}))}}if((l&7)===0){e:{if(ue=s==="mouseover"||s==="pointerover",pe=s==="mouseout"||s==="pointerout",ue&&f!==tf&&(Ne=f.relatedTarget||f.fromElement)&&(ha(Ne)||Ne[da]))break e;if((pe||ue)&&(ue=ve.window===ve?ve:(ue=ve.ownerDocument)?ue.defaultView||ue.parentWindow:window,pe?(Ne=f.relatedTarget||f.toElement,pe=ce,Ne=Ne?ha(Ne):null,Ne!==null&&(Yt=a(Ne),Ke=Ne.tag,Ne!==Yt||Ke!==5&&Ke!==27&&Ke!==6)&&(Ne=null)):(pe=null,Ne=ce),pe!==Ne)){if(Ke=sf,ye="onMouseLeave",re="onMouseEnter",J="mouse",(s==="pointerout"||s==="pointerover")&&(Ke=rs,ye="onPointerLeave",re="onPointerEnter",J="pointer"),Yt=pe==null?ue:ti(pe),oe=Ne==null?ue:ti(Ne),ue=new Ke(ye,J+"leave",pe,f,ve),ue.target=Yt,ue.relatedTarget=oe,ye=null,ha(ve)===ce&&(Ke=new Ke(re,J+"enter",Ne,f,ve),Ke.target=oe,Ke.relatedTarget=Yt,ye=Ke),Yt=ye,pe&&Ne)t:{for(Ke=l5,re=pe,J=Ne,oe=0,ye=re;ye;ye=Ke(ye))oe++;ye=0;for(var Fe=J;Fe;Fe=Ke(Fe))ye++;for(;0<oe-ye;)re=Ke(re),oe--;for(;0<ye-oe;)J=Ke(J),ye--;for(;oe--;){if(re===J||J!==null&&re===J.alternate){Ke=re;break t}re=Ke(re),J=Ke(J)}Ke=null}else Ke=null;pe!==null&&pC(be,ue,pe,Ke,!1),Ne!==null&&Yt!==null&&pC(be,Yt,Ne,Ke,!0)}}e:{if(ue=ce?ti(ce):window,pe=ue.nodeName&&ue.nodeName.toLowerCase(),pe==="select"||pe==="input"&&ue.type==="file")var It=kS;else if(RS(ue))if(NS)It=bj;else{It=vj;var Ve=mj}else pe=ue.nodeName,!pe||pe.toLowerCase()!=="input"||ue.type!=="checkbox"&&ue.type!=="radio"?ce&&Lc(ce.elementType)&&(It=kS):It=yj;if(It&&(It=It(s,ce))){DS(be,It,f,ve);break e}Ve&&Ve(s,ue,ce),s==="focusout"&&ce&&ue.type==="number"&&ce.memoizedProps.value!=null&&Zd(ue,"number",ue.value)}switch(Ve=ce?ti(ce):window,s){case"focusin":(RS(Ve)||Ve.contentEditable==="true")&&(Yc=Ve,my=ce,df=null);break;case"focusout":df=my=Yc=null;break;case"mousedown":vy=!0;break;case"contextmenu":case"mouseup":case"dragend":vy=!1,BS(be,f,ve);break;case"selectionchange":if(_j)break;case"keydown":case"keyup":BS(be,f,ve)}var ut;if(kt)e:{switch(s){case"compositionstart":var xt="onCompositionStart";break e;case"compositionend":xt="onCompositionEnd";break e;case"compositionupdate":xt="onCompositionUpdate";break e}xt=void 0}else $c?_l(s,f)&&(xt="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(xt="onCompositionStart");xt&&(Ea&&f.locale!=="ko"&&($c||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&$c&&(ut=rf()):(ba=ve,nf="value"in ba?ba.value:ba.textContent,$c=!0)),Ve=Zg(ce,xt),0<Ve.length&&(xt=new wa(xt,s,null,f,ve),be.push({event:xt,listeners:Ve}),ut?xt.data=ut:(ut=Hc(f),ut!==null&&(xt.data=ut)))),(ut=bi?fj(s,f):hj(s,f))&&(xt=Zg(ce,"onBeforeInput"),0<xt.length&&(Ve=new wa("onBeforeInput","beforeinput",null,f,ve),be.push({event:Ve,listeners:xt}),Ve.data=ut)),i5(be,s,ce,f,ve)}fC(be,l)})}function Vf(s,l,f){return{instance:s,listener:l,currentTarget:f}}function Zg(s,l){for(var f=l+"Capture",p=[];s!==null;){var b=s,w=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||w===null||(b=Hi(s,f),b!=null&&p.unshift(Vf(s,b,w)),b=Hi(s,l),b!=null&&p.push(Vf(s,b,w))),s.tag===3)return p;s=s.return}return[]}function l5(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function pC(s,l,f,p,b){for(var w=l._reactName,N=[];f!==null&&f!==p;){var F=f,K=F.alternate,ce=F.stateNode;if(F=F.tag,K!==null&&K===p)break;F!==5&&F!==26&&F!==27||ce===null||(K=ce,b?(ce=Hi(f,w),ce!=null&&N.unshift(Vf(f,ce,K))):b||(ce=Hi(f,w),ce!=null&&N.push(Vf(f,ce,K)))),f=f.return}N.length!==0&&s.push({event:l,listeners:N})}var c5=/\r\n?/g,u5=/\u0000|\uFFFD/g;function gC(s){return(typeof s=="string"?s:""+s).replace(c5,`
`).replace(u5,"")}function mC(s,l){return l=gC(l),gC(s)===l}function $t(s,l,f,p,b,w){switch(f){case"children":typeof p=="string"?l==="body"||l==="textarea"&&p===""||Br(s,p):(typeof p=="number"||typeof p=="bigint")&&l!=="body"&&Br(s,""+p);break;case"className":ni(s,"class",p);break;case"tabIndex":ni(s,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":ni(s,f,p);break;case"style":ef(s,p,w);break;case"data":if(l!=="object"){ni(s,"data",p);break}case"src":case"href":if(p===""&&(l!=="a"||f!=="href")){s.removeAttribute(f);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(f);break}p=Bc(""+p),s.setAttribute(f,p);break;case"action":case"formAction":if(typeof p=="function"){s.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(f==="formAction"?(l!=="input"&&$t(s,l,"name",b.name,b,null),$t(s,l,"formEncType",b.formEncType,b,null),$t(s,l,"formMethod",b.formMethod,b,null),$t(s,l,"formTarget",b.formTarget,b,null)):($t(s,l,"encType",b.encType,b,null),$t(s,l,"method",b.method,b,null),$t(s,l,"target",b.target,b,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(f);break}p=Bc(""+p),s.setAttribute(f,p);break;case"onClick":p!=null&&(s.onclick=qi);break;case"onScroll":p!=null&&mt("scroll",s);break;case"onScrollEnd":p!=null&&mt("scrollend",s);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(b.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"multiple":s.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":s.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){s.removeAttribute("xlink:href");break}f=Bc(""+p),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(f,""+p):s.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(f,""):s.removeAttribute(f);break;case"capture":case"download":p===!0?s.setAttribute(f,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(f,p):s.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?s.setAttribute(f,p):s.removeAttribute(f);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?s.removeAttribute(f):s.setAttribute(f,p);break;case"popover":mt("beforetoggle",s),mt("toggle",s),jc(s,"popover",p);break;case"xlinkActuate":Nn(s,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Nn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Nn(s,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Nn(s,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Nn(s,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Nn(s,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Nn(s,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Nn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Nn(s,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":jc(s,"is",p);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Zp.get(f)||f,jc(s,f,p))}}function Fb(s,l,f,p,b,w){switch(f){case"style":ef(s,p,w);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(b.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"children":typeof p=="string"?Br(s,p):(typeof p=="number"||typeof p=="bigint")&&Br(s,""+p);break;case"onScroll":p!=null&&mt("scroll",s);break;case"onScrollEnd":p!=null&&mt("scrollend",s);break;case"onClick":p!=null&&(s.onclick=qi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yd.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(b=f.endsWith("Capture"),l=f.slice(2,b?f.length-7:void 0),w=s[Jn]||null,w=w!=null?w[f]:null,typeof w=="function"&&s.removeEventListener(l,w,b),typeof p=="function")){typeof w!="function"&&w!==null&&(f in s?s[f]=null:s.hasAttribute(f)&&s.removeAttribute(f)),s.addEventListener(l,p,b);break e}f in s?s[f]=p:p===!0?s.setAttribute(f,""):jc(s,f,p)}}}function lr(s,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":mt("error",s),mt("load",s);var p=!1,b=!1,w;for(w in f)if(f.hasOwnProperty(w)){var N=f[w];if(N!=null)switch(w){case"src":p=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:$t(s,l,w,N,f,null)}}b&&$t(s,l,"srcSet",f.srcSet,f,null),p&&$t(s,l,"src",f.src,f,null);return;case"input":mt("invalid",s);var F=w=N=b=null,K=null,ce=null;for(p in f)if(f.hasOwnProperty(p)){var ve=f[p];if(ve!=null)switch(p){case"name":b=ve;break;case"type":N=ve;break;case"checked":K=ve;break;case"defaultChecked":ce=ve;break;case"value":w=ve;break;case"defaultValue":F=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(r(137,l));break;default:$t(s,l,p,ve,f,null)}}Xp(s,w,F,K,ce,N,b,!1);return;case"select":mt("invalid",s),p=N=w=null;for(b in f)if(f.hasOwnProperty(b)&&(F=f[b],F!=null))switch(b){case"value":w=F;break;case"defaultValue":N=F;break;case"multiple":p=F;default:$t(s,l,b,F,f,null)}l=w,f=N,s.multiple=!!p,l!=null?$s(s,!!p,l,!1):f!=null&&$s(s,!!p,f,!0);return;case"textarea":mt("invalid",s),w=b=p=null;for(N in f)if(f.hasOwnProperty(N)&&(F=f[N],F!=null))switch(N){case"value":p=F;break;case"defaultValue":b=F;break;case"children":w=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(91));break;default:$t(s,l,N,F,f,null)}Ys(s,p,b,w);return;case"option":for(K in f)if(f.hasOwnProperty(K)&&(p=f[K],p!=null))switch(K){case"selected":s.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:$t(s,l,K,p,f,null)}return;case"dialog":mt("beforetoggle",s),mt("toggle",s),mt("cancel",s),mt("close",s);break;case"iframe":case"object":mt("load",s);break;case"video":case"audio":for(p=0;p<Of.length;p++)mt(Of[p],s);break;case"image":mt("error",s),mt("load",s);break;case"details":mt("toggle",s);break;case"embed":case"source":case"link":mt("error",s),mt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ce in f)if(f.hasOwnProperty(ce)&&(p=f[ce],p!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:$t(s,l,ce,p,f,null)}return;default:if(Lc(l)){for(ve in f)f.hasOwnProperty(ve)&&(p=f[ve],p!==void 0&&Fb(s,l,ve,p,f,void 0));return}}for(F in f)f.hasOwnProperty(F)&&(p=f[F],p!=null&&$t(s,l,F,p,f,null))}function d5(s,l,f,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,w=null,N=null,F=null,K=null,ce=null,ve=null;for(pe in f){var be=f[pe];if(f.hasOwnProperty(pe)&&be!=null)switch(pe){case"checked":break;case"value":break;case"defaultValue":K=be;default:p.hasOwnProperty(pe)||$t(s,l,pe,null,p,be)}}for(var ue in p){var pe=p[ue];if(be=f[ue],p.hasOwnProperty(ue)&&(pe!=null||be!=null))switch(ue){case"type":w=pe;break;case"name":b=pe;break;case"checked":ce=pe;break;case"defaultChecked":ve=pe;break;case"value":N=pe;break;case"defaultValue":F=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(r(137,l));break;default:pe!==be&&$t(s,l,ue,pe,p,be)}}zc(s,N,F,K,ce,ve,w,b);return;case"select":pe=N=F=ue=null;for(w in f)if(K=f[w],f.hasOwnProperty(w)&&K!=null)switch(w){case"value":break;case"multiple":pe=K;default:p.hasOwnProperty(w)||$t(s,l,w,null,p,K)}for(b in p)if(w=p[b],K=f[b],p.hasOwnProperty(b)&&(w!=null||K!=null))switch(b){case"value":ue=w;break;case"defaultValue":F=w;break;case"multiple":N=w;default:w!==K&&$t(s,l,b,w,p,K)}l=F,f=N,p=pe,ue!=null?$s(s,!!f,ue,!1):!!p!=!!f&&(l!=null?$s(s,!!f,l,!0):$s(s,!!f,f?[]:"",!1));return;case"textarea":pe=ue=null;for(F in f)if(b=f[F],f.hasOwnProperty(F)&&b!=null&&!p.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:$t(s,l,F,null,p,b)}for(N in p)if(b=p[N],w=f[N],p.hasOwnProperty(N)&&(b!=null||w!=null))switch(N){case"value":ue=b;break;case"defaultValue":pe=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==w&&$t(s,l,N,b,p,w)}Wp(s,ue,pe);return;case"option":for(var Ne in f)if(ue=f[Ne],f.hasOwnProperty(Ne)&&ue!=null&&!p.hasOwnProperty(Ne))switch(Ne){case"selected":s.selected=!1;break;default:$t(s,l,Ne,null,p,ue)}for(K in p)if(ue=p[K],pe=f[K],p.hasOwnProperty(K)&&ue!==pe&&(ue!=null||pe!=null))switch(K){case"selected":s.selected=ue&&typeof ue!="function"&&typeof ue!="symbol";break;default:$t(s,l,K,ue,p,pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ke in f)ue=f[Ke],f.hasOwnProperty(Ke)&&ue!=null&&!p.hasOwnProperty(Ke)&&$t(s,l,Ke,null,p,ue);for(ce in p)if(ue=p[ce],pe=f[ce],p.hasOwnProperty(ce)&&ue!==pe&&(ue!=null||pe!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,l));break;default:$t(s,l,ce,ue,p,pe)}return;default:if(Lc(l)){for(var Yt in f)ue=f[Yt],f.hasOwnProperty(Yt)&&ue!==void 0&&!p.hasOwnProperty(Yt)&&Fb(s,l,Yt,void 0,p,ue);for(ve in p)ue=p[ve],pe=f[ve],!p.hasOwnProperty(ve)||ue===pe||ue===void 0&&pe===void 0||Fb(s,l,ve,ue,p,pe);return}}for(var re in f)ue=f[re],f.hasOwnProperty(re)&&ue!=null&&!p.hasOwnProperty(re)&&$t(s,l,re,null,p,ue);for(be in p)ue=p[be],pe=f[be],!p.hasOwnProperty(be)||ue===pe||ue==null&&pe==null||$t(s,l,be,ue,p,pe)}function vC(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function f5(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,f=performance.getEntriesByType("resource"),p=0;p<f.length;p++){var b=f[p],w=b.transferSize,N=b.initiatorType,F=b.duration;if(w&&F&&vC(N)){for(N=0,F=b.responseEnd,p+=1;p<f.length;p++){var K=f[p],ce=K.startTime;if(ce>F)break;var ve=K.transferSize,be=K.initiatorType;ve&&vC(be)&&(K=K.responseEnd,N+=ve*(K<F?1:(F-ce)/(K-ce)))}if(--p,l+=8*(w+N)/(b.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Gb=null,qb=null;function Jg(s){return s.nodeType===9?s:s.ownerDocument}function yC(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bC(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function Hb(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var $b=null;function h5(){var s=window.event;return s&&s.type==="popstate"?s===$b?!1:($b=s,!0):($b=null,!1)}var xC=typeof setTimeout=="function"?setTimeout:void 0,p5=typeof clearTimeout=="function"?clearTimeout:void 0,_C=typeof Promise=="function"?Promise:void 0,g5=typeof queueMicrotask=="function"?queueMicrotask:typeof _C<"u"?function(s){return _C.resolve(null).then(s).catch(m5)}:xC;function m5(s){setTimeout(function(){throw s})}function vo(s){return s==="head"}function wC(s,l){var f=l,p=0;do{var b=f.nextSibling;if(s.removeChild(f),b&&b.nodeType===8)if(f=b.data,f==="/$"||f==="/&"){if(p===0){s.removeChild(b),xu(l);return}p--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")p++;else if(f==="html")jf(s.ownerDocument.documentElement);else if(f==="head"){f=s.ownerDocument.head,jf(f);for(var w=f.firstChild;w;){var N=w.nextSibling,F=w.nodeName;w[fa]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&w.rel.toLowerCase()==="stylesheet"||f.removeChild(w),w=N}}else f==="body"&&jf(s.ownerDocument.body);f=b}while(f);xu(l)}function EC(s,l){var f=s;s=0;do{var p=f.nextSibling;if(f.nodeType===1?l?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(l?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),p&&p.nodeType===8)if(f=p.data,f==="/$"){if(s===0)break;s--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||s++;f=p}while(f)}function Yb(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Yb(f),Vc(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}s.removeChild(f)}}function v5(s,l,f,p){for(;s.nodeType===1;){var b=f;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!p&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(p){if(!s[fa])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(w=s.getAttribute("rel"),w==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(w!==b.rel||s.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||s.getAttribute("title")!==(b.title==null?null:b.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(w=s.getAttribute("src"),(w!==(b.src==null?null:b.src)||s.getAttribute("type")!==(b.type==null?null:b.type)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&w&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var w=b.name==null?null:""+b.name;if(b.type==="hidden"&&s.getAttribute("name")===w)return s}else return s;if(s=Ai(s.nextSibling),s===null)break}return null}function y5(s,l,f){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!f||(s=Ai(s.nextSibling),s===null))return null;return s}function SC(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Ai(s.nextSibling),s===null))return null;return s}function Kb(s){return s.data==="$?"||s.data==="$~"}function Xb(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function b5(s,l){var f=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||f.readyState!=="loading")l();else{var p=function(){l(),f.removeEventListener("DOMContentLoaded",p)};f.addEventListener("DOMContentLoaded",p),s._reactRetry=p}}function Ai(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var Wb=null;function TC(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="/$"||f==="/&"){if(l===0)return Ai(s.nextSibling);l--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||l++}s=s.nextSibling}return null}function AC(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(l===0)return s;l--}else f!=="/$"&&f!=="/&"||l++}s=s.previousSibling}return null}function CC(s,l,f){switch(l=Jg(f),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function jf(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);Vc(s)}var Ci=new Map,IC=new Set;function em(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ys=H.d;H.d={f:x5,r:_5,D:w5,C:E5,L:S5,m:T5,X:C5,S:A5,M:I5};function x5(){var s=ys.f(),l=Hg();return s||l}function _5(s){var l=mi(s);l!==null&&l.tag===5&&l.type==="form"?HT(l):ys.r(s)}var vu=typeof document>"u"?null:document;function RC(s,l,f){var p=vu;if(p&&typeof l=="string"&&l){var b=Lr(l);b='link[rel="'+s+'"][href="'+b+'"]',typeof f=="string"&&(b+='[crossorigin="'+f+'"]'),IC.has(b)||(IC.add(b),s={rel:s,crossOrigin:f,href:l},p.querySelector(b)===null&&(l=p.createElement("link"),lr(l,"link",s),kn(l),p.head.appendChild(l)))}}function w5(s){ys.D(s),RC("dns-prefetch",s,null)}function E5(s,l){ys.C(s,l),RC("preconnect",s,l)}function S5(s,l,f){ys.L(s,l,f);var p=vu;if(p&&s&&l){var b='link[rel="preload"][as="'+Lr(l)+'"]';l==="image"&&f&&f.imageSrcSet?(b+='[imagesrcset="'+Lr(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(b+='[imagesizes="'+Lr(f.imageSizes)+'"]')):b+='[href="'+Lr(s)+'"]';var w=b;switch(l){case"style":w=yu(s);break;case"script":w=bu(s)}Ci.has(w)||(s=g({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:s,as:l},f),Ci.set(w,s),p.querySelector(b)!==null||l==="style"&&p.querySelector(zf(w))||l==="script"&&p.querySelector(Lf(w))||(l=p.createElement("link"),lr(l,"link",s),kn(l),p.head.appendChild(l)))}}function T5(s,l){ys.m(s,l);var f=vu;if(f&&s){var p=l&&typeof l.as=="string"?l.as:"script",b='link[rel="modulepreload"][as="'+Lr(p)+'"][href="'+Lr(s)+'"]',w=b;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=bu(s)}if(!Ci.has(w)&&(s=g({rel:"modulepreload",href:s},l),Ci.set(w,s),f.querySelector(b)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Lf(w)))return}p=f.createElement("link"),lr(p,"link",s),kn(p),f.head.appendChild(p)}}}function A5(s,l,f){ys.S(s,l,f);var p=vu;if(p&&s){var b=pa(p).hoistableStyles,w=yu(s);l=l||"default";var N=b.get(w);if(!N){var F={loading:0,preload:null};if(N=p.querySelector(zf(w)))F.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":l},f),(f=Ci.get(w))&&Qb(s,f);var K=N=p.createElement("link");kn(K),lr(K,"link",s),K._p=new Promise(function(ce,ve){K.onload=ce,K.onerror=ve}),K.addEventListener("load",function(){F.loading|=1}),K.addEventListener("error",function(){F.loading|=2}),F.loading|=4,tm(N,l,p)}N={type:"stylesheet",instance:N,count:1,state:F},b.set(w,N)}}}function C5(s,l){ys.X(s,l);var f=vu;if(f&&s){var p=pa(f).hoistableScripts,b=bu(s),w=p.get(b);w||(w=f.querySelector(Lf(b)),w||(s=g({src:s,async:!0},l),(l=Ci.get(b))&&Zb(s,l),w=f.createElement("script"),kn(w),lr(w,"link",s),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},p.set(b,w))}}function I5(s,l){ys.M(s,l);var f=vu;if(f&&s){var p=pa(f).hoistableScripts,b=bu(s),w=p.get(b);w||(w=f.querySelector(Lf(b)),w||(s=g({src:s,async:!0,type:"module"},l),(l=Ci.get(b))&&Zb(s,l),w=f.createElement("script"),kn(w),lr(w,"link",s),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},p.set(b,w))}}function DC(s,l,f,p){var b=(b=le.current)?em(b):null;if(!b)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=yu(f.href),f=pa(b).hoistableStyles,p=f.get(l),p||(p={type:"style",instance:null,count:0,state:null},f.set(l,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){s=yu(f.href);var w=pa(b).hoistableStyles,N=w.get(s);if(N||(b=b.ownerDocument||b,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(s,N),(w=b.querySelector(zf(s)))&&!w._p&&(N.instance=w,N.state.loading=5),Ci.has(s)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Ci.set(s,f),w||R5(b,s,f,N.state))),l&&p===null)throw Error(r(528,""));return N}if(l&&p!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=bu(f),f=pa(b).hoistableScripts,p=f.get(l),p||(p={type:"script",instance:null,count:0,state:null},f.set(l,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function yu(s){return'href="'+Lr(s)+'"'}function zf(s){return'link[rel="stylesheet"]['+s+"]"}function kC(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function R5(s,l,f,p){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?p.loading=1:(l=s.createElement("link"),p.preload=l,l.addEventListener("load",function(){return p.loading|=1}),l.addEventListener("error",function(){return p.loading|=2}),lr(l,"link",f),kn(l),s.head.appendChild(l))}function bu(s){return'[src="'+Lr(s)+'"]'}function Lf(s){return"script[async]"+s}function NC(s,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var p=s.querySelector('style[data-href~="'+Lr(f.href)+'"]');if(p)return l.instance=p,kn(p),p;var b=g({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return p=(s.ownerDocument||s).createElement("style"),kn(p),lr(p,"style",b),tm(p,f.precedence,s),l.instance=p;case"stylesheet":b=yu(f.href);var w=s.querySelector(zf(b));if(w)return l.state.loading|=4,l.instance=w,kn(w),w;p=kC(f),(b=Ci.get(b))&&Qb(p,b),w=(s.ownerDocument||s).createElement("link"),kn(w);var N=w;return N._p=new Promise(function(F,K){N.onload=F,N.onerror=K}),lr(w,"link",p),l.state.loading|=4,tm(w,f.precedence,s),l.instance=w;case"script":return w=bu(f.src),(b=s.querySelector(Lf(w)))?(l.instance=b,kn(b),b):(p=f,(b=Ci.get(w))&&(p=g({},f),Zb(p,b)),s=s.ownerDocument||s,b=s.createElement("script"),kn(b),lr(b,"link",p),s.head.appendChild(b),l.instance=b);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(p=l.instance,l.state.loading|=4,tm(p,f.precedence,s));return l.instance}function tm(s,l,f){for(var p=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=p.length?p[p.length-1]:null,w=b,N=0;N<p.length;N++){var F=p[N];if(F.dataset.precedence===l)w=F;else if(w!==b)break}w?w.parentNode.insertBefore(s,w.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(s,l.firstChild))}function Qb(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function Zb(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var nm=null;function MC(s,l,f){if(nm===null){var p=new Map,b=nm=new Map;b.set(f,p)}else b=nm,p=b.get(f),p||(p=new Map,b.set(f,p));if(p.has(s))return p;for(p.set(s,null),f=f.getElementsByTagName(s),b=0;b<f.length;b++){var w=f[b];if(!(w[fa]||w[Dn]||s==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var N=w.getAttribute(l)||"";N=s+N;var F=p.get(N);F?F.push(w):p.set(N,[w])}}return p}function PC(s,l,f){s=s.ownerDocument||s,s.head.insertBefore(f,l==="title"?s.querySelector("head > title"):null)}function D5(s,l,f){if(f===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function OC(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function k5(s,l,f,p){if(f.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var b=yu(p.href),w=l.querySelector(zf(b));if(w){l=w._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=rm.bind(s),l.then(s,s)),f.state.loading|=4,f.instance=w,kn(w);return}w=l.ownerDocument||l,p=kC(p),(b=Ci.get(b))&&Qb(p,b),w=w.createElement("link"),kn(w);var N=w;N._p=new Promise(function(F,K){N.onload=F,N.onerror=K}),lr(w,"link",p),f.instance=w}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(f,l),(l=f.state.preload)&&(f.state.loading&3)===0&&(s.count++,f=rm.bind(s),l.addEventListener("load",f),l.addEventListener("error",f))}}var Jb=0;function N5(s,l){return s.stylesheets&&s.count===0&&am(s,s.stylesheets),0<s.count||0<s.imgCount?function(f){var p=setTimeout(function(){if(s.stylesheets&&am(s,s.stylesheets),s.unsuspend){var w=s.unsuspend;s.unsuspend=null,w()}},6e4+l);0<s.imgBytes&&Jb===0&&(Jb=62500*f5());var b=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&am(s,s.stylesheets),s.unsuspend)){var w=s.unsuspend;s.unsuspend=null,w()}},(s.imgBytes>Jb?50:800)+l);return s.unsuspend=f,function(){s.unsuspend=null,clearTimeout(p),clearTimeout(b)}}:null}function rm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)am(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var im=null;function am(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,im=new Map,l.forEach(M5,s),im=null,rm.call(s))}function M5(s,l){if(!(l.state.loading&4)){var f=im.get(s);if(f)var p=f.get(null);else{f=new Map,im.set(s,f);for(var b=s.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<b.length;w++){var N=b[w];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(f.set(N.dataset.precedence,N),p=N)}p&&f.set(null,p)}b=l.instance,N=b.getAttribute("data-precedence"),w=f.get(N)||p,w===p&&f.set(null,b),f.set(N,b),this.count++,p=rm.bind(this),b.addEventListener("load",p),b.addEventListener("error",p),w?w.parentNode.insertBefore(b,w.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(b,s.firstChild)),l.state.loading|=4}}var Bf={$$typeof:R,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function P5(s,l,f,p,b,w,N,F,K){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zr(0),this.hiddenUpdates=zr(null),this.identifierPrefix=p,this.onUncaughtError=b,this.onCaughtError=w,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function VC(s,l,f,p,b,w,N,F,K,ce,ve,be){return s=new P5(s,l,f,N,K,ce,ve,be,F),l=1,w===!0&&(l|=24),w=ii(3,null,null,l),s.current=w,w.stateNode=s,l=Ny(),l.refCount++,s.pooledCache=l,l.refCount++,w.memoizedState={element:p,isDehydrated:f,cache:l},Vy(w),s}function jC(s){return s?(s=Wc,s):Wc}function zC(s,l,f,p,b,w){b=jC(b),p.context===null?p.context=b:p.pendingContext=b,p=ao(l),p.payload={element:f},w=w===void 0?null:w,w!==null&&(p.callback=w),f=so(s,p,l),f!==null&&(Hr(f,s,l),yf(f,s,l))}function LC(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<l?f:l}}function e1(s,l){LC(s,l),(s=s.alternate)&&LC(s,l)}function BC(s){if(s.tag===13||s.tag===31){var l=Sl(s,67108864);l!==null&&Hr(l,s,67108864),e1(s,67108864)}}function UC(s){if(s.tag===13||s.tag===31){var l=ci();l=fl(l);var f=Sl(s,l);f!==null&&Hr(f,s,l),e1(s,l)}}var sm=!0;function O5(s,l,f,p){var b=$.T;$.T=null;var w=H.p;try{H.p=2,t1(s,l,f,p)}finally{H.p=w,$.T=b}}function V5(s,l,f,p){var b=$.T;$.T=null;var w=H.p;try{H.p=8,t1(s,l,f,p)}finally{H.p=w,$.T=b}}function t1(s,l,f,p){if(sm){var b=n1(p);if(b===null)Ub(s,l,p,om,f),GC(s,p);else if(z5(b,s,l,f,p))p.stopPropagation();else if(GC(s,p),l&4&&-1<j5.indexOf(s)){for(;b!==null;){var w=mi(b);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var N=jt(w.pendingLanes);if(N!==0){var F=w;for(F.pendingLanes|=2,F.entangledLanes|=2;N;){var K=1<<31-Dt(N);F.entanglements[1]|=K,N&=~K}Ca(w),(Nt&6)===0&&(Gg=pt()+500,Pf(0))}}break;case 31:case 13:F=Sl(w,2),F!==null&&Hr(F,w,2),Hg(),e1(w,2)}if(w=n1(p),w===null&&Ub(s,l,p,om,f),w===b)break;b=w}b!==null&&p.stopPropagation()}else Ub(s,l,p,null,f)}}function n1(s){return s=vi(s),r1(s)}var om=null;function r1(s){if(om=null,s=ha(s),s!==null){var l=a(s);if(l===null)s=null;else{var f=l.tag;if(f===13){if(s=o(l),s!==null)return s;s=null}else if(f===31){if(s=c(l),s!==null)return s;s=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return om=s,null}function FC(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vt()){case gr:return 2;case mr:return 8;case ei:case qs:return 32;case Oe:return 268435456;default:return 32}default:return 32}}var i1=!1,yo=null,bo=null,xo=null,Uf=new Map,Ff=new Map,_o=[],j5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function GC(s,l){switch(s){case"focusin":case"focusout":yo=null;break;case"dragenter":case"dragleave":bo=null;break;case"mouseover":case"mouseout":xo=null;break;case"pointerover":case"pointerout":Uf.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ff.delete(l.pointerId)}}function Gf(s,l,f,p,b,w){return s===null||s.nativeEvent!==w?(s={blockedOn:l,domEventName:f,eventSystemFlags:p,nativeEvent:w,targetContainers:[b]},l!==null&&(l=mi(l),l!==null&&BC(l)),s):(s.eventSystemFlags|=p,l=s.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),s)}function z5(s,l,f,p,b){switch(l){case"focusin":return yo=Gf(yo,s,l,f,p,b),!0;case"dragenter":return bo=Gf(bo,s,l,f,p,b),!0;case"mouseover":return xo=Gf(xo,s,l,f,p,b),!0;case"pointerover":var w=b.pointerId;return Uf.set(w,Gf(Uf.get(w)||null,s,l,f,p,b)),!0;case"gotpointercapture":return w=b.pointerId,Ff.set(w,Gf(Ff.get(w)||null,s,l,f,p,b)),!0}return!1}function qC(s){var l=ha(s.target);if(l!==null){var f=a(l);if(f!==null){if(l=f.tag,l===13){if(l=o(f),l!==null){s.blockedOn=l,Fi(s.priority,function(){UC(f)});return}}else if(l===31){if(l=c(f),l!==null){s.blockedOn=l,Fi(s.priority,function(){UC(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function lm(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var f=n1(s.nativeEvent);if(f===null){f=s.nativeEvent;var p=new f.constructor(f.type,f);tf=p,f.target.dispatchEvent(p),tf=null}else return l=mi(f),l!==null&&BC(l),s.blockedOn=f,!1;l.shift()}return!0}function HC(s,l,f){lm(s)&&f.delete(l)}function L5(){i1=!1,yo!==null&&lm(yo)&&(yo=null),bo!==null&&lm(bo)&&(bo=null),xo!==null&&lm(xo)&&(xo=null),Uf.forEach(HC),Ff.forEach(HC)}function cm(s,l){s.blockedOn===l&&(s.blockedOn=null,i1||(i1=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,L5)))}var um=null;function $C(s){um!==s&&(um=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){um===s&&(um=null);for(var l=0;l<s.length;l+=3){var f=s[l],p=s[l+1],b=s[l+2];if(typeof p!="function"){if(r1(p||f)===null)continue;break}var w=mi(f);w!==null&&(s.splice(l,3),l-=3,nb(w,{pending:!0,data:b,method:f.method,action:p},p,b))}}))}function xu(s){function l(K){return cm(K,s)}yo!==null&&cm(yo,s),bo!==null&&cm(bo,s),xo!==null&&cm(xo,s),Uf.forEach(l),Ff.forEach(l);for(var f=0;f<_o.length;f++){var p=_o[f];p.blockedOn===s&&(p.blockedOn=null)}for(;0<_o.length&&(f=_o[0],f.blockedOn===null);)qC(f),f.blockedOn===null&&_o.shift();if(f=(s.ownerDocument||s).$$reactFormReplay,f!=null)for(p=0;p<f.length;p+=3){var b=f[p],w=f[p+1],N=b[Jn]||null;if(typeof w=="function")N||$C(f);else if(N){var F=null;if(w&&w.hasAttribute("formAction")){if(b=w,N=w[Jn]||null)F=N.formAction;else if(r1(b)!==null)continue}else F=N.action;typeof F=="function"?f[p+1]=F:(f.splice(p,3),p-=3),$C(f)}}}function YC(){function s(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(N){return b=N})},focusReset:"manual",scroll:"manual"})}function l(){b!==null&&(b(),b=null),p||setTimeout(f,20)}function f(){if(!p&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,b=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(f,100),function(){p=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),b!==null&&(b(),b=null)}}}function a1(s){this._internalRoot=s}dm.prototype.render=a1.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,p=ci();zC(f,p,s,l,null,null)},dm.prototype.unmount=a1.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;zC(s.current,2,null,s,null,null),Hg(),l[da]=null}};function dm(s){this._internalRoot=s}dm.prototype.unstable_scheduleHydration=function(s){if(s){var l=Hp();s={blockedOn:null,target:s,priority:l};for(var f=0;f<_o.length&&l!==0&&l<_o[f].priority;f++);_o.splice(f,0,s),f===0&&qC(s)}};var KC=e.version;if(KC!=="19.2.0")throw Error(r(527,KC,"19.2.0"));H.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=d(l),s=s!==null?h(s):null,s=s===null?null:s.stateNode,s};var B5={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fm.isDisabled&&fm.supportsFiber)try{Gt=fm.inject(B5),Zt=fm}catch{}}return Hf.createRoot=function(s,l){if(!i(s))throw Error(r(299));var f=!1,p="",b=tA,w=nA,N=rA;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError)),l=VC(s,1,!1,null,null,f,p,null,b,w,N,YC),s[da]=l.current,Bb(s),new a1(l)},Hf.hydrateRoot=function(s,l,f){if(!i(s))throw Error(r(299));var p=!1,b="",w=tA,N=nA,F=rA,K=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(w=f.onUncaughtError),f.onCaughtError!==void 0&&(N=f.onCaughtError),f.onRecoverableError!==void 0&&(F=f.onRecoverableError),f.formState!==void 0&&(K=f.formState)),l=VC(s,1,!0,l,f??null,p,b,K,w,N,F,YC),l.context=jC(null),f=l.current,p=ci(),p=fl(p),b=ao(p),b.callback=null,so(f,b,p),f=p,l.current.lanes=f,gi(l,f),Ca(l),s[da]=l.current,Bb(s),new dm(l)},Hf.version="19.2.0",Hf}var i2;function Q5(){if(i2)return l1.exports;i2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),l1.exports=W5(),l1.exports}var Z5=Q5();const J5="modulepreload",e6=function(t){return"/personal-budget-pwa/"+t},a2={},Hn=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let d=function(h){return Promise.all(h.map(g=>Promise.resolve(g).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};var o=d;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");i=d(n.map(h=>{if(h=e6(h),h in a2)return;a2[h]=!0;const g=h.endsWith(".css"),m=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const x=document.createElement("link");if(x.rel=g?"stylesheet":J5,g||(x.as="script"),x.crossOrigin="",x.href=h,u&&x.setAttribute("nonce",u),document.head.appendChild(x),g)return new Promise((_,E)=>{x.addEventListener("load",_),x.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return i.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};function t6(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:o}=t;let c,u;const d=async(g=!0)=>{await u};async function h(){if("serviceWorker"in navigator){if(c=await Hn(async()=>{const{Workbox:g}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:g}},[]).then(({Workbox:g})=>new g("/personal-budget-pwa/sw.js",{scope:"/personal-budget-pwa/",type:"classic"})).catch(g=>{o?.(g)}),!c)return;c.addEventListener("activated",g=>{(g.isUpdate||g.isExternal)&&window.location.reload()}),c.addEventListener("installed",g=>{g.isUpdate||r?.()}),c.register({immediate:e}).then(g=>{a?a("/personal-budget-pwa/sw.js",g):i?.(g)}).catch(g=>{o?.(g)})}}return u=h(),d}var s2="popstate";function n6(t={}){function e(i,a){let{pathname:o="/",search:c="",hash:u=""}=Ic(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),ux("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let o=i.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");c=d===-1?u:u.slice(0,d)}return c+"#"+(typeof a=="string"?a:Nh(a))}function r(i,a){fi(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return i6(e,n,r,t)}function pn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fi(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function r6(){return Math.random().toString(36).substring(2,10)}function o2(t,e){return{usr:t.state,key:t.key,idx:e}}function ux(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ic(e):e,state:n,key:e&&e.key||r||r6()}}function Nh({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ic(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function i6(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c="POP",u=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function g(){c="POP";let S=h(),T=S==null?null:S-d;d=S,u&&u({action:c,location:E.location,delta:T})}function m(S,T){c="PUSH";let D=ux(E.location,S,T);n&&n(D,S),d=h()+1;let R=o2(D,d),O=E.createHref(D);try{o.pushState(R,"",O)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(O)}a&&u&&u({action:c,location:E.location,delta:1})}function x(S,T){c="REPLACE";let D=ux(E.location,S,T);n&&n(D,S),d=h();let R=o2(D,d),O=E.createHref(D);o.replaceState(R,"",O),a&&u&&u({action:c,location:E.location,delta:0})}function _(S){return a6(S)}let E={get action(){return c},get location(){return t(i,o)},listen(S){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(s2,g),u=S,()=>{i.removeEventListener(s2,g),u=null}},createHref(S){return e(i,S)},createURL:_,encodeLocation(S){let T=_(S);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:m,replace:x,go(S){return o.go(S)}};return E}function a6(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),pn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Nh(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Pk(t,e,n="/"){return s6(t,e,n,!1)}function s6(t,e,n,r){let i=typeof e=="string"?Ic(e):e,a=Ds(i.pathname||"/",n);if(a==null)return null;let o=Ok(t);o6(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=y6(a);c=m6(o[u],d,r)}return c}function Ok(t,e=[],n=[],r="",i=!1){let a=(o,c,u=i,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&u)return;pn(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let g=Ts([r,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(pn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),Ok(o.children,e,m,g,u)),!(o.path==null&&!o.index)&&e.push({path:g,score:p6(g,o.index),routesMeta:m})};return t.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))a(o,c);else for(let u of Vk(o.path))a(o,c,!0,u)}),e}function Vk(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=Vk(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function o6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:g6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var l6=/^:[\w-]+$/,c6=3,u6=2,d6=1,f6=10,h6=-2,l2=t=>t==="*";function p6(t,e){let n=t.split("/"),r=n.length;return n.some(l2)&&(r+=h6),e&&(r+=u6),n.filter(i=>!l2(i)).reduce((i,a)=>i+(l6.test(a)?c6:a===""?d6:f6),r)}function g6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function m6(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,h=a==="/"?e:e.slice(a.length)||"/",g=g0({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),m=u.route;if(!g&&d&&n&&!r[r.length-1].route.index&&(g=g0({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:Ts([a,g.pathname]),pathnameBase:E6(Ts([a,g.pathnameBase])),route:m}),g.pathnameBase!=="/"&&(a=Ts([a,g.pathnameBase]))}return o}function g0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=v6(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:g},m)=>{if(h==="*"){let _=c[m]||"";o=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const x=c[m];return g&&!x?d[h]=void 0:d[h]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function v6(t,e=!1,n=!0){fi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function y6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fi(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ds(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var b6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,x6=t=>b6.test(t);function _6(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ic(t):t,a;if(n)if(x6(n))a=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),fi(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?a=c2(n.substring(1),"/"):a=c2(n,e)}else a=e;return{pathname:a,search:S6(r),hash:T6(i)}}function c2(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function f1(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function w6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function jk(t){let e=w6(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function zk(t,e,n,r=!1){let i;typeof t=="string"?i=Ic(t):(i={...t},pn(!i.pathname||!i.pathname.includes("?"),f1("?","pathname","search",i)),pn(!i.pathname||!i.pathname.includes("#"),f1("#","pathname","hash",i)),pn(!i.search||!i.search.includes("#"),f1("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=n;else{let g=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),g-=1;i.pathname=m.join("/")}c=g>=0?e[g]:"/"}let u=_6(i,c),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var Ts=t=>t.join("/").replace(/\/\/+/g,"/"),E6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),S6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,T6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function A6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Lk=["POST","PUT","PATCH","DELETE"];new Set(Lk);var C6=["GET",...Lk];new Set(C6);var Id=G.createContext(null);Id.displayName="DataRouter";var uv=G.createContext(null);uv.displayName="DataRouterState";G.createContext(!1);var Bk=G.createContext({isTransitioning:!1});Bk.displayName="ViewTransition";var I6=G.createContext(new Map);I6.displayName="Fetchers";var R6=G.createContext(null);R6.displayName="Await";var Ya=G.createContext(null);Ya.displayName="Navigation";var dp=G.createContext(null);dp.displayName="Location";var Ka=G.createContext({outlet:null,matches:[],isDataRoute:!1});Ka.displayName="Route";var X_=G.createContext(null);X_.displayName="RouteError";function D6(t,{relative:e}={}){pn(fp(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=G.useContext(Ya),{hash:i,pathname:a,search:o}=hp(t,{relative:e}),c=a;return n!=="/"&&(c=a==="/"?n:Ts([n,a])),r.createHref({pathname:c,search:o,hash:i})}function fp(){return G.useContext(dp)!=null}function Xa(){return pn(fp(),"useLocation() may be used only in the context of a <Router> component."),G.useContext(dp).location}var Uk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Fk(t){G.useContext(Ya).static||G.useLayoutEffect(t)}function Wa(){let{isDataRoute:t}=G.useContext(Ka);return t?q6():k6()}function k6(){pn(fp(),"useNavigate() may be used only in the context of a <Router> component.");let t=G.useContext(Id),{basename:e,navigator:n}=G.useContext(Ya),{matches:r}=G.useContext(Ka),{pathname:i}=Xa(),a=JSON.stringify(jk(r)),o=G.useRef(!1);return Fk(()=>{o.current=!0}),G.useCallback((u,d={})=>{if(fi(o.current,Uk),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=zk(u,JSON.parse(a),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ts([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,a,i,t])}G.createContext(null);function N6(){let{matches:t}=G.useContext(Ka),e=t[t.length-1];return e?e.params:{}}function hp(t,{relative:e}={}){let{matches:n}=G.useContext(Ka),{pathname:r}=Xa(),i=JSON.stringify(jk(n));return G.useMemo(()=>zk(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function M6(t,e){return Gk(t,e)}function Gk(t,e,n,r,i){pn(fp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=G.useContext(Ya),{matches:o}=G.useContext(Ka),c=o[o.length-1],u=c?c.params:{},d=c?c.pathname:"/",h=c?c.pathnameBase:"/",g=c&&c.route;{let D=g&&g.path||"";qk(d,!g||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let m=Xa(),x;if(e){let D=typeof e=="string"?Ic(e):e;pn(h==="/"||D.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${D.pathname}" was given in the \`location\` prop.`),x=D}else x=m;let _=x.pathname||"/",E=_;if(h!=="/"){let D=h.replace(/^\//,"").split("/");E="/"+_.replace(/^\//,"").split("/").slice(D.length).join("/")}let S=Pk(t,{pathname:E});fi(g||S!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),fi(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=z6(S&&S.map(D=>Object.assign({},D,{params:Object.assign({},u,D.params),pathname:Ts([h,a.encodeLocation?a.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?h:Ts([h,a.encodeLocation?a.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),o,n,r,i);return e&&T?G.createElement(dp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},T):T}function P6(){let t=G6(),e=A6(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=G.createElement(G.Fragment,null,G.createElement("p",null," Hey developer "),G.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",G.createElement("code",{style:a},"ErrorBoundary")," or"," ",G.createElement("code",{style:a},"errorElement")," prop on your route.")),G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),n?G.createElement("pre",{style:i},n):null,o)}var O6=G.createElement(P6,null),V6=class extends G.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?G.createElement(Ka.Provider,{value:this.props.routeContext},G.createElement(X_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function j6({routeContext:t,match:e,children:n}){let r=G.useContext(Id);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),G.createElement(Ka.Provider,{value:t},n)}function z6(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=n?.errors;if(o!=null){let h=a.findIndex(g=>g.route.id&&o?.[g.route.id]!==void 0);pn(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,u=-1;if(n)for(let h=0;h<a.length;h++){let g=a[h];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=h),g.route.id){let{loaderData:m,errors:x}=n,_=g.route.loader&&!m.hasOwnProperty(g.route.id)&&(!x||x[g.route.id]===void 0);if(g.route.lazy||_){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}let d=n&&r?(h,g)=>{r(h,{location:n.location,params:n.matches?.[0]?.params??{},errorInfo:g})}:void 0;return a.reduceRight((h,g,m)=>{let x,_=!1,E=null,S=null;n&&(x=o&&g.route.id?o[g.route.id]:void 0,E=g.route.errorElement||O6,c&&(u<0&&m===0?(qk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,S=null):u===m&&(_=!0,S=g.route.hydrateFallbackElement||null)));let T=e.concat(a.slice(0,m+1)),D=()=>{let R;return x?R=E:_?R=S:g.route.Component?R=G.createElement(g.route.Component,null):g.route.element?R=g.route.element:R=h,G.createElement(j6,{match:g,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:R})};return n&&(g.route.ErrorBoundary||g.route.errorElement||m===0)?G.createElement(V6,{location:n.location,revalidation:n.revalidation,component:E,error:x,children:D(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:d}):D()},null)}function W_(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function L6(t){let e=G.useContext(Id);return pn(e,W_(t)),e}function B6(t){let e=G.useContext(uv);return pn(e,W_(t)),e}function U6(t){let e=G.useContext(Ka);return pn(e,W_(t)),e}function Q_(t){let e=U6(t),n=e.matches[e.matches.length-1];return pn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function F6(){return Q_("useRouteId")}function G6(){let t=G.useContext(X_),e=B6("useRouteError"),n=Q_("useRouteError");return t!==void 0?t:e.errors?.[n]}function q6(){let{router:t}=L6("useNavigate"),e=Q_("useNavigate"),n=G.useRef(!1);return Fk(()=>{n.current=!0}),G.useCallback(async(i,a={})=>{fi(n.current,Uk),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var u2={};function qk(t,e,n){!e&&!u2[t]&&(u2[t]=!0,fi(!1,n))}G.memo(H6);function H6({routes:t,future:e,state:n,unstable_onError:r}){return Gk(t,void 0,n,r,e)}function bs(t){pn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $6({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1}){pn(!fp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=G.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof n=="string"&&(n=Ic(n));let{pathname:u="/",search:d="",hash:h="",state:g=null,key:m="default"}=n,x=G.useMemo(()=>{let _=Ds(u,o);return _==null?null:{location:{pathname:_,search:d,hash:h,state:g,key:m},navigationType:r}},[o,u,d,h,g,m,r]);return fi(x!=null,`<Router basename="${o}"> is not able to match the URL "${u}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:G.createElement(Ya.Provider,{value:c},G.createElement(dp.Provider,{children:e,value:x}))}function Y6({children:t,location:e}){return M6(dx(t),e)}function dx(t,e=[]){let n=[];return G.Children.forEach(t,(r,i)=>{if(!G.isValidElement(r))return;let a=[...e,i];if(r.type===G.Fragment){n.push.apply(n,dx(r.props.children,a));return}pn(r.type===bs,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=dx(r.props.children,a)),n.push(o)}),n}var Gm="get",qm="application/x-www-form-urlencoded";function dv(t){return t!=null&&typeof t.tagName=="string"}function K6(t){return dv(t)&&t.tagName.toLowerCase()==="button"}function X6(t){return dv(t)&&t.tagName.toLowerCase()==="form"}function W6(t){return dv(t)&&t.tagName.toLowerCase()==="input"}function Q6(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Z6(t,e){return t.button===0&&(!e||e==="_self")&&!Q6(t)}function fx(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function J6(t,e){let n=fx(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var pm=null;function ez(){if(pm===null)try{new FormData(document.createElement("form"),0),pm=!1}catch{pm=!0}return pm}var tz=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function h1(t){return t!=null&&!tz.has(t)?(fi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qm}"`),null):t}function nz(t,e){let n,r,i,a,o;if(X6(t)){let c=t.getAttribute("action");r=c?Ds(c,e):null,n=t.getAttribute("method")||Gm,i=h1(t.getAttribute("enctype"))||qm,a=new FormData(t)}else if(K6(t)||W6(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?Ds(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||Gm,i=h1(t.getAttribute("formenctype"))||h1(c.getAttribute("enctype"))||qm,a=new FormData(c,t),!ez()){let{name:d,type:h,value:g}=t;if(h==="image"){let m=d?`${d}.`:"";a.append(`${m}x`,"0"),a.append(`${m}y`,"0")}else d&&a.append(d,g)}}else{if(dv(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Gm,r=null,i=qm,o=t}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Z_(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rz(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Ds(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function iz(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function az(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function sz(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await iz(a,n);return o.links?o.links():[]}return[]}));return uz(r.flat(1).filter(az).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function d2(t,e,n,r,i,a){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>n[d].pathname!==u.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==u.params["*"];return a==="assets"?e.filter((u,d)=>o(u,d)||c(u,d)):a==="data"?e.filter((u,d)=>{let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function oz(t,e,{includeHydrateFallback:n}={}){return lz(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function lz(t){return[...new Set(t)]}function cz(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function uz(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(cz(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function Hk(){let t=G.useContext(Id);return Z_(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function dz(){let t=G.useContext(uv);return Z_(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var J_=G.createContext(void 0);J_.displayName="FrameworkContext";function $k(){let t=G.useContext(J_);return Z_(t,"You must render this element inside a <HydratedRouter> element"),t}function fz(t,e){let n=G.useContext(J_),[r,i]=G.useState(!1),[a,o]=G.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:g}=e,m=G.useRef(null);G.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let E=T=>{T.forEach(D=>{o(D.isIntersecting)})},S=new IntersectionObserver(E,{threshold:.5});return m.current&&S.observe(m.current),()=>{S.disconnect()}}},[t]),G.useEffect(()=>{if(r){let E=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(E)}}},[r]);let x=()=>{i(!0)},_=()=>{i(!1),o(!1)};return n?t!=="intent"?[a,m,{}]:[a,m,{onFocus:$f(c,x),onBlur:$f(u,_),onMouseEnter:$f(d,x),onMouseLeave:$f(h,_),onTouchStart:$f(g,x)}]:[!1,m,{}]}function $f(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function hz({page:t,...e}){let{router:n}=Hk(),r=G.useMemo(()=>Pk(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?G.createElement(gz,{page:t,matches:r,...e}):null}function pz(t){let{manifest:e,routeModules:n}=$k(),[r,i]=G.useState([]);return G.useEffect(()=>{let a=!1;return sz(t,e,n).then(o=>{a||i(o)}),()=>{a=!0}},[t,e,n]),r}function gz({page:t,matches:e,...n}){let r=Xa(),{manifest:i,routeModules:a}=$k(),{basename:o}=Hk(),{loaderData:c,matches:u}=dz(),d=G.useMemo(()=>d2(t,e,u,i,r,"data"),[t,e,u,i,r]),h=G.useMemo(()=>d2(t,e,u,i,r,"assets"),[t,e,u,i,r]),g=G.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let _=new Set,E=!1;if(e.forEach(T=>{let D=i.routes[T.route.id];!D||!D.hasLoader||(!d.some(R=>R.route.id===T.route.id)&&T.route.id in c&&a[T.route.id]?.shouldRevalidate||D.hasClientLoader?E=!0:_.add(T.route.id))}),_.size===0)return[];let S=rz(t,o,"data");return E&&_.size>0&&S.searchParams.set("_routes",e.filter(T=>_.has(T.route.id)).map(T=>T.route.id).join(",")),[S.pathname+S.search]},[o,c,r,i,d,e,t,a]),m=G.useMemo(()=>oz(h,i),[h,i]),x=pz(h);return G.createElement(G.Fragment,null,g.map(_=>G.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...n})),m.map(_=>G.createElement("link",{key:_,rel:"modulepreload",href:_,...n})),x.map(({key:_,link:E})=>G.createElement("link",{key:_,nonce:n.nonce,...E})))}function mz(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Yk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Yk&&(window.__reactRouterVersion="7.9.6")}catch{}function vz({basename:t,children:e,window:n}){let r=G.useRef();r.current==null&&(r.current=n6({window:n,v5Compat:!0}));let i=r.current,[a,o]=G.useState({action:i.action,location:i.location}),c=G.useCallback(u=>{G.startTransition(()=>o(u))},[o]);return G.useLayoutEffect(()=>i.listen(c),[i,c]),G.createElement($6,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i})}var Kk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xk=G.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:c,target:u,to:d,preventScrollReset:h,viewTransition:g,...m},x){let{basename:_}=G.useContext(Ya),E=typeof d=="string"&&Kk.test(d),S,T=!1;if(typeof d=="string"&&E&&(S=d,Yk))try{let k=new URL(window.location.href),M=d.startsWith("//")?new URL(k.protocol+d):new URL(d),U=Ds(M.pathname,_);M.origin===k.origin&&U!=null?d=U+M.search+M.hash:T=!0}catch{fi(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=D6(d,{relative:i}),[R,O,L]=fz(r,m),j=_z(d,{replace:o,state:c,target:u,preventScrollReset:h,relative:i,viewTransition:g});function A(k){e&&e(k),k.defaultPrevented||j(k)}let C=G.createElement("a",{...m,...L,href:S||D,onClick:T||a?e:A,ref:mz(x,O),target:u,"data-discover":!E&&n==="render"?"true":void 0});return R&&!E?G.createElement(G.Fragment,null,C,G.createElement(hz,{page:D})):C});Xk.displayName="Link";var yz=G.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:c,children:u,...d},h){let g=hp(o,{relative:d.relative}),m=Xa(),x=G.useContext(uv),{navigator:_,basename:E}=G.useContext(Ya),S=x!=null&&Cz(g)&&c===!0,T=_.encodeLocation?_.encodeLocation(g).pathname:g.pathname,D=m.pathname,R=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(D=D.toLowerCase(),R=R?R.toLowerCase():null,T=T.toLowerCase()),R&&E&&(R=Ds(R,E)||R);const O=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let L=D===T||!i&&D.startsWith(T)&&D.charAt(O)==="/",j=R!=null&&(R===T||!i&&R.startsWith(T)&&R.charAt(T.length)==="/"),A={isActive:L,isPending:j,isTransitioning:S},C=L?e:void 0,k;typeof r=="function"?k=r(A):k=[r,L?"active":null,j?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let M=typeof a=="function"?a(A):a;return G.createElement(Xk,{...d,"aria-current":C,className:k,ref:h,style:M,to:o,viewTransition:c},typeof u=="function"?u(A):u)});yz.displayName="NavLink";var bz=G.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:o=Gm,action:c,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:g,...m},x)=>{let _=Tz(),E=Az(c,{relative:d}),S=o.toLowerCase()==="get"?"get":"post",T=typeof c=="string"&&Kk.test(c),D=R=>{if(u&&u(R),R.defaultPrevented)return;R.preventDefault();let O=R.nativeEvent.submitter,L=O?.getAttribute("formmethod")||o;_(O||R.currentTarget,{fetcherKey:e,method:L,navigate:n,replace:i,state:a,relative:d,preventScrollReset:h,viewTransition:g})};return G.createElement("form",{ref:x,method:S,action:E,onSubmit:r?u:D,...m,"data-discover":!T&&t==="render"?"true":void 0})});bz.displayName="Form";function xz(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Wk(t){let e=G.useContext(Id);return pn(e,xz(t)),e}function _z(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let c=Wa(),u=Xa(),d=hp(t,{relative:a});return G.useCallback(h=>{if(Z6(h,e)){h.preventDefault();let g=n!==void 0?n:Nh(u)===Nh(d);c(t,{replace:g,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[u,c,d,n,r,e,t,i,a,o])}function wz(t){fi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=G.useRef(fx(t)),n=G.useRef(!1),r=Xa(),i=G.useMemo(()=>J6(r.search,n.current?null:e.current),[r.search]),a=Wa(),o=G.useCallback((c,u)=>{const d=fx(typeof c=="function"?c(new URLSearchParams(i)):c);n.current=!0,a("?"+d,u)},[a,i]);return[i,o]}var Ez=0,Sz=()=>`__${String(++Ez)}__`;function Tz(){let{router:t}=Wk("useSubmit"),{basename:e}=G.useContext(Ya),n=F6();return G.useCallback(async(r,i={})=>{let{action:a,method:o,encType:c,formData:u,body:d}=nz(r,e);if(i.navigate===!1){let h=i.fetcherKey||Sz();await t.fetch(h,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function Az(t,{relative:e}={}){let{basename:n}=G.useContext(Ya),r=G.useContext(Ka);pn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...hp(t||".",{relative:e})},o=Xa();if(t==null){a.search=o.search;let c=new URLSearchParams(a.search),u=c.getAll("index");if(u.some(h=>h==="")){c.delete("index"),u.filter(g=>g).forEach(g=>c.append("index",g));let h=c.toString();a.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Ts([n,a.pathname])),Nh(a)}function Cz(t,{relative:e}={}){let n=G.useContext(Bk);pn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Wk("useViewTransitionState"),i=hp(t,{relative:e});if(!n.isTransitioning)return!1;let a=Ds(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Ds(n.nextLocation.pathname,r)||n.nextLocation.pathname;return g0(i.pathname,o)!=null||g0(i.pathname,a)!=null}const Iz=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Rz=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),f2=t=>{const e=Rz(t);return e.charAt(0).toUpperCase()+e.slice(1)},Qk=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Dz=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var kz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Nz=G.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...c},u)=>G.createElement("svg",{ref:u,...kz,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Qk("lucide",i),...!a&&!Dz(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,h])=>G.createElement(d,h)),...Array.isArray(a)?a:[a]]));const tt=(t,e)=>{const n=G.forwardRef(({className:r,...i},a)=>G.createElement(Nz,{ref:a,iconNode:e,className:Qk(`lucide-${Iz(f2(t))}`,`lucide-${t}`,r),...i}));return n.displayName=f2(t),n};const Mz=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Mh=tt("arrow-left",Mz);const Pz=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],Oz=tt("arrow-right-left",Pz);const Vz=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],jz=tt("check",Vz);const zz=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Zk=tt("chevron-down",zz);const Lz=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Bz=tt("chevron-left",Lz);const Uz=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Iu=tt("chevron-right",Uz);const Fz=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Gz=tt("chevron-up",Fz);const qz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],Hz=tt("circle-arrow-down",qz);const $z=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],Yz=tt("circle-arrow-up",$z);const Kz=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],m0=tt("circle-check-big",Kz);const Xz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],h2=tt("circle-check",Xz);const Wz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],gm=tt("circle-plus",Wz);const Qz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],p2=tt("circle-question-mark",Qz);const Zz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],g2=tt("circle",Zz);const Jz=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],eL=tt("copy",Jz);const tL=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],m2=tt("download",tL);const nL=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],rL=tt("eye-off",nL);const iL=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],aL=tt("eye",iL);const sL=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],oL=tt("file-text",sL);const lL=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],cL=tt("folder-plus",lL);const uL=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],dL=tt("funnel",uL);const fL=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],hL=tt("house",fL);const pL=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],gL=tt("list",pL);const mL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],vL=tt("loader-circle",mL);const yL=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],bL=tt("loader",yL);const xL=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],_L=tt("lock-open",xL);const wL=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],EL=tt("lock",wL);const SL=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],TL=tt("log-out",SL);const AL=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],hx=tt("mail",AL);const CL=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],IL=tt("pause",CL);const RL=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],Ph=tt("piggy-bank",RL);const DL=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],nc=tt("refresh-cw",DL);const kL=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],NL=tt("search",kL);const ML=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Jk=tt("settings",ML);const PL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],OL=tt("target",PL);const VL=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],px=tt("trash-2",VL);const jL=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],eN=tt("trash",jL);const zL=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],LL=tt("trending-down",zL);const BL=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],UL=tt("trending-up",BL);const FL=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ku=tt("triangle-alert",FL);const GL=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],qL=tt("undo-2",GL);const HL=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],$L=tt("upload",HL);const YL=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],KL=tt("user-plus",YL);const XL=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],ew=tt("wallet",XL);const WL=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],QL=tt("wifi-off",WL);const ZL=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],JL=tt("wifi",ZL);const e9=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fv=tt("x",e9);var Ou=9e15,il=1e9,gx="0123456789abcdef",v0="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",y0="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",mx={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Ou,maxE:Ou,crypto:!1},tN,xs,nt=!0,hv="[DecimalError] ",Yo=hv+"Invalid argument: ",nN=hv+"Precision limit exceeded",rN=hv+"crypto unavailable",iN="[object Decimal]",Tr=Math.floor,Kn=Math.pow,t9=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,n9=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,r9=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,aN=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ia=1e7,Xe=7,i9=9007199254740991,a9=v0.length-1,vx=y0.length-1,we={toStringTag:iN};we.absoluteValue=we.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Le(t)};we.ceil=function(){return Le(new this.constructor(this),this.e+1,2)};we.clampedTo=we.clamp=function(t,e){var n,r=this,i=r.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Yo+e);return n=r.cmp(t),n<0?t:r.cmp(e)>0?e:new i(r)};we.comparedTo=we.cmp=function(t){var e,n,r,i,a=this,o=a.d,c=(t=new a.constructor(t)).d,u=a.s,d=t.s;if(!o||!c)return!u||!d?NaN:u!==d?u:o===c?0:!o^u<0?1:-1;if(!o[0]||!c[0])return o[0]?u:c[0]?-d:0;if(u!==d)return u;if(a.e!==t.e)return a.e>t.e^u<0?1:-1;for(r=o.length,i=c.length,e=0,n=r<i?r:i;e<n;++e)if(o[e]!==c[e])return o[e]>c[e]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1};we.cosine=we.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+Xe,r.rounding=1,n=s9(r,uN(r,n)),r.precision=t,r.rounding=e,Le(xs==2||xs==3?n.neg():n,t,e,!0)):new r(1):new r(NaN)};we.cubeRoot=we.cbrt=function(){var t,e,n,r,i,a,o,c,u,d,h=this,g=h.constructor;if(!h.isFinite()||h.isZero())return new g(h);for(nt=!1,a=h.s*Kn(h.s*h,1/3),!a||Math.abs(a)==1/0?(n=hr(h.d),t=h.e,(a=(t-n.length+1)%3)&&(n+=a==1||a==-2?"0":"00"),a=Kn(n,1/3),t=Tr((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?n="5e"+t:(n=a.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),r=new g(n),r.s=h.s):r=new g(a.toString()),o=(t=g.precision)+3;;)if(c=r,u=c.times(c).times(c),d=u.plus(h),r=Qt(d.plus(h).times(c),d.plus(u),o+2,1),hr(c.d).slice(0,o)===(n=hr(r.d)).slice(0,o))if(n=n.slice(o-3,o+1),n=="9999"||!i&&n=="4999"){if(!i&&(Le(c,t+1,0),c.times(c).times(c).eq(h))){r=c;break}o+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Le(r,t+1,1),e=!r.times(r).times(r).eq(h));break}return nt=!0,Le(r,t,g.rounding,e)};we.decimalPlaces=we.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-Tr(this.e/Xe))*Xe,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};we.dividedBy=we.div=function(t){return Qt(this,new this.constructor(t))};we.dividedToIntegerBy=we.divToInt=function(t){var e=this,n=e.constructor;return Le(Qt(e,new n(t),0,1,1),n.precision,n.rounding)};we.equals=we.eq=function(t){return this.cmp(t)===0};we.floor=function(){return Le(new this.constructor(this),this.e+1,3)};we.greaterThan=we.gt=function(t){return this.cmp(t)>0};we.greaterThanOrEqualTo=we.gte=function(t){var e=this.cmp(t);return e==1||e===0};we.hyperbolicCosine=we.cosh=function(){var t,e,n,r,i,a=this,o=a.constructor,c=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return c;n=o.precision,r=o.rounding,o.precision=n+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/gv(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=td(o,1,a.times(e),new o(1),!0);for(var u,d=t,h=new o(8);d--;)u=a.times(a),a=c.minus(u.times(h.minus(u.times(h))));return Le(a,o.precision=n,o.rounding=r,!0)};we.hyperbolicSine=we.sinh=function(){var t,e,n,r,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,n=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,r=i.d.length,r<3)i=td(a,2,i,i,!0);else{t=1.4*Math.sqrt(r),t=t>16?16:t|0,i=i.times(1/gv(5,t)),i=td(a,2,i,i,!0);for(var o,c=new a(5),u=new a(16),d=new a(20);t--;)o=i.times(i),i=i.times(c.plus(o.times(u.times(o).plus(d))))}return a.precision=e,a.rounding=n,Le(i,e,n,!0)};we.hyperbolicTangent=we.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,Qt(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)};we.inverseCosine=we.acos=function(){var t=this,e=t.constructor,n=t.abs().cmp(1),r=e.precision,i=e.rounding;return n!==-1?n===0?t.isNeg()?Ra(e,r,i):new e(0):new e(NaN):t.isZero()?Ra(e,r+4,i).times(.5):(e.precision=r+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=r,e.rounding=i,t.times(2))};we.inverseHyperbolicCosine=we.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,nt=!1,n=n.times(n).minus(1).sqrt().plus(n),nt=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)};we.inverseHyperbolicSine=we.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,nt=!1,n=n.times(n).plus(1).sqrt().plus(n),nt=!0,r.precision=t,r.rounding=e,n.ln())};we.inverseHyperbolicTangent=we.atanh=function(){var t,e,n,r,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,r=i.sd(),Math.max(r,t)<2*-i.e-1?Le(new a(i),t,e,!0):(a.precision=n=r-i.e,i=Qt(i.plus(1),new a(1).minus(i),n+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};we.inverseSine=we.asin=function(){var t,e,n,r,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),n=a.precision,r=a.rounding,e!==-1?e===0?(t=Ra(a,n+4,r).times(.5),t.s=i.s,t):new a(NaN):(a.precision=n+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=n,a.rounding=r,i.times(2)))};we.inverseTangent=we.atan=function(){var t,e,n,r,i,a,o,c,u,d=this,h=d.constructor,g=h.precision,m=h.rounding;if(d.isFinite()){if(d.isZero())return new h(d);if(d.abs().eq(1)&&g+4<=vx)return o=Ra(h,g+4,m).times(.25),o.s=d.s,o}else{if(!d.s)return new h(NaN);if(g+4<=vx)return o=Ra(h,g+4,m).times(.5),o.s=d.s,o}for(h.precision=c=g+10,h.rounding=1,n=Math.min(28,c/Xe+2|0),t=n;t;--t)d=d.div(d.times(d).plus(1).sqrt().plus(1));for(nt=!1,e=Math.ceil(c/Xe),r=1,u=d.times(d),o=new h(d),i=d;t!==-1;)if(i=i.times(u),a=o.minus(i.div(r+=2)),i=i.times(u),o=a.plus(i.div(r+=2)),o.d[e]!==void 0)for(t=e;o.d[t]===a.d[t]&&t--;);return n&&(o=o.times(2<<n-1)),nt=!0,Le(o,h.precision=g,h.rounding=m,!0)};we.isFinite=function(){return!!this.d};we.isInteger=we.isInt=function(){return!!this.d&&Tr(this.e/Xe)>this.d.length-2};we.isNaN=function(){return!this.s};we.isNegative=we.isNeg=function(){return this.s<0};we.isPositive=we.isPos=function(){return this.s>0};we.isZero=function(){return!!this.d&&this.d[0]===0};we.lessThan=we.lt=function(t){return this.cmp(t)<0};we.lessThanOrEqualTo=we.lte=function(t){return this.cmp(t)<1};we.logarithm=we.log=function(t){var e,n,r,i,a,o,c,u,d=this,h=d.constructor,g=h.precision,m=h.rounding,x=5;if(t==null)t=new h(10),e=!0;else{if(t=new h(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new h(NaN);e=t.eq(10)}if(n=d.d,d.s<0||!n||!n[0]||d.eq(1))return new h(n&&!n[0]?-1/0:d.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)a=!0;else{for(i=n[0];i%10===0;)i/=10;a=i!==1}if(nt=!1,c=g+x,o=Vo(d,c),r=e?b0(h,c+10):Vo(t,c),u=Qt(o,r,c,1),Oh(u.d,i=g,m))do if(c+=10,o=Vo(d,c),r=e?b0(h,c+10):Vo(t,c),u=Qt(o,r,c,1),!a){+hr(u.d).slice(i+1,i+15)+1==1e14&&(u=Le(u,g+1,0));break}while(Oh(u.d,i+=10,m));return nt=!0,Le(u,g,m)};we.minus=we.sub=function(t){var e,n,r,i,a,o,c,u,d,h,g,m,x=this,_=x.constructor;if(t=new _(t),!x.d||!t.d)return!x.s||!t.s?t=new _(NaN):x.d?t.s=-t.s:t=new _(t.d||x.s!==t.s?x:NaN),t;if(x.s!=t.s)return t.s=-t.s,x.plus(t);if(d=x.d,m=t.d,c=_.precision,u=_.rounding,!d[0]||!m[0]){if(m[0])t.s=-t.s;else if(d[0])t=new _(x);else return new _(u===3?-0:0);return nt?Le(t,c,u):t}if(n=Tr(t.e/Xe),h=Tr(x.e/Xe),d=d.slice(),a=h-n,a){for(g=a<0,g?(e=d,a=-a,o=m.length):(e=m,n=h,o=d.length),r=Math.max(Math.ceil(c/Xe),o)+2,a>r&&(a=r,e.length=1),e.reverse(),r=a;r--;)e.push(0);e.reverse()}else{for(r=d.length,o=m.length,g=r<o,g&&(o=r),r=0;r<o;r++)if(d[r]!=m[r]){g=d[r]<m[r];break}a=0}for(g&&(e=d,d=m,m=e,t.s=-t.s),o=d.length,r=m.length-o;r>0;--r)d[o++]=0;for(r=m.length;r>a;){if(d[--r]<m[r]){for(i=r;i&&d[--i]===0;)d[i]=ia-1;--d[i],d[r]+=ia}d[r]-=m[r]}for(;d[--o]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=pv(d,n),nt?Le(t,c,u):t):new _(u===3?-0:0)};we.modulo=we.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?Le(new r(n),r.precision,r.rounding):(nt=!1,r.modulo==9?(e=Qt(n,t.abs(),0,3,1),e.s*=t.s):e=Qt(n,t,0,r.modulo,1),e=e.times(t),nt=!0,n.minus(e))};we.naturalExponential=we.exp=function(){return yx(this)};we.naturalLogarithm=we.ln=function(){return Vo(this)};we.negated=we.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Le(t)};we.plus=we.add=function(t){var e,n,r,i,a,o,c,u,d,h,g=this,m=g.constructor;if(t=new m(t),!g.d||!t.d)return!g.s||!t.s?t=new m(NaN):g.d||(t=new m(t.d||g.s===t.s?g:NaN)),t;if(g.s!=t.s)return t.s=-t.s,g.minus(t);if(d=g.d,h=t.d,c=m.precision,u=m.rounding,!d[0]||!h[0])return h[0]||(t=new m(g)),nt?Le(t,c,u):t;if(a=Tr(g.e/Xe),r=Tr(t.e/Xe),d=d.slice(),i=a-r,i){for(i<0?(n=d,i=-i,o=h.length):(n=h,r=a,o=d.length),a=Math.ceil(c/Xe),o=a>o?a+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=d.length,i=h.length,o-i<0&&(i=o,n=h,h=d,d=n),e=0;i;)e=(d[--i]=d[i]+h[i]+e)/ia|0,d[i]%=ia;for(e&&(d.unshift(e),++r),o=d.length;d[--o]==0;)d.pop();return t.d=d,t.e=pv(d,r),nt?Le(t,c,u):t};we.precision=we.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Yo+t);return n.d?(e=sN(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};we.round=function(){var t=this,e=t.constructor;return Le(new e(t),t.e+1,e.rounding)};we.sine=we.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+Xe,r.rounding=1,n=l9(r,uN(r,n)),r.precision=t,r.rounding=e,Le(xs>2?n.neg():n,t,e,!0)):new r(NaN)};we.squareRoot=we.sqrt=function(){var t,e,n,r,i,a,o=this,c=o.d,u=o.e,d=o.s,h=o.constructor;if(d!==1||!c||!c[0])return new h(!d||d<0&&(!c||c[0])?NaN:c?o:1/0);for(nt=!1,d=Math.sqrt(+o),d==0||d==1/0?(e=hr(c),(e.length+u)%2==0&&(e+="0"),d=Math.sqrt(e),u=Tr((u+1)/2)-(u<0||u%2),d==1/0?e="5e"+u:(e=d.toExponential(),e=e.slice(0,e.indexOf("e")+1)+u),r=new h(e)):r=new h(d.toString()),n=(u=h.precision)+3;;)if(a=r,r=a.plus(Qt(o,a,n+2,1)).times(.5),hr(a.d).slice(0,n)===(e=hr(r.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!i&&e=="4999"){if(!i&&(Le(a,u+1,0),a.times(a).eq(o))){r=a;break}n+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Le(r,u+1,1),t=!r.times(r).eq(o));break}return nt=!0,Le(r,u,h.rounding,t)};we.tangent=we.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,n=n.sin(),n.s=1,n=Qt(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,Le(xs==2||xs==4?n.neg():n,t,e,!0)):new r(NaN)};we.times=we.mul=function(t){var e,n,r,i,a,o,c,u,d,h=this,g=h.constructor,m=h.d,x=(t=new g(t)).d;if(t.s*=h.s,!m||!m[0]||!x||!x[0])return new g(!t.s||m&&!m[0]&&!x||x&&!x[0]&&!m?NaN:!m||!x?t.s/0:t.s*0);for(n=Tr(h.e/Xe)+Tr(t.e/Xe),u=m.length,d=x.length,u<d&&(a=m,m=x,x=a,o=u,u=d,d=o),a=[],o=u+d,r=o;r--;)a.push(0);for(r=d;--r>=0;){for(e=0,i=u+r;i>r;)c=a[i]+x[r]*m[i-r-1]+e,a[i--]=c%ia|0,e=c/ia|0;a[i]=(a[i]+e)%ia|0}for(;!a[--o];)a.pop();return e?++n:a.shift(),t.d=a,t.e=pv(a,n),nt?Le(t,g.precision,g.rounding):t};we.toBinary=function(t,e){return tw(this,2,t,e)};we.toDecimalPlaces=we.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Wr(t,0,il),e===void 0?e=r.rounding:Wr(e,0,8),Le(n,t+n.e+1,e))};we.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Ga(r,!0):(Wr(t,0,il),e===void 0?e=i.rounding:Wr(e,0,8),r=Le(new i(r),t+1,e),n=Ga(r,!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n};we.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?n=Ga(i):(Wr(t,0,il),e===void 0?e=a.rounding:Wr(e,0,8),r=Le(new a(i),t+i.e+1,e),n=Ga(r,!1,t+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};we.toFraction=function(t){var e,n,r,i,a,o,c,u,d,h,g,m,x=this,_=x.d,E=x.constructor;if(!_)return new E(x);if(d=n=new E(1),r=u=new E(0),e=new E(r),a=e.e=sN(_)-x.e-1,o=a%Xe,e.d[0]=Kn(10,o<0?Xe+o:o),t==null)t=a>0?e:d;else{if(c=new E(t),!c.isInt()||c.lt(d))throw Error(Yo+c);t=c.gt(e)?a>0?e:d:c}for(nt=!1,c=new E(hr(_)),h=E.precision,E.precision=a=_.length*Xe*2;g=Qt(c,e,0,1,1),i=n.plus(g.times(r)),i.cmp(t)!=1;)n=r,r=i,i=d,d=u.plus(g.times(i)),u=i,i=e,e=c.minus(g.times(i)),c=i;return i=Qt(t.minus(n),r,0,1,1),u=u.plus(i.times(d)),n=n.plus(i.times(r)),u.s=d.s=x.s,m=Qt(d,r,a,1).minus(x).abs().cmp(Qt(u,n,a,1).minus(x).abs())<1?[d,r]:[u,n],E.precision=h,nt=!0,m};we.toHexadecimal=we.toHex=function(t,e){return tw(this,16,t,e)};we.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),t==null){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),e===void 0?e=r.rounding:Wr(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(nt=!1,n=Qt(n,t,0,e,1).times(t),nt=!0,Le(n)):(t.s=n.s,n=t),n};we.toNumber=function(){return+this};we.toOctal=function(t,e){return tw(this,8,t,e)};we.toPower=we.pow=function(t){var e,n,r,i,a,o,c=this,u=c.constructor,d=+(t=new u(t));if(!c.d||!t.d||!c.d[0]||!t.d[0])return new u(Kn(+c,d));if(c=new u(c),c.eq(1))return c;if(r=u.precision,a=u.rounding,t.eq(1))return Le(c,r,a);if(e=Tr(t.e/Xe),e>=t.d.length-1&&(n=d<0?-d:d)<=i9)return i=oN(u,c,n,r),t.s<0?new u(1).div(i):Le(i,r,a);if(o=c.s,o<0){if(e<t.d.length-1)return new u(NaN);if((t.d[e]&1)==0&&(o=1),c.e==0&&c.d[0]==1&&c.d.length==1)return c.s=o,c}return n=Kn(+c,d),e=n==0||!isFinite(n)?Tr(d*(Math.log("0."+hr(c.d))/Math.LN10+c.e+1)):new u(n+"").e,e>u.maxE+1||e<u.minE-1?new u(e>0?o/0:0):(nt=!1,u.rounding=c.s=1,n=Math.min(12,(e+"").length),i=yx(t.times(Vo(c,r+n)),r),i.d&&(i=Le(i,r+5,1),Oh(i.d,r,a)&&(e=r+10,i=Le(yx(t.times(Vo(c,e+n)),e),e+5,1),+hr(i.d).slice(r+1,r+15)+1==1e14&&(i=Le(i,r+1,0)))),i.s=o,nt=!0,u.rounding=a,Le(i,r,a))};we.toPrecision=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Ga(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(Wr(t,1,il),e===void 0?e=i.rounding:Wr(e,0,8),r=Le(new i(r),t,e),n=Ga(r,t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n};we.toSignificantDigits=we.toSD=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Wr(t,1,il),e===void 0?e=r.rounding:Wr(e,0,8)),Le(new r(n),t,e)};we.toString=function(){var t=this,e=t.constructor,n=Ga(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};we.truncated=we.trunc=function(){return Le(new this.constructor(this),this.e+1,1)};we.valueOf=we.toJSON=function(){var t=this,e=t.constructor,n=Ga(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function hr(t){var e,n,r,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)r=t[e]+"",n=Xe-r.length,n&&(a+=Do(n)),a+=r;o=t[e],r=o+"",n=Xe-r.length,n&&(a+=Do(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function Wr(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Yo+t)}function Oh(t,e,n,r){var i,a,o,c;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=Xe,i=0):(i=Math.ceil((e+1)/Xe),e%=Xe),a=Kn(10,Xe-e),c=t[i]%a|0,r==null?e<3?(e==0?c=c/100|0:e==1&&(c=c/10|0),o=n<4&&c==99999||n>3&&c==49999||c==5e4||c==0):o=(n<4&&c+1==a||n>3&&c+1==a/2)&&(t[i+1]/a/100|0)==Kn(10,e-2)-1||(c==a/2||c==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?c=c/1e3|0:e==1?c=c/100|0:e==2&&(c=c/10|0),o=(r||n<4)&&c==9999||!r&&n>3&&c==4999):o=((r||n<4)&&c+1==a||!r&&n>3&&c+1==a/2)&&(t[i+1]/a/1e3|0)==Kn(10,e-3)-1,o}function Hm(t,e,n){for(var r,i=[0],a,o=0,c=t.length;o<c;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=gx.indexOf(t.charAt(o++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function s9(t,e){var n,r,i;if(e.isZero())return e;r=e.d.length,r<32?(n=Math.ceil(r/3),i=(1/gv(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),t.precision+=n,e=td(t,1,e.times(i),new t(1));for(var a=n;a--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=n,e}var Qt=(function(){function t(r,i,a){var o,c=0,u=r.length;for(r=r.slice();u--;)o=r[u]*i+c,r[u]=o%a|0,c=o/a|0;return c&&r.unshift(c),r}function e(r,i,a,o){var c,u;if(a!=o)u=a>o?1:-1;else for(c=u=0;c<a;c++)if(r[c]!=i[c]){u=r[c]>i[c]?1:-1;break}return u}function n(r,i,a,o){for(var c=0;a--;)r[a]-=c,c=r[a]<i[a]?1:0,r[a]=c*o+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o,c,u){var d,h,g,m,x,_,E,S,T,D,R,O,L,j,A,C,k,M,U,z,P=r.constructor,W=r.s==i.s?1:-1,Q=r.d,$=i.d;if(!Q||!Q[0]||!$||!$[0])return new P(!r.s||!i.s||(Q?$&&Q[0]==$[0]:!$)?NaN:Q&&Q[0]==0||!$?W*0:W/0);for(u?(x=1,h=r.e-i.e):(u=ia,x=Xe,h=Tr(r.e/x)-Tr(i.e/x)),U=$.length,k=Q.length,T=new P(W),D=T.d=[],g=0;$[g]==(Q[g]||0);g++);if($[g]>(Q[g]||0)&&h--,a==null?(j=a=P.precision,o=P.rounding):c?j=a+(r.e-i.e)+1:j=a,j<0)D.push(1),_=!0;else{if(j=j/x+2|0,g=0,U==1){for(m=0,$=$[0],j++;(g<k||m)&&j--;g++)A=m*u+(Q[g]||0),D[g]=A/$|0,m=A%$|0;_=m||g<k}else{for(m=u/($[0]+1)|0,m>1&&($=t($,m,u),Q=t(Q,m,u),U=$.length,k=Q.length),C=U,R=Q.slice(0,U),O=R.length;O<U;)R[O++]=0;z=$.slice(),z.unshift(0),M=$[0],$[1]>=u/2&&++M;do m=0,d=e($,R,U,O),d<0?(L=R[0],U!=O&&(L=L*u+(R[1]||0)),m=L/M|0,m>1?(m>=u&&(m=u-1),E=t($,m,u),S=E.length,O=R.length,d=e(E,R,S,O),d==1&&(m--,n(E,U<S?z:$,S,u))):(m==0&&(d=m=1),E=$.slice()),S=E.length,S<O&&E.unshift(0),n(R,E,O,u),d==-1&&(O=R.length,d=e($,R,U,O),d<1&&(m++,n(R,U<O?z:$,O,u))),O=R.length):d===0&&(m++,R=[0]),D[g++]=m,d&&R[0]?R[O++]=Q[C]||0:(R=[Q[C]],O=1);while((C++<k||R[0]!==void 0)&&j--);_=R[0]!==void 0}D[0]||D.shift()}if(x==1)T.e=h,tN=_;else{for(g=1,m=D[0];m>=10;m/=10)g++;T.e=g+h*x-1,Le(T,c?a+T.e+1:a,o,_)}return T}})();function Le(t,e,n,r){var i,a,o,c,u,d,h,g,m,x=t.constructor;e:if(e!=null){if(g=t.d,!g)return t;for(i=1,c=g[0];c>=10;c/=10)i++;if(a=e-i,a<0)a+=Xe,o=e,h=g[m=0],u=h/Kn(10,i-o-1)%10|0;else if(m=Math.ceil((a+1)/Xe),c=g.length,m>=c)if(r){for(;c++<=m;)g.push(0);h=u=0,i=1,a%=Xe,o=a-Xe+1}else break e;else{for(h=c=g[m],i=1;c>=10;c/=10)i++;a%=Xe,o=a-Xe+i,u=o<0?0:h/Kn(10,i-o-1)%10|0}if(r=r||e<0||g[m+1]!==void 0||(o<0?h:h%Kn(10,i-o-1)),d=n<4?(u||r)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||r||n==6&&(a>0?o>0?h/Kn(10,i-o):0:g[m-1])%10&1||n==(t.s<0?8:7)),e<1||!g[0])return g.length=0,d?(e-=t.e+1,g[0]=Kn(10,(Xe-e%Xe)%Xe),t.e=-e||0):g[0]=t.e=0,t;if(a==0?(g.length=m,c=1,m--):(g.length=m+1,c=Kn(10,Xe-a),g[m]=o>0?(h/Kn(10,i-o)%Kn(10,o)|0)*c:0),d)for(;;)if(m==0){for(a=1,o=g[0];o>=10;o/=10)a++;for(o=g[0]+=c,c=1;o>=10;o/=10)c++;a!=c&&(t.e++,g[0]==ia&&(g[0]=1));break}else{if(g[m]+=c,g[m]!=ia)break;g[m--]=0,c=1}for(a=g.length;g[--a]===0;)g.pop()}return nt&&(t.e>x.maxE?(t.d=null,t.e=NaN):t.e<x.minE&&(t.e=0,t.d=[0])),t}function Ga(t,e,n){if(!t.isFinite())return cN(t);var r,i=t.e,a=hr(t.d),o=a.length;return e?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+Do(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+Do(-i-1)+a,n&&(r=n-o)>0&&(a+=Do(r))):i>=o?(a+=Do(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+Do(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=Do(r))),a}function pv(t,e){var n=t[0];for(e*=Xe;n>=10;n/=10)e++;return e}function b0(t,e,n){if(e>a9)throw nt=!0,n&&(t.precision=n),Error(nN);return Le(new t(v0),e,1,!0)}function Ra(t,e,n){if(e>vx)throw Error(nN);return Le(new t(y0),e,n,!0)}function sN(t){var e=t.length-1,n=e*Xe+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function Do(t){for(var e="";t--;)e+="0";return e}function oN(t,e,n,r){var i,a=new t(1),o=Math.ceil(r/Xe+4);for(nt=!1;;){if(n%2&&(a=a.times(e),y2(a.d,o)&&(i=!0)),n=Tr(n/2),n===0){n=a.d.length-1,i&&a.d[n]===0&&++a.d[n];break}e=e.times(e),y2(e.d,o)}return nt=!0,a}function v2(t){return t.d[t.d.length-1]&1}function lN(t,e,n){for(var r,i,a=new t(e[0]),o=0;++o<e.length;){if(i=new t(e[o]),!i.s){a=i;break}r=a.cmp(i),(r===n||r===0&&a.s===n)&&(a=i)}return a}function yx(t,e){var n,r,i,a,o,c,u,d=0,h=0,g=0,m=t.constructor,x=m.rounding,_=m.precision;if(!t.d||!t.d[0]||t.e>17)return new m(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(nt=!1,u=_):u=e,c=new m(.03125);t.e>-2;)t=t.times(c),g+=5;for(r=Math.log(Kn(2,g))/Math.LN10*2+5|0,u+=r,n=a=o=new m(1),m.precision=u;;){if(a=Le(a.times(t),u,1),n=n.times(++h),c=o.plus(Qt(a,n,u,1)),hr(c.d).slice(0,u)===hr(o.d).slice(0,u)){for(i=g;i--;)o=Le(o.times(o),u,1);if(e==null)if(d<3&&Oh(o.d,u-r,x,d))m.precision=u+=10,n=a=c=new m(1),h=0,d++;else return Le(o,m.precision=_,x,nt=!0);else return m.precision=_,o}o=c}}function Vo(t,e){var n,r,i,a,o,c,u,d,h,g,m,x=1,_=10,E=t,S=E.d,T=E.constructor,D=T.rounding,R=T.precision;if(E.s<0||!S||!S[0]||!E.e&&S[0]==1&&S.length==1)return new T(S&&!S[0]?-1/0:E.s!=1?NaN:S?0:E);if(e==null?(nt=!1,h=R):h=e,T.precision=h+=_,n=hr(S),r=n.charAt(0),Math.abs(a=E.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)E=E.times(t),n=hr(E.d),r=n.charAt(0),x++;a=E.e,r>1?(E=new T("0."+n),a++):E=new T(r+"."+n.slice(1))}else return d=b0(T,h+2,R).times(a+""),E=Vo(new T(r+"."+n.slice(1)),h-_).plus(d),T.precision=R,e==null?Le(E,R,D,nt=!0):E;for(g=E,u=o=E=Qt(E.minus(1),E.plus(1),h,1),m=Le(E.times(E),h,1),i=3;;){if(o=Le(o.times(m),h,1),d=u.plus(Qt(o,new T(i),h,1)),hr(d.d).slice(0,h)===hr(u.d).slice(0,h))if(u=u.times(2),a!==0&&(u=u.plus(b0(T,h+2,R).times(a+""))),u=Qt(u,new T(x),h,1),e==null)if(Oh(u.d,h-_,D,c))T.precision=h+=_,d=o=E=Qt(g.minus(1),g.plus(1),h,1),m=Le(E.times(E),h,1),i=c=1;else return Le(u,T.precision=R,D,nt=!0);else return T.precision=R,u;u=d,i+=2}}function cN(t){return String(t.s*t.s/0)}function $m(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%Xe,n<0&&(r+=Xe),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Xe;r<i;)t.d.push(+e.slice(r,r+=Xe));e=e.slice(r),r=Xe-e.length}else r-=i;for(;r--;)e+="0";t.d.push(+e),nt&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function o9(t,e){var n,r,i,a,o,c,u,d,h;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),aN.test(e))return $m(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(n9.test(e))n=16,e=e.toLowerCase();else if(t9.test(e))n=2;else if(r9.test(e))n=8;else throw Error(Yo+e);for(a=e.search(/p/i),a>0?(u=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),o=a>=0,r=t.constructor,o&&(e=e.replace(".",""),c=e.length,a=c-a,i=oN(r,new r(n),a,a*2)),d=Hm(e,n,ia),h=d.length-1,a=h;d[a]===0;--a)d.pop();return a<0?new r(t.s*0):(t.e=pv(d,h),t.d=d,nt=!1,o&&(t=Qt(t,i,c*4)),u&&(t=t.times(Math.abs(u)<54?Kn(2,u):_s.pow(2,u))),nt=!0,t)}function l9(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:td(t,2,e,e);n=1.4*Math.sqrt(r),n=n>16?16:n|0,e=e.times(1/gv(5,n)),e=td(t,2,e,e);for(var i,a=new t(5),o=new t(16),c=new t(20);n--;)i=e.times(e),e=e.times(a.plus(i.times(o.times(i).minus(c))));return e}function td(t,e,n,r,i){var a,o,c,u,d=t.precision,h=Math.ceil(d/Xe);for(nt=!1,u=n.times(n),c=new t(r);;){if(o=Qt(c.times(u),new t(e++*e++),d,1),c=i?r.plus(o):r.minus(o),r=Qt(o.times(u),new t(e++*e++),d,1),o=c.plus(r),o.d[h]!==void 0){for(a=h;o.d[a]===c.d[a]&&a--;);if(a==-1)break}a=c,c=r,r=o,o=a}return nt=!0,o.d.length=h+1,o}function gv(t,e){for(var n=t;--e;)n*=t;return n}function uN(t,e){var n,r=e.s<0,i=Ra(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return xs=r?4:1,e;if(n=e.divToInt(i),n.isZero())xs=r?3:2;else{if(e=e.minus(n.times(i)),e.lte(a))return xs=v2(n)?r?2:3:r?4:1,e;xs=v2(n)?r?1:4:r?3:2}return e.minus(i).abs()}function tw(t,e,n,r){var i,a,o,c,u,d,h,g,m,x=t.constructor,_=n!==void 0;if(_?(Wr(n,1,il),r===void 0?r=x.rounding:Wr(r,0,8)):(n=x.precision,r=x.rounding),!t.isFinite())h=cN(t);else{for(h=Ga(t),o=h.indexOf("."),_?(i=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):i=e,o>=0&&(h=h.replace(".",""),m=new x(1),m.e=h.length-o,m.d=Hm(Ga(m),10,i),m.e=m.d.length),g=Hm(h,10,i),a=u=g.length;g[--u]==0;)g.pop();if(!g[0])h=_?"0p+0":"0";else{if(o<0?a--:(t=new x(t),t.d=g,t.e=a,t=Qt(t,m,n,r,0,i),g=t.d,a=t.e,d=tN),o=g[n],c=i/2,d=d||g[n+1]!==void 0,d=r<4?(o!==void 0||d)&&(r===0||r===(t.s<0?3:2)):o>c||o===c&&(r===4||d||r===6&&g[n-1]&1||r===(t.s<0?8:7)),g.length=n,d)for(;++g[--n]>i-1;)g[n]=0,n||(++a,g.unshift(1));for(u=g.length;!g[u-1];--u);for(o=0,h="";o<u;o++)h+=gx.charAt(g[o]);if(_){if(u>1)if(e==16||e==8){for(o=e==16?4:3,--u;u%o;u++)h+="0";for(g=Hm(h,i,e),u=g.length;!g[u-1];--u);for(o=1,h="1.";o<u;o++)h+=gx.charAt(g[o])}else h=h.charAt(0)+"."+h.slice(1);h=h+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)h="0"+h;h="0."+h}else if(++a>u)for(a-=u;a--;)h+="0";else a<u&&(h=h.slice(0,a)+"."+h.slice(a))}h=(e==16?"0x":e==2?"0b":e==8?"0o":"")+h}return t.s<0?"-"+h:h}function y2(t,e){if(t.length>e)return t.length=e,!0}function c9(t){return new this(t).abs()}function u9(t){return new this(t).acos()}function d9(t){return new this(t).acosh()}function f9(t,e){return new this(t).plus(e)}function h9(t){return new this(t).asin()}function p9(t){return new this(t).asinh()}function g9(t){return new this(t).atan()}function m9(t){return new this(t).atanh()}function v9(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,a=r+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=Ra(this,a,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?Ra(this,r,i):new this(0),n.s=t.s):!t.d||e.isZero()?(n=Ra(this,a,1).times(.5),n.s=t.s):e.s<0?(this.precision=a,this.rounding=1,n=this.atan(Qt(t,e,a,1)),e=Ra(this,a,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(Qt(t,e,a,1)),n}function y9(t){return new this(t).cbrt()}function b9(t){return Le(t=new this(t),t.e+1,2)}function x9(t,e,n){return new this(t).clamp(e,n)}function _9(t){if(!t||typeof t!="object")throw Error(hv+"Object expected");var e,n,r,i=t.defaults===!0,a=["precision",1,il,"rounding",0,8,"toExpNeg",-Ou,0,"toExpPos",0,Ou,"maxE",0,Ou,"minE",-Ou,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(n=a[e],i&&(this[n]=mx[n]),(r=t[n])!==void 0)if(Tr(r)===r&&r>=a[e+1]&&r<=a[e+2])this[n]=r;else throw Error(Yo+n+": "+r);if(n="crypto",i&&(this[n]=mx[n]),(r=t[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(rN);else this[n]=!1;else throw Error(Yo+n+": "+r);return this}function w9(t){return new this(t).cos()}function E9(t){return new this(t).cosh()}function dN(t){var e,n,r;function i(a){var o,c,u,d=this;if(!(d instanceof i))return new i(a);if(d.constructor=i,b2(a)){d.s=a.s,nt?!a.d||a.e>i.maxE?(d.e=NaN,d.d=null):a.e<i.minE?(d.e=0,d.d=[0]):(d.e=a.e,d.d=a.d.slice()):(d.e=a.e,d.d=a.d?a.d.slice():a.d);return}if(u=typeof a,u==="number"){if(a===0){d.s=1/a<0?-1:1,d.e=0,d.d=[0];return}if(a<0?(a=-a,d.s=-1):d.s=1,a===~~a&&a<1e7){for(o=0,c=a;c>=10;c/=10)o++;nt?o>i.maxE?(d.e=NaN,d.d=null):o<i.minE?(d.e=0,d.d=[0]):(d.e=o,d.d=[a]):(d.e=o,d.d=[a]);return}if(a*0!==0){a||(d.s=NaN),d.e=NaN,d.d=null;return}return $m(d,a.toString())}if(u==="string")return(c=a.charCodeAt(0))===45?(a=a.slice(1),d.s=-1):(c===43&&(a=a.slice(1)),d.s=1),aN.test(a)?$m(d,a):o9(d,a);if(u==="bigint")return a<0?(a=-a,d.s=-1):d.s=1,$m(d,a.toString());throw Error(Yo+a)}if(i.prototype=we,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=_9,i.clone=dN,i.isDecimal=b2,i.abs=c9,i.acos=u9,i.acosh=d9,i.add=f9,i.asin=h9,i.asinh=p9,i.atan=g9,i.atanh=m9,i.atan2=v9,i.cbrt=y9,i.ceil=b9,i.clamp=x9,i.cos=w9,i.cosh=E9,i.div=S9,i.exp=T9,i.floor=A9,i.hypot=C9,i.ln=I9,i.log=R9,i.log10=k9,i.log2=D9,i.max=N9,i.min=M9,i.mod=P9,i.mul=O9,i.pow=V9,i.random=j9,i.round=z9,i.sign=L9,i.sin=B9,i.sinh=U9,i.sqrt=F9,i.sub=G9,i.sum=q9,i.tan=H9,i.tanh=$9,i.trunc=Y9,t===void 0&&(t={}),t&&t.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function S9(t,e){return new this(t).div(e)}function T9(t){return new this(t).exp()}function A9(t){return Le(t=new this(t),t.e+1,3)}function C9(){var t,e,n=new this(0);for(nt=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return nt=!0,new this(1/0);n=e}return nt=!0,n.sqrt()}function b2(t){return t instanceof _s||t&&t.toStringTag===iN||!1}function I9(t){return new this(t).ln()}function R9(t,e){return new this(t).log(e)}function D9(t){return new this(t).log(2)}function k9(t){return new this(t).log(10)}function N9(){return lN(this,arguments,-1)}function M9(){return lN(this,arguments,1)}function P9(t,e){return new this(t).mod(e)}function O9(t,e){return new this(t).mul(e)}function V9(t,e){return new this(t).pow(e)}function j9(t){var e,n,r,i,a=0,o=new this(1),c=[];if(t===void 0?t=this.precision:Wr(t,1,il),r=Math.ceil(t/Xe),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));a<r;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:c[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);a<r;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(c.push(i%1e7),a+=4);a=r/4}else throw Error(rN);else for(;a<r;)c[a++]=Math.random()*1e7|0;for(r=c[--a],t%=Xe,r&&t&&(i=Kn(10,Xe-t),c[a]=(r/i|0)*i);c[a]===0;a--)c.pop();if(a<0)n=0,c=[0];else{for(n=-1;c[0]===0;n-=Xe)c.shift();for(r=1,i=c[0];i>=10;i/=10)r++;r<Xe&&(n-=Xe-r)}return o.e=n,o.d=c,o}function z9(t){return Le(t=new this(t),t.e+1,this.rounding)}function L9(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function B9(t){return new this(t).sin()}function U9(t){return new this(t).sinh()}function F9(t){return new this(t).sqrt()}function G9(t,e){return new this(t).sub(e)}function q9(){var t=0,e=arguments,n=new this(e[t]);for(nt=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return nt=!0,Le(n,this.precision,this.rounding)}function H9(t){return new this(t).tan()}function $9(t){return new this(t).tanh()}function Y9(t){return Le(t=new this(t),t.e+1,1)}we[Symbol.for("nodejs.util.inspect.custom")]=we.toString;we[Symbol.toStringTag]="Decimal";var _s=we.constructor=dN(mx);v0=new _s(v0);y0=new _s(y0);const nw=G.createContext({});function mv(t){const e=G.useRef(null);return e.current===null&&(e.current=t()),e.current}const rw=typeof window<"u",iw=rw?G.useLayoutEffect:G.useEffect,vv=G.createContext(null);function aw(t,e){t.indexOf(e)===-1&&t.push(e)}function sw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ks=(t,e,n)=>n>e?e:n<t?t:n;let ow=()=>{};const Ns={},fN=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function hN(t){return typeof t=="object"&&t!==null}const pN=t=>/^0[^.\s]+$/u.test(t);function lw(t){let e;return()=>(e===void 0&&(e=t()),e)}const Vi=t=>t,K9=(t,e)=>n=>e(t(n)),pp=(...t)=>t.reduce(K9),Vh=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class cw{constructor(){this.subscriptions=[]}add(e){return aw(this.subscriptions,e),()=>sw(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Oa=t=>t*1e3,Pi=t=>t/1e3;function gN(t,e){return e?t*(1e3/e):0}const mN=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,X9=1e-7,W9=12;function Q9(t,e,n,r,i){let a,o,c=0;do o=e+(n-e)/2,a=mN(o,r,i)-t,a>0?n=o:e=o;while(Math.abs(a)>X9&&++c<W9);return o}function gp(t,e,n,r){if(t===e&&n===r)return Vi;const i=a=>Q9(a,0,1,t,n);return a=>a===0||a===1?a:mN(i(a),e,r)}const vN=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,yN=t=>e=>1-t(1-e),bN=gp(.33,1.53,.69,.99),uw=yN(bN),xN=vN(uw),_N=t=>(t*=2)<1?.5*uw(t):.5*(2-Math.pow(2,-10*(t-1))),dw=t=>1-Math.sin(Math.acos(t)),wN=yN(dw),EN=vN(dw),Z9=gp(.42,0,1,1),J9=gp(0,0,.58,1),SN=gp(.42,0,.58,1),eB=t=>Array.isArray(t)&&typeof t[0]!="number",TN=t=>Array.isArray(t)&&typeof t[0]=="number",tB={linear:Vi,easeIn:Z9,easeInOut:SN,easeOut:J9,circIn:dw,circInOut:EN,circOut:wN,backIn:uw,backInOut:xN,backOut:bN,anticipate:_N},nB=t=>typeof t=="string",x2=t=>{if(TN(t)){ow(t.length===4);const[e,n,r,i]=t;return gp(e,n,r,i)}else if(nB(t))return tB[t];return t},mm=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function rB(t,e){let n=new Set,r=new Set,i=!1,a=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(h){o.has(h)&&(d.schedule(h),t()),h(c)}const d={schedule:(h,g=!1,m=!1)=>{const _=m&&i?n:r;return g&&o.add(h),_.has(h)||_.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(c=h,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),n.clear(),i=!1,a&&(a=!1,d.process(h))}};return d}const iB=40;function AN(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=mm.reduce((R,O)=>(R[O]=rB(a),R),{}),{setup:c,read:u,resolveKeyframes:d,preUpdate:h,update:g,preRender:m,render:x,postRender:_}=o,E=()=>{const R=Ns.useManualTiming?i.timestamp:performance.now();n=!1,Ns.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(R-i.timestamp,iB),1)),i.timestamp=R,i.isProcessing=!0,c.process(i),u.process(i),d.process(i),h.process(i),g.process(i),m.process(i),x.process(i),_.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(E))},S=()=>{n=!0,r=!0,i.isProcessing||t(E)};return{schedule:mm.reduce((R,O)=>{const L=o[O];return R[O]=(j,A=!1,C=!1)=>(n||S(),L.schedule(j,A,C)),R},{}),cancel:R=>{for(let O=0;O<mm.length;O++)o[mm[O]].cancel(R)},state:i,steps:o}}const{schedule:on,cancel:Ko,state:ur,steps:p1}=AN(typeof requestAnimationFrame<"u"?requestAnimationFrame:Vi,!0);let Ym;function aB(){Ym=void 0}const Yr={now:()=>(Ym===void 0&&Yr.set(ur.isProcessing||Ns.useManualTiming?ur.timestamp:performance.now()),Ym),set:t=>{Ym=t,queueMicrotask(aB)}},CN=t=>e=>typeof e=="string"&&e.startsWith(t),fw=CN("--"),sB=CN("var(--"),hw=t=>sB(t)?oB.test(t.split("/*")[0].trim()):!1,oB=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Rd={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},jh={...Rd,transform:t=>ks(0,1,t)},vm={...Rd,default:1},dh=t=>Math.round(t*1e5)/1e5,pw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function lB(t){return t==null}const cB=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,gw=(t,e)=>n=>!!(typeof n=="string"&&cB.test(n)&&n.startsWith(t)||e&&!lB(n)&&Object.prototype.hasOwnProperty.call(n,e)),IN=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,o,c]=r.match(pw);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},uB=t=>ks(0,255,t),g1={...Rd,transform:t=>Math.round(uB(t))},Ql={test:gw("rgb","red"),parse:IN("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+g1.transform(t)+", "+g1.transform(e)+", "+g1.transform(n)+", "+dh(jh.transform(r))+")"};function dB(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const bx={test:gw("#"),parse:dB,transform:Ql.transform},mp=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ro=mp("deg"),Va=mp("%"),et=mp("px"),fB=mp("vh"),hB=mp("vw"),_2={...Va,parse:t=>Va.parse(t)/100,transform:t=>Va.transform(t*100)},Vu={test:gw("hsl","hue"),parse:IN("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Va.transform(dh(e))+", "+Va.transform(dh(n))+", "+dh(jh.transform(r))+")"},Ln={test:t=>Ql.test(t)||bx.test(t)||Vu.test(t),parse:t=>Ql.test(t)?Ql.parse(t):Vu.test(t)?Vu.parse(t):bx.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ql.transform(t):Vu.transform(t),getAnimatableNone:t=>{const e=Ln.parse(t);return e.alpha=0,Ln.transform(e)}},pB=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function gB(t){return isNaN(t)&&typeof t=="string"&&(t.match(pw)?.length||0)+(t.match(pB)?.length||0)>0}const RN="number",DN="color",mB="var",vB="var(",w2="${}",yB=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function zh(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const c=e.replace(yB,u=>(Ln.test(u)?(r.color.push(a),i.push(DN),n.push(Ln.parse(u))):u.startsWith(vB)?(r.var.push(a),i.push(mB),n.push(u)):(r.number.push(a),i.push(RN),n.push(parseFloat(u))),++a,w2)).split(w2);return{values:n,split:c,indexes:r,types:i}}function kN(t){return zh(t).values}function NN(t){const{split:e,types:n}=zh(t),r=e.length;return i=>{let a="";for(let o=0;o<r;o++)if(a+=e[o],i[o]!==void 0){const c=n[o];c===RN?a+=dh(i[o]):c===DN?a+=Ln.transform(i[o]):a+=i[o]}return a}}const bB=t=>typeof t=="number"?0:Ln.test(t)?Ln.getAnimatableNone(t):t;function xB(t){const e=kN(t);return NN(t)(e.map(bB))}const Xo={test:gB,parse:kN,createTransformer:NN,getAnimatableNone:xB};function m1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function _B({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,o=0;if(!e)i=a=o=n;else{const c=n<.5?n*(1+e):n+e-n*e,u=2*n-c;i=m1(u,c,t+1/3),a=m1(u,c,t),o=m1(u,c,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function x0(t,e){return n=>n>0?e:t}const fn=(t,e,n)=>t+(e-t)*n,v1=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},wB=[bx,Ql,Vu],EB=t=>wB.find(e=>e.test(t));function E2(t){const e=EB(t);if(!e)return!1;let n=e.parse(t);return e===Vu&&(n=_B(n)),n}const S2=(t,e)=>{const n=E2(t),r=E2(e);if(!n||!r)return x0(t,e);const i={...n};return a=>(i.red=v1(n.red,r.red,a),i.green=v1(n.green,r.green,a),i.blue=v1(n.blue,r.blue,a),i.alpha=fn(n.alpha,r.alpha,a),Ql.transform(i))},xx=new Set(["none","hidden"]);function SB(t,e){return xx.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function TB(t,e){return n=>fn(t,e,n)}function mw(t){return typeof t=="number"?TB:typeof t=="string"?hw(t)?x0:Ln.test(t)?S2:IB:Array.isArray(t)?MN:typeof t=="object"?Ln.test(t)?S2:AB:x0}function MN(t,e){const n=[...t],r=n.length,i=t.map((a,o)=>mw(a)(a,e[o]));return a=>{for(let o=0;o<r;o++)n[o]=i[o](a);return n}}function AB(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=mw(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function CB(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],o=t.indexes[a][r[a]],c=t.values[o]??0;n[i]=c,r[a]++}return n}const IB=(t,e)=>{const n=Xo.createTransformer(e),r=zh(t),i=zh(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?xx.has(t)&&!i.values.length||xx.has(e)&&!r.values.length?SB(t,e):pp(MN(CB(r,i),i.values),n):x0(t,e)};function PN(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?fn(t,e,n):mw(t)(t,e)}const RB=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>on.update(e,n),stop:()=>Ko(e),now:()=>ur.isProcessing?ur.timestamp:Yr.now()}},ON=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},_0=2e4;function vw(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<_0;)e+=n,r=t.next(e);return e>=_0?1/0:e}function DB(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(vw(r),_0);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Pi(i)}}const kB=5;function VN(t,e,n){const r=Math.max(e-kB,0);return gN(n-t(r),e-r)}const bn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},y1=.001;function NB({duration:t=bn.duration,bounce:e=bn.bounce,velocity:n=bn.velocity,mass:r=bn.mass}){let i,a,o=1-e;o=ks(bn.minDamping,bn.maxDamping,o),t=ks(bn.minDuration,bn.maxDuration,Pi(t)),o<1?(i=d=>{const h=d*o,g=h*t,m=h-n,x=_x(d,o),_=Math.exp(-g);return y1-m/x*_},a=d=>{const g=d*o*t,m=g*n+n,x=Math.pow(o,2)*Math.pow(d,2)*t,_=Math.exp(-g),E=_x(Math.pow(d,2),o);return(-i(d)+y1>0?-1:1)*((m-x)*_)/E}):(i=d=>{const h=Math.exp(-d*t),g=(d-n)*t+1;return-y1+h*g},a=d=>{const h=Math.exp(-d*t),g=(n-d)*(t*t);return h*g});const c=5/t,u=PB(i,a,c);if(t=Oa(t),isNaN(u))return{stiffness:bn.stiffness,damping:bn.damping,duration:t};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:t}}}const MB=12;function PB(t,e,n){let r=n;for(let i=1;i<MB;i++)r=r-t(r)/e(r);return r}function _x(t,e){return t*Math.sqrt(1-e*e)}const OB=["duration","bounce"],VB=["stiffness","damping","mass"];function T2(t,e){return e.some(n=>t[n]!==void 0)}function jB(t){let e={velocity:bn.velocity,stiffness:bn.stiffness,damping:bn.damping,mass:bn.mass,isResolvedFromDuration:!1,...t};if(!T2(t,VB)&&T2(t,OB))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*ks(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:bn.mass,stiffness:i,damping:a}}else{const n=NB(t);e={...e,...n,mass:bn.mass},e.isResolvedFromDuration=!0}return e}function w0(t=bn.visualDuration,e=bn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],c={done:!1,value:a},{stiffness:u,damping:d,mass:h,duration:g,velocity:m,isResolvedFromDuration:x}=jB({...n,velocity:-Pi(n.velocity||0)}),_=m||0,E=d/(2*Math.sqrt(u*h)),S=o-a,T=Pi(Math.sqrt(u/h)),D=Math.abs(S)<5;r||(r=D?bn.restSpeed.granular:bn.restSpeed.default),i||(i=D?bn.restDelta.granular:bn.restDelta.default);let R;if(E<1){const L=_x(T,E);R=j=>{const A=Math.exp(-E*T*j);return o-A*((_+E*T*S)/L*Math.sin(L*j)+S*Math.cos(L*j))}}else if(E===1)R=L=>o-Math.exp(-T*L)*(S+(_+T*S)*L);else{const L=T*Math.sqrt(E*E-1);R=j=>{const A=Math.exp(-E*T*j),C=Math.min(L*j,300);return o-A*((_+E*T*S)*Math.sinh(C)+L*S*Math.cosh(C))/L}}const O={calculatedDuration:x&&g||null,next:L=>{const j=R(L);if(x)c.done=L>=g;else{let A=L===0?_:0;E<1&&(A=L===0?Oa(_):VN(R,L,j));const C=Math.abs(A)<=r,k=Math.abs(o-j)<=i;c.done=C&&k}return c.value=c.done?o:j,c},toString:()=>{const L=Math.min(vw(O),_0),j=ON(A=>O.next(L*A).value,L,30);return L+"ms "+j},toTransition:()=>{}};return O}w0.applyToOptions=t=>{const e=DB(t,100,w0);return t.ease=e.ease,t.duration=Oa(e.duration),t.type="keyframes",t};function wx({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:c,max:u,restDelta:d=.5,restSpeed:h}){const g=t[0],m={done:!1,value:g},x=C=>c!==void 0&&C<c||u!==void 0&&C>u,_=C=>c===void 0?u:u===void 0||Math.abs(c-C)<Math.abs(u-C)?c:u;let E=n*e;const S=g+E,T=o===void 0?S:o(S);T!==S&&(E=T-g);const D=C=>-E*Math.exp(-C/r),R=C=>T+D(C),O=C=>{const k=D(C),M=R(C);m.done=Math.abs(k)<=d,m.value=m.done?T:M};let L,j;const A=C=>{x(m.value)&&(L=C,j=w0({keyframes:[m.value,_(m.value)],velocity:VN(R,C,m.value),damping:i,stiffness:a,restDelta:d,restSpeed:h}))};return A(0),{calculatedDuration:null,next:C=>{let k=!1;return!j&&L===void 0&&(k=!0,O(C),A(C)),L!==void 0&&C>=L?j.next(C-L):(!k&&O(C),m)}}}function zB(t,e,n){const r=[],i=n||Ns.mix||PN,a=t.length-1;for(let o=0;o<a;o++){let c=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||Vi:e;c=pp(u,c)}r.push(c)}return r}function LB(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(ow(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=zB(e,r,i),u=c.length,d=h=>{if(o&&h<t[0])return e[0];let g=0;if(u>1)for(;g<t.length-2&&!(h<t[g+1]);g++);const m=Vh(t[g],t[g+1],h);return c[g](m)};return n?h=>d(ks(t[0],t[a-1],h)):d}function BB(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Vh(0,e,r);t.push(fn(n,1,i))}}function UB(t){const e=[0];return BB(e,t.length-1),e}function FB(t,e){return t.map(n=>n*e)}function GB(t,e){return t.map(()=>e||SN).splice(0,t.length-1)}function fh({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=eB(r)?r.map(x2):x2(r),a={done:!1,value:e[0]},o=FB(n&&n.length===e.length?n:UB(e),t),c=LB(o,e,{ease:Array.isArray(i)?i:GB(e,i)});return{calculatedDuration:t,next:u=>(a.value=c(u),a.done=u>=t,a)}}const qB=t=>t!==null;function yw(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(qB),c=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!c||r===void 0?a[c]:r}const HB={decay:wx,inertia:wx,tween:fh,keyframes:fh,spring:w0};function jN(t){typeof t.type=="string"&&(t.type=HB[t.type])}class bw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const $B=t=>t/100;class xw extends bw{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Yr.now()&&this.tick(Yr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;jN(e);const{type:n=fh,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=e;let{keyframes:c}=e;const u=n||fh;u!==fh&&typeof c[0]!="number"&&(this.mixKeyframes=pp($B,PN(c[0],c[1])),c=[0,100]);const d=u({...e,keyframes:c});a==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...c].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=vw(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:g,repeatType:m,repeatDelay:x,type:_,onUpdate:E,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const T=this.currentTime-d*(this.playbackSpeed>=0?1:-1),D=this.playbackSpeed>=0?T<0:T>i;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let R=this.currentTime,O=r;if(g){const C=Math.min(this.currentTime,i)/c;let k=Math.floor(C),M=C%1;!M&&C>=1&&(M=1),M===1&&k--,k=Math.min(k,g+1),!!(k%2)&&(m==="reverse"?(M=1-M,x&&(M-=x/c)):m==="mirror"&&(O=o)),R=ks(0,1,M)*c}const L=D?{done:!1,value:h[0]}:O.next(R);a&&(L.value=a(L.value));let{done:j}=L;!D&&u!==null&&(j=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return A&&_!==wx&&(L.value=yw(h,this.options,S,this.speed)),E&&E(L.value),A&&this.finish(),L}then(e,n){return this.finished.then(e,n)}get duration(){return Pi(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Pi(e)}get time(){return Pi(this.currentTime)}set time(e){e=Oa(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Yr.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Pi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=RB,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Yr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function YB(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Zl=t=>t*180/Math.PI,Ex=t=>{const e=Zl(Math.atan2(t[1],t[0]));return Sx(e)},KB={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Ex,rotateZ:Ex,skewX:t=>Zl(Math.atan(t[1])),skewY:t=>Zl(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Sx=t=>(t=t%360,t<0&&(t+=360),t),A2=Ex,C2=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),I2=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),XB={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:C2,scaleY:I2,scale:t=>(C2(t)+I2(t))/2,rotateX:t=>Sx(Zl(Math.atan2(t[6],t[5]))),rotateY:t=>Sx(Zl(Math.atan2(-t[2],t[0]))),rotateZ:A2,rotate:A2,skewX:t=>Zl(Math.atan(t[4])),skewY:t=>Zl(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Tx(t){return t.includes("scale")?1:0}function Ax(t,e){if(!t||t==="none")return Tx(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=XB,i=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=KB,i=c}if(!i)return Tx(e);const a=r[e],o=i[1].split(",").map(QB);return typeof a=="function"?a(o):o[a]}const WB=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Ax(n,e)};function QB(t){return parseFloat(t.trim())}const Dd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],kd=new Set(Dd),R2=t=>t===Rd||t===et,ZB=new Set(["x","y","z"]),JB=Dd.filter(t=>!ZB.has(t));function e8(t){const e=[];return JB.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const rc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Ax(e,"x"),y:(t,{transform:e})=>Ax(e,"y")};rc.translateX=rc.x;rc.translateY=rc.y;const ic=new Set;let Cx=!1,Ix=!1,Rx=!1;function zN(){if(Ix){const t=Array.from(ic).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=e8(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,o])=>{r.getValue(a)?.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Ix=!1,Cx=!1,ic.forEach(t=>t.complete(Rx)),ic.clear()}function LN(){ic.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Ix=!0)})}function t8(){Rx=!0,LN(),zN(),Rx=!1}class _w{constructor(e,n,r,i,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ic.add(this),Cx||(Cx=!0,on.read(LN),on.resolveKeyframes(zN))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const c=r.readValue(n,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}YB(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ic.delete(this)}cancel(){this.state==="scheduled"&&(ic.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const n8=t=>t.startsWith("--");function r8(t,e,n){n8(e)?t.style.setProperty(e,n):t.style[e]=n}const i8=lw(()=>window.ScrollTimeline!==void 0),a8={};function s8(t,e){const n=lw(t);return()=>a8[e]??n()}const BN=s8(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),eh=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,D2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:eh([0,.65,.55,1]),circOut:eh([.55,0,1,.45]),backIn:eh([.31,.01,.66,-.59]),backOut:eh([.33,1.53,.69,.99])};function UN(t,e){if(t)return typeof t=="function"?BN()?ON(t,e):"ease-out":TN(t)?eh(t):Array.isArray(t)?t.map(n=>UN(n,e)||D2.easeOut):D2[t]}function o8(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:c="easeOut",times:u}={},d=void 0){const h={[e]:n};u&&(h.offset=u);const g=UN(c,i);Array.isArray(g)&&(h.easing=g);const m={delay:r,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),t.animate(h,m)}function FN(t){return typeof t=="function"&&"applyToOptions"in t}function l8({type:t,...e}){return FN(t)&&BN()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class c8 extends bw{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:c,onComplete:u}=e;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=e,ow(typeof e.type!="string");const d=l8(e);this.animation=o8(n,r,i,d,a),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const h=yw(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(h):r8(n,r,h),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Pi(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Pi(e)}get time(){return Pi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Oa(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&i8()?(this.animation.timeline=e,Vi):n(this)}}const GN={anticipate:_N,backInOut:xN,circInOut:EN};function u8(t){return t in GN}function d8(t){typeof t.ease=="string"&&u8(t.ease)&&(t.ease=GN[t.ease])}const k2=10;class f8 extends c8{constructor(e){d8(e),jN(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const c=new xw({...o,autoplay:!1}),u=Oa(this.finishedTime??this.time);n.setWithVelocity(c.sample(u-k2).value,c.sample(u).value,k2),c.stop()}}const N2=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Xo.test(t)||t==="0")&&!t.startsWith("url("));function h8(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function p8(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=N2(i,e),c=N2(a,e);return!o||!c?!1:h8(t)||(n==="spring"||FN(n))&&r}function Dx(t){t.duration=0,t.type="keyframes"}const g8=new Set(["opacity","clipPath","filter","transform"]),m8=lw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function v8(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:o}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=e.owner.getProps();return m8()&&n&&g8.has(n)&&(n!=="transform"||!d)&&!u&&!r&&i!=="mirror"&&a!==0&&o!=="inertia"}const y8=40;class b8 extends bw{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",keyframes:c,name:u,motionValue:d,element:h,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Yr.now();const m={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:o,name:u,motionValue:d,element:h,...g},x=h?.KeyframeResolver||_w;this.keyframeResolver=new x(c,(_,E,S)=>this.onKeyframesResolved(_,E,m,!S),u,d,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:o,velocity:c,delay:u,isHandoff:d,onUpdate:h}=r;this.resolvedAt=Yr.now(),p8(e,a,o,c)||((Ns.instantAnimations||!u)&&h?.(yw(e,r,n)),e[0]=e[e.length-1],Dx(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>y8?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},x=!d&&v8(m)?new f8({...m,element:m.motionValue.owner.current}):new xw(m);x.finished.then(()=>this.notifyFinished()).catch(Vi),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),t8()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const x8=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function _8(t){const e=x8.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function qN(t,e,n=1){const[r,i]=_8(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const o=a.trim();return fN(o)?parseFloat(o):o}return hw(i)?qN(i,e,n+1):i}function ww(t,e){return t?.[e]??t?.default??t}const HN=new Set(["width","height","top","left","right","bottom",...Dd]),w8={test:t=>t==="auto",parse:t=>t},$N=t=>e=>e.test(t),YN=[Rd,et,Va,Ro,hB,fB,w8],M2=t=>YN.find($N(t));function E8(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||pN(t):!0}const S8=new Set(["brightness","contrast","saturate","opacity"]);function T8(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(pw)||[];if(!r)return t;const i=n.replace(r,"");let a=S8.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const A8=/\b([a-z-]*)\(.*?\)/gu,kx={...Xo,getAnimatableNone:t=>{const e=t.match(A8);return e?e.map(T8).join(" "):t}},P2={...Rd,transform:Math.round},C8={rotate:Ro,rotateX:Ro,rotateY:Ro,rotateZ:Ro,scale:vm,scaleX:vm,scaleY:vm,scaleZ:vm,skew:Ro,skewX:Ro,skewY:Ro,distance:et,translateX:et,translateY:et,translateZ:et,x:et,y:et,z:et,perspective:et,transformPerspective:et,opacity:jh,originX:_2,originY:_2,originZ:et},Ew={borderWidth:et,borderTopWidth:et,borderRightWidth:et,borderBottomWidth:et,borderLeftWidth:et,borderRadius:et,radius:et,borderTopLeftRadius:et,borderTopRightRadius:et,borderBottomRightRadius:et,borderBottomLeftRadius:et,width:et,maxWidth:et,height:et,maxHeight:et,top:et,right:et,bottom:et,left:et,padding:et,paddingTop:et,paddingRight:et,paddingBottom:et,paddingLeft:et,margin:et,marginTop:et,marginRight:et,marginBottom:et,marginLeft:et,backgroundPositionX:et,backgroundPositionY:et,...C8,zIndex:P2,fillOpacity:jh,strokeOpacity:jh,numOctaves:P2},I8={...Ew,color:Ln,backgroundColor:Ln,outlineColor:Ln,fill:Ln,stroke:Ln,borderColor:Ln,borderTopColor:Ln,borderRightColor:Ln,borderBottomColor:Ln,borderLeftColor:Ln,filter:kx,WebkitFilter:kx},KN=t=>I8[t];function XN(t,e){let n=KN(t);return n!==kx&&(n=Xo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const R8=new Set(["auto","none","0"]);function D8(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!R8.has(a)&&zh(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=XN(n,i)}class k8 extends _w{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="string"&&(d=d.trim(),hw(d))){const h=qN(d,n.current);h!==void 0&&(e[u]=h),u===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!HN.has(r)||e.length!==2)return;const[i,a]=e,o=M2(i),c=M2(a);if(o!==c)if(R2(o)&&R2(c))for(let u=0;u<e.length;u++){const d=e[u];typeof d=="string"&&(e[u]=parseFloat(d))}else rc[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||E8(e[i]))&&r.push(i);r.length&&D8(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=rc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=rc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function N8(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const WN=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function QN(t){return hN(t)&&"offsetHeight"in t}const O2=30,M8=t=>!isNaN(parseFloat(t));class P8{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Yr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Yr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=M8(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new cw);const r=this.events[e].add(n);return e==="change"?()=>{r(),on.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Yr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>O2)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,O2);return gN(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function nd(t,e){return new P8(t,e)}const{schedule:Sw}=AN(queueMicrotask,!1),Ji={x:!1,y:!1};function ZN(){return Ji.x||Ji.y}function O8(t){return t==="x"||t==="y"?Ji[t]?null:(Ji[t]=!0,()=>{Ji[t]=!1}):Ji.x||Ji.y?null:(Ji.x=Ji.y=!0,()=>{Ji.x=Ji.y=!1})}function JN(t,e){const n=N8(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function V2(t){return!(t.pointerType==="touch"||ZN())}function V8(t,e,n={}){const[r,i,a]=JN(t,n),o=c=>{if(!V2(c))return;const{target:u}=c,d=e(u,c);if(typeof d!="function"||!u)return;const h=g=>{V2(g)&&(d(g),u.removeEventListener("pointerleave",h))};u.addEventListener("pointerleave",h,i)};return r.forEach(c=>{c.addEventListener("pointerenter",o,i)}),a}const eM=(t,e)=>e?t===e?!0:eM(t,e.parentElement):!1,Tw=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,j8=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function z8(t){return j8.has(t.tagName)||t.tabIndex!==-1}const Km=new WeakSet;function j2(t){return e=>{e.key==="Enter"&&t(e)}}function b1(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const L8=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=j2(()=>{if(Km.has(n))return;b1(n,"down");const i=j2(()=>{b1(n,"up")}),a=()=>b1(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function z2(t){return Tw(t)&&!ZN()}function B8(t,e,n={}){const[r,i,a]=JN(t,n),o=c=>{const u=c.currentTarget;if(!z2(c))return;Km.add(u);const d=e(u,c),h=(x,_)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",m),Km.has(u)&&Km.delete(u),z2(x)&&typeof d=="function"&&d(x,{success:_})},g=x=>{h(x,u===window||u===document||n.useGlobalTarget||eM(u,x.target))},m=x=>{h(x,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",m,i)};return r.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",o,i),QN(c)&&(c.addEventListener("focus",d=>L8(d,i)),!z8(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function tM(t){return hN(t)&&"ownerSVGElement"in t}function U8(t){return tM(t)&&t.tagName==="svg"}const wr=t=>!!(t&&t.getVelocity),F8=[...YN,Ln,Xo],G8=t=>F8.find($N(t)),Aw=G.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function L2(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function q8(...t){return e=>{let n=!1;const r=t.map(i=>{const a=L2(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():L2(t[i],null)}}}}function H8(...t){return G.useCallback(q8(...t),t)}class $8 extends G.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=QN(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Y8({children:t,isPresent:e,anchorX:n,root:r}){const i=G.useId(),a=G.useRef(null),o=G.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=G.useContext(Aw),u=H8(a,t?.ref);return G.useInsertionEffect(()=>{const{width:d,height:h,top:g,left:m,right:x}=o.current;if(e||!a.current||!d||!h)return;const _=n==="left"?`left: ${m}`:`right: ${x}`;a.current.dataset.motionPopId=i;const E=document.createElement("style");c&&(E.nonce=c);const S=r??document.head;return S.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${_}px !important;
            top: ${g}px !important;
          }
        `),()=>{S.contains(E)&&S.removeChild(E)}},[e]),y.jsx($8,{isPresent:e,childRef:a,sizeRef:o,children:G.cloneElement(t,{ref:u})})}const K8=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:o,anchorX:c,root:u})=>{const d=mv(X8),h=G.useId();let g=!0,m=G.useMemo(()=>(g=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:x=>{d.set(x,!0);for(const _ of d.values())if(!_)return;r&&r()},register:x=>(d.set(x,!1),()=>d.delete(x))}),[n,d,r]);return a&&g&&(m={...m}),G.useMemo(()=>{d.forEach((x,_)=>d.set(_,!1))},[n]),G.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),o==="popLayout"&&(t=y.jsx(Y8,{isPresent:n,anchorX:c,root:u,children:t})),y.jsx(vv.Provider,{value:m,children:t})};function X8(){return new Map}function nM(t=!0){const e=G.useContext(vv);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=G.useId();G.useEffect(()=>{if(t)return i(a)},[t]);const o=G.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,o]:[!0]}const ym=t=>t.key||"";function B2(t){const e=[];return G.Children.forEach(t,n=>{G.isValidElement(n)&&e.push(n)}),e}const dc=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:o=!1,anchorX:c="left",root:u})=>{const[d,h]=nM(o),g=G.useMemo(()=>B2(t),[t]),m=o&&!d?[]:g.map(ym),x=G.useRef(!0),_=G.useRef(g),E=mv(()=>new Map),[S,T]=G.useState(g),[D,R]=G.useState(g);iw(()=>{x.current=!1,_.current=g;for(let j=0;j<D.length;j++){const A=ym(D[j]);m.includes(A)?E.delete(A):E.get(A)!==!0&&E.set(A,!1)}},[D,m.length,m.join("-")]);const O=[];if(g!==S){let j=[...g];for(let A=0;A<D.length;A++){const C=D[A],k=ym(C);m.includes(k)||(j.splice(A,0,C),O.push(C))}return a==="wait"&&O.length&&(j=O),R(B2(j)),T(g),null}const{forceRender:L}=G.useContext(nw);return y.jsx(y.Fragment,{children:D.map(j=>{const A=ym(j),C=o&&!d?!1:g===D||m.includes(A),k=()=>{if(E.has(A))E.set(A,!0);else return;let M=!0;E.forEach(U=>{U||(M=!1)}),M&&(L?.(),R(_.current),o&&h?.(),r&&r())};return y.jsx(K8,{isPresent:C,initial:!x.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:u,onExitComplete:C?void 0:k,anchorX:c,children:j},A)})})},rM=G.createContext({strict:!1}),U2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},rd={};for(const t in U2)rd[t]={isEnabled:e=>U2[t].some(n=>!!e[n])};function W8(t){for(const e in t)rd[e]={...rd[e],...t[e]}}const Q8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function E0(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Q8.has(t)}let iM=t=>!E0(t);function Z8(t){typeof t=="function"&&(iM=e=>e.startsWith("on")?!E0(e):t(e))}try{Z8(require("@emotion/is-prop-valid").default)}catch{}function J8(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(iM(i)||n===!0&&E0(i)||!e&&!E0(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const yv=G.createContext({});function bv(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Lh(t){return typeof t=="string"||Array.isArray(t)}const Cw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Iw=["initial",...Cw];function xv(t){return bv(t.animate)||Iw.some(e=>Lh(t[e]))}function aM(t){return!!(xv(t)||t.variants)}function eU(t,e){if(xv(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Lh(n)?n:void 0,animate:Lh(r)?r:void 0}}return t.inherit!==!1?e:{}}function tU(t){const{initial:e,animate:n}=eU(t,G.useContext(yv));return G.useMemo(()=>({initial:e,animate:n}),[F2(e),F2(n)])}function F2(t){return Array.isArray(t)?t.join(" "):t}const Bh={};function nU(t){for(const e in t)Bh[e]=t[e],fw(e)&&(Bh[e].isCSSVariable=!0)}function sM(t,{layout:e,layoutId:n}){return kd.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Bh[t]||t==="opacity")}const rU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},iU=Dd.length;function aU(t,e,n){let r="",i=!0;for(let a=0;a<iU;a++){const o=Dd[a],c=t[o];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(o.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||n){const d=WN(c,Ew[o]);if(!u){i=!1;const h=rU[o]||o;r+=`${h}(${d}) `}n&&(e[o]=d)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Rw(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let o=!1,c=!1;for(const u in e){const d=e[u];if(kd.has(u)){o=!0;continue}else if(fw(u)){i[u]=d;continue}else{const h=WN(d,Ew[u]);u.startsWith("origin")?(c=!0,a[u]=h):r[u]=h}}if(e.transform||(o||n?r.transform=aU(e,t.transform,n):r.transform&&(r.transform="none")),c){const{originX:u="50%",originY:d="50%",originZ:h=0}=a;r.transformOrigin=`${u} ${d} ${h}`}}const Dw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function oM(t,e,n){for(const r in e)!wr(e[r])&&!sM(r,n)&&(t[r]=e[r])}function sU({transformTemplate:t},e){return G.useMemo(()=>{const n=Dw();return Rw(n,e,t),Object.assign({},n.vars,n.style)},[e])}function oU(t,e){const n=t.style||{},r={};return oM(r,n,t),Object.assign(r,sU(t,e)),r}function lU(t,e){const n={},r=oU(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const cU={offset:"stroke-dashoffset",array:"stroke-dasharray"},uU={offset:"strokeDashoffset",array:"strokeDasharray"};function dU(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?cU:uU;t[a.offset]=et.transform(-r);const o=et.transform(e),c=et.transform(n);t[a.array]=`${o} ${c}`}function lM(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:o=0,...c},u,d,h){if(Rw(t,c,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:m}=t;g.transform&&(m.transform=g.transform,delete g.transform),(m.transform||g.transformOrigin)&&(m.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),m.transform&&(m.transformBox=h?.transformBox??"fill-box",delete g.transformBox),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),i!==void 0&&dU(g,i,a,o,!1)}const cM=()=>({...Dw(),attrs:{}}),uM=t=>typeof t=="string"&&t.toLowerCase()==="svg";function fU(t,e,n,r){const i=G.useMemo(()=>{const a=cM();return lM(a,e,uM(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};oM(a,t.style,t),i.style={...a,...i.style}}return i}const hU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function kw(t){return typeof t!="string"||t.includes("-")?!1:!!(hU.indexOf(t)>-1||/[A-Z]/u.test(t))}function pU(t,e,n,{latestValues:r},i,a=!1){const c=(kw(t)?fU:lU)(e,r,i,t),u=J8(e,typeof t=="string",a),d=t!==G.Fragment?{...u,...c,ref:n}:{},{children:h}=e,g=G.useMemo(()=>wr(h)?h.get():h,[h]);return G.createElement(t,{...d,children:g})}function G2(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Nw(t,e,n,r){if(typeof e=="function"){const[i,a]=G2(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=G2(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function Xm(t){return wr(t)?t.get():t}function gU({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:mU(n,r,i,t),renderState:e()}}function mU(t,e,n,r){const i={},a=r(t,{});for(const m in a)i[m]=Xm(a[m]);let{initial:o,animate:c}=t;const u=xv(t),d=aM(t);e&&d&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),c===void 0&&(c=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const g=h?c:o;if(g&&typeof g!="boolean"&&!bv(g)){const m=Array.isArray(g)?g:[g];for(let x=0;x<m.length;x++){const _=Nw(t,m[x]);if(_){const{transitionEnd:E,transition:S,...T}=_;for(const D in T){let R=T[D];if(Array.isArray(R)){const O=h?R.length-1:0;R=R[O]}R!==null&&(i[D]=R)}for(const D in E)i[D]=E[D]}}}return i}const dM=t=>(e,n)=>{const r=G.useContext(yv),i=G.useContext(vv),a=()=>gU(t,e,r,i);return n?a():mv(a)};function Mw(t,e,n){const{style:r}=t,i={};for(const a in r)(wr(r[a])||e.style&&wr(e.style[a])||sM(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const vU=dM({scrapeMotionValuesFromProps:Mw,createRenderState:Dw});function fM(t,e,n){const r=Mw(t,e,n);for(const i in t)if(wr(t[i])||wr(e[i])){const a=Dd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const yU=dM({scrapeMotionValuesFromProps:fM,createRenderState:cM}),bU=Symbol.for("motionComponentSymbol");function ju(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function xU(t,e,n){return G.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):ju(n)&&(n.current=r))},[e])}const Pw=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),_U="framerAppearId",hM="data-"+Pw(_U),pM=G.createContext({});function wU(t,e,n,r,i){const{visualElement:a}=G.useContext(yv),o=G.useContext(rM),c=G.useContext(vv),u=G.useContext(Aw).reducedMotion,d=G.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,g=G.useContext(pM);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&EU(d.current,n,i,g);const m=G.useRef(!1);G.useInsertionEffect(()=>{h&&m.current&&h.update(n,c)});const x=n[hM],_=G.useRef(!!x&&!window.MotionHandoffIsComplete?.(x)&&window.MotionHasOptimisedAnimation?.(x));return iw(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),_.current&&h.animationState&&h.animationState.animateChanges())}),G.useEffect(()=>{h&&(!_.current&&h.animationState&&h.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(x)}),_.current=!1),h.enteringChildren=void 0)}),h}function EU(t,e,n,r){const{layoutId:i,layout:a,drag:o,dragConstraints:c,layoutScroll:u,layoutRoot:d,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:gM(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||c&&ju(c),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:u,layoutRoot:d})}function gM(t){if(t)return t.options.allowProjection!==!1?t.projection:gM(t.parent)}function x1(t,{forwardMotionProps:e=!1}={},n,r){n&&W8(n);const i=kw(t)?yU:vU;function a(c,u){let d;const h={...G.useContext(Aw),...c,layoutId:SU(c)},{isStatic:g}=h,m=tU(c),x=i(c,g);if(!g&&rw){TU();const _=AU(h);d=_.MeasureLayout,m.visualElement=wU(t,x,h,r,_.ProjectionNode)}return y.jsxs(yv.Provider,{value:m,children:[d&&m.visualElement?y.jsx(d,{visualElement:m.visualElement,...h}):null,pU(t,c,xU(x,m.visualElement,u),x,g,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=G.forwardRef(a);return o[bU]=t,o}function SU({layoutId:t}){const e=G.useContext(nw).id;return e&&t!==void 0?e+"-"+t:t}function TU(t,e){G.useContext(rM).strict}function AU(t){const{drag:e,layout:n}=rd;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function CU(t,e){if(typeof Proxy>"u")return x1;const n=new Map,r=(a,o)=>x1(a,o,t,e),i=(a,o)=>r(a,o);return new Proxy(i,{get:(a,o)=>o==="create"?r:(n.has(o)||n.set(o,x1(o,void 0,t,e)),n.get(o))})}function mM({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function IU({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function RU(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function _1(t){return t===void 0||t===1}function Nx({scale:t,scaleX:e,scaleY:n}){return!_1(t)||!_1(e)||!_1(n)}function Ll(t){return Nx(t)||vM(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function vM(t){return q2(t.x)||q2(t.y)}function q2(t){return t&&t!=="0%"}function S0(t,e,n){const r=t-n,i=e*r;return n+i}function H2(t,e,n,r,i){return i!==void 0&&(t=S0(t,i,r)),S0(t,n,r)+e}function Mx(t,e=0,n=1,r,i){t.min=H2(t.min,e,n,r,i),t.max=H2(t.max,e,n,r,i)}function yM(t,{x:e,y:n}){Mx(t.x,e.translate,e.scale,e.originPoint),Mx(t.y,n.translate,n.scale,n.originPoint)}const $2=.999999999999,Y2=1.0000000000001;function DU(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,o;for(let c=0;c<i;c++){a=n[c],o=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Lu(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,yM(t,o)),r&&Ll(a.latestValues)&&Lu(t,a.latestValues))}e.x<Y2&&e.x>$2&&(e.x=1),e.y<Y2&&e.y>$2&&(e.y=1)}function zu(t,e){t.min=t.min+e,t.max=t.max+e}function K2(t,e,n,r,i=.5){const a=fn(t.min,t.max,i);Mx(t,e,n,a,r)}function Lu(t,e){K2(t.x,e.x,e.scaleX,e.scale,e.originX),K2(t.y,e.y,e.scaleY,e.scale,e.originY)}function bM(t,e){return mM(RU(t.getBoundingClientRect(),e))}function kU(t,e,n){const r=bM(t,n),{scroll:i}=e;return i&&(zu(r.x,i.offset.x),zu(r.y,i.offset.y)),r}const X2=()=>({translate:0,scale:1,origin:0,originPoint:0}),Bu=()=>({x:X2(),y:X2()}),W2=()=>({min:0,max:0}),Cn=()=>({x:W2(),y:W2()}),Px={current:null},xM={current:!1};function NU(){if(xM.current=!0,!!rw)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Px.current=t.matches;t.addEventListener("change",e),e()}else Px.current=!1}const MU=new WeakMap;function PU(t,e,n){for(const r in e){const i=e[r],a=n[r];if(wr(i))t.addValue(r,i);else if(wr(a))t.addValue(r,nd(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,nd(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Q2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class OU{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=_w,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Yr.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,on.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=xv(n),this.isVariantNode=aM(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in g){const x=g[m];u[m]!==void 0&&wr(x)&&x.set(u[m])}}mount(e){this.current=e,MU.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),xM.current||NU(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Px.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ko(this.notifyUpdate),Ko(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=kd.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&on.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in rd){const n=rd[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Cn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Q2.length;r++){const i=Q2[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=e[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=PU(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=nd(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(fN(r)||pN(r))?r=parseFloat(r):!G8(r)&&Xo.test(n)&&(r=XN(e,n)),this.setBaseTarget(e,wr(r)?r.get():r)),wr(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=Nw(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!wr(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new cw),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Sw.render(this.render)}}class _M extends OU{constructor(){super(...arguments),this.KeyframeResolver=k8}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;wr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function wM(t,{style:e,vars:n},r,i){const a=t.style;let o;for(o in e)a[o]=e[o];i?.applyProjectionStyles(a,r);for(o in n)a.setProperty(o,n[o])}function VU(t){return window.getComputedStyle(t)}class jU extends _M{constructor(){super(...arguments),this.type="html",this.renderInstance=wM}readValueFromInstance(e,n){if(kd.has(n))return this.projection?.isProjecting?Tx(n):WB(e,n);{const r=VU(e),i=(fw(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return bM(e,n)}build(e,n,r){Rw(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Mw(e,n,r)}}const EM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function zU(t,e,n,r){wM(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(EM.has(i)?i:Pw(i),e.attrs[i])}class LU extends _M{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Cn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(kd.has(n)){const r=KN(n);return r&&r.default||0}return n=EM.has(n)?n:Pw(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return fM(e,n,r)}build(e,n,r){lM(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){zU(e,n,r,i)}mount(e){this.isSVGTag=uM(e.tagName),super.mount(e)}}const BU=(t,e)=>kw(t)?new LU(e):new jU(e,{allowProjection:t!==G.Fragment});function Xu(t,e,n){const r=t.getProps();return Nw(r,e,n!==void 0?n:r.custom,t)}const Ox=t=>Array.isArray(t);function UU(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,nd(n))}function FU(t){return Ox(t)?t[t.length-1]||0:t}function Ow(t,e){const n=Xu(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const o in a){const c=FU(a[o]);UU(t,o,c)}}function GU(t){return!!(wr(t)&&t.add)}function Vx(t,e){const n=t.getValue("willChange");if(GU(n))return n.add(e);if(!n&&Ns.WillChange){const r=new Ns.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function SM(t){return t.props[hM]}const qU=t=>t!==null;function HU(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(qU),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const $U={type:"spring",stiffness:500,damping:25,restSpeed:10},YU=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),KU={type:"keyframes",duration:.8},XU={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},WU=(t,{keyframes:e})=>e.length>2?KU:kd.has(t)?t.startsWith("scale")?YU(e[1]):$U:XU;function QU({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:c,from:u,elapsed:d,...h}){return!!Object.keys(h).length}const Vw=(t,e,n,r={},i,a)=>o=>{const c=ww(r,t)||{},u=c.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Oa(u);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-d,onUpdate:m=>{e.set(m),c.onUpdate&&c.onUpdate(m)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:a?void 0:i};QU(c)||Object.assign(h,WU(t,h)),h.duration&&(h.duration=Oa(h.duration)),h.repeatDelay&&(h.repeatDelay=Oa(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let g=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(Dx(h),h.delay===0&&(g=!0)),(Ns.instantAnimations||Ns.skipAnimations)&&(g=!0,Dx(h),h.delay=0),h.allowFlatten=!c.type&&!c.ease,g&&!a&&e.get()!==void 0){const m=HU(h.keyframes,c);if(m!==void 0){on.update(()=>{h.onUpdate(m),h.onComplete()});return}}return c.isSync?new xw(h):new b8(h)};function ZU({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function TM(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:o,...c}=e;r&&(a=r);const u=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in c){const g=t.getValue(h,t.latestValues[h]??null),m=c[h];if(m===void 0||d&&ZU(d,h))continue;const x={delay:n,...ww(a||{},h)},_=g.get();if(_!==void 0&&!g.isAnimating&&!Array.isArray(m)&&m===_&&!x.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const T=SM(t);if(T){const D=window.MotionHandoffAnimation(T,h,on);D!==null&&(x.startTime=D,E=!0)}}Vx(t,h),g.start(Vw(h,g,m,t.shouldReduceMotion&&HN.has(h)?{type:!1}:x,t,E));const S=g.animation;S&&u.push(S)}return o&&Promise.all(u).then(()=>{on.update(()=>{o&&Ow(t,o)})}),u}function AM(t,e,n,r=0,i=1){const a=Array.from(t).sort((d,h)=>d.sortNodePosition(h)).indexOf(e),o=t.size,c=(o-1)*r;return typeof n=="function"?n(a,o):i===1?a*r:c-a*r}function jx(t,e,n={}){const r=Xu(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(TM(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:g}=i;return JU(t,e,u,d,h,g,n)}:()=>Promise.resolve(),{when:c}=i;if(c){const[u,d]=c==="beforeChildren"?[a,o]:[o,a];return u().then(()=>d())}else return Promise.all([a(),o(n.delay)])}function JU(t,e,n=0,r=0,i=0,a=1,o){const c=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),c.push(jx(u,e,{...o,delay:n+(typeof r=="function"?0:r)+AM(t.variantChildren,u,r,i,a)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(c)}function CM(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>jx(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=jx(t,e,n);else{const i=typeof e=="function"?Xu(t,e,n.custom):e;r=Promise.all(TM(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function IM(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const eF=Iw.length;function RM(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?RM(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<eF;n++){const r=Iw[n],i=t.props[r];(Lh(i)||i===!1)&&(e[r]=i)}return e}const tF=[...Cw].reverse(),nF=Cw.length;function rF(t){return e=>Promise.all(e.map(({animation:n,options:r})=>CM(t,n,r)))}function iF(t){let e=rF(t),n=Z2(),r=!0;const i=u=>(d,h)=>{const g=Xu(t,h,u==="exit"?t.presenceContext?.custom:void 0);if(g){const{transition:m,transitionEnd:x,..._}=g;d={...d,..._,...x}}return d};function a(u){e=u(t)}function o(u){const{props:d}=t,h=RM(t.parent)||{},g=[],m=new Set;let x={},_=1/0;for(let S=0;S<nF;S++){const T=tF[S],D=n[T],R=d[T]!==void 0?d[T]:h[T],O=Lh(R),L=T===u?D.isActive:null;L===!1&&(_=S);let j=R===h[T]&&R!==d[T]&&O;if(j&&r&&t.manuallyAnimateOnMount&&(j=!1),D.protectedKeys={...x},!D.isActive&&L===null||!R&&!D.prevProp||bv(R)||typeof R=="boolean")continue;const A=aF(D.prevProp,R);let C=A||T===u&&D.isActive&&!j&&O||S>_&&O,k=!1;const M=Array.isArray(R)?R:[R];let U=M.reduce(i(T),{});L===!1&&(U={});const{prevResolvedValues:z={}}=D,P={...z,...U},W=H=>{C=!0,m.has(H)&&(k=!0,m.delete(H)),D.needsAnimating[H]=!0;const ee=t.getValue(H);ee&&(ee.liveStyle=!1)};for(const H in P){const ee=U[H],te=z[H];if(x.hasOwnProperty(H))continue;let fe=!1;Ox(ee)&&Ox(te)?fe=!IM(ee,te):fe=ee!==te,fe?ee!=null?W(H):m.add(H):ee!==void 0&&m.has(H)?W(H):D.protectedKeys[H]=!0}D.prevProp=R,D.prevResolvedValues=U,D.isActive&&(x={...x,...U}),r&&t.blockInitialAnimation&&(C=!1);const Q=j&&A;C&&(!Q||k)&&g.push(...M.map(H=>{const ee={type:T};if(typeof H=="string"&&r&&!Q&&t.manuallyAnimateOnMount&&t.parent){const{parent:te}=t,fe=Xu(te,H);if(te.enteringChildren&&fe){const{delayChildren:B}=fe.transition||{};ee.delay=AM(te.enteringChildren,t,B)}}return{animation:H,options:ee}}))}if(m.size){const S={};if(typeof d.initial!="boolean"){const T=Xu(t,Array.isArray(d.initial)?d.initial[0]:d.initial);T&&T.transition&&(S.transition=T.transition)}m.forEach(T=>{const D=t.getBaseTarget(T),R=t.getValue(T);R&&(R.liveStyle=!0),S[T]=D??null}),g.push({animation:S})}let E=!!g.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(E=!1),r=!1,E?e(g):Promise.resolve()}function c(u,d){if(n[u].isActive===d)return Promise.resolve();t.variantChildren?.forEach(g=>g.animationState?.setActive(u,d)),n[u].isActive=d;const h=o(u);for(const g in n)n[g].protectedKeys={};return h}return{animateChanges:o,setActive:c,setAnimateFunction:a,getState:()=>n,reset:()=>{n=Z2()}}}function aF(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!IM(e,t):!1}function jl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Z2(){return{animate:jl(!0),whileInView:jl(),whileHover:jl(),whileTap:jl(),whileDrag:jl(),whileFocus:jl(),exit:jl()}}class al{constructor(e){this.isMounted=!1,this.node=e}update(){}}class sF extends al{constructor(e){super(e),e.animationState||(e.animationState=iF(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();bv(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let oF=0;class lF extends al{constructor(){super(...arguments),this.id=oF++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const cF={animation:{Feature:sF},exit:{Feature:lF}};function Uh(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function vp(t){return{point:{x:t.pageX,y:t.pageY}}}const uF=t=>e=>Tw(e)&&t(e,vp(e));function hh(t,e,n,r){return Uh(t,e,uF(n),r)}const DM=1e-4,dF=1-DM,fF=1+DM,kM=.01,hF=0-kM,pF=0+kM;function Mr(t){return t.max-t.min}function gF(t,e,n){return Math.abs(t-e)<=n}function J2(t,e,n,r=.5){t.origin=r,t.originPoint=fn(e.min,e.max,t.origin),t.scale=Mr(n)/Mr(e),t.translate=fn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=dF&&t.scale<=fF||isNaN(t.scale))&&(t.scale=1),(t.translate>=hF&&t.translate<=pF||isNaN(t.translate))&&(t.translate=0)}function ph(t,e,n,r){J2(t.x,e.x,n.x,r?r.originX:void 0),J2(t.y,e.y,n.y,r?r.originY:void 0)}function eI(t,e,n){t.min=n.min+e.min,t.max=t.min+Mr(e)}function mF(t,e,n){eI(t.x,e.x,n.x),eI(t.y,e.y,n.y)}function tI(t,e,n){t.min=e.min-n.min,t.max=t.min+Mr(e)}function gh(t,e,n){tI(t.x,e.x,n.x),tI(t.y,e.y,n.y)}function ki(t){return[t("x"),t("y")]}const NM=({current:t})=>t?t.ownerDocument.defaultView:null,nI=(t,e)=>Math.abs(t-e);function vF(t,e){const n=nI(t.x,e.x),r=nI(t.y,e.y);return Math.sqrt(n**2+r**2)}class MM{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=E1(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,_=vF(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!x&&!_)return;const{point:E}=m,{timestamp:S}=ur;this.history.push({...E,timestamp:S});const{onStart:T,onMove:D}=this.handlers;x||(T&&T(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,m)},this.handlePointerMove=(m,x)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=w1(x,this.transformPagePoint),on.update(this.updatePoint,!0)},this.handlePointerUp=(m,x)=>{this.end();const{onEnd:_,onSessionEnd:E,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=E1(m.type==="pointercancel"?this.lastMoveEventInfo:w1(x,this.transformPagePoint),this.history);this.startEvent&&_&&_(m,T),E&&E(m,T)},!Tw(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const c=vp(e),u=w1(c,this.transformPagePoint),{point:d}=u,{timestamp:h}=ur;this.history=[{...d,timestamp:h}];const{onSessionStart:g}=n;g&&g(e,E1(u,this.history)),this.removeListeners=pp(hh(this.contextWindow,"pointermove",this.handlePointerMove),hh(this.contextWindow,"pointerup",this.handlePointerUp),hh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ko(this.updatePoint)}}function w1(t,e){return e?{point:e(t.point)}:t}function rI(t,e){return{x:t.x-e.x,y:t.y-e.y}}function E1({point:t},e){return{point:t,delta:rI(t,PM(e)),offset:rI(t,yF(e)),velocity:bF(e,.1)}}function yF(t){return t[0]}function PM(t){return t[t.length-1]}function bF(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=PM(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Oa(e)));)n--;if(!r)return{x:0,y:0};const a=Pi(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function xF(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?fn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?fn(n,t,r.max):Math.min(t,n)),t}function iI(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function _F(t,{top:e,left:n,bottom:r,right:i}){return{x:iI(t.x,n,i),y:iI(t.y,e,r)}}function aI(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function wF(t,e){return{x:aI(t.x,e.x),y:aI(t.y,e.y)}}function EF(t,e){let n=.5;const r=Mr(t),i=Mr(e);return i>r?n=Vh(e.min,e.max-r,t.min):r>i&&(n=Vh(t.min,t.max-i,e.min)),ks(0,1,n)}function SF(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const zx=.35;function TF(t=zx){return t===!1?t=0:t===!0&&(t=zx),{x:sI(t,"left","right"),y:sI(t,"top","bottom")}}function sI(t,e,n){return{min:oI(t,e),max:oI(t,n)}}function oI(t,e){return typeof t=="number"?t:t[e]||0}const AF=new WeakMap;class CF{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Cn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=g=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(vp(g).point)},o=(g,m)=>{const{drag:x,dragPropagation:_,onDragStart:E}=this.getProps();if(x&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=O8(x),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ki(T=>{let D=this.getAxisMotionValue(T).get()||0;if(Va.test(D)){const{projection:R}=this.visualElement;if(R&&R.layout){const O=R.layout.layoutBox[T];O&&(D=Mr(O)*(parseFloat(D)/100))}}this.originPoint[T]=D}),E&&on.postRender(()=>E(g,m)),Vx(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},c=(g,m)=>{this.latestPointerEvent=g,this.latestPanInfo=m;const{dragPropagation:x,dragDirectionLock:_,onDirectionLock:E,onDrag:S}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:T}=m;if(_&&this.currentDirection===null){this.currentDirection=IF(T),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",m.point,T),this.updateAxis("y",m.point,T),this.visualElement.render(),S&&S(g,m)},u=(g,m)=>{this.latestPointerEvent=g,this.latestPanInfo=m,this.stop(g,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>ki(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new MM(e,{onSessionStart:a,onStart:o,onMove:c,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:NM(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&on.postRender(()=>c(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!bm(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=xF(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&ju(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=_F(r.layoutBox,e):this.constraints=!1,this.elastic=TF(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ki(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=SF(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ju(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=kU(r,i.root,this.visualElement.getTransformPagePoint());let o=wF(i.layout.layoutBox,a);if(n){const c=n(IU(o));this.hasMutatedConstraints=!!c,c&&(o=mM(c))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},d=ki(h=>{if(!bm(h,n,this.currentDirection))return;let g=u&&u[h]||{};o&&(g={min:0,max:0});const m=i?200:1e6,x=i?40:1e7,_={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(h,_)});return Promise.all(d).then(c)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Vx(this.visualElement,e),r.start(Vw(e,r,0,n,this.visualElement,!1))}stopAnimation(){ki(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ki(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ki(n=>{const{drag:r}=this.getProps();if(!bm(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:c}=i.layout.layoutBox[n];a.set(e[n]-fn(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ju(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ki(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const u=c.get();i[o]=EF({min:u,max:u},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ki(o=>{if(!bm(o,e,null))return;const c=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];c.set(fn(u,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;AF.set(this.visualElement,this);const e=this.visualElement.current,n=hh(e,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();ju(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),on.read(r);const o=Uh(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(ki(h=>{const g=this.getAxisMotionValue(h);g&&(this.originPoint[h]+=u[h].translate,g.set(g.get()+u[h].translate))}),this.visualElement.render())}));return()=>{o(),n(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=zx,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:c}}}function bm(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function IF(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class RF extends al{constructor(e){super(e),this.removeGroupControls=Vi,this.removeListeners=Vi,this.controls=new CF(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Vi}unmount(){this.removeGroupControls(),this.removeListeners()}}const lI=t=>(e,n)=>{t&&on.postRender(()=>t(e,n))};class DF extends al{constructor(){super(...arguments),this.removePointerDownListener=Vi}onPointerDown(e){this.session=new MM(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:NM(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:lI(e),onStart:lI(n),onMove:r,onEnd:(a,o)=>{delete this.session,i&&on.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=hh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Wm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function cI(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Yf={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(et.test(t))t=parseFloat(t);else return t;const n=cI(t,e.target.x),r=cI(t,e.target.y);return`${n}% ${r}%`}},kF={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Xo.parse(t);if(i.length>5)return r;const a=Xo.createTransformer(t),o=typeof i[0]!="number"?1:0,c=n.x.scale*e.x,u=n.y.scale*e.y;i[0+o]/=c,i[1+o]/=u;const d=fn(c,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),a(i)}};let S1=!1;class NF extends G.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;nU(MF),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),S1&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Wm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:o}=r;return o&&(o.isPresent=a,S1=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||on.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Sw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;S1=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function OM(t){const[e,n]=nM(),r=G.useContext(nw);return y.jsx(NF,{...t,layoutGroup:r,switchLayoutGroup:G.useContext(pM),isPresent:e,safeToRemove:n})}const MF={borderRadius:{...Yf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Yf,borderTopRightRadius:Yf,borderBottomLeftRadius:Yf,borderBottomRightRadius:Yf,boxShadow:kF};function PF(t,e,n){const r=wr(t)?t:nd(t);return r.start(Vw("",r,e,n)),r.animation}const OF=(t,e)=>t.depth-e.depth;class VF{constructor(){this.children=[],this.isDirty=!1}add(e){aw(this.children,e),this.isDirty=!0}remove(e){sw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(OF),this.isDirty=!1,this.children.forEach(e)}}function jF(t,e){const n=Yr.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(Ko(r),t(a-e))};return on.setup(r,!0),()=>Ko(r)}const VM=["TopLeft","TopRight","BottomLeft","BottomRight"],zF=VM.length,uI=t=>typeof t=="string"?parseFloat(t):t,dI=t=>typeof t=="number"||et.test(t);function LF(t,e,n,r,i,a){i?(t.opacity=fn(0,n.opacity??1,BF(r)),t.opacityExit=fn(e.opacity??1,0,UF(r))):a&&(t.opacity=fn(e.opacity??1,n.opacity??1,r));for(let o=0;o<zF;o++){const c=`border${VM[o]}Radius`;let u=fI(e,c),d=fI(n,c);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||dI(u)===dI(d)?(t[c]=Math.max(fn(uI(u),uI(d),r),0),(Va.test(d)||Va.test(u))&&(t[c]+="%")):t[c]=d}(e.rotate||n.rotate)&&(t.rotate=fn(e.rotate||0,n.rotate||0,r))}function fI(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const BF=jM(0,.5,wN),UF=jM(.5,.95,Vi);function jM(t,e,n){return r=>r<t?0:r>e?1:n(Vh(t,e,r))}function hI(t,e){t.min=e.min,t.max=e.max}function Ii(t,e){hI(t.x,e.x),hI(t.y,e.y)}function pI(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function gI(t,e,n,r,i){return t-=e,t=S0(t,1/n,r),i!==void 0&&(t=S0(t,1/i,r)),t}function FF(t,e=0,n=1,r=.5,i,a=t,o=t){if(Va.test(e)&&(e=parseFloat(e),e=fn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let c=fn(a.min,a.max,r);t===a&&(c-=e),t.min=gI(t.min,e,n,c,i),t.max=gI(t.max,e,n,c,i)}function mI(t,e,[n,r,i],a,o){FF(t,e[n],e[r],e[i],e.scale,a,o)}const GF=["x","scaleX","originX"],qF=["y","scaleY","originY"];function vI(t,e,n,r){mI(t.x,e,GF,n?n.x:void 0,r?r.x:void 0),mI(t.y,e,qF,n?n.y:void 0,r?r.y:void 0)}function yI(t){return t.translate===0&&t.scale===1}function zM(t){return yI(t.x)&&yI(t.y)}function bI(t,e){return t.min===e.min&&t.max===e.max}function HF(t,e){return bI(t.x,e.x)&&bI(t.y,e.y)}function xI(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function LM(t,e){return xI(t.x,e.x)&&xI(t.y,e.y)}function _I(t){return Mr(t.x)/Mr(t.y)}function wI(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class $F{constructor(){this.members=[]}add(e){aw(this.members,e),e.scheduleRender()}remove(e){if(sw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function YF(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,o=n?.z||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:g,rotateY:m,skewX:x,skewY:_}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),g&&(r+=`rotateX(${g}deg) `),m&&(r+=`rotateY(${m}deg) `),x&&(r+=`skewX(${x}deg) `),_&&(r+=`skewY(${_}deg) `)}const c=t.x.scale*e.x,u=t.y.scale*e.y;return(c!==1||u!==1)&&(r+=`scale(${c}, ${u})`),r||"none"}const T1=["","X","Y","Z"],KF=1e3;let XF=0;function A1(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function BM(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=SM(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",on,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&BM(r)}function UM({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},c=e?.()){this.id=XF++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ZF),this.nodes.forEach(n7),this.nodes.forEach(r7),this.nodes.forEach(JF)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new VF)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new cw),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const u=this.eventHandlers.get(o);u&&u.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=tM(o)&&!U8(o),this.instance=o;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),t){let h,g=0;const m=()=>this.root.updateBlockedByResize=!1;on.read(()=>{g=window.innerWidth}),t(o,()=>{const x=window.innerWidth;x!==g&&(g=x,this.root.updateBlockedByResize=!0,h&&h(),h=jF(m,250),Wm.hasAnimatedSinceResize&&(Wm.hasAnimatedSinceResize=!1,this.nodes.forEach(TI)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:g,hasRelativeLayoutChanged:m,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||d.getDefaultTransition()||l7,{onLayoutAnimationStart:E,onLayoutAnimationComplete:S}=d.getProps(),T=!this.targetLayout||!LM(this.targetLayout,x),D=!g&&m;if(this.options.layoutRoot||this.resumeFrom||D||g&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={...ww(_,"layout"),onPlay:E,onComplete:S};(d.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(h,D)}else g||TI(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ko(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(i7),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&BM(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const g=this.path[h];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(EI);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(SI);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(t7),this.nodes.forEach(WF),this.nodes.forEach(QF)):this.nodes.forEach(SI),this.clearAllSnapshots();const c=Yr.now();ur.delta=ks(0,1e3/60,c-ur.timestamp),ur.timestamp=c,ur.isProcessing=!0,p1.update.process(ur),p1.preRender.process(ur),p1.render.process(ur),ur.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Sw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(e7),this.sharedNodes.forEach(a7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,on.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){on.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Mr(this.snapshot.measuredBox.x)&&!Mr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Cn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!zM(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&this.instance&&(c||Ll(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return o&&(u=this.removeTransform(u)),c7(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Cn();const c=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(u7))){const{scroll:d}=this.root;d&&(zu(c.x,d.offset.x),zu(c.y,d.offset.y))}return c}removeElementScroll(o){const c=Cn();if(Ii(c,o),this.scroll?.wasRoot)return c;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:g}=d;d!==this.root&&h&&g.layoutScroll&&(h.wasRoot&&Ii(c,o),zu(c.x,h.offset.x),zu(c.y,h.offset.y))}return c}applyTransform(o,c=!1){const u=Cn();Ii(u,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!c&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Lu(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Ll(h.latestValues)&&Lu(u,h.latestValues)}return Ll(this.latestValues)&&Lu(u,this.latestValues),u}removeTransform(o){const c=Cn();Ii(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!Ll(d.latestValues))continue;Nx(d.latestValues)&&d.updateSnapshot();const h=Cn(),g=d.measurePageBox();Ii(h,g),vI(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Ll(this.latestValues)&&vI(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ur.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:g}=this.options;if(!(!this.layout||!(h||g))){if(this.resolvedRelativeTargetAt=ur.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Cn(),this.relativeTargetOrigin=Cn(),gh(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Ii(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Cn(),this.targetWithTransforms=Cn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),mF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ii(this.target,this.layout.layoutBox),yM(this.target,this.targetDelta)):Ii(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Cn(),this.relativeTargetOrigin=Cn(),gh(this.relativeTargetOrigin,this.target,m.target),Ii(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Nx(this.parent.latestValues)||vM(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===ur.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Ii(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,m=this.treeScale.y;DU(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Cn());const{target:x}=o;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(pI(this.prevProjectionDelta.x,this.projectionDelta.x),pI(this.prevProjectionDelta.y,this.projectionDelta.y)),ph(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==m||!wI(this.projectionDelta.x,this.prevProjectionDelta.x)||!wI(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Bu(),this.projectionDelta=Bu(),this.projectionDeltaWithTransform=Bu()}setAnimationOrigin(o,c=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},g=Bu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const m=Cn(),x=u?u.source:void 0,_=this.layout?this.layout.source:void 0,E=x!==_,S=this.getStack(),T=!S||S.members.length<=1,D=!!(E&&!T&&this.options.crossfade===!0&&!this.path.some(o7));this.animationProgress=0;let R;this.mixTargetDelta=O=>{const L=O/1e3;AI(g.x,o.x,L),AI(g.y,o.y,L),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gh(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),s7(this.relativeTarget,this.relativeTargetOrigin,m,L),R&&HF(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=Cn()),Ii(R,this.relativeTarget)),E&&(this.animationValues=h,LF(h,d,this.latestValues,L,D,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Ko(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=on.update(()=>{Wm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=nd(0)),this.currentAnimation=PF(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(KF),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:u,layout:d,latestValues:h}=o;if(!(!c||!u||!d)){if(this!==o&&this.layout&&d&&FM(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||Cn();const g=Mr(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+g;const m=Mr(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+m}Ii(c,u),Lu(c,h),ph(this.projectionDeltaWithTransform,this.layoutCorrected,c,h)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new $F),this.sharedNodes.get(o).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const d={};u.z&&A1("z",o,d,this.animationValues);for(let h=0;h<T1.length;h++)A1(`rotate${T1[h]}`,o,d,this.animationValues),A1(`skew${T1[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Xm(c?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Xm(c?.pointerEvents)||""),this.hasProjected&&!Ll(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let g=YF(this.projectionDeltaWithTransform,this.treeScale,h);u&&(g=u(h,g)),o.transform=g;const{x:m,y:x}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${x.origin*100}% 0`,d.animationValues?o.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const _ in Bh){if(h[_]===void 0)continue;const{correct:E,applyTo:S,isCSSVariable:T}=Bh[_],D=g==="none"?h[_]:E(h[_],d);if(S){const R=S.length;for(let O=0;O<R;O++)o[S[O]]=D}else T?this.options.visualElement.renderState.vars[_]=D:o[_]=D}this.options.layoutId&&(o.pointerEvents=d===this?Xm(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(EI),this.root.sharedNodes.clear()}}}function WF(t){t.updateLayout()}function QF(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?ki(h=>{const g=a?e.measuredBox[h]:e.layoutBox[h],m=Mr(g);g.min=n[h].min,g.max=g.min+m}):FM(i,e.layoutBox,n)&&ki(h=>{const g=a?e.measuredBox[h]:e.layoutBox[h],m=Mr(n[h]);g.max=g.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const o=Bu();ph(o,n,e.layoutBox);const c=Bu();a?ph(c,t.applyTransform(r,!0),e.measuredBox):ph(c,n,e.layoutBox);const u=!zM(o);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:g,layout:m}=h;if(g&&m){const x=Cn();gh(x,e.layoutBox,g.layoutBox);const _=Cn();gh(_,n,m.layoutBox),LM(x,_)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=x,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function ZF(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function JF(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function e7(t){t.clearSnapshot()}function EI(t){t.clearMeasurements()}function SI(t){t.isLayoutDirty=!1}function t7(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function TI(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function n7(t){t.resolveTargetDelta()}function r7(t){t.calcProjection()}function i7(t){t.resetSkewAndRotation()}function a7(t){t.removeLeadSnapshot()}function AI(t,e,n){t.translate=fn(e.translate,0,n),t.scale=fn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function CI(t,e,n,r){t.min=fn(e.min,n.min,r),t.max=fn(e.max,n.max,r)}function s7(t,e,n,r){CI(t.x,e.x,n.x,r),CI(t.y,e.y,n.y,r)}function o7(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const l7={duration:.45,ease:[.4,0,.1,1]},II=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),RI=II("applewebkit/")&&!II("chrome/")?Math.round:Vi;function DI(t){t.min=RI(t.min),t.max=RI(t.max)}function c7(t){DI(t.x),DI(t.y)}function FM(t,e,n){return t==="position"||t==="preserve-aspect"&&!gF(_I(e),_I(n),.2)}function u7(t){return t!==t.root&&t.scroll?.wasRoot}const d7=UM({attachResizeListener:(t,e)=>Uh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),C1={current:void 0},GM=UM({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!C1.current){const t=new d7({});t.mount(window),t.setOptions({layoutScroll:!0}),C1.current=t}return C1.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),f7={pan:{Feature:DF},drag:{Feature:RF,ProjectionNode:GM,MeasureLayout:OM}};function kI(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&on.postRender(()=>a(e,vp(e)))}class h7 extends al{mount(){const{current:e}=this.node;e&&(this.unmount=V8(e,(n,r)=>(kI(this.node,r,"Start"),i=>kI(this.node,i,"End"))))}unmount(){}}class p7 extends al{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pp(Uh(this.node.current,"focus",()=>this.onFocus()),Uh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function NI(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&on.postRender(()=>a(e,vp(e)))}class g7 extends al{mount(){const{current:e}=this.node;e&&(this.unmount=B8(e,(n,r)=>(NI(this.node,r,"Start"),(i,{success:a})=>NI(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Lx=new WeakMap,I1=new WeakMap,m7=t=>{const e=Lx.get(t.target);e&&e(t)},v7=t=>{t.forEach(m7)};function y7({root:t,...e}){const n=t||document;I1.has(n)||I1.set(n,{});const r=I1.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(v7,{root:t,...e})),r[i]}function b7(t,e,n){const r=y7(e);return Lx.set(t,n),r.observe(t),()=>{Lx.delete(t),r.unobserve(t)}}const x7={some:0,all:1};class _7 extends al{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:x7[i]},c=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:g}=this.node.getProps(),m=d?h:g;m&&m(u)};return b7(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(w7(e,n))&&this.startObserver()}unmount(){}}function w7({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const E7={inView:{Feature:_7},tap:{Feature:g7},focus:{Feature:p7},hover:{Feature:h7}},S7={layout:{ProjectionNode:GM,MeasureLayout:OM}},T7={...cF,...E7,...f7,...S7},sl=CU(T7,BU);function A7(t){t.values.forEach(e=>e.stop())}function Bx(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&Ow(t,i),t.variantChildren&&t.variantChildren.forEach(a=>{Bx(a,e)})})}function C7(t,e){if(Array.isArray(e))return Bx(t,e);if(typeof e=="string")return Bx(t,[e]);Ow(t,e)}function I7(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,r){const i=[];return t.forEach(a=>{i.push(CM(a,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{C7(r,n)})},stop(){t.forEach(n=>{A7(n)})},mount(){return()=>{e.stop()}}};return e}function R7(){const t=mv(I7);return iw(t.mount,[]),t}const D7=R7;function k7(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function N7(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function As(t,e){return function(n){n&&(t[e]=n)}}function qM(t,e,n){return function(r){r&&(t[e][n]=r)}}function MI(t,e){return function(n){var r=n.prototype;t.forEach(function(i){e(r,i)})}}function M7(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(i){var a=e[i]||i;a in n||(n[a]=function(){for(var o,c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];var d=(o=this[r])[i].apply(o,c);return d===this[r]?this:d})})}}var P7="function",O7="object",V7="string",j7="number",jw="undefined",HM=typeof window!==jw,z7=typeof document!==jw&&document,L7=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Bn=1e-7,xm={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function B7(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}function T0(t,e,n,r){return(t*r+e*n)/(n+r)}function _v(t){return typeof t===jw}function la(t){return t&&typeof t===O7}function Fn(t){return Array.isArray(t)}function Qr(t){return typeof t===V7}function id(t){return typeof t===j7}function zw(t){return typeof t===P7}function U7(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function $M(t,e,n,r,i){var a=Lw(t,e,n);return a?n:F7(t,e,n+1,r,i)}function Lw(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function F7(t,e,n,r,i){for(var a=function(d){var h=e[d].trim();if(h===t.close&&!Lw(t,e,d))return{value:d};var g=d,m=Zr(i,function(x){var _=x.open;return _===h});if(m&&(g=$M(m,e,d,r,i)),g===-1)return o=d,"break";d=g,o=d},o,c=n;c<r;++c){var u=a(c);if(c=o,typeof u=="object")return u.value;if(u==="break")break}return-1}function Bw(t,e){var n=Qr(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,o=n.isSeparateOnlyOpenClose,c=n.isSeparateOpenClose,u=c===void 0?o:c,d=n.openCloseCharacters,h=d===void 0?L7:d,g=h.map(function(A){var C=A.open,k=A.close;return C===k?C:C+"|"+k}).join("|"),m="(\\s*"+i+"\\s*|"+g+"|\\s+)",x=new RegExp(m,"g"),_=t.split(x).filter(function(A){return A&&A!=="undefined"}),E=_.length,S=[],T=[];function D(){return T.length?(S.push(T.join("")),T=[],!0):!1}for(var R=function(A){var C=_[A].trim(),k=A,M=Zr(h,function(P){var W=P.open;return W===C}),U=Zr(h,function(P){var W=P.close;return W===C});if(M){if(k=$M(M,_,A,E,h),k!==-1&&u)return D()&&a||(S.push(_.slice(A,k+1).join("")),A=k,a)?(O=A,"break"):(O=A,"continue")}else if(U&&!Lw(U,_,A)){var z=B7(h);return z.splice(h.indexOf(U),1),{value:Bw(t,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:o,isSeparateOpenClose:u,openCloseCharacters:z})}}else if(U7(C,i)&&!o)return D(),a?(O=A,"break"):(O=A,"continue");k===-1&&(k=E-1),T.push(_.slice(A,k+1).join("")),A=k,O=A},O,L=0;L<E;++L){var j=R(L);if(L=O,typeof j=="object")return j.value;if(j==="break")break}return T.length&&S.push(T.join("")),S}function Wo(t){return Bw(t,"")}function Jl(t){return Bw(t,",")}function YM(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function yp(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function G7(t){return t.replace(/[\s-_]+([^\s-_])/g,function(e,n){return n.toUpperCase()})}function Qm(t,e){return t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function Fh(){return Date.now?Date.now():new Date().getTime()}function Ms(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function Zr(t,e,n){var r=Ms(t,e);return r>-1?t[r]:n}var KM=(function(){var t=Fh(),e=HM&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=Fh(),i=setTimeout(function(){n(r-t)},1e3/60);return i}})(),q7=(function(){var t=HM&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}})();function Ps(t){return Object.keys(t)}function H7(t){var e=Ps(t);return e.map(function(n){return t[n]})}function Kt(t,e){var n=yp(t),r=n.value,i=n.unit;if(la(e)){var a=e[i];if(a){if(zw(a))return a(r);if(xm[i])return xm[i](r,a)}}else if(i==="%")return r*e/100;return xm[i]?xm[i](r):r}function Ux(t,e,n){return Math.max(e,Math.min(t,n))}function PI(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[it(e[0],Bn),it(e[0]/r,Bn)],[it(e[1]*r,Bn),it(e[1],Bn)]].filter(function(i){return i.every(function(a,o){var c=e[o],u=it(c,Bn);return n?a<=c||a<=u:a>=c||a>=u})})[0]||t}function XM(t,e,n,r){if(!r)return t.map(function(x,_){return Ux(x,e[_],n[_])});var i=t[0],a=t[1],o=r===!0?i/a:r,c=PI(t,e,!1,o),u=c[0],d=c[1],h=PI(t,n,!0,o),g=h[0],m=h[1];return i<u||a<d?(i=u,a=d):(i>g||a>m)&&(i=g,a=m),[i,a]}function $7(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function Fx(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function In(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function Y7(t){return[0,1].map(function(e){return Fx(t.map(function(n){return n[e]}))})}function OI(t){var e=Y7(t),n=In(e,t[0]),r=In(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function Cs(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function it(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function VI(t,e){return t.forEach(function(n,r){t[r]=it(t[r],e)}),t}function K7(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function WM(t){return t.reduce(function(e,n){return e.concat(n)},[])}function QM(t,e){t.indexOf(e)===-1&&t.push(e)}function Xn(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function ZM(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function JM(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function cr(t,e,n,r){t.addEventListener(e,n,r)}function $n(t,e,n,r){t.removeEventListener(e,n,r)}function Nd(t){return t?.ownerDocument||z7}function Uw(t){return Nd(t).documentElement}function ol(t){return Nd(t).body}function Bo(t){var e;return((e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function eP(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function Md(t){return la(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}var X7=(function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var i=this.keys,a=this.values,o=i.indexOf(n),c=o===-1?i.length:o;i[c]=n,a[c]=r},t})(),W7=(function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t})(),Q7=typeof Map=="function",Z7=(function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t})();function J7(t,e){var n=[],r=[];return t.forEach(function(i){var a=i[0],o=i[1],c=new Z7;n[a]=c,r[o]=c}),n.forEach(function(i,a){i.connect(n[a-1])}),t.filter(function(i,a){return!e[a]}).map(function(i,a){var o=i[0],c=i[1];if(o===c)return[0,0];var u=n[o],d=r[c-1],h=u.getIndex();u.disconnect(),d?u.connect(d,d.next):u.connect(void 0,n[0]);var g=u.getIndex();return[h,g]})}var eG=(function(){function t(n,r,i,a,o,c,u,d){this.prevList=n,this.list=r,this.added=i,this.removed=a,this.changed=o,this.maintained=c,this.changedBeforeAdded=u,this.fixed=d}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=J7(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=n.filter(function(a,o){var c=a[0],u=a[1],d=r[o],h=d[0],g=d[1];if(c!==u)return i.push([h,g]),!0}),this.cachePureChanged=i},t})();function bp(t,e,n){var r=Q7?Map:n?W7:X7,i=n||function(D){return D},a=[],o=[],c=[],u=t.map(i),d=e.map(i),h=new r,g=new r,m=[],x=[],_={},E=[],S=0,T=0;return u.forEach(function(D,R){h.set(D,R)}),d.forEach(function(D,R){g.set(D,R)}),u.forEach(function(D,R){var O=g.get(D);typeof O>"u"?(++T,o.push(R)):_[O]=T}),d.forEach(function(D,R){var O=h.get(D);typeof O>"u"?(a.push(R),++S):(c.push([O,R]),T=_[R]||0,m.push([O-T,R-S]),x.push(R===O),O!==R&&E.push([O,R]))}),o.reverse(),new eG(t,e,a,o,E,c,m,x)}var tG=(function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),i=bp(this.list,r,this.findKeyCallback);return this.list=r,i},t})(),Gx=function(t,e){return Gx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Gx(t,e)};function xp(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Gx(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Da=function(){return Da=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Da.apply(this,arguments)};function tP(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function jI(t,e,n){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function zI(t){var e=0;return t.map(function(n){return n==null?"$compat".concat(++e):"".concat(n)})}function nP(t){var e=[];return t.forEach(function(n){e=e.concat(Fn(n)?nP(n):n)}),e}function R1(t,e){if(!e)return t;for(var n in e)_v(t[n])&&(t[n]=e[n]);return t}function A0(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function LI(t){var e=t.className,n=tP(t,["className"]);return e!=null&&(n.class=e),delete n.style,delete n.children,n}function BI(t){var e={},n={};for(var r in t)r.indexOf("on")===0?n[r]=t[r]:e[r]=t[r];return[e,n]}function wv(t){if(!t)return null;var e=t.b;return Md(e)?e:wv(t.c)}function rP(t){var e=t.parentNode;e&&e.removeChild(t)}function iP(t){t.forEach(function(e){e()})}function nG(){return this.constructor(this.props,this.context)}var Fw=0,Ev=(function(){function t(n,r,i,a,o,c,u){u===void 0&&(u={}),this.t=n,this.d=r,this.k=i,this.i=a,this.c=o,this.ref=c,this.ps=u,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=t.prototype;return e.s=function(){return!0},e.u=function(n,r,i,a,o){var c=this,u=c.d,d=H7(r).filter(function(_){return _.$_req}),h=nP(d.map(function(_){return _.$_subs})),g=Zr(h,function(_){return _.d===u});if(c.b&&!Qr(i)&&!o&&!c.s(i.props,a)&&!g){var m=h.reduce(function(_,E){var S=E.d;return _[0]?_[0].d===S&&_.push(E):S>u&&_.push(E),_},[]);return m.forEach(function(_){_p(_,_._ps,[_.o],n,r,!0)}),!1}c.o=i,c.ss(a);var x=c.ps;return Qr(i)||(c.ps=i.props,c.ref=i.ref),Gw(this),c.r(n,r,c.b?x:{},a),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var n=this,r=n.ref,i=n.fr;r&&r(i?i.current:n.b)},t})();function aP(){return Object.__CROACT_CURRENT_INSTNACE__}function rG(){return Fw}function iG(t){Fw=t}function Gw(t){return Object.__CROACT_CURRENT_INSTNACE__=t,Fw=0,t}var qw=(function(){function t(n,r){n===void 0&&(n={}),this.props=n,this.context=r,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=t.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(n,r){return this.props!==n||this.state!==r},e.setState=function(n,r,i){var a=this;a.$_timer||(a.$_state={}),clearTimeout(a.$_timer),a.$_timer=0,a.$_state=Da(Da({},a.$_state),n),i?a.$_setState(r,i):a.$_timer=window.setTimeout(function(){a.$_timer=0,a.$_setState(r,i)})},e.forceUpdate=function(n){this.setState({},n,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(n,r){},e.componentWillUnmount=function(){},e.$_setState=function(n,r){var i=[],a=this.$_p,o=_p(a.c,[a],[a.o],i,a._cs,Da(Da({},this.state),this.$_state),r);o&&(n&&i.push(n),iP(i),Gw(null))},t})(),sP=(function(t){xp(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.shouldComponentUpdate=function(r,i){return A0(this.props,r)||A0(this.state,i)},e})(qw);function oP(t){var e=function(n){e.current=n};return e.current=t,e}function aG(t){return t._fr=!0,t}function sG(t,e,n,r){var i,a;return!((i=t?.prototype)===null||i===void 0)&&i.render?a=new t(e,n):(a=new qw(e,n),a.constructor=t,t._fr?(r.fr=oP(),a.render=function(){return this.constructor(this.props,r.fr)}):a.render=nG),a.$_p=r,a}var oG=(function(t){xp(e,t);function e(r,i,a,o,c,u,d){d===void 0&&(d={});var h=t.call(this,r,i,a,o,c,u,R1(d,r.defaultProps))||this;return h.typ="comp",h._usefs=[],h._uefs=[],h._defs=[],h}var n=e.prototype;return n.s=function(r,i){var a=this.b;return a.shouldComponentUpdate(R1(r,this.t.defaultProps),i||a.state)!==!1},n.r=function(r,i,a){var o,c,u=this,d=u.t;u.ps=R1(u.ps,u.t.defaultProps);var h=u.ps,g=!u.b,m=d.contextType,x=u.b,_=m?.get(u);u._cs=i,g?(x=sG(d,h,_,u),u.b=x):(x.props=h,x.context=_);var E=x.state;u._usefs=[],u._uefs=[];var S=x.render();((c=(o=S?.props)===null||o===void 0?void 0:o.children)===null||c===void 0?void 0:c.length)===0&&(S.props.children=u.ps.children);var T=Da(Da({},i),x.$_cs);_p(u,u._ps,S?[S]:[],r,T),g?u._uefs.push(function(){m?.register(u),x.componentDidMount()}):u._uefs.push(function(){x.componentDidUpdate(a,E)}),r.push(function(){u._usefs.forEach(function(D){D()}),g?u.md():u.ud(),u._defs=u._uefs.map(function(D){return D()})})},n.ss=function(r){var i=this.b;!i||!r||(i.state=r)},n.un=function(){var r,i=this;i._ps.forEach(function(o){o.un()});var a=i.t;(r=a.contextType)===null||r===void 0||r.unregister(i),clearTimeout(i.b.$_timer),i._defs.forEach(function(o){o&&o()}),i.b.componentWillUnmount()},e})(Ev);function lG(t,e,n){var r=Hw(LI(t),LI(e)),i=r.added,a=r.removed,o=r.changed;for(var c in i)n.setAttribute(c,i[c]);for(var u in o)n.setAttribute(u,o[u][1]);for(var d in a)n.removeAttribute(d)}function cG(t,e,n){var r=Hw(t,e),i=r.added,a=r.removed;for(var o in a)n.e(o,!0);for(var c in i)n.e(c)}function Hw(t,e){var n=Ps(t),r=Ps(e),i=bp(n,r,function(u){return u}),a={},o={},c={};return i.added.forEach(function(u){var d=r[u];a[d]=e[d]}),i.removed.forEach(function(u){var d=n[u];o[d]=t[d]}),i.maintained.forEach(function(u){var d=u[0],h=n[d],g=[t[h],e[h]];t[h]!==e[h]&&(c[h]=g)}),{added:a,removed:o,changed:c}}function uG(t,e,n){var r=n.style,i=Hw(t,e),a=i.added,o=i.removed,c=i.changed;for(var u in a){var d=Qm(u,"-");r.setProperty(d,a[u])}for(var u in c){var h=Qm(u,"-");r.setProperty(h,c[u][1])}for(var u in o){var g=Qm(u,"-");r.removeProperty(g)}}function dG(t){return t.replace(/^on/g,"").toLowerCase()}var fG=(function(t){xp(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="elem",r._es={},r._svg=!1,r}var n=e.prototype;return n.e=function(r,i){var a=this,o=a._es,c=a.b,u=dG(r);i?($n(c,u,o[r]),delete o[r]):(o[r]=function(d){var h,g;(g=(h=a.ps)[r])===null||g===void 0||g.call(h,d)},cr(c,u,o[r]))},n.s=function(r){return A0(this.ps,r)},n.r=function(r,i,a){var o,c=this,u=!c.b,d=c.ps;if(u){var h=wv(c.c),g=!1;c._svg||c.t==="svg"?g=!0:g=h&&h.ownerSVGElement,c._svg=g;var m=(o=c._hyd)===null||o===void 0?void 0:o.splice(0,1)[0],x=c.t;if(m)c._hyd=[].slice.call(m.children||[]);else{var _=Nd(h);g?m=_.createElementNS("http://www.w3.org/2000/svg",x):m=_.createElement(x)}c.b=m}_p(c,c._ps,d.children,r,i);var E=c.b,S=BI(a),T=S[0],D=S[1],R=BI(d),O=R[0],L=R[1];return lG(T,O,E),cG(D,L,c),uG(a.style||{},d.style||{},E),r.push(function(){u?c.md():c.ud()}),!0},n.un=function(){var r=this,i=r._es,a=r.b;for(var o in i)$n(a,o,i[o]);r._ps.forEach(function(c){c.un()}),r._es={},r._sel||rP(a)},e})(Ev);function Gh(t){if(!t||Md(t))return t;var e=t.$_p._ps;return e.length?Gh(e[0].b):null}function lP(t){if(t){if(t.b&&Md(t.b))return t;var e=t._ps;return e.length?lP(e[0]):null}}function aa(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},a=i.key,o=i.ref,c=tP(i,["key","ref"]);return{type:t,key:a,ref:o,props:Da(Da({},c),{children:WM(n).filter(function(u){return u!=null&&u!==!1})})}}var cP=(function(t){xp(e,t);function e(r,i){i===void 0&&(i=0);var a=t.call(this,"container",i,"container",0,null)||this;return a.typ="container",a.b=r,a}var n=e.prototype;return n.r=function(){return!0},n.un=function(){},e})(Ev),hG=(function(t){xp(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="text",r}var n=e.prototype;return n.r=function(r){var i,a=this,o=!a.b;if(o){var c=wv(a.c),u=(i=a._hyd)===null||i===void 0?void 0:i.splice(0,1)[0];a.b=u||Nd(c).createTextNode(a.t.replace("text_",""))}return r.push(function(){o?a.md():a.ud()}),!0},n.un=function(){rP(this.b)},e})(Ev);function pG(t,e,n){var r=n.map(function(u){return Qr(u)?null:u.key}),i=zI(e.map(function(u){return u.k})),a=zI(r),o=bp(i,a,function(u){return u});o.removed.forEach(function(u){e.splice(u,1)[0].un()}),o.ordered.forEach(function(u){var d=u[0],h=u[1],g=e.splice(d,1)[0];e.splice(h,0,g);var m=Gh(g.b),x=Gh(e[h+1]&&e[h+1].b);m&&m.parentNode.insertBefore(m,x)}),o.added.forEach(function(u){e.splice(u,0,UI(n[u],r[u],u,t))});var c=o.maintained.filter(function(u){u[0];var d=u[1],h=n[d],g=e[d],m=Qr(h)?"text_".concat(h):h.type;return m!==g.t?(g.un(),e.splice(d,1,UI(h,r[d],d,t)),!0):(g.i=d,!1)});return jI(jI([],o.added,!0),c.map(function(u){u[0];var d=u[1];return d}))}function gG(t,e){for(var n=t._ps,r=n.length,i=e.i+1;i<r;++i){var a=Gh(n[i].b);if(a)return a}return null}function UI(t,e,n,r){var i=r.d+1;if(Qr(t)||id(t))return new hG("text_".concat(t),i,e,n,r,null,{});var a=t.type,o=typeof a=="string"?fG:oG;return new o(a,i,e,n,r,t.ref,t.props)}function _p(t,e,n,r,i,a,o){var c=pG(t,e,n),u=t._hyd,d=e.filter(function(g,m){return g._hyd=u,g.u(r,i,n[m],a,o)});t.typ==="container"&&t._sel&&e.forEach(function(g){var m=lP(g);m&&(m._sel=!0)}),t._hyd=null;var h=wv(t);return h&&c.reverse().forEach(function(g){var m=e[g],x=Gh(m.b);if(x&&h!==x&&!x.parentNode){var _=gG(t,m);h.insertBefore(x,_)}}),d.length>0}function mG(t,e,n,r){n===void 0&&(n=e.__CROACT__),r===void 0&&(r={});var i=!!n;n||(n=new cP(e));var a=[];return _p(n,n._ps,t?[t]:[],a,r,void 0,void 0),iP(a),Gw(null),i||(e.__CROACT__=n),n}function FI(t,e,n){return!n&&t&&(n=new cP(e.parentElement),n._hyd=[e],n._sel=!0),mG(t,e,n),n}function uP(t){var e=aP(),n=e._hs||(e._hs=[]),r=rG(),i=n[r];if(iG(r+1),i){if(!A0(i.deps,t.deps))return i.updated=!1,i;n[r]=t}else n.push(t);return t.value=t.func(),t.updated=!0,t}function vG(t,e){var n=uP({func:t,deps:e});return n.value}function yG(t){return vG(function(){return oP(t)},[])}function dP(t,e,n){var r=aP(),i=uP({func:function(){return t},deps:e}),a=n?r._usefs:r._uefs;i.updated?a.push(function(){return i.effect&&i.effect(),i.effect=t(),i.effect}):a.push(function(){return i.effect})}function bG(t,e,n){dP(function(){t?.(e())},n,!0)}function $w(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function fP(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function hP(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function Yw(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function xG(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function _G(t,e){var n=Yw("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function qx(t){return t.replace(/_/g,".")}function th(t,e){var n=null,r="-1";return $w(t,function(i){var a=Yw("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!a||i.brand?!1:(n=i,r=a[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=_G(i.versionTest.toLowerCase(),e)||r),r=qx(r),!0)}),{preset:n,version:r}}function _m(t,e){var n={brand:"",version:"-1"};return $w(t,function(r){var i=pP(e,r);return i?(n.brand=r.id,n.version=r.versionAlias||i.version,n.version!=="-1"):!1}),n}function pP(t,e){return fP(t,function(n){var r=n.brand;return Yw(""+e.test,r.toLowerCase())})}var gP=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],mP=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],Hx=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],vP=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],yP=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function bP(t){return!!th(vP,t).preset}function wG(t){var e=hP(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:bP(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=th(gP,e),o=a.preset,c=a.version,u=th(yP,e),d=u.preset,h=u.version,g=th(mP,e);if(r.chromium=!!g.preset,r.chromiumVersion=g.version,!r.chromium){var m=th(Hx,e);r.webkit=!!m.preset,r.webkitVersion=m.version}return d&&(i.name=d.id,i.version=h,i.majorVersion=parseInt(h,10)),o&&(r.name=o.id,r.version=c,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}function EG(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=n[0],a=(e.platform||navigator.platform).toLowerCase(),o={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!_m(vP,n).brand||bP(hP())},c={name:"unknown",version:"-1",majorVersion:-1};o.webkit=!o.chromium&&$w(Hx,function(m){return pP(n,m)});var u=_m(mP,n);if(o.chromium=!!u.brand,o.chromiumVersion=u.version||"-1",!o.chromium){var d=_m(Hx,n);o.webkit=!!d.brand,o.webkitVersion=d.version||"-1"}var h=fP(yP,function(m){return new RegExp(""+m.test,"g").exec(a)});c.name=h?h.id:"";{var g=_m(gP,n);o.name=g.brand||o.name,o.version=g.brand&&t?t.uaFullVersion:g.version}return o.webkit&&(c.name=r?"ios":"mac"),c.name==="ios"&&o.webview&&(o.version="-1"),c.version=qx(c.version),o.version=qx(o.version),c.majorVersion=parseInt(c.version,10),o.majorVersion=parseInt(o.version,10),{browser:o,os:c,isMobile:r,isHints:!0}}function SG(t){return xG()?EG():wG(t)}function TG(t,e,n,r,i,a){for(var o=0;o<i;++o){var c=n+o*i,u=r+o*i;t[c]+=t[u]*a,e[c]+=e[u]*a}}function AG(t,e,n,r,i){for(var a=0;a<i;++a){var o=n+a*i,c=r+a*i,u=t[o],d=e[o];t[o]=t[c],t[c]=u,e[o]=e[c],e[c]=d}}function CG(t,e,n,r,i){for(var a=0;a<r;++a){var o=n+a*r;t[o]/=i,e[o]/=i}}function xP(t,e,n){for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function qa(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=nn(e),i=0;i<e;++i){var a=e*i+i;if(!it(n[a],Bn)){for(var o=i+1;o<e;++o)if(n[e*i+o]){AG(n,r,i,o,e);break}}if(!it(n[a],Bn))return[];CG(n,r,i,e,n[a]);for(var o=0;o<e;++o){var c=o,u=o+i*e,d=n[u];!it(d,Bn)||i===o||TG(n,r,c,i,e,-d)}}return r}function IG(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}function _P(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function RG(t,e){for(var n=nn(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function fc(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function ca(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=nn(n),i=Math.min(e,n),a=0;a<i-1;++a){for(var o=0;o<i-1;++o)r[a*n+o]=t[a*e+o];r[(a+1)*n-1]=t[(a+1)*e-1],r[(n-1)*n+a]=t[(e-1)*e+a]}return r[n*n-1]=t[e*e-1],r}function C0(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=nn(t);return e.forEach(function(i){r=Xt(r,i,t)}),r}function Xt(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,a=e.length/i;if(i){if(!a)return t}else return e;for(var o=0;o<n;++o)for(var c=0;c<a;++c){r[c*n+o]=0;for(var u=0;u<i;++u)r[c*n+o]+=t[u*n+o]*e[c*i+u]}return r}function At(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function Ge(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function DG(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function wP(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function Ar(t,e,n){n===void 0&&(n=e.length);var r=Xt(t,e,n),i=r[n-1];return r.map(function(a){return a/i})}function kG(t,e){return Xt(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function NG(t,e){return Xt(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function MG(t,e){return Xt(t,Ep(e,4))}function wm(t,e){var n=e[0],r=n===void 0?1:n,i=e[1],a=i===void 0?1:i,o=e[2],c=o===void 0?1:o;return Xt(t,[r,0,0,0,0,a,0,0,0,0,c,0,0,0,0,1],4)}function wp(t,e){return Ar(Ep(e,3),fc(t,3))}function D1(t,e){var n=e[0],r=n===void 0?0:n,i=e[1],a=i===void 0?0:i,o=e[2],c=o===void 0?0:o;return Xt(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,a,c,1],4)}function GI(t,e){return Xt(t,e,4)}function Ep(t,e){var n=Math.cos(t),r=Math.sin(t),i=nn(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function nn(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function Kw(t,e){for(var n=nn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function hc(t,e){for(var n=nn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function Xw(t,e,n,r,i,a,o,c){var u=t[0],d=t[1],h=e[0],g=e[1],m=n[0],x=n[1],_=r[0],E=r[1],S=i[0],T=i[1],D=a[0],R=a[1],O=o[0],L=o[1],j=c[0],A=c[1],C=[u,0,h,0,m,0,_,0,d,0,g,0,x,0,E,0,1,0,1,0,1,0,1,0,0,u,0,h,0,m,0,_,0,d,0,g,0,x,0,E,0,1,0,1,0,1,0,1,-S*u,-T*u,-D*h,-R*h,-O*m,-L*m,-j*_,-A*_,-S*d,-T*d,-D*g,-R*g,-O*x,-L*x,-j*E,-A*E],k=qa(C,8);if(!k.length)return[];var M=Xt(k,[S,T,D,R,O,L,j,A],8);return M[8]=1,ca(IG(M),3,4)}var mh=function(){return mh=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mh.apply(this,arguments)};function PG(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function qh(t,e){return e===void 0&&(e=0),Ru(ad(t,e))}function OG(t,e){var n=Ar(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function Ru(t){var e=PG();return t.forEach(function(n){var r=n.matrixFunction,i=n.functionValue;r&&(e=r(e,i))}),e}function ad(t,e){e===void 0&&(e=0);var n=Fn(t)?t:Wo(t);return n.map(function(r){var i=YM(r),a=i.prefix,o=i.value,c=null,u=a,d="";if(a==="translate"||a==="translateX"||a==="translate3d"){var h=la(e)?mh(mh({},e),{"o%":e["%"]}):{"%":e,"o%":e},g=Jl(o).map(function(P,W){return W===0&&"x%"in h?h["%"]=e["x%"]:W===1&&"y%"in h?h["%"]=e["y%"]:h["%"]=e["o%"],Kt(P,h)}),m=g[0],x=g[1],_=x===void 0?0:x,E=g[2],S=E===void 0?0:E;c=D1,d=[m,_,S]}else if(a==="translateY"){var T=la(e)?mh({"%":e["y%"]},e):{"%":e},_=Kt(o,T);c=D1,d=[0,_,0]}else if(a==="translateZ"){var S=parseFloat(o);c=D1,d=[0,0,S]}else if(a==="scale"||a==="scale3d"){var D=Jl(o).map(function(P){return parseFloat(P)}),R=D[0],O=D[1],L=O===void 0?R:O,j=D[2],A=j===void 0?1:j;c=wm,d=[R,L,A]}else if(a==="scaleX"){var R=parseFloat(o);c=wm,d=[R,1,1]}else if(a==="scaleY"){var L=parseFloat(o);c=wm,d=[1,L,1]}else if(a==="scaleZ"){var A=parseFloat(o);c=wm,d=[1,1,A]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var C=yp(o),k=C.unit,M=C.value,U=k==="rad"?M:M*Math.PI/180;a==="rotate"||a==="rotateZ"?(u="rotateZ",c=MG):a==="rotateX"?c=kG:a==="rotateY"&&(c=NG),d=U}else if(a==="matrix3d")c=GI,d=Jl(o).map(function(P){return parseFloat(P)});else if(a==="matrix"){var z=Jl(o).map(function(P){return parseFloat(P)});c=GI,d=[z[0],z[1],0,0,z[2],z[3],0,0,0,0,1,0,z[4],z[5],0,1]}else u="";return{name:a,functionName:u,value:o,matrixFunction:c,functionValue:d}})}var $x=function(t,e){return $x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},$x(t,e)};function VG(t,e){$x(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var EP=typeof Map=="function"?void 0:(function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}})(),SP=(function(t){VG(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,EP)||this}return e})(tG);function jG(t,e){return bp(t,e,EP)}var Yx=function(){return Yx=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Yx.apply(this,arguments)};function zG(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}var Sv=(function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(la(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(la(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var a=this._events[n];if(a){var o=Ms(a,function(c){return c.listener===r});o>-1&&a.splice(o,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(a){i._addEvent(n,a,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var a=this._events[n];if(!n||!a)return!0;var o=!1;return r.eventType=n,r.stop=function(){o=!0},r.currentTarget=this,zG(a).forEach(function(c){c.listener(r),c.once&&i.off(n,c.listener)}),!o},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var a=this._events;a[n]=a[n]||[];var o=a[n];o.push(Yx({listener:r},i))},t})();var Kx=function(t,e){return Kx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Kx(t,e)};function LG(t,e){Kx(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Uu=function(){return Uu=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Uu.apply(this,arguments)};function BG(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function qI(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function Em(t){if(t){if(Qr(t))return document.querySelector(t)}else return null;if(zw(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var UG=(function(t){LG(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(a){r.checkScroll({container:i.container,inputEvent:a})}})},r}var n=e.prototype;return n.dragStart=function(r,i){var a=Em(i.container);if(!a){this._flag=!1;return}var o=0,c=0,u=0,d=0;if(a===document.body)u=window.innerWidth,d=window.innerHeight;else{var h=a.getBoundingClientRect();o=h.top,c=h.left,u=h.width,d=h.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:o,left:c,width:u,height:d},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},n.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var a=r.clientX,o=r.clientY,c=i.threshold,u=c===void 0?0:c,d=this,h=d._startRect,g=d._startPos;this._currentOptions=i;var m=[0,0];return h.top>o-u?(g[1]>h.top||o<g[1])&&(m[1]=-1):h.top+h.height<o+u&&(g[1]<h.top+h.height||o>g[1])&&(m[1]=1),h.left>a-u?(g[0]>h.left||a<g[0])&&(m[0]=-1):h.left+h.width<a+u&&(g[0]<h.left+h.width||a>g[0])&&(m[0]=1),!m[0]&&!m[1]?!1:this._continueDrag(Uu(Uu({},i),{direction:m,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var i=this;if(this._isWait)return!1;var a=r.prevScrollPos,o=a===void 0?this._prevScrollPos:a,c=r.direction,u=r.throttleTime,d=u===void 0?0:u,h=r.inputEvent,g=r.isDrag,m=this._getScrollPosition(c||[0,0],r),x=m[0]-o[0],_=m[1]-o[1],E=c||[x?Math.abs(x)/x:0,_?Math.abs(_)/_:0];return this._prevScrollPos=m,this._lock=!1,!x&&!_?!1:(this.emit("move",{offsetX:E[0]?x:0,offsetY:E[1]?_:0,inputEvent:h}),d&&g&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},d)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,i){var a=i.container,o=i.getScrollPosition,c=o===void 0?BG:o;return c({container:Em(a),direction:r})},n._continueDrag=function(r){var i=this,a,o=r.container,c=r.direction,u=r.throttleTime,d=r.useScroll,h=r.isDrag,g=r.inputEvent;if(!(!this._flag||h&&this._isWait)){var m=Fh(),x=Math.max(u+this._prevTime-m,0);if(x>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},x),!1;this._prevTime=m;var _=this._getScrollPosition(c,r);this._prevScrollPos=_,h&&(this._isWait=!0),d||(this._lock=!0);var E={container:Em(o),direction:c,inputEvent:g};return(a=r.requestScroll)===null||a===void 0||a.call(r,E),this.emit("scroll",E),this._isWait=!1,d||this.checkScroll(Uu(Uu({},r),{prevScrollPos:_,direction:c,inputEvent:g}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var a=i===!0?qI:i,o=Em(r.container);i===!0&&(o===document.body||o===document.documentElement)?this._unregister=qI(window,this._onScroll):this._unregister=a(o,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e})(Sv);function FG(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}function $r(t){return it(t,Bn)}function GG(t,e){return t.every(function(n,r){return $r(n-e[r])===0})}function qG(t,e){return!$r(t[0]-e[0])&&!$r(t[1]-e[1])}function TP(t){return t.length<3?0:Math.abs($7(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function HI(t,e){var n=e.width,r=e.height,i=e.left,a=e.top,o=pc(t),c=o.minX,u=o.minY,d=o.maxX,h=o.maxY,g=n/(d-c),m=r/(h-u);return t.map(function(x){return[i+(x[0]-c)*g,a+(x[1]-u)*m]})}function pc(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function Xx(t,e,n){var r=t[0],i=t[1],a=pc(e),o=a.minX,c=a.maxX,u=[[o,i],[c,i]],d=I0(u[0],u[1]),h=Wx(e),g=[];if(h.forEach(function(_){var E=I0(_[0],_[1]),S=_[0];if(GG(d,E))g.push({pos:t,line:_,type:"line"});else{var T=AP(Ww(d,E),[u,_]);T.forEach(function(D){_.some(function(R){return qG(R,D)})?g.push({pos:D,line:_,type:"point"}):$r(S[1]-i)!==0&&g.push({pos:D,line:_,type:"intersection"})})}}),Zr(g,function(_){return _[0]===r}))return!0;var m=0,x={};return g.forEach(function(_){var E=_.pos,S=_.type,T=_.line;if(!(E[0]>r))if(S==="intersection")++m;else{if(S==="line")return;if(S==="point"){var D=Zr(T,function(L){return L[1]!==i}),R=x[E[0]],O=D[1]>i?1:-1;R?R!==O&&++m:x[E[0]]=O}}}),m%2===1}function I0(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],o=i-n,c=a-r;Math.abs(o)<Bn&&(o=0),Math.abs(c)<Bn&&(c=0);var u=0,d=0,h=0;return o?c?(u=-c/o,d=1,h=-u*n-r):(d=1,h=-r):c&&(u=-1,h=n),[u,d,h]}function Ww(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],o=e[1],c=e[2],u=n===0&&a===0,d=r===0&&o===0,h=[];if(u&&d)return[];if(u){var g=-i/r,m=-c/o;return g!==m?[]:[[-1/0,g],[1/0,g]]}else if(d){var x=-i/n,_=-c/a;return x!==_?[]:[[x,-1/0],[x,1/0]]}else if(n===0){var E=-i/r,S=-(o*E+c)/a;h=[[S,E]]}else if(a===0){var E=-c/o,S=-(r*E+i)/n;h=[[S,E]]}else if(r===0){var S=-i/n,E=-(a*S+c)/o;h=[[S,E]]}else if(o===0){var S=-c/a,E=-(n*S+i)/r;h=[[S,E]]}else{var S=(r*c-o*i)/(o*n-r*a),E=-(n*S+i)/r;h=[[S,E]]}return h.map(function(T){return[T[0],T[1]]})}function AP(t,e){var n=e.map(function(g){return[0,1].map(function(m){return[Math.min(g[0][m],g[1][m]),Math.max(g[0][m],g[1][m])]})}),r=[];if(t.length===2){var i=t[0],a=i[0],o=i[1];if($r(a-t[1][0])){if(!$r(o-t[1][1])){var d=Math.max.apply(Math,n.map(function(g){return g[0][0]})),h=Math.min.apply(Math,n.map(function(g){return g[0][1]}));if($r(d-h)>0)return[];r=[[d,o],[h,o]]}}else{var c=Math.max.apply(Math,n.map(function(g){return g[1][0]})),u=Math.min.apply(Math,n.map(function(g){return g[1][1]}));if($r(c-u)>0)return[];r=[[a,c],[a,u]]}}return r.length||(r=t.filter(function(g){var m=g[0],x=g[1];return n.every(function(_){return 0<=$r(m-_[0][0])&&0<=$r(_[0][1]-m)&&0<=$r(x-_[1][0])&&0<=$r(_[1][1]-x)})})),r.map(function(g){return[$r(g[0]),$r(g[1])]})}function Wx(t){return FG(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function HG(t,e){var n=t.slice(),r=e.slice();OI(n)===-1&&n.reverse(),OI(r)===-1&&r.reverse();var i=Wx(n),a=Wx(r),o=i.map(function(h){return I0(h[0],h[1])}),c=a.map(function(h){return I0(h[0],h[1])}),u=[];o.forEach(function(h,g){var m=i[g],x=[];c.forEach(function(_,E){var S=Ww(h,_),T=AP(S,[m,a[E]]);x.push.apply(x,T.map(function(D){return{index1:g,index2:E,pos:D,type:"intersection"}}))}),x.sort(function(_,E){return Cs(m[0],_.pos)-Cs(m[0],E.pos)}),u.push.apply(u,x),Xx(m[1],r)&&u.push({index1:g,index2:-1,pos:m[1],type:"inside"})}),a.forEach(function(h,g){if(Xx(h[1],n)){var m=!1,x=Ms(u,function(_){var E=_.index2;return E===g?(m=!0,!1):!!m});x===-1&&(m=!1,x=Ms(u,function(_){var E=_.index1,S=_.index2;return E===-1&&S+1===g?(m=!0,!1):!!m})),x===-1?u.push({index1:-1,index2:g,pos:h[1],type:"inside"}):u.splice(x,0,{index1:-1,index2:g,pos:h[1],type:"inside"})}});var d={};return u.filter(function(h){var g=h.pos,m=g[0]+"x"+g[1];return d[m]?!1:(d[m]=!0,!0)})}function $G(t,e){var n=HG(t,e);return n.map(function(r){var i=r.pos;return i})}function YG(t,e){var n=$G(t,e);return TP(n)}var Qx=function(t,e){return Qx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Qx(t,e)};function KG(t,e){Qx(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var jn=function(){return jn=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},jn.apply(this,arguments)};function XG(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function k1(t){return XG([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function WG(t){return t.touches&&t.touches.length>=2}function Sm(t){return t?t.touches?ZG(t.touches):[CP(t)]:[]}function QG(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function $I(t,e,n){var r=n.length,i=vh(t,r),a=i.clientX,o=i.clientY,c=i.originalClientX,u=i.originalClientY,d=vh(e,r),h=d.clientX,g=d.clientY,m=vh(n,r),x=m.clientX,_=m.clientY,E=a-h,S=o-g,T=a-x,D=o-_;return{clientX:c,clientY:u,deltaX:E,deltaY:S,distX:T,distY:D}}function N1(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function ZG(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(CP(t[r]));return n}function CP(t){return{clientX:t.clientX,clientY:t.clientY}}function vh(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(t.length,e),i=0;i<r;++i){var a=t[i];n.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,n.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,n.clientX+=a.clientX,n.clientY+=a.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var M1=(function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),k1(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),k1(e)-k1(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=$I(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,a=r.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var n=this.prevClients,r=this.startClients,i=Math.min(this.length,n.length),a=[],o=0;o<i;++o)a[o]=$I([e[o]],[n[o]],[r[o]]);return a},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=vh(e,this.length),i=vh(this.prevClients,this.length),a=r.clientX-i.clientX,o=r.clientY-i.clientY;return Math.sqrt(a*a+o*o)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),N1(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),N1(e)/N1(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t})(),YI=["textarea","input"],JG=(function(t){KG(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(m,x){if(x===void 0&&(x=!0),!(!i.flag&&m.cancelable===!1)){var _=m.type.indexOf("drag")>=-1;if(!(i.flag&&_)){i._isDragAPI=!0;var E=i.options,S=E.container,T=E.pinchOutside,D=E.preventWheelClick,R=E.preventRightClick,O=E.preventDefault,L=E.checkInput,j=E.dragFocusedInput,A=E.preventClickEventOnDragStart,C=E.preventClickEventOnDrag,k=E.preventClickEventByCondition,M=i._useTouch,U=!i.flag;if(i._isSecondaryButton=m.which===3||m.button===2,D&&(m.which===2||m.button===1)||R&&(m.which===3||m.button===2))return i.stop(),!1;if(U){var z=i._window.document.activeElement,P=m.target;if(P){var W=P.tagName.toLowerCase(),Q=YI.indexOf(W)>-1,$=P.isContentEditable;if(Q||$){if(L||!j&&z===P)return!1;if(z&&(z===P||$&&z.isContentEditable&&z.contains(P)))if(j)P.blur();else return!1}else if((O||m.type==="touchstart")&&z){var H=z.tagName.toLowerCase();(z.isContentEditable||YI.indexOf(H)>-1)&&z.blur()}(A||C||k)&&cr(i._window,"click",i._onClick,!0)}i.clientStores=[new M1(Sm(m))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=x,i._dragFlag=!0,i._prevInputEvent=m,i.data={},i.doubleFlag=Fh()-i.prevTime<200,i._isMouseEvent=QG(m),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var ee=i._preventMouseEvent||i.emit("dragStart",jn(jn({data:i.data,datas:i.data,inputEvent:m,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:x,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){m.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));ee===!1&&i.stop(),i._isMouseEvent&&i.flag&&O&&m.preventDefault()}if(!i.flag)return!1;var te=0;if(U?(i._attchDragEvent(),M&&T&&(te=setTimeout(function(){cr(S,"touchstart",i.onDragStart,{passive:!1})}))):M&&T&&$n(S,"touchstart",i.onDragStart),i.flag&&WG(m)){if(clearTimeout(te),U&&m.touches.length!==m.changedTouches.length)return;i.pinchFlag||i.onPinchStart(m)}}}},i.onDrag=function(m,x){if(i.flag){var _=i.options.preventDefault;!i._isMouseEvent&&_&&m.preventDefault(),i._prevInputEvent=m;var E=Sm(m),S=i.moveClients(E,m,!1);if(i._dragFlag){if(i.pinchFlag||S.deltaX||S.deltaY){var T=i._preventMouseEvent||i.emit("drag",jn(jn({},S),{isScroll:!!x,inputEvent:m}));if(T===!1){i.stop();return}}i.pinchFlag&&i.onPinch(m,E)}i.getCurrentStore().getPosition(E,!0)}},i.onDragEnd=function(m){if(i.flag){var x=i.options,_=x.pinchOutside,E=x.container,S=x.preventClickEventOnDrag,T=x.preventClickEventOnDragStart,D=x.preventClickEventByCondition,R=i.isDrag;(S||T||D)&&requestAnimationFrame(function(){i._allowClickEvent()}),!D&&!T&&S&&!R&&i._allowClickEvent(),i._useTouch&&_&&$n(E,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(m);var O=m?.touches?Sm(m):[],L=O.length;L===0||!i.options.keepDragging?i.flag=!1:i._addStore(new M1(O));var j=i._getPosition(),A=Fh(),C=!R&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=R||C?0:A,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",jn({data:i.data,datas:i.data,isDouble:C,isDrag:R,isClick:!R,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:m,isTrusted:i._isTrusted},j)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){$n(i._window,"click",i._onClick,!0)},i._onClick=function(m){i._allowClickEvent(),i._allowMouseEvent();var x=i.options.preventClickEventByCondition;x?.(m)||(m.stopPropagation(),m.preventDefault())},i._onContextMenu=function(m){var x=i.options;x.preventRightClick?i.onDragEnd(m):m.preventDefault()},i._passCallback=function(){};var a=[].concat(n),o=a[0];i._window=eP(o)?o:Bo(o),i.options=jn({checkInput:!1,container:o&&!("document"in o)?Bo(o):o,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var c=i.options,u=c.container,d=c.events,h=c.checkWindowBlur;if(i._useDrag=d.indexOf("drag")>-1,i._useTouch=d.indexOf("touch")>-1,i._useMouse=d.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(m){cr(m,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(m){cr(m,"mousedown",i.onDragStart),cr(m,"mousemove",i._passCallback)}),cr(u,"contextmenu",i._onContextMenu)),h&&cr(Bo(),"blur",i.onBlur),i._useTouch){var g={passive:!1};a.forEach(function(m){cr(m,"touchstart",i.onDragStart,g),cr(m,"touchmove",i._passCallback,g)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(n,r),a&&this.onDrag(i,!0))},e.prototype.move=function(n,r){var i=n[0],a=n[1],o=this.getCurrentStore(),c=o.prevClients;return this.moveClients(c.map(function(u){var d=u.clientX,h=u.clientY;return{clientX:d+i,clientY:h+a,originalClientX:d,originalClientY:h}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var i in n)r[i]=n[i];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),jn(jn({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,i=this.options.container;this.off(),$n(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(a){$n(a,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(a){$n(a,"mousedown",n.onDragStart)}),$n(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(a){$n(a,"touchstart",n.onDragStart)}),$n(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new M1(Sm(n));this.pinchFlag=!0,this._addStore(a);var o=this.emit("pinchStart",jn(jn({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));o===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",jn(jn({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",jn(jn({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,i){var a=this._getPosition(n,i),o=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var c=!1;return!o&&this.isDrag&&(c=!0),jn(jn({data:this.data,datas:this.data},a),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:c})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var i=this.getCurrentStore(),a=i.getPosition(n,r),o=this.clientStores.slice(1).reduce(function(d,h){var g=h.getPosition();return d.distX+=g.distX,d.distY+=g.distY,d},a),c=o.distX,u=o.distY;return jn(jn({},a),{distX:c,distY:u})},e.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(cr(r,"dragover",this.onDrag,i),cr(n,"dragend",this.onDragEnd)),this._useMouse&&(cr(r,"mousemove",this.onDrag),cr(n,"mouseup",this.onDragEnd)),this._useTouch&&(cr(r,"touchmove",this.onDrag,i),cr(n,"touchend",this.onDragEnd,i),cr(n,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&($n(r,"dragover",this.onDrag),$n(n,"dragend",this.onDragEnd)),this._useMouse&&($n(r,"mousemove",this.onDrag),$n(n,"mouseup",this.onDragEnd)),this._useTouch&&($n(r,"touchstart",this.onDragStart),$n(r,"touchmove",this.onDrag),$n(n,"touchend",this.onDragEnd),$n(n,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e})(Sv);function eq(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var tq=eq;function nq(t){return tq(t).toString(36)}function rq(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function iq(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var a=i.trim();return(a?Jl(a):[""]).map(function(o){var c=o.trim();return c.indexOf("@")===0?c:c.indexOf(":global")>-1?c.replace(/\:global/g,""):c.indexOf(":host")>-1?"".concat(c.replace(/\:host/g,".".concat(t))):c?".".concat(t," ").concat(c):".".concat(t)}).join(", ")+" {"})}function aq(t,e,n,r,i){var a=Nd(r),o=a.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",t),o.setAttribute("data-styled-count","1"),n.nonce&&o.setAttribute("nonce",n.nonce),o.innerHTML=iq(t,e,n),(i||a.head||a.body).appendChild(o),o}function sq(t){var e="rCS"+nq(t);return{className:e,inject:function(n,r){r===void 0&&(r={});var i=rq(n),a=(i||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!a)a=aq(e,t,r,n,i);else{var o=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(o+1))}return{destroy:function(){var c,u=parseFloat(a.getAttribute("data-styled-count"))||0;u<=1?(a.remove?a.remove():(c=a.parentNode)===null||c===void 0||c.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(u-1))}}}}}var Zx=function(){return Zx=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zx.apply(this,arguments)};function oq(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function IP(t,e){var n=sq(e),r=n.className;return aG(function(i,a){var o=i.className,c=o===void 0?"":o;i.cspNonce;var u=oq(i,["className","cspNonce"]),d=yG();return bG(a,function(){return d.current},[]),dP(function(){var h=n.inject(d.current,{nonce:i.cspNonce});return function(){h.destroy()}},[]),aa(t,Zx({ref:d,"data-styled-id":r,className:"".concat(c," ").concat(r)},u))})}var Jx=function(t,e){return Jx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Jx(t,e)};function Sp(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Jx(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var X=function(){return X=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},X.apply(this,arguments)};function lq(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function cq(t,e,n,r){var i=arguments.length,a=i<3?e:r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function uq(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Z(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function Ae(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function Tp(t,e){return X({events:[],props:[],name:t},e)}var dq=["n","w","s","e"],Qw=["n","w","s","e","nw","ne","sw","se"];function fq(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function hq(t){var e=fq(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var Pd=SG(),RP=Pd.browser.webkit,DP=RP&&(function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1})(),kP=Pd.browser.name,NP=parseInt(Pd.browser.version,10),pq=kP==="chrome",gq=Pd.browser.chromium,mq=parseInt(Pd.browser.chromiumVersion,10)||0,vq=pq&&NP>=109||gq&&mq>=109,yq=kP==="firefox",bq=parseInt(Pd.browser.webkitVersion,10)>=612||NP>=15,Zw="moveable-",xq=Qw.map(function(t){var e="",n="",r="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(a,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: ".concat(a,";"),r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),_q=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(xq,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(hq(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(DP?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),wq=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],e_=1e-4,jr=1e-7,Tm=1e-9,t_=Math.pow(10,10),KI=-t_,Eq={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},Jw={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},MP={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},PP=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function Ap(t,e,n,r,i,a){var o,c;a===void 0&&(a="draggable");var u=(c=(o=e.gestos[a])===null||o===void 0?void 0:o.move(n,t.inputEvent))!==null&&c!==void 0?c:{},d=u.originalDatas||u.datas,h=d[a]||(d[a]={});return X(X({},u),{isPinch:!!r,parentEvent:!0,datas:h,originalDatas:t.originalDatas})}var sd=(function(){function t(e){var n;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(n={},n[e]={},n)}return t.prototype.dragStart=function(e,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),X(X({},this.move(e,n.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,n){return this.move([e[0]-this.prevX,e[1]-this.prevY],n)},t.prototype.move=function(e,n){var r,i,a=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],r=e[0],i=e[1],this.isFlag=!0;else{var o=this.isDrag;r=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!o&&this.isDrag&&(a=!0)}return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:n,isFirstDrag:a,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t})();function Wu(t,e,n,r){var i=t.length===16,a=i?4:3,o=Dc(t,n,r,a),c=Z(o,4),u=Z(c[0],2),d=u[0],h=u[1],g=Z(c[1],2),m=g[0],x=g[1],_=Z(c[2],2),E=_[0],S=_[1],T=Z(c[3],2),D=T[0],R=T[1],O=Z(dn(t,e,a),2),L=O[0],j=O[1],A=Math.min(d,m,E,D),C=Math.min(h,x,S,R),k=Math.max(d,m,E,D),M=Math.max(h,x,S,R);d=d-A||0,m=m-A||0,E=E-A||0,D=D-A||0,h=h-C||0,x=x-C||0,S=S-C||0,R=R-C||0,L=L-A||0,j=j-C||0;var U=t[0],z=t[a+1],P=kr(U*z);return{left:A,top:C,right:k,bottom:M,origin:[L,j],pos1:[d,h],pos2:[m,x],pos3:[E,S],pos4:[D,R],direction:P}}function OP(t,e){var n=e.clientX,r=e.clientY,i=e.datas,a=t.state,o=a.moveableClientRect,c=a.rootMatrix,u=a.is3d,d=a.pos1,h=o.left,g=o.top,m=u?4:3,x=Z(Ge(cd(c,[n-h,r-g],m),d),2),_=x[0],E=x[1],S=Z(Qa({datas:i,distX:_,distY:E}),2),T=S[0],D=S[1];return[T,D]}function Rc(t,e){var n=e.datas,r=t.state,i=r.allMatrix,a=r.beforeMatrix,o=r.is3d,c=r.left,u=r.top,d=r.origin,h=r.offsetMatrix,g=r.targetMatrix,m=r.transformOrigin,x=o?4:3;n.is3d=o,n.matrix=i,n.targetMatrix=g,n.beforeMatrix=a,n.offsetMatrix=h,n.transformOrigin=m,n.inverseMatrix=qa(i,x),n.inverseBeforeMatrix=qa(a,x),n.absoluteOrigin=fc(At([c,u],d),x),n.startDragBeforeDist=Ar(n.inverseBeforeMatrix,n.absoluteOrigin,x),n.startDragDist=Ar(n.inverseMatrix,n.absoluteOrigin,x)}function Sq(t){return Wu(t.datas.beforeTransform,[50,50],100,100).direction}function Tv(t,e,n){var r=e.datas,i=e.originalDatas.beforeRenderable,a=r.transformIndex,o=i.nextTransforms,c=o.length,u=i.nextTransformAppendedIndexes,d=-1;a===-1?(n==="translate"?d=0:n==="rotate"&&(d=Ms(o,function(x){return x.match(/scale\(/g)})),d===-1&&(d=o.length),r.transformIndex=d):Zr(u,function(x){return x.index===a&&x.functionName===n})?d=a:d=a+u.filter(function(x){return x.index<a}).length;var h=WH(o,t.state,d),g=h.targetFunction,m=n==="rotate"?"rotateZ":n;r.beforeFunctionTexts=h.beforeFunctionTexts,r.afterFunctionTexts=h.afterFunctionTexts,r.beforeTransform=h.beforeFunctionMatrix,r.beforeTransform2=h.beforeFunctionMatrix2,r.targetTansform=h.targetFunctionMatrix,r.afterTransform=h.afterFunctionMatrix,r.afterTransform2=h.afterFunctionMatrix2,r.targetAllTransform=h.allFunctionMatrix,g.functionName===m?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):c>d&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=Ae(Ae([],Z(u),!1),[{functionName:n,index:d,isAppend:!0}],!1))}function Av(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function Tq(t){var e=t.datas,n=t.distX,r=t.distY,i=Z(jP({datas:e,distX:n,distY:r}),2),a=i[0],o=i[1],c=VP(e,RG([a,o],4));return Ar(c,fc([0,0,0],4),4)}function VP(t,e,n){var r=t.beforeTransform,i=t.afterTransform,a=t.beforeTransform2,o=t.afterTransform2,c=t.targetAllTransform,u=n?Xt(c,e,4):Xt(e,c,4),d=Xt(qa(n?a:r,4),u,4),h=Xt(d,qa(n?o:i,4),4);return h}function jP(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,a=e.is3d,o=e.startDragBeforeDist,c=e.absoluteOrigin,u=a?4:3;return Ge(Ar(i,At(c,[n,r]),u),o)}function Qa(t,e){var n=t.datas,r=t.distX,i=t.distY,a=n.inverseBeforeMatrix,o=n.inverseMatrix,c=n.is3d,u=n.startDragBeforeDist,d=n.startDragDist,h=n.absoluteOrigin,g=c?4:3;return Ge(Ar(e?a:o,At(h,[r,i]),g),e?u:d)}function Aq(t,e){var n=t.datas,r=t.distX,i=t.distY;n.beforeMatrix;var a=n.matrix,o=n.is3d;n.startDragBeforeDist;var c=n.startDragDist,u=n.absoluteOrigin,d=o?4:3;return Ge(Ar(a,At(c,[r,i]),d),u)}function Cq(t,e,n,r,i,a){return r===void 0&&(r=e),i===void 0&&(i=n),a===void 0&&(a=[0,0]),t?t.map(function(o,c){var u=yp(o),d=u.value,h=u.unit,g=c?i:r,m=c?n:e;if(o==="%"||isNaN(d)){var x=g?a[c]/g:0;return m*x}else if(h!=="%")return d;return m*d/100}):a}function zP(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function Iq(t,e){return zP(e).map(function(n){return t[n]})}function P1(t,e){var n=(e+1)/2;return[T0(t[0][0],t[1][0],n,1-n),T0(t[0][1],t[1][1],n,1-n)]}function Wn(t,e){var n=P1([t[0],t[1]],e[0]),r=P1([t[2],t[3]],e[0]);return P1([n,r],e[1])}function Rq(t,e,n,r,i,a){var o=Dc(e,n,r,i),c=Wn(o,a),u=t[0]-c[0],d=t[1]-c[1];return[u,d]}function Cp(t,e,n,r){return Xt(t,bh(e,r,n),r)}function Dq(t,e,n,r){var i=t.transformOrigin,a=t.offsetMatrix,o=t.is3d,c=o?4:3,u;if(Qr(n)){var d=e.beforeTransform,h=e.afterTransform;r?u=ca(qh(n),4,c):u=ca(Xt(Xt(d,qh([n]),4),h,4),4,c)}else u=n;return Cp(a,u,i,c)}function kq(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,a=t.targetMatrix,o=t.targetAllTransform,c=i?4:3;return Cp(r,Xt(o||a,Kw(e,c),c),n,c)}function Cv(t,e){var n=Od(e);return{setTransform:function(r,i){i===void 0&&(i=-1),n.startTransforms=Fn(r)?r:Wo(r),n_(t,e,i)},setTransformIndex:function(r){n_(t,e,r)}}}function Iv(t,e,n){var r=Od(e),i=r.startTransforms;n_(t,e,Ms(i,function(a){return a.indexOf("".concat(n,"("))===0}))}function n_(t,e,n){var r=Od(e),i=e.datas;if(i.transformIndex=n,n!==-1){var a=r.startTransforms[n];if(a){var o=t.state,c=ad([a],{"x%":function(u){return u/100*o.offsetWidth},"y%":function(u){return u/100*o.offsetHeight}});i.startValue=c[0].functionValue}}}function eE(t,e){var n=Od(t);n.nextTransforms=Wo(e)}function Od(t){return t.originalDatas.beforeRenderable}function R0(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function Am(t){return(R0(t)||[]).join(" ")}function Cm(t){return Od(t).nextStyle}function LP(t,e,n,r,i){eE(i,e);var a=Dr.drag(t,Ap(i,t.state,n,r)),o=a?a.transform:e;return X(X({transform:e,drag:a},Pr({transform:o},i)),{afterTransform:o})}function tE(t,e,n,r,i,a){var o=Dq(t.state,i,e,a),c=Pq(t,n,r,o);return c}function BP(t,e,n,r,i,a,o){var c=tE(t,e,n,i,a,o),u=t.state,d=u.left,h=u.top,g=t.props.groupable,m=g?d:0,x=g?h:0,_=Ge(r,c);return Ge(_,[m,x])}function Nq(t,e,n,r,i,a,o){var c=BP(t,e,n,r,i,a,o);return c}function Mq(t,e,n){return[e?-1+t[0]/(e/2):0,n?-1+t[1]/(n/2):0]}function Pq(t,e,n,r){r===void 0&&(r=t.state.allMatrix);var i=t.state,a=i.width,o=i.height,c=i.is3d,u=c?4:3,d=[a/2*(1+e[0])+n[0],o/2*(1+e[1])+n[1]];return dn(r,d,u)}function Oq(t,e,n){var r=n.fixedDirection,i=n.fixedPosition,a=n.fixedOffset;return BP(t,"rotate(".concat(e,"deg)"),r,i,a,n)}function Vq(t,e,n,r,i,a){var o=t.props.groupable,c=t.state,u=c.transformOrigin,d=c.offsetMatrix,h=c.is3d,g=c.width,m=c.height,x=c.left,_=c.top,E=a.fixedDirection,S=a.nextTargetMatrix||c.targetMatrix,T=h?4:3,D=Cq(i,e,n,g,m,u),R=o?x:0,O=o?_:0,L=Cp(d,S,D,T),j=Rq(r,L,e,n,T,E);return Ge(j,[R,O])}function jq(t,e){return Wn(Bi(t.state),e)}function zq(t,e){var n=t.targetGesto,r=t.controlGesto,i;return n?.isFlag()&&(i=n.getEventData()[e]),!i&&r?.isFlag()&&(i=r.getEventData()[e]),i||{}}function Lq(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function Bq(t){var e=t("scale"),n=t("rotate"),r=t("translate"),i=[];return r&&r!=="0px"&&r!=="none"&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),n&&n!=="1"&&n!=="none"&&i.push("rotate(".concat(n,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function UP(t,e,n){for(var r=t,i=[],a=Uw(t)||ol(t),o=!n&&t===e||t===a,c=o,u=!1,d=3,h,g,m,x=!1,_=$h(e,e,!0).offsetParent,E=1;r&&!c;){c=o;var S=Jr(r),T=S("position"),D=dO(r),R=T==="fixed",O=Bq(S),L=DG(jH(D)),j=void 0,A=!1,C=!1,k=0,M=0,U=0,z=0,P={hasTransform:!1,fixedContainer:null};R&&(x=!0,P=FH(r),_=P.fixedContainer);var W=L.length;!u&&(W===16||O.length)&&(u=!0,d=4,l_(i),m&&(m=ca(m,3,4))),u&&W===9&&(L=ca(L,3,4));var Q=UH(r,t),$=Q.tagName,H=Q.hasOffset,ee=Q.isSVG,te=Q.origin,fe=Q.targetOrigin,B=Q.offset,Y=Z(B,2),ne=Y[0],ae=Y[1];$==="svg"&&!r.ownerSVGElement&&m&&(i.push({type:"target",target:r,matrix:GH(r,d)}),i.push({type:"offset",target:r,matrix:nn(d)}));var he=parseFloat(S("zoom"))||1;if(R)j=P.fixedContainer,A=!0;else{var le=$h(r,e,!1,!0,S),ge=le.offsetZoom;if(j=le.offsetParent,A=le.isEnd,C=le.isStatic,E*=ge,(le.isCustomElement||ge!==1)&&C)ne-=j.offsetLeft,ae-=j.offsetTop;else if(yq||vq){var xe=le.parentSlotElement;if(xe){for(var Se=j,Ue=0,Ee=0;Se&&Lq(Se);)Ue+=Se.offsetLeft,Ee+=Se.offsetTop,Se=Se.offsetParent;ne-=Ue,ae-=Ee}}}if(RP&&!bq&&H&&!ee&&C&&(T==="relative"||T==="static")&&(ne-=j.offsetLeft,ae-=j.offsetTop,o=o||A),R)H&&P.hasTransform&&(U=j.clientLeft,z=j.clientTop);else if(H&&_!==j&&(k=j.clientLeft,M=j.clientTop),H&&j===a){var Ce=fO(r,!1);ne+=Ce[0],ae+=Ce[1]}if(i.push({type:"target",target:r,matrix:bh(L,d,te)}),O.length&&(i.push({type:"offset",target:r,matrix:nn(d)}),i.push({type:"target",target:r,matrix:bh(qh(O),d,te)})),H){var He=r===t,je=He?0:r.scrollLeft,$e=He?0:r.scrollTop;i.push({type:"offset",target:r,matrix:hc([ne-je+k-U,ae-$e+M-z],d)})}else i.push({type:"offset",target:r,origin:te});if(he!==1&&i.push({type:"zoom",target:r,matrix:bh(Kw([he,he],d),d,[0,0])}),m||(m=L),h||(h=te),g||(g=fe),c||R)break;r=j,o=A,(!n||r===a)&&(c=o)}return m||(m=nn(d)),h||(h=[0,0]),g||(g=[0,0]),{zoom:E,offsetContainer:_,matrixes:i,targetMatrix:m,transformOrigin:h,targetOrigin:g,is3d:u,hasFixed:x}}var Gl=null,ql=null,Fu=null;function od(t){t?(window.Map&&(Gl=new Map,ql=new Map),Fu=[]):(Gl=null,Fu=null,ql=null)}function Uq(t){var e=ql?.get(t);if(e)return e;var n=xh(t,!0);return ql&&ql.set(t,n),n}function Fq(t,e){if(Fu){var n=Zr(Fu,function(i){return i[0][0]==t&&i[0][1]==e});if(n)return n[1]}var r=UP(t,e,!0);return Fu&&Fu.push([[t,e],r]),r}function Jr(t){var e=Gl?.get(t);if(!e){var n=Bo(t).getComputedStyle(t);if(!Gl)return function(a){return n[a]};e={style:n,cached:{}},Gl.set(t,e)}var r=e.cached,i=e.style;return function(a){return a in r||(r[a]=i[a]),r[a]}}function sa(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return t.moveables.map(function(o,c){return a[c]=a[c]||{},a[c][e]=a[c][e]||{},X(X({},n),{isRequestChild:!0,datas:a[c][e],originalDatas:a[c]})})}function O1(t,e,n,r,i,a,o){var c=!!n.match(/Start$/g),u=!!n.match(/End$/g),d=i.isPinch,h=i.datas,g=sa(t,e.name,i),m=t.moveables,x=[],_=g.map(function(E,S){var T=m[S],D=T.state,R=D.gestos,O=E;if(c)O=new sd(o).dragStart(r,E),x.push(O);else{if(R[o]||(R[o]=h.childGestos[S]),!R[o])return;O=Ap(E,D,r,d,a,o),x.push(O)}var L=e[n](T,X(X({},O),{parentFlag:!0}));return u&&(R[o]=null),L});return c&&(h.childGestos=m.map(function(E){return E.state.gestos[o]})),{eventParams:_,childEvents:x}}function Is(t,e,n,r,i,a){i===void 0&&(i=function(h,g){return g});var o=!!n.match(/End$/g),c=sa(t,e.name,r),u=t.moveables,d=c.map(function(h,g){var m=u[g],x=h;x=i(m,h);var _=e[n](m,X(X({},x),{parentFlag:!0}));return o&&(m.state.gestos={}),_});return d}function D0(t,e,n,r){var i=n.fixedDirection,a=n.fixedPosition,o=r.datas.startPositions||Bi(e.state),c=Wn(o,i),u=Z(Ar(Ep(-t.rotation/180*Math.PI,3),[c[0]-a[0],c[1]-a[1],1],3),2),d=u[0],h=u[1];return r.datas.originalX=d,r.datas.originalY=h,r}function FP(t,e,n,r){var i=t.getState(),a=i.renderPoses,o=i.rotation,c=i.direction,u=gc(t.props,e).zoom,d=yh(o/Math.PI*180),h={},g=t.renderState;g.renderDirectionMap||(g.renderDirectionMap={});var m=g.renderDirectionMap;n.forEach(function(_){var E=_.dir;h[E]=!0});var x=kr(c);return n.map(function(_){var E=_.data,S=_.classNames,T=_.dir,D=Jw[T];if(!D||!h[T])return null;m[T]=!0;var R=(it(d,15)+x*MP[T]+720)%180,O={};return Ps(E).forEach(function(L){O["data-".concat(L)]=E[L]}),r.createElement("div",X({className:Be.apply(void 0,Ae(["control","direction",T,e],Z(S),!1)),"data-rotation":R,"data-direction":T},O,{key:"direction-".concat(T),style:P0.apply(void 0,Ae([o,u],Z(D.map(function(L){return a[L]})),!1))}))})}function GP(t,e,n,r){var i=gc(t.props,n),a=i.renderDirections,o=a===void 0?e:a,c=i.displayAroundControls;if(!o)return[];var u=o===!0?Qw:o;return Ae(Ae([],Z(c?YP(t,r,n,u):[]),!1),Z(FP(t,n,u.map(function(d){return{data:{},classNames:[],dir:d}}),r)),!1)}function Hh(t,e,n,r,i,a){for(var o=[],c=6;c<arguments.length;c++)o[c-6]=arguments[c];var u=In(n,r),d=e?it(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:Be.apply(void 0,Ae(["line","direction",e?"edge":"",e],Z(o),!1)),"data-rotation":d,"data-line-key":a,"data-direction":e,style:rh(n,r,i,u)})}function qP(t,e,n,r,i){var a=n===!0?dq:n;return a.map(function(o,c){var u=Z(Jw[o],2),d=u[0],h=u[1];if(h!=null)return Hh(t,o,r[d],r[h],i,"".concat(e,"Edge").concat(c),e)}).filter(Boolean)}function HP(t){return function(e,n){var r=gc(e.props,t).edge;return r&&(r===!0||r.length)?Ae(Ae([],Z(qP(n,t,r,e.getState().renderPoses,e.props.zoom)),!1),Z(Gq(e,t,n)),!1):$P(e,t,n)}}function $P(t,e,n){return GP(t,Qw,e,n)}function Gq(t,e,n){return GP(t,["nw","ne","sw","se"],e,n)}function YP(t,e,n,r){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=t.getState(),o=a.renderPoses,c=a.rotation,u=a.direction,d=i.renderDirectionMap,h=t.props.zoom,g=kr(u),m=c/Math.PI*180;return(r||Ps(d)).map(function(x){var _=Jw[x];if(!_)return null;var E=(it(m,15)+g*MP[x]+720)%180,S=["around-control"];return n&&S.push("direction",n),e.createElement("div",{className:Be.apply(void 0,Ae([],Z(S),!1)),"data-rotation":E,"data-direction":x,key:"direction-around-".concat(x),style:P0.apply(void 0,Ae([c,h],Z(_.map(function(T){return o[T]})),!1))})})}function nE(t,e,n){var r=t||{},i=r.position,a=i===void 0?"client":i,o=r.left,c=o===void 0?-1/0:o,u=r.top,d=u===void 0?-1/0:u,h=r.right,g=h===void 0?1/0:h,m=r.bottom,x=m===void 0?1/0:m,_={position:a,left:c,top:d,right:g,bottom:x};return{vertical:XI(_,e,!0),horizontal:XI(_,n,!1)}}function Rv(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,a=r.clientWidth,o=r.clientLeft,c=r.clientTop,u=n.snapOffset,d=u.left,h=u.top,g=u.right,m=u.bottom,x=e||t.props.bounds||{},_=x.position||"client",E=_==="css",S=x.left,T=S===void 0?-1/0:S,D=x.top,R=D===void 0?-1/0:D,O=x.right,L=O===void 0?E?-1/0:1/0:O,j=x.bottom,A=j===void 0?E?-1/0:1/0:j;return E&&(L=a+g-d-L,A=i+m-h-A),{left:T+d-o,right:L+d-o,top:R+h-c,bottom:A+h-c}}function qq(t,e,n){var r=Rv(t),i=r.left,a=r.top,o=r.right,c=r.bottom,u=Z(n,2),d=u[0],h=u[1],g=Z(Ge(n,e),2),m=g[0],x=g[1];_e(m)<jr&&(m=0),_e(x)<jr&&(x=0);var _=x>0,E=m>0,S={isBound:!1,offset:0,pos:0},T={isBound:!1,offset:0,pos:0};if(m===0&&x===0)return{vertical:S,horizontal:T};if(m===0)_?c<h&&(T.pos=c,T.offset=h-c):a>h&&(T.pos=a,T.offset=h-a);else if(x===0)E?o<d&&(S.pos=o,S.offset=d-o):i>d&&(S.pos=i,S.offset=d-i);else{var D=x/m,R=n[1]-D*d,O=0,L=0,j=!1;E&&o<=d?(O=D*o+R,L=o,j=!0):!E&&d<=i&&(O=D*i+R,L=i,j=!0),j&&(O<a||O>c)&&(j=!1),j||(_&&c<=h?(O=c,L=(O-R)/D,j=!0):!_&&h<=a&&(O=a,L=(O-R)/D,j=!0)),j&&(S.isBound=!0,S.pos=L,S.offset=d-L,T.isBound=!0,T.pos=O,T.offset=h-O)}return{vertical:S,horizontal:T}}function XI(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],a=Math.min.apply(Math,Ae([],Z(e),!1)),o=Math.max.apply(Math,Ae([],Z(e),!1)),c=[];return r+1>a&&c.push({direction:"start",isBound:!0,offset:a-r,pos:r}),i-1<o&&c.push({direction:"end",isBound:!0,offset:o-i,pos:i}),c.length||c.push({isBound:!1,offset:0,pos:0}),c.sort(function(u,d){return _e(d.offset)-_e(u.offset)})}function WI(t,e,n){var r=n?t.map(function(i){return wp(i,n)}):t;return r.some(function(i){return i[0]<e.left&&_e(i[0]-e.left)>.1||i[0]>e.right&&_e(i[0]-e.right)>.1||i[1]<e.top&&_e(i[1]-e.top)>.1||i[1]>e.bottom&&_e(i[1]-e.bottom)>.1})}function Hq(t,e,n){var r=Li(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(a,o){return _e(a-t[n?0:1])-_e(o-t[n?0:1])}).map(function(a){return In([0,0],n?[a,e]:[e,a])})}function $q(t,e,n,r,i){if(!t.props.bounds)return[];var a=i*Math.PI/180,o=Rv(t),c=o.left,u=o.top,d=o.right,h=o.bottom,g=c-r[0],m=d-r[0],x=u-r[1],_=h-r[1],E={left:g,top:x,right:m,bottom:_};if(!WI(n,E,0))return[];var S=[];return[[g,0],[m,0],[x,1],[_,1]].forEach(function(T){var D=Z(T,2),R=D[0],O=D[1];n.forEach(function(L){var j=In([0,0],L);S.push.apply(S,Ae([],Z(Hq(L,R,O).map(function(A){return a+A-j}).filter(function(A){return!WI(e,E,A)}).map(function(A){return it(A*180/Math.PI,jr)})),!1))})}),S}var Yq=["left","right","center"],Kq=["top","bottom","middle"],QI={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},Qo={start:"left",end:"right",center:"center"},Zo={start:"top",end:"bottom",center:"middle"};function Gu(){return{left:!1,top:!1,right:!1,bottom:!1}}function Vd(t,e){var n=t.props,r=n.snappable,i=n.bounds,a=n.innerBounds,o=n.verticalGuidelines,c=n.horizontalGuidelines,u=n.snapGridWidth,d=n.snapGridHeight,h=t.state,g=h.guidelines,m=h.enableSnap;return!r||!m||e&&r!==!0&&r.indexOf(e)<0?!1:!!(u||d||i||a||g&&g.length||o&&o.length||c&&c.length)}function rE(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function Xq(t,e){var n=rE(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}function iE(t,e){var n=Xq(t,e),r=Kq.filter(function(a){return a in n}),i=Yq.filter(function(a){return a in n});return{horizontalNames:r,verticalNames:i,horizontal:r.map(function(a){return n[a]}),vertical:i.map(function(a){return n[a]})}}function Wq(t,e,n){var r=dn(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function Qq(t){var e=Z(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];Math.abs(i)<Bn&&(i=0),Math.abs(a)<Bn&&(a=0);var o=0,c=0,u=0;return i?a?(o=-a/i,c=1,u=o*n[0]-n[1]):(c=1,u=-n[1]):(o=-1,u=n[0]),[o,c,u].map(function(d){return it(d,Bn)})}var KP="snapRotationThreshold",XP="snapRotationDegrees",WP="snapHorizontalThreshold",QP="snapVerticalThreshold";function Dv(t,e,n,r,i,a,o){var c;r===void 0&&(r=[]),i===void 0&&(i=[]);var u=t.props,d=((c=t.state.snapThresholdInfo)===null||c===void 0?void 0:c.multiples)||[1,1],h=fR(o,u[WP],5),g=fR(a,u[QP],5);return ZP(t.state.guidelines,e,n,r,i,h,g,d)}function ZP(t,e,n,r,i,a,o,c){return{vertical:JI(t,"vertical",e,o*c[0],r),horizontal:JI(t,"horizontal",n,a*c[1],i)}}function Zq(t,e,n){var r=Z(n,2),i=r[0],a=r[1],o=Z(e,2),c=o[0],u=o[1],d=Z(Ge(n,e),2),h=d[0],g=d[1],m=g>0,x=h>0;h=O0(h),g=O0(g);var _={isSnap:!1,offset:0,pos:0},E={isSnap:!1,offset:0,pos:0};if(h===0&&g===0)return{vertical:_,horizontal:E};var S=Dv(t,h?[i]:[],g?[a]:[],[],[],void 0,void 0),T=S.vertical,D=S.horizontal;T.posInfos.filter(function($){var H=$.pos;return x?H>=c:H<=c}),D.posInfos.filter(function($){var H=$.pos;return m?H>=u:H<=u}),T.isSnap=T.posInfos.length>0,D.isSnap=D.posInfos.length>0;var R=r_(T),O=R.isSnap,L=R.guideline,j=r_(D),A=j.isSnap,C=j.guideline,k=A?C.pos[1]:0,M=O?L.pos[0]:0;if(h===0)A&&(E.isSnap=!0,E.pos=C.pos[1],E.offset=a-E.pos);else if(g===0)O&&(_.isSnap=!0,_.pos=M,_.offset=i-M);else{var U=g/h,z=n[1]-U*i,P=0,W=0,Q=!1;O?(W=M,P=U*W+z,Q=!0):A&&(P=k,W=(P-z)/U,Q=!0),Q&&(_.isSnap=!0,_.pos=W,_.offset=i-W,E.isSnap=!0,E.pos=P,E.offset=a-P)}return{vertical:_,horizontal:E}}function jo(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function ZI(t,e,n,r){var i=iE(t.props.snapDirections,e),a=Dv(t,i.vertical,i.horizontal,i.verticalNames.map(function(u){return jo(u)}),i.horizontalNames.map(function(u){return jo(u)}),n,r),o=jo(i.horizontalNames[a.horizontal.index]),c=jo(i.verticalNames[a.vertical.index]);return{vertical:X(X({},a.vertical),{direction:c}),horizontal:X(X({},a.horizontal),{direction:o})}}function r_(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,a=r.dist,o=r.guideline;return{isSnap:e,offset:i,dist:a,pos:n.pos,guideline:o}}function JI(t,e,n,r,i){var a,o;if(i===void 0&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var c=e==="vertical",u=c?0:1,d=n.map(function(g,m){var x=i[m]||"",_=t.map(function(E){var S=E.pos,T=g-S[u];return{offset:T,dist:_e(T),guideline:E,direction:x}}).filter(function(E){var S=E.guideline,T=E.dist,D=S.type;return!(D!==e||T>r)}).sort(function(E,S){return E.dist-S.dist});return{pos:g,index:m,guidelineInfos:_,direction:x}}).filter(function(g){return g.guidelineInfos.length>0}).sort(function(g,m){return g.guidelineInfos[0].dist-m.guidelineInfos[0].dist}),h=d.length>0;return{isSnap:h,index:h?d[0].index:-1,direction:(o=(a=d[0])===null||a===void 0?void 0:a.direction)!==null&&o!==void 0?o:"",posInfos:d}}function Jq(t,e,n,r,i){var a=[];n[0]&&n[1]?a=[n,[-n[0],n[1]],[n[0],-n[1]]]:!n[0]&&!n[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(m,x,_){var E=_[x+1]||_[0];a.push(m),a.push([(m[0]+E[0])/2,(m[1]+E[1])/2])}):t.props.keepRatio?a.push([-1,-1],[-1,1],[1,-1],[1,1],n):(a.push.apply(a,Ae([],Z(Iq([[-1,-1],[1,-1],[-1,-1],[1,1]],n)),!1)),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));var o=a.map(function(m){return Wn(e,m)}),c=o.map(function(m){return m[0]}),u=o.map(function(m){return m[1]}),d=Dv(t,c,u,a.map(function(m){return jo(m[0])}),a.map(function(m){return jo(m[1])}),r,i),h=jo(a.map(function(m){return m[0]})[d.vertical.index]),g=jo(a.map(function(m){return m[1]})[d.horizontal.index]);return{vertical:X(X({},d.vertical),{direction:h}),horizontal:X(X({},d.horizontal),{direction:g})}}function JP(t,e){var n=_e(t.offset),r=_e(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<jr?1:r<jr?-1:n-r}function k0(t,e){return t.slice().sort(function(n,r){var i=n.sign[e],a=r.sign[e],o=n.offset[e],c=r.offset[e];if(i){if(!a)return-1}else return 1;return JP({isBound:n.isBound,isSnap:n.isSnap,offset:o},{isBound:r.isBound,isSnap:r.isSnap,offset:c})})[0]}function eH(t,e,n){var r=[];if(n)_e(e[0])!==1||_e(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(c){var u=[o*i[0],c*i[1]];e[0]===u[0]&&e[1]===u[1]||r.push([e,u])})})}else if(t[0]){var a=_e(e[0])===1?[1]:[1,-1];a.forEach(function(o){r.push([[e[0],-1],[o*t[0],-1]],[[e[0],0],[o*t[0],0]],[[e[0],1],[o*t[0],1]])})}else if(t[1]){var a=_e(e[1])===1?[1]:[1,-1];a.forEach(function(c){r.push([[-1,e[1]],[-1,c*t[1]]],[[0,e[1]],[0,c*t[1]]],[[1,e[1]],[1,c*t[1]]])})}return r}function eO(t,e){var n=Fx([e[0][0],e[1][0]]),r=Fx([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function aE(t,e){var n=Z(e,2),r=n[0],i=n[1],a=i[0]-r[0],o=i[1]-r[1];_e(a)<jr&&(a=0),_e(o)<jr&&(o=0);var c,u;if(!a)c=r[0],u=t[0];else if(!o)c=r[1],u=t[1];else{var d=o/a;c=d*(t[0]-r[0])+r[1],u=t[1]}return c-u}function tO(t,e,n,r){return r===void 0&&(r=jr),t.every(function(i){var a=aE(i,e),o=a<=0;return o===n||_e(a)<=r})}function eR(t,e,n,r,i){return i===void 0&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function tH(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,a=e.horizontalSign,o=e.lineConstants,c=t.props.innerBounds;if(!c)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=c.left,d=c.top,h=c.width,g=c.height,m=[[u,d],[u,d+g]],x=[[u,d],[u+h,d]],_=[[u+h,d],[u+h,d+g]],E=[[u,d+g],[u+h,d+g]];if(tO([[u,d],[u+h,d],[u,d+g],[u+h,d+g]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var S=zo(n,o,x,i),T=zo(n,o,E,i),D=zo(n,o,m,a),R=zo(n,o,_,a),O=S.isBound&&T.isBound,L=S.isBound||T.isBound,j=D.isBound&&R.isBound,A=D.isBound||R.isBound,C=ld(S.offset,T.offset),k=ld(D.offset,R.offset),M=[0,0],U=!1,z=!1;return _e(k)<_e(C)?(M=[C,0],U=L,z=O):(M=[0,k],U=A,z=j),{isAllBound:z,isVerticalBound:L,isHorizontalBound:A,isBound:U,offset:M}}function zo(t,e,n,r,i,a){var o=Z(e,2),c=o[0],u=o[1],d=t[0],h=n[0],g=n[1],m=O0(g[1]-h[1]),x=O0(g[0]-h[0]),_=u,E=c,S=-c/u;if(x){if(!m){if(a&&!_)return{isBound:!1,offset:0};if(E){var O=(h[1]-d[1])/S+d[0];return eR(O,h[0],g[0],r,i)}else{var D=h[1]-d[1],R=_e(D)<=(i||0);return{isBound:R,offset:R?D:0}}}}else{if(a&&!E)return{isBound:!1,offset:0};if(_){var T=S*(h[0]-d[0])+d[1];return eR(T,h[1],g[1],r,i)}else{var D=h[0]-d[0],R=_e(D)<=(i||0);return{isBound:R,offset:R?D:0}}}return{isBound:!1,offset:0}}function nO(t,e,n){return e.map(function(r){var i=tH(t,r),a=i.isBound,o=i.offset,c=i.isVerticalBound,u=i.isHorizontalBound,d=r.multiple,h=Qa({datas:n,distX:o[0],distY:o[1]}).map(function(g,m){return g*(d[m]?2/d[m]:0)});return{sign:d,isBound:a,isVerticalBound:c,isHorizontalBound:u,isSnap:!1,offset:h}})}function nH(t,e,n){var r,i=sE(t,e,[0,0],!1).map(function(m){return X(X({},m),{multiple:m.multiple.map(function(x){return _e(x)*2})})}),a=nO(t,i,n),o=k0(a,0),c=k0(a,1),u=0,d=0,h=o.isVerticalBound||c.isVerticalBound,g=o.isHorizontalBound||c.isHorizontalBound;return(h||g)&&(r=Z(Aq({datas:n,distX:-o.offset[0],distY:-c.offset[1]}),2),u=r[0],d=r[1]),{vertical:{isBound:h,offset:u},horizontal:{isBound:g,offset:d}}}function rH(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,i*2],t,[-r,i]],[[r*2,0],t,[r,-i]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,i*2],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function sE(t,e,n,r){var i=t.state,a=i.allMatrix,o=i.is3d,c=Dc(a,100,100,o?4:3),u=Wn(c,[0,0]);return rH(n,r).map(function(d){var h=Z(d,3),g=h[0],m=h[1],x=h[2],_=[Wn(c,m),Wn(c,x)],E=Qq(_),S=eO(u,_),T=S.vertical,D=S.horizontal,R=aE(u,_)<=0;return{multiple:g,centerSign:R,verticalSign:T,horizontalSign:D,lineConstants:E,line:[Wn(e,m),Wn(e,x)]}})}function tR(t,e,n,r){var i=r?t.map(function(a){return wp(a,r)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var o=aE(n,a)<=0;return!tO(e,a,o)})}function iH(t){var e=Z(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return _e(n[0]);if(!a)return _e(n[1]);var o=a/i;return _e((-o*n[0]+n[1])/Math.sqrt(Math.pow(o,2)+1))}function aH(t){var e=Z(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return[n[0],0];if(!a)return[0,n[1]];var o=a/i,c=-o*n[0]+n[1];return[-c/(o+1/o),c/(o*o+1)]}function sH(t,e,n,r,i){var a=t.props.innerBounds,o=i*Math.PI/180;if(!a)return[];var c=a.left,u=a.top,d=a.width,h=a.height,g=c-r[0],m=c+d-r[0],x=u-r[1],_=u+h-r[1],E=[[g,x],[m,x],[g,_],[m,_]],S=Wn(n,[0,0]);if(!tR(n,E,S,0))return[];var T=[],D=E.map(function(R){return[Li(R),In([0,0],R)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(R){var O=In([0,0],aH(R)),L=iH(R);T.push.apply(T,Ae([],Z(D.filter(function(j){var A=Z(j,1),C=A[0];return C&&L<=C}).map(function(j){var A=Z(j,2),C=A[0],k=A[1],M=Math.acos(C?L/C:0),U=k+M,z=k-M;return[o+U-O,o+z-O]}).reduce(function(j,A){return j.push.apply(j,Ae([],Z(A),!1)),j},[]).filter(function(j){return!tR(e,E,S,j)}).map(function(j){return it(j*180/Math.PI,jr)})),!1))}),T}function oH(t){var e=t.props.innerBounds,n=Gu();if(!e)return{boundMap:n,vertical:[],horizontal:[]};var r=t.getRect(),i=r.pos1,a=r.pos2,o=r.pos3,c=r.pos4,u=[i,a,o,c],d=Wn(u,[0,0]),h=e.left,g=e.top,m=e.width,x=e.height,_=[[h,g],[h,g+x]],E=[[h,g],[h+m,g]],S=[[h+m,g],[h+m,g+x]],T=[[h,g+x],[h+m,g+x]],D=sE(t,u,[0,0],!1),R=[],O=[];return D.forEach(function(L){var j=L.line,A=L.lineConstants,C=eO(d,j),k=C.horizontal,M=C.vertical,U=zo(j,A,E,M,1,!0),z=zo(j,A,T,M,1,!0),P=zo(j,A,_,k,1,!0),W=zo(j,A,S,k,1,!0);U.isBound&&!n.top&&(R.push(g),n.top=!0),z.isBound&&!n.bottom&&(R.push(g+x),n.bottom=!0),P.isBound&&!n.left&&(O.push(h),n.left=!0),W.isBound&&!n.right&&(O.push(h+m),n.right=!0)}),{boundMap:n,horizontal:R,vertical:O}}function lH(t,e,n,r){var i=e[0]-t[0],a=e[1]-t[1];if(_e(i)<Bn&&(i=0),_e(a)<Bn&&(a=0),!i)return r?[0,0]:[0,n];if(!a)return r?[n,0]:[0,0];var o=a/i,c=t[1]-o*t[0];if(r){var u=o*(e[0]+n)+c;return[n,u-e[1]]}else{var d=(e[1]+n-c)/o;return[d-e[0],n]}}function i_(t,e,n,r,i){var a=lH(t,e,n,r);if(!a)return{isOutside:!1,offset:[0,0]};var o=Cs(t,e),c=Cs(a,t),u=Cs(a,e),d=c>o||u>o,h=Z(Qa({datas:i,distX:a[0],distY:a[1]}),2),g=h[0],m=h[1];return{offset:[g,m],isOutside:d}}function N0(t,e){return t.isBound?t.offset:e.isSnap?r_(e).offset:0}function cH(t,e,n,r,i){var a=Z(e,2),o=a[0],c=a[1],u=Z(n,2),d=u[0],h=u[1],g=Z(r,2),m=g[0],x=g[1],_=Z(i,2),E=_[0],S=_[1],T=-E,D=-S;if(t&&o&&c){T=0,D=0;var R=[];if(d&&h?R.push([0,S],[E,0]):d?R.push([E,0]):h?R.push([0,S]):m&&x?R.push([0,S],[E,0]):m?R.push([E,0]):x&&R.push([0,S]),R.length){R.sort(function(A,C){return Li(Ge([o,c],A))-Li(Ge([o,c],C))});var O=R[0];if(O[0]&&_e(o)>Bn)T=-O[0],D=c*_e(o+T)/_e(o)-c;else if(O[1]&&_e(c)>Bn){var L=c;D=-O[1],T=o*_e(c+D)/_e(L)-o}if(t&&h&&d)if(_e(T)>Bn&&_e(T)<_e(E)){var j=_e(E)/_e(T);T*=j,D*=j}else if(_e(D)>Bn&&_e(D)<_e(S)){var j=_e(S)/_e(D);T*=j,D*=j}else T=ld(-E,T),D=ld(-S,D)}}else T=o||d?-E:0,D=c||h?-S:0;return[T,D]}function uH(t,e,n,r,i,a){if(!Vd(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=cE(a.absolutePoses,[e,n]),c=ji(o),u=c.left,d=c.right,h=c.top,g=c.bottom,m={horizontal:o.map(function(W){return W[1]}),vertical:o.map(function(W){return W[0]})},x=rE(t.props.snapDirections),_=iE(x,{left:u,right:d,top:h,bottom:g,center:(u+d)/2,middle:(h+g)/2}),E=kv(t,i,_,m),S=E.vertical,T=E.horizontal,D=nH(t,o,a),R=D.vertical,O=D.horizontal,L=S.isSnap,j=T.isSnap,A=S.isBound||R.isBound,C=T.isBound||O.isBound,k=ld(S.offset,R.offset),M=ld(T.offset,O.offset),U=Z(cH(r,[e,n],[A,C],[L,j],[k,M]),2),z=U[0],P=U[1];return[{isBound:A,isSnap:L,offset:z},{isBound:C,isSnap:j,offset:P}]}function kv(t,e,n,r){r===void 0&&(r=n);var i=nE(Rv(t),r.vertical,r.horizontal),a=i.horizontal,o=i.vertical,c=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Dv(t,n.vertical,n.horizontal,void 0,void 0,void 0,void 0),u=c.horizontal,d=c.vertical,h=N0(a[0],u),g=N0(o[0],d),m=_e(h),x=_e(g);return{horizontal:{isBound:a[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:h,dist:m,bounds:a,snap:u},vertical:{isBound:o[0].isBound,isSnap:d.isSnap,snapIndex:d.index,offset:g,dist:x,bounds:o,snap:d}}}function nR(t,e,n,r,i,a,o){o===void 0&&(o=[1,1]);var c=nE(e,n,r),u=c.horizontal,d=c.vertical,h=ZP(t,n,r,[],[],i,a,o),g=h.horizontal,m=h.vertical,x=N0(u[0],g),_=N0(d[0],m),E=_e(x),S=_e(_);return{horizontal:{isBound:u[0].isBound,isSnap:g.isSnap,snapIndex:g.index,offset:x,dist:E,bounds:u,snap:g},vertical:{isBound:d[0].isBound,isSnap:m.isSnap,snapIndex:m.index,offset:_,dist:S,bounds:d,snap:m}}}function dH(t,e,n,r){var i=In(t,e)/Math.PI*180,a=n.vertical,o=a.isBound,c=a.isSnap,u=a.dist,d=n.horizontal,h=d.isBound,g=d.isSnap,m=d.dist,x=i%180,_=x<3||x>177,E=x>87&&x<93;return m<u&&(o||c&&!E&&(!r||!_))?"vertical":h||g&&!_&&(!r||!E)?"horizontal":""}function fH(t,e,n,r,i,a){return n.map(function(o){var c=Z(o,2),u=c[0],d=c[1],h=Wn(e,u),g=Wn(e,d),m=r?hH(t,h,g,i):kv(t,i,{vertical:[g[0]],horizontal:[g[1]]}),x=m.horizontal,_=x.offset,E=x.isBound,S=x.isSnap,T=m.vertical,D=T.offset,R=T.isBound,O=T.isSnap,L=Ge(d,u);if(!D&&!_)return{isBound:R||E,isSnap:O||S,sign:L,offset:[0,0]};var j=dH(h,g,m,r);if(!j)return{sign:L,isBound:!1,isSnap:!1,offset:[0,0]};var A=j==="vertical",C=[0,0];return!r&&_e(d[0])===1&&_e(d[1])===1&&u[0]!==d[0]&&u[1]!==d[1]?C=Qa({datas:a,distX:-D,distY:-_}):C=i_(h,g,-(A?D:_),A,a).offset,C=C.map(function(k,M){return k*(L[M]?2/L[M]:0)}),{sign:L,isBound:A?R:E,isSnap:A?O:S,offset:C}})}function rR(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function hH(t,e,n,r){var i=qq(t,e,n),a=i.horizontal,o=i.vertical,c=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:Zq(t,e,n),u=c.horizontal,d=c.vertical,h=rR(a,u),g=rR(o,d),m=_e(h),x=_e(g);return{horizontal:{isBound:a.isBound,isSnap:u.isSnap,offset:h,dist:m},vertical:{isBound:o.isBound,isSnap:d.isSnap,offset:g,dist:x}}}function pH(t,e,n,r,i){var a=[-n[0],-n[1]],o=t.state,c=o.width,u=o.height,d=t.props.bounds,h=1/0,g=1/0;if(d){var m=[[n[0],-n[1]],[-n[0],n[1]]],x=d.left,_=x===void 0?-1/0:x,E=d.top,S=E===void 0?-1/0:E,T=d.right,D=T===void 0?1/0:T,R=d.bottom,O=R===void 0?1/0:R;m.forEach(function(L){var j=L[0]!==a[0],A=L[1]!==a[1],C=Wn(e,L),k=In(r,C)*360/Math.PI;if(A){var M=C.slice();(_e(k-360)<2||_e(k-180)<2)&&(M[1]=r[1]);var U=i_(r,M,(r[1]<C[1]?O:S)-C[1],!1,i),z=Z(U.offset,2),P=z[1],W=U.isOutside;isNaN(P)||(g=u+(W?1:-1)*_e(P))}if(j){var M=C.slice();(_e(k-90)<2||_e(k-270)<2)&&(M[0]=r[0]);var Q=i_(r,M,(r[0]<C[0]?D:_)-C[0],!0,i),$=Z(Q.offset,1),H=$[0],ee=Q.isOutside;isNaN(H)||(h=c+(ee?1:-1)*_e(H))}})}return{maxWidth:h,maxHeight:g}}var Dr={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.hideThrottleDragRotateLine,i=n.throttleDragRotate,a=n.zoom,o=t.getState(),c=o.dragInfo,u=o.beforeOrigin;if(r||!i||!c)return[];var d=c.dist;if(!d[0]&&!d[1])return[];var h=Li(d),g=In(d,[0,0]);return[e.createElement("div",{className:Be("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(h,"px"),transform:"translate(".concat(u[0],"px, ").concat(u[1],"px) rotate(").concat(g,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,a=t.state,o=a.gestos,c=a.style;if(o.draggable)return!1;o.draggable=i||t.targetGesto,n.datas={},n.left=parseFloat(c.left||"")||0,n.top=parseFloat(c.top||"")||0,n.bottom=parseFloat(c.bottom||"")||0,n.right=parseFloat(c.right||"")||0,n.startValue=[0,0],Rc(t,e),Iv(t,e,"translate"),MH(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var u=ct(t,e,X({set:function(h){n.startValue=h}},Cv(t,e))),d=r||ke(t,"onDragStart",u);return d!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.draggable=null,n.isPinch=!1),n.isDrag?u:!1},drag:function(t,e){if(e){Tv(t,e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,a=e.isPinch,o=e.deltaOffset,c=e.useSnap,u=e.isRequest,d=e.isGroup,h=e.parentThrottleDrag,g=e.distX,m=e.distY,x=n.isDrag,_=n.prevDist,E=n.prevBeforeDist,S=n.startValue;if(x){o&&(g+=o[0],m+=o[1]);var T=t.props,D=T.parentMoveable,R=d?0:T.throttleDrag||h||0,O=r?0:T.throttleDragRotate||0,L=0,j=!1,A=!1,C=!1,k=!1;if(!r&&O>0&&(g||m)){var M=T.startDragRotate||0,U=it(M+In([0,0],[g,m])*180/Math.PI,O)-M,z=m*Math.abs(Math.cos((U-90)/180*Math.PI)),P=g*Math.abs(Math.cos(U/180*Math.PI)),W=Li([P,z]);L=U*Math.PI/180,g=W*Math.cos(L),m=W*Math.sin(L)}if(!a&&!r&&!i){var Q=Z(uH(t,g,m,O,!c&&u||o,n),2),$=Q[0],H=Q[1];j=$.isSnap,A=$.isBound,C=H.isSnap,k=H.isBound;var ee=$.offset,te=H.offset;g+=ee,m+=te}var fe=At(jP({datas:n,distX:g,distY:m}),S),B=At(Tq({datas:n,distX:g,distY:m}),S);VI(B,jr),VI(fe,jr),O||(!j&&!A&&(B[0]=it(B[0],R),fe[0]=it(fe[0],R)),!C&&!k&&(B[1]=it(B[1],R),fe[1]=it(fe[1],R)));var Y=Ge(fe,S),ne=Ge(B,S),ae=Ge(ne,_),he=Ge(Y,E);n.prevDist=ne,n.prevBeforeDist=Y,n.passDelta=ae,n.passDist=ne;var le=n.left+Y[0],ge=n.top+Y[1],xe=n.right-Y[0],Se=n.bottom-Y[1],Ue=Av(n,"translate(".concat(B[0],"px, ").concat(B[1],"px)"),"translate(".concat(ne[0],"px, ").concat(ne[1],"px)"));if(eE(e,Ue),t.state.dragInfo.dist=r?[0,0]:ne,!(!r&&!D&&ae.every(function($e){return!$e})&&he.some(function($e){return!$e}))){var Ee=t.state,Ce=Ee.width,He=Ee.height,je=ct(t,e,X({transform:Ue,dist:ne,delta:ae,translate:B,beforeDist:Y,beforeDelta:he,beforeTranslate:fe,left:le,top:ge,right:xe,bottom:Se,width:Ce,height:He,isPinch:a},Pr({transform:Ue},e)));return!r&&ke(t,"onDrag",je),je}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,X(X({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=hi(t,e,{});return!n&&ke(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n,r,i=e.datas,a=e.clientX,o=e.clientY,c=this.dragStart(t,e);if(!c)return!1;var u=O1(t,this,"dragStart",[a||0,o||0],e,!1,"draggable"),d=u.childEvents,h=u.eventParams,g=X(X({},c),{targets:t.props.targets,events:h}),m=ke(t,"onDragGroupStart",g);i.isDrag=m!==!1;var x=(r=(n=d[0])===null||n===void 0?void 0:n.datas.startValue)!==null&&r!==void 0?r:[0,0];return i.throttleOffset=[x[0]%1,x[1]%1],i.isDrag?c:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,X(X({},e),{parentThrottleDrag:t.props.throttleDrag})),i=e.datas.passDelta,a=O1(t,this,"drag",i,e,!1,"draggable").eventParams;if(r){var o=X({targets:t.props.targets,events:a},r);return ke(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var i=O1(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return ke(t,"onDragGroupEnd",hi(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=!1;return{isControl:!1,requestStart:function(o){return a=o.useSnap,{datas:e,useSnap:a}},request:function(o){return"x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?i=o.y-n.top:"deltaY"in o&&(i+=o.deltaY),{datas:e,distX:r,distY:i,useSnap:a}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:a}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function rO(t,e){var n=Wn(t,e),r=[0,0];return{fixedPosition:n,fixedDirection:e,fixedOffset:r}}function gH(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,o=r?4:3,c=[i/2*(1+e[0]),a/2*(1+e[1])],u=dn(n,c,o),d=[0,0];return{fixedPosition:u,fixedDirection:e,fixedOffset:d}}function iO(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,o=r?4:3,c=Mq(e,i,a),u=dn(n,e,o),d=[i?0:e[0],a?0:e[1]];return{fixedPosition:u,fixedDirection:c,fixedOffset:d}}var iR=fE("resizable"),a_={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:HP("resizable"),dragControlCondition:iR,viewClassName:dE("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,a=e.isGroup,o=e.parentDirection,c=e.parentGesto,u=e.datas,d=e.parentFixedDirection,h=e.parentEvent,g=vO(o,i,r,u),m=t.state,x=m.target,_=m.width,E=m.height,S=m.gestos;if(!g||!x||S.resizable)return!1;S.resizable=c||t.controlGesto,!i&&Rc(t,e),u.datas={},u.direction=g,u.startOffsetWidth=_,u.startOffsetHeight=E,u.prevWidth=0,u.prevHeight=0,u.minSize=[0,0],u.startWidth=m.inlineCSSWidth||m.cssWidth,u.startHeight=m.inlineCSSHeight||m.cssHeight,u.maxSize=[1/0,1/0],a||(u.minSize=[m.minOffsetWidth,m.minOffsetHeight],u.maxSize=[m.maxOffsetWidth,m.maxOffsetHeight]);var T=t.props.transformOrigin||"% %";u.transformOrigin=Qr(T)?T.split(" "):T,u.startOffsetMatrix=m.offsetMatrix,u.startTransformOrigin=m.transformOrigin,u.isWidth=(n=e?.parentIsWidth)!==null&&n!==void 0?n:!g[0]&&!g[1]||g[0]||!g[1];function D(k){u.ratio=k&&isFinite(k)?k:0}u.startPositions=Bi(t.state);function R(k){var M=rO(u.startPositions,k);u.fixedDirection=M.fixedDirection,u.fixedPosition=M.fixedPosition,u.fixedOffset=M.fixedOffset}function O(k){var M=iO(t.state,k);u.fixedDirection=M.fixedDirection,u.fixedPosition=M.fixedPosition,u.fixedOffset=M.fixedOffset}function L(k){u.minSize=[Kt("".concat(k[0]),0)||0,Kt("".concat(k[1]),0)||0]}function j(k){var M=[k[0]||1/0,k[1]||1/0];(!id(M[0])||isFinite(M[0]))&&(M[0]=Kt("".concat(M[0]),0)||1/0),(!id(M[1])||isFinite(M[1]))&&(M[1]=Kt("".concat(M[1]),0)||1/0),u.maxSize=M}D(_/E),R(d||[-g[0],-g[1]]),u.setFixedDirection=R,u.setFixedPosition=O,u.setMin=L,u.setMax=j;var A=ct(t,e,{direction:g,startRatio:u.ratio,set:function(k){var M=Z(k,2),U=M[0],z=M[1];u.startWidth=U,u.startHeight=z},setMin:L,setMax:j,setRatio:D,setFixedDirection:R,setFixedPosition:O,setOrigin:function(k){u.transformOrigin=k},dragStart:Dr.dragStart(t,new sd().dragStart([0,0],e))}),C=h||ke(t,"onResizeStart",A);return u.startFixedDirection=u.fixedDirection,u.startFixedPosition=u.fixedPosition,C!==!1&&(u.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:g}),u.isResize?A:!1},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,a=e.isPinch,o=e.parentKeepRatio,c=e.dragClient,u=e.parentDist,d=e.useSnap,h=e.isRequest,g=e.isGroup,m=e.parentEvent,x=e.resolveMatrix,_=r.isResize,E=r.transformOrigin,S=r.startWidth,T=r.startHeight,D=r.prevWidth,R=r.prevHeight,O=r.minSize,L=r.maxSize,j=r.ratio,A=r.startOffsetWidth,C=r.startOffsetHeight,k=r.isWidth;if(!_)return;if(x){var M=t.state.is3d,U=r.startOffsetMatrix,z=r.startTransformOrigin,P=M?4:3,W=qh(R0(e)),Q=Math.sqrt(W.length);P!==Q&&(W=ca(W,Q,P));var $=Cp(U,W,z,P),H=Dc($,A,C,P);r.startPositions=H,r.nextTargetMatrix=W,r.nextAllMatrix=$}var ee=gc(t.props,"resizable"),te=ee.resizeFormat,fe=ee.throttleResize,B=fe===void 0?i?0:1:fe,Y=ee.parentMoveable,ne=ee.keepRatioFinally,ae=r.direction,he=ae,le=0,ge=0;!ae[0]&&!ae[1]&&(he=[1,1]);var xe=j&&(o??ee.keepRatio)||!1;function Se(){var pt=r.fixedDirection,Vt=EO(he,xe,r,e);le=Vt.distWidth,ge=Vt.distHeight;var gr=he[0]-pt[0]||xe?Math.max(A+le,jr):A,mr=he[1]-pt[1]||xe?Math.max(C+ge,jr):C;return xe&&A&&C&&(k?mr=gr/j:gr=mr*j),[gr,mr]}var Ue=Z(Se(),2),Ee=Ue[0],Ce=Ue[1];m||(r.setFixedDirection(r.fixedDirection),ke(t,"onBeforeResize",ct(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(pt){var Vt;return r.setFixedDirection(pt),Vt=Z(Se(),2),Ee=Vt[0],Ce=Vt[1],[Ee,Ce]},setFixedPosition:function(pt){var Vt;return r.setFixedPosition(pt),Vt=Z(Se(),2),Ee=Vt[0],Ce=Vt[1],[Ee,Ce]},boundingWidth:Ee,boundingHeight:Ce,setSize:function(pt){var Vt;Vt=Z(pt,2),Ee=Vt[0],Ce=Vt[1]}},!0)));var He=c;c||(!i&&a?He=jq(t,[0,0]):He=r.fixedPosition);var je=[0,0];a||(je=kH(t,Ee,Ce,ae,He,!d&&h,r)),u&&(!u[0]&&(je[0]=0),!u[1]&&(je[1]=0));function $e(){var pt;te&&(pt=Z(te([Ee,Ce]),2),Ee=pt[0],Ce=pt[1]),Ee=it(Ee,B),Ce=it(Ce,B)}if(xe){he[0]&&he[1]&&je[0]&&je[1]&&(_e(je[0])>_e(je[1])?je[1]=0:je[0]=0);var Qe=!je[0]&&!je[1];Qe&&$e(),he[0]&&!he[1]||je[0]&&!je[1]||Qe&&k?(Ee+=je[0],Ce=Ee/j):(!he[0]&&he[1]||!je[0]&&je[1]||Qe&&!k)&&(Ce+=je[1],Ee=Ce*j)}else Ee+=je[0],Ce+=je[1],Ee=Math.max(0,Ee),Ce=Math.max(0,Ce);n=Z(XM([Ee,Ce],O,L,xe?j:!1),2),Ee=n[0],Ce=n[1],$e(),xe&&(g||ne)&&(k?Ce=Ee/j:Ee=Ce*j),le=Ee-A,ge=Ce-C;var vt=[le-D,ge-R];r.prevWidth=le,r.prevHeight=ge;var yt=Vq(t,Ee,Ce,He,E,r);if(!(!Y&&vt.every(function(pt){return!pt})&&yt.every(function(pt){return!pt}))){var Pe=Dr.drag(t,Ap(e,t.state,yt,!!a,!1,"draggable")),Ye=Pe.transform,Pt=S+le,wn=T+ge,cn=ct(t,e,X({width:Pt,height:wn,offsetWidth:Math.round(Ee),offsetHeight:Math.round(Ce),startRatio:j,boundingWidth:Ee,boundingHeight:Ce,direction:ae,dist:[le,ge],delta:vt,isPinch:!!a,drag:Pe},bO({style:{width:"".concat(Pt,"px"),height:"".concat(wn,"px")},transform:Ye},Pe,e)));return!m&&ke(t,"onResize",cn),cn}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,a=n.startOffsetHeight,o=n.prevWidth,c=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var u=t.state,d=u.width,h=u.height,g=d-(i+o),m=h-(a+c),x=_e(g)>3,_=_e(m)>3;if(x&&(n.startWidth+=g,n.startOffsetWidth+=g,n.prevWidth+=g),_&&(n.startHeight+=m,n.startOffsetHeight+=m,n.prevHeight+=m),x||_)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=hi(t,e,{});return!r&&ke(t,"onResizeEnd",i),i}},dragGroupControlCondition:iR,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,X(X({},e),{isGroup:!0}));if(!r)return!1;var i=sa(t,"resizable",e),a=n.startOffsetWidth,o=n.startOffsetHeight;function c(){var x=n.minSize;i.forEach(function(_){var E=_.datas,S=E.minSize,T=E.startOffsetWidth,D=E.startOffsetHeight,R=a*(T?S[0]/T:0),O=o*(D?S[1]/D:0);x[0]=Math.max(x[0],R),x[1]=Math.max(x[1],O)})}function u(){var x=n.maxSize;i.forEach(function(_){var E=_.datas,S=E.maxSize,T=E.startOffsetWidth,D=E.startOffsetHeight,R=a*(T?S[0]/T:0),O=o*(D?S[1]/D:0);x[0]=Math.min(x[0],R),x[1]=Math.min(x[1],O)})}var d=Is(t,this,"dragControlStart",e,function(x,_){return D0(t,x,n,_)});c(),u();var h=function(x){r.setFixedDirection(x),d.forEach(function(_,E){_.setFixedDirection(x),D0(t,_.moveable,n,i[E])})};n.setFixedDirection=h;var g=X(X({},r),{targets:t.props.targets,events:d.map(function(x){return X(X({},x),{setMin:function(_){x.setMin(_),c()},setMax:function(_){x.setMax(_),u()}})}),setFixedDirection:h,setMin:function(x){r.setMin(x),c()},setMax:function(x){r.setMax(x),u()}}),m=ke(t,"onResizeGroupStart",g);return n.isResize=m!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=gc(t.props,"resizable");Mv(t,"onBeforeResize",function(x){ke(t,"onBeforeResizeGroup",ct(t,e,X(X({},x),{targets:r.targets}),!0))});var i=this.dragControl(t,X(X({},e),{isGroup:!0}));if(i){var a=i.boundingWidth,o=i.boundingHeight,c=i.dist,u=r.keepRatio,d=[a/(a-c[0]),o/(o-c[1])],h=n.fixedPosition,g=Is(t,this,"dragControl",e,function(x,_){var E=Z(Ar(Ep(t.rotation/180*Math.PI,3),[_.datas.originalX*d[0],_.datas.originalY*d[1],1],3),2),S=E[0],T=E[1];return X(X({},_),{parentDist:null,parentScale:d,dragClient:At(h,[S,T]),parentKeepRatio:u})}),m=X({targets:r.targets,events:g},i);return ke(t,"onResizeGroup",m),m}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var i=Is(t,this,"dragControlEnd",e),a=hi(t,e,{targets:t.props.targets,events:i});return ke(t,"onResizeGroupEnd",a),n}},request:function(t){var e={},n=0,r=0,i=!1,a=t.getRect();return{isControl:!0,requestStart:function(o){var c;return i=o.useSnap,{datas:e,parentDirection:o.direction||[1,1],parentIsWidth:(c=o?.horizontal)!==null&&c!==void 0?c:!0,useSnap:i}},request:function(o){return"offsetWidth"in o?n=o.offsetWidth-a.offsetWidth:"deltaWidth"in o&&(n+=o.deltaWidth),"offsetHeight"in o?r=o.offsetHeight-a.offsetHeight:"deltaHeight"in o&&(r+=o.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:o.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function V1(t,e,n,r,i){var a=t.props.groupable,o=t.state,c=o.is3d?4:3,u=e.origin,d=dn(t.state.rootMatrix,Ge([u[0],u[1]],a?[0,0]:[o.left,o.top]),c),h=At([i.left,i.top],d);e.startAbsoluteOrigin=h,e.prevDeg=In(h,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=Cs(h,[n,r])}function Zm(t,e,n){var r=n.defaultDeg,i=n.prevDeg,a=i%360,o=Math.floor(i/360);a<0&&(a+=360),a>t&&a>270&&t<90?++o:a<t&&a<90&&t>270&&--o;var c=e*(o*360+t-r);return n.prevDeg=r+c,c}function j1(t,e,n,r){return Zm(In(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function z1(t,e,n,r,i,a){var o=t.props.throttleRotate,c=o===void 0?0:o,u=n.prevSnapDeg,d=0,h=!1;if(a){var g=DH(t,e,r,i+r);h=g.isSnap,d=i+g.dist}h||(d=it(i+r,c));var m=d-i;return n.prevSnapDeg=m,[m-u,m,d]}function aO(t,e,n){var r=Z(e,4),i=r[0],a=r[1],o=r[2],c=r[3];if(t==="none")return[];if(Fn(t))return t.map(function(S){return aO(S,[i,a,o,c],n)[0]});var u=Z((t||"top").split("-"),2),d=u[0],h=u[1],g=[i,a];d==="left"?g=[o,i]:d==="right"?g=[a,c]:d==="bottom"&&(g=[c,o]);var m=[(g[0][0]+g[1][0])/2,(g[0][1]+g[1][1])/2],x=gO(g,n);if(h){var _=h==="top"||h==="left",E=d==="bottom"||d==="left";m=g[_&&!E||!_&&E?0:1]}return[[m,x]]}function s_(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(Xn(n,Be("rotation-control"))||t.props.rotateAroundControls&&Xn(n,Be("around-control"))||Xn(n,Be("control"))&&Xn(n,Be("rotatable")))return!0;var r=t.props.rotationTarget;return r?hE(r,!0).some(function(i){return i?n===i||n.contains(i):!1}):!1}var mH=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,vH={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[mH],viewClassName:function(t){return t.isDragging("rotatable")?Be("view-rotation-dragging"):""},render:function(t,e){var n=gc(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,a=n.zoom,o=n.renderDirections,c=n.rotateAroundControls,u=n.resolveAblesWithRotatable,d=t.getState(),h=d.renderPoses,g=d.direction;if(!r)return null;var m=aO(i,h,g),x=[];if(m.forEach(function(T,D){var R=Z(T,2),O=R[0],L=R[1];x.push(e.createElement("div",{key:"rotation".concat(D),className:Be("rotation"),style:{transform:"translate(-50%) translate(".concat(O[0],"px, ").concat(O[1],"px) rotate(").concat(L,"rad)")}},e.createElement("div",{className:Be("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:Be("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),o){var _=Ps(u||{}),E={};_.forEach(function(T){u[T].forEach(function(D){E[D]=T})});var S=[];Fn(o)&&(S=o.map(function(T){var D=E[T];return{data:D?{resolve:D}:{},classNames:D?["move"]:[],dir:T}})),x.push.apply(x,Ae([],Z(FP(t,"rotatable",S,e)),!1))}return c&&x.push.apply(x,Ae([],Z(YP(t,e)),!1)),x},dragControlCondition:s_,dragControlStart:function(t,e){var n,r,i=e.datas,a=e.clientX,o=e.clientY,c=e.parentRotate,u=e.parentFlag,d=e.isPinch,h=e.isRequest,g=t.state,m=g.target,x=g.left,_=g.top,E=g.direction,S=g.beforeDirection,T=g.targetTransform,D=g.moveableClientRect,R=g.offsetMatrix,O=g.targetMatrix,L=g.allMatrix,j=g.width,A=g.height;if(!h&&!m)return!1;var C=t.getRect();i.rect=C,i.transform=T,i.left=x,i.top=_;var k=function(he){var le=iO(t.state,he);i.fixedDirection=le.fixedDirection,i.fixedOffset=le.fixedOffset,i.fixedPosition=le.fixedPosition,B&&B.setFixedPosition(he)},M=function(he){var le=gH(t.state,he);i.fixedDirection=le.fixedDirection,i.fixedOffset=le.fixedOffset,i.fixedPosition=le.fixedPosition,B&&B.setFixedDirection(he)},U=a,z=o;if(h||d||u){var P=c||0;i.beforeInfo={origin:C.beforeOrigin,prevDeg:P,defaultDeg:P,prevSnapDeg:0,startDist:0},i.afterInfo=X(X({},i.beforeInfo),{origin:C.origin}),i.absoluteInfo=X(X({},i.beforeInfo),{origin:C.origin,startValue:P})}else{var W=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(W){var Q=W.getAttribute("data-direction")||"",$=Eq[Q];if($){i.isControl=!0,i.isAroundControl=Xn(W,Be("around-control")),i.controlDirection=$;var H=W.getAttribute("data-resolve");H&&(i.resolveAble=H);var ee=$H(g.rootMatrix,g.renderPoses,D);n=Z(Wn(ee,$),2),U=n[0],z=n[1]}}i.beforeInfo={origin:C.beforeOrigin},i.afterInfo={origin:C.origin},i.absoluteInfo={origin:C.origin,startValue:C.rotation};var te=k;k=function(he){var le=g.is3d?4:3,ge=Z(At(_P(O,le),he),2),xe=ge[0],Se=ge[1],Ue=Ar(R,fc([xe,Se],le)),Ee=Ar(L,fc([he[0],he[1]],le));te(he);var Ce=g.posDelta;i.beforeInfo.origin=Ge(Ue,Ce),i.afterInfo.origin=Ge(Ee,Ce),i.absoluteInfo.origin=Ge(Ee,Ce),V1(t,i.beforeInfo,U,z,D),V1(t,i.afterInfo,U,z,D),V1(t,i.absoluteInfo,U,z,D)},M=function(he){var le=Wn([[0,0],[j,0],[0,A],[j,A]],he);k(le)}}i.startClientX=U,i.startClientY=z,i.direction=E,i.beforeDirection=S,i.startValue=0,i.datas={},Iv(t,e,"rotate");var fe=!1,B=!1;if(i.isControl&&i.resolveAble){var Y=i.resolveAble;Y==="resizable"&&(B=a_.dragControlStart(t,X(X({},new sd("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}B||(fe=Dr.dragStart(t,new sd().dragStart([0,0],e))),k(YH(t));var ne=ct(t,e,X(X({set:function(he){i.startValue=he*Math.PI/180},setFixedDirection:M,setFixedPosition:k},Cv(t,e)),{dragStart:fe,resizeStart:B})),ae=ke(t,"onRotateStart",ne);return i.isRotate=ae!==!1,g.snapRenderInfo={request:e.isRequest},i.isRotate?ne:!1},dragControl:function(t,e){var n,r,i,a=e.datas,o=e.clientDistX,c=e.clientDistY,u=e.parentRotate,d=e.parentFlag,h=e.isPinch,g=e.groupDelta,m=e.resolveMatrix,x=a.beforeDirection,_=a.beforeInfo,E=a.afterInfo,S=a.absoluteInfo,T=a.isRotate,D=a.startValue,R=a.rect,O=a.startClientX,L=a.startClientY;if(T){Tv(t,e,"rotate");var j=Sq(e),A=x*j,C=t.props.parentMoveable,k=0,M,U,z=0,P,W,Q=0,$,H,ee=180/Math.PI*D,te=S.startValue,fe=!1,B=O+o,Y=L+c;if(!d&&"parentDist"in e){var ne=e.parentDist;M=ne,P=ne,$=ne}else h||d?(M=Zm(u,x,_),P=Zm(u,A,E),$=Zm(u,A,S)):(M=j1(B,Y,x,_),P=j1(B,Y,A,E),$=j1(B,Y,A,S),fe=!0);if(U=ee+M,W=ee+P,H=te+$,ke(t,"onBeforeRotate",ct(t,e,{beforeRotation:U,rotation:W,absoluteRotation:H,setRotation:function(He){P=He-ee,M=P,$=P}},!0)),n=Z(z1(t,R,_,M,ee,fe),3),k=n[0],M=n[1],U=n[2],r=Z(z1(t,R,E,P,ee,fe),3),z=r[0],P=r[1],W=r[2],i=Z(z1(t,R,S,$,te,fe),3),Q=i[0],$=i[1],H=i[2],!(!Q&&!z&&!k&&!C&&!m)){var ae=Av(a,"rotate(".concat(W,"deg)"),"rotate(".concat(P,"deg)"));m&&(a.fixedPosition=tE(t,a.targetAllTransform,a.fixedDirection,a.fixedOffset,a));var he=Oq(t,P,a),le=Ge(At(g||[0,0],he),a.prevInverseDist||[0,0]);a.prevInverseDist=he,a.requestValue=null;var ge=LP(t,ae,le,h,e),xe=ge,Se=Cs([B,Y],S.startAbsoluteOrigin)-S.startDist,Ue=void 0;if(a.resolveAble==="resizable"){var Ee=a_.dragControl(t,X(X({},Ap(e,t.state,[e.deltaX,e.deltaY],!!h,!1,"resizable")),{resolveMatrix:!0,parentDistance:Se}));Ee&&(Ue=Ee,xe=bO(xe,Ee,e))}var Ce=ct(t,e,X(X({delta:z,dist:P,rotate:W,rotation:W,beforeDist:M,beforeDelta:k,beforeRotate:U,beforeRotation:U,absoluteDist:$,absoluteDelta:Q,absoluteRotate:H,absoluteRotation:H,isPinch:!!h,resize:Ue},ge),xe));return ke(t,"onRotate",Ce),Ce}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=hi(t,e,{});return ke(t,"onRotateEnd",r),r}},dragGroupControlCondition:s_,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,a=r.top,o=r.beforeOrigin,c=this.dragControlStart(t,e);if(!c)return!1;c.set(n.beforeDirection*t.rotation);var u=Is(t,this,"dragControlStart",e,function(g,m){var x=g.state,_=x.left,E=x.top,S=x.beforeOrigin,T=At(Ge([_,E],[i,a]),Ge(S,o));return m.datas.startGroupClient=T,m.datas.groupClient=T,X(X({},m),{parentRotate:0})}),d=X(X({},c),{targets:t.props.targets,events:u}),h=ke(t,"onRotateGroupStart",d);return n.isRotate=h!==!1,n.isRotate?c:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){Mv(t,"onBeforeRotate",function(d){ke(t,"onBeforeRotateGroup",ct(t,e,X(X({},d),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,a=r.beforeDist,o=a/180*Math.PI,c=Is(t,this,"dragControl",e,function(d,h){var g=h.datas.startGroupClient,m=Z(h.datas.groupClient,2),x=m[0],_=m[1],E=Z(wp(g,o*i),2),S=E[0],T=E[1],D=[S-x,T-_];return h.datas.groupClient=[S,T],X(X({},h),{parentRotate:a,groupDelta:D})});t.rotation=i*r.beforeRotation;var u=X({targets:t.props.targets,events:c,set:function(d){t.rotation=d},setGroupRotation:function(d){t.rotation=d}},r);return ke(t,"onRotateGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var i=Is(t,this,"dragControlEnd",e),a=hi(t,e,{targets:t.props.targets,events:i});return ke(t,"onRotateGroupEnd",a),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?n+=i.deltaRotate:"rotate"in i&&(n=i.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function yH(t,e){var n,r=t.direction,i=t.classNames,a=t.size,o=t.pos,c=t.zoom,u=t.key,d=r==="horizontal",h=d?"Y":"X";return e.createElement("div",{key:u,className:i.join(" "),style:(n={},n[d?"width":"height"]="".concat(a),n.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(h,"(-50%) scale").concat(h,"(").concat(c,")"),n)})}function oE(t,e){return yH(X(X({},t),{classNames:Ae([Be("line","guideline",t.direction)],Z(t.classNames),!1).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(it(n,.1),"px")})}),e)}function aR(t,e,n,r,i,a,o,c){var u=t.props.zoom;return n.map(function(d,h){var g=d.type,m=d.pos,x=[0,0];return x[o]=r,x[o?0:1]=-i+m,oE({key:"".concat(e,"TargetGuideline").concat(h),classNames:[Be("target","bold",g)],posValue:x,sizeValue:a,zoom:u,direction:e},c)})}function sR(t,e,n,r,i,a){var o=t.props,c=o.zoom,u=o.isDisplayInnerSnapDigit,d=e==="horizontal"?Qo:Zo,h=i[d.start],g=i[d.end];return n.filter(function(m){var x=m.hide,_=m.elementRect;if(x)return!1;if(u&&_){var E=_.rect;if(E[d.start]<=h&&g<=E[d.end])return!1}return!0}).map(function(m,x){var _=m.pos,E=m.size,S=m.element,T=m.className,D=[-r[0]+_[0],-r[1]+_[1]];return oE({key:"".concat(e,"-default-guideline-").concat(x),classNames:S?[Be("bold"),T]:[Be("normal"),T],direction:e,posValue:D,sizeValue:E,zoom:c},a)})}function nh(t,e,n,r,i,a,o,c){var u,d=t.props,h=d.snapDigit,g=h===void 0?0:h,m=d.isDisplaySnapDigit,x=m===void 0?!0:m,_=d.snapDistFormat,E=_===void 0?function(L,j){return L}:_,S=d.zoom,T=e==="horizontal"?"X":"Y",D=e==="vertical"?"height":"width",R=Math.abs(i),O=x?parseFloat(R.toFixed(g)):0;return c.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:Be("guideline-group",e),style:(u={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},u[D]="".concat(R,"px"),u)},oE({direction:e,classNames:[Be(n),o],size:"100%",posValue:[0,0],sizeValue:R,zoom:S},c),c.createElement("div",{className:Be("size-value","gap"),style:{transform:"translate".concat(T,"(-50%) scale(").concat(S,")")}},O>0?E(O,e):""))}function bH(t,e,n,r){var i=t==="vertical"?0:1,a=t==="vertical"?1:0,o=i?Qo:Zo,c=n[o.start],u=n[o.end];return xO(e,function(d){return d.pos[i]}).map(function(d){var h=[],g=[],m=[];return d.forEach(function(x){var _,E,S=x.element,T=x.elementRect.rect;if(T[o.end]<c)h.push(x);else if(u<T[o.start])g.push(x);else if(T[o.start]<=c&&u<=T[o.end]&&r){var D=x.pos,R={element:S,rect:X(X({},T),(_={},_[o.end]=T[o.start],_))},O={element:S,rect:X(X({},T),(E={},E[o.start]=T[o.end],E))},L=[0,0],j=[0,0];L[i]=D[i],L[a]=D[a],j[i]=D[i],j[a]=D[a]+x.size,h.push({type:t,pos:L,size:0,elementRect:R,direction:"",elementDirection:"end"}),g.push({type:t,pos:j,size:0,elementRect:O,direction:"",elementDirection:"start"})}}),h.sort(function(x,_){return _.pos[a]-x.pos[a]}),g.sort(function(x,_){return x.pos[a]-_.pos[a]}),{total:d,start:h,end:g,inner:m}})}function xH(t,e,n,r,i){var a=t.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(c){var u=e.filter(function(S){return S.type===c}),d=c==="vertical"?1:0,h=d?0:1,g=bH(c,u,r,a),m=d?Zo:Qo,x=d?Qo:Zo,_=r[m.start],E=r[m.end];g.forEach(function(S){var T=S.total,D=S.start,R=S.end,O=S.inner,L=n[h]+T[0].pos[h]-r[x.start],j=r;D.forEach(function(A){var C=A.elementRect.rect,k=j[m.start]-C[m.end];if(k>0){var M=[0,0];M[d]=n[d]+j[m.start]-_-k,M[h]=L,o.push(nh(t,c,"dashed",o.length,k,M,A.className,i))}j=C}),j=r,R.forEach(function(A){var C=A.elementRect.rect,k=C[m.start]-j[m.end];if(k>0){var M=[0,0];M[d]=n[d]+j[m.end]-_,M[h]=L,o.push(nh(t,c,"dashed",o.length,k,M,A.className,i))}j=C}),O.forEach(function(A){var C=A.elementRect.rect,k=_-C[m.start],M=C[m.end]-E,U=[0,0],z=[0,0];U[d]=n[d]-k,U[h]=L,z[d]=n[d]+E-_,z[h]=L,o.push(nh(t,c,"dashed",o.length,k,U,A.className,i)),o.push(nh(t,c,"dashed",o.length,M,z,A.className,i))})})}),o}function _H(t,e,n,r,i){var a=[];return["horizontal","vertical"].forEach(function(o){var c=e.filter(function(S){return S.type===o}).slice(0,1),u=o==="vertical"?0:1,d=u?0:1,h=u?Zo:Qo,g=u?Qo:Zo,m=r[h.start],x=r[h.end],_=r[g.start],E=r[g.end];c.forEach(function(S){var T=S.gap,D=S.gapRects,R=Math.max.apply(Math,Ae([_],Z(D.map(function(j){var A=j.rect;return A[g.start]})),!1)),O=Math.min.apply(Math,Ae([E],Z(D.map(function(j){var A=j.rect;return A[g.end]})),!1)),L=(R+O)/2;R===O||L===(_+E)/2||D.forEach(function(j){var A=j.rect,C=j.className,k=[n[0],n[1]];if(A[h.end]<m)k[u]+=A[h.end]-m;else if(x<A[h.start])k[u]+=A[h.start]-m-T;else return;k[d]+=L-_,a.push(nh(t,u?"vertical":"horizontal","gap",a.length,T,k,C,i))})})}),a}function o_(t){var e,n,r=t.state,i=r.containerClientRect,a=r.hasFixed,o=i.overflow,c=i.scrollHeight,u=i.scrollWidth,d=i.clientHeight,h=i.clientWidth,g=i.clientLeft,m=i.clientTop,x=t.props,_=x.snapGap,E=_===void 0?!0:_,S=x.verticalGuidelines,T=x.horizontalGuidelines,D=x.snapThreshold,R=D===void 0?5:D,O=x.maxSnapElementGuidelineDistance,L=O===void 0?1/0:O,j=x.isDisplayGridGuidelines,A=ji(Bi(t.state)),C=A.top,k=A.left,M=A.bottom,U=A.right,z={top:C,left:k,bottom:M,right:U,center:(k+U)/2,middle:(C+M)/2},P=TH(t),W=Ae([],Z(P),!1),Q=((n=(e=r.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&n!==void 0?n:[1,1]).map(function(te){return te*R});E&&W.push.apply(W,Ae([],Z(wH(t,z,Q)),!1));var $=X({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(W.push.apply(W,Ae([],Z(SH(t,o?u:h,o?c:d,g,m,$,j)),!1)),a){var H=i.left,ee=i.top;$.left+=H,$.top+=ee,$.right+=H,$.bottom+=ee}return W.push.apply(W,Ae([],Z(oO(T||!1,S||!1,o?u:h,o?c:d,g,m,$)),!1)),W=W.filter(function(te){var fe=te.element,B=te.elementRect,Y=te.type;if(!fe||!B)return!0;var ne=B.rect;return sO(z,ne,Y,L)}),W}function wH(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,o=r.maxSnapElementGapDistance,c=o===void 0?1/0:o,u=t.state.elementRects,d=[];return[["vertical",Qo,Zo],["horizontal",Zo,Qo]].forEach(function(h){var g=Z(h,3),m=g[0],x=g[1],_=g[2],E=e[x.start],S=e[x.end],T=e[x.center],D=e[_.start],R=e[_.end],O={left:n[0],top:n[1]};function L(C){var k=C.rect,M=O[x.start];return k[x.end]<E+M?E-k[x.end]:S-M<k[x.start]?k[x.start]-S:-1}var j=u.filter(function(C){var k=C.rect;return k[_.start]>R||k[_.end]<D?!1:L(C)>0}).sort(function(C,k){return L(C)-L(k)}),A=[];j.forEach(function(C){j.forEach(function(k){if(C!==k){var M=C.rect,U=k.rect,z=M[_.start],P=M[_.end],W=U[_.start],Q=U[_.end];z>Q||W>P||A.push([C,k])}})}),A.forEach(function(C){var k=Z(C,2),M=k[0],U=k[1],z=M.rect,P=U.rect,W=z[x.start],Q=z[x.end],$=P[x.start],H=P[x.end],ee=O[x.start],te=0,fe=0,B=!1,Y=!1,ne=!1;if(Q<=E&&S<=$){if(Y=!0,te=($-Q-(S-E))/2,fe=Q+te+(S-E)/2,_e(fe-T)>ee)return}else if(Q<$&&H<E+ee){if(B=!0,te=$-Q,fe=H+te,_e(fe-E)>ee)return}else if(Q<$&&S-ee<W){if(ne=!0,te=$-Q,fe=W-te,_e(fe-S)>ee)return}else return;te&&sO(e,P,m,a)&&(te>c||d.push({type:m,pos:m==="vertical"?[fe,0]:[0,fe],element:U.element,size:0,className:U.className,isStart:B,isCenter:Y,isEnd:ne,gap:te,hide:!0,gapRects:[M,U],direction:"",elementDirection:""}))})}),d}function EH(t,e,n,r){var i,a,o=t.props,c=t.state,u=o.snapGridAll,d=o.snapGridWidth,h=d===void 0?0:d,g=o.snapGridHeight,m=g===void 0?0:g,x=c.snapRenderInfo,_=x&&(((i=x.direction)===null||i===void 0?void 0:i[0])||((a=x.direction)===null||a===void 0?void 0:a[1])),E=t.moveables;if(u&&E&&_&&(h||m)){if(c.snapThresholdInfo)return;c.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var S=t.getRect(),T=S.children,D=x.direction;if(T){var R=D.map(function(L,j){var A=j===0?{snapSize:h,posName:"left",sizeName:"width",clientOffset:r.left-e}:{snapSize:m,posName:"top",sizeName:"height",clientOffset:r.top-n},C=A.snapSize,k=A.posName,M=A.sizeName,U=A.clientOffset;if(!C)return{dir:L,multiple:1,snapSize:C,snapOffset:0};var z=S[M],P=S[k],W=WM(T.map(function(B){return[B[k]-P,B[M],z-B[M]-B[k]+P]})).filter(function(B){return B}).sort(function(B,Y){return B-Y}),Q=W[0],$=W.map(function(B){return it(B/Q,.1)*C}),H=1,ee=it(z/Q,.1);for(H=1;H<=10&&!$.every(function(B){return B*H%1===0});++H);var te=(-L+1)/2,fe=T0(P-U,P-U+z,te,1-te);return{multiple:ee*H,dir:L,snapSize:C,snapOffset:Math.round(fe/C)}}),O=R.map(function(L){return L.multiple||1});c.snapThresholdInfo.multiples=O,c.snapThresholdInfo.offset=R.map(function(L){return L.snapOffset}),R.forEach(function(L,j){L.snapSize})}}else c.snapThresholdInfo=null}function SH(t,e,n,r,i,a,o){r===void 0&&(r=0),i===void 0&&(i=0);var c=t.props,u=t.state,d=c.snapGridWidth,h=d===void 0?0:d,g=c.snapGridHeight,m=g===void 0?0:g,x=[],_=a.left,E=a.top,S=[0,0];EH(t,r,i,a);var T=u.snapThresholdInfo,D=h,R=m;if(T&&(h*=T.multiples[0]||1,m*=T.multiples[1]||1,S=T.offset),m){for(var O=function(j){x.push({type:"horizontal",pos:[_,it(S[1]*R+j-i+E,.1)],className:Be("grid-guideline"),size:e,hide:!o,direction:"",grid:!0})},L=0;L<=n*2;L+=m)O(L);for(var L=-m;L>=-n;L-=m)O(L)}if(h){for(var O=function(A){x.push({type:"vertical",pos:[it(S[0]*D+A-r+_,.1),E],className:Be("grid-guideline"),size:n,hide:!o,direction:"",grid:!0})},L=0;L<=e*2;L+=h)O(L);for(var L=-h;L>=-e;L-=h)O(L)}return x}function sO(t,e,n,r){return n==="horizontal"?_e(t.right-e.left)<=r||_e(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?_e(t.bottom-e.top)<=r||_e(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function TH(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(m){return!m.refresh}),a=r.map(function(m){return la(m)&&"element"in m?X(X({},m),{element:ja(m.element,!0)}):{element:ja(m,!0)}}).filter(function(m){return m.element}),o=jG(i.map(function(m){return m.element}),a.map(function(m){return m.element})),c=o.maintained,u=o.added,d=[];c.forEach(function(m){var x=Z(m,2),_=x[0],E=x[1];d[E]=i[_]}),AH(t,u.map(function(m){return a[m]})).map(function(m,x){d[u[x]]=m}),e.elementRects=d;var h=rE(t.props.elementSnapDirections),g=[];return d.forEach(function(m){var x=m.element,_=m.top,E=_===void 0?h.top:_,S=m.left,T=S===void 0?h.left:S,D=m.right,R=D===void 0?h.right:D,O=m.bottom,L=O===void 0?h.bottom:O,j=m.center,A=j===void 0?h.center:j,C=m.middle,k=C===void 0?h.middle:C,M=m.className,U=m.rect,z=iE({top:E,right:R,left:T,bottom:L,center:A,middle:k},U),P=z.horizontal,W=z.vertical,Q=z.horizontalNames,$=z.verticalNames,H=U.top,ee=U.left,te=U.right-ee,fe=U.bottom-H,B=[te,fe];W.forEach(function(Y,ne){g.push({type:"vertical",element:x,pos:[it(Y,.1),H],size:fe,sizes:B,className:M,elementRect:m,elementDirection:QI[$[ne]]||$[ne],direction:""})}),P.forEach(function(Y,ne){g.push({type:"horizontal",element:x,pos:[ee,it(Y,.1)],size:te,sizes:B,className:M,elementRect:m,elementDirection:QI[Q[ne]]||Q[ne],direction:""})})}),g}function oR(t,e){return t?t.map(function(n){var r=la(n)?n:{pos:n},i=r.pos;return id(i)?r:X(X({},r),{pos:Kt(i,e)})}):[]}function oO(t,e,n,r,i,a,o){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o={left:0,top:0,right:0,bottom:0});var c=[],u=o.left,d=o.top,h=o.bottom,g=o.right,m=n+g-u,x=r+h-d;return oR(t,x).forEach(function(_){c.push({type:"horizontal",pos:[u,it(_.pos-a+d,.1)],size:m,className:_.className,direction:""})}),oR(e,m).forEach(function(_){c.push({type:"vertical",pos:[it(_.pos-i+u,.1),d],size:x,className:_.className,direction:""})}),c}function AH(t,e){if(!e.length)return[];var n=t.props.groupable,r=t.state,i=r.containerClientRect,a=r.rootMatrix,o=r.is3d,c=r.offsetDelta,u=o?4:3,d=Z(Wq(a,i,u),2),h=d[0],g=d[1],m=n?0:c[0],x=n?0:c[1];return e.map(function(_){var E=_.element.getBoundingClientRect(),S=E.left-h-m,T=E.top-g-x,D=T+E.height,R=S+E.width,O=Z(cd(a,[S,T],u),2),L=O[0],j=O[1],A=Z(cd(a,[R,D],u),2),C=A[0],k=A[1];return X(X({},_),{rect:{left:L,right:C,top:j,bottom:k,center:(L+C)/2,middle:(j+k)/2}})})}function Im(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(n!==r){var o=ja(r,!0);if(o){var c=xh(o),u=hR(e,[c.left-i.left,c.top-i.top]),d=hR(e,[c.right-i.right,c.bottom-i.bottom]);a.left=it(u[0],1e-5),a.top=it(u[1],1e-5),a.right=it(d[0],1e-5),a.bottom=it(d[1],1e-5)}}return e.snapContainer=r,e.snapOffset=a,e.guidelines=o_(t),e.enableSnap=!0,!0}function lO(t,e,n,r,i,a){var o=Dc(t,e,n,a?4:3),c=Wn(o,r);return cE(o,Ge(i,c))}function lR(t){return t?t/_e(t):0}function CH(t,e,n,r,i,a){var o=a.fixedDirection,c=eH(n,o,r),u=sE(t,e,n,r),d=Ae(Ae([],Z(fH(t,e,c,r,i,a)),!1),Z(nO(t,u,a)),!1),h=k0(d,0),g=k0(d,1);return{width:{isBound:h.isBound,offset:h.offset[0]},height:{isBound:g.isBound,offset:g.offset[1]}}}function IH(t,e,n,r,i,a,o,c,u){var d=Wn(e,o),h=kv(t,c,{vertical:[d[0]],horizontal:[d[1]]}),g=h.horizontal.offset,m=h.vertical.offset;if(it(m,e_)||it(g,e_)){var x=Z(Qa({datas:u,distX:-m,distY:-g}),2),_=x[0],E=x[1],S=Math.min(i||1/0,n+o[0]*_),T=Math.min(a||1/0,r+o[1]*E);return[S-n,T-r]}return[0,0]}function cO(t,e,n,r,i,a,o,c){for(var u=Bi(t.state),d=t.props.keepRatio,h=0,g=0,m=0;m<2;++m){var x=e(h,g),_=CH(t,x,i,d,o,c),E=_.width,S=_.height,T=E.isBound,D=S.isBound,R=E.offset,O=S.offset;if(m===1&&(T||(R=0),D||(O=0)),m===0&&o&&!T&&!D)return[0,0];if(d){var L=_e(R)*(n?1/n:1),j=_e(O)*(r?1/r:1),A=T&&D?L<j:D||!T&&L<j;A?R=n*O/r:O=r*R/n}h+=R,g+=O}if(!d&&i[0]&&i[1]){var C=pH(t,u,i,a,c),k=C.maxWidth,M=C.maxHeight,U=Z(IH(t,e(h,g).map(function(W){return W.map(function(Q){return it(Q,e_)})}),n+h,r+g,k,M,i,o,c),2),R=U[0],O=U[1];h+=R,g+=O}return[h,g]}function yh(t){return t<0&&(t=t%360+360),t%=360,t}function RH(t,e){e=yh(e);var n=Math.floor(t/360),r=n*360+360-e,i=n*360+e;return _e(t-r)<_e(t-i)?r:i}function L1(t,e){t=yh(t),e=yh(e);var n=yh(t-e);return Math.min(n,360-n)}function DH(t,e,n,r){var i,a=t.props,o=(i=a[KP])!==null&&i!==void 0?i:5,c=a[XP];if(Vd(t,"rotatable")){var u=e.pos1,d=e.pos2,h=e.pos3,g=e.pos4,m=e.origin,x=n*Math.PI/180,_=[u,d,h,g].map(function(O){return Ge(O,m)}),E=_.map(function(O){return wp(O,x)}),S=Ae(Ae([],Z($q(t,_,E,m,n)),!1),Z(sH(t,_,E,m,n)),!1);S.sort(function(O,L){return _e(O-n)-_e(L-n)});var T=S.length>0;if(T)return{isSnap:T,dist:T?S[0]:n}}if(c?.length&&o){var D=c.slice().sort(function(O,L){return L1(O,r)-L1(L,r)}),R=D[0];if(L1(R,r)<=o)return{isSnap:!0,dist:n+RH(r,R)-r}}return{isSnap:!1,dist:n}}function kH(t,e,n,r,i,a,o){if(!Vd(t,"resizable"))return[0,0];var c=o.fixedDirection,u=o.nextAllMatrix,d=t.state,h=d.allMatrix,g=d.is3d;return cO(t,function(m,x){return lO(u||h,e+m,n+x,c,i,g)},e,n,r,i,a,o)}function NH(t,e,n,r,i){if(!Vd(t,"scalable"))return[0,0];var a=i.startOffsetWidth,o=i.startOffsetHeight,c=i.fixedPosition,u=i.fixedDirection,d=i.is3d,h=cO(t,function(g,m){return lO(kq(i,At(e,[g/a,m/o])),a,o,u,c,d)},a,o,n,c,r,i);return[h[0]/a,h[1]/o]}function MH(t,e){e.absolutePoses=Bi(t.state)}function cR(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var i=r.guideline;Zr(e,function(a){return a.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:n}))})}),e.map(function(n){var r=n.guideline,i=n.posInfo;return X(X({},r),{direction:i.direction})})}function uR(t,e,n,r,i,a){var o=nE(Rv(t,a),e,n),c=o.vertical,u=o.horizontal,d=Gu();c.forEach(function(_){_.isBound&&(_.direction==="start"&&(d.left=!0),_.direction==="end"&&(d.right=!0),r.push({type:"bounds",pos:_.pos}))}),u.forEach(function(_){_.isBound&&(_.direction==="start"&&(d.top=!0),_.direction==="end"&&(d.bottom=!0),i.push({type:"bounds",pos:_.pos}))});var h=oH(t),g=h.boundMap,m=h.vertical,x=h.horizontal;return m.forEach(function(_){Ms(r,function(E){var S=E.type,T=E.pos;return S==="bounds"&&T===_})>=0||r.push({type:"bounds",pos:_})}),x.forEach(function(_){Ms(i,function(E){var S=E.type,T=E.pos;return S==="bounds"&&T===_})>=0||i.push({type:"bounds",pos:_})}),{boundMap:d,innerBoundMap:g}}var PH=fE("",["resizable","scalable"]),OH={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",KP,XP,WP,QP,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,i=n.left,a=n.pos1,o=n.pos2,c=n.pos3,u=n.pos4,d=n.snapRenderInfo,h=t.props.snapRenderThreshold,g=h===void 0?1:h;if(!d||!d.render||!Vd(t,""))return Hu(t,"boundMap",Gu(),function(ae){return JSON.stringify(ae)}),Hu(t,"innerBoundMap",Gu(),function(ae){return JSON.stringify(ae)}),[];n.guidelines=o_(t);var m=Math.min(a[0],o[0],c[0],u[0]),x=Math.min(a[1],o[1],c[1],u[1]),_=d.externalPoses||[],E=Bi(t.state),S=[],T=[],D=[],R=[],O=[],L=ji(E),j=L.width,A=L.height,C=L.top,k=L.left,M=L.bottom,U=L.right,z={left:k,right:U,top:C,bottom:M,center:(k+U)/2,middle:(C+M)/2},P=_.length>0,W=P?ji(_):{};if(!d.request){if(d.direction&&O.push(Jq(t,E,d.direction,g,g)),d.snap){var Q=ji(E);d.center&&(Q.middle=(Q.top+Q.bottom)/2,Q.center=(Q.left+Q.right)/2),O.push(ZI(t,Q,g,g))}P&&(d.center&&(W.middle=(W.top+W.bottom)/2,W.center=(W.left+W.right)/2),O.push(ZI(t,W,g,g))),O.forEach(function(ae){var he=ae.vertical.posInfos,le=ae.horizontal.posInfos;S.push.apply(S,Ae([],Z(he.filter(function(ge){var xe=ge.guidelineInfos;return xe.some(function(Se){var Ue=Se.guideline;return!Ue.hide})}).map(function(ge){return{type:"snap",pos:ge.pos}})),!1)),T.push.apply(T,Ae([],Z(le.filter(function(ge){var xe=ge.guidelineInfos;return xe.some(function(Se){var Ue=Se.guideline;return!Ue.hide})}).map(function(ge){return{type:"snap",pos:ge.pos}})),!1)),D.push.apply(D,Ae([],Z(cR(he)),!1)),R.push.apply(R,Ae([],Z(cR(le)),!1))})}var $=uR(t,[k,U],[C,M],S,T),H=$.boundMap,ee=$.innerBoundMap;P&&uR(t,[W.left,W.right],[W.top,W.bottom],S,T,d.externalBounds);var te=Ae(Ae([],Z(D),!1),Z(R),!1),fe=te.filter(function(ae){return ae.element&&!ae.gapRects}),B=te.filter(function(ae){return ae.gapRects}).sort(function(ae,he){return ae.gap-he.gap});ke(t,"onSnap",{guidelines:te.filter(function(ae){var he=ae.element;return!he}),elements:fe,gaps:B},!0);var Y=Hu(t,"boundMap",H,function(ae){return JSON.stringify(ae)},Gu()),ne=Hu(t,"innerBoundMap",ee,function(ae){return JSON.stringify(ae)},Gu());return(H===Y||ee===ne)&&ke(t,"onBound",{bounds:H,innerBounds:ee},!0),Ae(Ae(Ae(Ae(Ae(Ae([],Z(xH(t,fe,[m,x],z,e)),!1),Z(_H(t,B,[m,x],z,e)),!1),Z(sR(t,"horizontal",R,[i,r],z,e)),!1),Z(sR(t,"vertical",D,[i,r],z,e)),!1),Z(aR(t,"horizontal",T,m,r,j,0,e)),!1),Z(aR(t,"vertical",S,x,i,A,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},Im(t)},drag:function(t){var e=t.state;Im(t)||(e.guidelines=o_(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(PH(t,e)||s_(t,e))return!0;if(!e.isRequest&&e.inputEvent)return Xn(e.inputEvent.target,Be("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,Im(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,Im(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function VH(t,e){return[t[0]*e[0],t[1]*e[1]]}function Be(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return k7.apply(void 0,Ae([Zw],Z(t),!1))}function uO(t){t()}function jH(t){return!t||t==="none"?[1,0,0,1,0,0]:la(t)?t:qh(t)}function bh(t,e,n){return C0(e,hc(n,e),t,hc(n.map(function(r){return-r}),e))}function zH(t,e,n){if(e==="%"){var r=lE(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function LH(t){var e=BH(uE(t,":before"));return e.map(function(n,r){var i=yp(n),a=i.value,o=i.unit;return a*zH(t,o,r===0)})}function M0(t){return t?t.split(" "):["0","0"]}function BH(t){return M0(t.transformOrigin)}function dO(t){var e=Jr(t),n=e("transform");if(n&&n!=="none")return n;if("transform"in t){var r=t.transform,i=r.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var o=[],c=function(d){var h=i[d].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(g){return h[g]}).join(", "),")"))},u=0;u<a;++u)c(u);return o.join(" ")}return""}function $h(t,e,n,r,i){var a,o,c=Uw(t)||ol(t),u=!1,d,h;if(!t||n)d=t;else{var g=(a=t?.assignedSlot)===null||a===void 0?void 0:a.parentElement,m=t.parentElement;g?(u=!0,h=m,d=g):d=m}for(var x=!1,_=t===e||d===e,E="relative",S=1,T=parseFloat(i?.("zoom"))||1,D=i?.("position");d&&d!==c;){e===d&&(_=!0);var R=Jr(d),O=d.tagName.toLowerCase(),L=dO(d),j=R("willChange"),A=parseFloat(R("zoom"))||1;if(E=R("position"),r&&A!==1){S=A;break}if(!n&&r&&T!==1&&D&&D!=="absolute"||O==="svg"||O==="foreignobject"||E!=="static"||L&&L!=="none"||j==="transform")break;var C=(o=t?.assignedSlot)===null||o===void 0?void 0:o.parentNode,k=d.parentNode;C&&(u=!0,h=k);var M=k;if(M&&M.nodeType===11){d=M.host,x=!0,E=Jr(d)("position");break}d=M,E="relative"}return{offsetZoom:S,hasSlot:u,parentSlotElement:h,isCustomElement:x,isStatic:E==="static",isEnd:_||!d||d===c,offsetParent:d||c}}function UH(t,e){var n,r=t.tagName.toLowerCase(),i=t.offsetLeft,a=t.offsetTop,o=Jr(t),c=_v(i),u=!c,d,h;return!u&&(r!=="svg"||t.ownerSVGElement)?(d=DP?LH(t):M0(o("transformOrigin")).map(function(g){return parseFloat(g)}),h=d.slice(),u=!0,r==="svg"?(i=0,a=0):(n=Z(qH(t,d,t===e&&e.tagName.toLowerCase()==="g"),4),i=n[0],a=n[1],d[0]=n[2],d[1]=n[3])):(d=M0(o("transformOrigin")).map(function(g){return parseFloat(g)}),h=d.slice()),{tagName:r,isSVG:c,hasOffset:u,offset:[i||0,a||0],origin:d,targetOrigin:h}}function fO(t,e){var n=Jr(t),r=Jr(ol(t)),i=r("position");if(!e&&(!i||i==="static"))return[0,0];var a=parseInt(r("marginLeft"),10),o=parseInt(r("marginTop"),10);return n("position")==="absolute"&&((n("top")!=="auto"||n("bottom")!=="auto")&&(o=0),(n("left")!=="auto"||n("right")!=="auto")&&(a=0)),[a,o]}function l_(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=ca(n,3,4))})}function FH(t){for(var e=t.parentElement,n=!1,r=ol(t);e;){var i=uE(e).transform;if(i&&i!=="none"){n=!0;break}if(e===r)break;e=e.parentElement}return{fixedContainer:e||r,hasTransform:n}}function Nv(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(wP(t,!e).join(","),")")}function lE(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function GH(t,e){var n,r=lE(t),i=r.width,a=r.height,o=r.clientWidth,c=r.clientHeight,u=o/i,d=c/a,h=t.preserveAspectRatio.baseVal,g=h.align,m=h.meetOrSlice,x=[0,0],_=[u,d],E=[0,0];if(g!==1){var S=(g-2)%3,T=Math.floor((g-2)/3);x[0]=i*S/2,x[1]=a*T/2;var D=m===2?Math.max(d,u):Math.min(u,d);_[0]=D,_[1]=D,E[0]=(o-i)/2*S,E[1]=(c-a)/2*T}var R=Kw(_,e);return n=Z(E,2),R[e*(e-1)]=n[0],R[e*(e-1)+1]=n[1],bh(R,e,x)}function qH(t,e,n){var r=t.tagName.toLowerCase();if(!t.getBBox||!n&&r==="g")return[0,0,0,0];var i=Jr(t),a=i("transform-box")==="fill-box",o=t.getBBox(),c=lE(t.ownerSVGElement),u=o.x,d=o.y;r==="foreignobject"&&!u&&!d&&(u=parseFloat(t.getAttribute("x"))||0,d=parseFloat(t.getAttribute("y"))||0);var h=u-c.x,g=d-c.y,m=a?e[0]:e[0]-h,x=a?e[1]:e[1]-g;return[h,g,m,x]}function dn(t,e,n){return Ar(t,fc(e,n),n)}function Dc(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(i){return dn(t,i,r)})}function ji(t){var e=t.map(function(d){return d[0]}),n=t.map(function(d){return d[1]}),r=Math.min.apply(Math,Ae([],Z(e),!1)),i=Math.min.apply(Math,Ae([],Z(n),!1)),a=Math.max.apply(Math,Ae([],Z(e),!1)),o=Math.max.apply(Math,Ae([],Z(n),!1)),c=a-r,u=o-i;return{left:r,top:i,right:a,bottom:o,width:c,height:u}}function dR(t,e,n,r){var i=Dc(t,e,n,r);return ji(i)}function HH(t,e,n,r,i){var a,o=t.target,c=t.origin,u=e.matrix,d=pO(o),h=d.offsetWidth,g=d.offsetHeight,m=n.getBoundingClientRect(),x=[0,0];n===ol(n)&&(x=fO(o,!0));for(var _=o.getBoundingClientRect(),E=_.left-m.left+n.scrollLeft-(n.clientLeft||0)+x[0],S=_.top-m.top+n.scrollTop-(n.clientTop||0)+x[1],T=_.width,D=_.height,R=C0(r,i,u),O=dR(R,h,g,r),L=O.left,j=O.top,A=O.width,C=O.height,k=dn(R,c,r),M=Ge(k,[L,j]),U=[E+M[0]*T/A,S+M[1]*D/C],z=[0,0],P=0;++P<10;){var W=qa(i,r);a=Z(Ge(dn(W,U,r),dn(W,k,r)),2),z[0]=a[0],z[1]=a[1];var Q=C0(r,i,hc(z,r),u),$=dR(Q,h,g,r),H=$.left,ee=$.top,te=H-E,fe=ee-S;if(_e(te)<2&&_e(fe)<2)break;U[0]-=te,U[1]-=fe}return z.map(function(B){return Math.round(B)})}function $H(t,e,n){var r=t.length===16,i=r?4:3,a=e.map(function(u){return dn(t,u,i)}),o=n.left,c=n.top;return a.map(function(u){return[u[0]+o,u[1]+c]})}function Li(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function hO(t,e){return Li([e[0]-t[0],e[1]-t[1]])}function rh(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=In(t,e));var i=hO(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function P0(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,a=n.reduce(function(c,u){return c+u[0]},0)/i,o=n.reduce(function(c,u){return c+u[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(o,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function gc(t,e){var n=t[e];return la(n)?X(X({},t),n):t}function pO(t){var e=t&&!_v(t.offsetWidth),n=0,r=0,i=0,a=0,o=0,c=0,u=0,d=0,h=0,g=0,m=0,x=0,_=1/0,E=1/0,S=1/0,T=1/0,D=0,R=0,O=!1;if(t)if(!e&&t.ownerSVGElement){var L=t.getBBox();O=!0,n=L.width,r=L.height,o=n,c=r,u=n,d=r,i=n,a=r}else{var j=Jr(t),A=t.style,C=j("boxSizing")==="border-box",k=parseFloat(j("borderLeftWidth"))||0,M=parseFloat(j("borderRightWidth"))||0,U=parseFloat(j("borderTopWidth"))||0,z=parseFloat(j("borderBottomWidth"))||0,P=parseFloat(j("paddingLeft"))||0,W=parseFloat(j("paddingRight"))||0,Q=parseFloat(j("paddingTop"))||0,$=parseFloat(j("paddingBottom"))||0,H=P+W,ee=Q+$,te=k+M,fe=U+z,B=H+te,Y=ee+fe,ne=j("position"),ae=0,he=0;if("clientLeft"in t){var le=null;if(ne==="absolute"){var ge=$h(t,ol(t));le=ge.offsetParent}else le=t.parentElement;if(le){var xe=Jr(le);ae=parseFloat(xe("width")),he=parseFloat(xe("height"))}}h=Math.max(H,Kt(j("minWidth"),ae)||0),g=Math.max(ee,Kt(j("minHeight"),he)||0),_=Kt(j("maxWidth"),ae),E=Kt(j("maxHeight"),he),isNaN(_)&&(_=1/0),isNaN(E)&&(E=1/0),D=Kt(A.width,0)||0,R=Kt(A.height,0)||0,o=parseFloat(j("width"))||0,c=parseFloat(j("height"))||0,u=_e(o-D)<1?Ux(h,D||o,_):o,d=_e(c-R)<1?Ux(g,R||c,E):c,n=u,r=d,i=u,a=d,C?(S=_,T=E,m=h,x=g,u=n-B,d=r-Y):(S=_+B,T=E+Y,m=h+B,x=g+Y,n=u+B,r=d+Y),i=u+H,a=d+ee}return{svg:O,offsetWidth:n,offsetHeight:r,clientWidth:i,clientHeight:a,contentWidth:u,contentHeight:d,inlineCSSWidth:D,inlineCSSHeight:R,cssWidth:o,cssHeight:c,minWidth:h,minHeight:g,maxWidth:_,maxHeight:E,minOffsetWidth:m,minOffsetHeight:x,maxOffsetWidth:S,maxOffsetHeight:T}}function gO(t,e){return In(e>0?t[0]:t[1],e>0?t[1]:t[0])}function Rm(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function mO(t,e){var n=t===ol(t)||t===Uw(t),r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=Jr(t)("overflow")!=="visible",X(X({},e),r)}function B1(t,e,n,r){var i=t.left,a=t.right,o=t.top,c=t.bottom,u=e.top,d=e.left,h={left:d+i,top:u+o,right:d+a,bottom:u+c,width:a-i,height:c-o};return n&&r?mO(n,h):h}function xh(t,e){var n=0,r=0,i=0,a=0;if(t){var o=t.getBoundingClientRect();n=o.left,r=o.top,i=o.width,a=o.height}var c={left:n,top:r,width:i,height:a,right:n+i,bottom:r+a};return t&&e?mO(t,c):c}function YH(t){var e=t.props,n=e.groupable,r=e.svgOrigin,i=t.getState(),a=i.offsetWidth,o=i.offsetHeight,c=i.svg,u=i.transformOrigin;return!n&&c&&r?pE(r,a,o):u}function vO(t,e,n,r){var i;if(t)i=t;else if(e)i=[0,0];else{var a=n.target;i=yO(a,r)}return i}function yO(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function cE(t,e){return[At(e,t[0]),At(e,t[1]),At(e,t[2]),At(e,t[3])]}function Bi(t){var e=t.left,n=t.top,r=t.pos1,i=t.pos2,a=t.pos3,o=t.pos4;return cE([r,i,a,o],[e,n])}function c_(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(n){n.unset&&n.unset(t)})}function qu(t,e){var n=e?"controlGesto":"targetGesto",r=t[n];r?.isIdle()===!1&&c_(t,e),r?.unset(),t[n]=null}function Pr(t,e){if(e){var n=Od(e);n.nextStyle=X(X({},n.nextStyle),t)}return{style:t,cssText:Ps(t).map(function(r){return"".concat(Qm(r,"-"),": ").concat(t[r],";")}).join("")}}function bO(t,e,n){var r=e.afterTransform||e.transform;return X(X({},Pr(X(X(X({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function ct(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var a=X(X({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var o;(o=e.stop)===null||o===void 0||o.call(e)}});return i.isStartEvent?r||(i.lastEvent=a):i.isStartEvent=!0,a}function hi(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),X(X({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function Mv(t,e,n){t._emitter.on(e,n)}function ke(t,e,n,r,i){return t.triggerEvent(e,n,r,i)}function uE(t,e){return Bo(t).getComputedStyle(t,e)}function Dm(t,e,n){var r={},i={};return t.filter(function(a){var o=a.name;if(r[o]||!e.some(function(c){return a[c]}))return!1;if(!n&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return r[o]=!0,!0})}function u_(t,e){return t===e||t==null&&e==null}function fR(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!_v(i))return i}return t[n]}function xO(t,e){var n=[],r=[];return t.forEach(function(i,a){var o=e(i,a,t),c=r.indexOf(o),u=n[c]||[];c===-1&&(r.push(o),n.push(u)),u.push(i)}),n}function KH(t,e){var n=[],r={};return t.forEach(function(i,a){var o=e(i,a,t),c=r[o];c||(c=[],r[o]=c,n.push(c)),c.push(i)}),n}function _O(t){return t.reduce(function(e,n){return e.concat(n)},[])}function ld(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return _e(r)-_e(n)}),t[0]}function cd(t,e,n){return Ar(qa(t,n),fc(e,n),n)}function XH(t,e){var n,r=t.is3d,i=t.rootMatrix,a=r?4:3;return n=Z(cd(i,[e.distX,e.distY],a),2),e.distX=n[0],e.distY=n[1],e}function Ri(t,e,n,r){if(!n[0]&&!n[1])return e;var i=dn(t,[lR(n[0]||1),0],r),a=dn(t,[0,lR(n[1]||1)],r),o=dn(t,[n[0]/Li(i),n[1]/Li(a)],r);return At(e,o)}function ea(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function O0(t){return _e(t)<=jr?0:t}function dE(t){return function(e){if(!e.isDragging(t))return"";var n=zq(e,t),r=n.deg;return r?Be("view-control-rotation".concat(r)):""}}function fE(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(a){return r.requestAble===a})?r.parentDirection:!1;var i=r.inputEvent.target;return Xn(i,Be("direction"))&&(!t||Xn(i,Be(t)))}}function WH(t,e,n){var r,i=ad(t,{"x%":function(L){return L/100*e.offsetWidth},"y%":function(L){return L/100*e.offsetHeight}}),a=t.slice(0,n<0?void 0:n),o=t.slice(0,n<0?void 0:n+1),c=t[n]||"",u=n<0?[]:t.slice(n),d=n<0?[]:t.slice(n+1),h=i.slice(0,n<0?void 0:n),g=i.slice(0,n<0?void 0:n+1),m=(r=i[n])!==null&&r!==void 0?r:ad([""])[0],x=n<0?[]:i.slice(n),_=n<0?[]:i.slice(n+1),E=m?[m]:[],S=Ru(h),T=Ru(g),D=Ru(x),R=Ru(_),O=Xt(S,D,4);return{transforms:t,beforeFunctionMatrix:S,beforeFunctionMatrix2:T,targetFunctionMatrix:Ru(E),afterFunctionMatrix:D,afterFunctionMatrix2:R,allFunctionMatrix:O,beforeFunctions:h,beforeFunctions2:g,targetFunction:E[0],afterFunctions:x,afterFunctions2:_,beforeFunctionTexts:a,beforeFunctionTexts2:o,targetFunctionText:c,afterFunctionTexts:u,afterFunctionTexts2:d}}function QH(t){return!t||!la(t)||Md(t)?!1:Fn(t)||"length"in t}function ja(t,e){return t?Md(t)?t:Qr(t)?e?document.querySelector(t):t:zw(t)?t():eP(t)?t:"current"in t?t.current:t:null}function hE(t,e){if(!t)return[];var n=QH(t)?[].slice.call(t):[t];return n.reduce(function(r,i){return Qr(i)&&e?Ae(Ae([],Z(r),!1),Z([].slice.call(document.querySelectorAll(i))),!1):(Fn(i)?r.push(hE(i,e)):r.push(ja(i,e)),r)},[])}function ZH(t,e,n){var r=In(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function hR(t,e){var n=t.rootMatrix,r=t.is3d,i=r?4:3,a=qa(n,i);return r||(a=ca(a,3,4)),a[12]=0,a[13]=0,a[14]=0,OG(a,e)}function wO(t,e,n,r,i){var a=Z(t,2),o=a[0],c=a[1],u=0,d=0;if(i&&o&&c){var h=In([0,0],e),g=In([0,0],r),m=Li(e),x=Math.cos(h-g)*m;if(!r[0])d=x,u=d*n;else if(!r[1])u=x,d=u/n;else{var _=r[0]*o,E=r[1]*c,S=Math.atan2(_+e[0],E+e[1]),T=Math.atan2(_,E);S<0&&(S+=Math.PI*2),T<0&&(T+=Math.PI*2);var D=0;_e(S-T)<Math.PI/2||_e(S-T)>Math.PI/2*3||(T+=Math.PI),D=S-T,D>Math.PI*2?D-=Math.PI*2:D>Math.PI?D=2*Math.PI-D:D<-Math.PI&&(D=-2*Math.PI-D);var R=Li([_+e[0],E+e[1]])*Math.cos(D);u=R*Math.sin(T)-_,d=R*Math.cos(T)-E,r[0]<0&&(u*=-1),r[1]<0&&(d*=-1)}}else u=r[0]*e[0],d=r[1]*e[1];return[u,d]}function EO(t,e,n,r){var i,a=n.ratio,o=n.startOffsetWidth,c=n.startOffsetHeight,u=0,d=0,h=r.distX,g=r.distY,m=r.pinchScale,x=r.parentDistance,_=r.parentDist,E=r.parentScale,S=n.fixedDirection,T=[0,1].map(function(A){return _e(t[A]-S[A])}),D=[0,1].map(function(A){var C=T[A];return C!==0&&(C=2/C),C});if(_)u=_[0],d=_[1],e&&(u?d||(d=u/a):u=d*a);else if(id(m))u=(m-1)*o,d=(m-1)*c;else if(E)u=(E[0]-1)*o,d=(E[1]-1)*c;else if(x){var R=o*T[0],O=c*T[1],L=Li([R,O]);u=x/L*R*D[0],d=x/L*O*D[1]}else{var j=Qa({datas:n,distX:h,distY:g});j=D.map(function(A,C){return j[C]*A}),i=Z(wO([o,c],j,a,t,e),2),u=i[0],d=i[1]}return{distWidth:u,distHeight:d}}function d_(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=Z(t.split(" "),2),r=n[0],i=n[1],a=d_(r||""),o=d_(i||""),c=X(X({},a),o),u={x:"50%",y:"50%"};return c.x&&(u.x=c.x),c.y&&(u.y=c.y),c.value&&(c.x&&!c.y&&(u.y=c.value),!c.x&&c.y&&(u.x=c.value)),u}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function pE(t,e,n){var r=d_(t,!0),i=r.x,a=r.y;return[Kt(i,e)||0,Kt(a,n)||0]}function JH(t,e,n){var r=t.map(function(a){return Ge(a,e)}),i=r.map(function(a){return wp(a,n)});return{prev:r,next:i,result:i.map(function(a){return At(a,e)})}}function SO(t,e){return t.length===e.length&&t.every(function(n,r){var i=e[r],a=Fn(n),o=Fn(i);return a&&o?SO(n,i):!a&&!o?n===i:!1})}function Hu(t,e,n,r,i){var a=t._store,o=a[e];if(!(e in a))if(i!=null)a[e]=i,o=i;else return a[e]=n,n;return o===n||r(o)===r(n)?o:(a[e]=n,n)}function kr(t){return t>=0?1:-1}function _e(t){return Math.abs(t)}function U1(t,e){return K7(t).map(function(n){return e(n)})}function TO(t){return id(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var e$=Tp("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,a=e.originalDatas,o=t.props,c=o.pinchable,u=o.ables;if(!c)return!1;var d="onPinch".concat(r?"Group":"","Start"),h="drag".concat(r?"Group":"","ControlStart"),g=(c===!0?t.controlAbles:u.filter(function(E){return c.indexOf(E.name)>-1})).filter(function(E){return E.canPinch&&E[h]}),m=ct(t,e,{});r&&(m.targets=r);var x=ke(t,d,m);n.isPinch=x!==!1,n.ables=g;var _=n.isPinch;return _?(g.forEach(function(E){if(a[E.name]=a[E.name]||{},!!E[h]){var S=X(X({},e),{datas:a[E.name],parentRotate:i,isPinch:!0});E[h](t,S)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},_):!1},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,a=e.originalDatas,o=e.inputEvent,c=e.targets,u=e.angle;if(n.isPinch){var d=i*(1-1/r),h=ct(t,e,{});c&&(h.targets=c);var g="onPinch".concat(c?"Group":"");ke(t,g,h);var m=n.ables,x="drag".concat(c?"Group":"","Control");return m.forEach(function(_){_[x]&&_[x](t,X(X({},e),{datas:a[_.name],inputEvent:o,resolveMatrix:!0,pinchScale:r,parentDistance:d,parentRotate:u,isPinch:!0}))}),h}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.targets,o=e.originalDatas;if(n.isPinch){var c="onPinch".concat(a?"Group":"","End"),u=hi(t,e,{isDrag:r});a&&(u.targets=a),ke(t,c,u);var d=n.ables,h="drag".concat(a?"Group":"","ControlEnd");return d.forEach(function(g){g[h]&&g[h](t,X(X({},e),{isDrag:r,datas:o[g.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,X(X({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,X(X({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,X(X({},e),{targets:t.props.targets}))}}),pR=fE("scalable"),t$={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:HP("scalable"),dragControlCondition:pR,viewClassName:dE("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.parentDirection,o=vO(a,r,i,n),c=t.state,u=c.width,d=c.height,h=c.targetTransform,g=c.target,m=c.pos1,x=c.pos2,_=c.pos4;if(!o||!g)return!1;r||Rc(t,e),n.datas={},n.transform=h,n.prevDist=[1,1],n.direction=o,n.startOffsetWidth=u,n.startOffsetHeight=d,n.startValue=[1,1];var E=!o[0]&&!o[1]||o[0]||!o[1];Iv(t,e,"scale"),n.isWidth=E;function S(j){n.ratio=j&&isFinite(j)?j:0}n.startPositions=Bi(t.state);function T(j){var A=rO(n.startPositions,j);n.fixedDirection=A.fixedDirection,n.fixedPosition=A.fixedPosition,n.fixedOffset=A.fixedOffset}n.setFixedDirection=T,S(Cs(m,x)/Cs(x,_)),T([-o[0],-o[1]]);var D=function(j){n.minScaleSize=j},R=function(j){n.maxScaleSize=j};D([-1/0,-1/0]),R([1/0,1/0]);var O=ct(t,e,X(X({direction:o,set:function(j){n.startValue=j},setRatio:S,setFixedDirection:T,setMinScaleSize:D,setMaxScaleSize:R},Cv(t,e)),{dragStart:Dr.dragStart(t,new sd().dragStart([0,0],e))})),L=ke(t,"onScaleStart",O);return n.startFixedDirection=n.fixedDirection,L!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:o}),n.isScale?O:!1},dragControl:function(t,e){Tv(t,e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,a=e.isPinch,o=e.dragClient,c=e.isRequest,u=e.useSnap,d=e.resolveMatrix,h=n.prevDist,g=n.direction,m=n.startOffsetWidth,x=n.startOffsetHeight,_=n.isScale,E=n.startValue,S=n.isWidth,T=n.ratio;if(!_)return!1;var D=t.props,R=D.throttleScale,O=D.parentMoveable,L=g;!g[0]&&!g[1]&&(L=[1,1]);var j=T&&(r??D.keepRatio)||!1,A=t.state,C=[E[0],E[1]];function k(){var Ee=EO(L,j,n,e),Ce=Ee.distWidth,He=Ee.distHeight,je=m?(m+Ce)/m:1,$e=x?(x+He)/x:1;E[0]||(C[0]=Ce/m),E[1]||(C[1]=He/x);var Qe=(L[0]||j?je:1)*C[0],vt=(L[1]||j?$e:1)*C[1];return Qe===0&&(Qe=kr(h[0])*Tm),vt===0&&(vt=kr(h[1])*Tm),[Qe,vt]}var M=k();if(!a&&t.props.groupable){var U=A.snapRenderInfo||{},z=U.direction;Fn(z)&&(z[0]||z[1])&&(A.snapRenderInfo={direction:g,request:e.isRequest})}ke(t,"onBeforeScale",ct(t,e,{scale:M,setFixedDirection:function(Ee){return n.setFixedDirection(Ee),M=k(),M},startFixedDirection:n.startFixedDirection,setScale:function(Ee){M=Ee}},!0));var P=[M[0]/C[0],M[1]/C[1]],W=o,Q=[0,0],$=kr(P[0]*P[1]),H=!o&&!i&&a;if(H||d?W=tE(t,n.targetAllTransform,[0,0],[0,0],n):o||(W=n.fixedPosition),a||(Q=NH(t,P,g,!u&&c,n)),j){L[0]&&L[1]&&Q[0]&&Q[1]&&(Math.abs(Q[0]*m)>Math.abs(Q[1]*x)?Q[1]=0:Q[0]=0);var ee=!Q[0]&&!Q[1];if(ee&&(S?P[0]=it(P[0]*C[0],R)/C[0]:P[1]=it(P[1]*C[1],R)/C[1]),L[0]&&!L[1]||Q[0]&&!Q[1]||ee&&S){P[0]+=Q[0];var te=m*P[0]*C[0]/T;P[1]=kr($*P[0])*_e(te/x/C[1])}else if(!L[0]&&L[1]||!Q[0]&&Q[1]||ee&&!S){P[1]+=Q[1];var fe=x*P[1]*C[1]*T;P[0]=kr($*P[1])*_e(fe/m/C[0])}}else P[0]+=Q[0],P[1]+=Q[1],Q[0]||(P[0]=it(P[0]*C[0],R)/C[0]),Q[1]||(P[1]=it(P[1]*C[1],R)/C[1]);P[0]===0&&(P[0]=kr(h[0])*Tm),P[1]===0&&(P[1]=kr(h[1])*Tm),M=VH(P,[C[0],C[1]]);var B=[m,x],Y=[m*M[0],x*M[1]];Y=XM(Y,n.minScaleSize,n.maxScaleSize,j?T:!1),M=U1(2,function(Ee){return B[Ee]?Y[Ee]/B[Ee]:Y[Ee]}),P=U1(2,function(Ee){return M[Ee]/C[Ee]});var ne=U1(2,function(Ee){return h[Ee]?P[Ee]/h[Ee]:P[Ee]}),ae="scale(".concat(P.join(", "),")"),he="scale(".concat(M.join(", "),")"),le=Av(n,he,ae),ge=!E[0]||!E[1],xe=Nq(t,ge?he:ae,n.fixedDirection,W,n.fixedOffset,n,ge),Se=H?xe:Ge(xe,n.prevInverseDist||[0,0]);if(n.prevDist=P,n.prevInverseDist=xe,M[0]===h[0]&&M[1]===h[1]&&Se.every(function(Ee){return!Ee})&&!O&&!H)return!1;var Ue=ct(t,e,X({offsetWidth:m,offsetHeight:x,direction:g,scale:M,dist:P,delta:ne,isPinch:!!a},LP(t,le,Se,a,e)));return ke(t,"onScale",Ue),Ue},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=hi(t,e,{});return ke(t,"onScaleEnd",r),r},dragGroupControlCondition:pR,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=sa(t,"resizable",e);n.moveableScale=t.scale;var a=Is(t,this,"dragControlStart",e,function(d,h){return D0(t,d,n,h)}),o=function(d){r.setFixedDirection(d),a.forEach(function(h,g){h.setFixedDirection(d),D0(t,h.moveable,n,i[g])})};n.setFixedDirection=o;var c=X(X({},r),{targets:t.props.targets,events:a,setFixedDirection:o}),u=ke(t,"onScaleGroupStart",c);return n.isScale=u!==!1,n.isScale?c:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){Mv(t,"onBeforeScale",function(h){ke(t,"onBeforeScaleGroup",ct(t,e,X(X({},h),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=r.dist,a=n.moveableScale;t.scale=[i[0]*a[0],i[1]*a[1]];var o=t.props.keepRatio,c=n.fixedPosition,u=Is(t,this,"dragControl",e,function(h,g){var m=Z(Ar(Ep(t.rotation/180*Math.PI,3),[g.datas.originalX*i[0],g.datas.originalY*i[1],1],3),2),x=m[0],_=m[1];return X(X({},g),{parentDist:null,parentScale:i,parentKeepRatio:o,dragClient:At(c,[x,_])})}),d=X({targets:t.props.targets,events:u},r);return ke(t,"onScaleGroup",d),d}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var i=Is(t,this,"dragControlEnd",e),a=hi(t,e,{targets:t.props.targets,events:i});return ke(t,"onScaleGroupEnd",a),n}},request:function(){var t={},e=0,n=0,r=!1;return{isControl:!0,requestStart:function(i){return r=i.useSnap,{datas:t,parentDirection:i.direction||[1,1],useSnap:r}},request:function(i){return e+=i.deltaWidth,n+=i.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:r}}}}};function Eo(t,e){return t.map(function(n,r){return T0(n,e[r],1,2)})}function gR(t,e,n){var r=In(t,e),i=In(t,n),a=i-r;return a>=0?a:a+2*Math.PI}function n$(t,e){var n=gR(t[0],t[1],t[2]),r=gR(e[0],e[1],e[2]),i=Math.PI;return!(n>=i&&r<=i||n<=i&&r>=i)}var r$={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:dE("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,a=n.warpable,o=n.zoom;if(r||i||!a)return[];var c=t.state,u=c.pos1,d=c.pos2,h=c.pos3,g=c.pos4,m=Eo(u,d),x=Eo(d,u),_=Eo(u,h),E=Eo(h,u),S=Eo(h,g),T=Eo(g,h),D=Eo(d,g),R=Eo(g,d);return Ae([e.createElement("div",{className:Be("line"),key:"middeLine1",style:rh(m,S,o)}),e.createElement("div",{className:Be("line"),key:"middeLine2",style:rh(x,T,o)}),e.createElement("div",{className:Be("line"),key:"middeLine3",style:rh(_,D,o)}),e.createElement("div",{className:Be("line"),key:"middeLine4",style:rh(E,R,o)})],Z($P(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return Xn(n,Be("direction"))&&Xn(n,Be("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,a=r.target,o=yO(a,n);if(!o||!i)return!1;var c=t.state,u=c.transformOrigin,d=c.is3d,h=c.targetTransform,g=c.targetMatrix,m=c.width,x=c.height,_=c.left,E=c.top;n.datas={},n.targetTransform=h,n.warpTargetMatrix=d?g:ca(g,3,4),n.targetInverseMatrix=xP(qa(n.warpTargetMatrix,4),3,4),n.direction=o,n.left=_,n.top=E,n.poses=[[0,0],[m,0],[0,x],[m,x]].map(function(D){return Ge(D,u)}),n.nextPoses=n.poses.map(function(D){var R=Z(D,2),O=R[0],L=R[1];return Ar(n.warpTargetMatrix,[O,L,0,1],4)}),n.startValue=nn(4),n.prevMatrix=nn(4),n.absolutePoses=Bi(c),n.posIndexes=zP(o),Rc(t,e),Iv(t,e,"matrix3d"),c.snapRenderInfo={request:e.isRequest,direction:o};var S=ct(t,e,X({set:function(D){n.startValue=D}},Cv(t,e))),T=ke(t,"onWarpStart",S);return T!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,a=e.distY,o=n.targetInverseMatrix,c=n.prevMatrix,u=n.isWarp,d=n.startValue,h=n.poses,g=n.posIndexes,m=n.absolutePoses;if(!u)return!1;if(Tv(t,e,"matrix3d"),Vd(t,"warpable")){var x=g.map(function(k){return m[k]});x.length>1&&x.push([(x[0][0]+x[1][0])/2,(x[0][1]+x[1][1])/2]);var _=kv(t,r,{horizontal:x.map(function(k){return k[1]+a}),vertical:x.map(function(k){return k[0]+i})}),E=_.horizontal,S=_.vertical;a-=E.offset,i-=S.offset}var T=Qa({datas:n,distX:i,distY:a},!0),D=n.nextPoses.slice();if(g.forEach(function(k){D[k]=At(D[k],T)}),!wq.every(function(k){return n$(k.map(function(M){return h[M]}),k.map(function(M){return D[M]}))}))return!1;var R=Xw(h[0],h[2],h[1],h[3],D[0],D[2],D[1],D[3]);if(!R.length)return!1;var O=Xt(o,R,4),L=VP(n,O,!0),j=Xt(qa(c,4),L,4);n.prevMatrix=L;var A=Xt(d,L,4),C=Av(n,"matrix3d(".concat(A.join(", "),")"),"matrix3d(".concat(L.join(", "),")"));return eE(e,C),ke(t,"onWarp",ct(t,e,X({delta:j,matrix:A,dist:L,multiply:Xt,transform:C},Pr({transform:C},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,ke(t,"onWarpEnd",hi(t,e,{})),r):!1}},i$=Be("area-pieces"),km=Be("area-piece"),AO=Be("avoid"),a$=Be("view-dragging");function F1(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;JM(e,AO),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function mR(t){return t.createElement("div",{key:"area_pieces",className:i$},t.createElement("div",{className:km}),t.createElement("div",{className:km}),t.createElement("div",{className:km}),t.createElement("div",{className:km}))}var CO={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,a=n.groupable,o=n.passDragArea,c=t.getState(),u=c.width,d=c.height,h=c.renderPoses,g=o?Be("area","pass"):Be("area");if(a)return[e.createElement("div",{key:"area",ref:As(t,"areaElement"),className:g}),mR(e)];if(!r||!i)return[];var m=Xw([0,0],[u,0],[0,d],[u,d],h[0],h[1],h[2],h[3]),x=m.length?Nv(m,!0):"none";return[e.createElement("div",{key:"area",ref:As(t,"areaElement"),className:g,style:{top:"0px",left:"0px",width:"".concat(u,"px"),height:"".concat(d,"px"),transformOrigin:"0 0",transform:x}}),mR(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,a=e.inputEvent;if(!a)return!1;n.isDragArea=!1;var o=t.areaElement,c=t.state,u=c.moveableClientRect,d=c.renderPoses,h=c.rootMatrix,g=c.is3d,m=u.left,x=u.top,_=ji(d),E=_.left,S=_.top,T=_.width,D=_.height,R=g?4:3,O=Z(cd(h,[r-m,i-x],R),2),L=O[0],j=O[1];L-=E,j-=S;var A=[{left:E,top:S,width:T,height:j-10},{left:E,top:S,width:L-10,height:D},{left:E,top:S+j+10,width:T,height:D-j-10},{left:E+L+10,top:S,width:T-L-10,height:D}],C=[].slice.call(o.nextElementSibling.children);A.forEach(function(k,M){C[M].style.cssText="left: ".concat(k.left,"px;top: ").concat(k.top,"px; width: ").concat(k.width,"px; height: ").concat(k.height,"px;")}),ZM(o,AO),c.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,F1(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||F1(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){F1(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&KM(function(){e.disableNativeEvent=!1})}},s$=Tp("origin",{props:["origin","svgOrigin"],render:function(t,e){var n=t.props,r=n.zoom,i=n.svgOrigin,a=n.groupable,o=t.getState(),c=o.beforeOrigin,u=o.rotation,d=o.svg,h=o.allMatrix,g=o.is3d,m=o.left,x=o.top,_=o.offsetWidth,E=o.offsetHeight,S;if(!a&&d&&i){var T=Z(pE(i,_,E),2),D=T[0],R=T[1],O=g?4:3,L=dn(h,[D,R],O);S=P0(u,r,Ge(L,[m,x]))}else S=P0(u,r,c);return[e.createElement("div",{className:Be("control","origin"),style:S,key:"beforeOrigin"})]}});function o$(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var l$={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,i=r===void 0?t.getContainer():r,a=n.scrollOptions,o=new UG,c=ja(i,!0);e.datas.dragScroll=o,t.state.dragScroll=o;var u=e.isControl?"controlGesto":"targetGesto",d=e.targets;o.on("scroll",function(h){var g=h.container,m=h.direction,x=ct(t,e,{scrollContainer:g,direction:m}),_=d?"onScrollGroup":"onScroll";d&&(x.targets=d),ke(t,_,x)}).on("move",function(h){var g=h.offsetX,m=h.offsetY,x=h.inputEvent;t[u].scrollBy(g,m,x.inputEvent,!1)}).on("scrollDrag",function(h){var g=h.next;g(t[u].getCurrentEvent())}),o.dragStart(e,X({container:c},a))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,a=i===void 0?t.getContainer():i,o=r.scrollThreshold,c=o===void 0?0:o,u=r.scrollThrottleTime,d=u===void 0?0:u,h=r.getScrollPosition,g=h===void 0?o$:h,m=r.scrollOptions;return n.drag(e,X({container:a,threshold:c,throttleTime:d,getScrollPosition:function(x){return g({scrollContainer:x.container,direction:x.direction})}},m)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,X(X({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,X(X({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,X(X({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,X(X({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,X(X({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,X(X({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,X(X({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},IO={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},c$=Tp("padding",{props:["padding"],render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=TO(n.padding||{}),i=r.left,a=r.top,o=r.right,c=r.bottom,u=t.getState(),d=u.renderPoses,h=u.pos1,g=u.pos2,m=u.pos3,x=u.pos4,_=[h,g,m,x],E=[];return i>0&&E.push([0,2]),a>0&&E.push([0,1]),o>0&&E.push([1,3]),c>0&&E.push([2,3]),E.map(function(S,T){var D=Z(S,2),R=D[0],O=D[1],L=_[R],j=_[O],A=d[R],C=d[O],k=Xw([0,0],[100,0],[0,100],[100,100],L,j,A,C);if(k.length)return e.createElement("div",{key:"padding".concat(T),className:Be("padding"),style:{transform:Nv(k,!0)}})})}}),vR=["nw","ne","se","sw"];function Nm(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var u$=[1,2,5,6],d$=[0,3,4,7],Hl=[1,-1,-1,1],$l=[1,1,-1,-1];function gE(t,e,n,r,i,a,o,c){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=n),c===void 0&&(c=r);var u=[],d=!1,h=t.filter(function(m){return!m.virtual}),g=h.map(function(m){var x=m.horizontal,_=m.vertical,E=m.pos;if(_&&!d&&(d=!0,u.push("/")),d){var S=Math.max(0,_===1?E[1]-a:c-E[1]);return u.push(ea(S,r,e)),S}else{var S=Math.max(0,x===1?E[0]-i:o-E[0]);return u.push(ea(S,n,e)),S}});return{radiusPoses:h,styles:u,raws:g}}function RO(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var a=t[i];a.sub&&(a.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),a.vertical&&(n[1]===0&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function DO(t,e,n,r,i,a,o){var c,u,d,h;a===void 0&&(a=[0,0]),o===void 0&&(o=!1);var g=t.indexOf("/"),m=(g>-1?t.slice(0,g):t).length,x=t.slice(0,m),_=t.slice(m+1),E=x.length,S=_.length,T=S>0,D=Z(x,4),R=D[0],O=R===void 0?"0px":R,L=D[1],j=L===void 0?O:L,A=D[2],C=A===void 0?O:A,k=D[3],M=k===void 0?j:k,U=Z(_,4),z=U[0],P=z===void 0?O:z,W=U[1],Q=W===void 0?T?P:j:W,$=U[2],H=$===void 0?T?P:C:$,ee=U[3],te=ee===void 0?T?Q:M:ee,fe=[O,j,C,M].map(function(le){return Kt(le,e)}),B=[P,Q,H,te].map(function(le){return Kt(le,n)}),Y=fe.slice(),ne=B.slice();c=Z(Nm([Y[0],Y[1]],e),2),Y[0]=c[0],Y[1]=c[1],u=Z(Nm([Y[3],Y[2]],e),2),Y[3]=u[0],Y[2]=u[1],d=Z(Nm([ne[0],ne[3]],n),2),ne[0]=d[0],ne[3]=d[1],h=Z(Nm([ne[1],ne[2]],n),2),ne[1]=h[0],ne[2]=h[1];var ae=o?Y:Y.slice(0,Math.max(a[0],E)),he=o?ne:ne.slice(0,Math.max(a[1],S));return Ae(Ae([],Z(ae.map(function(le,ge){var xe=vR[ge];return{virtual:ge>=E,horizontal:Hl[ge],vertical:0,pos:[r+le,i+($l[ge]===-1?n:0)],sub:!0,raw:fe[ge],direction:xe}})),!1),Z(he.map(function(le,ge){var xe=vR[ge];return{virtual:ge>=S,horizontal:0,vertical:$l[ge],pos:[r+(Hl[ge]===-1?e:0),i+le],sub:!0,raw:B[ge],direction:xe}})),!1)}function f$(t,e,n,r,i){i===void 0&&(i=e.length);var a=RO(t.slice(r)),o=a.horizontalRange,c=a.verticalRange,u=n-r,d=0;if(u===0)d=i;else if(u>0&&u<o[1])d=o[1]-u;else if(u>=c[0])d=c[0]+c[1]-u;else return;t.splice(n,d),e.splice(n,d)}function h$(t,e,n,r,i,a,o,c,u,d,h){d===void 0&&(d=0),h===void 0&&(h=0);var g=RO(t.slice(n)),m=g.horizontalRange,x=g.verticalRange;if(r>-1)for(var _=Hl[r]===1?a-d:c-a,E=m[1];E<=r;++E){var S=$l[E]===1?h:u,T=0;if(r===E?T=a:E===0?T=d+_:Hl[E]===-1&&(T=c-(e[n][0]-d)),t.splice(n+E,0,{horizontal:Hl[E],vertical:0,pos:[T,S]}),e.splice(n+E,0,[T,S]),E===0)break}else if(i>-1){var D=$l[i]===1?o-h:u-o;if(m[1]===0&&x[1]===0){var R=[d+D,h];t.push({horizontal:Hl[0],vertical:0,pos:R}),e.push(R)}for(var O=x[0],E=x[1];E<=i;++E){var T=Hl[E]===1?d:c,S=0;if(i===E?S=o:E===0?S=h+D:$l[E]===1?S=e[n+O][1]:$l[E]===-1&&(S=u-(e[n+O][1]-h)),t.push({horizontal:0,vertical:$l[E],pos:[T,S]}),e.push([T,S]),E===0)break}}}function p$(t,e){e===void 0&&(e=t.map(function(i){return i.raw}));var n=t.map(function(i,a){return i.horizontal?e[a]:null}).filter(function(i){return i!=null}),r=t.map(function(i,a){return i.vertical?e[a]:null}).filter(function(i){return i!=null});return{horizontals:n,verticals:r}}var g$=[[0,-1,"n"],[1,0,"e"]],m$=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function mE(t,e,n){var r=t.props.clipRelative,i=t.state,a=i.width,o=i.height,c=e,u=c.type,d=c.poses,h=u==="rect",g=u==="circle";if(u==="polygon")return n.map(function(j){return"".concat(ea(j[0],a,r)," ").concat(ea(j[1],o,r))});if(h||u==="inset"){var m=n[1][1],x=n[3][0],_=n[7][0],E=n[5][1];if(h)return[m,x,E,_].map(function(j){return"".concat(j,"px")});var S=[m,a-x,o-E,_].map(function(j,A){return ea(j,A%2?a:o,r)});if(n.length>8){var T=Z(Ge(n[4],n[0]),2),D=T[0],R=T[1];S.push.apply(S,Ae(["round"],Z(gE(d.slice(8).map(function(j,A){return X(X({},j),{pos:n[A]})}),r,D,R,_,m,x,E).styles),!1))}return S}else if(g||u==="ellipse"){var O=n[0],L=ea(_e(n[1][1]-O[1]),g?Math.sqrt((a*a+o*o)/2):o,r),S=g?[L]:[ea(_e(n[2][0]-O[0]),a,r),L];return S.push("at",ea(O[0],a,r),ea(O[1],o,r)),S}}function V0(t,e,n,r){var i=[r,(r+e)/2,e],a=[t,(t+n)/2,n];return m$.map(function(o){var c=Z(o,3),u=c[0],d=c[1],h=c[2],g=i[u+1],m=a[d+1];return{vertical:_e(d),horizontal:_e(u),direction:h,pos:[g,m]}})}function kO(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),n[0]=Math.min(n[0],i[1]),n[1]=Math.max(n[1],i[1])}),[_e(e[1]-e[0]),_e(n[1]-n[0])]}function yR(t,e,n,r,i){var a,o,c,u,d,h,g,m,x;if(t){var _=i;if(!_){var E=Jr(t),S=E("clipPath");_=S!=="none"?S:E("clip")}if(!((!_||_==="none"||_==="auto")&&(_=r,!_))){var T=YM(_),D=T.prefix,R=D===void 0?_:D,O=T.value,L=O===void 0?"":O,j=R==="circle",A=" ";if(R==="polygon"){var C=Jl(L||"0% 0%, 100% 0%, 100% 100%, 0% 100%");A=",";var k=C.map(function(Pt){var wn=Z(Pt.split(" "),2),cn=wn[0],pt=wn[1];return{vertical:1,horizontal:1,pos:[Kt(cn,e),Kt(pt,n)]}}),M=pc(k.map(function(Pt){return Pt.pos}));return{type:R,clipText:_,poses:k,splitter:A,left:M.minX,right:M.maxX,top:M.minY,bottom:M.maxY}}else if(j||R==="ellipse"){var U="",z="",P=0,W=0,C=Wo(L);if(j){var Q="";a=Z(C,4),o=a[0],Q=o===void 0?"50%":o,c=a[2],U=c===void 0?"50%":c,u=a[3],z=u===void 0?"50%":u,P=Kt(Q,Math.sqrt((e*e+n*n)/2)),W=P}else{var $="",H="";d=Z(C,5),h=d[0],$=h===void 0?"50%":h,g=d[1],H=g===void 0?"50%":g,m=d[3],U=m===void 0?"50%":m,x=d[4],z=x===void 0?"50%":x,P=Kt($,e),W=Kt(H,n)}var ee=[Kt(U,e),Kt(z,n)],k=Ae([{vertical:1,horizontal:1,pos:ee,direction:"nesw"}],Z(g$.slice(0,j?1:2).map(function(cn){return{vertical:_e(cn[1]),horizontal:cn[0],direction:cn[2],sub:!0,pos:[ee[0]+cn[0]*P,ee[1]+cn[1]*W]}})),!1);return{type:R,clipText:_,radiusX:P,radiusY:W,left:ee[0]-P,top:ee[1]-W,right:ee[0]+P,bottom:ee[1]+W,poses:k,splitter:A}}else if(R==="inset"){var C=Wo(L||"0 0 0 0"),te=C.indexOf("round"),fe=(te>-1?C.slice(0,te):C).length,B=C.slice(fe+1),Y=Z(C.slice(0,fe),4),ne=Y[0],ae=Y[1],he=ae===void 0?ne:ae,le=Y[2],ge=le===void 0?ne:le,xe=Y[3],Se=xe===void 0?he:xe,Ue=Z([ne,ge].map(function(cn){return Kt(cn,n)}),2),Ee=Ue[0],Ce=Ue[1],He=Z([Se,he].map(function(cn){return Kt(cn,e)}),2),je=He[0],$e=He[1],Qe=e-$e,vt=n-Ce,yt=DO(B,Qe-je,vt-Ee,je,Ee),k=Ae(Ae([],Z(V0(Ee,Qe,vt,je)),!1),Z(yt),!1);return{type:"inset",clipText:_,poses:k,top:Ee,left:je,right:Qe,bottom:vt,radius:B,splitter:A}}else if(R==="rect"){var C=Jl(L||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));A=",";var Pe=Z(C.map(function(gr){var mr=yp(gr).value;return mr}),4),Ye=Pe[0],$e=Pe[1],Ce=Pe[2],je=Pe[3],k=V0(Ye,$e,Ce,je);return{type:"rect",clipText:_,poses:k,top:Ye,right:$e,bottom:Ce,left:je,values:C,splitter:A}}}}}function v$(t,e,n,r,i){var a=t[e],o=a.direction,c=a.sub,u=t.map(function(){return[0,0]}),d=o?o.split(""):[];if(r&&e<8){var h=d.filter(function(P){return P==="w"||P==="e"}),g=d.filter(function(P){return P==="n"||P==="s"}),m=h[0],x=g[0];u[e]=n;var _=Z(kO(t),2),E=_[0],S=_[1],T=E&&S?E/S:0;if(T&&i){var D=(e+4)%8,R=t[D].pos,O=[0,0];o.indexOf("w")>-1?O[0]=-1:o.indexOf("e")>-1&&(O[0]=1),o.indexOf("n")>-1?O[1]=-1:o.indexOf("s")>-1&&(O[1]=1);var L=wO([E,S],n,T,O,!0),j=E+L[0],A=S+L[1],C=R[1],k=R[1],M=R[0],U=R[0];O[0]===-1?M=U-j:O[0]===1?U=M+j:(M=M-j/2,U=U+j/2),O[1]===-1?C=k-A:(O[1]===1||(C=k-A/2),k=C+A);var z=V0(C,U,k,M);t.forEach(function(P,W){u[W][0]=z[W].pos[0]-P.pos[0],u[W][1]=z[W].pos[1]-P.pos[1]})}else t.forEach(function(P,W){var Q=P.direction;Q&&(Q.indexOf(m)>-1&&(u[W][0]=n[0]),Q.indexOf(x)>-1&&(u[W][1]=n[1]))}),m&&(u[1][0]=n[0]/2,u[5][0]=n[0]/2),x&&(u[3][1]=n[1]/2,u[7][1]=n[1]/2)}else o&&!c?d.forEach(function(P){var W=P==="n"||P==="s";t.forEach(function(Q,$){var H=Q.direction,ee=Q.horizontal,te=Q.vertical;!H||H.indexOf(P)===-1||(u[$]=[W||!ee?0:n[0],!W||!te?0:n[1]])})}):u[e]=n;return u}function y$(t,e){var n=Z(OP(t,e),2),r=n[0],i=n[1],a=e.datas,o=a.clipPath,c=a.clipIndex,u=o,d=u.type,h=u.poses,g=u.splitter,m=h.map(function(D){return D.pos});if(d==="polygon")m.splice(c,0,[r,i]);else if(d==="inset"){var x=u$.indexOf(c),_=d$.indexOf(c),E=h.length;if(h$(h,m,8,x,_,r,i,m[4][0],m[4][1],m[0][0],m[0][1]),E===h.length)return}else return;var S=mE(t,o,m),T="".concat(d,"(").concat(S.join(g),")");ke(t,"onClip",ct(t,e,X({clipEventType:"added",clipType:d,poses:m,clipStyles:S,clipStyle:T,distX:0,distY:0},Pr({clipPath:T},e))))}function b$(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,a=r,o=a.type,c=a.poses,u=a.splitter,d=c.map(function(x){return x.pos}),h=d.length;if(o==="polygon")c.splice(i,1),d.splice(i,1);else if(o==="inset"){if(i<8||(f$(c,d,i,8,h),h===c.length))return}else return;var g=mE(t,r,d),m="".concat(o,"(").concat(g.join(u),")");ke(t,"onClip",ct(t,e,X({clipEventType:"removed",clipType:o,poses:d,clipStyles:g,clipStyle:m,distX:0,distY:0},Pr({clipPath:m},e))))}var x$={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,a=n.clipArea,o=n.zoom,c=n.groupable,u=t.getState(),d=u.target,h=u.width,g=u.height,m=u.allMatrix,x=u.is3d,_=u.left,E=u.top,S=u.pos1,T=u.pos2,D=u.pos3,R=u.pos4,O=u.clipPathState,L=u.snapBoundInfos,j=u.rotation;if(!d||c)return[];var A=yR(d,h,g,i||"inset",O||r);if(!A)return[];var C=x?4:3,k=A.type,M=A.poses,U=M.map(function($e){var Qe=dn(m,$e.pos,C);return[Qe[0]-_,Qe[1]-E]}),z=[],P=[],W=k==="rect",Q=k==="inset",$=k==="polygon";if(W||Q||$){var H=Q?U.slice(0,8):U;P=H.map(function($e,Qe){var vt=Qe===0?H[H.length-1]:H[Qe-1],yt=In(vt,$e),Pe=hO(vt,$e);return e.createElement("div",{key:"clipLine".concat(Qe),className:Be("line","clip-line","snap-control"),"data-clip-index":Qe,style:{width:"".concat(Pe,"px"),transform:"translate(".concat(vt[0],"px, ").concat(vt[1],"px) rotate(").concat(yt,"rad) scaleY(").concat(o,")")}})})}if(z=U.map(function($e,Qe){return e.createElement("div",{key:"clipControl".concat(Qe),className:Be("control","clip-control","snap-control"),"data-clip-index":Qe,style:{transform:"translate(".concat($e[0],"px, ").concat($e[1],"px) rotate(").concat(j,"rad) scale(").concat(o,")")}})}),Q&&z.push.apply(z,Ae([],Z(U.slice(8).map(function($e,Qe){return e.createElement("div",{key:"clipRadiusControl".concat(Qe),className:Be("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+Qe,style:{transform:"translate(".concat($e[0],"px, ").concat($e[1],"px) rotate(").concat(j,"rad) scale(").concat(o,")")}})})),!1)),k==="circle"||k==="ellipse"){var ee=A.left,te=A.top,fe=A.radiusX,B=A.radiusY,Y=Z(Ge(dn(m,[ee,te],C),dn(m,[0,0],C)),2),ne=Y[0],ae=Y[1],he="none";if(!a){for(var le=Math.max(10,fe/5,B/5),ge=[],xe=0;xe<=le;++xe){var Se=Math.PI*2/le*xe;ge.push([fe+(fe-o)*Math.cos(Se),B+(B-o)*Math.sin(Se)])}ge.push([fe,-2]),ge.push([-2,-2]),ge.push([-2,B*2+2]),ge.push([fe*2+2,B*2+2]),ge.push([fe*2+2,-2]),ge.push([fe,-2]),he="polygon(".concat(ge.map(function($e){return"".concat($e[0],"px ").concat($e[1],"px")}).join(", "),")")}z.push(e.createElement("div",{key:"clipEllipse",className:Be("clip-ellipse","snap-control"),style:{width:"".concat(fe*2,"px"),height:"".concat(B*2,"px"),clipPath:he,transform:"translate(".concat(-_+ne,"px, ").concat(-E+ae,"px) ").concat(Nv(m))}}))}if(a){var Ue=ji(Ae([S,T,D,R],Z(U),!1)),Ee=Ue.width,Ce=Ue.height,He=Ue.left,je=Ue.top;if($||W||Q){var ge=Q?U.slice(0,8):U;z.push(e.createElement("div",{key:"clipArea",className:Be("clip-area","snap-control"),style:{width:"".concat(Ee,"px"),height:"".concat(Ce,"px"),transform:"translate(".concat(He,"px, ").concat(je,"px)"),clipPath:"polygon(".concat(ge.map(function(Qe){return"".concat(Qe[0]-He,"px ").concat(Qe[1]-je,"px")}).join(", "),")")}}))}}return L&&["vertical","horizontal"].forEach(function($e){var Qe=L[$e],vt=$e==="horizontal";Qe.isSnap&&P.push.apply(P,Ae([],Z(Qe.snap.posInfos.map(function(yt,Pe){var Ye=yt.pos,Pt=Ge(dn(m,vt?[0,Ye]:[Ye,0],C),[_,E]),wn=Ge(dn(m,vt?[h,Ye]:[Ye,g],C),[_,E]);return Hh(e,"",Pt,wn,o,"clip".concat($e,"snap").concat(Pe),"guideline")})),!1)),Qe.isBound&&P.push.apply(P,Ae([],Z(Qe.bounds.map(function(yt,Pe){var Ye=yt.pos,Pt=Ge(dn(m,vt?[0,Ye]:[Ye,0],C),[_,E]),wn=Ge(dn(m,vt?[h,Ye]:[Ye,g],C),[_,E]);return Hh(e,"",Pt,wn,o,"clip".concat($e,"bounds").concat(Pe),"guideline","bounds","bold")})),!1))}),Ae(Ae([],Z(z),!1),Z(P),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,X(X({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,a=r.customClipPath,o=n.target,c=n.width,u=n.height,d=e.inputEvent?e.inputEvent.target:null,h=d&&d.getAttribute("class")||"",g=e.datas,m=yR(o,c,u,i||"inset",a);if(!m)return!1;var x=m.clipText,_=m.type,E=m.poses,S=ke(t,"onClipStart",ct(t,e,{clipType:_,clipStyle:x,poses:E.map(function(T){return T.pos})}));return S===!1?(g.isClipStart=!1,!1):(g.isControl=h&&h.indexOf("clip-control")>-1,g.isLine=h.indexOf("clip-line")>-1,g.isArea=h.indexOf("clip-area")>-1||h.indexOf("clip-ellipse")>-1,g.clipIndex=d?parseInt(d.getAttribute("data-clip-index"),10):-1,g.clipPath=m,g.isClipStart=!0,n.clipPathState=x,Rc(t,e),!0)},dragControl:function(t,e){var n,r,i,a=e.datas,o=e.originalDatas,c=e.isDragTarget;if(!a.isClipStart)return!1;var u=a,d=u.isControl,h=u.isLine,g=u.isArea,m=u.clipIndex,x=u.clipPath;if(!x)return!1;var _=gc(t.props,"clippable"),E=_.keepRatio,S=0,T=0,D=o.draggable,R=Qa(e);c&&D?(n=Z(D.prevBeforeDist,2),S=n[0],T=n[1]):(r=Z(R,2),S=r[0],T=r[1]);var O=[S,T],L=t.state,j=L.width,A=L.height,C=!g&&!d&&!h,k=x.type,M=x.poses,U=x.splitter,z=M.map(function(We){return We.pos});C&&(S=-S,T=-T);var P=!d||M[m].direction==="nesw",W=k==="inset"||k==="rect",Q=M.map(function(){return[0,0]});if(d&&!P){var $=M[m],H=$.horizontal,ee=$.vertical,te=[S*_e(H),T*_e(ee)];Q=v$(M,m,te,W,E)}else P&&(Q=z.map(function(){return[S,T]}));var fe=z.map(function(We,Ot){return At(We,Q[Ot])}),B=Ae([],Z(fe),!1);L.snapBoundInfos=null;var Y=x.type==="circle",ne=x.type==="ellipse";if(Y||ne){var ae=ji(fe),he=_e(ae.bottom-ae.top),le=_e(ne?ae.right-ae.left:he),ge=fe[0][1]+he,xe=fe[0][0]-le,Se=fe[0][0]+le;Y&&(B.push([Se,ae.bottom]),Q.push([1,0])),B.push([ae.left,ge]),Q.push([0,1]),B.push([xe,ae.bottom]),Q.push([1,0])}var Ue=oO((_.clipHorizontalGuidelines||[]).map(function(We){return Kt("".concat(We),A)}),(_.clipVerticalGuidelines||[]).map(function(We){return Kt("".concat(We),j)}),j,A),Ee=[],Ce=[];if(Y||ne)Ee=[B[4][0],B[2][0]],Ce=[B[1][1],B[3][1]];else if(W){var He=[B[0],B[2],B[4],B[6]],je=[Q[0],Q[2],Q[4],Q[6]];Ee=He.filter(function(We,Ot){return je[Ot][0]}).map(function(We){return We[0]}),Ce=He.filter(function(We,Ot){return je[Ot][1]}).map(function(We){return We[1]})}else Ee=B.filter(function(We,Ot){return Q[Ot][0]}).map(function(We){return We[0]}),Ce=B.filter(function(We,Ot){return Q[Ot][1]}).map(function(We){return We[1]});var $e=[0,0],Qe=nR(Ue,_.clipTargetBounds&&{left:0,top:0,right:j,bottom:A},Ee,Ce,5,5),vt=Qe.horizontal,yt=Qe.vertical,Pe=vt.offset,Ye=yt.offset;if(vt.isBound&&($e[1]+=Pe),yt.isBound&&($e[0]+=Ye),(ne||Y)&&Q[0][0]===0&&Q[0][1]===0){var ae=ji(fe),Pt=ae.bottom-ae.top,wn=ne?ae.right-ae.left:Pt,cn=yt.isBound?_e(Ye):yt.snapIndex===0?-Ye:Ye,pt=vt.isBound?_e(Pe):vt.snapIndex===0?-Pe:Pe;wn-=cn,Pt-=pt,Y&&(Pt=JP(yt,vt)>0?Pt:wn,wn=Pt);var Vt=B[0];B[1][1]=Vt[1]-Pt,B[2][0]=Vt[0]+wn,B[3][1]=Vt[1]+Pt,B[4][0]=Vt[0]-wn}else if(W&&E&&d){var gr=Z(kO(M),2),mr=gr[0],ei=gr[1],qs=mr&&ei?mr/ei:0,Oe=M[m],Ze=Oe.direction||"",Ui=B[1][1],ge=B[5][1],xe=B[7][0],Se=B[3][0];_e(Pe)<=_e(Ye)?Pe=kr(Pe)*_e(Ye)/qs:Ye=kr(Ye)*_e(Pe)*qs,Ze.indexOf("w")>-1?xe-=Ye:Ze.indexOf("e")>-1?Se-=Ye:(xe+=Ye/2,Se-=Ye/2),Ze.indexOf("n")>-1?Ui-=Pe:Ze.indexOf("s")>-1?ge-=Pe:(Ui+=Pe/2,ge-=Pe/2);var Gt=V0(Ui,Se,ge,xe);B.forEach(function(jt,Rn){var mn;mn=Z(Gt[Rn].pos,2),jt[0]=mn[0],jt[1]=mn[1]})}else B.forEach(function(We,Ot){var Tt=Q[Ot];Tt[0]&&(We[0]-=Ye),Tt[1]&&(We[1]-=Pe)});var Zt=mE(t,x,fe),En="".concat(k,"(").concat(Zt.join(U),")");if(L.clipPathState=En,Y||ne)Ee=[B[4][0],B[2][0]],Ce=[B[1][1],B[3][1]];else if(W){var He=[B[0],B[2],B[4],B[6]];Ee=He.map(function(Ot){return Ot[0]}),Ce=He.map(function(Ot){return Ot[1]})}else Ee=B.map(function(We){return We[0]}),Ce=B.map(function(We){return We[1]});if(L.snapBoundInfos=nR(Ue,_.clipTargetBounds&&{left:0,top:0,right:j,bottom:A},Ee,Ce,1,1),D){var Dt=L.is3d,Ct=L.allMatrix,rr=Dt?4:3,un=$e;c&&(un=[O[0]+$e[0]-R[0],O[1]+$e[1]-R[1]]),D.deltaOffset=Xt(Ct,[un[0],un[1],0,0],rr)}return ke(t,"onClip",ct(t,e,X({clipEventType:"changed",clipType:k,poses:fe,clipStyle:En,clipStyles:Zt,distX:S,distY:T},Pr((i={},i[k==="rect"?"clip":"clipPath"]=En,i),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,a=r.isLine,o=r.isClipStart,c=r.isControl;return o?(ke(t,"onClipEnd",hi(t,e,{})),i&&(c?b$(t,e):a&&y$(t,e)),i||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},_$={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":Xn(e.inputEvent.target,Be("origin"))},dragControlStart:function(t,e){var n=e.datas;Rc(t,e);var r=ct(t,e,{dragStart:Dr.dragStart(t,new sd().dragStart([0,0],e))}),i=ke(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,i===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var a=Z(Qa(e),2),o=a[0],c=a[1],u=t.state,d=u.width,h=u.height,g=u.offsetMatrix,m=u.targetMatrix,x=u.is3d,_=t.props.originRelative,E=_===void 0?!0:_,S=x?4:3,T=[o,c];if(i){var D=e.distOrigin;(D[0]||D[1])&&(T=D)}var R=At(n.startOrigin,T),O=At(n.startTargetOrigin,T),L=Ge(T,n.prevOrigin),j=Cp(g,m,R,S),A=t.getRect(),C=ji(Dc(j,d,h,S)),k=[A.left-C.left,A.top-C.top];n.prevOrigin=T;var M=[ea(O[0],d,E),ea(O[1],h,E)].join(" "),U=Dr.drag(t,Ap(e,t.state,k,!!r)),z=ct(t,e,X(X({width:d,height:h,origin:R,dist:T,delta:L,transformOrigin:M,drag:U},Pr({transformOrigin:M,transform:U.transform},e)),{afterTransform:U.transform}));return ke(t,"onDragOrigin",z),z},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?(ke(t,"onDragOriginEnd",hi(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=n.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(c){return"deltaOrigin"in c?(o[0]+=c.deltaOrigin[0],o[1]+=c.deltaOrigin[1]):"origin"in c?(o[0]=c.origin[0]-a[0],o[1]=c.origin[1]-a[1]):("x"in c?r=c.x-n.left:"deltaX"in c&&(r+=c.deltaX),"y"in c?i=c.y-n.top:"deltaY"in c&&(i+=c.deltaY)),{datas:e,distX:r,distY:i,distOrigin:o}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function w$(t,e,n,r){var i=t.filter(function(u){var d=u.virtual,h=u.horizontal;return h&&!d}).length,a=t.filter(function(u){var d=u.virtual,h=u.vertical;return h&&!d}).length,o=-1;if(e===0&&(i===0?o=0:i===1&&(o=1)),e===2&&(i<=2?o=2:i<=3&&(o=3)),e===3&&(a===0?o=4:a<4&&(o=7)),e===1&&(a<=1?o=5:a<=2&&(o=6)),!(o===-1||!t[o].virtual)){var c=t[o];E$(t,o),o<4?c.pos[0]=n:c.pos[1]=r}}function E$(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function S$(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function bR(t,e,n,r,i){r===void 0&&(r=[0,0]);var a=[];return!t||t==="0px"?a=[]:a=Wo(t),DO(a,e,n,0,0,r,i)}function xR(t,e,n,r,i){var a=t.state,o=a.width,c=a.height,u=gE(i,t.props.roundRelative,o,c),d=u.raws,h=u.styles,g=u.radiusPoses,m=p$(g,d),x=m.horizontals,_=m.verticals,E=h.join(" ");a.borderRadiusState=E;var S=ct(t,e,X({horizontals:x,verticals:_,borderRadius:E,width:o,height:c,delta:r,dist:n},Pr({borderRadius:E},e)));return ke(t,"onRound",S),S}function _R(t){var e,n,r=t.getState().style,i=r.borderRadius||"";if(!i&&t.props.groupable){var a=t.moveables[0],o=t.getTargets()[0];o&&(a?.props.target===o?(i=(n=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&n!==void 0?n:"",r.borderRadius=i):(i=uE(o).borderRadius,r.borderRadius=i))}return i}var T$={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?Be("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,a=n.height,o=n.allMatrix,c=n.is3d,u=n.left,d=n.top,h=n.borderRadiusState,g=t.props,m=g.minRoundControls,x=m===void 0?[0,0]:m,_=g.maxRoundControls,E=_===void 0?[4,4]:_,S=g.zoom,T=g.roundPadding,D=T===void 0?0:T,R=g.isDisplayShadowRoundControls,O=g.groupable;if(!r)return null;var L=h||_R(t),j=c?4:3,A=bR(L,i,a,x,!0);if(!A)return null;var C=0,k=0,M=O?[0,0]:[u,d];return A.map(function(U,z){var P=U.horizontal,W=U.vertical,Q=U.direction||"",$=Ae([],Z(U.pos),!1);k+=Math.abs(P),C+=Math.abs(W),P&&Q.indexOf("n")>-1&&($[1]-=D),W&&Q.indexOf("w")>-1&&($[0]-=D),P&&Q.indexOf("s")>-1&&($[1]+=D),W&&Q.indexOf("e")>-1&&($[0]+=D);var H=Ge(dn(o,$,j),M),ee=R&&R!=="horizontal",te=U.vertical?C<=E[1]&&(ee||!U.virtual):k<=E[0]&&(R||!U.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(z),className:Be("control","border-radius",U.vertical?"vertical":"",U.virtual?"virtual":""),"data-radius-index":z,style:{display:te?"block":"none",transform:"translate(".concat(H[0],"px, ").concat(H[1],"px) scale(").concat(S,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,a=i.getAttribute("class")||"",o=a.indexOf("border-radius")>-1,c=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,u=o?parseInt(i.getAttribute("data-radius-index"),10):-1,d=-1;if(c){var h=i.getAttribute("data-line-key")||"";h&&(d=parseInt(h.replace(/render-line-/g,""),10),isNaN(d)&&(d=-1))}if(!o&&!c)return!1;var g=ct(t,e,{}),m=ke(t,"onRoundStart",g);if(m===!1)return!1;r.lineIndex=d,r.controlIndex=u,r.isControl=o,r.isLine=c,Rc(t,e);var x=t.props,_=x.roundRelative,E=x.minRoundControls,S=E===void 0?[0,0]:E,T=t.state,D=T.width,R=T.height;r.isRound=!0,r.prevDist=[0,0];var O=_R(t),L=bR(O||"",D,R,S,!0)||[];return r.controlPoses=L,T.borderRadiusState=gE(L,_,D,R).styles.join(" "),g},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,a=Z(Qa(e),2),o=a[0],c=a[1],u=[o,c],d=Ge(u,n.prevDist),h=t.props.maxRoundControls,g=h===void 0?[4,4]:h,m=t.state,x=m.width,_=m.height,E=r[i],S=E.vertical,T=E.horizontal,D=r.map(function(O){var L=O.horizontal,j=O.vertical,A=[L*T*u[0],j*S*u[1]];if(L){if(g[0]===1)return A;if(g[0]<4&&L!==T)return A}else{if(g[1]===0)return A[1]=j*T*u[0]/x*_,A;if(S){if(g[1]===1)return A;if(g[1]<4&&j!==S)return A}}return[0,0]});D[i]=u;var R=r.map(function(O,L){return X(X({},O),{pos:At(O.pos,D[L])})});return i<4?R.slice(0,i+1).forEach(function(O){O.virtual=!1}):R.slice(4,i+1).forEach(function(O){O.virtual=!1}),n.prevDist=[o,c],xR(t,e,u,d,R)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var a=r.isControl,o=r.controlIndex,c=r.isLine,u=r.lineIndex,d=r.controlPoses,h=d.filter(function(T){var D=T.virtual;return D}).length,g=t.props.roundClickable,m=g===void 0?!0:g;if(i&&m){if(a&&(m===!0||m==="control"))S$(d,o);else if(c&&(m===!0||m==="line")){var x=Z(OP(t,e),2),_=x[0],E=x[1];w$(d,u,_,E)}h!==d.filter(function(T){var D=T.virtual;return D}).length&&xR(t,e,[0,0],[0,0],d)}var S=hi(t,e,{});return ke(t,"onRoundEnd",S),n.borderRadiusState="",S},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=sa(t,"roundable",e),o=X({targets:t.props.targets,events:a.map(function(c,u){return X(X({},c),{target:i[u],moveable:r[u],currentTarget:r[u]})})},n);return ke(t,"onRoundGroupStart",o),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=sa(t,"roundable",e),o=X({targets:t.props.targets,events:a.map(function(c,u){return X(X(X({},c),{target:i[u],moveable:r[u],currentTarget:r[u]}),Pr({borderRadius:n.borderRadius},c))})},n);return ke(t,"onRoundGroup",o),o},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,i=sa(t,"roundable",e);Mv(t,"onRound",function(c){var u=X({targets:t.props.targets,events:i.map(function(d,h){return X(X(X({},d),{target:r[h],moveable:n[h],currentTarget:n[h]}),Pr({borderRadius:c.borderRadius},d))})},c);ke(t,"onRoundGroup",u)});var a=this.dragControlEnd(t,e);if(!a)return!1;var o=X({targets:t.props.targets,events:i.map(function(c,u){var d;return X(X({},c),{target:r[u],moveable:n[u],currentTarget:n[u],lastEvent:(d=c.datas)===null||d===void 0?void 0:d.lastEvent})})},a);return ke(t,"onRoundGroupEnd",o),o},unset:function(t){t.state.borderRadiusState=""}};function A$(t,e){var n=e?4:3,r=nn(n),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var NO={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.targetMatrix,a=n.inlineTransform,o=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(wP(i,!0),")"),c=!a||a==="none"?o:a;e.datas.startTransforms=A$(c,r)?[]:Wo(c)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return ct(t,e,{setTransform:function(n){e.datas.startTransforms=Fn(n)?n:Wo(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return ct(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),ke(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),ke(t,"onBeforeRender",ct(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),ke(t,"onBeforeRenderEnd",ct(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=sa(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,c){var u=i[c];return n.setTransform(u,o),n.resetStyle(o),n.fillDragStartParams(u,o)});ke(t,"onBeforeRenderGroupStart",ct(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=sa(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,c){var u=i[c];return n.resetStyle(o),n.fillDragParams(u,o)});ke(t,"onBeforeRenderGroup",ct(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),ke(t,"onBeforeRenderGroupEnd",ct(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},MO={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){ke(t,"onRenderStart",ct(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){ke(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){ke(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){ke(t,"onRenderGroupStart",ct(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=sa(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,c){var u=i[c];return n.fillDragParams(u,o)});ke(t,"onRenderGroup",ct(t,e,X(X({isPinch:!!e.isPinch,targets:t.props.targets,transform:Am(e),transformObject:{}},Pr(Cm(e))),{events:a})))},dragGroupEnd:function(t,e){var n=this,r=sa(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,c){var u=i[c];return n.fillDragEndParams(u,o)});ke(t,"onRenderGroupEnd",ct(t,e,X({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:a,transformObject:{},transform:Am(e)},Pr(Cm(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var n={};return ad(R0(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),ct(t,e,X({isPinch:!!e.isPinch,transformObject:n,transform:Am(e)},Pr(Cm(e))))},fillDragEndParams:function(t,e){var n={};return ad(R0(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),ct(t,e,X({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:n,transform:Am(e)},Pr(Cm(e))))}};function _h(t,e,n,r,i,a,o){a.clientDistX=a.distX,a.clientDistY=a.distY;var c=i==="Start",u=i==="End",d=i==="After",h=t.state.target,g=a.isRequest,m=r.indexOf("Control")>-1;if(!h||c&&m&&!g&&t.areaElement===a.inputEvent.target)return!1;var x=Ae([],Z(e),!1);if(g){var _=a.requestAble;x.some(function(z){return z.name===_})||x.push.apply(x,Ae([],Z(t.props.ables.filter(function(z){return z.name===_})),!1))}if(!x.length||x.every(function(z){return z.dragRelation}))return!1;var E=a.inputEvent,S;u&&E&&(S=document.elementFromPoint(a.clientX,a.clientY)||E.target);var T=!1,D=function(){var z;T=!0,(z=a.stop)===null||z===void 0||z.call(a)},R=c&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());R&&t.updateRect(i,!0,!1);var O=a.datas,L=m?"controlGesto":"targetGesto",j=t[L],A=function(z,P,W){if(!(P in z)||j!==t[L])return!1;var Q=z.name,$=O[Q]||(O[Q]={});if(c&&($.isEventStart=!W||!z[W]||z[W](t,a)),!$.isEventStart)return!1;var H=z[P](t,X(X({},a),{stop:D,datas:$,originalDatas:O,inputTarget:S}));return t._emitter.off(),c&&H===!1&&($.isEventStart=!1),H};R&&x.forEach(function(z){z.unset&&z.unset(t)}),A(NO,"drag".concat(r).concat(i));var C=0,k=0;n.forEach(function(z){if(T)return!1;var P="".concat(z).concat(r).concat(i),W="".concat(z).concat(r,"Condition");i===""&&!g&&XH(t.state,a);var Q=x.filter(function(ee){return ee[P]});Q=Q.filter(function(ee,te){return ee.name&&Q.indexOf(ee)===te});var $=Q.filter(function(ee){return A(ee,P,W)}),H=$.length;T&&++C,H&&++k,!T&&c&&Q.length&&!H&&(C+=Q.filter(function(ee){var te=ee.name,fe=O[te];return fe.isEventStart?ee.dragRelation!=="strong":!1}).length?1:0)}),(!d||k)&&A(MO,"drag".concat(r).concat(i));var M=j!==t[L]||C===n.length;if((u||T||M)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(z){z.state.gestos={}}),x.forEach(function(z){z.unset&&z.unset(t)})),c&&!M&&!g&&k&&t.props.preventDefault&&a?.preventDefault(),t.isUnmounted||M)return!1;if(!c&&k&&!o||u){var U=t.props.flushSync||uO;U(function(){t.updateRect(u?i:"",!0,!1),t.forceUpdate()})}return!c&&!u&&!d&&k&&!o&&_h(t,e,n,r,i+"After",a),!0}function vE(t,e){return function(n,r){var i;r===void 0&&(r=n.inputEvent.target);var a=r,o=t.areaElement,c=t._dragTarget;return!c||!e&&(!((i=t.controlGesto)===null||i===void 0)&&i.isFlag())?!1:a===c||c.contains(a)||a===o||!t.isMoveableElement(a)&&!t.controlBox.contains(a)||Xn(a,"moveable-area")||Xn(a,"moveable-padding")||Xn(a,"moveable-edgeDraggable")}}function PO(t,e,n){var r=t.controlBox,i=[],a=t.props,o=a.dragArea,c=t.state.target,u=a.dragTarget;i.push(r),(!o||u)&&i.push(e),!o&&u&&c&&e!==c&&a.dragTargetSelf&&i.push(c);var d=vE(t);return VO(t,i,"targetAbles",n,{dragStart:d,pinchStart:d})}function OO(t,e){var n=t.controlBox,r=[];r.push(n);var i=vE(t,!0),a=function(o,c){if(c===void 0&&(c=o.inputEvent.target),c===n)return!0;var u=i(o,c);return!u};return VO(t,r,"controlAbles",e,{dragStart:a,pinchStart:a})}function VO(t,e,n,r,i){i===void 0&&(i={});var a=n==="targetAbles",o=t.props,c=o.pinchOutside,u=o.pinchThreshold,d=o.preventClickEventOnDrag,h=o.preventClickDefault,g=o.checkInput,m=o.dragFocusedInput,x=o.preventDefault,_=x===void 0?!0:x,E=o.preventRightClick,S=E===void 0?!0:E,T=o.preventWheelClick,D=T===void 0?!0:T,R=o.dragContainer,O=ja(R,!0),L={preventDefault:_,preventRightClick:S,preventWheelClick:D,container:O||Bo(t.getControlBoxElement()),pinchThreshold:u,pinchOutside:c,preventClickEventOnDrag:a?d:!1,preventClickEventOnDragStart:a?h:!1,preventClickEventByCondition:a?null:function(C){return t.controlBox.contains(C.target)},checkInput:a?g:!1,dragFocusedInput:m},j=new JG(e,L),A=r==="Control";return["drag","pinch"].forEach(function(C){["Start","","End"].forEach(function(k){j.on("".concat(C).concat(k),function(M){var U,z=M.eventType,P=C==="drag"&&M.isPinch;if(i[z]&&!i[z](M)){M.stop();return}if(!P){var W=C==="drag"?[C]:["drag",C],Q=Ae([],Z(t[n]),!1),$=_h(t,Q,W,r,k,M);$?(t.props.stopPropagation||k==="Start"&&A)&&((U=M?.inputEvent)===null||U===void 0||U.stopPropagation()):M.stop()}})})}),j}var C$=(function(){function t(e,n,r){var i=this;this.target=e,this.moveable=n,this.eventName=r,this.ables=[],this._onEvent=function(a){var o=i.eventName,c=i.moveable;c.state.disableNativeEvent||i.ables.forEach(function(u){u[o](c,{inputEvent:a})})},e.addEventListener(r.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t})();function I$(t,e,n,r){var i;n===void 0&&(n=e);var a=UP(t,e),o=a.matrixes,c=a.is3d,u=a.targetMatrix,d=a.transformOrigin,h=a.targetOrigin,g=a.offsetContainer,m=a.hasFixed,x=a.zoom,_=Fq(g,n),E=_.matrixes,S=_.is3d,T=_.offsetContainer,D=_.zoom,R=r,O=4,L=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,j=u,A=nn(O),C=nn(O),k=nn(O),M=nn(O),U=o.length,z=E.map(function(te){return X(X({},te),{matrix:te.matrix?Ae([],Z(te.matrix),!1):void 0})}).reverse();o.reverse(),!c&&R&&(j=ca(j,3,4),l_(o)),!S&&R&&l_(z),z.forEach(function(te){C=Xt(C,te.matrix,O)});var P=n||ol(t),W=((i=z[0])===null||i===void 0?void 0:i.target)||$h(P,P,!0).offsetParent,Q=z.slice(1).reduce(function(te,fe){return Xt(te,fe.matrix,O)},nn(O));o.forEach(function(te,fe){if(U-2===fe&&(k=A.slice()),U-1===fe&&(M=A.slice()),!te.matrix){var B=o[fe+1],Y=HH(te,B,W,O,Xt(Q,A,O));te.matrix=hc(Y,O)}A=Xt(A,te.matrix,O)});var $=!L&&c;j||(j=nn($?4:3));var H=Nv(L&&j.length===16?ca(j,4,3):j,$),ee=C;return C=xP(C,O,O),{hasZoom:x!==1||D!==1,hasFixed:m,matrixes:o,rootMatrix:C,originalRootMatrix:ee,beforeMatrix:k,offsetMatrix:M,allMatrix:A,targetMatrix:j,targetTransform:H,inlineTransform:t.style.transform,transformOrigin:d,targetOrigin:h,is3d:R,offsetContainer:g,offsetRootContainer:T}}function R$(t,e,n,r){n===void 0&&(n=e);var i=0,a=0,o=0,c={},u=pO(t);if(t&&(i=u.offsetWidth,a=u.offsetHeight),t){var d=I$(t,e,n,r),h=Wu(d.allMatrix,d.transformOrigin,i,a);c=X(X({},d),h);var g=Wu(d.allMatrix,[50,50],100,100);o=gO([g.pos1,g.pos2],g.direction)}var m=4;return X(X(X({hasZoom:!1,width:i,height:a,rotation:o},u),{originalRootMatrix:nn(m),rootMatrix:nn(m),beforeMatrix:nn(m),offsetMatrix:nn(m),allMatrix:nn(m),targetMatrix:nn(m),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),c)}function f_(t,e,n,r,i,a){a===void 0&&(a=[]);var o=1,c=[0,0],u=Rm(),d=Rm(),h=Rm(),g=Rm(),m=[0,0],x={},_=R$(e,n,i,!0);if(e){var E=Jr(e);a.forEach(function(z){x[z]=E(z)});var S=_.is3d?4:3,T=Wu(_.offsetMatrix,At(_.transformOrigin,_P(_.targetMatrix,S)),_.width,_.height);o=T.direction,c=At(T.origin,[T.left-_.left,T.top-_.top]),g=xh(_.offsetRootContainer);var D=$h(r,r,!0).offsetParent||_.offsetRootContainer;if(_.hasZoom){var R=Wu(Xt(_.originalRootMatrix,_.allMatrix),_.transformOrigin,_.width,_.height),O=Wu(_.originalRootMatrix,M0(Jr(D)("transformOrigin")).map(function(z){return parseFloat(z)}),D.offsetWidth,D.offsetHeight);if(u=B1(R,g),h=B1(O,g,D,!0),t){var L=R.left,j=R.top;d=B1({left:L,top:j,bottom:j,right:j},g)}}else{u=xh(e),h=Uq(D),t&&(d=xh(t));var A=h.left,C=h.top,k=h.clientLeft,M=h.clientTop,U=[u.left-A,u.top-C];m=Ge(cd(_.rootMatrix,U,4),[k+_.left,M+_.top])}}return X({targetClientRect:u,containerClientRect:h,moveableClientRect:d,rootContainerClientRect:g,beforeDirection:o,beforeOrigin:c,originalBeforeOrigin:c,target:e,style:x,offsetDelta:m},_)}function wR(t){var e=t.pos1,n=t.pos2,r=t.pos3,i=t.pos4;if(!e||!n||!r||!i)return null;var a=pc([e,n,r,i]),o=[a.minX,a.minY],c=Ge(t.origin,o);return e=Ge(e,o),n=Ge(n,o),r=Ge(r,o),i=Ge(i,o),X(X({},t),{left:t.left,top:t.top,posDelta:o,pos1:e,pos2:n,pos3:r,pos4:i,origin:c,beforeOrigin:c,isPersisted:!0})}var ud=(function(t){Sp(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state=X({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},f_(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isMoveableMounted=!1,n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new Sv,n._prevOriginalDragTarget=null,n._originalDragTarget=null,n._prevDragTarget=null,n._dragTarget=null,n._prevPropTarget=null,n._propTarget=null,n._prevDragArea=!1,n._isPropTargetChanged=!1,n._hasFirstTarget=!1,n._reiszeObserver=null,n._observerId=0,n._mutationObserver=null,n._rootContainer=null,n._viewContainer=null,n._viewClassNames=[],n._store={},n.checkUpdateRect=function(){if(!n.isDragging()){var r=n.props.parentMoveable;if(r){r.checkUpdateRect();return}q7(n._observerId),n._observerId=KM(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},n}return e.prototype.render=function(){var n=this.props,r=this.getState(),i=n.parentPosition,a=n.className,o=n.target,c=n.zoom,u=n.cspNonce,d=n.translateZ,h=n.cssStyled,g=n.groupable,m=n.linePadding,x=n.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var _=Z(i||[0,0],2),E=_[0],S=_[1],T=r.left,D=r.top,R=r.target,O=r.direction,L=r.hasFixed,j=r.offsetDelta,A=n.targets,C=this.isDragging(),k={};this.getEnabledAbles().forEach(function(Q){k["data-able-".concat(Q.name.toLowerCase())]=!0});var M=this._getAbleClassName(),U=A&&A.length&&(R||g)||o||!this._hasFirstTarget&&this.state.isPersisted,z=this.controlBox||this.props.firstRenderState||this.props.persistData,P=[T-E,D-S];!g&&n.useAccuratePosition&&(P[0]+=j[0],P[1]+=j[1]);var W={position:L?"fixed":"absolute",display:U?"block":"none",visibility:z?"visible":"hidden",transform:"translate3d(".concat(P[0],"px, ").concat(P[1],"px, ").concat(d,")"),"--zoom":c,"--zoompx":"".concat(c,"px")};return m&&(W["--moveable-line-padding"]=m),x&&(W["--moveable-control-padding"]=x),aa(h,X({cspNonce:u,ref:As(this,"controlBox"),className:"".concat(Be("control-box",O===-1?"reverse":"",C?"dragging":"")," ").concat(M," ").concat(a)},k,{onClick:this._onPreventClick,style:W}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var n=this.props,r=n.parentMoveable,i=n.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!r&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(n){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(n)},e.prototype.componentWillUnmount=function(){var n,r;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(n=this._reiszeObserver)===null||n===void 0||n.disconnect(),(r=this._mutationObserver)===null||r===void 0||r.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),qu(this,!1),qu(this,!0);var a=this.events;for(var o in a){var c=a[o];c&&c.destroy()}},e.prototype.getTargets=function(){var n=this.props.target;return n?[n]:[]},e.prototype.getAble=function(n){var r=this.props.ables||[];return Zr(r,function(i){return i.name===n})},e.prototype.getContainer=function(){var n=this.props,r=n.parentMoveable,i=n.wrapperMoveable,a=n.container;return a||i&&i.getContainer()||r&&r.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(n){var r;return n&&(((r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"class"))||"").indexOf(Zw)>-1},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=this.targetGesto,a=this.controlGesto;return i&&vE(this)({inputEvent:n},r)?i.isFlag()||i.triggerDragStart(n):a&&this.isMoveableElement(r)&&(a.isFlag()||a.triggerDragStart(n)),this},e.prototype.hitTest=function(n){var r=this.state,i=r.target,a=r.pos1,o=r.pos2,c=r.pos3,u=r.pos4,d=r.targetClientRect;if(!i)return 0;var h;if(Md(n)){var g=n.getBoundingClientRect();h={left:g.left,top:g.top,width:g.width,height:g.height}}else h=X({width:0,height:0},n);var m=h.left,x=h.top,_=h.width,E=h.height,S=HI([a,o,u,c],d),T=YG(S,[[m,x],[m+_,x],[m+_,x+E],[m,x+E]]),D=TP(S);return!T||!D?0:Math.min(100,T/D*100)},e.prototype.isInside=function(n,r){var i=this.state,a=i.target,o=i.pos1,c=i.pos2,u=i.pos3,d=i.pos4,h=i.targetClientRect;return a?Xx([n,r],HI([o,c,d,u],h)):!1},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0);var a=this.props,o=!a.parentPosition&&!a.wrapperMoveable;o&&od(!0);var c=a.parentMoveable,u=this.state,d=u.target||a.target,h=this.getContainer(),g=c?c._rootContainer:this._rootContainer,m=f_(this.controlBox,d,h,h,g||h,this._getRequestStyles());if(!d&&this._hasFirstTarget&&a.persistData){var x=wR(a.persistData);for(var _ in x)m[_]=x[_]}o&&od(),this.updateState(m,c?!1:i)},e.prototype.isDragging=function(n){var r,i,a=this.targetGesto,o=this.controlGesto;if(a?.isFlag()){if(!n)return!0;var c=a.getEventData();return!!(!((r=c[n])===null||r===void 0)&&r.isEventStart)}if(o?.isFlag()){if(!n)return!0;var c=o.getEventData();return!!(!((i=c[n])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(n){this.updateRect(n,!0)},e.prototype.getRect=function(){var n=this.state,r=Bi(this.state),i=Z(r,4),a=i[0],o=i[1],c=i[2],u=i[3],d=ji(r),h=n.width,g=n.height,m=d.width,x=d.height,_=d.left,E=d.top,S=[n.left,n.top],T=At(S,n.origin),D=At(S,n.beforeOrigin),R=n.transformOrigin;return{width:m,height:x,left:_,top:E,pos1:a,pos2:o,pos3:c,pos4:u,offsetWidth:h,offsetHeight:g,beforeOrigin:D,origin:T,transformOrigin:R,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(n){if(!n||n==="target"){var r=this.targetGesto;r?.isIdle()===!1&&c_(this,!1),r?.stop()}if(!n||n==="control"){var r=this.controlGesto;r?.isIdle()===!1&&c_(this,!0),r?.stop()}},e.prototype.getRotation=function(){var n=this.state,r=n.pos1,i=n.pos2,a=n.direction;return ZH(r,i,a)},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this,o=a.props,c=o.parentMoveable||o.wrapperMoveable||a,u=c.props.ables,d=o.groupable,h=Zr(u,function(T){return T.name===n});if(this.isDragging()||!h||!h.request)return{request:function(){return this},requestEnd:function(){return this}};var g=h.request(a),m=i||r.isInstant,x=g.isControl?"controlAbles":"targetAbles",_="".concat(d?"Group":"").concat(g.isControl?"Control":""),E=Ae([],Z(c[x]),!1),S={request:function(T){return _h(a,E,["drag"],_,"",X(X({},g.request(T)),{requestAble:n,isRequest:!0}),m),S},requestEnd:function(){return _h(a,E,["drag"],_,"End",X(X({},g.requestEnd()),{requestAble:n,isRequest:!0}),m),S}};return _h(a,E,["drag"],_,"Start",X(X({},g.requestStart(r)),{requestAble:n,isRequest:!0}),m),m?S.request(r).requestEnd():S},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var n=this.getState(),r=this.props,i=r.padding,a=n.originalBeforeOrigin,o=n.transformOrigin,c=n.allMatrix,u=n.is3d,d=n.pos1,h=n.pos2,g=n.pos3,m=n.pos4,x=n.left,_=n.top,E=n.isPersisted,S=r.zoom||1;if(!i&&S<=1){n.renderPoses=[d,h,g,m],n.renderLines=[[d,h],[h,m],[m,g],[g,d]];return}var T=TO(i||{}),D=T.left,R=T.top,O=T.bottom,L=T.right,j=u?4:3,A=[];E?A=o:this.controlBox&&r.groupable?A=a:A=At(a,[x,_]);var C=C0(j,hc(A.map(function(W){return-W}),j),c,hc(o,j)),k=Ri(C,d,[-D,-R],j),M=Ri(C,h,[L,-R],j),U=Ri(C,g,[-D,O],j),z=Ri(C,m,[L,O],j);n.renderPoses=[k,M,U,z],n.renderLines=[[k,M],[M,z],[z,U],[U,k]];{var P=S/2;n.renderLines=[[Ri(C,d,[-D-P,-R],j),Ri(C,h,[L+P,-R],j)],[Ri(C,h,[L,-R-P],j),Ri(C,m,[L,O+P],j)],[Ri(C,m,[L+P,O],j),Ri(C,g,[-D-P,O],j)],[Ri(C,g,[-D,O+P],j),Ri(C,d,[-D,-R-P],j)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,r=n.target,i=n.container,a=n.parentMoveable,o=this.state,c=o.target,u=o.container;if(!(!c&&!r)){this.updateAbles();var d=!u_(c,r),h=d||!u_(u,i);if(h){var g=i||this.controlBox;g&&this.unsetAbles(),this.updateState({target:r,container:i}),!a&&g&&this.updateRect("End",!1,!1),this._isPropTargetChanged=d}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(n,r){var i=this.props;if(this._emitter.trigger(n,r),i.parentMoveable&&r.isRequest&&!r.isRequestChild)return i.parentMoveable.triggerEvent(n,r,!0);var a=i[n];return a&&a(r)},e.prototype.useCSS=function(n,r){var i=this.props.customStyledMap,a=n+r;return i[a]||(i[a]=IP(n,r)),i[a]},e.prototype.getState=function(){var n,r=this.props;(r.target||!((n=r.targets)===null||n===void 0)&&n.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,a=r.persistData,o=r.firstRenderState;if(o&&!i)return o;if(!this._hasFirstTarget&&a){var c=wR(a);if(c)return this.updateState(c,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(n)})},e.prototype.updateAbles=function(n,r){n===void 0&&(n=this.props.ables),r===void 0&&(r="");var i=this.props,a=i.triggerAblesSimultaneously,o=this.getEnabledAbles(n),c="drag".concat(r,"Start"),u="pinch".concat(r,"Start"),d="drag".concat(r,"ControlStart"),h=Dm(o,[c,u],a),g=Dm(o,[d],a);this.enabledAbles=o,this.targetAbles=h,this.controlAbles=g},e.prototype.updateState=function(n,r){if(r){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var a in n)i[a]=n[a]}},e.prototype.getEnabledAbles=function(n){n===void 0&&(n=this.props.ables);var r=this.props;return n.filter(function(i){return i&&(i.always&&r[i.name]!==!1||r[i.name])})},e.prototype.renderAbles=function(){var n=this,r=this.props,i=r.triggerAblesSimultaneously,a={createElement:aa};return this.renderState={},KH(_O(Dm(this.getEnabledAbles(),["render"],i).map(function(o){var c=o.render;return c(n,a)||[]})).filter(function(o){return o}),function(o){var c=o.key;return c}).map(function(o){return o[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,o,c=(o=(a=i.requestStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return Ae(Ae([],Z(r),!1),Z(c),!1)},Ae([],Z(this.props.requestStyles||[]),!1));return n},e.prototype._updateObserver=function(n){this._updateResizeObserver(n),this._updateMutationObserver(n)},e.prototype._updateEvents=function(){var n=this.targetAbles.length,r=this.controlAbles.length,i=this._dragTarget,a=!n&&this.targetGesto||this._isTargetChanged(!0);a&&(qu(this,!1),this.updateState({gestos:{}})),r||qu(this,!0),i&&n&&!this.targetGesto&&(this.targetGesto=PO(this,i,"")),!this.controlGesto&&r&&(this.controlGesto=OO(this,"Control"))},e.prototype._updateTargets=function(){var n=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=n.dragArea,this._propTarget=n.target,this._originalDragTarget=n.dragTarget||n.target,this._dragTarget=ja(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var n=this.props,r=n,i=r.zoom,a=r.hideDefaultLines,o=r.hideChildMoveableDefaultLines,c=r.parentMoveable;if(a||c&&o)return[];var u=this.getState(),d={createElement:aa};return u.renderLines.map(function(h,g){return Hh(d,"",h[0],h[1],i,"render-line-".concat(g))})},e.prototype._isTargetChanged=function(n){var r=this.props,i=r.dragTarget||r.target,a=this._prevOriginalDragTarget,o=this._prevDragArea,c=r.dragArea,u=!c&&a!==i,d=(n||c)&&o!==c;return u||d||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var n=this,r=this.props,i=r.dragArea?this.areaElement:this.state.target,a=this.events,o=Ps(a);if(this._isTargetChanged())for(var c in a){var u=a[c];u&&u.destroy(),a[c]=null}if(i){var d=this.enabledAbles;o.forEach(function(h){var g=Dm(d,[h]),m=g.length>0,x=a[h];if(!m){x&&(x.destroy(),a[h]=null);return}x||(x=new C$(i,n,h),a[h]=x),x.setAbles(g)})}},e.prototype._checkUpdateRootContainer=function(){var n=this.props.rootContainer;!this._rootContainer&&n&&(this._rootContainer=ja(n,!0))},e.prototype._checkUpdateViewContainer=function(){var n=this.props.viewContainer;!this._viewContainer&&n&&(this._viewContainer=ja(n,!0));var r=this._viewContainer;r&&this._changeAbleViewClassNames(Ae(Ae([],Z(this._getAbleViewClassNames()),!1),[this.isDragging()?a$:""],!1))},e.prototype._changeAbleViewClassNames=function(n){var r=this._viewContainer,i=xO(n.filter(Boolean),function(d){return d}).map(function(d){var h=Z(d,1),g=h[0];return g}),a=this._viewClassNames,o=bp(a,i),c=o.removed,u=o.added;c.forEach(function(d){JM(r,a[d])}),u.forEach(function(d){ZM(r,i[d])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var n=this;return(this.getEnabledAbles().map(function(r){var i;return((i=r.viewClassName)===null||i===void 0?void 0:i.call(r,n))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(n){var r=this;n===void 0&&(n="");var i=this.getEnabledAbles(),a=this.targetGesto,o=this.controlGesto,c=a?.isFlag()?a.getEventData():{},u=o?.isFlag()?o.getEventData():{};return i.map(function(d){var h,g,m,x=d.name,_=((h=d.className)===null||h===void 0?void 0:h.call(d,r))||"";return(!((g=c[x])===null||g===void 0)&&g.isEventStart||!((m=u[x])===null||m===void 0)&&m.isEventStart)&&(_+=" ".concat(Be("".concat(x).concat(n,"-dragging")))),_.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(n){var r,i=this.props,a=i.target,o=Bo(this.getControlBoxElement());if(!o.ResizeObserver||!a||!i.useResizeObserver){(r=this._reiszeObserver)===null||r===void 0||r.disconnect();return}if(!(n.target===a&&this._reiszeObserver)){var c=new o.ResizeObserver(this.checkUpdateRect);c.observe(a,{box:"border-box"}),this._reiszeObserver=c}},e.prototype._updateMutationObserver=function(n){var r=this,i,a=this.props,o=a.target,c=Bo(this.getControlBoxElement());if(!c.MutationObserver||!o||!a.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(n.target===o&&this._mutationObserver)){var u=new c.MutationObserver(function(d){var h,g;try{for(var m=uq(d),x=m.next();!x.done;x=m.next()){var _=x.value;_.type==="attributes"&&_.attributeName==="style"&&r.checkUpdateRect()}}catch(E){h={error:E}}finally{try{x&&!x.done&&(g=m.return)&&g.call(m)}finally{if(h)throw h.error}}});u.observe(o,{attributes:!0}),this._mutationObserver=u}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:uO,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e})(sP),yE={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var n,r=t.props,i=r.targets||[],a=t.getState(),o=a.left,c=a.top,u=a.isPersisted,d=r.zoom||1,h=t.renderGroupRects,g=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];u?i=g.map(function(){return null}):g=[];var m=Hu(t,"parentPosition",[o,c],function(_){return _.join(",")}),x=Hu(t,"requestStyles",t.getRequestChildStyles(),function(_){return _.join(",")});return t.moveables=t.moveables.slice(0,i.length),Ae(Ae([],Z(i.map(function(_,E){return e.createElement(ud,{key:"moveable"+E,ref:qM(t,"moveables",E),target:_,origin:!1,requestStyles:x,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[o,c],persistData:g[E],zoom:d})})),!1),Z(_O(h.map(function(_,E){var S=_.pos1,T=_.pos2,D=_.pos3,R=_.pos4,O=[S,T,D,R];return[[0,1],[1,3],[3,2],[2,0]].map(function(L,j){var A=Z(L,2),C=A[0],k=A[1];return Hh(e,"",Ge(O[C],m),Ge(O[k],m),d,"group-rect-".concat(E,"-").concat(j))})}))),!1)}},D$=Tp("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,a=t.isMoveableElement(i),o=!a&&t.controlBox.contains(i);if(!(!r||!i||e.isDrag||t.isMoveableElement(i)||o)){var c=n.contains(i);ke(t,"onClick",ct(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:c}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var i=t.props.targets,a=i.indexOf(r),o=a>-1,c=!1;a===-1&&(a=Ms(i,function(u){return u.contains(r)}),c=a>-1),ke(t,"onClickGroup",ct(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:a,isTarget:o,containsTarget:c,moveableTarget:i[a]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function _u(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),X(X({},t),{datas:e})}var k$=Tp("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?qP(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&Xn(i,Be("direction"))&&Xn(i,Be("edge"))&&Xn(i,Be("edgeDraggable"))},dragStart:function(t,e){return Dr.dragStart(t,_u(e))},drag:function(t,e){return Dr.drag(t,_u(e))},dragEnd:function(t,e){return Dr.dragEnd(t,_u(e))},dragGroupCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&Xn(i,Be("direction"))&&Xn(i,Be("line"))},dragGroupStart:function(t,e){return Dr.dragGroupStart(t,_u(e))},dragGroup:function(t,e){return Dr.dragGroup(t,_u(e))},dragGroupEnd:function(t,e){return Dr.dragGroupEnd(t,_u(e))},unset:function(t){return Dr.unset(t)}}),jO={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},bE=[NO,IO,OH,e$,Dr,k$,a_,t$,r$,vH,l$,c$,s$,_$,x$,T$,yE,jO,D$,CO,MO],N$=bE.reduce(function(t,e){return(e.events||[]).forEach(function(n){QM(t,n)}),t},[]),M$=bE.reduce(function(t,e){return(e.props||[]).forEach(function(n){QM(t,n)}),t},[]);function ER(t,e){var n=Z(t,3),r=n[0],i=n[1],a=n[2];return(r*e[0]+i*e[1]+a)/Math.sqrt(r*r+i*i)}function Mm(t,e){var n=Z(t,2),r=n[0],i=n[1];return-r*e[0]-i*e[1]}function SR(t,e){return Math.max.apply(Math,Ae([],Z(t.map(function(n){var r=Z(n,4),i=r[0],a=r[1],o=r[2],c=r[3];return Math.max(i[e],a[e],o[e],c[e])})),!1))}function TR(t,e){return Math.min.apply(Math,Ae([],Z(t.map(function(n){var r=Z(n,4),i=r[0],a=r[1],o=r[2],c=r[3];return Math.min(i[e],a[e],o[e],c[e])})),!1))}function P$(t,e){var n,r,i,a=[0,0],o=[0,0],c=[0,0],u=[0,0],d=0,h=0;if(!t.length)return{pos1:a,pos2:o,pos3:c,pos4:u,minX:0,minY:0,maxX:0,maxY:0,width:d,height:h,rotation:e};var g=it(e,jr);if(g%90){var m=g/180*Math.PI,x=Math.tan(m),_=-1/x,E=[t_,KI],S=[[0,0],[0,0]],T=[t_,KI],D=[[0,0],[0,0]];t.forEach(function(ne){ne.forEach(function(ae){var he=ER([-x,1,0],ae),le=ER([-_,1,0],ae);E[0]>he&&(S[0]=ae,E[0]=he),E[1]<he&&(S[1]=ae,E[1]=he),T[0]>le&&(D[0]=ae,T[0]=le),T[1]<le&&(D[1]=ae,T[1]=le)})});var R=Z(S,2),O=R[0],L=R[1],j=Z(D,2),A=j[0],C=j[1],k=[-x,1,Mm([-x,1],O)],M=[-x,1,Mm([-x,1],L)],U=[-_,1,Mm([-_,1],A)],z=[-_,1,Mm([-_,1],C)];n=Z([[k,U],[k,z],[M,U],[M,z]].map(function(ne){var ae=Z(ne,2),he=ae[0],le=ae[1];return Ww(he,le)[0]}),4),a=n[0],o=n[1],c=n[2],u=n[3],d=T[1]-T[0],h=E[1]-E[0]}else{var P=TR(t,0),W=TR(t,1),Q=SR(t,0),$=SR(t,1);if(a=[P,W],o=[Q,W],c=[P,$],u=[Q,$],d=Q-P,h=$-W,g%180){var H=[c,a,u,o];r=Z(H,4),a=r[0],o=r[1],c=r[2],u=r[3],d=$-W,h=Q-P}}if(g%360>180){var H=[u,c,o,a];i=Z(H,4),a=i[0],o=i[1],c=i[2],u=i[3]}var ee=pc([a,o,c,u]),te=ee.minX,fe=ee.minY,B=ee.maxX,Y=ee.maxY;return{pos1:a,pos2:o,pos3:c,pos4:u,width:d,height:h,minX:te,minY:fe,maxX:B,maxY:Y,rotation:e}}function zO(t,e){var n=e.map(function(r){if(Fn(r)){var i=zO(t,r),a=i.length;return a>1?i:a===1?i[0]:null}else{var o=Zr(t,function(c){var u=c.manager;return u.props.target===r});return o?(o.finded=!0,o.manager):null}}).filter(Boolean);return n.length===1&&Fn(n[0])?n[0]:n}var O$=(function(t){Sp(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.differ=new SP,n.moveables=[],n.transformOrigin="50% 50%",n.renderGroupRects=[],n._targetGroups=[],n._hasFirstTargets=!1,n}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){var a;i===void 0&&(i=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;od(!0),this.moveables.forEach(function(xe){xe.updateRect(n,!1,!1)});var c=this.props,u=this.moveables,d=o.target||c.target,h=u.map(function(xe){return{finded:!1,manager:xe}}),g=this.props.targetGroups||[],m=zO(h,g),x=c.useDefaultGroupRotate;m.push.apply(m,Ae([],Z(h.filter(function(xe){var Se=xe.finded;return!Se}).map(function(xe){var Se=xe.manager;return Se})),!1));var _=[],E=!r||n!==""&&c.updateGroup,S=c.defaultGroupRotate||0;if(!this._hasFirstTargets){var T=(a=c.persistData)===null||a===void 0?void 0:a.rotation;T!=null&&(S=T)}function D(xe,Se,Ue){var Ee=xe.map(function(yt){if(Fn(yt)){var Pe=D(yt,Se),Ye=[Pe.pos1,Pe.pos2,Pe.pos3,Pe.pos4];return _.push(Pe),{poses:Ye,rotation:Pe.rotation}}else return{poses:Bi(yt.state),rotation:yt.getRotation()}}),Ce=Ee.map(function(yt){var Pe=yt.rotation;return Pe}),He=0,je=Ce[0],$e=Ce.every(function(yt){return Math.abs(je-yt)<.1});E?He=!x&&$e?je:S:He=!x&&!Ue&&$e?je:Se;var Qe=Ee.map(function(yt){var Pe=yt.poses;return Pe}),vt=P$(Qe,He);return vt}var R=D(m,this.rotation,!0);E&&(this.rotation=R.rotation,this.transformOrigin=c.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=g,this.renderGroupRects=_;var O=this.transformOrigin,L=this.rotation,j=this.scale,A=R.width,C=R.height,k=R.minX,M=R.minY,U=JH([[0,0],[A,0],[0,C],[A,C]],pE(O,A,C),this.rotation/180*Math.PI),z=pc(U.result),P=z.minX,W=z.minY,Q=" rotate(".concat(L,"deg)")+" scale(".concat(kr(j[0]),", ").concat(kr(j[1]),")"),$="translate(".concat(-P,"px, ").concat(-W,"px)").concat(Q);this.controlBox.style.transform="translate3d(".concat(k,"px, ").concat(M,"px, ").concat(this.props.translateZ||0,")"),d.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(O,";")+"width:".concat(A,"px;height:").concat(C,"px;")+"transform: ".concat($),o.width=A,o.height=C;var H=this.getContainer(),ee=f_(this.controlBox,d,this.controlBox,this.getContainer(),this._rootContainer||H,[]),te=[ee.left,ee.top],fe=Z(Bi(ee),4),B=fe[0],Y=fe[1],ne=fe[2],ae=fe[3],he=pc([B,Y,ne,ae]),le=[he.minX,he.minY],ge=kr(j[0]*j[1]);ee.pos1=Ge(B,le),ee.pos2=Ge(Y,le),ee.pos3=Ge(ne,le),ee.pos4=Ge(ae,le),ee.left=k-ee.left+le[0],ee.top=M-ee.top+le[1],ee.origin=Ge(At(te,ee.origin),le),ee.beforeOrigin=Ge(At(te,ee.beforeOrigin),le),ee.originalBeforeOrigin=At(te,ee.originalBeforeOrigin),ee.transformOrigin=Ge(At(te,ee.transformOrigin),le),d.style.transform="translate(".concat(-P-le[0],"px, ").concat(-W-le[1],"px)")+Q,od(),this.updateState(X(X({},ee),{posDelta:le,direction:ge,beforeDirection:ge}),i)},e.prototype.getRect=function(){return X(X({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.triggerEvent=function(n,r,i){if(i||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,r);this._emitter.trigger(n,r)},e.prototype.getRequestChildStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,o,c=(o=(a=i.requestChildStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return Ae(Ae([],Z(r),!1),Z(c),!1)},[]);return n},e.prototype.getMoveables=function(){return Ae([],Z(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,Ae(Ae([],Z(this.props.ables),!1),[yE],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=ja(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var n=this.state,r=this.props,i=this._prevDragTarget,a=r.dragTarget||this.areaElement,o=r.targets,c=this.differ.update(o),u=c.added,d=c.changed,h=c.removed,g=u.length||h.length;(g||this._prevOriginalDragTarget!==this._originalDragTarget)&&(qu(this,!1),qu(this,!0),this.updateState({gestos:{}})),i!==a&&(n.target=null),n.target||(n.target=this.areaElement,this.controlBox.style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=PO(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=OO(this,"GroupControl")));var m=!u_(n.container,r.container);m&&(n.container=r.container),(m||g||this.transformOrigin!==(r.defaultGroupOrigin||"50% 50%")||d.length||o.length&&!SO(this._targetGroups,r.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!g},e.prototype._updateObserver=function(){},e.defaultProps=X(X({},ud.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e})(ud),V$=(function(t){Sp(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.moveables=[],n}return e.prototype.render=function(){var n=this,r,i=this.props,a=i.cspNonce,o=i.cssStyled,c=i.persistData,u=i.targets||[],d=u.length,h=this.isUnmounted||!d,g=(r=c?.children)!==null&&r!==void 0?r:[];return h&&!d&&g.length?u=g.map(function(){return null}):h||(g=[]),aa(o,{cspNonce:a,ref:As(this,"controlBox"),className:Be("control-box")},u.map(function(m,x){var _,E,S=(E=(_=i.individualGroupableProps)===null||_===void 0?void 0:_.call(i,m,x))!==null&&E!==void 0?E:{};return aa(ud,X({key:"moveable"+x,ref:qM(n,"moveables",x)},i,S,{target:m,wrapperMoveable:n,isWrapperMounted:n.isMoveableMounted,persistData:g[x]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0),od(!0),this.moveables.forEach(function(a){a.updateRect(n,r,i)}),od()},e.prototype.getRect=function(){return X(X({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this.moveables.map(function(u){return u.request(n,X(X({},r),{isInstant:!1}),!1)}),o=i||r.isInstant,c={request:function(u){return a.forEach(function(d){return d.request(u)}),this},requestEnd:function(){return a.forEach(function(u){return u.requestEnd()}),this}};return o?c.request(r).requestEnd():c},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=r,a=Zr(this.moveables,function(o){var c=o.getTargets()[0],u=o.getControlBoxElement(),d=o.getDragElement();return!c||!d?!1:d===i||d.contains(i)||d!==c&&c===i||c.contains(i)||u===i||u.contains(i)});return a&&a.dragStart(n,r),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return Ae([],Z(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e})(ud);function LO(t,e){var n=[];return t.forEach(function(r){if(r){if(Qr(r)){e[r]&&n.push.apply(n,Ae([],Z(e[r]),!1));return}Fn(r)?n.push.apply(n,Ae([],Z(LO(r,e)),!1)):n.push(r)}}),n}function BO(t,e){var n=[];return t.forEach(function(r){if(r){if(Qr(r)){e[r]&&n.push.apply(n,Ae([],Z(e[r]),!1));return}Fn(r)?n.push(BO(r,e)):n.push(r)}}),n}function UO(t,e){return t.length!==e.length||t.some(function(n,r){var i=e[r];return!n&&!i?!1:n!=i?Fn(n)&&Fn(i)?UO(n,i):!0:!1})}var j$=(function(t){Sp(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n._differ=new SP,n._elementTargets=[],n._tmpRefTargets=[],n._tmpSelectorMap={},n._onChangeTargets=null,n}return e.makeStyled=function(){var n={},r=this.getTotalAbles();r.forEach(function(a){var o=a.css;o&&o.forEach(function(c){n[c]=!0})});var i=Ps(n).join(`
`);this.defaultStyled=IP("div",N7(Zw,_q+i))},e.getTotalAbles=function(){return Ae([IO,yE,jO,CO],Z(this.defaultAbles),!1)},e.prototype.render=function(){var n,r=this.constructor;r.defaultStyled||r.makeStyled();var i=this.props,a=i.ables,o=i.props,c=lq(i,["ables","props"]),u=Z(this._updateRefs(!0),2),d=u[0],h=u[1],g=LO(d,h),m=g.length>1,x=r.getTotalAbles(),_=Ae(Ae([],Z(x),!1),Z(a||[]),!1),E=X(X(X({},c),o||{}),{ables:_,cssStyled:r.defaultStyled,customStyledMap:r.customStyledMap});this._elementTargets=g;var S=null,T=this.moveable,D=c.persistData;if(D?.children&&(m=!0),c.individualGroupable)return aa(V$,X({key:"individual-group",ref:As(this,"moveable")},E,{target:null,targets:g}));if(m){var R=BO(d,h);if(T&&!T.props.groupable&&!T.props.individualGroupable){var O=T.props.target;O&&g.indexOf(O)>-1&&(S=X({},T.state))}return aa(O$,X({key:"group",ref:As(this,"moveable")},E,(n=c.groupableProps)!==null&&n!==void 0?n:{},{target:null,targets:g,targetGroups:R,firstRenderState:S}))}else{var L=g[0];if(T&&(T.props.groupable||T.props.individualGroupable)){var j=T.moveables||[],A=Zr(j,function(C){return C.props.target===L});A&&(S=X({},A.state))}return aa(ud,X({key:"single",ref:As(this,"moveable")},E,{target:L,firstRenderState:S}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var n,r;return(r=(n=this.moveable)===null||n===void 0?void 0:n.getTargets())!==null&&r!==void 0?r:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var n=this,r;return this._onChangeTargets=function(){n._onChangeTargets=null,r()},new Promise(function(i){r=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(n){var r=this.refTargets,i=hE(this.props.target||this.props.targets),a=typeof document<"u",o=UO(r,i),c=this.selectorMap,u={};return this.refTargets.forEach(function d(h){if(Qr(h)){var g=c[h];g?u[h]=c[h]:a&&(o=!0,u[h]=[].slice.call(document.querySelectorAll(h)))}else Fn(h)&&h.forEach(d)}),this._tmpRefTargets=i,this._tmpSelectorMap=u,[i,u,!n&&o]},e.prototype._checkChangeTargets=function(){var n,r,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var a=this._differ.update(this._elementTargets),o=a.added,c=a.removed,u=o.length||c.length;u&&((r=(n=this.props).onChangeTargets)===null||r===void 0||r.call(n,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var d=Z(this._updateRefs(),3),h=d[0],g=d[1],m=d[2];this.refTargets=h,this.selectorMap=g,m&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,cq([M7(PP)],e.prototype,"moveable",void 0),e})(sP),z$=(function(t){Sp(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=bE,e})(j$),h_=function(t,e){return h_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},h_(t,e)};function xE(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");h_(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Yh=function(){return Yh=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Yh.apply(this,arguments)};function L$(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}var B$=(function(t){xE(e,t);function e(r){var i=t.call(this,r)||this;return i.state={},i.state=i.props,i}var n=e.prototype;return n.render=function(){return aa(z$,Yh({ref:As(this,"moveable")},this.state))},e})(qw),U$=M$,F$=PP,G$=N$,q$=(function(t){xE(e,t);function e(r,i){i===void 0&&(i={});var a=t.call(this)||this;a.containerProvider=null,a.selfElement=null,a._warp=!1;var o=Yh({},i),c={};G$.forEach(function(h){c[G7("on ".concat(h))]=function(g){return a.trigger(h,g)}});var u;i.warpSelf?(delete i.warpSelf,a._warp=!0,u=r):(u=Nd(r).createElement("div"),r.appendChild(u)),a.containerProvider=FI(aa(B$,Yh({ref:As(a,"innerMoveable")},o,c)),u),a.selfElement=u;var d=o.target;return Fn(d)&&d.length>1&&a.updateRect(),a}var n=e.prototype;return n.setState=function(r,i){this.innerMoveable.setState(r,i)},n.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},n.dragStart=function(r,i){i===void 0&&(i=r.target);var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r,i)},n.destroy=function(){var r,i=this.selfElement;FI(null,i,this.containerProvider),this._warp||(r=i?.parentElement)===null||r===void 0||r.removeChild(i),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=L$([MI(F$,function(r,i){r[i]||(r[i]=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var c=this.getMoveable();if(!(!c||!c[i]))return c[i].apply(c,a)})}),MI(U$,function(r,i){Object.defineProperty(r,i,{get:function(){return this.getMoveable().props[i]},set:function(a){var o;this.setState((o={},o[i]=a,o))},enumerable:!0,configurable:!0})})],e),e})(Sv),H$=(function(t){xE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(q$);const AR=t=>{let e;const n=new Set,r=(d,h)=>{const g=typeof d=="function"?d(e):d;if(!Object.is(g,e)){const m=e;e=h??(typeof g!="object"||g===null)?g:Object.assign({},e,g),n.forEach(x=>x(e,m))}},i=()=>e,c={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d))},u=e=t(r,i,c);return c},$$=(t=>t?AR(t):AR),Y$=t=>t;function K$(t,e=Y$){const n=hm.useSyncExternalStore(t.subscribe,hm.useCallback(()=>e(t.getState()),[t,e]),hm.useCallback(()=>e(t.getInitialState()),[t,e]));return hm.useDebugValue(n),n}const CR=t=>{const e=$$(t),n=r=>K$(e,r);return Object.assign(n,e),n},_E=(t=>t?CR(t):CR),IR={BASE_URL:"/personal-budget-pwa/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyDwUA0paVI6n01aENV5Q2aLwVz1DEDtNuA",VITE_FIREBASE_APP_ID:"1:137454342284:web:ab8b52955e6f0ffd42aba9",VITE_FIREBASE_AUTH_DOMAIN:"personal-budget-pwa-5defb.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-BCLXBQHT9L",VITE_FIREBASE_MESSAGING_SENDER_ID:"137454342284",VITE_FIREBASE_PROJECT_ID:"personal-budget-pwa-5defb",VITE_FIREBASE_STORAGE_BUCKET:"personal-budget-pwa-5defb.firebasestorage.app"},Kh=new Map,Pm=t=>{const e=Kh.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},X$=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=Kh.get(n.name);if(r)return{type:"tracked",store:t,...r};const i={connection:e.connect(n),stores:{}};return Kh.set(n.name,i),{type:"tracked",store:t,...i}},W$=(t,e)=>{if(e===void 0)return;const n=Kh.get(t);n&&(delete n.stores[e],Object.keys(n.stores).length===0&&Kh.delete(t))},Q$=t=>{var e,n;if(!t)return;const r=t.split(`
`),i=r.findIndex(o=>o.includes("api.setState"));if(i<0)return;const a=((e=r[i+1])==null?void 0:e.trim())||"";return(n=/.+ (.+) .+/.exec(a))==null?void 0:n[1]},Z$=(t,e={})=>(n,r,i)=>{const{enabled:a,anonymousActionType:o,store:c,...u}=e;let d;try{d=(a??(IR?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!d)return t(n,r,i);const{connection:h,...g}=X$(c,d,u);let m=!0;i.setState=((E,S,T)=>{const D=n(E,S);if(!m)return D;const R=T===void 0?{type:o||Q$(new Error().stack)||"anonymous"}:typeof T=="string"?{type:T}:T;return c===void 0?(h?.send(R,r()),D):(h?.send({...R,type:`${c}/${R.type}`},{...Pm(u.name),[c]:i.getState()}),D)}),i.devtools={cleanup:()=>{h&&typeof h.unsubscribe=="function"&&h.unsubscribe(),W$(u.name,c)}};const x=(...E)=>{const S=m;m=!1,n(...E),m=S},_=t(i.setState,r,i);if(g.type==="untracked"?h?.init(_):(g.stores[g.store]=i,h?.init(Object.fromEntries(Object.entries(g.stores).map(([E,S])=>[E,E===g.store?_:S.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let E=!1;const S=i.dispatch;i.dispatch=(...T)=>{(IR?"production":void 0)!=="production"&&T[0].type==="__setState"&&!E&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),E=!0),S(...T)}}return h.subscribe(E=>{var S;switch(E.type){case"ACTION":if(typeof E.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return G1(E.payload,T=>{if(T.type==="__setState"){if(c===void 0){x(T.state);return}Object.keys(T.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const D=T.state[c];if(D==null)return;JSON.stringify(i.getState())!==JSON.stringify(D)&&x(D);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(T)});case"DISPATCH":switch(E.payload.type){case"RESET":return x(_),c===void 0?h?.init(i.getState()):h?.init(Pm(u.name));case"COMMIT":if(c===void 0){h?.init(i.getState());return}return h?.init(Pm(u.name));case"ROLLBACK":return G1(E.state,T=>{if(c===void 0){x(T),h?.init(i.getState());return}x(T[c]),h?.init(Pm(u.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return G1(E.state,T=>{if(c===void 0){x(T);return}JSON.stringify(i.getState())!==JSON.stringify(T[c])&&x(T[c])});case"IMPORT_STATE":{const{nextLiftedState:T}=E.payload,D=(S=T.computedStates.slice(-1)[0])==null?void 0:S.state;if(!D)return;x(c===void 0?D:D[c]),h?.send(null,T);return}case"PAUSE_RECORDING":return m=!m}return}}),_},J$=Z$,G1=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};function eY(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const o=u=>u===null?null:JSON.parse(u,void 0),c=(a=n.getItem(i))!=null?a:null;return c instanceof Promise?c.then(o):o(c)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const p_=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return p_(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return p_(r)(n)}}}},tY=(t,e)=>(n,r,i)=>{let a={storage:eY(()=>localStorage),partialize:E=>E,version:0,merge:(E,S)=>({...S,...E}),...e},o=!1;const c=new Set,u=new Set;let d=a.storage;if(!d)return t((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...E)},r,i);const h=()=>{const E=a.partialize({...r()});return d.setItem(a.name,{state:E,version:a.version})},g=i.setState;i.setState=(E,S)=>(g(E,S),h());const m=t((...E)=>(n(...E),h()),r,i);i.getInitialState=()=>m;let x;const _=()=>{var E,S;if(!d)return;o=!1,c.forEach(D=>{var R;return D((R=r())!=null?R:m)});const T=((S=a.onRehydrateStorage)==null?void 0:S.call(a,(E=r())!=null?E:m))||void 0;return p_(d.getItem.bind(d))(a.name).then(D=>{if(D)if(typeof D.version=="number"&&D.version!==a.version){if(a.migrate){const R=a.migrate(D.state,D.version);return R instanceof Promise?R.then(O=>[!0,O]):[!0,R]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,D.state];return[!1,void 0]}).then(D=>{var R;const[O,L]=D;if(x=a.merge(L,(R=r())!=null?R:m),n(x,!0),O)return h()}).then(()=>{T?.(x,void 0),x=r(),o=!0,u.forEach(D=>D(x))}).catch(D=>{T?.(void 0,D)})};return i.persist={setOptions:E=>{a={...a,...E},E.storage&&(d=E.storage)},clearStorage:()=>{d?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>_(),hasHydrated:()=>o,onHydrate:E=>(c.add(E),()=>{c.delete(E)}),onFinishHydration:E=>(u.add(E),()=>{u.delete(E)})},a.skipHydration||_(),x||m},FO=tY,nY=()=>{};var RR={};const GO=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},rY=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},qO={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,h=a>>2,g=(a&3)<<4|c>>4;let m=(c&15)<<2|d>>6,x=d&63;u||(x=64,o||(m=64)),r.push(n[h],n[g],n[m],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(GO(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):rY(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||c==null||d==null||g==null)throw new iY;const m=a<<2|c>>4;if(r.push(m),d!==64){const x=c<<4&240|d>>2;if(r.push(x),g!==64){const _=d<<6&192|g;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class iY extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aY=function(t){const e=GO(t);return qO.encodeByteArray(e,!0)},j0=function(t){return aY(t).replace(/\./g,"")},HO=function(t){try{return qO.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $O(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const sY=()=>$O().__FIREBASE_DEFAULTS__,oY=()=>{if(typeof process>"u"||typeof RR>"u")return;const t=RR.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lY=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&HO(t[1]);return e&&JSON.parse(e)},Pv=()=>{try{return nY()||sY()||oY()||lY()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},YO=t=>Pv()?.emulatorHosts?.[t],cY=t=>{const e=YO(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},KO=()=>Pv()?.config,XO=t=>Pv()?.[`_${t}`];class uY{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function jd(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function WO(t){return(await fetch(t,{credentials:"include"})).ok}function dY(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[j0(JSON.stringify(n)),j0(JSON.stringify(o)),""].join(".")}const wh={};function fY(){const t={prod:[],emulator:[]};for(const e of Object.keys(wh))wh[e]?t.emulator.push(e):t.prod.push(e);return t}function hY(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let DR=!1;function QO(t,e){if(typeof window>"u"||typeof document>"u"||!jd(window.location.host)||wh[t]===e||wh[t]||DR)return;wh[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",a=fY().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,x){m.setAttribute("width","24"),m.setAttribute("id",x),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{DR=!0,o()},m}function h(m,x){m.setAttribute("id",x),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=hY(r),x=n("text"),_=document.getElementById(x)||document.createElement("span"),E=n("learnmore"),S=document.getElementById(E)||document.createElement("a"),T=n("preprendIcon"),D=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const R=m.element;c(R),h(S,E);const O=d();u(D,T),R.append(D,_,S,O),document.body.appendChild(R)}a?(_.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function Qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pY(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qn())}function ZO(){const t=Pv()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gY(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mY(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vY(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yY(){const t=Qn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function JO(){return!ZO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function e4(){return!ZO()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function t4(){try{return typeof indexedDB=="object"}catch{return!1}}function bY(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const xY="FirebaseError";class Ls extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=xY,Object.setPrototypeOf(this,Ls.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ip.prototype.create)}}class Ip{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?_Y(a,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Ls(i,c,r)}}function _Y(t,e){return t.replace(wY,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const wY=/\{\$([^}]+)}/g;function EY(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function mc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],o=e[i];if(kR(a)&&kR(o)){if(!mc(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function kR(t){return t!==null&&typeof t=="object"}function Rp(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ih(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function ah(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function SY(t,e){const n=new TY(t,e);return n.subscribe.bind(n)}class TY{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");AY(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=q1),i.error===void 0&&(i.error=q1),i.complete===void 0&&(i.complete=q1);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AY(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function q1(){}function gn(t){return t&&t._delegate?t._delegate:t}class vc{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Bl="[DEFAULT]";class CY{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new uY;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RY(e))try{this.getOrInitializeService({instanceIdentifier:Bl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Bl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bl){return this.instances.has(e)}getOptions(e=Bl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:IY(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Bl){return this.component?this.component.multipleInstances?e:Bl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IY(t){return t===Bl?void 0:t}function RY(t){return t.instantiationMode==="EAGER"}class DY{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CY(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var _t;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_t||(_t={}));const kY={debug:_t.DEBUG,verbose:_t.VERBOSE,info:_t.INFO,warn:_t.WARN,error:_t.ERROR,silent:_t.SILENT},NY=_t.INFO,MY={[_t.DEBUG]:"log",[_t.VERBOSE]:"log",[_t.INFO]:"info",[_t.WARN]:"warn",[_t.ERROR]:"error"},PY=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=MY[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wE{constructor(e){this.name=e,this._logLevel=NY,this._logHandler=PY,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _t))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kY[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_t.DEBUG,...e),this._logHandler(this,_t.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_t.VERBOSE,...e),this._logHandler(this,_t.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_t.INFO,...e),this._logHandler(this,_t.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_t.WARN,...e),this._logHandler(this,_t.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_t.ERROR,...e),this._logHandler(this,_t.ERROR,...e)}}const OY=(t,e)=>e.some(n=>t instanceof n);let NR,MR;function VY(){return NR||(NR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jY(){return MR||(MR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const n4=new WeakMap,g_=new WeakMap,r4=new WeakMap,H1=new WeakMap,EE=new WeakMap;function zY(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(Uo(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&n4.set(n,t)}).catch(()=>{}),EE.set(e,t),e}function LY(t){if(g_.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});g_.set(t,e)}let m_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return g_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||r4.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Uo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BY(t){m_=t(m_)}function UY(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call($1(this),e,...n);return r4.set(r,e.sort?e.sort():[e]),Uo(r)}:jY().includes(t)?function(...e){return t.apply($1(this),e),Uo(n4.get(this))}:function(...e){return Uo(t.apply($1(this),e))}}function FY(t){return typeof t=="function"?UY(t):(t instanceof IDBTransaction&&LY(t),OY(t,VY())?new Proxy(t,m_):t)}function Uo(t){if(t instanceof IDBRequest)return zY(t);if(H1.has(t))return H1.get(t);const e=FY(t);return e!==t&&(H1.set(t,e),EE.set(e,t)),e}const $1=t=>EE.get(t);function GY(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),c=Uo(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Uo(o.result),u.oldVersion,u.newVersion,Uo(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const qY=["get","getKey","getAll","getAllKeys","count"],HY=["put","add","delete","clear"],Y1=new Map;function PR(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Y1.get(e))return Y1.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=HY.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||qY.includes(n)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),i&&u.done]))[0]};return Y1.set(e,a),a}BY(t=>({...t,get:(e,n,r)=>PR(e,n)||t.get(e,n,r),has:(e,n)=>!!PR(e,n)||t.has(e,n)}));class $Y{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(YY(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function YY(t){return t.getComponent()?.type==="VERSION"}const v_="@firebase/app",OR="0.14.6";const Os=new wE("@firebase/app"),KY="@firebase/app-compat",XY="@firebase/analytics-compat",WY="@firebase/analytics",QY="@firebase/app-check-compat",ZY="@firebase/app-check",JY="@firebase/auth",eK="@firebase/auth-compat",tK="@firebase/database",nK="@firebase/data-connect",rK="@firebase/database-compat",iK="@firebase/functions",aK="@firebase/functions-compat",sK="@firebase/installations",oK="@firebase/installations-compat",lK="@firebase/messaging",cK="@firebase/messaging-compat",uK="@firebase/performance",dK="@firebase/performance-compat",fK="@firebase/remote-config",hK="@firebase/remote-config-compat",pK="@firebase/storage",gK="@firebase/storage-compat",mK="@firebase/firestore",vK="@firebase/ai",yK="@firebase/firestore-compat",bK="firebase",xK="12.6.0";const y_="[DEFAULT]",_K={[v_]:"fire-core",[KY]:"fire-core-compat",[WY]:"fire-analytics",[XY]:"fire-analytics-compat",[ZY]:"fire-app-check",[QY]:"fire-app-check-compat",[JY]:"fire-auth",[eK]:"fire-auth-compat",[tK]:"fire-rtdb",[nK]:"fire-data-connect",[rK]:"fire-rtdb-compat",[iK]:"fire-fn",[aK]:"fire-fn-compat",[sK]:"fire-iid",[oK]:"fire-iid-compat",[lK]:"fire-fcm",[cK]:"fire-fcm-compat",[uK]:"fire-perf",[dK]:"fire-perf-compat",[fK]:"fire-rc",[hK]:"fire-rc-compat",[pK]:"fire-gcs",[gK]:"fire-gcs-compat",[mK]:"fire-fst",[yK]:"fire-fst-compat",[vK]:"fire-vertex","fire-js":"fire-js",[bK]:"fire-js-all"};const z0=new Map,wK=new Map,b_=new Map;function VR(t,e){try{t.container.addComponent(e)}catch(n){Os.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function dd(t){const e=t.name;if(b_.has(e))return Os.debug(`There were multiple attempts to register component ${e}.`),!1;b_.set(e,t);for(const n of z0.values())VR(n,t);for(const n of wK.values())VR(n,t);return!0}function SE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ni(t){return t==null?!1:t.settings!==void 0}const EK={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fo=new Ip("app","Firebase",EK);class SK{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fo.create("app-deleted",{appName:this._name})}}const zd=xK;function i4(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:y_,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Fo.create("bad-app-name",{appName:String(i)});if(n||(n=KO()),!n)throw Fo.create("no-options");const a=z0.get(i);if(a){if(mc(n,a.options)&&mc(r,a.config))return a;throw Fo.create("duplicate-app",{appName:i})}const o=new DY(i);for(const u of b_.values())o.addComponent(u);const c=new SK(n,r,o);return z0.set(i,c),c}function a4(t=y_){const e=z0.get(t);if(!e&&t===y_&&KO())return i4();if(!e)throw Fo.create("no-app",{appName:t});return e}function Go(t,e,n){let r=_K[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Os.warn(o.join(" "));return}dd(new vc(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const TK="firebase-heartbeat-database",AK=1,Xh="firebase-heartbeat-store";let K1=null;function s4(){return K1||(K1=GY(TK,AK,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Xh)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fo.create("idb-open",{originalErrorMessage:t.message})})),K1}async function CK(t){try{const n=(await s4()).transaction(Xh),r=await n.objectStore(Xh).get(o4(t));return await n.done,r}catch(e){if(e instanceof Ls)Os.warn(e.message);else{const n=Fo.create("idb-get",{originalErrorMessage:e?.message});Os.warn(n.message)}}}async function jR(t,e){try{const r=(await s4()).transaction(Xh,"readwrite");await r.objectStore(Xh).put(e,o4(t)),await r.done}catch(n){if(n instanceof Ls)Os.warn(n.message);else{const r=Fo.create("idb-set",{originalErrorMessage:n?.message});Os.warn(r.message)}}}function o4(t){return`${t.name}!${t.options.appId}`}const IK=1024,RK=30;class DK{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new NK(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=zR();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>RK){const i=MK(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Os.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=zR(),{heartbeatsToSend:n,unsentEntries:r}=kK(this._heartbeatsCache.heartbeats),i=j0(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Os.warn(e),""}}}function zR(){return new Date().toISOString().substring(0,10)}function kK(t,e=IK){const n=[];let r=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),LR(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),LR(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class NK{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return t4()?bY().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await CK(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return jR(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return jR(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function LR(t){return j0(JSON.stringify({version:2,heartbeats:t})).length}function MK(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function PK(t){dd(new vc("platform-logger",e=>new $Y(e),"PRIVATE")),dd(new vc("heartbeat",e=>new DK(e),"PRIVATE")),Go(v_,OR,t),Go(v_,OR,"esm2020"),Go("fire-js","")}PK("");var BR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var qo,l4;(function(){var t;function e(A,C){function k(){}k.prototype=C.prototype,A.F=C.prototype,A.prototype=new k,A.prototype.constructor=A,A.D=function(M,U,z){for(var P=Array(arguments.length-2),W=2;W<arguments.length;W++)P[W-2]=arguments[W];return C.prototype[U].apply(M,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,C,k){k||(k=0);const M=Array(16);if(typeof C=="string")for(var U=0;U<16;++U)M[U]=C.charCodeAt(k++)|C.charCodeAt(k++)<<8|C.charCodeAt(k++)<<16|C.charCodeAt(k++)<<24;else for(U=0;U<16;++U)M[U]=C[k++]|C[k++]<<8|C[k++]<<16|C[k++]<<24;C=A.g[0],k=A.g[1],U=A.g[2];let z=A.g[3],P;P=C+(z^k&(U^z))+M[0]+3614090360&4294967295,C=k+(P<<7&4294967295|P>>>25),P=z+(U^C&(k^U))+M[1]+3905402710&4294967295,z=C+(P<<12&4294967295|P>>>20),P=U+(k^z&(C^k))+M[2]+606105819&4294967295,U=z+(P<<17&4294967295|P>>>15),P=k+(C^U&(z^C))+M[3]+3250441966&4294967295,k=U+(P<<22&4294967295|P>>>10),P=C+(z^k&(U^z))+M[4]+4118548399&4294967295,C=k+(P<<7&4294967295|P>>>25),P=z+(U^C&(k^U))+M[5]+1200080426&4294967295,z=C+(P<<12&4294967295|P>>>20),P=U+(k^z&(C^k))+M[6]+2821735955&4294967295,U=z+(P<<17&4294967295|P>>>15),P=k+(C^U&(z^C))+M[7]+4249261313&4294967295,k=U+(P<<22&4294967295|P>>>10),P=C+(z^k&(U^z))+M[8]+1770035416&4294967295,C=k+(P<<7&4294967295|P>>>25),P=z+(U^C&(k^U))+M[9]+2336552879&4294967295,z=C+(P<<12&4294967295|P>>>20),P=U+(k^z&(C^k))+M[10]+4294925233&4294967295,U=z+(P<<17&4294967295|P>>>15),P=k+(C^U&(z^C))+M[11]+2304563134&4294967295,k=U+(P<<22&4294967295|P>>>10),P=C+(z^k&(U^z))+M[12]+1804603682&4294967295,C=k+(P<<7&4294967295|P>>>25),P=z+(U^C&(k^U))+M[13]+4254626195&4294967295,z=C+(P<<12&4294967295|P>>>20),P=U+(k^z&(C^k))+M[14]+2792965006&4294967295,U=z+(P<<17&4294967295|P>>>15),P=k+(C^U&(z^C))+M[15]+1236535329&4294967295,k=U+(P<<22&4294967295|P>>>10),P=C+(U^z&(k^U))+M[1]+4129170786&4294967295,C=k+(P<<5&4294967295|P>>>27),P=z+(k^U&(C^k))+M[6]+3225465664&4294967295,z=C+(P<<9&4294967295|P>>>23),P=U+(C^k&(z^C))+M[11]+643717713&4294967295,U=z+(P<<14&4294967295|P>>>18),P=k+(z^C&(U^z))+M[0]+3921069994&4294967295,k=U+(P<<20&4294967295|P>>>12),P=C+(U^z&(k^U))+M[5]+3593408605&4294967295,C=k+(P<<5&4294967295|P>>>27),P=z+(k^U&(C^k))+M[10]+38016083&4294967295,z=C+(P<<9&4294967295|P>>>23),P=U+(C^k&(z^C))+M[15]+3634488961&4294967295,U=z+(P<<14&4294967295|P>>>18),P=k+(z^C&(U^z))+M[4]+3889429448&4294967295,k=U+(P<<20&4294967295|P>>>12),P=C+(U^z&(k^U))+M[9]+568446438&4294967295,C=k+(P<<5&4294967295|P>>>27),P=z+(k^U&(C^k))+M[14]+3275163606&4294967295,z=C+(P<<9&4294967295|P>>>23),P=U+(C^k&(z^C))+M[3]+4107603335&4294967295,U=z+(P<<14&4294967295|P>>>18),P=k+(z^C&(U^z))+M[8]+1163531501&4294967295,k=U+(P<<20&4294967295|P>>>12),P=C+(U^z&(k^U))+M[13]+2850285829&4294967295,C=k+(P<<5&4294967295|P>>>27),P=z+(k^U&(C^k))+M[2]+4243563512&4294967295,z=C+(P<<9&4294967295|P>>>23),P=U+(C^k&(z^C))+M[7]+1735328473&4294967295,U=z+(P<<14&4294967295|P>>>18),P=k+(z^C&(U^z))+M[12]+2368359562&4294967295,k=U+(P<<20&4294967295|P>>>12),P=C+(k^U^z)+M[5]+4294588738&4294967295,C=k+(P<<4&4294967295|P>>>28),P=z+(C^k^U)+M[8]+2272392833&4294967295,z=C+(P<<11&4294967295|P>>>21),P=U+(z^C^k)+M[11]+1839030562&4294967295,U=z+(P<<16&4294967295|P>>>16),P=k+(U^z^C)+M[14]+4259657740&4294967295,k=U+(P<<23&4294967295|P>>>9),P=C+(k^U^z)+M[1]+2763975236&4294967295,C=k+(P<<4&4294967295|P>>>28),P=z+(C^k^U)+M[4]+1272893353&4294967295,z=C+(P<<11&4294967295|P>>>21),P=U+(z^C^k)+M[7]+4139469664&4294967295,U=z+(P<<16&4294967295|P>>>16),P=k+(U^z^C)+M[10]+3200236656&4294967295,k=U+(P<<23&4294967295|P>>>9),P=C+(k^U^z)+M[13]+681279174&4294967295,C=k+(P<<4&4294967295|P>>>28),P=z+(C^k^U)+M[0]+3936430074&4294967295,z=C+(P<<11&4294967295|P>>>21),P=U+(z^C^k)+M[3]+3572445317&4294967295,U=z+(P<<16&4294967295|P>>>16),P=k+(U^z^C)+M[6]+76029189&4294967295,k=U+(P<<23&4294967295|P>>>9),P=C+(k^U^z)+M[9]+3654602809&4294967295,C=k+(P<<4&4294967295|P>>>28),P=z+(C^k^U)+M[12]+3873151461&4294967295,z=C+(P<<11&4294967295|P>>>21),P=U+(z^C^k)+M[15]+530742520&4294967295,U=z+(P<<16&4294967295|P>>>16),P=k+(U^z^C)+M[2]+3299628645&4294967295,k=U+(P<<23&4294967295|P>>>9),P=C+(U^(k|~z))+M[0]+4096336452&4294967295,C=k+(P<<6&4294967295|P>>>26),P=z+(k^(C|~U))+M[7]+1126891415&4294967295,z=C+(P<<10&4294967295|P>>>22),P=U+(C^(z|~k))+M[14]+2878612391&4294967295,U=z+(P<<15&4294967295|P>>>17),P=k+(z^(U|~C))+M[5]+4237533241&4294967295,k=U+(P<<21&4294967295|P>>>11),P=C+(U^(k|~z))+M[12]+1700485571&4294967295,C=k+(P<<6&4294967295|P>>>26),P=z+(k^(C|~U))+M[3]+2399980690&4294967295,z=C+(P<<10&4294967295|P>>>22),P=U+(C^(z|~k))+M[10]+4293915773&4294967295,U=z+(P<<15&4294967295|P>>>17),P=k+(z^(U|~C))+M[1]+2240044497&4294967295,k=U+(P<<21&4294967295|P>>>11),P=C+(U^(k|~z))+M[8]+1873313359&4294967295,C=k+(P<<6&4294967295|P>>>26),P=z+(k^(C|~U))+M[15]+4264355552&4294967295,z=C+(P<<10&4294967295|P>>>22),P=U+(C^(z|~k))+M[6]+2734768916&4294967295,U=z+(P<<15&4294967295|P>>>17),P=k+(z^(U|~C))+M[13]+1309151649&4294967295,k=U+(P<<21&4294967295|P>>>11),P=C+(U^(k|~z))+M[4]+4149444226&4294967295,C=k+(P<<6&4294967295|P>>>26),P=z+(k^(C|~U))+M[11]+3174756917&4294967295,z=C+(P<<10&4294967295|P>>>22),P=U+(C^(z|~k))+M[2]+718787259&4294967295,U=z+(P<<15&4294967295|P>>>17),P=k+(z^(U|~C))+M[9]+3951481745&4294967295,A.g[0]=A.g[0]+C&4294967295,A.g[1]=A.g[1]+(U+(P<<21&4294967295|P>>>11))&4294967295,A.g[2]=A.g[2]+U&4294967295,A.g[3]=A.g[3]+z&4294967295}r.prototype.v=function(A,C){C===void 0&&(C=A.length);const k=C-this.blockSize,M=this.C;let U=this.h,z=0;for(;z<C;){if(U==0)for(;z<=k;)i(this,A,z),z+=this.blockSize;if(typeof A=="string"){for(;z<C;)if(M[U++]=A.charCodeAt(z++),U==this.blockSize){i(this,M),U=0;break}}else for(;z<C;)if(M[U++]=A[z++],U==this.blockSize){i(this,M),U=0;break}}this.h=U,this.o+=C},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var C=1;C<A.length-8;++C)A[C]=0;C=this.o*8;for(var k=A.length-8;k<A.length;++k)A[k]=C&255,C/=256;for(this.v(A),A=Array(16),C=0,k=0;k<4;++k)for(let M=0;M<32;M+=8)A[C++]=this.g[k]>>>M&255;return A};function a(A,C){var k=c;return Object.prototype.hasOwnProperty.call(k,A)?k[A]:k[A]=C(A)}function o(A,C){this.h=C;const k=[];let M=!0;for(let U=A.length-1;U>=0;U--){const z=A[U]|0;M&&z==C||(k[U]=z,M=!1)}this.g=k}var c={};function u(A){return-128<=A&&A<128?a(A,function(C){return new o([C|0],C<0?-1:0)}):new o([A|0],A<0?-1:0)}function d(A){if(isNaN(A)||!isFinite(A))return g;if(A<0)return S(d(-A));const C=[];let k=1;for(let M=0;A>=k;M++)C[M]=A/k|0,k*=4294967296;return new o(C,0)}function h(A,C){if(A.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(A.charAt(0)=="-")return S(h(A.substring(1),C));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=d(Math.pow(C,8));let M=g;for(let z=0;z<A.length;z+=8){var U=Math.min(8,A.length-z);const P=parseInt(A.substring(z,z+U),C);U<8?(U=d(Math.pow(C,U)),M=M.j(U).add(d(P))):(M=M.j(k),M=M.add(d(P)))}return M}var g=u(0),m=u(1),x=u(16777216);t=o.prototype,t.m=function(){if(E(this))return-S(this).m();let A=0,C=1;for(let k=0;k<this.g.length;k++){const M=this.i(k);A+=(M>=0?M:4294967296+M)*C,C*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(_(this))return"0";if(E(this))return"-"+S(this).toString(A);const C=d(Math.pow(A,6));var k=this;let M="";for(;;){const U=O(k,C).g;k=T(k,U.j(C));let z=((k.g.length>0?k.g[0]:k.h)>>>0).toString(A);if(k=U,_(k))return z+M;for(;z.length<6;)z="0"+z;M=z+M}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function _(A){if(A.h!=0)return!1;for(let C=0;C<A.g.length;C++)if(A.g[C]!=0)return!1;return!0}function E(A){return A.h==-1}t.l=function(A){return A=T(this,A),E(A)?-1:_(A)?0:1};function S(A){const C=A.g.length,k=[];for(let M=0;M<C;M++)k[M]=~A.g[M];return new o(k,~A.h).add(m)}t.abs=function(){return E(this)?S(this):this},t.add=function(A){const C=Math.max(this.g.length,A.g.length),k=[];let M=0;for(let U=0;U<=C;U++){let z=M+(this.i(U)&65535)+(A.i(U)&65535),P=(z>>>16)+(this.i(U)>>>16)+(A.i(U)>>>16);M=P>>>16,z&=65535,P&=65535,k[U]=P<<16|z}return new o(k,k[k.length-1]&-2147483648?-1:0)};function T(A,C){return A.add(S(C))}t.j=function(A){if(_(this)||_(A))return g;if(E(this))return E(A)?S(this).j(S(A)):S(S(this).j(A));if(E(A))return S(this.j(S(A)));if(this.l(x)<0&&A.l(x)<0)return d(this.m()*A.m());const C=this.g.length+A.g.length,k=[];for(var M=0;M<2*C;M++)k[M]=0;for(M=0;M<this.g.length;M++)for(let U=0;U<A.g.length;U++){const z=this.i(M)>>>16,P=this.i(M)&65535,W=A.i(U)>>>16,Q=A.i(U)&65535;k[2*M+2*U]+=P*Q,D(k,2*M+2*U),k[2*M+2*U+1]+=z*Q,D(k,2*M+2*U+1),k[2*M+2*U+1]+=P*W,D(k,2*M+2*U+1),k[2*M+2*U+2]+=z*W,D(k,2*M+2*U+2)}for(A=0;A<C;A++)k[A]=k[2*A+1]<<16|k[2*A];for(A=C;A<2*C;A++)k[A]=0;return new o(k,0)};function D(A,C){for(;(A[C]&65535)!=A[C];)A[C+1]+=A[C]>>>16,A[C]&=65535,C++}function R(A,C){this.g=A,this.h=C}function O(A,C){if(_(C))throw Error("division by zero");if(_(A))return new R(g,g);if(E(A))return C=O(S(A),C),new R(S(C.g),S(C.h));if(E(C))return C=O(A,S(C)),new R(S(C.g),C.h);if(A.g.length>30){if(E(A)||E(C))throw Error("slowDivide_ only works with positive integers.");for(var k=m,M=C;M.l(A)<=0;)k=L(k),M=L(M);var U=j(k,1),z=j(M,1);for(M=j(M,2),k=j(k,2);!_(M);){var P=z.add(M);P.l(A)<=0&&(U=U.add(k),z=P),M=j(M,1),k=j(k,1)}return C=T(A,U.j(C)),new R(U,C)}for(U=g;A.l(C)>=0;){for(k=Math.max(1,Math.floor(A.m()/C.m())),M=Math.ceil(Math.log(k)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),z=d(k),P=z.j(C);E(P)||P.l(A)>0;)k-=M,z=d(k),P=z.j(C);_(z)&&(z=m),U=U.add(z),A=T(A,P)}return new R(U,A)}t.B=function(A){return O(this,A).h},t.and=function(A){const C=Math.max(this.g.length,A.g.length),k=[];for(let M=0;M<C;M++)k[M]=this.i(M)&A.i(M);return new o(k,this.h&A.h)},t.or=function(A){const C=Math.max(this.g.length,A.g.length),k=[];for(let M=0;M<C;M++)k[M]=this.i(M)|A.i(M);return new o(k,this.h|A.h)},t.xor=function(A){const C=Math.max(this.g.length,A.g.length),k=[];for(let M=0;M<C;M++)k[M]=this.i(M)^A.i(M);return new o(k,this.h^A.h)};function L(A){const C=A.g.length+1,k=[];for(let M=0;M<C;M++)k[M]=A.i(M)<<1|A.i(M-1)>>>31;return new o(k,A.h)}function j(A,C){const k=C>>5;C%=32;const M=A.g.length-k,U=[];for(let z=0;z<M;z++)U[z]=C>0?A.i(z+k)>>>C|A.i(z+k+1)<<32-C:A.i(z+k);return new o(U,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,l4=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,qo=o}).apply(typeof BR<"u"?BR:typeof self<"u"?self:typeof window<"u"?window:{});var Om=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var c4,sh,u4,Jm,x_,d4,f4,h4;(function(){var t,e=Object.defineProperty;function n(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof Om=="object"&&Om];for(var I=0;I<v.length;++I){var V=v[I];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=n(this);function i(v,I){if(I)e:{var V=r;v=v.split(".");for(var q=0;q<v.length-1;q++){var se=v[q];if(!(se in V))break e;V=V[se]}v=v[v.length-1],q=V[v],I=I(q),I!=q&&I!=null&&e(V,v,{configurable:!0,writable:!0,value:I})}}i("Symbol.dispose",function(v){return v||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(v){return v||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(v){return v||function(I){var V=[],q;for(q in I)Object.prototype.hasOwnProperty.call(I,q)&&V.push([q,I[q]]);return V}});var a=a||{},o=this||self;function c(v){var I=typeof v;return I=="object"&&v!=null||I=="function"}function u(v,I,V){return v.call.apply(v.bind,arguments)}function d(v,I,V){return d=u,d.apply(null,arguments)}function h(v,I){var V=Array.prototype.slice.call(arguments,1);return function(){var q=V.slice();return q.push.apply(q,arguments),v.apply(this,q)}}function g(v,I){function V(){}V.prototype=I.prototype,v.Z=I.prototype,v.prototype=new V,v.prototype.constructor=v,v.Ob=function(q,se,de){for(var Re=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)Re[ot-2]=arguments[ot];return I.prototype[se].apply(q,Re)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?v=>v&&AsyncContext.Snapshot.wrap(v):v=>v;function x(v){const I=v.length;if(I>0){const V=Array(I);for(let q=0;q<I;q++)V[q]=v[q];return V}return[]}function _(v,I){for(let q=1;q<arguments.length;q++){const se=arguments[q];var V=typeof se;if(V=V!="object"?V:se?Array.isArray(se)?"array":V:"null",V=="array"||V=="object"&&typeof se.length=="number"){V=v.length||0;const de=se.length||0;v.length=V+de;for(let Re=0;Re<de;Re++)v[V+Re]=se[Re]}else v.push(se)}}class E{constructor(I,V){this.i=I,this.j=V,this.h=0,this.g=null}get(){let I;return this.h>0?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function S(v){o.setTimeout(()=>{throw v},0)}function T(){var v=A;let I=null;return v.g&&(I=v.g,v.g=v.g.next,v.g||(v.h=null),I.next=null),I}class D{constructor(){this.h=this.g=null}add(I,V){const q=R.get();q.set(I,V),this.h?this.h.next=q:this.g=q,this.h=q}}var R=new E(()=>new O,v=>v.reset());class O{constructor(){this.next=this.g=this.h=null}set(I,V){this.h=I,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let L,j=!1,A=new D,C=()=>{const v=Promise.resolve(void 0);L=()=>{v.then(k)}};function k(){for(var v;v=T();){try{v.h.call(v.g)}catch(V){S(V)}var I=R;I.j(v),I.h<100&&(I.h++,v.next=I.g,I.g=v)}j=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(v,I){this.type=v,this.g=this.target=I,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var v=!1,I=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const V=()=>{};o.addEventListener("test",V,I),o.removeEventListener("test",V,I)}catch{}return v})();function P(v){return/^[\s\xa0]*$/.test(v)}function W(v,I){U.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v&&this.init(v,I)}g(W,U),W.prototype.init=function(v,I){const V=this.type=v.type,q=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;this.target=v.target||v.srcElement,this.g=I,I=v.relatedTarget,I||(V=="mouseover"?I=v.fromElement:V=="mouseout"&&(I=v.toElement)),this.relatedTarget=I,q?(this.clientX=q.clientX!==void 0?q.clientX:q.pageX,this.clientY=q.clientY!==void 0?q.clientY:q.pageY,this.screenX=q.screenX||0,this.screenY=q.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=v.pointerType,this.state=v.state,this.i=v,v.defaultPrevented&&W.Z.h.call(this)},W.prototype.h=function(){W.Z.h.call(this);const v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var Q="closure_listenable_"+(Math.random()*1e6|0),$=0;function H(v,I,V,q,se){this.listener=v,this.proxy=null,this.src=I,this.type=V,this.capture=!!q,this.ha=se,this.key=++$,this.da=this.fa=!1}function ee(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function te(v,I,V){for(const q in v)I.call(V,v[q],q,v)}function fe(v,I){for(const V in v)I.call(void 0,v[V],V,v)}function B(v){const I={};for(const V in v)I[V]=v[V];return I}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ne(v,I){let V,q;for(let se=1;se<arguments.length;se++){q=arguments[se];for(V in q)v[V]=q[V];for(let de=0;de<Y.length;de++)V=Y[de],Object.prototype.hasOwnProperty.call(q,V)&&(v[V]=q[V])}}function ae(v){this.src=v,this.g={},this.h=0}ae.prototype.add=function(v,I,V,q,se){const de=v.toString();v=this.g[de],v||(v=this.g[de]=[],this.h++);const Re=le(v,I,q,se);return Re>-1?(I=v[Re],V||(I.fa=!1)):(I=new H(I,this.src,de,!!q,se),I.fa=V,v.push(I)),I};function he(v,I){const V=I.type;if(V in v.g){var q=v.g[V],se=Array.prototype.indexOf.call(q,I,void 0),de;(de=se>=0)&&Array.prototype.splice.call(q,se,1),de&&(ee(I),v.g[V].length==0&&(delete v.g[V],v.h--))}}function le(v,I,V,q){for(let se=0;se<v.length;++se){const de=v[se];if(!de.da&&de.listener==I&&de.capture==!!V&&de.ha==q)return se}return-1}var ge="closure_lm_"+(Math.random()*1e6|0),xe={};function Se(v,I,V,q,se){if(Array.isArray(I)){for(let de=0;de<I.length;de++)Se(v,I[de],V,q,se);return null}return V=yt(V),v&&v[Q]?v.J(I,V,c(q)?!!q.capture:!1,se):Ue(v,I,V,!1,q,se)}function Ue(v,I,V,q,se,de){if(!I)throw Error("Invalid event type");const Re=c(se)?!!se.capture:!!se;let ot=Qe(v);if(ot||(v[ge]=ot=new ae(v)),V=ot.add(I,V,q,Re,de),V.proxy)return V;if(q=Ee(),V.proxy=q,q.src=v,q.listener=V,v.addEventListener)z||(se=Re),se===void 0&&(se=!1),v.addEventListener(I.toString(),q,se);else if(v.attachEvent)v.attachEvent(je(I.toString()),q);else if(v.addListener&&v.removeListener)v.addListener(q);else throw Error("addEventListener and attachEvent are unavailable.");return V}function Ee(){function v(V){return I.call(v.src,v.listener,V)}const I=$e;return v}function Ce(v,I,V,q,se){if(Array.isArray(I))for(var de=0;de<I.length;de++)Ce(v,I[de],V,q,se);else q=c(q)?!!q.capture:!!q,V=yt(V),v&&v[Q]?(v=v.i,de=String(I).toString(),de in v.g&&(I=v.g[de],V=le(I,V,q,se),V>-1&&(ee(I[V]),Array.prototype.splice.call(I,V,1),I.length==0&&(delete v.g[de],v.h--)))):v&&(v=Qe(v))&&(I=v.g[I.toString()],v=-1,I&&(v=le(I,V,q,se)),(V=v>-1?I[v]:null)&&He(V))}function He(v){if(typeof v!="number"&&v&&!v.da){var I=v.src;if(I&&I[Q])he(I.i,v);else{var V=v.type,q=v.proxy;I.removeEventListener?I.removeEventListener(V,q,v.capture):I.detachEvent?I.detachEvent(je(V),q):I.addListener&&I.removeListener&&I.removeListener(q),(V=Qe(I))?(he(V,v),V.h==0&&(V.src=null,I[ge]=null)):ee(v)}}}function je(v){return v in xe?xe[v]:xe[v]="on"+v}function $e(v,I){if(v.da)v=!0;else{I=new W(I,this);const V=v.listener,q=v.ha||v.src;v.fa&&He(v),v=V.call(q,I)}return v}function Qe(v){return v=v[ge],v instanceof ae?v:null}var vt="__closure_events_fn_"+(Math.random()*1e9>>>0);function yt(v){return typeof v=="function"?v:(v[vt]||(v[vt]=function(I){return v.handleEvent(I)}),v[vt])}function Pe(){M.call(this),this.i=new ae(this),this.M=this,this.G=null}g(Pe,M),Pe.prototype[Q]=!0,Pe.prototype.removeEventListener=function(v,I,V,q){Ce(this,v,I,V,q)};function Ye(v,I){var V,q=v.G;if(q)for(V=[];q;q=q.G)V.push(q);if(v=v.M,q=I.type||I,typeof I=="string")I=new U(I,v);else if(I instanceof U)I.target=I.target||v;else{var se=I;I=new U(q,v),ne(I,se)}se=!0;let de,Re;if(V)for(Re=V.length-1;Re>=0;Re--)de=I.g=V[Re],se=Pt(de,q,!0,I)&&se;if(de=I.g=v,se=Pt(de,q,!0,I)&&se,se=Pt(de,q,!1,I)&&se,V)for(Re=0;Re<V.length;Re++)de=I.g=V[Re],se=Pt(de,q,!1,I)&&se}Pe.prototype.N=function(){if(Pe.Z.N.call(this),this.i){var v=this.i;for(const I in v.g){const V=v.g[I];for(let q=0;q<V.length;q++)ee(V[q]);delete v.g[I],v.h--}}this.G=null},Pe.prototype.J=function(v,I,V,q){return this.i.add(String(v),I,!1,V,q)},Pe.prototype.K=function(v,I,V,q){return this.i.add(String(v),I,!0,V,q)};function Pt(v,I,V,q){if(I=v.i.g[String(I)],!I)return!0;I=I.concat();let se=!0;for(let de=0;de<I.length;++de){const Re=I[de];if(Re&&!Re.da&&Re.capture==V){const ot=Re.listener,Sn=Re.ha||Re.src;Re.fa&&he(v.i,Re),se=ot.call(Sn,q)!==!1&&se}}return se&&!q.defaultPrevented}function wn(v,I){if(typeof v!="function")if(v&&typeof v.handleEvent=="function")v=d(v.handleEvent,v);else throw Error("Invalid listener argument");return Number(I)>2147483647?-1:o.setTimeout(v,I||0)}function cn(v){v.g=wn(()=>{v.g=null,v.i&&(v.i=!1,cn(v))},v.l);const I=v.h;v.h=null,v.m.apply(null,I)}class pt extends M{constructor(I,V){super(),this.m=I,this.l=V,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:cn(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vt(v){M.call(this),this.h=v,this.g={}}g(Vt,M);var gr=[];function mr(v){te(v.g,function(I,V){this.g.hasOwnProperty(V)&&He(I)},v),v.g={}}Vt.prototype.N=function(){Vt.Z.N.call(this),mr(this)},Vt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ei=o.JSON.stringify,qs=o.JSON.parse,Oe=class{stringify(v){return o.JSON.stringify(v,void 0)}parse(v){return o.JSON.parse(v,void 0)}};function Ze(){}function Ui(){}var Gt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zt(){U.call(this,"d")}g(Zt,U);function En(){U.call(this,"c")}g(En,U);var Dt={},Ct=null;function rr(){return Ct=Ct||new Pe}Dt.Ia="serverreachability";function un(v){U.call(this,Dt.Ia,v)}g(un,U);function We(v){const I=rr();Ye(I,new un(I))}Dt.STAT_EVENT="statevent";function Ot(v,I){U.call(this,Dt.STAT_EVENT,v),this.stat=I}g(Ot,U);function Tt(v){const I=rr();Ye(I,new Ot(I,v))}Dt.Ja="timingevent";function jt(v,I){U.call(this,Dt.Ja,v),this.size=I}g(jt,U);function Rn(v,I){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){v()},I)}function mn(){this.g=!0}mn.prototype.ua=function(){this.g=!1};function Pc(v,I,V,q,se,de){v.info(function(){if(v.g)if(de){var Re="",ot=de.split("&");for(let kt=0;kt<ot.length;kt++){var Sn=ot[kt].split("=");if(Sn.length>1){const rn=Sn[0];Sn=Sn[1];const bi=rn.split("_");Re=bi.length>=2&&bi[1]=="type"?Re+(rn+"="+Sn+"&"):Re+(rn+"=redacted&")}}}else Re=null;else Re=de;return"XMLHTTP REQ ("+q+") [attempt "+se+"]: "+I+`
`+V+`
`+Re})}function Ja(v,I,V,q,se,de,Re){v.info(function(){return"XMLHTTP RESP ("+q+") [ attempt "+se+"]: "+I+`
`+V+`
`+de+" "+Re})}function zr(v,I,V,q){v.info(function(){return"XMLHTTP TEXT ("+I+"): "+dy(v,V)+(q?" "+q:"")})}function gi(v,I){v.info(function(){return"TIMEOUT: "+I})}mn.prototype.info=function(){};function dy(v,I){if(!v.g)return I;if(!I)return null;try{const de=JSON.parse(I);if(de){for(v=0;v<de.length;v++)if(Array.isArray(de[v])){var V=de[v];if(!(V.length<2)){var q=V[1];if(Array.isArray(q)&&!(q.length<1)){var se=q[0];if(se!="noop"&&se!="stop"&&se!="close")for(let Re=1;Re<q.length;Re++)q[Re]=""}}}}return ei(de)}catch{return I}}var dl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},qd={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Hd;function fl(){}g(fl,Ze),fl.prototype.g=function(){return new XMLHttpRequest},Hd=new fl;function es(v){return encodeURIComponent(String(v))}function Hp(v){var I=1;v=v.split(":");const V=[];for(;I>0&&v.length;)V.push(v.shift()),I--;return v.length&&V.push(v.join(":")),V}function Fi(v,I,V,q){this.j=v,this.i=I,this.l=V,this.S=q||1,this.V=new Vt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Gi}function Gi(){this.i=null,this.g="",this.h=!1}var Dn={},Jn={};function da(v,I,V){v.M=1,v.A=hl(Nn(I)),v.u=V,v.R=!0,Oc(v,null)}function Oc(v,I){v.F=Date.now(),fa(v),v.B=Nn(v.A);var V=v.B,q=v.S;Array.isArray(q)||(q=[String(q)]),Lc(V.i,"t",q),v.C=0,V=v.j.L,v.h=new Gi,v.g=sg(v.j,V?I:null,!v.u),v.P>0&&(v.O=new pt(d(v.Y,v,v.g),v.P)),I=v.V,V=v.g,q=v.ba;var se="readystatechange";Array.isArray(se)||(se&&(gr[0]=se.toString()),se=gr);for(let de=0;de<se.length;de++){const Re=Se(V,se[de],q||I.handleEvent,!1,I.h||I);if(!Re)break;I.g[Re.key]=Re}I=v.J?B(v.J):{},v.u?(v.v||(v.v="POST"),I["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.B,v.v,v.u,I)):(v.v="GET",v.g.ea(v.B,v.v,null,I)),We(),Pc(v.i,v.v,v.B,v.l,v.S,v.u)}Fi.prototype.ba=function(v){v=v.target;const I=this.O;I&&$i(v)==3?I.j():this.Y(v)},Fi.prototype.Y=function(v){try{if(v==this.g)e:{const ot=$i(this.g),Sn=this.g.ya(),kt=this.g.ca();if(!(ot<3)&&(ot!=3||this.g&&(this.h.h||this.g.la()||ir(this.g)))){this.K||ot!=4||Sn==7||(Sn==8||kt<=0?We(3):We(2)),ha(this);var I=this.g.ca();this.X=I;var V=fy(this);if(this.o=I==200,Ja(this.i,this.v,this.B,this.l,this.S,ot,I),this.o){if(this.U&&!this.L){t:{if(this.g){var q,se=this.g;if((q=se.g?se.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(q)){var de=q;break t}}de=null}if(v=de)zr(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,pa(this,v);else{this.o=!1,this.m=3,Tt(12),ti(this),mi(this);break e}}if(this.R){v=!0;let rn;for(;!this.K&&this.C<V.length;)if(rn=Yp(this,V),rn==Jn){ot==4&&(this.m=4,Tt(14),v=!1),zr(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==Dn){this.m=4,Tt(15),zr(this.i,this.l,V,"[Invalid Chunk]"),v=!1;break}else zr(this.i,this.l,rn,null),pa(this,rn);if($p(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||V.length!=0||this.h.h||(this.m=1,Tt(16),v=!1),this.o=this.o&&v,!v)zr(this.i,this.l,V,"[Invalid Chunked Response]"),ti(this),mi(this);else if(V.length>0&&!this.W){this.W=!0;var Re=this.j;Re.g==this&&Re.aa&&!Re.P&&(Re.j.info("Great, no buffering proxy detected. Bytes received: "+V.length),of(Re),Re.P=!0,Tt(11))}}else zr(this.i,this.l,V,null),pa(this,V);ot==4&&ti(this),this.o&&!this.K&&(ot==4?ng(this.j,this):(this.o=!1,fa(this)))}else ns(this.g),I==400&&V.indexOf("Unknown SID")>0?(this.m=3,Tt(12)):(this.m=0,Tt(13)),ti(this),mi(this)}}}catch{}finally{}};function fy(v){if(!$p(v))return v.g.la();const I=ir(v.g);if(I==="")return"";let V="";const q=I.length,se=$i(v.g)==4;if(!v.h.i){if(typeof TextDecoder>"u")return ti(v),mi(v),"";v.h.i=new o.TextDecoder}for(let de=0;de<q;de++)v.h.h=!0,V+=v.h.i.decode(I[de],{stream:!(se&&de==q-1)});return I.length=0,v.h.g+=V,v.C=0,v.h.g}function $p(v){return v.g?v.v=="GET"&&v.M!=2&&v.j.Aa:!1}function Yp(v,I){var V=v.C,q=I.indexOf(`
`,V);return q==-1?Jn:(V=Number(I.substring(V,q)),isNaN(V)?Dn:(q+=1,q+V>I.length?Jn:(I=I.slice(q,q+V),v.C=q+V,I)))}Fi.prototype.cancel=function(){this.K=!0,ti(this)};function fa(v){v.T=Date.now()+v.H,Vc(v,v.H)}function Vc(v,I){if(v.D!=null)throw Error("WatchDog timer not null");v.D=Rn(d(v.aa,v),I)}function ha(v){v.D&&(o.clearTimeout(v.D),v.D=null)}Fi.prototype.aa=function(){this.D=null;const v=Date.now();v-this.T>=0?(gi(this.i,this.B),this.M!=2&&(We(),Tt(17)),ti(this),this.m=2,mi(this)):Vc(this,this.T-v)};function mi(v){v.j.I==0||v.K||ng(v.j,v)}function ti(v){ha(v);var I=v.O;I&&typeof I.dispose=="function"&&I.dispose(),v.O=null,mr(v.V),v.g&&(I=v.g,v.g=null,I.abort(),I.dispose())}function pa(v,I){try{var V=v.j;if(V.I!=0&&(V.g==v||ma(V.h,v))){if(!v.L&&ma(V.h,v)&&V.I==3){try{var q=V.Ba.g.parse(I)}catch{q=null}if(Array.isArray(q)&&q.length==3){var se=q;if(se[0]==0){e:if(!V.v){if(V.g)if(V.g.F+3e3<v.F)qc(V),Zs(V);else break e;xl(V),Tt(18)}}else V.xa=se[1],0<V.xa-V.K&&se[2]<37500&&V.F&&V.A==0&&!V.C&&(V.C=Rn(d(V.Va,V),6e3));ga(V.h)<=1&&V.ta&&(V.ta=void 0)}else wa(V,11)}else if((v.L||V.g==v)&&qc(V),!P(I))for(se=V.Ba.g.parse(I),I=0;I<se.length;I++){let kt=se[I];const rn=kt[0];if(!(rn<=V.K))if(V.K=rn,kt=kt[1],V.I==2)if(kt[0]=="c"){V.M=kt[1],V.ba=kt[2];const bi=kt[3];bi!=null&&(V.ka=bi,V.j.info("VER="+V.ka));const Ea=kt[4];Ea!=null&&(V.za=Ea,V.j.info("SVER="+V.za));const Yi=kt[5];Yi!=null&&typeof Yi=="number"&&Yi>0&&(q=1.5*Yi,V.O=q,V.j.info("backChannelRequestTimeoutMs_="+q)),q=V;const Ki=v.g;if(Ki){const _l=Ki.g?Ki.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_l){var de=q.h;de.g||_l.indexOf("spdy")==-1&&_l.indexOf("quic")==-1&&_l.indexOf("h2")==-1||(de.j=de.l,de.g=new Set,de.h&&(Kd(de,de.h),de.h=null))}if(q.G){const Hc=Ki.g?Ki.g.getResponseHeader("X-HTTP-Session-Id"):null;Hc&&(q.wa=Hc,zt(q.J,q.G,Hc))}}V.I=3,V.l&&V.l.ra(),V.aa&&(V.T=Date.now()-v.F,V.j.info("Handshake RTT: "+V.T+"ms")),q=V;var Re=v;if(q.na=ag(q,q.L?q.ba:null,q.W),Re.L){Xd(q.h,Re);var ot=Re,Sn=q.O;Sn&&(ot.H=Sn),ot.D&&(ha(ot),fa(ot)),q.g=Re}else eg(q);V.i.length>0&&_a(V)}else kt[0]!="stop"&&kt[0]!="close"||wa(V,7);else V.I==3&&(kt[0]=="stop"||kt[0]=="close"?kt[0]=="stop"?wa(V,7):af(V):kt[0]!="noop"&&V.l&&V.l.qa(kt),V.A=0)}}We(4)}catch{}}var kn=class{constructor(v,I){this.g=v,this.map=I}};function $d(v){this.l=v||10,o.PerformanceNavigationTiming?(v=o.performance.getEntriesByType("navigation"),v=v.length>0&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Yd(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function ga(v){return v.h?1:v.g?v.g.size:0}function ma(v,I){return v.h?v.h==I:v.g?v.g.has(I):!1}function Kd(v,I){v.g?v.g.add(I):v.h=I}function Xd(v,I){v.h&&v.h==I?v.h=null:v.g&&v.g.has(I)&&v.g.delete(I)}$d.prototype.cancel=function(){if(this.i=Wd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function Wd(v){if(v.h!=null)return v.i.concat(v.h.G);if(v.g!=null&&v.g.size!==0){let I=v.i;for(const V of v.g.values())I=I.concat(V.G);return I}return x(v.i)}var Kp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jc(v,I){if(v){v=v.split("&");for(let V=0;V<v.length;V++){const q=v[V].indexOf("=");let se,de=null;q>=0?(se=v[V].substring(0,q),de=v[V].substring(q+1)):se=v[V],I(se,de?decodeURIComponent(de.replace(/\+/g," ")):"")}}}function ni(v){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let I;v instanceof ni?(this.l=v.l,er(this,v.j),this.o=v.o,this.g=v.g,Hs(this,v.u),this.h=v.h,Qd(this,Zp(v.i)),this.m=v.m):v&&(I=String(v).match(Kp))?(this.l=!1,er(this,I[1]||"",!0),this.o=va(I[2]||""),this.g=va(I[3]||"",!0),Hs(this,I[4]),this.h=va(I[5]||"",!0),Qd(this,I[6]||"",!0),this.m=va(I[7]||"")):(this.l=!1,this.i=new Ys(null,this.l))}ni.prototype.toString=function(){const v=[];var I=this.j;I&&v.push(pl(I,zc,!0),":");var V=this.g;return(V||I=="file")&&(v.push("//"),(I=this.o)&&v.push(pl(I,zc,!0),"@"),v.push(es(V).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.u,V!=null&&v.push(":",String(V))),(V=this.h)&&(this.g&&V.charAt(0)!="/"&&v.push("/"),v.push(pl(V,V.charAt(0)=="/"?Zd:Xp,!0))),(V=this.i.toString())&&v.push("?",V),(V=this.m)&&v.push("#",pl(V,Wp)),v.join("")},ni.prototype.resolve=function(v){const I=Nn(this);let V=!!v.j;V?er(I,v.j):V=!!v.o,V?I.o=v.o:V=!!v.g,V?I.g=v.g:V=v.u!=null;var q=v.h;if(V)Hs(I,v.u);else if(V=!!v.h){if(q.charAt(0)!="/")if(this.g&&!this.h)q="/"+q;else{var se=I.h.lastIndexOf("/");se!=-1&&(q=I.h.slice(0,se+1)+q)}if(se=q,se==".."||se==".")q="";else if(se.indexOf("./")!=-1||se.indexOf("/.")!=-1){q=se.lastIndexOf("/",0)==0,se=se.split("/");const de=[];for(let Re=0;Re<se.length;){const ot=se[Re++];ot=="."?q&&Re==se.length&&de.push(""):ot==".."?((de.length>1||de.length==1&&de[0]!="")&&de.pop(),q&&Re==se.length&&de.push("")):(de.push(ot),q=!0)}q=de.join("/")}else q=se}return V?I.h=q:V=v.i.toString()!=="",V?Qd(I,Zp(v.i)):V=!!v.m,V&&(I.m=v.m),I};function Nn(v){return new ni(v)}function er(v,I,V){v.j=V?va(I,!0):I,v.j&&(v.j=v.j.replace(/:$/,""))}function Hs(v,I){if(I){if(I=Number(I),isNaN(I)||I<0)throw Error("Bad port number "+I);v.u=I}else v.u=null}function Qd(v,I,V){I instanceof Ys?(v.i=I,Bc(v.i,v.l)):(V||(I=pl(I,$s)),v.i=new Ys(I,v.l))}function zt(v,I,V){v.i.set(I,V)}function hl(v){return zt(v,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),v}function va(v,I){return v?I?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function pl(v,I,V){return typeof v=="string"?(v=encodeURI(v).replace(I,Lr),V&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function Lr(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var zc=/[#\/\?@]/g,Xp=/[#\?:]/g,Zd=/[#\?]/g,$s=/[#\?@]/g,Wp=/#/g;function Ys(v,I){this.h=this.g=null,this.i=v||null,this.j=!!I}function Br(v){v.g||(v.g=new Map,v.h=0,v.i&&jc(v.i,function(I,V){v.add(decodeURIComponent(I.replace(/\+/g," ")),V)}))}t=Ys.prototype,t.add=function(v,I){Br(this),this.i=null,v=Ks(this,v);let V=this.g.get(v);return V||this.g.set(v,V=[]),V.push(I),this.h+=1,this};function Qp(v,I){Br(v),I=Ks(v,I),v.g.has(I)&&(v.i=null,v.h-=v.g.get(I).length,v.g.delete(I))}function Jd(v,I){return Br(v),I=Ks(v,I),v.g.has(I)}t.forEach=function(v,I){Br(this),this.g.forEach(function(V,q){V.forEach(function(se){v.call(I,se,q,this)},this)},this)};function ef(v,I){Br(v);let V=[];if(typeof I=="string")Jd(v,I)&&(V=V.concat(v.g.get(Ks(v,I))));else for(v=Array.from(v.g.values()),I=0;I<v.length;I++)V=V.concat(v[I]);return V}t.set=function(v,I){return Br(this),this.i=null,v=Ks(this,v),Jd(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[I]),this.h+=1,this},t.get=function(v,I){return v?(v=ef(this,v),v.length>0?String(v[0]):I):I};function Lc(v,I,V){Qp(v,I),V.length>0&&(v.i=null,v.g.set(Ks(v,I),x(V)),v.h+=V.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],I=Array.from(this.g.keys());for(let q=0;q<I.length;q++){var V=I[q];const se=es(V);V=ef(this,V);for(let de=0;de<V.length;de++){let Re=se;V[de]!==""&&(Re+="="+es(V[de])),v.push(Re)}}return this.i=v.join("&")};function Zp(v){const I=new Ys;return I.i=v.i,v.g&&(I.g=new Map(v.g),I.h=v.h),I}function Ks(v,I){return I=String(I),v.j&&(I=I.toLowerCase()),I}function Bc(v,I){I&&!v.j&&(Br(v),v.i=null,v.g.forEach(function(V,q){const se=q.toLowerCase();q!=se&&(Qp(this,q),Lc(this,se,V))},v)),v.j=I}function qi(v,I){const V=new mn;if(o.Image){const q=new Image;q.onload=h(vi,V,"TestLoadImage: loaded",!0,I,q),q.onerror=h(vi,V,"TestLoadImage: error",!1,I,q),q.onabort=h(vi,V,"TestLoadImage: abort",!1,I,q),q.ontimeout=h(vi,V,"TestLoadImage: timeout",!1,I,q),o.setTimeout(function(){q.ontimeout&&q.ontimeout()},1e4),q.src=v}else I(!1)}function tf(v,I){const V=new mn,q=new AbortController,se=setTimeout(()=>{q.abort(),vi(V,"TestPingServer: timeout",!1,I)},1e4);fetch(v,{signal:q.signal}).then(de=>{clearTimeout(se),de.ok?vi(V,"TestPingServer: ok",!0,I):vi(V,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(se),vi(V,"TestPingServer: error",!1,I)})}function vi(v,I,V,q,se){try{se&&(se.onload=null,se.onerror=null,se.onabort=null,se.ontimeout=null),q(V)}catch{}}function Xs(){this.g=new Oe}function ya(v){this.i=v.Sb||null,this.h=v.ab||!1}g(ya,Ze),ya.prototype.g=function(){return new gl(this.i,this.h)};function gl(v,I){Pe.call(this),this.H=v,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(gl,Pe),t=gl.prototype,t.open=function(v,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=v,this.D=I,this.readyState=1,Hi(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const I={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};v&&(I.body=v),(this.H||o).fetch(new Request(this.D,I)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ws(this)),this.readyState=0},t.Pa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,Hi(this)),this.g&&(this.readyState=3,Hi(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Uc(this)}else v.text().then(this.Oa.bind(this),this.ga.bind(this))};function Uc(v){v.j.read().then(v.Ma.bind(v)).catch(v.ga.bind(v))}t.Ma=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var I=v.value?v.value:new Uint8Array(0);(I=this.B.decode(I,{stream:!v.done}))&&(this.response=this.responseText+=I)}v.done?Ws(this):Hi(this),this.readyState==3&&Uc(this)}},t.Oa=function(v){this.g&&(this.response=this.responseText=v,Ws(this))},t.Na=function(v){this.g&&(this.response=v,Ws(this))},t.ga=function(){this.g&&Ws(this)};function Ws(v){v.readyState=4,v.l=null,v.j=null,v.B=null,Hi(v)}t.setRequestHeader=function(v,I){this.A.append(v,I)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],I=this.h.entries();for(var V=I.next();!V.done;)V=V.value,v.push(V[0]+": "+V[1]),V=I.next();return v.join(`\r
`)};function Hi(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(gl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function yi(v){let I="";return te(v,function(V,q){I+=q,I+=":",I+=V,I+=`\r
`}),I}function ml(v,I,V){e:{for(q in V){var q=!1;break e}q=!0}q||(V=yi(V),typeof v=="string"?V!=null&&es(V):zt(v,I,V))}function qt(v){Pe.call(this),this.headers=new Map,this.L=v||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(qt,Pe);var ba=/^https?$/i,nf=["POST","PUT"];t=qt.prototype,t.Fa=function(v){this.H=v},t.ea=function(v,I,V,q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);I=I?I.toUpperCase():"GET",this.D=v,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Hd.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(I,String(v),!0),this.B=!1}catch(de){vl(this,de);return}if(v=V||"",V=new Map(this.headers),q)if(Object.getPrototypeOf(q)===Object.prototype)for(var se in q)V.set(se,q[se]);else if(typeof q.keys=="function"&&typeof q.get=="function")for(const de of q.keys())V.set(de,q.get(de));else throw Error("Unknown input type for opt_headers: "+String(q));q=Array.from(V.keys()).find(de=>de.toLowerCase()=="content-type"),se=o.FormData&&v instanceof o.FormData,!(Array.prototype.indexOf.call(nf,I,void 0)>=0)||q||se||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[de,Re]of V)this.g.setRequestHeader(de,Re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(v),this.v=!1}catch(de){vl(this,de)}};function vl(v,I){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=I,v.o=5,rf(v),ts(v)}function rf(v){v.A||(v.A=!0,Ye(v,"complete"),Ye(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=v||7,Ye(this,"complete"),Ye(this,"abort"),ts(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ts(this,!0)),qt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?yl(this):this.Xa())},t.Xa=function(){yl(this)};function yl(v){if(v.h&&typeof a<"u"){if(v.v&&$i(v)==4)setTimeout(v.Ca.bind(v),0);else if(Ye(v,"readystatechange"),$i(v)==4){v.h=!1;try{const de=v.ca();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var V;if(!(V=I)){var q;if(q=de===0){let Re=String(v.D).match(Kp)[1]||null;!Re&&o.self&&o.self.location&&(Re=o.self.location.protocol.slice(0,-1)),q=!ba.test(Re?Re.toLowerCase():"")}V=q}if(V)Ye(v,"complete"),Ye(v,"success");else{v.o=6;try{var se=$i(v)>2?v.g.statusText:""}catch{se=""}v.l=se+" ["+v.ca()+"]",rf(v)}}finally{ts(v)}}}}function ts(v,I){if(v.g){v.m&&(clearTimeout(v.m),v.m=null);const V=v.g;v.g=null,I||Ye(v,"ready");try{V.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function $i(v){return v.g?v.g.readyState:0}t.ca=function(){try{return $i(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(v){if(this.g){var I=this.g.responseText;return v&&I.indexOf(v)==0&&(I=I.substring(v.length)),qs(I)}};function ir(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.F){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function ns(v){const I={};v=(v.g&&$i(v)>=2&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let q=0;q<v.length;q++){if(P(v[q]))continue;var V=Hp(v[q]);const se=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const de=I[se]||[];I[se]=de,de.push(V)}fe(I,function(q){return q.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xa(v,I,V){return V&&V.internalChannelParams&&V.internalChannelParams[v]||I}function Qs(v){this.za=0,this.i=[],this.j=new mn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xa("failFast",!1,v),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xa("baseRetryDelayMs",5e3,v),this.Za=xa("retryDelaySeedMs",1e4,v),this.Ta=xa("forwardChannelMaxRetries",2,v),this.va=xa("forwardChannelRequestTimeoutMs",2e4,v),this.ma=v&&v.xmlHttpFactory||void 0,this.Ua=v&&v.Rb||void 0,this.Aa=v&&v.useFetchStreams||!1,this.O=void 0,this.L=v&&v.supportsCrossDomainXhr||!1,this.M="",this.h=new $d(v&&v.concurrentRequestLimit),this.Ba=new Xs,this.S=v&&v.fastHandshake||!1,this.R=v&&v.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=v&&v.Pb||!1,v&&v.ua&&this.j.ua(),v&&v.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&v&&v.detectBufferingProxy||!1,this.ia=void 0,v&&v.longPollingTimeout&&v.longPollingTimeout>0&&(this.ia=v.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Qs.prototype,t.ka=8,t.I=1,t.connect=function(v,I,V,q){Tt(0),this.W=v,this.H=I||{},V&&q!==void 0&&(this.H.OSID=V,this.H.OAID=q),this.F=this.X,this.J=ag(this,null,this.W),_a(this)};function af(v){if(Fc(v),v.I==3){var I=v.V++,V=Nn(v.J);if(zt(V,"SID",v.M),zt(V,"RID",I),zt(V,"TYPE","terminate"),bl(v,V),I=new Fi(v,v.j,I),I.M=2,I.A=hl(Nn(V)),V=!1,o.navigator&&o.navigator.sendBeacon)try{V=o.navigator.sendBeacon(I.A.toString(),"")}catch{}!V&&o.Image&&(new Image().src=I.A,V=!0),V||(I.g=sg(I.j,null),I.g.ea(I.A)),I.F=Date.now(),fa(I)}ig(v)}function Zs(v){v.g&&(of(v),v.g.cancel(),v.g=null)}function Fc(v){Zs(v),v.v&&(o.clearTimeout(v.v),v.v=null),qc(v),v.h.cancel(),v.m&&(typeof v.m=="number"&&o.clearTimeout(v.m),v.m=null)}function _a(v){if(!Yd(v.h)&&!v.m){v.m=!0;var I=v.Ea;L||C(),j||(L(),j=!0),A.add(I,v),v.D=0}}function Gc(v,I){return ga(v.h)>=v.h.j-(v.m?1:0)?!1:v.m?(v.i=I.G.concat(v.i),!0):v.I==1||v.I==2||v.D>=(v.Sa?0:v.Ta)?!1:(v.m=Rn(d(v.Ea,v,I),rg(v,v.D)),v.D++,!0)}t.Ea=function(v){if(this.m)if(this.m=null,this.I==1){if(!v){this.V=Math.floor(Math.random()*1e5),v=this.V++;const se=new Fi(this,this.j,v);let de=this.o;if(this.U&&(de?(de=B(de),ne(de,this.U)):de=this.U),this.u!==null||this.R||(se.J=de,de=null),this.S)e:{for(var I=0,V=0;V<this.i.length;V++){t:{var q=this.i[V];if("__data__"in q.map&&(q=q.map.__data__,typeof q=="string")){q=q.length;break t}q=void 0}if(q===void 0)break;if(I+=q,I>4096){I=V;break e}if(I===4096||V===this.i.length-1){I=V+1;break e}}I=1e3}else I=1e3;I=Jp(this,se,I),V=Nn(this.J),zt(V,"RID",v),zt(V,"CVER",22),this.G&&zt(V,"X-HTTP-Session-Id",this.G),bl(this,V),de&&(this.R?I="headers="+es(yi(de))+"&"+I:this.u&&ml(V,this.u,de)),Kd(this.h,se),this.Ra&&zt(V,"TYPE","init"),this.S?(zt(V,"$req",I),zt(V,"SID","null"),se.U=!0,da(se,V,null)):da(se,V,I),this.I=2}}else this.I==3&&(v?sf(this,v):this.i.length==0||Yd(this.h)||sf(this))};function sf(v,I){var V;I?V=I.l:V=v.V++;const q=Nn(v.J);zt(q,"SID",v.M),zt(q,"RID",V),zt(q,"AID",v.K),bl(v,q),v.u&&v.o&&ml(q,v.u,v.o),V=new Fi(v,v.j,V,v.D+1),v.u===null&&(V.J=v.o),I&&(v.i=I.G.concat(v.i)),I=Jp(v,V,1e3),V.H=Math.round(v.va*.5)+Math.round(v.va*.5*Math.random()),Kd(v.h,V),da(V,q,I)}function bl(v,I){v.H&&te(v.H,function(V,q){zt(I,q,V)}),v.l&&te({},function(V,q){zt(I,q,V)})}function Jp(v,I,V){V=Math.min(v.i.length,V);const q=v.l?d(v.l.Ka,v.l,v):null;e:{var se=v.i;let ot=-1;for(;;){const Sn=["count="+V];ot==-1?V>0?(ot=se[0].g,Sn.push("ofs="+ot)):ot=0:Sn.push("ofs="+ot);let kt=!0;for(let rn=0;rn<V;rn++){var de=se[rn].g;const bi=se[rn].map;if(de-=ot,de<0)ot=Math.max(0,se[rn].g-100),kt=!1;else try{de="req"+de+"_"||"";try{var Re=bi instanceof Map?bi:Object.entries(bi);for(const[Ea,Yi]of Re){let Ki=Yi;c(Yi)&&(Ki=ei(Yi)),Sn.push(de+Ea+"="+encodeURIComponent(Ki))}}catch(Ea){throw Sn.push(de+"type="+encodeURIComponent("_badmap")),Ea}}catch{q&&q(bi)}}if(kt){Re=Sn.join("&");break e}}Re=void 0}return v=v.i.splice(0,V),I.G=v,Re}function eg(v){if(!v.g&&!v.v){v.Y=1;var I=v.Da;L||C(),j||(L(),j=!0),A.add(I,v),v.A=0}}function xl(v){return v.g||v.v||v.A>=3?!1:(v.Y++,v.v=Rn(d(v.Da,v),rg(v,v.A)),v.A++,!0)}t.Da=function(){if(this.v=null,tg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var v=4*this.T;this.j.info("BP detection timer enabled: "+v),this.B=Rn(d(this.Wa,this),v)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tt(10),Zs(this),tg(this))};function of(v){v.B!=null&&(o.clearTimeout(v.B),v.B=null)}function tg(v){v.g=new Fi(v,v.j,"rpc",v.Y),v.u===null&&(v.g.J=v.o),v.g.P=0;var I=Nn(v.na);zt(I,"RID","rpc"),zt(I,"SID",v.M),zt(I,"AID",v.K),zt(I,"CI",v.F?"0":"1"),!v.F&&v.ia&&zt(I,"TO",v.ia),zt(I,"TYPE","xmlhttp"),bl(v,I),v.u&&v.o&&ml(I,v.u,v.o),v.O&&(v.g.H=v.O);var V=v.g;v=v.ba,V.M=1,V.A=hl(Nn(I)),V.u=null,V.R=!0,Oc(V,v)}t.Va=function(){this.C!=null&&(this.C=null,Zs(this),xl(this),Tt(19))};function qc(v){v.C!=null&&(o.clearTimeout(v.C),v.C=null)}function ng(v,I){var V=null;if(v.g==I){qc(v),of(v),v.g=null;var q=2}else if(ma(v.h,I))V=I.G,Xd(v.h,I),q=1;else return;if(v.I!=0){if(I.o)if(q==1){V=I.u?I.u.length:0,I=Date.now()-I.F;var se=v.D;q=rr(),Ye(q,new jt(q,V)),_a(v)}else eg(v);else if(se=I.m,se==3||se==0&&I.X>0||!(q==1&&Gc(v,I)||q==2&&xl(v)))switch(V&&V.length>0&&(I=v.h,I.i=I.i.concat(V)),se){case 1:wa(v,5);break;case 4:wa(v,10);break;case 3:wa(v,6);break;default:wa(v,2)}}}function rg(v,I){let V=v.Qa+Math.floor(Math.random()*v.Za);return v.isActive()||(V*=2),V*I}function wa(v,I){if(v.j.info("Error code "+I),I==2){var V=d(v.bb,v),q=v.Ua;const se=!q;q=new ni(q||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||er(q,"https"),hl(q),se?qi(q.toString(),V):tf(q.toString(),V)}else Tt(2);v.I=0,v.l&&v.l.pa(I),ig(v),Fc(v)}t.bb=function(v){v?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function ig(v){if(v.I=0,v.ja=[],v.l){const I=Wd(v.h);(I.length!=0||v.i.length!=0)&&(_(v.ja,I),_(v.ja,v.i),v.h.i.length=0,x(v.i),v.i.length=0),v.l.oa()}}function ag(v,I,V){var q=V instanceof ni?Nn(V):new ni(V);if(q.g!="")I&&(q.g=I+"."+q.g),Hs(q,q.u);else{var se=o.location;q=se.protocol,I=I?I+"."+se.hostname:se.hostname,se=+se.port;const de=new ni(null);q&&er(de,q),I&&(de.g=I),se&&Hs(de,se),V&&(de.h=V),q=de}return V=v.G,I=v.wa,V&&I&&zt(q,V,I),zt(q,"VER",v.ka),bl(v,q),q}function sg(v,I,V){if(I&&!v.L)throw Error("Can't create secondary domain capable XhrIo object.");return I=v.Aa&&!v.ma?new qt(new ya({ab:V})):new qt(v.ma),I.Fa(v.L),I}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function og(){}t=og.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Js(){}Js.prototype.g=function(v,I){return new Cr(v,I)};function Cr(v,I){Pe.call(this),this.g=new Qs(I),this.l=v,this.h=I&&I.messageUrlParams||null,v=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(v?v["X-WebChannel-Content-Type"]=I.messageContentType:v={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.sa&&(v?v["X-WebChannel-Client-Profile"]=I.sa:v={"X-WebChannel-Client-Profile":I.sa}),this.g.U=v,(v=I&&I.Qb)&&!P(v)&&(this.g.u=v),this.A=I&&I.supportsCrossDomainXhr||!1,this.v=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!P(I)&&(this.g.G=I,v=this.h,v!==null&&I in v&&(v=this.h,I in v&&delete v[I])),this.j=new rs(this)}g(Cr,Pe),Cr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Cr.prototype.close=function(){af(this.g)},Cr.prototype.o=function(v){var I=this.g;if(typeof v=="string"){var V={};V.__data__=v,v=V}else this.v&&(V={},V.__data__=ei(v),v=V);I.i.push(new kn(I.Ya++,v)),I.I==3&&_a(I)},Cr.prototype.N=function(){this.g.l=null,delete this.j,af(this.g),delete this.g,Cr.Z.N.call(this)};function lg(v){Zt.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var I=v.__sm__;if(I){e:{for(const V in I){v=V;break e}v=void 0}(this.i=v)&&(v=this.i,I=I!==null&&v in I?I[v]:void 0),this.data=I}else this.data=v}g(lg,Zt);function cg(){En.call(this),this.status=1}g(cg,En);function rs(v){this.g=v}g(rs,og),rs.prototype.ra=function(){Ye(this.g,"a")},rs.prototype.qa=function(v){Ye(this.g,new lg(v))},rs.prototype.pa=function(v){Ye(this.g,new cg)},rs.prototype.oa=function(){Ye(this.g,"b")},Js.prototype.createWebChannel=Js.prototype.g,Cr.prototype.send=Cr.prototype.o,Cr.prototype.open=Cr.prototype.m,Cr.prototype.close=Cr.prototype.close,h4=function(){return new Js},f4=function(){return rr()},d4=Dt,x_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},dl.NO_ERROR=0,dl.TIMEOUT=8,dl.HTTP_ERROR=6,Jm=dl,qd.COMPLETE="complete",u4=qd,Ui.EventType=Gt,Gt.OPEN="a",Gt.CLOSE="b",Gt.ERROR="c",Gt.MESSAGE="d",Pe.prototype.listen=Pe.prototype.J,sh=Ui,qt.prototype.listenOnce=qt.prototype.K,qt.prototype.getLastError=qt.prototype.Ha,qt.prototype.getLastErrorCode=qt.prototype.ya,qt.prototype.getStatus=qt.prototype.ca,qt.prototype.getResponseJson=qt.prototype.La,qt.prototype.getResponseText=qt.prototype.la,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Fa,c4=qt}).apply(typeof Om<"u"?Om:typeof self<"u"?self:typeof window<"u"?window:{});const UR="@firebase/firestore",FR="4.9.2";class dr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dr.UNAUTHENTICATED=new dr(null),dr.GOOGLE_CREDENTIALS=new dr("google-credentials-uid"),dr.FIRST_PARTY=new dr("first-party-uid"),dr.MOCK_USER=new dr("mock-user");let Ld="12.3.0";const yc=new wE("@firebase/firestore");function Du(){return yc.logLevel}function Te(t,...e){if(yc.logLevel<=_t.DEBUG){const n=e.map(TE);yc.debug(`Firestore (${Ld}): ${t}`,...n)}}function Nr(t,...e){if(yc.logLevel<=_t.ERROR){const n=e.map(TE);yc.error(`Firestore (${Ld}): ${t}`,...n)}}function bc(t,...e){if(yc.logLevel<=_t.WARN){const n=e.map(TE);yc.warn(`Firestore (${Ld}): ${t}`,...n)}}function TE(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Me(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,p4(t,r,n)}function p4(t,e,n){let r=`FIRESTORE (${Ld}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Nr(r),new Error(r)}function ze(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||p4(e,i,r)}function at(t,e){return t}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends Ls{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class za{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class g4{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(dr.UNAUTHENTICATED)))}shutdown(){}}class VK{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class jK{constructor(e){this.t=e,this.currentUser=dr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ze(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new za;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new za,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const u=a;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},c=u=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new za)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ze(typeof r.accessToken=="string",31837,{l:r}),new g4(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new dr(e)}}class zK{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=dr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class LK{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new zK(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(dr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class GR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BK{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ni(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ze(this.o===void 0,3512);const r=a=>{a.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,Te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new GR(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new GR(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function UK(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class AE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=UK(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function rt(t,e){return t<e?-1:t>e?1:0}function __(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return X1(i)===X1(a)?rt(i,a):X1(i)?1:-1}return rt(t.length,e.length)}const FK=55296,GK=57343;function X1(t){const e=t.charCodeAt(0);return e>=FK&&e<=GK}function fd(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function m4(t){return t+"\0"}const qR="__name__";class Ia{constructor(e,n,r){n===void 0?n=0:n>e.length&&Me(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Me(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ia.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ia?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=Ia.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return rt(e.length,n.length)}static compareSegments(e,n){const r=Ia.isNumericId(e),i=Ia.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Ia.extractNumericId(e).compare(Ia.extractNumericId(n)):__(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qo.fromString(e.substring(4,e.length-2))}}class Mt extends Ia{construct(e,n,r){return new Mt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ie(me.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Mt(n)}static emptyPath(){return new Mt([])}}const qK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hn extends Ia{construct(e,n,r){return new hn(e,n,r)}static isValidIdentifier(e){return qK.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qR}static keyField(){return new hn([qR])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Ie(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Ie(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ie(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(a(),i++)}if(a(),o)throw new Ie(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hn(n)}static emptyPath(){return new hn([])}}class De{constructor(e){this.path=e}static fromPath(e){return new De(Mt.fromString(e))}static fromName(e){return new De(Mt.fromString(e).popFirst(5))}static empty(){return new De(Mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Mt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new Mt(e.slice()))}}function v4(t,e,n){if(!n)throw new Ie(me.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function HK(t,e,n,r){if(e===!0&&r===!0)throw new Ie(me.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function HR(t){if(!De.isDocumentKey(t))throw new Ie(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $R(t){if(De.isDocumentKey(t))throw new Ie(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function y4(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ov(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Me(12329,{type:typeof t})}function Or(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ie(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ov(t);throw new Ie(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Un(t,e){const n={typeString:t};return e&&(n.value=e),n}function Dp(t,e){if(!y4(t))throw new Ie(me.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Ie(me.INVALID_ARGUMENT,n);return!0}const YR=-62135596800,KR=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*KR);return new dt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ie(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ie(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<YR)throw new Ie(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/KR}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dp(e,dt._jsonSchema))return new dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-YR;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:Un("string",dt._jsonSchemaVersion),seconds:Un("number"),nanoseconds:Un("number")};class qe{static fromTimestamp(e){return new qe(e)}static min(){return new qe(new dt(0,0))}static max(){return new qe(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Wh=-1;class L0{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function w_(t){return t.fields.find((e=>e.kind===2))}function Ul(t){return t.fields.filter((e=>e.kind!==2))}L0.UNKNOWN_ID=-1;class e0{constructor(e,n){this.fieldPath=e,this.kind=n}}class Qh{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Qh(0,pi.min())}}function $K(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=qe.fromTimestamp(r===1e9?new dt(n+1,0):new dt(n,r));return new pi(i,De.empty(),e)}function b4(t){return new pi(t.readTime,t.key,Wh)}class pi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new pi(qe.min(),De.empty(),Wh)}static max(){return new pi(qe.max(),De.empty(),Wh)}}function CE(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=De.comparator(t.documentKey,e.documentKey),n!==0?n:rt(t.largestBatchId,e.largestBatchId))}const x4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function kc(t){if(t.code!==me.FAILED_PRECONDITION||t.message!==x4)throw t;Te("LocalStore","Unexpectedly lost primary lease")}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ie(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ie?n:ie.resolve(n)}catch(n){return ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.reject(n)}static resolve(e){return new ie(((n,r)=>{n(e)}))}static reject(e){return new ie(((n,r)=>{r(e)}))}static waitFor(e){return new ie(((n,r)=>{let i=0,a=0,o=!1;e.forEach((c=>{++i,c.next((()=>{++a,o&&a===i&&n()}),(u=>r(u)))})),o=!0,a===i&&n()}))}static or(e){let n=ie.resolve(!1);for(const r of e)n=n.next((i=>i?ie.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new ie(((r,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const d=u;n(e[d]).next((h=>{o[d]=h,++c,c===a&&r(o)}),(h=>i(h)))}}))}static doWhile(e,n){return new ie(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}const ui="SimpleDb";class Vv{static open(e,n,r,i){try{return new Vv(n,e.transaction(i,r))}catch(a){throw new Eh(n,a)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new za,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Eh(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=IE(r.target.error);this.S.reject(new Eh(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Te(ui,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new KK(n)}}class Ho{static delete(e){return Te(ui,"Removing database:",e),Yl($O().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!t4())return!1;if(Ho.F())return!0;const e=Qn(),n=Ho.M(e),r=0<n&&n<10,i=w4(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Ho.M(Qn())===12.2&&Nr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Te(ui,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const o=a.target.result;n(o)},i.onblocked=()=>{r(new Eh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const o=a.target.error;o.name==="VersionError"?r(new Ie(me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new Ie(me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Eh(e,o))},i.onupgradeneeded=a=>{Te(ui,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const o=a.target.result;this.N.k(o,i.transaction,a.oldVersion,this.version).next((()=>{Te(ui,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const a=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const c=Vv.open(this.db,e,a?"readonly":"readwrite",r),u=i(c).next((d=>(c.C(),d))).catch((d=>(c.abort(d),ie.reject(d)))).toPromise();return u.catch((()=>{})),await c.D,u}catch(c){const u=c,d=u.name!=="FirebaseError"&&o<3;if(Te(ui,"Transaction failed with error:",u.message,"Retrying:",d),this.close(),!d)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}function w4(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class YK{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Yl(this.U.delete())}}class Eh extends Ie{constructor(e,n){super(me.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ll(t){return t.name==="IndexedDbTransactionError"}class KK{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Te(ui,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(Te(ui,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Yl(r)}add(e){return Te(ui,"ADD",this.store.name,e,e),Yl(this.store.add(e))}get(e){return Yl(this.store.get(e)).next((n=>(n===void 0&&(n=null),Te(ui,"GET",this.store.name,e,n),n)))}delete(e){return Te(ui,"DELETE",this.store.name,e),Yl(this.store.delete(e))}count(){return Te(ui,"COUNT",this.store.name),Yl(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(r.range);return new ie(((o,c)=>{a.onerror=u=>{c(u.target.error)},a.onsuccess=u=>{o(u.target.result)}}))}{const a=this.cursor(r),o=[];return this.H(a,((c,u)=>{o.push(u)})).next((()=>o))}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new ie(((i,a)=>{r.onerror=o=>{a(o.target.error)},r.onsuccess=o=>{i(o.target.result)}}))}Z(e,n){Te(ui,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,((a,o,c)=>c.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new ie(((r,i)=>{n.onerror=a=>{const o=IE(a.target.error);i(o)},n.onsuccess=a=>{const o=a.target.result;o?e(o.primaryKey,o.value).next((c=>{c?o.continue():r()})):r()}}))}H(e,n){const r=[];return new ie(((i,a)=>{e.onerror=o=>{a(o.target.error)},e.onsuccess=o=>{const c=o.target.result;if(!c)return void i();const u=new YK(c),d=n(c.primaryKey,c.value,u);if(d instanceof ie){const h=d.catch((g=>(u.done(),ie.reject(g))));r.push(h)}u.isDone?i():u.G===null?c.continue():c.continue(u.G)}})).next((()=>ie.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Yl(t){return new ie(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=IE(r.target.error);n(i)}}))}let XR=!1;function IE(t){const e=Ho.M(Qn());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return XR||(XR=!0,setTimeout((()=>{throw r}),0)),r}}return t}const Sh="IndexBackfiller";class XK{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Te(Sh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();Te(Sh,`Documents written: ${n}`)}catch(n){ll(n)?Te(Sh,"Ignoring IndexedDB error during index backfill: ",n):await kc(n)}await this.re(6e4)}))}}class WK{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,a=!0;return ie.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!r.has(o))return Te(Sh,`Processing collection: ${o}`),this.oe(e,o,i).next((c=>{i-=c,r.add(o)}));a=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((a=>{const o=a.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this._e(i,a))).next((c=>(Te(Sh,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,n,c)))).next((()=>o.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,a)=>{const o=b4(a);CE(o,r)>0&&(r=o)})),new pi(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}class Oi{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Oi.ce=-1;const ac=-1;function jv(t){return t==null}function Zh(t){return t===0&&1/t==-1/0}function QK(t){return typeof t=="number"&&Number.isInteger(t)&&!Zh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const B0="";function Sr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=WR(e)),e=ZK(t.get(n),e);return WR(e)}function ZK(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case B0:n+="";break;default:n+=a}}return n}function WR(t){return t+B0+""}function ka(t){const e=t.length;if(ze(e>=2,64408,{path:t}),e===2)return ze(t.charAt(0)===B0&&t.charAt(1)==="",56145,{path:t}),Mt.emptyPath();const n=e-2,r=[];let i="";for(let a=0;a<e;){const o=t.indexOf(B0,a);switch((o<0||o>n)&&Me(50515,{path:t}),t.charAt(o+1)){case"":const c=t.substring(a,o);let u;i.length===0?u=c:(i+=c,u=i,i=""),r.push(u);break;case"":i+=t.substring(a,o),i+="\0";break;case"":i+=t.substring(a,o+1);break;default:Me(61167,{path:t})}a=o+2}return new Mt(r)}const Fl="remoteDocuments",kp="owner",wu="owner",Jh="mutationQueues",JK="userId",ta="mutations",QR="batchId",ec="userMutationsIndex",ZR=["userId","batchId"];function t0(t,e){return[t,Sr(e)]}function E4(t,e,n){return[t,Sr(e),n]}const eX={},hd="documentMutations",U0="remoteDocumentsV14",tX=["prefixPath","collectionGroup","readTime","documentId"],n0="documentKeyIndex",nX=["prefixPath","collectionGroup","documentId"],S4="collectionGroupIndex",rX=["collectionGroup","readTime","prefixPath","documentId"],ep="remoteDocumentGlobal",E_="remoteDocumentGlobalKey",pd="targets",T4="queryTargetsIndex",iX=["canonicalId","targetId"],gd="targetDocuments",aX=["targetId","path"],RE="documentTargetsIndex",sX=["path","targetId"],F0="targetGlobalKey",sc="targetGlobal",tp="collectionParents",oX=["collectionId","parent"],md="clientMetadata",lX="clientId",zv="bundles",cX="bundleId",Lv="namedQueries",uX="name",DE="indexConfiguration",dX="indexId",S_="collectionGroupIndex",fX="collectionGroup",Th="indexState",hX=["indexId","uid"],A4="sequenceNumberIndex",pX=["uid","sequenceNumber"],Ah="indexEntries",gX=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],C4="documentKeyIndex",mX=["indexId","uid","orderedDocumentKey"],Bv="documentOverlays",vX=["userId","collectionPath","documentId"],T_="collectionPathOverlayIndex",yX=["userId","collectionPath","largestBatchId"],I4="collectionGroupOverlayIndex",bX=["userId","collectionGroup","largestBatchId"],kE="globals",xX="name",R4=[Jh,ta,hd,Fl,pd,kp,sc,gd,md,ep,tp,zv,Lv],_X=[...R4,Bv],D4=[Jh,ta,hd,U0,pd,kp,sc,gd,md,ep,tp,zv,Lv,Bv],k4=D4,NE=[...k4,DE,Th,Ah],wX=NE,N4=[...NE,kE],EX=N4;class A_ extends _4{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Zn(t,e){const n=at(t);return Ho.O(n.le,e)}function JR(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function cl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function M4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class ln{constructor(e,n){this.comparator=e,this.root=n||fr.EMPTY}insert(e,n){return new ln(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,fr.BLACK,null,null))}remove(e){return new ln(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vm(this.root,e,this.comparator,!0)}}class Vm{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??fr.RED,this.left=i??fr.EMPTY,this.right=a??fr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new fr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return fr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return fr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}fr.EMPTY=null,fr.RED=!0,fr.BLACK=!1;fr.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new fr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ft{constructor(e){this.comparator=e,this.data=new ln(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new eD(this.data.getIterator())}getIteratorFrom(e){return new eD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ft(this.comparator);return n.data=e,n}}class eD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Eu(t){return t.hasNext()?t.getNext():void 0}class Kr{constructor(e){this.fields=e,e.sort(hn.comparator)}static empty(){return new Kr([])}unionWith(e){let n=new Ft(hn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Kr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fd(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class P4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Gn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new P4("Invalid base64 string: "+a):a}})(e);return new Gn(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a})(e);return new Gn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gn.EMPTY_BYTE_STRING=new Gn("");const SX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vs(t){if(ze(!!t,39018),typeof t=="string"){let e=0;const n=SX.exec(t);if(ze(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:sn(t.seconds),nanos:sn(t.nanos)}}function sn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function js(t){return typeof t=="string"?Gn.fromBase64String(t):Gn.fromUint8Array(t)}const O4="server_timestamp",V4="__type__",j4="__previous_value__",z4="__local_write_time__";function ME(t){return(t?.mapValue?.fields||{})[V4]?.stringValue===O4}function Uv(t){const e=t.mapValue.fields[j4];return ME(e)?Uv(e):e}function np(t){const e=Vs(t.mapValue.fields[z4].timestampValue);return new dt(e.seconds,e.nanos)}class TX{constructor(e,n,r,i,a,o,c,u,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const G0="(default)";class xc{constructor(e,n){this.projectId=e,this.database=n||G0}static empty(){return new xc("","")}get isDefaultDatabase(){return this.database===G0}isEqual(e){return e instanceof xc&&e.projectId===this.projectId&&e.database===this.database}}const PE="__type__",L4="__max__",Lo={mapValue:{fields:{__type__:{stringValue:L4}}}},OE="__vector__",vd="value",r0={nullValue:"NULL_VALUE"};function Jo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ME(t)?4:B4(t)?9007199254740991:Fv(t)?10:11:Me(28295,{value:t})}function Ha(t,e){if(t===e)return!0;const n=Jo(t);if(n!==Jo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return np(t).isEqual(np(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=Vs(i.timestampValue),c=Vs(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return js(i.bytesValue).isEqual(js(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return sn(i.geoPointValue.latitude)===sn(a.geoPointValue.latitude)&&sn(i.geoPointValue.longitude)===sn(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return sn(i.integerValue)===sn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=sn(i.doubleValue),c=sn(a.doubleValue);return o===c?Zh(o)===Zh(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return fd(t.arrayValue.values||[],e.arrayValue.values||[],Ha);case 10:case 11:return(function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(JR(o)!==JR(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Ha(o[u],c[u])))return!1;return!0})(t,e);default:return Me(52216,{left:t})}}function rp(t,e){return(t.values||[]).find((n=>Ha(n,e)))!==void 0}function el(t,e){if(t===e)return 0;const n=Jo(t),r=Jo(e);if(n!==r)return rt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return rt(t.booleanValue,e.booleanValue);case 2:return(function(a,o){const c=sn(a.integerValue||a.doubleValue),u=sn(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return tD(t.timestampValue,e.timestampValue);case 4:return tD(np(t),np(e));case 5:return __(t.stringValue,e.stringValue);case 6:return(function(a,o){const c=js(a),u=js(o);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(a,o){const c=a.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const h=rt(c[d],u[d]);if(h!==0)return h}return rt(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,o){const c=rt(sn(a.latitude),sn(o.latitude));return c!==0?c:rt(sn(a.longitude),sn(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return nD(t.arrayValue,e.arrayValue);case 10:return(function(a,o){const c=a.fields||{},u=o.fields||{},d=c[vd]?.arrayValue,h=u[vd]?.arrayValue,g=rt(d?.values?.length||0,h?.values?.length||0);return g!==0?g:nD(d,h)})(t.mapValue,e.mapValue);case 11:return(function(a,o){if(a===Lo.mapValue&&o===Lo.mapValue)return 0;if(a===Lo.mapValue)return 1;if(o===Lo.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){const m=__(u[g],h[g]);if(m!==0)return m;const x=el(c[u[g]],d[h[g]]);if(x!==0)return x}return rt(u.length,h.length)})(t.mapValue,e.mapValue);default:throw Me(23264,{he:n})}}function tD(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return rt(t,e);const n=Vs(t),r=Vs(e),i=rt(n.seconds,r.seconds);return i!==0?i:rt(n.nanos,r.nanos)}function nD(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=el(n[i],r[i]);if(a)return a}return rt(n.length,r.length)}function yd(t){return C_(t)}function C_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Vs(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return js(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return De.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=C_(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${C_(n.fields[o])}`;return i+"}"})(t.mapValue):Me(61005,{value:t})}function i0(t){switch(Jo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uv(t);return e?16+i0(e):16;case 5:return 2*t.stringValue.length;case 6:return js(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+i0(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return cl(r.fields,((a,o)=>{i+=a.length+i0(o)})),i})(t.mapValue);default:throw Me(13486,{value:t})}}function ip(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function I_(t){return!!t&&"integerValue"in t}function ap(t){return!!t&&"arrayValue"in t}function rD(t){return!!t&&"nullValue"in t}function iD(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function a0(t){return!!t&&"mapValue"in t}function Fv(t){return(t?.mapValue?.fields||{})[PE]?.stringValue===OE}function Ch(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return cl(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Ch(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ch(t.arrayValue.values[n]);return e}return{...t}}function B4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===L4}const U4={mapValue:{fields:{[PE]:{stringValue:OE},[vd]:{arrayValue:{}}}}};function AX(t){return"nullValue"in t?r0:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ip(xc.empty(),De.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Fv(t)?U4:{mapValue:{}}:Me(35942,{value:t})}function CX(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ip(xc.empty(),De.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?U4:"mapValue"in t?Fv(t)?{mapValue:{}}:Lo:Me(61959,{value:t})}function aD(t,e){const n=el(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function sD(t,e){const n=el(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class _r{constructor(e){this.value=e}static empty(){return new _r({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!a0(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ch(n)}setAll(e){let n=hn.emptyPath(),r={},i=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=Ch(o):i.push(c.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());a0(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ha(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];a0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){cl(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new _r(Ch(this.value))}}function F4(t){const e=[];return cl(t.fields,((n,r)=>{const i=new hn([n]);if(a0(r)){const a=F4(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)})),new Kr(e)}class xn{constructor(e,n,r,i,a,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new xn(e,0,qe.min(),qe.min(),qe.min(),_r.empty(),0)}static newFoundDocument(e,n,r,i){return new xn(e,1,n,qe.min(),r,i,0)}static newNoDocument(e,n){return new xn(e,2,n,qe.min(),qe.min(),_r.empty(),0)}static newUnknownDocument(e,n){return new xn(e,3,n,qe.min(),qe.min(),_r.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class bd{constructor(e,n){this.position=e,this.inclusive=n}}function oD(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?r=De.comparator(De.fromName(o.referenceValue),n.key):r=el(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function lD(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ha(t.position[n],e.position[n]))return!1;return!0}class sp{constructor(e,n="asc"){this.field=e,this.dir=n}}function IX(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class G4{}class wt extends G4{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new RX(e,n,r):n==="array-contains"?new NX(e,r):n==="in"?new X4(e,r):n==="not-in"?new MX(e,r):n==="array-contains-any"?new PX(e,r):new wt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new DX(e,r):new kX(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(el(n,this.value)):n!==null&&Jo(this.value)===Jo(n)&&this.matchesComparison(el(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ut extends G4{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ut(e,n)}matches(e){return xd(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xd(t){return t.op==="and"}function R_(t){return t.op==="or"}function VE(t){return q4(t)&&xd(t)}function q4(t){for(const e of t.filters)if(e instanceof Ut)return!1;return!0}function D_(t){if(t instanceof wt)return t.field.canonicalString()+t.op.toString()+yd(t.value);if(VE(t))return t.filters.map((e=>D_(e))).join(",");{const e=t.filters.map((n=>D_(n))).join(",");return`${t.op}(${e})`}}function H4(t,e){return t instanceof wt?(function(r,i){return i instanceof wt&&r.op===i.op&&r.field.isEqual(i.field)&&Ha(r.value,i.value)})(t,e):t instanceof Ut?(function(r,i){return i instanceof Ut&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,o,c)=>a&&H4(o,i.filters[c])),!0):!1})(t,e):void Me(19439)}function $4(t,e){const n=t.filters.concat(e);return Ut.create(n,t.op)}function Y4(t){return t instanceof wt?(function(n){return`${n.field.canonicalString()} ${n.op} ${yd(n.value)}`})(t):t instanceof Ut?(function(n){return n.op.toString()+" {"+n.getFilters().map(Y4).join(" ,")+"}"})(t):"Filter"}class RX extends wt{constructor(e,n,r){super(e,n,r),this.key=De.fromName(r.referenceValue)}matches(e){const n=De.comparator(e.key,this.key);return this.matchesComparison(n)}}class DX extends wt{constructor(e,n){super(e,"in",n),this.keys=K4("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class kX extends wt{constructor(e,n){super(e,"not-in",n),this.keys=K4("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function K4(t,e){return(e.arrayValue?.values||[]).map((n=>De.fromName(n.referenceValue)))}class NX extends wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ap(n)&&rp(n.arrayValue,this.value)}}class X4 extends wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&rp(this.value.arrayValue,n)}}class MX extends wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(rp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!rp(this.value.arrayValue,n)}}class PX extends wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ap(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>rp(this.value.arrayValue,r)))}}class OX{constructor(e,n=null,r=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.Te=null}}function k_(t,e=null,n=[],r=[],i=null,a=null,o=null){return new OX(t,e,n,r,i,a,o)}function _c(t){const e=at(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>D_(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),jv(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>yd(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>yd(r))).join(",")),e.Te=n}return e.Te}function Np(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!IX(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!H4(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!lD(t.startAt,e.startAt)&&lD(t.endAt,e.endAt)}function q0(t){return De.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function H0(t,e){return t.filters.filter((n=>n instanceof wt&&n.field.isEqual(e)))}function cD(t,e,n){let r=r0,i=!0;for(const a of H0(t,e)){let o=r0,c=!0;switch(a.op){case"<":case"<=":o=AX(a.value);break;case"==":case"in":case">=":o=a.value;break;case">":o=a.value,c=!1;break;case"!=":case"not-in":o=r0}aD({value:r,inclusive:i},{value:o,inclusive:c})<0&&(r=o,i=c)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const o=n.position[a];aD({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function uD(t,e,n){let r=Lo,i=!0;for(const a of H0(t,e)){let o=Lo,c=!0;switch(a.op){case">=":case">":o=CX(a.value),c=!1;break;case"==":case"in":case"<=":o=a.value;break;case"<":o=a.value,c=!1;break;case"!=":case"not-in":o=Lo}sD({value:r,inclusive:i},{value:o,inclusive:c})>0&&(r=o,i=c)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const o=n.position[a];sD({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}class Bd{constructor(e,n=null,r=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function VX(t,e,n,r,i,a,o,c){return new Bd(t,e,n,r,i,a,o,c)}function Mp(t){return new Bd(t)}function dD(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function W4(t){return t.collectionGroup!==null}function Ih(t){const e=at(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ft(hn.comparator);return o.filters.forEach((u=>{u.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new sp(a,r))})),n.has(hn.keyField().canonicalString())||e.Ie.push(new sp(hn.keyField(),r))}return e.Ie}function zi(t){const e=at(t);return e.Ee||(e.Ee=jX(e,Ih(t))),e.Ee}function jX(t,e){if(t.limitType==="F")return k_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new sp(i.field,a)}));const n=t.endAt?new bd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new bd(t.startAt.position,t.startAt.inclusive):null;return k_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function N_(t,e){const n=t.filters.concat([e]);return new Bd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $0(t,e,n){return new Bd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Gv(t,e){return Np(zi(t),zi(e))&&t.limitType===e.limitType}function Q4(t){return`${_c(zi(t))}|lt:${t.limitType}`}function ku(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>Y4(i))).join(", ")}]`),jv(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>yd(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>yd(i))).join(",")),`Target(${r})`})(zi(t))}; limitType=${t.limitType})`}function Pp(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):De.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of Ih(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(o,c,u){const d=oD(o,c,u);return o.inclusive?d<=0:d<0})(r.startAt,Ih(r),i)||r.endAt&&!(function(o,c,u){const d=oD(o,c,u);return o.inclusive?d>=0:d>0})(r.endAt,Ih(r),i))})(t,e)}function zX(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Z4(t){return(e,n)=>{let r=!1;for(const i of Ih(t)){const a=LX(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function LX(t,e,n){const r=t.field.isKeyField()?De.comparator(e.key,n.key):(function(a,o,c){const u=o.data.field(a),d=c.data.field(a);return u!==null&&d!==null?el(u,d):Me(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Me(19790,{direction:t.dir})}}class Bs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){cl(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return M4(this.inner)}size(){return this.innerSize}}const BX=new ln(De.comparator);function di(){return BX}const J4=new ln(De.comparator);function oh(...t){let e=J4;for(const n of t)e=e.insert(n.key,n);return e}function e3(t){let e=J4;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Na(){return Rh()}function t3(){return Rh()}function Rh(){return new Bs((t=>t.toString()),((t,e)=>t.isEqual(e)))}const UX=new ln(De.comparator),FX=new Ft(De.comparator);function ht(...t){let e=FX;for(const n of t)e=e.add(n);return e}const GX=new Ft(rt);function qX(){return GX}function jE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zh(e)?"-0":e}}function n3(t){return{integerValue:""+t}}function HX(t,e){return QK(e)?n3(e):jE(t,e)}class qv{constructor(){this._=void 0}}function $X(t,e,n){return t instanceof op?(function(i,a){const o={fields:{[V4]:{stringValue:O4},[z4]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&ME(a)&&(a=Uv(a)),a&&(o.fields[j4]=a),{mapValue:o}})(n,e):t instanceof _d?i3(t,e):t instanceof wd?a3(t,e):(function(i,a){const o=r3(i,a),c=fD(o)+fD(i.Ae);return I_(o)&&I_(i.Ae)?n3(c):jE(i.serializer,c)})(t,e)}function YX(t,e,n){return t instanceof _d?i3(t,e):t instanceof wd?a3(t,e):n}function r3(t,e){return t instanceof lp?(function(r){return I_(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class op extends qv{}class _d extends qv{constructor(e){super(),this.elements=e}}function i3(t,e){const n=s3(e);for(const r of t.elements)n.some((i=>Ha(i,r)))||n.push(r);return{arrayValue:{values:n}}}class wd extends qv{constructor(e){super(),this.elements=e}}function a3(t,e){let n=s3(e);for(const r of t.elements)n=n.filter((i=>!Ha(i,r)));return{arrayValue:{values:n}}}class lp extends qv{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function fD(t){return sn(t.integerValue||t.doubleValue)}function s3(t){return ap(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class KX{constructor(e,n){this.field=e,this.transform=n}}function XX(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof _d&&i instanceof _d||r instanceof wd&&i instanceof wd?fd(r.elements,i.elements,Ha):r instanceof lp&&i instanceof lp?Ha(r.Ae,i.Ae):r instanceof op&&i instanceof op})(t.transform,e.transform)}class WX{constructor(e,n){this.version=e,this.transformResults=n}}class Er{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Er}static exists(e){return new Er(void 0,e)}static updateTime(e){return new Er(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function s0(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hv{}function o3(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $v(t.key,Er.none()):new Ud(t.key,t.data,Er.none());{const n=t.data,r=_r.empty();let i=new Ft(hn.comparator);for(let a of e.fields)if(!i.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new Us(t.key,r,new Kr(i.toArray()),Er.none())}}function QX(t,e,n){t instanceof Ud?(function(i,a,o){const c=i.value.clone(),u=pD(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Us?(function(i,a,o){if(!s0(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=pD(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(l3(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(t,e,n):(function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Dh(t,e,n,r){return t instanceof Ud?(function(a,o,c,u){if(!s0(a.precondition,o))return c;const d=a.value.clone(),h=gD(a.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(t,e,n,r):t instanceof Us?(function(a,o,c,u){if(!s0(a.precondition,o))return c;const d=gD(a.fieldTransforms,u,o),h=o.data;return h.setAll(l3(a)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(t,e,n,r):(function(a,o,c){return s0(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function ZX(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=r3(r.transform,i||null);a!=null&&(n===null&&(n=_r.empty()),n.set(r.field,a))}return n||null}function hD(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&fd(r,i,((a,o)=>XX(a,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ud extends Hv{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Us extends Hv{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function l3(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function pD(t,e,n){const r=new Map;ze(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const a=t[i],o=a.transform,c=e.data.field(a.field);r.set(a.field,YX(o,c,n[i]))}return r}function gD(t,e,n){const r=new Map;for(const i of t){const a=i.transform,o=n.data.field(i.field);r.set(i.field,$X(a,o,e))}return r}class $v extends Hv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class c3 extends Hv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zE{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&QX(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Dh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Dh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=t3();return this.mutations.forEach((i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=n.has(i.key)?null:c;const u=o3(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(qe.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ht())}isEqual(e){return this.batchId===e.batchId&&fd(this.mutations,e.mutations,((n,r)=>hD(n,r)))&&fd(this.baseMutations,e.baseMutations,((n,r)=>hD(n,r)))}}class LE{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ze(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return UX})();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new LE(e,n,r,i)}}class BE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class JX{constructor(e,n){this.count=e,this.unchangedNames=n}}var zn,St;function eW(t){switch(t){case me.OK:return Me(64938);case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0;default:return Me(15467,{code:t})}}function u3(t){if(t===void 0)return Nr("GRPC error has no .code"),me.UNKNOWN;switch(t){case zn.OK:return me.OK;case zn.CANCELLED:return me.CANCELLED;case zn.UNKNOWN:return me.UNKNOWN;case zn.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case zn.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case zn.INTERNAL:return me.INTERNAL;case zn.UNAVAILABLE:return me.UNAVAILABLE;case zn.UNAUTHENTICATED:return me.UNAUTHENTICATED;case zn.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case zn.NOT_FOUND:return me.NOT_FOUND;case zn.ALREADY_EXISTS:return me.ALREADY_EXISTS;case zn.PERMISSION_DENIED:return me.PERMISSION_DENIED;case zn.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case zn.ABORTED:return me.ABORTED;case zn.OUT_OF_RANGE:return me.OUT_OF_RANGE;case zn.UNIMPLEMENTED:return me.UNIMPLEMENTED;case zn.DATA_LOSS:return me.DATA_LOSS;default:return Me(39323,{code:t})}}(St=zn||(zn={}))[St.OK=0]="OK",St[St.CANCELLED=1]="CANCELLED",St[St.UNKNOWN=2]="UNKNOWN",St[St.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",St[St.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",St[St.NOT_FOUND=5]="NOT_FOUND",St[St.ALREADY_EXISTS=6]="ALREADY_EXISTS",St[St.PERMISSION_DENIED=7]="PERMISSION_DENIED",St[St.UNAUTHENTICATED=16]="UNAUTHENTICATED",St[St.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",St[St.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",St[St.ABORTED=10]="ABORTED",St[St.OUT_OF_RANGE=11]="OUT_OF_RANGE",St[St.UNIMPLEMENTED=12]="UNIMPLEMENTED",St[St.INTERNAL=13]="INTERNAL",St[St.UNAVAILABLE=14]="UNAVAILABLE",St[St.DATA_LOSS=15]="DATA_LOSS";function tW(){return new TextEncoder}const nW=new qo([4294967295,4294967295],0);function mD(t){const e=tW().encode(t),n=new l4;return n.update(e),new Uint8Array(n.digest())}function vD(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new qo([n,r],0),new qo([i,a],0)]}class UE{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new lh(`Invalid padding: ${n}`);if(r<0)throw new lh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new lh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new lh(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=qo.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(qo.fromNumber(r)));return i.compare(nW)===1&&(i=new qo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=mD(e),[r,i]=vD(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new UE(a,i,n);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const n=mD(e),[r,i]=vD(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class lh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Yv{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Op.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Yv(qe.min(),i,new ln(rt),di(),ht())}}class Op{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Op(r,n,ht(),ht(),ht())}}class o0{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class d3{constructor(e,n){this.targetId=e,this.Ce=n}}class f3{constructor(e,n,r=Gn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class yD{constructor(){this.ve=0,this.Fe=bD(),this.Me=Gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ht(),n=ht(),r=ht();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Me(38017,{changeType:a})}})),new Op(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=bD()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class rW{constructor(e){this.Ge=e,this.ze=new Map,this.je=di(),this.Je=jm(),this.He=jm(),this.Ye=new ln(rt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Me(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(q0(a))if(r===0){const o=new De(a.path);this.et(n,o,xn.newNoDocument(o,qe.min()))}else ze(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let o,c;try{o=js(r).toUint8Array()}catch(u){if(u instanceof P4)return bc("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new UE(o,i,a)}catch(u){return bc(u instanceof lh?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(n,a,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((a,o)=>{const c=this.ot(o);if(c){if(a.current&&q0(c.target)){const u=new De(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,xn.newNoDocument(u,e))}a.Be&&(n.set(o,a.ke()),a.qe())}}));let r=ht();this.He.forEach(((a,o)=>{let c=!0;o.forEachWhile((u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(a))})),this.je.forEach(((a,o)=>o.setReadTime(e)));const i=new Yv(e,n,this.Ye,this.je,r);return this.je=di(),this.Je=jm(),this.He=jm(),this.Ye=new ln(rt),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new yD,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ft(rt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ft(rt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Te("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new yD),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function jm(){return new ln(De.comparator)}function bD(){return new ln(De.comparator)}const iW={asc:"ASCENDING",desc:"DESCENDING"},aW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sW={and:"AND",or:"OR"};class oW{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function M_(t,e){return t.useProto3Json||jv(e)?e:{value:e}}function Ed(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function h3(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function lW(t,e){return Ed(t,e.toTimestamp())}function Vr(t){return ze(!!t,49232),qe.fromTimestamp((function(n){const r=Vs(n);return new dt(r.seconds,r.nanos)})(t))}function FE(t,e){return P_(t,e).canonicalString()}function P_(t,e){const n=(function(i){return new Mt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function p3(t){const e=Mt.fromString(t);return ze(E3(e),10190,{key:e.toString()}),e}function Y0(t,e){return FE(t.databaseId,e.path)}function oc(t,e){const n=p3(e);if(n.get(1)!==t.databaseId.projectId)throw new Ie(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ie(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new De(v3(n))}function g3(t,e){return FE(t.databaseId,e)}function m3(t){const e=p3(t);return e.length===4?Mt.emptyPath():v3(e)}function O_(t){return new Mt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function v3(t){return ze(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function xD(t,e,n){return{name:Y0(t,e),fields:n.value.mapValue.fields}}function cW(t,e,n){const r=oc(t,e.name),i=Vr(e.updateTime),a=e.createTime?Vr(e.createTime):qe.min(),o=new _r({mapValue:{fields:e.fields}}),c=xn.newFoundDocument(r,i,a,o);return n&&c.setHasCommittedMutations(),n?c.setHasCommittedMutations():c}function uW(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Me(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(d,h){return d.useProto3Json?(ze(h===void 0||typeof h=="string",58123),Gn.fromBase64String(h||"")):(ze(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Gn.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(d){const h=d.code===void 0?me.UNKNOWN:u3(d.code);return new Ie(h,d.message||"")})(o);n=new f3(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=oc(t,r.document.name),a=Vr(r.document.updateTime),o=r.document.createTime?Vr(r.document.createTime):qe.min(),c=new _r({mapValue:{fields:r.document.fields}}),u=xn.newFoundDocument(i,a,o,c),d=r.targetIds||[],h=r.removedTargetIds||[];n=new o0(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=oc(t,r.document),a=r.readTime?Vr(r.readTime):qe.min(),o=xn.newNoDocument(i,a),c=r.removedTargetIds||[];n=new o0([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=oc(t,r.document),a=r.removedTargetIds||[];n=new o0([],a,i,null)}else{if(!("filter"in e))return Me(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new JX(i,a),c=r.targetId;n=new d3(c,o)}}return n}function K0(t,e){let n;if(e instanceof Ud)n={update:xD(t,e.key,e.value)};else if(e instanceof $v)n={delete:Y0(t,e.key)};else if(e instanceof Us)n={update:xD(t,e.key,e.data),updateMask:mW(e.fieldMask)};else{if(!(e instanceof c3))return Me(16599,{Vt:e.type});n={verify:Y0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,o){const c=o.transform;if(c instanceof op)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof _d)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof wd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof lp)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw Me(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:lW(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Me(27497)})(t,e.precondition)),n}function V_(t,e){const n=e.currentDocument?(function(a){return a.updateTime!==void 0?Er.updateTime(Vr(a.updateTime)):a.exists!==void 0?Er.exists(a.exists):Er.none()})(e.currentDocument):Er.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(o,c){let u=null;if("setToServerValue"in c)ze(c.setToServerValue==="REQUEST_TIME",16630,{proto:c}),u=new op;else if("appendMissingElements"in c){const h=c.appendMissingElements.values||[];u=new _d(h)}else if("removeAllFromArray"in c){const h=c.removeAllFromArray.values||[];u=new wd(h)}else"increment"in c?u=new lp(o,c.increment):Me(16584,{proto:c});const d=hn.fromServerFormat(c.fieldPath);return new KX(d,u)})(t,i))):[];if(e.update){e.update.name;const i=oc(t,e.update.name),a=new _r({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(u){const d=u.fieldPaths||[];return new Kr(d.map((h=>hn.fromServerFormat(h))))})(e.updateMask);return new Us(i,a,o,n,r)}return new Ud(i,a,n,r)}if(e.delete){const i=oc(t,e.delete);return new $v(i,n)}if(e.verify){const i=oc(t,e.verify);return new c3(i,n)}return Me(1463,{proto:e})}function dW(t,e){return t&&t.length>0?(ze(e!==void 0,14353),t.map((n=>(function(i,a){let o=i.updateTime?Vr(i.updateTime):Vr(a);return o.isEqual(qe.min())&&(o=Vr(a)),new WX(o,i.transformResults||[])})(n,e)))):[]}function y3(t,e){return{documents:[g3(t,e.path)]}}function b3(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=g3(t,i);const a=(function(d){if(d.length!==0)return w3(Ut.create(d,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const o=(function(d){if(d.length!==0)return d.map((h=>(function(m){return{field:Nu(m.field),direction:hW(m.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=M_(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:n,parent:i}}function x3(t){let e=m3(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ze(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let a=[];n.where&&(a=(function(g){const m=_3(g);return m instanceof Ut&&VE(m)?m.getFilters():[m]})(n.where));let o=[];n.orderBy&&(o=(function(g){return g.map((m=>(function(_){return new sp(Mu(_.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(m)))})(n.orderBy));let c=null;n.limit&&(c=(function(g){let m;return m=typeof g=="object"?g.value:g,jv(m)?null:m})(n.limit));let u=null;n.startAt&&(u=(function(g){const m=!!g.before,x=g.values||[];return new bd(x,m)})(n.startAt));let d=null;return n.endAt&&(d=(function(g){const m=!g.before,x=g.values||[];return new bd(x,m)})(n.endAt)),VX(e,i,o,a,c,"F",u,d)}function fW(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function _3(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Mu(n.unaryFilter.field);return wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Mu(n.unaryFilter.field);return wt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Mu(n.unaryFilter.field);return wt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Mu(n.unaryFilter.field);return wt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}})(t):t.fieldFilter!==void 0?(function(n){return wt.create(Mu(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ut.create(n.compositeFilter.filters.map((r=>_3(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Me(1026)}})(n.compositeFilter.op))})(t):Me(30097,{filter:t})}function hW(t){return iW[t]}function pW(t){return aW[t]}function gW(t){return sW[t]}function Nu(t){return{fieldPath:t.canonicalString()}}function Mu(t){return hn.fromServerFormat(t.fieldPath)}function w3(t){return t instanceof wt?(function(n){if(n.op==="=="){if(iD(n.value))return{unaryFilter:{field:Nu(n.field),op:"IS_NAN"}};if(rD(n.value))return{unaryFilter:{field:Nu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(iD(n.value))return{unaryFilter:{field:Nu(n.field),op:"IS_NOT_NAN"}};if(rD(n.value))return{unaryFilter:{field:Nu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nu(n.field),op:pW(n.op),value:n.value}}})(t):t instanceof Ut?(function(n){const r=n.getFilters().map((i=>w3(i)));return r.length===1?r[0]:{compositeFilter:{op:gW(n.op),filters:r}}})(t):Me(54877,{filter:t})}function mW(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function E3(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class ws{constructor(e,n,r,i,a=qe.min(),o=qe.min(),c=Gn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class S3{constructor(e){this.yt=e}}function vW(t,e){let n;if(e.document)n=cW(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=De.fromSegments(e.noDocument.path),i=Ec(e.noDocument.readTime);n=xn.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Me(56709);{const r=De.fromSegments(e.unknownDocument.path),i=Ec(e.unknownDocument.version);n=xn.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const a=new dt(i[0],i[1]);return qe.fromTimestamp(a)})(e.readTime)),n}function _D(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:X0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,o){return{name:Y0(a,o.key),fields:o.data.value.mapValue.fields,updateTime:Ed(a,o.version.toTimestamp()),createTime:Ed(a,o.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:wc(e.version)};else{if(!e.isUnknownDocument())return Me(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:wc(e.version)}}return r}function X0(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function wc(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ec(t){const e=new dt(t.seconds,t.nanoseconds);return qe.fromTimestamp(e)}function Kl(t,e){const n=(e.baseMutations||[]).map((a=>V_(t.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const o=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const c=e.mutations[a+1];o.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>V_(t.yt,a))),i=dt.fromMillis(e.localWriteTimeMs);return new zE(e.batchId,i,n,r)}function ch(t){const e=Ec(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ec(t.lastLimboFreeSnapshotVersion):qe.min();let r;return r=(function(a){return a.documents!==void 0})(t.query)?(function(a){const o=a.documents.length;return ze(o===1,1966,{count:o}),zi(Mp(m3(a.documents[0])))})(t.query):(function(a){return zi(x3(a))})(t.query),new ws(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Gn.fromBase64String(t.resumeToken))}function T3(t,e){const n=wc(e.snapshotVersion),r=wc(e.lastLimboFreeSnapshotVersion);let i;i=q0(e.target)?y3(t.yt,e.target):b3(t.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:_c(e.target),readTime:n,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function A3(t){const e=x3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$0(e,e.limit,"L"):e}function W1(t,e){return new BE(e.largestBatchId,V_(t.yt,e.overlayMutation))}function wD(t,e){const n=e.path.lastSegment();return[t,Sr(e.path.popLast()),n]}function ED(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:wc(r.readTime),documentKey:Sr(r.documentKey.path),largestBatchId:r.largestBatchId}}class yW{getBundleMetadata(e,n){return SD(e).get(n).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:Ec(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,n){return SD(e).put((function(i){return{bundleId:i.id,createTime:wc(Vr(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return TD(e).get(n).next((r=>{if(r)return(function(a){return{name:a.name,query:A3(a.bundledQuery),readTime:Ec(a.readTime)}})(r)}))}saveNamedQuery(e,n){return TD(e).put((function(i){return{name:i.name,readTime:wc(Vr(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function SD(t){return Zn(t,zv)}function TD(t){return Zn(t,Lv)}class Kv{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Kv(e,r)}getOverlay(e,n){return Kf(e).get(wD(this.userId,n)).next((r=>r?W1(this.serializer,r):null))}getOverlays(e,n){const r=Na();return ie.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((a,o)=>{const c=new BE(n,o);i.push(this.St(e,c))})),ie.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((o=>i.add(Sr(o.getCollectionPath()))));const a=[];return i.forEach((o=>{const c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);a.push(Kf(e).Z(T_,c))})),ie.waitFor(a)}getOverlaysForCollection(e,n,r){const i=Na(),a=Sr(n),o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Kf(e).J(T_,o).next((c=>{for(const u of c){const d=W1(this.serializer,u);i.set(d.getKey(),d)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const a=Na();let o;const c=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Kf(e).ee({index:I4,range:c},((u,d,h)=>{const g=W1(this.serializer,d);a.size()<i||g.largestBatchId===o?(a.set(g.getKey(),g),o=g.largestBatchId):h.done()})).next((()=>a))}St(e,n){return Kf(e).put((function(i,a,o){const[c,u,d]=wD(a,o.mutation.key);return{userId:a,collectionPath:u,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:K0(i.yt,o.mutation)}})(this.serializer,this.userId,n))}}function Kf(t){return Zn(t,Bv)}class bW{bt(e){return Zn(e,kE)}getSessionToken(e){return this.bt(e).get("sessionToken").next((n=>{const r=n?.value;return r?Gn.fromUint8Array(r):Gn.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}class Xl{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(sn(e.integerValue));else if("doubleValue"in e){const r=sn(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Zh(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Vs(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(js(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?B4(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Fv(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Me(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const i=vd,a=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(sn(a)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),De.fromName(e).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Xl.Kt=new Xl;const Su=255;function xW(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function AD(t){const e=64-(function(r){let i=0;for(let a=0;a<8;++a){const o=xW(255&r[a]);if(i+=o,o!==8)break}return i})(t);return Math.ceil(e/8)}class _W{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=AD(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=AD(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(Su),this.sn(255)}_n(){this.an(Su),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(a){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,a,!1),new Uint8Array(o.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===Su?(this.sn(Su),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===Su?(this.an(Su),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class wW{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class EW{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Xf{constructor(){this.cn=new _W,this.ln=new wW(this.cn),this.hn=new EW(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class Wl{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Wl(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:l0(this.En),directionalValue:l0(this.dn),orderedDocumentKey:l0(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function So(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=CD(t.En,e.En),n!==0?n:(n=CD(t.dn,e.dn),n!==0?n:De.comparator(t.In,e.In)))}function CD(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function l0(t){return e4()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function ID(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class RD{constructor(e){this.mn=new Ft(((n,r)=>hn.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ze(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=w_(e);if(n!==void 0&&!this.wn(n))return!1;const r=Ul(e);let i=new Set,a=0,o=0;for(;a<r.length&&this.wn(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.mn.size>0){const c=this.mn.getIterator().getNext();if(!i.has(c.field.canonicalString())){const u=r[a];if(!this.Sn(c,u)||!this.bn(this.fn[o++],u))return!1}++a}for(;a<r.length;++a){const c=r[a];if(o>=this.fn.length||!this.bn(this.fn[o++],c))return!1}return!0}Dn(){if(this.pn)return null;let e=new Ft(hn.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new e0(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new e0(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new e0(r.field,r.dir==="asc"?0:1)));return new L0(L0.UNKNOWN_ID,this.collectionId,n,Qh.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}function C3(t){if(ze(t instanceof wt||t instanceof Ut,20012),t instanceof wt){if(t instanceof X4){const n=t.value.arrayValue?.values?.map((r=>wt.create(t.field,"==",r)))||[];return Ut.create(n,"or")}return t}const e=t.filters.map((n=>C3(n)));return Ut.create(e,t.op)}function SW(t){if(t.getFilters().length===0)return[];const e=L_(C3(t));return ze(I3(e),7391),j_(e)||z_(e)?[e]:e.getFilters()}function j_(t){return t instanceof wt}function z_(t){return t instanceof Ut&&VE(t)}function I3(t){return j_(t)||z_(t)||(function(n){if(n instanceof Ut&&R_(n)){for(const r of n.getFilters())if(!j_(r)&&!z_(r))return!1;return!0}return!1})(t)}function L_(t){if(ze(t instanceof wt||t instanceof Ut,34018),t instanceof wt)return t;if(t.filters.length===1)return L_(t.filters[0]);const e=t.filters.map((r=>L_(r)));let n=Ut.create(e,t.op);return n=W0(n),I3(n)?n:(ze(n instanceof Ut,64498),ze(xd(n),40251),ze(n.filters.length>1,57927),n.filters.reduce(((r,i)=>GE(r,i))))}function GE(t,e){let n;return ze(t instanceof wt||t instanceof Ut,38388),ze(e instanceof wt||e instanceof Ut,25473),n=t instanceof wt?e instanceof wt?(function(i,a){return Ut.create([i,a],"and")})(t,e):DD(t,e):e instanceof wt?DD(e,t):(function(i,a){if(ze(i.filters.length>0&&a.filters.length>0,48005),xd(i)&&xd(a))return $4(i,a.getFilters());const o=R_(i)?i:a,c=R_(i)?a:i,u=o.filters.map((d=>GE(d,c)));return Ut.create(u,"or")})(t,e),W0(n)}function DD(t,e){if(xd(e))return $4(e,t.getFilters());{const n=e.filters.map((r=>GE(t,r)));return Ut.create(n,"or")}}function W0(t){if(ze(t instanceof wt||t instanceof Ut,11850),t instanceof wt)return t;const e=t.getFilters();if(e.length===1)return W0(e[0]);if(q4(t))return t;const n=e.map((i=>W0(i))),r=[];return n.forEach((i=>{i instanceof wt?r.push(i):i instanceof Ut&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Ut.create(r,t.op)}class TW{constructor(){this.Cn=new qE}addToCollectionParentIndex(e,n){return this.Cn.add(n),ie.resolve()}getCollectionParents(e,n){return ie.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ie.resolve()}deleteFieldIndex(e,n){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,n){return ie.resolve()}getDocumentsMatchingTarget(e,n){return ie.resolve(null)}getIndexType(e,n){return ie.resolve(0)}getFieldIndexes(e,n){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,n){return ie.resolve(pi.min())}getMinOffsetFromCollectionGroup(e,n){return ie.resolve(pi.min())}updateCollectionGroup(e,n,r){return ie.resolve()}updateIndexEntries(e,n){return ie.resolve()}}class qE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ft(Mt.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ft(Mt.comparator)).toArray()}}const kD="IndexedDbIndexManager",zm=new Uint8Array(0);class AW{constructor(e,n){this.databaseId=n,this.vn=new qE,this.Fn=new Bs((r=>_c(r)),((r,i)=>Np(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.vn.add(n)}));const a={collectionId:r,parent:Sr(i)};return ND(e).put(a)}return ie.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[m4(n),""],!1,!0);return ND(e).J(i).next((a=>{for(const o of a){if(o.collectionId!==n)break;r.push(ka(o.parent))}return r}))}addFieldIndex(e,n){const r=Wf(e),i=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((u=>[u.fieldPath.canonicalString(),u.kind]))}})(n);delete i.indexId;const a=r.add(i);if(n.indexState){const o=Au(e);return a.next((c=>{o.put(ED(c,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return a.next()}deleteFieldIndex(e,n){const r=Wf(e),i=Au(e),a=Tu(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=Wf(e),r=Tu(e),i=Au(e);return n.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,n){return ie.forEach(this.Mn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const a=new RD(r).Dn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,n){const r=Tu(e);let i=!0;const a=new Map;return ie.forEach(this.Mn(n),(o=>this.xn(e,o).next((c=>{i&&(i=!!c),a.set(o,c)})))).next((()=>{if(i){let o=ht();const c=[];return ie.forEach(a,((u,d)=>{Te(kD,`Using index ${(function(R){return`id=${R.indexId}|cg=${R.collectionGroup}|f=${R.fields.map((O=>`${O.fieldPath}:${O.kind}`)).join(",")}`})(u)} to execute ${_c(n)}`);const h=(function(R,O){const L=w_(O);if(L===void 0)return null;for(const j of H0(R,L.fieldPath))switch(j.op){case"array-contains-any":return j.value.arrayValue.values||[];case"array-contains":return[j.value]}return null})(d,u),g=(function(R,O){const L=new Map;for(const j of Ul(O))for(const A of H0(R,j.fieldPath))switch(A.op){case"==":case"in":L.set(j.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return L.set(j.fieldPath.canonicalString(),A.value),Array.from(L.values())}return null})(d,u),m=(function(R,O){const L=[];let j=!0;for(const A of Ul(O)){const C=A.kind===0?cD(R,A.fieldPath,R.startAt):uD(R,A.fieldPath,R.startAt);L.push(C.value),j&&(j=C.inclusive)}return new bd(L,j)})(d,u),x=(function(R,O){const L=[];let j=!0;for(const A of Ul(O)){const C=A.kind===0?uD(R,A.fieldPath,R.endAt):cD(R,A.fieldPath,R.endAt);L.push(C.value),j&&(j=C.inclusive)}return new bd(L,j)})(d,u),_=this.On(u,d,m),E=this.On(u,d,x),S=this.Nn(u,d,g),T=this.Bn(u.indexId,h,_,m.inclusive,E,x.inclusive,S);return ie.forEach(T,(D=>r.Y(D,n.limit).next((R=>{R.forEach((O=>{const L=De.fromSegments(O.documentKey);o.has(L)||(o=o.add(L),c.push(L))}))}))))})).next((()=>c))}return ie.resolve(null)}))}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=SW(Ut.create(e.filters,"and")).map((r=>k_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,n),n)}Bn(e,n,r,i,a,o,c){const u=(n!=null?n.length:1)*Math.max(r.length,a.length),d=u/(n!=null?n.length:1),h=[];for(let g=0;g<u;++g){const m=n?this.Ln(n[g/d]):zm,x=this.kn(e,m,r[g%d],i),_=this.qn(e,m,a[g%d],o),E=c.map((S=>this.kn(e,m,S,!0)));h.push(...this.createRange(x,_,E))}return h}kn(e,n,r,i){const a=new Wl(e,De.empty(),n,r);return i?a:a.An()}qn(e,n,r,i){const a=new Wl(e,De.empty(),n,r);return i?a.An():a}xn(e,n){const r=new RD(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let o=null;for(const c of a)r.yn(c)&&(!o||c.fields.length>o.fields.length)&&(o=c);return o}))}getIndexType(e,n){let r=2;const i=this.Mn(n);return ie.forEach(i,(a=>this.xn(e,a).next((o=>{o?r!==0&&o.fields.length<(function(u){let d=new Ft(hn.comparator),h=!1;for(const g of u.filters)for(const m of g.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:d=d.add(m.field));for(const g of u.orderBy)g.field.isKeyField()||(d=d.add(g.field));return d.size+(h?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(o){return o.limit!==null})(n)&&i.length>1&&r===2?1:r))}Qn(e,n){const r=new Xf;for(const i of Ul(e)){const a=n.data.field(i.fieldPath);if(a==null)return null;const o=r.Pn(i.kind);Xl.Kt.Dt(a,o)}return r.un()}Ln(e){const n=new Xf;return Xl.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Xf;return Xl.Kt.Dt(ip(this.databaseId,n),r.Pn((function(a){const o=Ul(a);return o.length===0?0:o[o.length-1].kind})(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new Xf);let a=0;for(const o of Ul(e)){const c=r[a++];for(const u of i)if(this.Un(n,o.fieldPath)&&ap(c))i=this.Kn(i,o,c);else{const d=u.Pn(o.kind);Xl.Kt.Dt(c,d)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],a=[];for(const o of r.arrayValue.values||[])for(const c of i){const u=new Xf;u.seed(c.un()),Xl.Kt.Dt(o,u.Pn(n.kind)),a.push(u)}return a}Un(e,n){return!!e.filters.find((r=>r instanceof wt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=Wf(e),i=Au(e);return(n?r.J(S_,IDBKeyRange.bound(n,n)):r.J()).next((a=>{const o=[];return ie.forEach(a,(c=>i.get([c.indexId,this.uid]).next((u=>{o.push((function(h,g){const m=g?new Qh(g.sequenceNumber,new pi(Ec(g.readTime),new De(ka(g.documentKey)),g.largestBatchId)):Qh.empty(),x=h.fields.map((([_,E])=>new e0(hn.fromServerFormat(_),E)));return new L0(h.indexId,h.collectionGroup,x,m)})(c,u))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:rt(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=Wf(e),a=Au(e);return this.Gn(e).next((o=>i.J(S_,IDBKeyRange.bound(n,n)).next((c=>ie.forEach(c,(u=>a.put(ED(u.indexId,this.uid,o,r))))))))}updateIndexEntries(e,n){const r=new Map;return ie.forEach(n,((i,a)=>{const o=r.get(i.collectionGroup);return(o?ie.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next((c=>(r.set(i.collectionGroup,c),ie.forEach(c,(u=>this.zn(e,i,u).next((d=>{const h=this.jn(a,u);return d.isEqual(h)?ie.resolve():this.Jn(e,a,u,d,h)})))))))}))}Hn(e,n,r,i){return Tu(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return Tu(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=Tu(e);let a=new Ft(So);return i.ee({index:C4,range:IDBKeyRange.only([r.indexId,this.uid,l0(this.$n(r,n))])},((o,c)=>{a=a.add(new Wl(r.indexId,n,ID(c.arrayValue),ID(c.directionalValue)))})).next((()=>a))}jn(e,n){let r=new Ft(So);const i=this.Qn(n,e);if(i==null)return r;const a=w_(n);if(a!=null){const o=e.data.field(a.fieldPath);if(ap(o))for(const c of o.arrayValue.values||[])r=r.add(new Wl(n.indexId,e.key,this.Ln(c),i))}else r=r.add(new Wl(n.indexId,e.key,zm,i));return r}Jn(e,n,r,i,a){Te(kD,"Updating index entries for document '%s'",n.key);const o=[];return(function(u,d,h,g,m){const x=u.getIterator(),_=d.getIterator();let E=Eu(x),S=Eu(_);for(;E||S;){let T=!1,D=!1;if(E&&S){const R=h(E,S);R<0?D=!0:R>0&&(T=!0)}else E!=null?D=!0:T=!0;T?(g(S),S=Eu(_)):D?(m(E),E=Eu(x)):(E=Eu(x),S=Eu(_))}})(i,a,So,(c=>{o.push(this.Hn(e,n,r,c))}),(c=>{o.push(this.Yn(e,n,r,c))})),ie.waitFor(o)}Gn(e){let n=1;return Au(e).ee({index:A4,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,a)=>{a.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((o,c)=>So(o,c))).filter(((o,c,u)=>!c||So(o,u[c-1])!==0));const i=[];i.push(e);for(const o of r){const c=So(o,e),u=So(o,n);if(c===0)i[0]=e.An();else if(c>0&&u<0)i.push(o),i.push(o.An());else if(u>0)break}i.push(n);const a=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const c=i[o].Vn(this.uid,zm,De.empty()),u=i[o+1].Vn(this.uid,zm,De.empty());a.push(IDBKeyRange.bound(c,u))}return a}Zn(e,n){return So(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(MD)}getMinOffset(e,n){return ie.mapArray(this.Mn(n),(r=>this.xn(e,r).next((i=>i||Me(44426))))).next(MD)}}function ND(t){return Zn(t,tp)}function Tu(t){return Zn(t,Ah)}function Wf(t){return Zn(t,DE)}function Au(t){return Zn(t,Th)}function MD(t){ze(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;CE(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new pi(e.readTime,e.documentKey,n)}const PD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},R3=41943040;class br{static withCacheSize(e){return new br(e,br.DEFAULT_COLLECTION_PERCENTILE,br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}function D3(t,e,n){const r=t.store(ta),i=t.store(hd),a=[],o=IDBKeyRange.only(n.batchId);let c=0;const u=r.ee({range:o},((h,g,m)=>(c++,m.delete())));a.push(u.next((()=>{ze(c===1,47070,{batchId:n.batchId})})));const d=[];for(const h of n.mutations){const g=E4(e,h.key.path,n.batchId);a.push(i.delete(g)),d.push(h.key)}return ie.waitFor(a).next((()=>d))}function Q0(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Me(14731);e=t.noDocument}return JSON.stringify(e).length}br.DEFAULT_COLLECTION_PERCENTILE=10,br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,br.DEFAULT=new br(R3,br.DEFAULT_COLLECTION_PERCENTILE,br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),br.DISABLED=new br(-1,0,0);class Xv{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){ze(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new Xv(a,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return To(e).ee({index:ec,range:r},((i,a,o)=>{n=!1,o.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const a=Pu(e),o=To(e);return o.add({}).next((c=>{ze(typeof c=="number",49019);const u=new zE(c,n,r,i),d=(function(x,_,E){const S=E.baseMutations.map((D=>K0(x.yt,D))),T=E.mutations.map((D=>K0(x.yt,D)));return{userId:_,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:S,mutations:T}})(this.serializer,this.userId,u),h=[];let g=new Ft(((m,x)=>rt(m.canonicalString(),x.canonicalString())));for(const m of i){const x=E4(this.userId,m.key.path,c);g=g.add(m.key.path.popLast()),h.push(o.put(d)),h.push(a.put(x,eX))}return g.forEach((m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))})),e.addOnCommittedListener((()=>{this.Xn[c]=u.keys()})),ie.waitFor(h).next((()=>u))}))}lookupMutationBatch(e,n){return To(e).get(n).next((r=>r?(ze(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Kl(this.serializer,r)):null))}er(e,n){return this.Xn[n]?ie.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return To(e).ee({index:ec,range:i},((o,c,u)=>{c.userId===this.userId&&(ze(c.batchId>=r,47524,{tr:r}),a=Kl(this.serializer,c)),u.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ac;return To(e).ee({index:ec,range:n,reverse:!0},((i,a,o)=>{r=a.batchId,o.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,ac],[this.userId,Number.POSITIVE_INFINITY]);return To(e).J(ec,n).next((r=>r.map((i=>Kl(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=t0(this.userId,n.path),i=IDBKeyRange.lowerBound(r),a=[];return Pu(e).ee({range:i},((o,c,u)=>{const[d,h,g]=o,m=ka(h);if(d===this.userId&&n.path.isEqual(m))return To(e).get(g).next((x=>{if(!x)throw Me(61480,{nr:o,batchId:g});ze(x.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:x.userId,batchId:g}),a.push(Kl(this.serializer,x))}));u.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ft(rt);const i=[];return n.forEach((a=>{const o=t0(this.userId,a.path),c=IDBKeyRange.lowerBound(o),u=Pu(e).ee({range:c},((d,h,g)=>{const[m,x,_]=d,E=ka(x);m===this.userId&&a.path.isEqual(E)?r=r.add(_):g.done()}));i.push(u)})),ie.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,a=t0(this.userId,r),o=IDBKeyRange.lowerBound(a);let c=new Ft(rt);return Pu(e).ee({range:o},((u,d,h)=>{const[g,m,x]=u,_=ka(m);g===this.userId&&r.isPrefixOf(_)?_.length===i&&(c=c.add(x)):h.done()})).next((()=>this.rr(e,c)))}rr(e,n){const r=[],i=[];return n.forEach((a=>{i.push(To(e).get(a).next((o=>{if(o===null)throw Me(35274,{batchId:a});ze(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:a}),r.push(Kl(this.serializer,o))})))})),ie.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return D3(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.ir(n.batchId)})),ie.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return ie.resolve();const r=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),i=[];return Pu(e).ee({range:r},((a,o,c)=>{if(a[0]===this.userId){const u=ka(a[1]);i.push(u)}else c.done()})).next((()=>{ze(i.length===0,56720,{sr:i.map((a=>a.canonicalString()))})}))}))}containsKey(e,n){return k3(e,this.userId,n)}_r(e){return N3(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:ac,lastStreamToken:""}))}}function k3(t,e,n){const r=t0(e,n.path),i=r[1],a=IDBKeyRange.lowerBound(r);let o=!1;return Pu(t).ee({range:a,X:!0},((c,u,d)=>{const[h,g,m]=c;h===e&&g===i&&(o=!0),d.done()})).next((()=>o))}function To(t){return Zn(t,ta)}function Pu(t){return Zn(t,hd)}function N3(t){return Zn(t,Jh)}class Sc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Sc(0)}static cr(){return new Sc(-1)}}class CW{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next((n=>{const r=new Sc(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((n=>qe.fromTimestamp(new dt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i))))}addTargetData(e,n){return this.Pr(e,n).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>Cu(e).delete(n.targetId))).next((()=>this.lr(e))).next((r=>(ze(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,n,r){let i=0;const a=[];return Cu(e).ee(((o,c)=>{const u=ch(c);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,a.push(this.removeTargetData(e,u)))})).next((()=>ie.waitFor(a))).next((()=>i))}forEachTarget(e,n){return Cu(e).ee(((r,i)=>{const a=ch(i);n(a)}))}lr(e){return OD(e).get(F0).next((n=>(ze(n!==null,2888),n)))}hr(e,n){return OD(e).put(F0,n)}Pr(e,n){return Cu(e).put(T3(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((n=>n.targetCount))}getTargetData(e,n){const r=_c(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Cu(e).ee({range:i,index:T4},((o,c,u)=>{const d=ch(c);Np(n,d.target)&&(a=d,u.done())})).next((()=>a))}addMatchingKeys(e,n,r){const i=[],a=ko(e);return n.forEach((o=>{const c=Sr(o.path);i.push(a.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,o))})),ie.waitFor(i)}removeMatchingKeys(e,n,r){const i=ko(e);return ie.forEach(n,(a=>{const o=Sr(a.path);return ie.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,n){const r=ko(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=ko(e);let a=ht();return i.ee({range:r,X:!0},((o,c,u)=>{const d=ka(o[1]),h=new De(d);a=a.add(h)})).next((()=>a))}containsKey(e,n){const r=Sr(n.path),i=IDBKeyRange.bound([r],[m4(r)],!1,!0);let a=0;return ko(e).ee({index:RE,X:!0,range:i},(([o,c],u,d)=>{o!==0&&(a++,d.done())})).next((()=>a>0))}At(e,n){return Cu(e).get(n).next((r=>r?ch(r):null))}}function Cu(t){return Zn(t,pd)}function OD(t){return Zn(t,sc)}function ko(t){return Zn(t,gd)}const VD="LruGarbageCollector",IW=1048576;function jD([t,e],[n,r]){const i=rt(t,n);return i===0?rt(e,r):i}class RW{constructor(e){this.Ir=e,this.buffer=new Ft(jD),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();jD(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class M3{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Te(VD,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ll(n)?Te(VD,"Ignoring IndexedDB error during garbage collection: ",n):await kc(n)}await this.Vr(3e5)}))}}class DW{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return ie.resolve(Oi.ce);const r=new RW(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(PD)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PD):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,a,o,c,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,c=Date.now(),this.removeTargets(e,r,n)))).next((g=>(a=g,u=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(d=Date.now(),Du()<=_t.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${a} targets in `+(u-c)+`ms
	Removed ${g} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:g}))))}}function P3(t,e){return new DW(t,e)}class kW{constructor(e,n){this.db=e,this.garbageCollector=P3(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,((r,i)=>n(i)))}addReference(e,n,r){return Lm(e,r)}removeReference(e,n,r){return Lm(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Lm(e,n)}br(e,n){return(function(i,a){let o=!1;return N3(i).te((c=>k3(i,c,a).next((u=>(u&&(o=!0),ie.resolve(!u)))))).next((()=>o))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Sr(e,((o,c)=>{if(c<=n){const u=this.br(e,o).next((d=>{if(!d)return a++,r.getEntry(e,o).next((()=>(r.removeEntry(o,qe.min()),ko(e).delete((function(g){return[0,Sr(g.path)]})(o)))))}));i.push(u)}})).next((()=>ie.waitFor(i))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Lm(e,n)}Sr(e,n){const r=ko(e);let i,a=Oi.ce;return r.ee({index:RE},(([o,c],{path:u,sequenceNumber:d})=>{o===0?(a!==Oi.ce&&n(new De(ka(i)),a),a=d,i=u):a=Oi.ce})).next((()=>{a!==Oi.ce&&n(new De(ka(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Lm(t,e){return ko(t).put((function(r,i){return{targetId:0,path:Sr(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}class O3{constructor(){this.changes=new Bs((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ie.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class NW{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return zl(e).put(r)}removeEntry(e,n,r){return zl(e).delete((function(a,o){const c=a.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],X0(o),c[c.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.Dr(e,r))))}getEntry(e,n){let r=xn.newInvalidDocument(n);return zl(e).ee({index:n0,range:IDBKeyRange.only(Qf(n))},((i,a)=>{r=this.Cr(n,a)})).next((()=>r))}vr(e,n){let r={size:0,document:xn.newInvalidDocument(n)};return zl(e).ee({index:n0,range:IDBKeyRange.only(Qf(n))},((i,a)=>{r={document:this.Cr(n,a),size:Q0(a)}})).next((()=>r))}getEntries(e,n){let r=di();return this.Fr(e,n,((i,a)=>{const o=this.Cr(i,a);r=r.insert(i,o)})).next((()=>r))}Mr(e,n){let r=di(),i=new ln(De.comparator);return this.Fr(e,n,((a,o)=>{const c=this.Cr(a,o);r=r.insert(a,c),i=i.insert(a,Q0(o))})).next((()=>({documents:r,Or:i})))}Fr(e,n,r){if(n.isEmpty())return ie.resolve();let i=new Ft(BD);n.forEach((u=>i=i.add(u)));const a=IDBKeyRange.bound(Qf(i.first()),Qf(i.last())),o=i.getIterator();let c=o.getNext();return zl(e).ee({index:n0,range:a},((u,d,h)=>{const g=De.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;c&&BD(c,g)<0;)r(c,null),c=o.getNext();c&&c.isEqual(g)&&(r(c,d),c=o.hasNext()?o.getNext():null),c?h.j(Qf(c)):h.done()})).next((()=>{for(;c;)r(c,null),c=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,a){const o=n.path,c=[o.popLast().toArray(),o.lastSegment(),X0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return zl(e).J(IDBKeyRange.bound(c,u,!0)).next((d=>{a?.incrementDocumentReadCount(d.length);let h=di();for(const g of d){const m=this.Cr(De.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);m.isFoundDocument()&&(Pp(n,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h}))}getAllFromCollectionGroup(e,n,r,i){let a=di();const o=LD(n,r),c=LD(n,pi.max());return zl(e).ee({index:S4,range:IDBKeyRange.bound(o,c,!0)},((u,d,h)=>{const g=this.Cr(De.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);a=a.insert(g.key,g),a.size===i&&h.done()})).next((()=>a))}newChangeBuffer(e){return new MW(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return zD(e).get(E_).next((n=>(ze(!!n,20021),n)))}Dr(e,n){return zD(e).put(E_,n)}Cr(e,n){if(n){const r=vW(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(qe.min())))return r}return xn.newInvalidDocument(e)}}function V3(t){return new NW(t)}class MW extends O3{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Bs((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new Ft(((a,o)=>rt(a.canonicalString(),o.canonicalString())));return this.changes.forEach(((a,o)=>{const c=this.Br.get(a);if(n.push(this.Nr.removeEntry(e,a,c.readTime)),o.isValidDocument()){const u=_D(this.Nr.serializer,o);i=i.add(a.path.popLast());const d=Q0(u);r+=d-c.size,n.push(this.Nr.addEntry(e,a,u))}else if(r-=c.size,this.trackRemovals){const u=_D(this.Nr.serializer,o.convertToNoDocument(qe.min()));n.push(this.Nr.addEntry(e,a,u))}})),i.forEach((a=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,a))})),n.push(this.Nr.updateMetadata(e,r)),ie.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next((({documents:r,Or:i})=>(i.forEach(((a,o)=>{this.Br.set(a,{size:o,readTime:r.get(a).readTime})})),r)))}}function zD(t){return Zn(t,ep)}function zl(t){return Zn(t,U0)}function Qf(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function LD(t,e){const n=e.documentKey.path.toArray();return[t,X0(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function BD(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<n.length-2&&a<r.length-2;++a)if(i=rt(n[a],r[a]),i)return i;return i=rt(n.length,r.length),i||(i=rt(n[n.length-2],r[r.length-2]),i||rt(n[n.length-1],r[r.length-1]))}class PW{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class j3{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Dh(r.mutation,i,Kr.empty(),dt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,ht()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=ht()){const i=Na();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let o=oh();return a.forEach(((c,u)=>{o=o.insert(c,u.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=Na();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,ht())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,r,i){let a=di();const o=Rh(),c=(function(){return Rh()})();return n.forEach(((u,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Us)?a=a.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Dh(h.mutation,d,h.mutation.getFieldMask(),dt.now())):o.set(d.key,Kr.empty())})),this.recalculateAndSaveOverlays(e,a).next((u=>(u.forEach(((d,h)=>o.set(d,h))),n.forEach(((d,h)=>c.set(d,new PW(h,o.get(d)??null)))),c)))}recalculateAndSaveOverlays(e,n){const r=Rh();let i=new ln(((o,c)=>o-c)),a=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||Kr.empty();h=c.applyToLocalView(d,h),r.set(u,h);const g=(i.get(c.batchId)||ht()).add(u);i=i.insert(c.batchId,g)}))})).next((()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,h=u.value,g=t3();h.forEach((m=>{if(!a.has(m)){const x=o3(n.get(m),r.get(m));x!==null&&g.set(m,x),a=a.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return ie.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(o){return De.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):W4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):ie.resolve(Na());let c=Wh,u=a;return o.next((d=>ie.forEach(d,((h,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),a.get(h)?ie.resolve():this.remoteDocumentCache.getEntry(e,h).next((m=>{u=u.insert(h,m)}))))).next((()=>this.populateOverlays(e,d,a))).next((()=>this.computeViews(e,u,d,ht()))).next((h=>({batchId:c,changes:e3(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new De(n)).next((r=>{let i=oh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let o=oh();return this.indexManager.getCollectionParents(e,a).next((c=>ie.forEach(c,(u=>{const d=(function(g,m){return new Bd(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next((h=>{h.forEach(((g,m)=>{o=o.insert(g,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((o=>{a.forEach(((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,xn.newInvalidDocument(h)))}));let c=oh();return o.forEach(((u,d)=>{const h=a.get(u);h!==void 0&&Dh(h.mutation,d,Kr.empty(),dt.now()),Pp(n,d)&&(c=c.insert(u,d))})),c}))}}class OW{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ie.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Vr(i.createTime)}})(n)),ie.resolve()}getNamedQuery(e,n){return ie.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:A3(i.bundledQuery),readTime:Vr(i.readTime)}})(n)),ie.resolve()}}class VW{constructor(){this.overlays=new ln(De.comparator),this.qr=new Map}getOverlay(e,n){return ie.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Na();return ie.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.St(e,n,a)})),ie.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),ie.resolve()}getOverlaysForCollection(e,n,r){const i=Na(),a=n.length+1,o=new De(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return ie.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new ln(((d,h)=>d-h));const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=a.get(d.largestBatchId);h===null&&(h=Na(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const c=Na(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((d,h)=>c.set(d,h))),!(c.size()>=i)););return ie.resolve(c)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new BE(n,r));let a=this.qr.get(n);a===void 0&&(a=ht(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}class jW{constructor(){this.sessionToken=Gn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ie.resolve()}}class HE{constructor(){this.Qr=new Ft(nr.$r),this.Ur=new Ft(nr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new nr(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new nr(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new De(new Mt([])),r=new nr(n,e),i=new nr(n,e+1),a=[];return this.Ur.forEachInRange([r,i],(o=>{this.Gr(o),a.push(o.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new De(new Mt([])),r=new nr(n,e),i=new nr(n,e+1);let a=ht();return this.Ur.forEachInRange([r,i],(o=>{a=a.add(o.key)})),a}containsKey(e){const n=new nr(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class nr{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return De.comparator(e.key,n.key)||rt(e.Yr,n.Yr)}static Kr(e,n){return rt(e.Yr,n.Yr)||De.comparator(e.key,n.key)}}class zW{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ft(nr.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new zE(a,n,r,i);this.mutationQueue.push(o);for(const c of i)this.Zr=this.Zr.add(new nr(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ie.resolve(o)}lookupMutationBatch(e,n){return ie.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),a=i<0?0:i;return ie.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?ac:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new nr(n,0),i=new nr(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(o=>{const c=this.Xr(o.Yr);a.push(c)})),ie.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ft(rt);return n.forEach((i=>{const a=new nr(i,0),o=new nr(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],(c=>{r=r.add(c.Yr)}))})),ie.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;De.isDocumentKey(a)||(a=a.child(""));const o=new nr(new De(a),0);let c=new Ft(rt);return this.Zr.forEachWhile((u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Yr)),!0)}),o),ie.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){ze(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ie.forEach(n.mutations,(i=>{const a=new nr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new nr(n,0),i=this.Zr.firstAfterOrEqual(r);return ie.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class LW{constructor(e){this.ri=e,this.docs=(function(){return new ln(De.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ie.resolve(r?r.document.mutableCopy():xn.newInvalidDocument(n))}getEntries(e,n){let r=di();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():xn.newInvalidDocument(i))})),ie.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=di();const o=n.path,c=new De(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||CE(b4(h),r)<=0||(i.has(h.key)||Pp(n,h))&&(a=a.insert(h.key,h.mutableCopy()))}return ie.resolve(a)}getAllFromCollectionGroup(e,n,r,i){Me(9500)}ii(e,n){return ie.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new BW(this)}getSize(e){return ie.resolve(this.size)}}class BW extends O3{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),ie.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class UW{constructor(e){this.persistence=e,this.si=new Bs((n=>_c(n)),Np),this.lastRemoteSnapshotVersion=qe.min(),this.highestTargetId=0,this.oi=0,this._i=new HE,this.targetCount=0,this.ai=Sc.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),ie.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Sc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ie.resolve()}updateTargetData(e,n){return this.Pr(n),ie.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),ie.waitFor(a).next((()=>i))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return ie.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),ie.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((o=>{a.push(i.markPotentiallyOrphaned(e,o))})),ie.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ie.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return ie.resolve(r)}containsKey(e,n){return ie.resolve(this._i.containsKey(n))}}class $E{constructor(e,n){this.ui={},this.overlays={},this.ci=new Oi(0),this.li=!1,this.li=!0,this.hi=new jW,this.referenceDelegate=e(this),this.Pi=new UW(this),this.indexManager=new TW,this.remoteDocumentCache=(function(i){return new LW(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new S3(n),this.Ii=new OW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new VW,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new zW(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Te("MemoryPersistence","Starting transaction:",e);const i=new FW(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,n){return ie.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class FW extends _4{constructor(e){super(),this.currentSequenceNumber=e}}class Wv{constructor(e){this.persistence=e,this.Ri=new HE,this.Vi=null}static mi(e){return new Wv(e)}get fi(){if(this.Vi)return this.Vi;throw Me(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),ie.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ie.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(r=>{const i=De.fromPath(r);return this.gi(e,i).next((a=>{a||n.removeEntry(i,qe.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ie.or([()=>ie.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Z0{constructor(e,n){this.persistence=e,this.pi=new Bs((r=>Sr(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=P3(this,n)}static mi(e,n){return new Z0(e,n)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return ie.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?ie.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,n).next((c=>{c||(r++,a.removeEntry(o,qe.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ie.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ie.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=i0(e.data.value)),n}br(e,n,r){return ie.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return ie.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class GW{constructor(e){this.serializer=e}k(e,n,r,i){const a=new Vv("createOrUpgrade",n);r<1&&i>=1&&((function(u){u.createObjectStore(kp)})(e),(function(u){u.createObjectStore(Jh,{keyPath:JK}),u.createObjectStore(ta,{keyPath:QR,autoIncrement:!0}).createIndex(ec,ZR,{unique:!0}),u.createObjectStore(hd)})(e),UD(e),(function(u){u.createObjectStore(Fl)})(e));let o=ie.resolve();return r<3&&i>=3&&(r!==0&&((function(u){u.deleteObjectStore(gd),u.deleteObjectStore(pd),u.deleteObjectStore(sc)})(e),UD(e)),o=o.next((()=>(function(u){const d=u.store(sc),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:qe.min().toTimestamp(),targetCount:0};return d.put(F0,h)})(a)))),r<4&&i>=4&&(r!==0&&(o=o.next((()=>(function(u,d){return d.store(ta).J().next((g=>{u.deleteObjectStore(ta),u.createObjectStore(ta,{keyPath:QR,autoIncrement:!0}).createIndex(ec,ZR,{unique:!0});const m=d.store(ta),x=g.map((_=>m.put(_)));return ie.waitFor(x)}))})(e,a)))),o=o.next((()=>{(function(u){u.createObjectStore(md,{keyPath:lX})})(e)}))),r<5&&i>=5&&(o=o.next((()=>this.yi(a)))),r<6&&i>=6&&(o=o.next((()=>((function(u){u.createObjectStore(ep)})(e),this.wi(a))))),r<7&&i>=7&&(o=o.next((()=>this.Si(a)))),r<8&&i>=8&&(o=o.next((()=>this.bi(e,a)))),r<9&&i>=9&&(o=o.next((()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(o=o.next((()=>this.Di(a)))),r<11&&i>=11&&(o=o.next((()=>{(function(u){u.createObjectStore(zv,{keyPath:cX})})(e),(function(u){u.createObjectStore(Lv,{keyPath:uX})})(e)}))),r<12&&i>=12&&(o=o.next((()=>{(function(u){const d=u.createObjectStore(Bv,{keyPath:vX});d.createIndex(T_,yX,{unique:!1}),d.createIndex(I4,bX,{unique:!1})})(e)}))),r<13&&i>=13&&(o=o.next((()=>(function(u){const d=u.createObjectStore(U0,{keyPath:tX});d.createIndex(n0,nX),d.createIndex(S4,rX)})(e))).next((()=>this.Ci(e,a))).next((()=>e.deleteObjectStore(Fl)))),r<14&&i>=14&&(o=o.next((()=>this.Fi(e,a)))),r<15&&i>=15&&(o=o.next((()=>(function(u){u.createObjectStore(DE,{keyPath:dX,autoIncrement:!0}).createIndex(S_,fX,{unique:!1}),u.createObjectStore(Th,{keyPath:hX}).createIndex(A4,pX,{unique:!1}),u.createObjectStore(Ah,{keyPath:gX}).createIndex(C4,mX,{unique:!1})})(e)))),r<16&&i>=16&&(o=o.next((()=>{n.objectStore(Th).clear()})).next((()=>{n.objectStore(Ah).clear()}))),r<17&&i>=17&&(o=o.next((()=>{(function(u){u.createObjectStore(kE,{keyPath:xX})})(e)}))),r<18&&i>=18&&e4()&&(o=o.next((()=>{n.objectStore(Th).clear()})).next((()=>{n.objectStore(Ah).clear()}))),o}wi(e){let n=0;return e.store(Fl).ee(((r,i)=>{n+=Q0(i)})).next((()=>{const r={byteSize:n};return e.store(ep).put(E_,r)}))}yi(e){const n=e.store(Jh),r=e.store(ta);return n.J().next((i=>ie.forEach(i,(a=>{const o=IDBKeyRange.bound([a.userId,ac],[a.userId,a.lastAcknowledgedBatchId]);return r.J(ec,o).next((c=>ie.forEach(c,(u=>{ze(u.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:u.batchId});const d=Kl(this.serializer,u);return D3(e,a.userId,d).next((()=>{}))}))))}))))}Si(e){const n=e.store(gd),r=e.store(Fl);return e.store(sc).get(F0).next((i=>{const a=[];return r.ee(((o,c)=>{const u=new Mt(o),d=(function(g){return[0,Sr(g)]})(u);a.push(n.get(d).next((h=>h?ie.resolve():(g=>n.put({targetId:0,path:Sr(g),sequenceNumber:i.highestListenSequenceNumber}))(u))))})).next((()=>ie.waitFor(a)))}))}bi(e,n){e.createObjectStore(tp,{keyPath:oX});const r=n.store(tp),i=new qE,a=o=>{if(i.add(o)){const c=o.lastSegment(),u=o.popLast();return r.put({collectionId:c,parent:Sr(u)})}};return n.store(Fl).ee({X:!0},((o,c)=>{const u=new Mt(o);return a(u.popLast())})).next((()=>n.store(hd).ee({X:!0},(([o,c,u],d)=>{const h=ka(c);return a(h.popLast())}))))}Di(e){const n=e.store(pd);return n.ee(((r,i)=>{const a=ch(i),o=T3(this.serializer,a);return n.put(o)}))}Ci(e,n){const r=n.store(Fl),i=[];return r.ee(((a,o)=>{const c=n.store(U0),u=(function(g){return g.document?new De(Mt.fromString(g.document.name).popFirst(5)):g.noDocument?De.fromSegments(g.noDocument.path):g.unknownDocument?De.fromSegments(g.unknownDocument.path):Me(36783)})(o).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(c.put(d))})).next((()=>ie.waitFor(i)))}Fi(e,n){const r=n.store(ta),i=V3(this.serializer),a=new $E(Wv.mi,this.serializer.yt);return r.J().next((o=>{const c=new Map;return o.forEach((u=>{let d=c.get(u.userId)??ht();Kl(this.serializer,u).keys().forEach((h=>d=d.add(h))),c.set(u.userId,d)})),ie.forEach(c,((u,d)=>{const h=new dr(d),g=Kv.wt(this.serializer,h),m=a.getIndexManager(h),x=Xv.wt(h,this.serializer,m,a.referenceDelegate);return new j3(i,x,g,m).recalculateAndSaveOverlaysForDocumentKeys(new A_(n,Oi.ce),u).next()}))}))}}function UD(t){t.createObjectStore(gd,{keyPath:aX}).createIndex(RE,sX,{unique:!0}),t.createObjectStore(pd,{keyPath:"targetId"}).createIndex(T4,iX,{unique:!0}),t.createObjectStore(sc)}const Ao="IndexedDbPersistence",Q1=18e5,Z1=5e3,J1="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",qW="main";class YE{constructor(e,n,r,i,a,o,c,u,d,h,g=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=a,this.window=o,this.document=c,this.xi=d,this.Oi=h,this.Ni=g,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=m=>Promise.resolve(),!YE.v())throw new Ie(me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kW(this,i),this.$i=n+qW,this.serializer=new S3(u),this.Ui=new Ho(this.$i,this.Ni,new GW(this.serializer)),this.hi=new bW,this.Pi=new CW(this.referenceDelegate,this.serializer),this.remoteDocumentCache=V3(this.serializer),this.Ii=new yW,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&Nr(Ao,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ie(me.FAILED_PRECONDITION,J1);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Oi(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Bm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((n=>this.isPrimary&&!n?this.Zi(e).next((()=>!1)):!!n&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(ll(e))return Te(Ao,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Te(Ao,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Zf(e).get(wu).next((n=>ie.resolve(this.es(n))))}ts(e){return Bm(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Q1)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=Zn(n,md);return r.J().next((i=>{const a=this.ss(i,Q1),o=i.filter((c=>a.indexOf(c)===-1));return ie.forEach(o,(c=>r.delete(c.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?ie.resolve(!0):Zf(e).get(wu).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Z1)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new Ie(me.FAILED_PRECONDITION,J1);return!1}}return!(!this.networkEnabled||!this.inForeground)||Bm(e).J().next((r=>this.ss(r,Z1).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(a||o&&c)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&Te(Ao,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[kp,md],(e=>{const n=new A_(e,Oi.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(e,n){return e.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Bm(e).J().next((n=>this.ss(n,Q1).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return Xv.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new AW(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Kv.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){Te(Ao,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",a=(function(u){return u===18?EX:u===17?N4:u===16?wX:u===15?NE:u===14?k4:u===13?D4:u===12?_X:u===11?R4:void Me(60245)})(this.Ni);let o;return this.Ui.runTransaction(e,i,a,(c=>(o=new A_(c,this.ci?this.ci.next():Oi.ce),n==="readwrite-primary"?this.Hi(o).next((u=>!!u||this.Yi(o))).next((u=>{if(!u)throw Nr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new Ie(me.FAILED_PRECONDITION,x4);return r(o)})).next((u=>this.Xi(o).next((()=>u)))):this.Is(o).next((()=>r(o)))))).then((c=>(o.raiseOnCommittedEvent(),c)))}Is(e){return Zf(e).get(wu).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Z1)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Ie(me.FAILED_PRECONDITION,J1)}))}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zf(e).put(wu,n)}static v(){return Ho.v()}Zi(e){const n=Zf(e);return n.get(wu).next((r=>this.es(r)?(Te(Ao,"Releasing primary lease."),n.delete(wu)):ie.resolve()))}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Nr(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;JO()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const n=this.Ki?.getItem(this._s(e))!==null;return Te(Ao,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Nr(Ao,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Nr("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zf(t){return Zn(t,kp)}function Bm(t){return Zn(t,md)}function HW(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class KE{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ht(),i=ht();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new KE(e,n.fromCache,r,i)}}class $W{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class z3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return JO()?8:w4(Qn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ys(e,n).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.ws(e,n,i,r).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new $W;return this.Ss(e,n,o).next((c=>{if(a.result=c,this.Vs)return this.bs(e,n,o,c.size)}))})).next((()=>a.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(Du()<=_t.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",ku(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(Du()<=_t.DEBUG&&Te("QueryEngine","Query:",ku(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Du()<=_t.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",ku(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zi(n))):ie.resolve())}ys(e,n){if(dD(n))return ie.resolve(null);let r=zi(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=$0(n,null,"F"),r=zi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const o=ht(...a);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((u=>{const d=this.Ds(n,c);return this.Cs(n,d,o,u.readTime)?this.ys(e,$0(n,null,"F")):this.vs(e,d,n,u)}))))})))))}ws(e,n,r,i){return dD(n)||i.isEqual(qe.min())?ie.resolve(null):this.ps.getDocuments(e,r).next((a=>{const o=this.Ds(n,a);return this.Cs(n,o,r,i)?ie.resolve(null):(Du()<=_t.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ku(n)),this.vs(e,o,n,$K(i,Wh)).next((c=>c)))}))}Ds(e,n){let r=new Ft(Z4(e));return n.forEach(((i,a)=>{Pp(e,a)&&(r=r.add(a))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,n,r){return Du()<=_t.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",ku(n)),this.ps.getDocumentsMatchingQuery(e,n,pi.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((o=>{a=a.insert(o.key,o)})),a)))}}const XE="LocalStore",YW=3e8;class KW{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new ln(rt),this.xs=new Bs((a=>_c(a)),Np),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new j3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function L3(t,e,n,r){return new KW(t,e,n,r)}async function B3(t,e){const n=at(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const o=[],c=[];let u=ht();for(const d of i){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of a){c.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next((d=>({Ls:d,removedBatchIds:o,addedBatchIds:c})))}))}))}function XW(t,e){const n=at(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,d,h){const g=d.batch,m=g.keys();let x=ie.resolve();return m.forEach((_=>{x=x.next((()=>h.getEntry(u,_))).next((E=>{const S=d.docVersions.get(_);ze(S!==null,48541),E.version.compareTo(S)<0&&(g.applyToRemoteDocument(E,d),E.isValidDocument()&&(E.setReadTime(d.commitVersion),h.addEntry(E)))}))})),x.next((()=>c.mutationQueue.removeMutationBatch(u,g)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=ht();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function U3(t){const e=at(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function WW(t,e){const n=at(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const c=[];e.targetChanges.forEach(((h,g)=>{const m=i.get(g);if(!m)return;c.push(n.Pi.removeMatchingKeys(a,h.removedDocuments,g).next((()=>n.Pi.addMatchingKeys(a,h.addedDocuments,g))));let x=m.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?x=x.withResumeToken(Gn.EMPTY_BYTE_STRING,qe.min()).withLastLimboFreeSnapshotVersion(qe.min()):h.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(h.resumeToken,r)),i=i.insert(g,x),(function(E,S,T){return E.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=YW?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0})(m,x,h)&&c.push(n.Pi.updateTargetData(a,x))}));let u=di(),d=ht();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,h))})),c.push(QW(a,o,e.documentUpdates).next((h=>{u=h.ks,d=h.qs}))),!r.isEqual(qe.min())){const h=n.Pi.getLastRemoteSnapshotVersion(a).next((g=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));c.push(h)}return ie.waitFor(c).next((()=>o.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,u,d))).next((()=>u))})).then((a=>(n.Ms=i,a)))}function QW(t,e,n){let r=ht(),i=ht();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let o=di();return n.forEach(((c,u)=>{const d=a.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(qe.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Te(XE,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)})),{ks:o,qs:i}}))}function ZW(t,e){const n=at(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ac),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function JW(t,e){const n=at(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((a=>a?(i=a,ie.resolve(i)):n.Pi.allocateTargetId(r).next((o=>(i=new ws(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function B_(t,e,n){const r=at(t),i=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ll(o))throw o;Te(XE,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function FD(t,e,n){const r=at(t);let i=qe.min(),a=ht();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(u,d,h){const g=at(u),m=g.xs.get(h);return m!==void 0?ie.resolve(g.Ms.get(m)):g.Pi.getTargetData(d,h)})(r,o,zi(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next((u=>{a=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:qe.min(),n?a:ht()))).next((c=>(eQ(r,zX(e),c),{documents:c,Qs:a})))))}function eQ(t,e,n){let r=t.Os.get(e)||qe.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Os.set(e,r)}class GD{constructor(){this.activeTargetIds=qX()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class F3{constructor(){this.Mo=new GD,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new GD,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class tQ{Oo(e){}shutdown(){}}const qD="ConnectivityMonitor";class HD{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Te(qD,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Te(qD,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Um=null;function U_(){return Um===null?Um=(function(){return 268435456+Math.round(2147483648*Math.random())})():Um++,"0x"+Um.toString(16)}const ex="RestConnection",nQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rQ{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===G0?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,a){const o=U_(),c=this.zo(e,n.toUriEncodedString());Te(ex,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,a);const{host:d}=new URL(c),h=jd(d);return this.Jo(e,c,u,r,h).then((g=>(Te(ex,`Received RPC '${e}' ${o}: `,g),g)),(g=>{throw bc(ex,`RPC '${e}' ${o} failed with error: `,g,"url: ",c,"request:",r),g}))}Ho(e,n,r,i,a,o){return this.Go(e,n,r,i,a)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ld})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,n){const r=nQ[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class iQ{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const yr="WebChannelConnection";class aQ extends rQ{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,a){const o=U_();return new Promise(((c,u)=>{const d=new c4;d.setWithCredentials(!0),d.listenOnce(u4.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Jm.NO_ERROR:const g=d.getResponseJson();Te(yr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),c(g);break;case Jm.TIMEOUT:Te(yr,`RPC '${e}' ${o} timed out`),u(new Ie(me.DEADLINE_EXCEEDED,"Request time out"));break;case Jm.HTTP_ERROR:const m=d.getStatus();if(Te(yr,`RPC '${e}' ${o} failed with status:`,m,"response text:",d.getResponseText()),m>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const _=x?.error;if(_&&_.status&&_.message){const E=(function(T){const D=T.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(D)>=0?D:me.UNKNOWN})(_.status);u(new Ie(E,_.message))}else u(new Ie(me.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Ie(me.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Te(yr,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(i);Te(yr,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",h,r,15)}))}T_(e,n,r){const i=U_(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=h4(),c=f4(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=a.join("");Te(yr,`Creating RPC '${e}' stream ${i}: ${h}`,u);const g=o.createWebChannel(h,u);this.I_(g);let m=!1,x=!1;const _=new iQ({Yo:S=>{x?Te(yr,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(m||(Te(yr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),Te(yr,`RPC '${e}' stream ${i} sending:`,S),g.send(S))},Zo:()=>g.close()}),E=(S,T,D)=>{S.listen(T,(R=>{try{D(R)}catch(O){setTimeout((()=>{throw O}),0)}}))};return E(g,sh.EventType.OPEN,(()=>{x||(Te(yr,`RPC '${e}' stream ${i} transport opened.`),_.o_())})),E(g,sh.EventType.CLOSE,(()=>{x||(x=!0,Te(yr,`RPC '${e}' stream ${i} transport closed`),_.a_(),this.E_(g))})),E(g,sh.EventType.ERROR,(S=>{x||(x=!0,bc(yr,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),_.a_(new Ie(me.UNAVAILABLE,"The operation could not be completed")))})),E(g,sh.EventType.MESSAGE,(S=>{if(!x){const T=S.data[0];ze(!!T,16349);const D=T,R=D?.error||D[0]?.error;if(R){Te(yr,`RPC '${e}' stream ${i} received error:`,R);const O=R.status;let L=(function(C){const k=zn[C];if(k!==void 0)return u3(k)})(O),j=R.message;L===void 0&&(L=me.INTERNAL,j="Unknown error status: "+O+" with message "+R.message),x=!0,_.a_(new Ie(L,j)),g.close()}else Te(yr,`RPC '${e}' stream ${i} received:`,T),_.u_(T)}})),E(c,d4.STAT_EVENT,(S=>{S.stat===x_.PROXY?Te(yr,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===x_.NOPROXY&&Te(yr,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{_.__()}),0),_}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function sQ(){return typeof window<"u"?window:null}function c0(){return typeof document<"u"?document:null}function Qv(t){return new oW(t,!0)}class G3{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const $D="PersistentStream";class q3{constructor(e,n,r,i,a,o,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new G3(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===me.RESOURCE_EXHAUSTED?(Nr(n.toString()),Nr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===me.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Ie(me.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Te($D,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Te($D,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class oQ extends q3{constructor(e,n,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=uW(this.serializer,e),r=(function(a){if(!("targetChange"in a))return qe.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?qe.min():o.readTime?Vr(o.readTime):qe.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=O_(this.serializer),n.addTarget=(function(a,o){let c;const u=o.target;if(c=q0(u)?{documents:y3(a,u)}:{query:b3(a,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=h3(a,o.resumeToken);const d=M_(a,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(qe.min())>0){c.readTime=Ed(a,o.snapshotVersion.toTimestamp());const d=M_(a,o.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);const r=fW(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=O_(this.serializer),n.removeTarget=e,this.q_(n)}}class lQ extends q3{constructor(e,n,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=dW(e.writeResults,e.commitTime),r=Vr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=O_(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>K0(this.serializer,r)))};this.q_(n)}}class cQ{}class uQ extends cQ{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ie(me.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Go(e,P_(n,r),i,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ie(me.UNKNOWN,a.toString())}))}Ho(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,P_(n,r),i,o,c,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ie(me.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class dQ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Nr(n),this.aa=!1):Te("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Tc="RemoteStore";class fQ{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{Nc(this)&&(Te(Tc,"Restarting streams for network reachability change."),await(async function(u){const d=at(u);d.Ea.add(4),await Vp(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Zv(d)})(this))}))})),this.Ra=new dQ(r,i)}}async function Zv(t){if(Nc(t))for(const e of t.da)await e(!0)}async function Vp(t){for(const e of t.da)await e(!1)}function H3(t,e){const n=at(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),JE(n)?ZE(n):Fd(n).O_()&&QE(n,e))}function WE(t,e){const n=at(t),r=Fd(n);n.Ia.delete(e),r.O_()&&$3(n,e),n.Ia.size===0&&(r.O_()?r.L_():Nc(n)&&n.Ra.set("Unknown"))}function QE(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fd(t).Y_(e)}function $3(t,e){t.Va.Ue(e),Fd(t).Z_(e)}function ZE(t){t.Va=new rW({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Fd(t).start(),t.Ra.ua()}function JE(t){return Nc(t)&&!Fd(t).x_()&&t.Ia.size>0}function Nc(t){return at(t).Ea.size===0}function Y3(t){t.Va=void 0}async function hQ(t){t.Ra.set("Online")}async function pQ(t){t.Ia.forEach(((e,n)=>{QE(t,e)}))}async function gQ(t,e){Y3(t),JE(t)?(t.Ra.ha(e),ZE(t)):t.Ra.set("Unknown")}async function mQ(t,e,n){if(t.Ra.set("Online"),e instanceof f3&&e.state===2&&e.cause)try{await(async function(i,a){const o=a.cause;for(const c of a.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Ia.delete(c),i.Va.removeTarget(c))})(t,e)}catch(r){Te(Tc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await J0(t,r)}else if(e instanceof o0?t.Va.Ze(e):e instanceof d3?t.Va.st(e):t.Va.tt(e),!n.isEqual(qe.min()))try{const r=await U3(t.localStore);n.compareTo(r)>=0&&await(function(a,o){const c=a.Va.Tt(o);return c.targetChanges.forEach(((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.Ia.get(d);h&&a.Ia.set(d,h.withResumeToken(u.resumeToken,o))}})),c.targetMismatches.forEach(((u,d)=>{const h=a.Ia.get(u);if(!h)return;a.Ia.set(u,h.withResumeToken(Gn.EMPTY_BYTE_STRING,h.snapshotVersion)),$3(a,u);const g=new ws(h.target,u,d,h.sequenceNumber);QE(a,g)})),a.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){Te(Tc,"Failed to raise snapshot:",r),await J0(t,r)}}async function J0(t,e,n){if(!ll(e))throw e;t.Ea.add(1),await Vp(t),t.Ra.set("Offline"),n||(n=()=>U3(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Te(Tc,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Zv(t)}))}function K3(t,e){return e().catch((n=>J0(t,n,e)))}async function jp(t){const e=at(t),n=tl(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ac;for(;vQ(e);)try{const i=await ZW(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,yQ(e,i)}catch(i){await J0(e,i)}X3(e)&&W3(e)}function vQ(t){return Nc(t)&&t.Ta.length<10}function yQ(t,e){t.Ta.push(e);const n=tl(t);n.O_()&&n.X_&&n.ea(e.mutations)}function X3(t){return Nc(t)&&!tl(t).x_()&&t.Ta.length>0}function W3(t){tl(t).start()}async function bQ(t){tl(t).ra()}async function xQ(t){const e=tl(t);for(const n of t.Ta)e.ea(n.mutations)}async function _Q(t,e,n){const r=t.Ta.shift(),i=LE.from(r,e,n);await K3(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await jp(t)}async function wQ(t,e){e&&tl(t).X_&&await(async function(r,i){if((function(o){return eW(o)&&o!==me.ABORTED})(i.code)){const a=r.Ta.shift();tl(r).B_(),await K3(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await jp(r)}})(t,e),X3(t)&&W3(t)}async function YD(t,e){const n=at(t);n.asyncQueue.verifyOperationInProgress(),Te(Tc,"RemoteStore received new credentials");const r=Nc(n);n.Ea.add(3),await Vp(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Zv(n)}async function EQ(t,e){const n=at(t);e?(n.Ea.delete(2),await Zv(n)):e||(n.Ea.add(2),await Vp(n),n.Ra.set("Unknown"))}function Fd(t){return t.ma||(t.ma=(function(n,r,i){const a=at(n);return a.sa(),new oQ(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:hQ.bind(null,t),t_:pQ.bind(null,t),r_:gQ.bind(null,t),H_:mQ.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),JE(t)?ZE(t):t.Ra.set("Unknown")):(await t.ma.stop(),Y3(t))}))),t.ma}function tl(t){return t.fa||(t.fa=(function(n,r,i){const a=at(n);return a.sa(),new lQ(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:bQ.bind(null,t),r_:wQ.bind(null,t),ta:xQ.bind(null,t),na:_Q.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await jp(t)):(await t.fa.stop(),t.Ta.length>0&&(Te(Tc,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class eS{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new za,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const o=Date.now()+r,c=new eS(e,n,o,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ie(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tS(t,e){if(Nr("AsyncQueue",`${e}: ${t}`),ll(t))return new Ie(me.UNAVAILABLE,`${e}: ${t}`);throw t}class Qu{static emptySet(e){return new Qu(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||De.comparator(n.key,r.key):(n,r)=>De.comparator(n.key,r.key),this.keyedMap=oh(),this.sortedSet=new ln(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Qu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class KD{constructor(){this.ga=new ln(De.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Me(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Sd{constructor(e,n,r,i,a,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,a){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new Sd(e,n,Qu.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class SQ{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class TQ{constructor(){this.queries=XD(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=at(n),a=i.queries;i.queries=XD(),a.forEach(((o,c)=>{for(const u of c.Sa)u.onError(r)}))})(this,new Ie(me.ABORTED,"Firestore shutting down"))}}function XD(){return new Bs((t=>Q4(t)),Gv)}async function nS(t,e){const n=at(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new SQ,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=tS(o,`Initialization of query '${ku(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&iS(n)}async function rS(t,e){const n=at(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function AQ(t,e){const n=at(t);let r=!1;for(const i of e){const a=i.query,o=n.queries.get(a);if(o){for(const c of o.Sa)c.Fa(i)&&(r=!0);o.wa=i}}r&&iS(n)}function CQ(t,e,n){const r=at(t),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(n);r.queries.delete(e)}function iS(t){t.Ca.forEach((e=>{e.next()}))}var F_,WD;(WD=F_||(F_={})).Ma="default",WD.Cache="cache";class aS{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Sd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Sd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==F_.Cache}}class Q3{constructor(e){this.key=e}}class Z3{constructor(e){this.key=e}}class IQ{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ht(),this.mutatedKeys=ht(),this.eu=Z4(e),this.tu=new Qu(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new KD,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((h,g)=>{const m=i.get(h),x=Pp(this.query,g)?g:null,_=!!m&&this.mutatedKeys.has(m.key),E=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let S=!1;m&&x?m.data.isEqual(x.data)?_!==E&&(r.track({type:3,doc:x}),S=!0):this.su(m,x)||(r.track({type:2,doc:x}),S=!0,(u&&this.eu(x,u)>0||d&&this.eu(x,d)<0)&&(c=!0)):!m&&x?(r.track({type:0,doc:x}),S=!0):m&&!x&&(r.track({type:1,doc:m}),S=!0,(u||d)&&(c=!0)),S&&(x?(o=o.add(x),a=E?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:c,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,g)=>(function(x,_){const E=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Rt:S})}};return E(x)-E(_)})(h.type,g.type)||this.eu(h.doc,g.doc))),this.ou(r),i=i??!1;const c=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new Sd(this.query,e.tu,a,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new KD,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ht(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new Z3(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new Q3(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=ht();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Sd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sS="SyncEngine";class RQ{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class DQ{constructor(e){this.key=e,this.hu=!1}}class kQ{constructor(e,n,r,i,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Bs((c=>Q4(c)),Gv),this.Iu=new Map,this.Eu=new Set,this.du=new ln(De.comparator),this.Au=new Map,this.Ru=new HE,this.Vu={},this.mu=new Map,this.fu=Sc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function NQ(t,e,n=!0){const r=iV(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await J3(r,e,n,!0),i}async function MQ(t,e){const n=iV(t);await J3(n,e,!0,!1)}async function J3(t,e,n,r){const i=await JW(t.localStore,zi(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let c;return r&&(c=await PQ(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&H3(t.remoteStore,i),c}async function PQ(t,e,n,r,i){t.pu=(g,m,x)=>(async function(E,S,T,D){let R=S.view.ru(T);R.Cs&&(R=await FD(E.localStore,S.query,!1).then((({documents:A})=>S.view.ru(A,R))));const O=D&&D.targetChanges.get(S.targetId),L=D&&D.targetMismatches.get(S.targetId)!=null,j=S.view.applyChanges(R,E.isPrimaryClient,O,L);return ZD(E,S.targetId,j.au),j.snapshot})(t,g,m,x);const a=await FD(t.localStore,e,!0),o=new IQ(e,a.Qs),c=o.ru(a.documents),u=Op.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(c,t.isPrimaryClient,u);ZD(t,n,d.au);const h=new RQ(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function OQ(t,e,n){const r=at(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((o=>!Gv(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await B_(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&WE(r.remoteStore,i.targetId),G_(r,i.targetId)})).catch(kc)):(G_(r,i.targetId),await B_(r.localStore,i.targetId,!0))}async function VQ(t,e){const n=at(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),WE(n.remoteStore,r.targetId))}async function jQ(t,e,n){const r=aV(t);try{const i=await(function(o,c){const u=at(o),d=dt.now(),h=c.reduce(((x,_)=>x.add(_.key)),ht());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let _=di(),E=ht();return u.Ns.getEntries(x,h).next((S=>{_=S,_.forEach(((T,D)=>{D.isValidDocument()||(E=E.add(T))}))})).next((()=>u.localDocuments.getOverlayedDocuments(x,_))).next((S=>{g=S;const T=[];for(const D of c){const R=ZX(D,g.get(D.key).overlayedDocument);R!=null&&T.push(new Us(D.key,R,F4(R.value.mapValue),Er.exists(!0)))}return u.mutationQueue.addMutationBatch(x,d,T,c)})).next((S=>{m=S;const T=S.applyToLocalDocumentSet(g,E);return u.documentOverlayCache.saveOverlays(x,S.batchId,T)}))})).then((()=>({batchId:m.batchId,changes:e3(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,c,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new ln(rt)),d=d.insert(c,u),o.Vu[o.currentUser.toKey()]=d})(r,i.batchId,n),await zp(r,i.changes),await jp(r.remoteStore)}catch(i){const a=tS(i,"Failed to persist write");n.reject(a)}}async function eV(t,e){const n=at(t);try{const r=await WW(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const o=n.Au.get(a);o&&(ze(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ze(o.hu,14607):i.removedDocuments.size>0&&(ze(o.hu,42227),o.hu=!1))})),await zp(n,r,e)}catch(r){await kc(r)}}function QD(t,e,n){const r=at(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((a,o)=>{const c=o.view.va(e);c.snapshot&&i.push(c.snapshot)})),(function(o,c){const u=at(o);u.onlineState=c;let d=!1;u.queries.forEach(((h,g)=>{for(const m of g.Sa)m.va(c)&&(d=!0)})),d&&iS(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function zQ(t,e,n){const r=at(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let o=new ln(De.comparator);o=o.insert(a,xn.newNoDocument(a,qe.min()));const c=ht().add(a),u=new Yv(qe.min(),new Map,new ln(rt),o,c);await eV(r,u),r.du=r.du.remove(a),r.Au.delete(e),oS(r)}else await B_(r.localStore,e,!1).then((()=>G_(r,e,n))).catch(kc)}async function LQ(t,e){const n=at(t),r=e.batch.batchId;try{const i=await XW(n.localStore,e);nV(n,r,null),tV(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await zp(n,i)}catch(i){await kc(i)}}async function BQ(t,e,n){const r=at(t);try{const i=await(function(o,c){const u=at(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let h;return u.mutationQueue.lookupMutationBatch(d,c).next((g=>(ze(g!==null,37113),h=g.keys(),u.mutationQueue.removeMutationBatch(d,g)))).next((()=>u.mutationQueue.performConsistencyCheck(d))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h))).next((()=>u.localDocuments.getDocuments(d,h)))}))})(r.localStore,e);nV(r,e,n),tV(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await zp(r,i)}catch(i){await kc(i)}}function tV(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function nV(t,e,n){const r=at(t);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function G_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||rV(t,r)}))}function rV(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(WE(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),oS(t))}function ZD(t,e,n){for(const r of n)r instanceof Q3?(t.Ru.addReference(r.key,e),UQ(t,r)):r instanceof Z3?(Te(sS,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||rV(t,r.key)):Me(19791,{wu:r})}function UQ(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Te(sS,"New document in limbo: "+n),t.Eu.add(r),oS(t))}function oS(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new De(Mt.fromString(e)),r=t.fu.next();t.Au.set(r,new DQ(n)),t.du=t.du.insert(n,r),H3(t.remoteStore,new ws(zi(Mp(n.path)),r,"TargetPurposeLimboResolution",Oi.ce))}}async function zp(t,e,n){const r=at(t),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,u)=>{o.push(r.pu(u,e,n).then((d=>{if((d||n)&&r.isPrimaryClient){const h=d?!d.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(d){i.push(d);const h=KE.As(u.targetId,d);a.push(h)}})))})),await Promise.all(o),r.Pu.H_(i),await(async function(u,d){const h=at(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>ie.forEach(d,(m=>ie.forEach(m.Es,(x=>h.persistence.referenceDelegate.addReference(g,m.targetId,x))).next((()=>ie.forEach(m.ds,(x=>h.persistence.referenceDelegate.removeReference(g,m.targetId,x)))))))))}catch(g){if(!ll(g))throw g;Te(XE,"Failed to update sequence numbers: "+g)}for(const g of d){const m=g.targetId;if(!g.fromCache){const x=h.Ms.get(m),_=x.snapshotVersion,E=x.withLastLimboFreeSnapshotVersion(_);h.Ms=h.Ms.insert(m,E)}}})(r.localStore,a))}async function FQ(t,e){const n=at(t);if(!n.currentUser.isEqual(e)){Te(sS,"User change. New user:",e.toKey());const r=await B3(n.localStore,e);n.currentUser=e,(function(a,o){a.mu.forEach((c=>{c.forEach((u=>{u.reject(new Ie(me.CANCELLED,o))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await zp(n,r.Ls)}}function GQ(t,e){const n=at(t),r=n.Au.get(e);if(r&&r.hu)return ht().add(r.key);{let i=ht();const a=n.Iu.get(e);if(!a)return i;for(const o of a){const c=n.Tu.get(o);i=i.unionWith(c.view.nu)}return i}}function iV(t){const e=at(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GQ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zQ.bind(null,e),e.Pu.H_=AQ.bind(null,e.eventManager),e.Pu.yu=CQ.bind(null,e.eventManager),e}function aV(t){const e=at(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=LQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BQ.bind(null,e),e}class cp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qv(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return L3(this.persistence,new z3,e.initialUser,this.serializer)}Cu(e){return new $E(Wv.mi,this.serializer)}Du(e){return new F3}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cp.provider={build:()=>new cp};class qQ extends cp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ze(this.persistence.referenceDelegate instanceof Z0,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new M3(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?br.withCacheSize(this.cacheSizeBytes):br.DEFAULT;return new $E((r=>Z0.mi(r,n)),this.serializer)}}class HQ extends cp{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await aV(this.xu.syncEngine),await jp(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return L3(this.persistence,new z3,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new M3(r,e.asyncQueue,n)}Mu(e,n){const r=new WK(n,this.persistence);return new XK(e.asyncQueue,r)}Cu(e){const n=HW(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?br.withCacheSize(this.cacheSizeBytes):br.DEFAULT;return new YE(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,sQ(),c0(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new F3}}class ev{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>QD(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=FQ.bind(null,this.syncEngine),await EQ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new TQ})()}createDatastore(e){const n=Qv(e.databaseInfo.databaseId),r=(function(a){return new aQ(a)})(e.databaseInfo);return(function(a,o,c,u){return new uQ(a,o,c,u)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,o,c){return new fQ(r,i,a,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>QD(this.syncEngine,n,0)),(function(){return HD.v()?new HD:new tQ})())}createSyncEngine(e,n){return(function(i,a,o,c,u,d,h){const g=new kQ(i,a,o,c,u,d);return h&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=at(n);Te(Tc,"RemoteStore shutting down."),r.Ea.add(5),await Vp(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ev.provider={build:()=>new ev};class lS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Nr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const nl="FirestoreClient";class $Q{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=dr.UNAUTHENTICATED,this.clientId=AE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async o=>{Te(nl,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(Te(nl,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new za;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=tS(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function tx(t,e){t.asyncQueue.verifyOperationInProgress(),Te(nl,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await B3(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function JD(t,e){t.asyncQueue.verifyOperationInProgress();const n=await YQ(t);Te(nl,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>YD(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>YD(e.remoteStore,i))),t._onlineComponents=e}async function YQ(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Te(nl,"Using user provided OfflineComponentProvider");try{await tx(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===me.FAILED_PRECONDITION||i.code===me.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;bc("Error using user provided cache. Falling back to memory cache: "+n),await tx(t,new cp)}}else Te(nl,"Using default OfflineComponentProvider"),await tx(t,new qQ(void 0));return t._offlineComponents}async function sV(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Te(nl,"Using user provided OnlineComponentProvider"),await JD(t,t._uninitializedComponentsProvider._online)):(Te(nl,"Using default OnlineComponentProvider"),await JD(t,new ev))),t._onlineComponents}function KQ(t){return sV(t).then((e=>e.syncEngine))}async function tv(t){const e=await sV(t),n=e.eventManager;return n.onListen=NQ.bind(null,e.syncEngine),n.onUnlisten=OQ.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=MQ.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=VQ.bind(null,e.syncEngine),n}function XQ(t,e,n={}){const r=new za;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,d){const h=new lS({next:m=>{h.Nu(),o.enqueueAndForget((()=>rS(a,g)));const x=m.docs.has(c);!x&&m.fromCache?d.reject(new Ie(me.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&m.fromCache&&u&&u.source==="server"?d.reject(new Ie(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new aS(Mp(c.path),h,{includeMetadataChanges:!0,qa:!0});return nS(a,g)})(await tv(t),t.asyncQueue,e,n,r))),r.promise}function WQ(t,e,n={}){const r=new za;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,d){const h=new lS({next:m=>{h.Nu(),o.enqueueAndForget((()=>rS(a,g))),m.fromCache&&u.source==="server"?d.reject(new Ie(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new aS(c,h,{includeMetadataChanges:!0,qa:!0});return nS(a,g)})(await tv(t),t.asyncQueue,e,n,r))),r.promise}function oV(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const ek=new Map;const lV="firestore.googleapis.com",tk=!0;class nk{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ie(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lV,this.ssl=tk}else this.host=e.host,this.ssl=e.ssl??tk;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=R3;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<IW)throw new Ie(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HK("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oV(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ie(me.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ie(me.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ie(me.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jv{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nk({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ie(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ie(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nk(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new OK;switch(r.type){case"firstParty":return new LK(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ie(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=ek.get(n);r&&(Te("ComponentProvider","Removing Datastore"),ek.delete(n),r.terminate())})(this),Promise.resolve()}}function QQ(t,e,n,r={}){t=Or(t,Jv);const i=jd(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;i&&(WO(`https://${c}`),QO("Firestore",!0)),a.host!==lV&&a.host!==c&&bc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...a,host:c,ssl:i,emulatorOptions:r};if(!mc(u,o)&&(t._setSettings(u),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=dr.MOCK_USER;else{d=dY(r.mockUserToken,t._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Ie(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new dr(g)}t._authCredentials=new VK(new g4(d,h))}}class Fs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fs(this.firestore,e,this._query)}}class _n{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $o(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _n(this.firestore,e,this._key)}toJSON(){return{type:_n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Dp(n,_n._jsonSchema))return new _n(e,r||null,new De(Mt.fromString(n.referencePath)))}}_n._jsonSchemaVersion="firestore/documentReference/1.0",_n._jsonSchema={type:Un("string",_n._jsonSchemaVersion),referencePath:Un("string")};class $o extends Fs{constructor(e,n,r){super(e,n,Mp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _n(this.firestore,null,new De(e))}withConverter(e){return new $o(this.firestore,e,this._path)}}function xr(t,e,...n){if(t=gn(t),v4("collection","path",e),t instanceof Jv){const r=Mt.fromString(e,...n);return $R(r),new $o(t,null,r)}{if(!(t instanceof _n||t instanceof $o))throw new Ie(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Mt.fromString(e,...n));return $R(r),new $o(t.firestore,null,r)}}function Jt(t,e,...n){if(t=gn(t),arguments.length===1&&(e=AE.newId()),v4("doc","path",e),t instanceof Jv){const r=Mt.fromString(e,...n);return HR(r),new _n(t,null,new De(r))}{if(!(t instanceof _n||t instanceof $o))throw new Ie(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Mt.fromString(e,...n));return HR(r),new _n(t.firestore,t instanceof $o?t.converter:null,new De(r))}}const rk="AsyncQueue";class ik{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new G3(this,"async_queue_retry"),this._c=()=>{const r=c0();r&&Te(rk,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=c0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=c0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new za;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ll(e))throw e;Te(rk,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Nr("INTERNAL UNHANDLED ERROR: ",ak(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=eS.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Me(47125,{Pc:ak(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function ak(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function sk(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class $a extends Jv{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ik,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ik(e),this._firestoreClient=void 0,await e}}}function ZQ(t,e){const n=typeof t=="object"?t:a4(),r=typeof t=="string"?t:G0,i=SE(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=cY("firestore");a&&QQ(i,...a)}return i}function ey(t){if(t._terminated)throw new Ie(me.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||cV(t),t._firestoreClient}function cV(t){const e=t._freezeSettings(),n=(function(i,a,o,c){return new TX(i,a,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,oV(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new $Q(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(t._componentsProvider))}function JQ(t,e){bc("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return eZ(t,ev.provider,{build:r=>new HQ(r,n.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function eZ(t,e,n){if((t=Or(t,$a))._firestoreClient||t._terminated)throw new Ie(me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Ie(me.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},cV(t)}class Mi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mi(Gn.fromBase64String(e))}catch(n){throw new Ie(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Mi(Gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Mi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dp(e,Mi._jsonSchema))return Mi.fromBase64String(e.bytes)}}Mi._jsonSchemaVersion="firestore/bytes/1.0",Mi._jsonSchema={type:Un("string",Mi._jsonSchemaVersion),bytes:Un("string")};class ty{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ie(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class cS{constructor(e){this._methodName=e}}class La{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ie(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ie(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:La._jsonSchemaVersion}}static fromJSON(e){if(Dp(e,La._jsonSchema))return new La(e.latitude,e.longitude)}}La._jsonSchemaVersion="firestore/geoPoint/1.0",La._jsonSchema={type:Un("string",La._jsonSchemaVersion),latitude:Un("number"),longitude:Un("number")};class Ba{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ba._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dp(e,Ba._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ba(e.vectorValues);throw new Ie(me.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ba._jsonSchemaVersion="firestore/vectorValue/1.0",Ba._jsonSchema={type:Un("string",Ba._jsonSchemaVersion),vectorValues:Un("object")};const tZ=/^__.*__$/;class nZ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Us(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ud(e,this.data,n,this.fieldTransforms)}}class uV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Us(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function dV(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ac:t})}}class uS{constructor(e,n,r,i,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new uS({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return nv(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(dV(this.Ac)&&tZ.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class rZ{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Qv(e)}Cc(e,n,r,i=!1){return new uS({Ac:e,methodName:n,Dc:r,path:hn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ny(t){const e=t._freezeSettings(),n=Qv(t._databaseId);return new rZ(t._databaseId,!!e.ignoreUndefinedProperties,n)}function fV(t,e,n,r,i,a={}){const o=t.Cc(a.merge||a.mergeFields?2:0,e,n,i);dS("Data must be an object, but it was:",o,r);const c=hV(r,o);let u,d;if(a.merge)u=new Kr(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const g of a.mergeFields){const m=q_(e,g,n);if(!o.contains(m))throw new Ie(me.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);gV(h,m)||h.push(m)}u=new Kr(h),d=o.fieldTransforms.filter((g=>u.covers(g.field)))}else u=null,d=o.fieldTransforms;return new nZ(new _r(c),u,d)}class ry extends cS{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ry}}function iZ(t,e,n,r){const i=t.Cc(1,e,n);dS("Data must be an object, but it was:",i,r);const a=[],o=_r.empty();cl(r,((u,d)=>{const h=fS(e,u,n);d=gn(d);const g=i.yc(h);if(d instanceof ry)a.push(h);else{const m=Lp(d,g);m!=null&&(a.push(h),o.set(h,m))}}));const c=new Kr(a);return new uV(o,c,i.fieldTransforms)}function aZ(t,e,n,r,i,a){const o=t.Cc(1,e,n),c=[q_(e,r,n)],u=[i];if(a.length%2!=0)throw new Ie(me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)c.push(q_(e,a[m])),u.push(a[m+1]);const d=[],h=_r.empty();for(let m=c.length-1;m>=0;--m)if(!gV(d,c[m])){const x=c[m];let _=u[m];_=gn(_);const E=o.yc(x);if(_ instanceof ry)d.push(x);else{const S=Lp(_,E);S!=null&&(d.push(x),h.set(x,S))}}const g=new Kr(d);return new uV(h,g,o.fieldTransforms)}function sZ(t,e,n,r=!1){return Lp(n,t.Cc(r?4:3,e))}function Lp(t,e){if(pV(t=gn(t)))return dS("Unsupported field value:",e,t),hV(t,e);if(t instanceof cS)return(function(r,i){if(!dV(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let o=0;for(const c of r){let u=Lp(c,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=gn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return HX(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=dt.fromDate(r);return{timestampValue:Ed(i.serializer,a)}}if(r instanceof dt){const a=new dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ed(i.serializer,a)}}if(r instanceof La)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mi)return{bytesValue:h3(i.serializer,r._byteString)};if(r instanceof _n){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:FE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ba)return(function(o,c){return{mapValue:{fields:{[PE]:{stringValue:OE},[vd]:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return jE(c.serializer,d)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Ov(r)}`)})(t,e)}function hV(t,e){const n={};return M4(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cl(t,((r,i)=>{const a=Lp(i,e.mc(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function pV(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof dt||t instanceof La||t instanceof Mi||t instanceof _n||t instanceof cS||t instanceof Ba)}function dS(t,e,n){if(!pV(n)||!y4(n)){const r=Ov(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function q_(t,e,n){if((e=gn(e))instanceof ty)return e._internalPath;if(typeof e=="string")return fS(t,e);throw nv("Field path arguments must be of type string or ",t,!1,void 0,n)}const oZ=new RegExp("[~\\*/\\[\\]]");function fS(t,e,n){if(e.search(oZ)>=0)throw nv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ty(...e.split("."))._internalPath}catch{throw nv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nv(t,e,n,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Ie(me.INVALID_ARGUMENT,c+t+u)}function gV(t,e){return t.some((n=>n.isEqual(e)))}class mV{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new _n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lZ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(iy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class lZ extends mV{data(){return super.data()}}function iy(t,e){return typeof e=="string"?fS(t,e):e instanceof ty?e._internalPath:e._delegate._internalPath}function vV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ie(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hS{}class pS extends hS{}function Xr(t,e,...n){let r=[];e instanceof hS&&r.push(e),r=r.concat(n),(function(a){const o=a.filter((u=>u instanceof gS)).length,c=a.filter((u=>u instanceof ay)).length;if(o>1||o>0&&c>0)throw new Ie(me.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class ay extends pS{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ay(e,n,r)}_apply(e){const n=this._parse(e);return yV(e._query,n),new Fs(e.firestore,e.converter,N_(e._query,n))}_parse(e){const n=ny(e.firestore);return(function(a,o,c,u,d,h,g){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Ie(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){ck(g,h);const _=[];for(const E of g)_.push(lk(u,a,E));m={arrayValue:{values:_}}}else m=lk(u,a,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||ck(g,h),m=sZ(c,o,g,h==="in"||h==="not-in");return wt.create(d,h,m)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function $u(t,e,n){const r=e,i=iy("where",t);return ay._create(i,r,n)}class gS extends hS{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new gS(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Ut.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)yV(o,u),o=N_(o,u)})(e._query,n),new Fs(e.firestore,e.converter,N_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class mS extends pS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new mS(e,n)}_apply(e){const n=(function(i,a,o){if(i.startAt!==null)throw new Ie(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ie(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sp(a,o)})(e._query,this._field,this._direction);return new Fs(e.firestore,e.converter,(function(i,a){const o=i.explicitOrderBy.concat([a]);return new Bd(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function Td(t,e="asc"){const n=e,r=iy("orderBy",t);return mS._create(r,n)}class vS extends pS{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new vS(e,n,r)}_apply(e){return new Fs(e.firestore,e.converter,$0(e._query,this._limit,this._limitType))}}function ok(t){return vS._create("limit",t,"F")}function lk(t,e,n){if(typeof(n=gn(n))=="string"){if(n==="")throw new Ie(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!W4(e)&&n.indexOf("/")!==-1)throw new Ie(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Mt.fromString(n));if(!De.isDocumentKey(r))throw new Ie(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ip(t,new De(r))}if(n instanceof _n)return ip(t,n._key);throw new Ie(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ov(n)}.`)}function ck(t,e){if(!Array.isArray(t)||t.length===0)throw new Ie(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yV(t,e){const n=(function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ie(me.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ie(me.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class cZ{convertValue(e,n="none"){switch(Jo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return cl(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[vd].arrayValue?.values?.map((r=>sn(r.doubleValue)));return new Ba(n)}convertGeoPoint(e){return new La(sn(e.latitude),sn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Uv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(np(e));default:return null}}convertTimestamp(e){const n=Vs(e);return new dt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Mt.fromString(e);ze(E3(r),9688,{name:e});const i=new xc(r.get(1),r.get(3)),a=new De(r.popFirst(5));return i.isEqual(n)||Nr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}function bV(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class uh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lc extends mV{constructor(e,n,r,i,a,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new u0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(iy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(me.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=lc._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}lc._jsonSchemaVersion="firestore/documentSnapshot/1.0",lc._jsonSchema={type:Un("string",lc._jsonSchemaVersion),bundleSource:Un("string","DocumentSnapshot"),bundleName:Un("string"),bundle:Un("string")};class u0 extends lc{data(e={}){return super.data(e)}}class cc{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new uh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new u0(this._firestore,this._userDataWriter,r.key,r,new uh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ie(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((c=>{const u=new u0(i._firestore,i._userDataWriter,c.doc.key,c.doc,new uh(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const u=new u0(i._firestore,i._userDataWriter,c.doc.key,c.doc,new uh(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),h=o.indexOf(c.doc.key)),{type:uZ(c.type),doc:u,oldIndex:d,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(me.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=cc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=AE.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function uZ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:t})}}function dZ(t){t=Or(t,_n);const e=Or(t.firestore,$a);return XQ(ey(e),t._key).then((n=>xV(e,t,n)))}cc._jsonSchemaVersion="firestore/querySnapshot/1.0",cc._jsonSchema={type:Un("string",cc._jsonSchemaVersion),bundleSource:Un("string","QuerySnapshot"),bundleName:Un("string"),bundle:Un("string")};class yS extends cZ{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _n(this.firestore,null,n)}}function Ma(t){t=Or(t,Fs);const e=Or(t.firestore,$a),n=ey(e),r=new yS(e);return vV(t._query),WQ(n,t._query).then((i=>new cc(e,r,t,i)))}function na(t,e,n){t=Or(t,_n);const r=Or(t.firestore,$a),i=bV(t.converter,e,n);return oy(r,[fV(ny(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Er.none())])}function sy(t,e,n,...r){t=Or(t,_n);const i=Or(t.firestore,$a),a=ny(i);let o;return o=typeof(e=gn(e))=="string"||e instanceof ty?aZ(a,"updateDoc",t._key,e,n,r):iZ(a,"updateDoc",t._key,e),oy(i,[o.toMutation(t._key,Er.exists(!0))])}function rl(t){return oy(Or(t.firestore,$a),[new $v(t._key,Er.none())])}function Ad(t,e){const n=Or(t.firestore,$a),r=Jt(t),i=bV(t.converter,e);return oy(n,[fV(ny(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Er.exists(!1))]).then((()=>r))}function uc(t,...e){t=gn(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||sk(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(sk(e[r])){const u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let a,o,c;if(t instanceof _n)o=Or(t.firestore,$a),c=Mp(t._key.path),a={next:u=>{e[r]&&e[r](xV(o,t,u))},error:e[r+1],complete:e[r+2]};else{const u=Or(t,Fs);o=Or(u.firestore,$a),c=u._query;const d=new yS(o);a={next:h=>{e[r]&&e[r](new cc(o,d,u,h))},error:e[r+1],complete:e[r+2]},vV(t._query)}return(function(d,h,g,m){const x=new lS(m),_=new aS(h,x,g);return d.asyncQueue.enqueueAndForget((async()=>nS(await tv(d),_))),()=>{x.Nu(),d.asyncQueue.enqueueAndForget((async()=>rS(await tv(d),_)))}})(ey(o),c,i,a)}function oy(t,e){return(function(r,i){const a=new za;return r.asyncQueue.enqueueAndForget((async()=>jQ(await KQ(r),i,a))),a.promise})(ey(t),e)}function xV(t,e,n){const r=n.docs.get(e._key),i=new yS(t);return new lc(t,i,e._key,r,new uh(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Ld=i})(zd),dd(new vc("firestore",((r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new $a(new jK(r.getProvider("auth-internal")),new BK(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ie(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xc(d.options.projectId,h)})(o,i),o);return a={useFetchStreams:n,...a},c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),Go(UR,FR,e),Go(UR,FR,"esm2020")})();var fZ="firebase",hZ="12.6.0";Go(fZ,hZ,"app");function _V(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pZ=_V,wV=new Ip("auth","Firebase",_V());const rv=new wE("@firebase/auth");function gZ(t,...e){rv.logLevel<=_t.WARN&&rv.warn(`Auth (${zd}): ${t}`,...e)}function d0(t,...e){rv.logLevel<=_t.ERROR&&rv.error(`Auth (${zd}): ${t}`,...e)}function ua(t,...e){throw bS(t,...e)}function Ua(t,...e){return bS(t,...e)}function EV(t,e,n){const r={...pZ(),[e]:n};return new Ip("auth","Firebase",r).create(e,{appName:t.name})}function Rs(t){return EV(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bS(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return wV.create(t,...e)}function Je(t,e,...n){if(!t)throw bS(e,...n)}function Es(t){const e="INTERNAL ASSERTION FAILED: "+t;throw d0(e),new Error(e)}function zs(t,e){t||Es(e)}function H_(){return typeof self<"u"&&self.location?.href||""}function mZ(){return uk()==="http:"||uk()==="https:"}function uk(){return typeof self<"u"&&self.location?.protocol||null}function vZ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mZ()||mY()||"connection"in navigator)?navigator.onLine:!0}function yZ(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Bp{constructor(e,n){this.shortDelay=e,this.longDelay=n,zs(n>e,"Short delay should be less than long delay!"),this.isMobile=pY()||vY()}get(){return vZ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function xS(t,e){zs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class SV{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Es("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Es("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Es("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const bZ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const xZ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_Z=new Bp(3e4,6e4);function Gs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Za(t,e,n,r,i={}){return TV(t,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=Rp({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...a};return gY()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&jd(t.emulatorConfig.host)&&(d.credentials="include"),SV.fetch()(await AV(t,t.config.apiHost,n,c),d)})}async function TV(t,e,n){t._canInitEmulator=!1;const r={...bZ,...e};try{const i=new EZ(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Fm(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fm(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Fm(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Fm(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw EV(t,h,d);ua(t,h)}}catch(i){if(i instanceof Ls)throw i;ua(t,"network-request-failed",{message:String(i)})}}async function Up(t,e,n,r,i={}){const a=await Za(t,e,n,r,i);return"mfaPendingCredential"in a&&ua(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function AV(t,e,n,r){const i=`${e}${n}?${r}`,a=t,o=a.config.emulator?xS(t.config,i):`${t.config.apiScheme}://${i}`;return xZ.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function wZ(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class EZ{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ua(this.auth,"network-request-failed")),_Z.get())})}}function Fm(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ua(t,e,r);return i.customData._tokenResponse=n,i}function dk(t){return t!==void 0&&t.enterprise!==void 0}class SZ{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return wZ(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function TZ(t,e){return Za(t,"GET","/v2/recaptchaConfig",Gs(t,e))}async function AZ(t,e){return Za(t,"POST","/v1/accounts:delete",e)}async function iv(t,e){return Za(t,"POST","/v1/accounts:lookup",e)}function kh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function CZ(t,e=!1){const n=gn(t),r=await n.getIdToken(e),i=_S(r);Je(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:kh(nx(i.auth_time)),issuedAtTime:kh(nx(i.iat)),expirationTime:kh(nx(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function nx(t){return Number(t)*1e3}function _S(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return d0("JWT malformed, contained fewer than 3 sections"),null;try{const i=HO(n);return i?JSON.parse(i):(d0("Failed to decode base64 JWT payload"),null)}catch(i){return d0("Caught error parsing JWT payload as JSON",i?.toString()),null}}function fk(t){const e=_S(t);return Je(e,"internal-error"),Je(typeof e.exp<"u","internal-error"),Je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Cd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ls&&IZ(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function IZ({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class RZ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class $_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=kh(this.lastLoginAt),this.creationTime=kh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function av(t){const e=t.auth,n=await t.getIdToken(),r=await Cd(t,iv(e,{idToken:n}));Je(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?CV(i.providerUserInfo):[],o=kZ(t.providerData,a),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!o?.length,d=c?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new $_(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function DZ(t){const e=gn(t);await av(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kZ(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function CV(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function NZ(t,e){const n=await TV(t,{},async()=>{const r=Rp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=await AV(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&jd(t.emulatorConfig.host)&&(u.credentials="include"),SV.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function MZ(t,e){return Za(t,"POST","/v2/accounts:revokeToken",Gs(t,e))}class Zu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Je(e.idToken,"internal-error"),Je(typeof e.idToken<"u","internal-error"),Je(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Je(e.length!==0,"internal-error");const n=fk(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await NZ(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new Zu;return r&&(Je(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Je(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(Je(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zu,this.toJSON())}_performRefresh(){return Es("not implemented")}}function Co(t,e){Je(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ra{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new RZ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new $_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Cd(this,this.stsTokenManager.getToken(this.auth,e));return Je(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return CZ(this,e)}reload(){return DZ(this)}_assign(e){this!==e&&(Je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ra({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await av(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ni(this.auth.app))return Promise.reject(Rs(this.auth));const e=await this.getIdToken();return await Cd(this,AZ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:x,providerData:_,stsTokenManager:E}=n;Je(g&&E,e,"internal-error");const S=Zu.fromJSON(this.name,E);Je(typeof g=="string",e,"internal-error"),Co(r,e.name),Co(i,e.name),Je(typeof m=="boolean",e,"internal-error"),Je(typeof x=="boolean",e,"internal-error"),Co(a,e.name),Co(o,e.name),Co(c,e.name),Co(u,e.name),Co(d,e.name),Co(h,e.name);const T=new ra({uid:g,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:x,photoURL:o,phoneNumber:a,tenantId:c,stsTokenManager:S,createdAt:d,lastLoginAt:h});return _&&Array.isArray(_)&&(T.providerData=_.map(D=>({...D}))),u&&(T._redirectEventId=u),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new Zu;i.updateFromServerResponse(n);const a=new ra({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await av(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Je(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?CV(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!a?.length,c=new Zu;c.updateFromIdToken(r);const u=new ra({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new $_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(u,d),u}}const hk=new Map;function Ss(t){zs(t instanceof Function,"Expected a class definition");let e=hk.get(t);return e?(zs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,hk.set(t,e),e)}class IV{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}IV.type="NONE";const pk=IV;function f0(t,e,n){return`firebase:${t}:${e}:${n}`}class Ju{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=f0(this.userKey,i.apiKey,a),this.fullPersistenceKey=f0("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await iv(this.auth,{idToken:e}).catch(()=>{});return n?ra._fromGetAccountInfoResponse(this.auth,n,e):null}return ra._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ju(Ss(pk),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||Ss(pk);const o=f0(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const h=await d._get(o);if(h){let g;if(typeof h=="string"){const m=await iv(e,{idToken:h}).catch(()=>{});if(!m)break;g=await ra._fromGetAccountInfoResponse(e,m,h)}else g=ra._fromJSON(e,h);d!==a&&(c=g),a=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new Ju(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new Ju(a,e,r))}}function gk(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(PV(e))return"Blackberry";if(OV(e))return"Webos";if(DV(e))return"Safari";if((e.includes("chrome/")||kV(e))&&!e.includes("edge/"))return"Chrome";if(MV(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function RV(t=Qn()){return/firefox\//i.test(t)}function DV(t=Qn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kV(t=Qn()){return/crios\//i.test(t)}function NV(t=Qn()){return/iemobile/i.test(t)}function MV(t=Qn()){return/android/i.test(t)}function PV(t=Qn()){return/blackberry/i.test(t)}function OV(t=Qn()){return/webos/i.test(t)}function wS(t=Qn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function PZ(t=Qn()){return wS(t)&&!!window.navigator?.standalone}function OZ(){return yY()&&document.documentMode===10}function VV(t=Qn()){return wS(t)||MV(t)||OV(t)||PV(t)||/windows phone/i.test(t)||NV(t)}function jV(t,e=[]){let n;switch(t){case"Browser":n=gk(Qn());break;case"Worker":n=`${gk(Qn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zd}/${r}`}class VZ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function jZ(t,e={}){return Za(t,"GET","/v2/passwordPolicy",Gs(t,e))}const zZ=6;class LZ{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??zZ,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class BZ{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mk(this),this.idTokenSubscription=new mk(this),this.beforeStateQueue=new VZ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ss(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ju.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await iv(this,{idToken:e}),r=await ra._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ni(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await av(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yZ()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ni(this.app))return Promise.reject(Rs(this));const n=e?gn(e):null;return n&&Je(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ni(this.app)?Promise.reject(Rs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ni(this.app)?Promise.reject(Rs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ss(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jZ(this),n=new LZ(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ip("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await MZ(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ss(e)||this._popupRedirectResolver;Je(n,this,"argument-error"),this.redirectPersistenceManager=await Ju.create(this,[Ss(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Je(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Ni(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&gZ(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ul(t){return gn(t)}class mk{constructor(e){this.auth=e,this.observer=null,this.addObserver=SY(n=>this.observer=n)}get next(){return Je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ly={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UZ(t){ly=t}function zV(t){return ly.loadJS(t)}function FZ(){return ly.recaptchaEnterpriseScript}function GZ(){return ly.gapiScript}function qZ(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class HZ{constructor(){this.enterprise=new $Z}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class $Z{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const YZ="recaptcha-enterprise",LV="NO_RECAPTCHA";class KZ{constructor(e){this.type=YZ,this.auth=ul(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{TZ(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new SZ(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function i(a,o,c){const u=window.grecaptcha;dk(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(LV)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new HZ().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(c=>{if(!n&&dk(window.grecaptcha))i(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=FZ();u.length!==0&&(u+=c),zV(u).then(()=>{i(c,a,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function vk(t,e,n,r=!1,i=!1){const a=new KZ(t);let o;if(i)o=LV;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function sv(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await vk(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await vk(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}function XZ(t,e){const n=SE(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(mc(a,e??{}))return i;ua(i,"already-initialized")}return n.initialize({options:e})}function WZ(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ss);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function QZ(t,e,n){const r=ul(t);Je(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=BV(e),{host:o,port:c}=ZZ(e),u=c===null?"":`:${c}`,d={url:`${a}//${o}${u}/`},h=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Je(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Je(mc(d,r.config.emulator)&&mc(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,jd(o)?(WO(`${a}//${o}${u}`),QO("Auth",!0)):JZ()}function BV(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ZZ(t){const e=BV(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:yk(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:yk(o)}}}function yk(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function JZ(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class ES{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Es("not implemented")}_getIdTokenResponse(e){return Es("not implemented")}_linkToIdToken(e,n){return Es("not implemented")}_getReauthenticationResolver(e){return Es("not implemented")}}async function eJ(t,e){return Za(t,"POST","/v1/accounts:signUp",e)}async function tJ(t,e){return Up(t,"POST","/v1/accounts:signInWithPassword",Gs(t,e))}async function UV(t,e){return Za(t,"POST","/v1/accounts:sendOobCode",Gs(t,e))}async function nJ(t,e){return UV(t,e)}async function rJ(t,e){return UV(t,e)}async function iJ(t,e){return Up(t,"POST","/v1/accounts:signInWithEmailLink",Gs(t,e))}async function aJ(t,e){return Up(t,"POST","/v1/accounts:signInWithEmailLink",Gs(t,e))}class up extends ES{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new up(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new up(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sv(e,n,"signInWithPassword",tJ);case"emailLink":return iJ(e,{email:this._email,oobCode:this._password});default:ua(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sv(e,r,"signUpPassword",eJ);case"emailLink":return aJ(e,{idToken:n,email:this._email,oobCode:this._password});default:ua(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ed(t,e){return Up(t,"POST","/v1/accounts:signInWithIdp",Gs(t,e))}const sJ="http://localhost";class Ac extends ES{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ac(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ua("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const o=new Ac(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ed(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ed(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ed(e,n)}buildRequest(){const e={requestUri:sJ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Rp(n)}return e}}function oJ(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lJ(t){const e=ih(ah(t)).link,n=e?ih(ah(e)).deep_link_id:null,r=ih(ah(t)).deep_link_id;return(r?ih(ah(r)).link:null)||r||n||e||t}class SS{constructor(e){const n=ih(ah(e)),r=n.apiKey??null,i=n.oobCode??null,a=oJ(n.mode??null);Je(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=lJ(e);try{return new SS(n)}catch{return null}}}class Mc{constructor(){this.providerId=Mc.PROVIDER_ID}static credential(e,n){return up._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=SS.parseLink(n);return Je(r,"argument-error"),up._fromEmailAndCode(e,r.code,r.tenantId)}}Mc.PROVIDER_ID="password";Mc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Mc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class FV{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Fp extends FV{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class No extends Fp{constructor(){super("facebook.com")}static credential(e){return Ac._fromParams({providerId:No.PROVIDER_ID,signInMethod:No.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return No.credentialFromTaggedObject(e)}static credentialFromError(e){return No.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return No.credential(e.oauthAccessToken)}catch{return null}}}No.FACEBOOK_SIGN_IN_METHOD="facebook.com";No.PROVIDER_ID="facebook.com";class Mo extends Fp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ac._fromParams({providerId:Mo.PROVIDER_ID,signInMethod:Mo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Mo.credentialFromTaggedObject(e)}static credentialFromError(e){return Mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Mo.credential(n,r)}catch{return null}}}Mo.GOOGLE_SIGN_IN_METHOD="google.com";Mo.PROVIDER_ID="google.com";class Po extends Fp{constructor(){super("github.com")}static credential(e){return Ac._fromParams({providerId:Po.PROVIDER_ID,signInMethod:Po.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Po.credentialFromTaggedObject(e)}static credentialFromError(e){return Po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Po.credential(e.oauthAccessToken)}catch{return null}}}Po.GITHUB_SIGN_IN_METHOD="github.com";Po.PROVIDER_ID="github.com";class Oo extends Fp{constructor(){super("twitter.com")}static credential(e,n){return Ac._fromParams({providerId:Oo.PROVIDER_ID,signInMethod:Oo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Oo.credentialFromTaggedObject(e)}static credentialFromError(e){return Oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Oo.credential(n,r)}catch{return null}}}Oo.TWITTER_SIGN_IN_METHOD="twitter.com";Oo.PROVIDER_ID="twitter.com";async function cJ(t,e){return Up(t,"POST","/v1/accounts:signUp",Gs(t,e))}class Cc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await ra._fromIdTokenResponse(e,r,i),o=bk(r);return new Cc({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=bk(r);return new Cc({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function bk(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class ov extends Ls{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ov.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ov(e,n,r,i)}}function GV(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?ov._fromErrorAndOperation(t,a,e,r):a})}async function uJ(t,e,n=!1){const r=await Cd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Cc._forOperation(t,"link",r)}async function qV(t,e,n=!1){const{auth:r}=t;if(Ni(r.app))return Promise.reject(Rs(r));const i="reauthenticate";try{const a=await Cd(t,GV(r,i,e,t),n);Je(a.idToken,r,"internal-error");const o=_S(a.idToken);Je(o,r,"internal-error");const{sub:c}=o;return Je(t.uid===c,r,"user-mismatch"),Cc._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&ua(r,"user-mismatch"),a}}async function HV(t,e,n=!1){if(Ni(t.app))return Promise.reject(Rs(t));const r="signIn",i=await GV(t,r,e),a=await Cc._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function dJ(t,e){return HV(ul(t),e)}async function fJ(t,e){return qV(gn(t),e)}async function $V(t){const e=ul(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function hJ(t,e,n){const r=ul(t);await sv(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",rJ)}async function pJ(t,e,n){if(Ni(t.app))return Promise.reject(Rs(t));const r=ul(t),o=await sv(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cJ).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&$V(t),u}),c=await Cc._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function gJ(t,e,n){return Ni(t.app)?Promise.reject(Rs(t)):dJ(gn(t),Mc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&$V(t),r})}async function xk(t,e){const n=gn(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:a}=await nJ(n.auth,i);a!==t.email&&await t.reload()}async function mJ(t,e){return Za(t,"POST","/v1/accounts:update",e)}async function vJ(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=gn(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Cd(r,mJ(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function yJ(t,e,n,r){return gn(t).onIdTokenChanged(e,n,r)}function bJ(t,e,n){return gn(t).beforeAuthStateChanged(e,n)}function xJ(t,e,n,r){return gn(t).onAuthStateChanged(e,n,r)}function _k(t){return gn(t).signOut()}async function _J(t){return gn(t).delete()}const lv="__sak";class YV{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(lv,"1"),this.storage.removeItem(lv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const wJ=1e3,EJ=10;class KV extends YV{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VV(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);OZ()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,EJ):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},wJ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}KV.type="LOCAL";const SJ=KV;class XV extends YV{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}XV.type="SESSION";const WV=XV;function TJ(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class cy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new cy(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,o=this.handlersMap[i];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async d=>d(n.origin,a)),u=await TJ(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cy.receivers=[];function TS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class AJ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const d=TS("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const m=g;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(m.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Fa(){return window}function CJ(t){Fa().location.href=t}function QV(){return typeof Fa().WorkerGlobalScope<"u"&&typeof Fa().importScripts=="function"}async function IJ(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RJ(){return navigator?.serviceWorker?.controller||null}function DJ(){return QV()?self:null}const ZV="firebaseLocalStorageDb",kJ=1,cv="firebaseLocalStorage",JV="fbase_key";class Gp{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function uy(t,e){return t.transaction([cv],e?"readwrite":"readonly").objectStore(cv)}function NJ(){const t=indexedDB.deleteDatabase(ZV);return new Gp(t).toPromise()}function Y_(){const t=indexedDB.open(ZV,kJ);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(cv,{keyPath:JV})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(cv)?e(r):(r.close(),await NJ(),e(await Y_()))})})}async function wk(t,e,n){const r=uy(t,!0).put({[JV]:e,value:n});return new Gp(r).toPromise()}async function MJ(t,e){const n=uy(t,!1).get(e),r=await new Gp(n).toPromise();return r===void 0?null:r.value}function Ek(t,e){const n=uy(t,!0).delete(e);return new Gp(n).toPromise()}const PJ=800,OJ=3;class ej{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Y_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>OJ)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return QV()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cy._getInstance(DJ()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await IJ(),!this.activeServiceWorker)return;this.sender=new AJ(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||RJ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Y_();return await wk(e,lv,"1"),await Ek(e,lv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>wk(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>MJ(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ek(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=uy(i,!1).getAll();return new Gp(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PJ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ej.type="LOCAL";const VJ=ej;new Bp(3e4,6e4);function jJ(t,e){return e?Ss(e):(Je(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class AS extends ES{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ed(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ed(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ed(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function zJ(t){return HV(t.auth,new AS(t),t.bypassAuthState)}function LJ(t){const{auth:e,user:n}=t;return Je(n,e,"internal-error"),qV(n,new AS(t),t.bypassAuthState)}async function BJ(t){const{auth:e,user:n}=t;return Je(n,e,"internal-error"),uJ(n,new AS(t),t.bypassAuthState)}class tj{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zJ;case"linkViaPopup":case"linkViaRedirect":return BJ;case"reauthViaPopup":case"reauthViaRedirect":return LJ;default:ua(this.auth,"internal-error")}}resolve(e){zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const UJ=new Bp(2e3,1e4);class Yu extends tj{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Yu.currentPopupAction&&Yu.currentPopupAction.cancel(),Yu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Je(e,this.auth,"internal-error"),e}async onExecution(){zs(this.filter.length===1,"Popup operations only handle one event");const e=TS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ua(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ua(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yu.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ua(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,UJ.get())};e()}}Yu.currentPopupAction=null;const FJ="pendingRedirect",h0=new Map;class GJ extends tj{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=h0.get(this.auth._key());if(!e){try{const r=await qJ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}h0.set(this.auth._key(),e)}return this.bypassAuthState||h0.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qJ(t,e){const n=YJ(e),r=$J(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function HJ(t,e){h0.set(t._key(),e)}function $J(t){return Ss(t._redirectPersistence)}function YJ(t){return f0(FJ,t.config.apiKey,t.name)}async function KJ(t,e,n=!1){if(Ni(t.app))return Promise.reject(Rs(t));const r=ul(t),i=jJ(r,e),o=await new GJ(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const XJ=600*1e3;class WJ{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QJ(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!nj(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ua(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XJ&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sk(e))}saveEventToCache(e){this.cachedEventUids.add(Sk(e)),this.lastProcessedEventTime=Date.now()}}function Sk(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nj({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function QJ(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nj(t);default:return!1}}async function ZJ(t,e={}){return Za(t,"GET","/v1/projects",e)}const JJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eee=/^https?/;async function tee(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ZJ(t);for(const n of e)try{if(nee(n))return}catch{}ua(t,"unauthorized-domain")}function nee(t){const e=H_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!eee.test(n))return!1;if(JJ.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ree=new Bp(3e4,6e4);function Tk(){const t=Fa().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function iee(t){return new Promise((e,n)=>{function r(){Tk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Tk(),n(Ua(t,"network-request-failed"))},timeout:ree.get()})}if(Fa().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Fa().gapi?.load)r();else{const i=qZ("iframefcb");return Fa()[i]=()=>{gapi.load?r():n(Ua(t,"network-request-failed"))},zV(`${GZ()}?onload=${i}`).catch(a=>n(a))}}).catch(e=>{throw p0=null,e})}let p0=null;function aee(t){return p0=p0||iee(t),p0}const see=new Bp(5e3,15e3),oee="__/auth/iframe",lee="emulator/auth/iframe",cee={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uee=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dee(t){const e=t.config;Je(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?xS(e,lee):`https://${t.config.authDomain}/${oee}`,r={apiKey:e.apiKey,appName:t.name,v:zd},i=uee.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Rp(r).slice(1)}`}async function fee(t){const e=await aee(t),n=Fa().gapi;return Je(n,t,"internal-error"),e.open({where:document.body,url:dee(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cee,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=Ua(t,"network-request-failed"),c=Fa().setTimeout(()=>{a(o)},see.get());function u(){Fa().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{a(o)})}))}const hee={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pee=500,gee=600,mee="_blank",vee="http://localhost";class Ak{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yee(t,e,n,r=pee,i=gee){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...hee,width:r.toString(),height:i.toString(),top:a,left:o},d=Qn().toLowerCase();n&&(c=kV(d)?mee:n),RV(d)&&(e=e||vee,u.scrollbars="yes");const h=Object.entries(u).reduce((m,[x,_])=>`${m}${x}=${_},`,"");if(PZ(d)&&c!=="_self")return bee(e||"",c),new Ak(null);const g=window.open(e||"",c,h);Je(g,t,"popup-blocked");try{g.focus()}catch{}return new Ak(g)}function bee(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const xee="__/auth/handler",_ee="emulator/auth/handler",wee=encodeURIComponent("fac");async function Ck(t,e,n,r,i,a){Je(t.config.authDomain,t,"auth-domain-config-required"),Je(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:zd,eventId:i};if(e instanceof FV){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",EY(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,g]of Object.entries({}))o[h]=g}if(e instanceof Fp){const h=e.getScopes().filter(g=>g!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const u=await t._getAppCheckToken(),d=u?`#${wee}=${encodeURIComponent(u)}`:"";return`${Eee(t)}?${Rp(c).slice(1)}${d}`}function Eee({config:t}){return t.emulator?xS(t,_ee):`https://${t.authDomain}/${xee}`}const rx="webStorageSupport";class See{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WV,this._completeRedirectFn=KJ,this._overrideRedirectResult=HJ}async _openPopup(e,n,r,i){zs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await Ck(e,n,r,H_(),i);return yee(e,a,TS())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await Ck(e,n,r,H_(),i);return CJ(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(zs(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await fee(e),r=new WJ(e);return n.register("authEvent",i=>(Je(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(rx,{type:rx},i=>{const a=i?.[0]?.[rx];a!==void 0&&n(!!a),ua(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=tee(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return VV()||DV()||wS()}}const Tee=See;var Ik="@firebase/auth",Rk="1.11.1";class Aee{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Cee(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Iee(t){dd(new vc("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;Je(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jV(t)},d=new BZ(r,i,a,u);return WZ(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),dd(new vc("auth-internal",e=>{const n=ul(e.getProvider("auth").getImmediate());return(r=>new Aee(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Go(Ik,Rk,Cee(t)),Go(Ik,Rk,"esm2020")}const Ree=300,Dee=XO("authIdTokenMaxAge")||Ree;let Dk=null;const kee=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Dee)return;const i=n?.token;Dk!==i&&(Dk=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Nee(t=a4()){const e=SE(t,"auth");if(e.isInitialized())return e.getImmediate();const n=XZ(t,{popupRedirectResolver:Tee,persistence:[VJ,SJ,WV]}),r=XO("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=kee(a.toString());bJ(n,o,()=>o(n.currentUser)),yJ(n,c=>o(c))}}const i=YO("auth");return i&&QZ(n,`http://${i}`),n}function Mee(){return document.getElementsByTagName("head")?.[0]??document}UZ({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Ua("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",Mee().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Iee("Browser");const Pee={apiKey:"AIzaSyDwUA0paVI6n01aENV5Q2aLwVz1DEDtNuA",authDomain:"personal-budget-pwa-5defb.firebaseapp.com",projectId:"personal-budget-pwa-5defb",storageBucket:"personal-budget-pwa-5defb.firebasestorage.app",messagingSenderId:"137454342284",appId:"1:137454342284:web:d7a8169fd53f437e42aba9"},rj=i4(Pee),Io=Nee(rj),ft=ZQ(rj);JQ(ft).catch(t=>{t.code==="failed-precondition"?console.warn(" Offline persistence failed: Multiple tabs open"):t.code==="unimplemented"?console.warn(" Offline persistence not available in this browser"):console.error(" Failed to enable offline persistence:",t)});const ij=t=>t?t instanceof Date?t:typeof t=="string"?new Date(t):typeof t=="number"?new Date(t):t?.toDate&&typeof t.toDate=="function"?t.toDate():new Date:new Date,Yn=t=>ij(t).toISOString(),Oee=t=>{const e=ij(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`},Vee=t=>{const e=t.toLowerCase();return e==="income"?"Income":e==="expense"?"Expense":e==="transfer"?"Transfer":"Expense"},CS=t=>{const e=t;let n=0;typeof e.amount=="number"?n=e.amount:typeof e.amount=="string"&&(n=parseFloat(e.amount)),isNaN(n)&&(n=0);const r=Yn(e.date);return{id:e.id||"",userId:e.userId||"",envelopeId:e.envelopeId||"",amount:n,date:r,month:e.month||Oee(r),description:e.description||"",merchant:e.merchant||void 0,type:Vee(e.type||"expense"),reconciled:e.reconciled??!1,transferId:e.transferId||void 0,isAutomatic:e.isAutomatic||void 0,paymentMethod:e.paymentMethod?typeof e.paymentMethod=="string"?{id:e.paymentMethod,name:e.paymentMethod,network:"Visa",last4:"****",color:"#000000"}:e.paymentMethod:void 0}};class tc{static instance;static getInstance(){return tc.instance||(tc.instance=new tc),tc.instance}async getEnvelopes(e){try{console.log(" BudgetService.getEnvelopes called for user:",e);const n=xr(ft,"users",e,"envelopes"),a=(await Ma(n)).docs.map((o,c)=>({id:o.id,...o.data(),orderIndex:o.data().orderIndex??c})).sort((o,c)=>{const u=o.orderIndex??0,d=c.orderIndex??0;return u-d});return console.log(" Fetched envelopes:",a.length),a}catch(n){throw console.error(" BudgetService.getEnvelopes failed:",n),new Error(`Failed to fetch envelopes: ${n instanceof Error?n.message:"Unknown error"}`)}}async getTransactions(e){try{console.log(" BudgetService.getTransactions: Fetching for user",e);const n=xr(ft,"users",e,"transactions"),r=Xr(n,Td("date","desc")),a=(await Ma(r)).docs.map(o=>{const c={id:o.id,...o.data()};return CS(c)});return console.log(` Fetched ${a.length} transactions`),a}catch(n){throw console.error(" BudgetService.getTransactions failed:",n),new Error(`Failed to fetch transactions: ${n instanceof Error?n.message:"Unknown error"}`)}}async createEnvelope(e){try{console.log(" BudgetService.createEnvelope called for user:",e.userId);const n=xr(ft,"users",e.userId,"envelopes"),r=await Ad(n,{...e,createdAt:dt.now(),lastUpdated:dt.now()}),i={...e,id:r.id,createdAt:Yn(dt.now()),lastUpdated:Yn(dt.now())};return console.log(" Created envelope:",i.id),i}catch(n){throw console.error(" BudgetService.createEnvelope failed:",n),new Error(`Failed to create envelope: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelope(e,n){try{console.log(" BudgetService.updateEnvelope called for envelope:",n.id);const r=Jt(ft,"users",e,"envelopes",n.id);await na(r,{...n,lastUpdated:dt.now()},{merge:!0}),console.log(" Updated envelope:",n.id)}catch(r){throw console.error(" BudgetService.updateEnvelope failed:",r),new Error(`Failed to update envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteEnvelope(e,n){try{console.log(" BudgetService.deleteEnvelope called for envelope:",n);const r=Jt(ft,"users",e,"envelopes",n);await rl(r),console.log(" Deleted envelope:",n)}catch(r){throw console.error(" BudgetService.deleteEnvelope failed:",r),new Error(`Failed to delete envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async reorderEnvelopes(e,n){try{console.log(" BudgetService.reorderEnvelopes called for user:",e);const r=n.map(i=>{const a=Jt(ft,"users",e,"envelopes",i.id);return na(a,{orderIndex:i.orderIndex,lastUpdated:dt.now()},{merge:!0})});await Promise.all(r),console.log(" Reordered envelopes")}catch(r){throw console.error(" BudgetService.reorderEnvelopes failed:",r),new Error(`Failed to reorder envelopes: ${r instanceof Error?r.message:"Unknown error"}`)}}async createTransaction(e){try{console.log(" BudgetService.createTransaction called for user:",e.userId);const n=xr(ft,"users",e.userId,"transactions"),r=await Ad(n,{...e,createdAt:dt.now()}),i={...e,id:r.id};return console.log(" Created transaction:",i.id),i}catch(n){throw console.error(" BudgetService.createTransaction failed:",n),new Error(`Failed to create transaction: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateTransaction(e,n){try{console.log(" BudgetService.updateTransaction called for transaction:",n.id);const r=Object.fromEntries(Object.entries(n).filter(([a,o])=>o!==void 0));console.log(" Clean transaction for Firestore:",r);const i=Jt(ft,"users",e,"transactions",n.id);await na(i,r,{merge:!0}),console.log(" Updated transaction:",n.id)}catch(r){throw console.error(" BudgetService.updateTransaction failed:",r),new Error(`Failed to update transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteTransaction(e,n){try{console.log(" BudgetService.deleteTransaction called for transaction:",n);const r=Jt(ft,"users",e,"transactions",n);await rl(r),console.log(" Deleted transaction:",n)}catch(r){throw console.error(" BudgetService.deleteTransaction failed:",r),new Error(`Failed to delete transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async getMonthData(e,n){try{console.log(` BudgetService.getMonthData: Fetching for user ${e}, month ${n}`);const r=Xr(xr(ft,"users",e,"incomeSources"),$u("month","==",n)),a=(await Ma(r)).docs.map(d=>{const h=d.data();return{id:d.id,userId:h.userId,month:h.month,name:h.name,amount:parseFloat(h.amount),frequency:h.frequency,category:h.category,createdAt:Yn(h.createdAt),updatedAt:Yn(h.updatedAt)}}).sort((d,h)=>new Date(d.createdAt).getTime()-new Date(h.createdAt).getTime()),o=Xr(xr(ft,"users",e,"envelopeAllocations"),$u("month","==",n)),u=(await Ma(o)).docs.map(d=>{const h=d.data();return{id:d.id,userId:h.userId,envelopeId:h.envelopeId,month:h.month,budgetedAmount:parseFloat(h.budgetedAmount),createdAt:Yn(h.createdAt),updatedAt:Yn(h.updatedAt)}}).sort((d,h)=>new Date(d.createdAt).getTime()-new Date(h.createdAt).getTime());return console.log(` Fetched ${a.length} income sources and ${u.length} allocations for ${n}`),{incomeSources:a,allocations:u}}catch(r){throw console.error(" BudgetService.getMonthData failed:",r),new Error(`Failed to fetch month data: ${r instanceof Error?r.message:"Unknown error"}`)}}}tc.getInstance();const ix=t=>({id:t.uid,username:t.email||t.uid,displayName:t.displayName||t.email?.split("@")[0]||"User",email:t.email||void 0}),oa=_E()(FO(t=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,lastAuthTime:null,offlineGracePeriod:10080*60*1e3,lastVerificationEmailSent:null,login:async(e,n)=>{t({isLoading:!0,loginError:null});try{const i=(await gJ(Io,e,n)).user;if(!i.emailVerified)return await _k(Io),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Please verify your email address before signing in. Check your email for a verification link."}),console.log(` Login blocked: ${i.email} not verified`),!1;const a=ix(i);return t({currentUser:a,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),console.log(` User logged in: ${a.email}`),!0}catch(r){console.error("Login error:",r),console.error("Error code:",r.code),console.error("Error message:",r.message);let i="Login failed. Please try again.";if(r.code)switch(r.code){case"auth/invalid-email":i="Invalid email address.";break;case"auth/user-disabled":i="This account has been disabled.";break;case"auth/user-not-found":i="No account found with this email.";break;case"auth/wrong-password":i="Incorrect password.";break;case"auth/too-many-requests":i="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break;case"auth/invalid-credential":i="Invalid email or password.";break;default:console.warn(`Unhandled Firebase error code: ${r.code}`),i="Authentication failed. Please try again.";break}else console.warn("Non-Firebase error in login:",r),i="An unexpected error occurred. Please try again.";return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:i}),!1}},register:async(e,n,r)=>{t({isLoading:!0,loginError:null});try{const a=(await pJ(Io,e,n)).user;await vJ(a,{displayName:r}),await xk(a);const o=ix(a);return t({currentUser:o,isAuthenticated:!1,isLoading:!1,loginError:null,lastVerificationEmailSent:Date.now()}),console.log(` User registered: ${o.email}, verification email sent`),!0}catch(i){console.error("Registration error:",i);let a="Registration failed. Please try again.";switch(i.code){case"auth/email-already-in-use":a="An account with this email already exists.";break;case"auth/invalid-email":a="Invalid email address.";break;case"auth/weak-password":a="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":a="Email/password accounts are not enabled.";break}return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:a}),!1}},logout:async()=>{try{await _k(Io),console.log(" User logged out")}catch(e){console.error("Logout error:",e)}},clearError:()=>{t({loginError:null})},sendPasswordReset:async e=>{t({isLoading:!0,loginError:null});try{return await hJ(Io,e),t({isLoading:!1}),!0}catch(n){console.error("Password reset error:",n);let r="Failed to send password reset email. Please try again.";switch(n.code){case"auth/user-not-found":r="No account found with this email.";break;case"auth/invalid-email":r="Invalid email address.";break;case"auth/too-many-requests":r="Too many attempts. Please try again later.";break}return t({isLoading:!1,loginError:r}),!1}},sendEmailVerification:async()=>{const e=Io.currentUser;if(!e)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{return await xk(e),t({isLoading:!1,lastVerificationEmailSent:Date.now()}),console.log(` Verification email sent to: ${e.email}`),!0}catch(n){console.error("Email verification error:",n);let r="Failed to send verification email. Please try again.";switch(n.code){case"auth/too-many-requests":r="Too many verification emails sent. Please wait before trying again.";break}return t({isLoading:!1,loginError:r}),!1}},resendEmailVerification:async()=>{const e=oa.getState();if(e.lastVerificationEmailSent){const n=Date.now()-e.lastVerificationEmailSent,r=60*1e3;if(n<r){const i=Math.ceil((r-n)/1e3);return t({loginError:`Please wait ${i} seconds before requesting another verification email.`}),!1}}return e.sendEmailVerification()},deleteAccount:async e=>{const n=Io.currentUser;if(!n||!n.email)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{const r=Mc.credential(n.email,e);return await fJ(n,r),await _J(n),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:null,lastAuthTime:null}),console.log(` Account permanently deleted: ${n.email}`),!0}catch(r){console.error("Account deletion error:",r);let i="Failed to delete account. Please try again.";switch(r.code){case"auth/requires-recent-login":i="For security, please log out and log back in before deleting your account.";break;case"auth/wrong-password":i="Incorrect password. Please enter your current password.";break;case"auth/too-many-requests":i="Too many deletion attempts. Please wait before trying again.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break}return t({isLoading:!1,loginError:i}),!1}},initializeAuth:()=>oa.getState().isInitialized?()=>{}:(t({isInitialized:!1}),xJ(Io,r=>{const i=Date.now(),a=oa.getState(),o=r?ix(r):null,c=a.lastAuthTime&&i-a.lastAuthTime<a.offlineGracePeriod,d=typeof navigator<"u"&&!navigator.onLine&&a.isAuthenticated&&c&&!o,h=r?r.emailVerified:!0,g=r&&h||!!d,m=r?o:d?a.currentUser:null;t({currentUser:m,isAuthenticated:g,isInitialized:!0,isLoading:!1,loginError:null,lastAuthTime:r&&h?i:a.lastAuthTime}),m?console.log(` Auth state: User is signed in (${m.email})`,d?"(offline grace period)":h?"(verified)":"(unverified)"):console.log(" Auth state: User is signed out")}))}),{name:"auth-storage",partialize:t=>({isAuthenticated:t.isAuthenticated,currentUser:t.currentUser,lastAuthTime:t.lastAuthTime,offlineGracePeriod:t.offlineGracePeriod,lastVerificationEmailSent:t.lastVerificationEmailSent})})),Rr=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:oa},Symbol.toStringTag,{value:"Module"})),ax=t=>xr(ft,"users",t,"transactions"),jee={subscribeToTransactions:(t,e)=>{const n=Xr(ax(t),Td("date","desc"));return uc(n,i=>{const a=i.docs.map(o=>({id:o.id,...o.data()}));e(a)})},getAllTransactions:async t=>{console.log(` TransactionService.getAllTransactions: Fetching for user ${t}`);const e=Xr(ax(t),Td("date","desc")),r=(await Ma(e)).docs.map(i=>{const a={id:i.id,...i.data()};return CS(a)});return console.log(` Fetched ${r.length} transactions:`,r.map(i=>({id:i.id,description:i.description,month:i.month}))),r},addTransaction:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create transaction");console.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,r),console.log(` Original transaction had temp ID: ${n}`);try{console.log(" About to call addDoc with:",r);const i=await Ad(ax(e),r);console.log(" addDoc succeeded, docRef:",i),console.log(` Document ID: ${i.id}`),console.log(` Document path: ${i.path}`);const a={id:i.id,...r,userId:e};return console.log(" Final result object:",a),a}catch(i){throw console.error(" addDoc failed:",i),console.error("Error message:",i.message),i}},updateTransaction:async(t,e,n)=>{const r=Jt(ft,"users",t,"transactions",e);return await sy(r,n)},deleteTransaction:async(t,e)=>{console.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${t}`);try{const n=Jt(ft,"users",t,"transactions",e);console.log(` Deleting document at path: ${n.path}`),await rl(n),console.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(n){throw console.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,n),console.error("Error message:",n.message),n}}},sx=t=>xr(ft,"users",t,"envelopes"),zee={subscribeToEnvelopes:(t,e)=>{const n=Xr(sx(t),Td("orderIndex","asc"));return uc(n,i=>{const a=i.docs.map(o=>{const c=o.data();return{id:o.id,...c,createdAt:c.createdAt?.toDate?.()?c.createdAt.toDate().toISOString():c.createdAt,lastUpdated:c.lastUpdated?.toDate?.()?c.lastUpdated.toDate().toISOString():c.lastUpdated}});e(a)})},getAllEnvelopes:async t=>{try{console.log(" EnvelopeService.getAllEnvelopes called for user:",t);const e=sx(t),i=(await Ma(e)).docs.map((a,o)=>{const c=a.data();return{id:a.id,...c,createdAt:c.createdAt?.toDate?.()?c.createdAt.toDate().toISOString():c.createdAt,lastUpdated:c.lastUpdated?.toDate?.()?c.lastUpdated.toDate().toISOString():c.lastUpdated,orderIndex:c.orderIndex??o}}).sort((a,o)=>{const c=a.orderIndex??0,u=o.orderIndex??0;return c-u});return console.log(" Fetched envelopes:",i.length),i}catch(e){return console.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create envelope");try{return{id:(await Ad(sx(e),r)).id,...r,userId:e}}catch(i){throw console.error(" Envelope addDoc failed:",i),i}},saveEnvelope:async(t,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const n=Jt(ft,"users",t,"envelopes",e.id);return await na(n,e,{merge:!0})},updateBalance:async(t,e,n)=>{const r=Jt(ft,"users",t,"envelopes",e);return await sy(r,{currentBalance:n,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(t,e)=>{console.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${t}`);const n=Jt(ft,"users",t,"envelopes",e);await rl(n),console.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},ox=t=>xr(ft,"users",t,"distributionTemplates"),Lee={subscribeToDistributionTemplates:(t,e)=>{const n=Xr(ox(t),Td("lastUsed","desc"));return uc(n,i=>{const a=i.docs.map(o=>({id:o.id,...o.data()}));e(a)})},getAllDistributionTemplates:async t=>{const e=Xr(ox(t),Td("lastUsed","desc"));return(await Ma(e)).docs.map(r=>({id:r.id,...r.data()}))},createDistributionTemplate:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create distribution template");console.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,r);try{const i=await Ad(ox(e),r);console.log(" Template addDoc succeeded, docRef:",i);const a={id:i.id,...r,userId:e};return console.log(" Final template result object:",a),a}catch(i){throw console.error(" Template addDoc failed:",i),i}},saveDistributionTemplate:async(t,e)=>{const n=Jt(ft,"users",t,"distributionTemplates",e.id);return await na(n,e,{merge:!0})},updateDistributionTemplate:async(t,e,n)=>{const r=Jt(ft,"users",t,"distributionTemplates",e);return await sy(r,n)},deleteDistributionTemplate:async(t,e)=>{console.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${t}`);const n=Jt(ft,"users",t,"distributionTemplates",e);await rl(n),console.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},lx=t=>xr(ft,"users",t,"appSettings"),Bee={subscribeToAppSettings:(t,e)=>{const n=Xr(lx(t),ok(1));return uc(n,i=>{if(i.empty){e(null);return}const a=i.docs.map(o=>({id:o.id,...o.data()}))[0];e(a)})},getAppSettings:async t=>{const e=Xr(lx(t),ok(1)),n=await Ma(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data()}},createAppSettings:async t=>{const{userId:e,...n}=t;if(!e)throw new Error("User ID is required to create app settings");console.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,n);try{const r=await Ad(lx(e),n);console.log(" Settings addDoc succeeded, docRef:",r);const i={id:r.id,...n,userId:e};return console.log(" Final settings result object:",i),i}catch(r){throw console.error(" Settings addDoc failed:",r),r}},saveAppSettings:async(t,e)=>{const n=Jt(ft,"users",t,"appSettings",e.id);return await na(n,e,{merge:!0})},updateAppSettings:async(t,e,n)=>{const r=Jt(ft,"users",t,"appSettings",e);return await sy(r,n)},deleteAppSettings:async(t,e)=>{console.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${t}`);const n=Jt(ft,"users",t,"appSettings",e);await rl(n),console.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}};class Pa{static instance;static getInstance(){return Pa.instance||(Pa.instance=new Pa),Pa.instance}async getMonthlyBudget(e,n){try{const r=Jt(ft,"users",e,"monthlyBudgets",n),i=await dZ(r);if(i.exists()){const a=i.data();return{id:a.id,userId:a.userId,month:a.month,totalIncome:parseFloat(a.totalIncome),availableToBudget:parseFloat(a.availableToBudget),createdAt:Yn(a.createdAt),updatedAt:Yn(a.updatedAt)}}return null}catch(r){throw console.error("Error getting monthly budget:",r),r}}async createOrUpdateMonthlyBudget(e){try{const n=dt.now(),r=`${e.userId}_${e.month}`,i={id:r,userId:e.userId,month:e.month,totalIncome:e.totalIncome.toString(),availableToBudget:e.availableToBudget.toString(),createdAt:n,updatedAt:n};return await na(Jt(ft,"users",e.userId,"monthlyBudgets",e.month),i),{...e,id:r,createdAt:Yn(n),updatedAt:Yn(n)}}catch(n){throw console.error("Error creating/updating monthly budget:",n),n}}async getIncomeSources(e,n){try{const r=Xr(xr(ft,"users",e,"incomeSources"),$u("month","==",n));return(await Ma(r)).docs.map(a=>{const o=a.data();return{id:o.id,userId:o.userId,month:o.month,name:o.name,amount:parseFloat(o.amount),frequency:o.frequency,category:o.category,createdAt:Yn(o.createdAt),updatedAt:Yn(o.updatedAt)}}).sort((a,o)=>new Date(a.createdAt).getTime()-new Date(o.createdAt).getTime())}catch(r){throw console.error("Error getting income sources:",r),r}}async createIncomeSource(e){try{const n=dt.now(),r=Jt(xr(ft,"users",e.userId,"incomeSources")),i={id:r.id,userId:e.userId,month:e.month,name:e.name,amount:e.amount.toString(),frequency:e.frequency||"monthly",...e.category&&{category:e.category},createdAt:n,updatedAt:n};return await na(r,i),{...e,frequency:e.frequency||"monthly",id:r.id,createdAt:Yn(n),updatedAt:Yn(n)}}catch(n){throw console.error("Error creating income source:",n),n}}async getEnvelopeAllocations(e,n){try{const r=Xr(xr(ft,"users",e,"envelopeAllocations"),$u("month","==",n));return(await Ma(r)).docs.map(a=>{const o=a.data();return{id:o.id,userId:o.userId,envelopeId:o.envelopeId,month:o.month,budgetedAmount:parseFloat(o.budgetedAmount),createdAt:Yn(o.createdAt),updatedAt:Yn(o.updatedAt)}}).sort((a,o)=>new Date(a.createdAt).getTime()-new Date(o.createdAt).getTime())}catch(r){throw console.error("Error getting envelope allocations:",r),r}}async createEnvelopeAllocation(e){try{const n=dt.now(),r=Jt(xr(ft,"users",e.userId,"envelopeAllocations")),i={id:r.id,userId:e.userId,envelopeId:e.envelopeId,month:e.month,budgetedAmount:e.budgetedAmount.toString(),createdAt:n,updatedAt:n};return await na(r,i),{...e,id:r.id,createdAt:Yn(n),updatedAt:Yn(n)}}catch(n){throw console.error("Error creating envelope allocation:",n),n}}async copyMonthData(e,n,r){try{const i=await this.getIncomeSources(e,n);for(const d of i)await this.createIncomeSource({...d,month:r});const a=await this.getEnvelopeAllocations(e,n);for(const d of a)await this.createEnvelopeAllocation({...d,month:r});const o=i.reduce((d,h)=>d+h.amount,0),c=a.reduce((d,h)=>d+h.budgetedAmount,0),u=o-c;await this.createOrUpdateMonthlyBudget({userId:e,month:r,totalIncome:o,availableToBudget:u})}catch(i){throw console.error("Error copying month data:",i),i}}async deleteIncomeSource(e,n){try{const r=Jt(ft,"users",e,"incomeSources",n);await rl(r)}catch(r){throw console.error("Error deleting income source:",r),r}}async updateIncomeSource(e,n,r){try{const i=Jt(ft,"users",e,"incomeSources",n),a={...r,updatedAt:dt.now()};await na(i,a,{merge:!0})}catch(i){throw console.error("Error updating income source:",i),i}}async deleteEnvelopeAllocation(e,n){try{const r=Jt(ft,"users",e,"envelopeAllocations",n);await rl(r)}catch(r){throw console.error("Error deleting envelope allocation:",r),r}}async updateEnvelopeAllocation(e,n,r){try{const i=Jt(ft,"users",e,"envelopeAllocations",n),a={...r,updatedAt:dt.now()};await na(i,a,{merge:!0})}catch(i){throw console.error("Error updating envelope allocation:",i),i}}async clearMonthData(e,n){try{const[r,i]=await Promise.all([this.getIncomeSources(e,n),this.getEnvelopeAllocations(e,n)]),a=r.map(c=>this.deleteIncomeSource(e,c.id)),o=i.map(c=>this.deleteEnvelopeAllocation(e,c.id));await Promise.all([...a,...o]),await this.createOrUpdateMonthlyBudget({userId:e,month:n,totalIncome:0,availableToBudget:0})}catch(r){throw console.error("Error clearing month data:",r),r}}async calculateAvailableToBudget(e,n){try{const r=await this.getIncomeSources(e,n),i=await this.getEnvelopeAllocations(e,n),a=r.reduce((c,u)=>c+u.amount,0),o=i.reduce((c,u)=>c+u.budgetedAmount,0);return a-o}catch(r){throw console.error("Error calculating available to budget:",r),r}}subscribeToMonthlyBudget(e,n,r){const i=Jt(ft,"monthlyBudgets",`${e}_${n}`);return uc(i,a=>{if(a.exists()){const o=a.data();r(o)}else r(null)})}subscribeToIncomeSources(e,n,r){const i=Xr(xr(ft,"users",e,"incomeSources"),$u("month","==",n));return uc(i,a=>{const o=a.docs.map(c=>({id:c.id,...c.data()})).sort((c,u)=>{const d=c.createdAt?.toDate?.()?.getTime()||0,h=u.createdAt?.toDate?.()?.getTime()||0;return d-h});r(o)})}subscribeToEnvelopeAllocations(e,n,r){const i=Xr(xr(ft,"users",e,"envelopeAllocations"),$u("month","==",n));return uc(i,a=>{const o=a.docs.map(c=>({id:c.id,...c.data()}));r(o)})}}const cx=Object.freeze(Object.defineProperty({__proto__:null,MonthlyBudgetService:Pa},Symbol.toStringTag,{value:"Module"})),aj=t=>({id:t.id,userId:t.userId,month:t.month,name:t.name,amount:typeof t.amount=="string"?parseFloat(t.amount):t.amount,frequency:t.frequency,category:t.category,createdAt:t.createdAt,updatedAt:t.updatedAt}),sj=t=>({id:t.id,userId:t.userId,month:t.month,envelopeId:t.envelopeId,budgetedAmount:typeof t.budgetedAmount=="string"?parseFloat(t.budgetedAmount):t.budgetedAmount,createdAt:t.createdAt,updatedAt:t.updatedAt}),Uee=t=>CS(t),Fee=t=>({id:t.id,name:t.name||"",currentBalance:t.currentBalance||0,lastUpdated:t.lastUpdated?.toDate?.()?t.lastUpdated.toDate().toISOString():t.lastUpdated,isActive:t.isActive??!0,orderIndex:t.orderIndex??0,userId:t.userId||void 0,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,isPiggybank:t.isPiggybank,piggybankConfig:t.piggybankConfig}),Gee=t=>({id:t.id,name:t.name||"",distributions:t.distributions||{},lastUsed:t.lastUsed?.toDate?.()?t.lastUsed.toDate().toISOString():t.lastUsed||new Date().toISOString(),note:t.note||"",userId:t.userId||void 0}),kk=(t,e)=>{if(window.__firebaseUnsubscribers){console.log(" Real-time subscriptions already active, skipping setup");return}console.log(" Setting up real-time Firebase subscriptions...");const n=t.getState().currentMonth;console.log(" Current month for subscriptions:",n);const r=zee.subscribeToEnvelopes(e,d=>{const h=t.getState();if(h.isOnline&&!h.pendingSync&&!h.resetPending&&!h.isImporting){console.log(" Real-time sync: Envelopes updated",d.length);const g=d.map(Fee);t.setState({envelopes:g})}else console.log(" Real-time sync: BLOCKED envelope update",{isOnline:h.isOnline,pendingSync:h.pendingSync,resetPending:h.resetPending,isImporting:h.isImporting})}),i=jee.subscribeToTransactions(e,d=>{const h=t.getState();if(h.isOnline&&!h.pendingSync&&!h.resetPending&&!h.isImporting){console.log(" Real-time sync: Transactions updated",d.length);const g=d.map(Uee);t.setState({transactions:g})}else console.log(" Real-time sync: BLOCKED transaction update",{isOnline:h.isOnline,pendingSync:h.pendingSync,resetPending:h.resetPending,isImporting:h.isImporting,transactionCount:d.length})}),a=Lee.subscribeToDistributionTemplates(e,d=>{const h=t.getState();if(h.isOnline&&!h.pendingSync&&!h.resetPending&&!h.isImporting){console.log(" Real-time sync: Templates updated from Firebase",d.length),console.log(" Firebase templates:",d.map(m=>({id:m.id,name:m.name})));const g=d.map(Gee);console.log(" Setting store templates to:",g.map(m=>({id:m.id,name:m.name})))}else console.log(" Real-time sync: Skipping template update (offline or pending changes)")}),o=Bee.subscribeToAppSettings(e,d=>{const h=t.getState();h.isOnline&&!h.pendingSync&&!h.resetPending&&!h.isImporting&&(console.log(" Real-time sync: Settings updated",d?"found":"null"),t.setState({appSettings:d}))}),c=Pa.getInstance().subscribeToIncomeSources(e,n,d=>{const h=t.getState();if(h.isOnline&&!h.pendingSync&&!h.resetPending&&!h.isImporting){console.log(" Real-time sync: Income sources updated",d.length);const g=d.map(aj),m=t.getState().incomeSources;t.setState({incomeSources:{...m,[n]:g}})}else console.log(" Real-time sync: BLOCKED income sources update")}),u=Pa.getInstance().subscribeToEnvelopeAllocations(e,n,d=>{const h=t.getState();if(h.isOnline&&!h.pendingSync&&!h.resetPending&&!h.isImporting){console.log(" Real-time sync: Allocations updated",d.length);const g=d.map(sj),m=t.getState().allocations;t.setState({allocations:{...m,[n]:g}})}else console.log(" Real-time sync: BLOCKED allocations update")});window.__firebaseUnsubscribers={envelopes:r,transactions:i,templates:a,settings:o,incomeSources:c,allocations:u},console.log(" Real-time subscriptions active - cross-device sync enabled")},qee=t=>{const{useBudgetStore:e,useAuthStore:n,getCurrentUserId:r}=t;if(typeof window>"u")return;window.addEventListener("online",async()=>{console.log(" Browser online event detected"),await e.getState().updateOnlineStatus();const u=e.getState();u.isOnline&&(u.pendingSync||u.resetPending)&&(console.log(" Auto-syncing pending operations..."),u.syncData())}),window.addEventListener("offline",()=>{console.log(" Browser offline event detected"),e.setState({isOnline:!1})}),setTimeout(()=>{e.getState().updateOnlineStatus()},1e3);let i=null;const a=()=>{i&&clearInterval(i),i=setInterval(async()=>{const u=e.getState();if(!u.isOnline&&!u.testingConnectivity){console.log(" Periodic offline retry: testing connectivity..."),e.setState({testingConnectivity:!0});try{await(async()=>(await e.getState().updateOnlineStatus(),e.getState().isOnline))()?(console.log(" Periodic retry succeeded - back online!"),e.setState({isOnline:!0,testingConnectivity:!1}),(u.pendingSync||u.resetPending)&&e.getState().syncData(),i&&(clearInterval(i),i=null)):e.setState({testingConnectivity:!1})}catch(d){console.log(" Periodic retry failed:",d),e.setState({testingConnectivity:!1})}}else u.isOnline&&i&&(clearInterval(i),i=null)},3e4)};a(),e.subscribe(u=>{!u.isOnline&&!i&&(console.log(" Starting periodic connectivity retry"),a())});const o=n.getState();o.isAuthenticated&&o.currentUser&&(console.log(" User already authenticated on app load, setting up real-time subscriptions"),kk(e,r())),n.subscribe(u=>{if(u.isAuthenticated&&u.currentUser)console.log(" User authenticated, setting up real-time subscriptions"),kk(e,r());else if(!u.isAuthenticated&&!u.isLoading){if(console.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const d=window.__firebaseUnsubscribers;d.envelopes&&d.envelopes(),d.transactions&&d.transactions(),d.templates&&d.templates(),d.settings&&d.settings(),d.incomeSources&&d.incomeSources(),d.allocations&&d.allocations(),delete window.__firebaseUnsubscribers,console.log(" Cleaned up Firebase subscriptions")}e.getState().handleUserLogout()}});let c=e.getState().currentMonth;e.subscribe(u=>{if(u.currentMonth!==c&&u.isAuthenticated){console.log(" Month changed from",c,"to",u.currentMonth),c=u.currentMonth;const d=r();if(d&&window.__firebaseUnsubscribers){const h=window.__firebaseUnsubscribers;h.incomeSources&&(h.incomeSources(),console.log(" Unsubscribed from old month income sources")),h.allocations&&(h.allocations(),console.log(" Unsubscribed from old month allocations")),h.incomeSources=Pa.getInstance().subscribeToIncomeSources(d,u.currentMonth,g=>{const m=e.getState();if(m.isOnline&&!m.pendingSync&&!m.resetPending&&!m.isImporting){console.log(" Real-time sync: Income sources updated for new month",g.length);const x=g.map(aj),_=e.getState().incomeSources;e.setState({incomeSources:{..._,[u.currentMonth]:x}})}}),h.allocations=Pa.getInstance().subscribeToEnvelopeAllocations(d,u.currentMonth,g=>{const m=e.getState();if(m.isOnline&&!m.pendingSync&&!m.resetPending&&!m.isImporting){console.log(" Real-time sync: Allocations updated for new month",g.length);const x=g.map(sj),_=e.getState().allocations;e.setState({allocations:{..._,[u.currentMonth]:x}})}}),console.log(" Subscribed to income sources and allocations for new month:",u.currentMonth)}}})},Hee=()=>oa.getState().currentUser?.id||"",Di=tc.getInstance(),pr=_E()(J$(FO((t,e)=>({envelopes:[],transactions:[],appSettings:null,incomeSources:{},allocations:{},currentMonth:new Date().toISOString().slice(0,7),isOnline:typeof navigator<"u"?navigator.onLine:!0,isLoading:!1,error:null,pendingSync:!1,resetPending:!1,isImporting:!1,testingConnectivity:!1,setMonth:n=>t({currentMonth:n}),init:async()=>{console.log("BudgetStore initializing...");const n=e();try{t({isLoading:!0,error:null});const i=(await Hn(()=>Promise.resolve().then(()=>Rr),[]).then(u=>u.useAuthStore.getState())).currentUser;if(!i){console.log("No user logged in, skipping data fetch"),t({isLoading:!1});return}console.log(`Fetching data for user: ${i.id}, month: ${n.currentMonth}`);const[a,o,c]=await Promise.all([Di.getEnvelopes(i.id),Di.getTransactions(i.id),Di.getMonthData(i.id,n.currentMonth)]);t({envelopes:a,transactions:o,incomeSources:{...n.incomeSources,[n.currentMonth]:c.incomeSources},allocations:{...n.allocations,[n.currentMonth]:c.allocations},isLoading:!1,error:null}),console.log(` BudgetStore initialized: ${a.length} envelopes, ${o.length} transactions, ${c.incomeSources.length} income sources, ${c.allocations.length} allocations`)}catch(r){console.error(" BudgetStore initialization failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to initialize budget data"})}},addEnvelope:async n=>{try{t({isLoading:!0,error:null});const i=(await Hn(()=>Promise.resolve().then(()=>Rr),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a={...n,userId:i.id},o=await Di.createEnvelope(a);return t(c=>({envelopes:[...c.envelopes,o],isLoading:!1})),console.log(" Added envelope:",o.id),o.id}catch(r){throw console.error(" addEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add envelope"}),r}},updateEnvelope:async n=>{try{t({isLoading:!0,error:null});const i=(await Hn(()=>Promise.resolve().then(()=>Rr),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");await Di.updateEnvelope(i.id,n),t(a=>({envelopes:a.envelopes.map(o=>o.id===n.id?n:o),isLoading:!1})),console.log(" Updated envelope:",n.id)}catch(r){throw console.error(" updateEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update envelope"}),r}},deleteEnvelope:async n=>{try{t({isLoading:!0,error:null});const i=(await Hn(()=>Promise.resolve().then(()=>Rr),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");await Di.deleteEnvelope(i.id,n),t(a=>({envelopes:a.envelopes.filter(o=>o.id!==n),transactions:a.transactions.filter(o=>o.envelopeId!==n),isLoading:!1})),console.log(" Deleted envelope:",n)}catch(r){throw console.error(" deleteEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope"}),r}},reorderEnvelopes:async n=>{try{t({isLoading:!0,error:null});const r=e(),i=new Map;n.forEach((d,h)=>{i.set(d,h)});const a=r.envelopes.map(d=>{if(!i.has(d.id))return d;const h=i.get(d.id);return d.orderIndex===h?d:{...d,orderIndex:h}}),o=a.filter((d,h)=>d!==r.envelopes[h]);if(!o.length){t({isLoading:!1});return}const u=(await Hn(()=>Promise.resolve().then(()=>Rr),void 0).then(d=>d.useAuthStore.getState())).currentUser;if(!u)throw new Error("No authenticated user found");await Di.reorderEnvelopes(u.id,o),t({envelopes:a,isLoading:!1}),console.log(" Reordered envelopes")}catch(r){throw console.error(" reorderEnvelopes failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to reorder envelopes"}),r}},addTransaction:async n=>{try{t({isLoading:!0,error:null});const i=(await Hn(()=>Promise.resolve().then(()=>Rr),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a={...n,userId:i.id},o=await Di.createTransaction(a);t(c=>({transactions:[...c.transactions,o],isLoading:!1})),console.log(" Added transaction:",o.id)}catch(r){throw console.error(" addTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add transaction"}),r}},updateTransaction:async n=>{try{t({isLoading:!0,error:null});const i=(await Hn(()=>Promise.resolve().then(()=>Rr),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");await Di.updateTransaction(i.id,n),t(a=>({transactions:a.transactions.map(o=>o.id===n.id?n:o),isLoading:!1})),console.log(" Updated transaction:",n.id)}catch(r){throw console.error(" updateTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update transaction"}),r}},deleteTransaction:async n=>{try{t({isLoading:!0,error:null});const i=(await Hn(()=>Promise.resolve().then(()=>Rr),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");await Di.deleteTransaction(i.id,n),t(a=>({transactions:a.transactions.filter(o=>o.id!==n),isLoading:!1})),console.log(" Deleted transaction:",n)}catch(r){throw console.error(" deleteTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete transaction"}),r}},restoreTransaction:async n=>{await e().updateTransaction(n)},transferFunds:async(n,r,i,a,o)=>{try{const c=o?typeof o=="string"?o:o.toISOString():new Date().toISOString(),u=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(d=>d.id===r)?.name||"envelope"}`,amount:i,envelopeId:n,date:c,type:"Expense",transferId:u,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(d=>d.id===n)?.name||"envelope"}`,amount:i,envelopeId:r,date:c,type:"Income",transferId:u,reconciled:!1}),console.log(" Transfer completed")}catch(c){throw console.error(" transferFunds failed:",c),c}},fetchData:async()=>{await e().init()},renameEnvelope:async(n,r)=>{try{t({isLoading:!0,error:null});const a=e().envelopes.find(d=>d.id===n);if(!a)throw new Error("Envelope not found");t(d=>({envelopes:d.envelopes.map(h=>h.id===n?{...h,name:r}:h),isLoading:!0}));const c=(await Hn(()=>Promise.resolve().then(()=>Rr),void 0).then(d=>d.useAuthStore.getState())).currentUser;if(!c)throw new Error("No authenticated user found");const u={...a,name:r};await Di.updateEnvelope(c.id,u),t({isLoading:!1}),console.log(" Renamed envelope:",n)}catch(i){throw console.error(" renameEnvelope failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to rename envelope"}),i}},getEnvelopeBalance:n=>{const r=e();if(!r.envelopes.find(g=>g.id===n))return console.log(` getEnvelopeBalance: Envelope ${n} not found`),0;const a=r.transactions.filter(g=>g.envelopeId===n),o=a.filter(g=>g.type==="Expense"),c=a.filter(g=>g.type==="Income"),u=o.reduce((g,m)=>g+(m.amount||0),0);return c.reduce((g,m)=>g+(m.amount||0),0)-u},resetData:async()=>{console.log(" Resetting all data"),t({envelopes:[],transactions:[],appSettings:null,incomeSources:{},allocations:{},isLoading:!1,error:null})},importData:async n=>{try{if(t({isLoading:!0,error:null}),!n||typeof n!="object")throw new Error("Invalid data format");return n.envelopes&&Array.isArray(n.envelopes)&&t(r=>({envelopes:n.envelopes,transactions:r.transactions})),n.transactions&&Array.isArray(n.transactions)&&t(r=>({envelopes:r.envelopes,transactions:n.transactions})),t({isLoading:!1}),{success:!0,message:"Data imported successfully"}}catch(r){return console.error(" importData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to import data"}),{success:!1,message:r instanceof Error?r.message:"Import failed"}}},updateAppSettings:async n=>{try{t({isLoading:!0,error:null});const r=e(),i={id:r.appSettings?.id||"default",theme:n.theme??r.appSettings?.theme??"system",enableMoveableReorder:n.enableMoveableReorder??r.appSettings?.enableMoveableReorder??!0,userId:n.userId??r.appSettings?.userId};t({appSettings:i,isLoading:!1}),console.log(" Updated app settings")}catch(r){throw console.error(" updateAppSettings failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update settings"}),r}},initializeAppSettings:async()=>{try{if(e().appSettings)return;t({appSettings:{id:"default",theme:"system",enableMoveableReorder:!0}}),console.log(" Initialized app settings")}catch(n){throw console.error(" initializeAppSettings failed:",n),t({error:n instanceof Error?n.message:"Failed to initialize settings"}),n}},syncData:async()=>{await e().init()},testConnectivity:async()=>{console.log(" Testing connectivity");try{t({testingConnectivity:!0}),await e().init(),t({testingConnectivity:!1,isOnline:!0}),console.log(" Connectivity test passed")}catch(n){console.error(" Connectivity test failed:",n),t({testingConnectivity:!1,isOnline:!1,error:n instanceof Error?n.message:"Connectivity test failed"})}},updatePiggybankContribution:async(n,r)=>{try{t({isLoading:!0,error:null}),console.log(" Updating piggybank contribution:",{envelopeId:n,newAmount:r});const a=(await Hn(()=>Promise.resolve().then(()=>Rr),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");const o=e().envelopes.find(u=>u.id===n&&u.isPiggybank);if(!o)throw new Error("Piggybank not found");const c={...o,lastUpdated:new Date().toISOString(),piggybankConfig:{monthlyContribution:r,targetAmount:o.piggybankConfig?.targetAmount,color:o.piggybankConfig?.color,icon:o.piggybankConfig?.icon,paused:o.piggybankConfig?.paused??!1}};if(console.log(" Updating envelope in Firestore:",c),await Di.updateEnvelope(a.id,c),console.log(" Envelope updated successfully"),t(u=>({envelopes:u.envelopes.map(d=>d.id===n?c:d),isLoading:!1})),!o.piggybankConfig?.paused)try{await e().setEnvelopeAllocation(n,r),setTimeout(()=>{e().transactions.find(d=>d.envelopeId===n&&d.description==="Monthly Budget Allocation")||console.warn(" Monthly allocation transaction not found after update")},1e3)}catch(u){console.error(" Failed to update monthly budget allocation:",u)}console.log(" Piggybank contribution updated successfully")}catch(i){throw console.error(" updatePiggybankContribution failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update piggybank contribution"}),i}},addIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null});const a=(await Hn(()=>Promise.resolve().then(()=>Rr),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");console.log(" Adding income source:",{month:n,source:r});const o={...r,id:`income-${Date.now()}-${Math.random()}`,userId:a.id,month:n,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};t(c=>({incomeSources:{...c.incomeSources,[n]:[...c.incomeSources[n]||[],o]},isLoading:!1})),console.log(" Added income source:",o.id)}catch(i){throw console.error(" addIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to add income source"}),i}},updateIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),console.log(" Updating income source:",{month:n,sourceId:r.id}),t(i=>({incomeSources:{...i.incomeSources,[n]:i.incomeSources[n]?.map(a=>a.id===r.id?{...r,updatedAt:new Date().toISOString()}:a)||[]},isLoading:!1})),console.log(" Updated income source:",r.id)}catch(i){throw console.error(" updateIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update income source"}),i}},deleteIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),console.log(" Deleting income source:",{month:n,sourceId:r}),t(i=>({incomeSources:{...i.incomeSources,[n]:i.incomeSources[n]?.filter(a=>a.id!==r)||[]},isLoading:!1})),console.log(" Deleted income source:",r)}catch(i){throw console.error(" deleteIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to delete income source"}),i}},copyPreviousMonthAllocations:async n=>{try{t({isLoading:!0,error:null}),console.log(" Copying allocations from previous month:",n);const[r,i]=n.split("-").map(Number);let a=r,o=i-1;o<1&&(a=r-1,o=12);const c=`${a}-${String(o).padStart(2,"0")}`,u=e().allocations[c]||[];console.log(` Found ${u.length} allocations from ${c}`),t(d=>({allocations:{...d.allocations,[n]:u.map(h=>({...h,id:`alloc-${Date.now()}-${Math.random()}`,month:n,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}))},isLoading:!1})),console.log(` Copied ${u.length} allocations to ${n}`)}catch(r){throw console.error(" copyPreviousMonthAllocations failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to copy allocations"}),r}},setEnvelopeAllocation:async(n,r)=>{try{t({isLoading:!0,error:null});const a=(await Hn(()=>Promise.resolve().then(()=>Rr),void 0).then(h=>h.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");const o=e().currentMonth,c=e().envelopes.find(h=>h.id===n),u=c?.isPiggybank,d=e().allocations[o]?.find(h=>h.envelopeId===n);if(d?await e().updateEnvelopeAllocation(d.id,{budgetedAmount:r}):await e().createEnvelopeAllocation({envelopeId:n,budgetedAmount:r,userId:a.id,month:o,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),u&&r>0&&!c?.piggybankConfig?.paused&&!e().transactions.find(g=>g.envelopeId===n&&g.month===o&&g.description==="Monthly Allocation")){const g={description:"Monthly Allocation",amount:r,envelopeId:n,type:"Income",month:o,date:`${o}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(g)}console.log(" Envelope allocation set successfully")}catch(i){throw console.error(" setEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to set envelope allocation"}),i}},createEnvelopeAllocation:async n=>{try{const i=(await Hn(()=>Promise.resolve().then(()=>Rr),void 0).then(d=>d.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a=e().currentMonth,{MonthlyBudgetService:o}=await Hn(async()=>{const{MonthlyBudgetService:d}=await Promise.resolve().then(()=>cx);return{MonthlyBudgetService:d}},void 0),u=await o.getInstance().createEnvelopeAllocation({envelopeId:n.envelopeId,budgetedAmount:n.budgetedAmount,userId:i.id,month:a});t(d=>({allocations:{...d.allocations,[a]:[...d.allocations[a]||[],u]},isLoading:!1})),console.log(" Created envelope allocation:",u.id)}catch(r){throw console.error(" createEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to create envelope allocation"}),r}},updateEnvelopeAllocation:async(n,r)=>{try{console.log(" Updating envelope allocation:",{id:n,updates:r});const i=e().currentMonth,o=(await Hn(()=>Promise.resolve().then(()=>Rr),void 0).then(m=>m.useAuthStore.getState())).currentUser;if(!o)throw new Error("No authenticated user found");const c=e().allocations[i]?.find(m=>m.id===n);if(!c)throw new Error("Allocation not found");const u=e().envelopes.find(m=>m.id===c.envelopeId),d=u?.isPiggybank,{MonthlyBudgetService:h}=await Hn(async()=>{const{MonthlyBudgetService:m}=await Promise.resolve().then(()=>cx);return{MonthlyBudgetService:m}},void 0);if(await h.getInstance().updateEnvelopeAllocation(o.id,n,{budgetedAmount:r.budgetedAmount?.toString()}),t(m=>({allocations:{...m.allocations,[i]:m.allocations[i]?.map(x=>x.id===n?{...x,...r,updatedAt:new Date().toISOString()}:x)||[]},isLoading:!1})),d&&r.budgetedAmount!==void 0){const m=e().transactions.find(x=>x.envelopeId===c.envelopeId&&x.month===i&&x.description==="Monthly Allocation");m?r.budgetedAmount>0&&!u?.piggybankConfig?.paused?await e().updateTransaction({...m,amount:r.budgetedAmount}):(r.budgetedAmount===0||u?.piggybankConfig?.paused)&&await e().deleteTransaction(m.id):r.budgetedAmount>0&&!u?.piggybankConfig?.paused&&await e().addTransaction({description:"Monthly Allocation",amount:r.budgetedAmount,envelopeId:c.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}console.log(" Updated envelope allocation:",n)}catch(i){throw console.error(" updateEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update envelope allocation"}),i}},deleteEnvelopeAllocation:async n=>{try{console.log(" Deleting envelope allocation:",n);const r=e().currentMonth,a=(await Hn(()=>Promise.resolve().then(()=>Rr),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");const{MonthlyBudgetService:o}=await Hn(async()=>{const{MonthlyBudgetService:u}=await Promise.resolve().then(()=>cx);return{MonthlyBudgetService:u}},void 0);await o.getInstance().deleteEnvelopeAllocation(a.id,n),t(u=>({allocations:{...u.allocations,[r]:u.allocations[r]?.filter(d=>d.id!==n)||[]},isLoading:!1})),console.log(" Deleted envelope allocation:",n)}catch(r){throw console.error(" deleteEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope allocation"}),r}},refreshAvailableToBudget:async()=>{try{const n=e().currentMonth,r=e().allocations[n]||[],i=e().incomeSources[n]||[],a=r.reduce((u,d)=>u+d.budgetedAmount,0);return i.reduce((u,d)=>u+d.amount,0)-a}catch(n){throw console.error(" refreshAvailableToBudget failed:",n),t({error:n instanceof Error?n.message:"Failed to refresh available to budget"}),n}},updateOnlineStatus:async()=>{try{const n=typeof navigator<"u"?navigator.onLine:!0;t({isOnline:n}),console.log(" Online status updated:",n)}catch(n){console.error(" Failed to update online status:",n)}},handleUserLogout:()=>{console.log(" Clearing user data on logout"),t({envelopes:[],transactions:[],incomeSources:{},allocations:{},isLoading:!1,error:null})}}),{name:"budget-storage"})));qee({useBudgetStore:pr,useAuthStore:oa,getCurrentUserId:Hee});const Gd=_E((t,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(n,r="neutral",i)=>{t({message:n,type:r,isVisible:!0,undoAction:i}),setTimeout(()=>{e().hideToast()},6e3)},hideToast:()=>{t({isVisible:!1})}})),$ee=t=>{if(!t)return null;if(t instanceof Date)return t;if(typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(typeof t=="object"&&t.seconds!==void 0)return new Date(t.seconds*1e3);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?null:e}if(typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?null:e}return null},Yee=()=>{const{envelopes:t,transactions:e,fetchData:n,isLoading:r,isOnline:i,pendingSync:a,syncData:o,testingConnectivity:c,reorderEnvelopes:u}=pr(),{currentMonth:d,incomeSources:h,allocations:g,deleteIncomeSource:m,setEnvelopeAllocation:x,copyPreviousMonthAllocations:_,isLoading:E}=pr(),{showToast:S}=Gd(),[T,D]=G.useState(!1),R=G.useRef(null),[O,L]=G.useState(!1),j=!O||r||E,[A,C]=G.useState([]),k=G.useRef([]),M=B=>{if(t.find(Se=>Se.id===B)?.isPiggybank)return pr.getState().getEnvelopeBalance(B);const ne=e.filter(Se=>Se.envelopeId===B&&Se.month===d),ae=ne.filter(Se=>Se.type==="Expense"),he=ne.filter(Se=>Se.type==="Income"),le=ae.reduce((Se,Ue)=>Se.plus(new _s(Ue.amount||0)),new _s(0));return he.reduce((Se,Ue)=>Se.plus(new _s(Ue.amount||0)),new _s(0)).minus(le)},U=t.filter(B=>{if(!B.isPiggybank||!B.isActive)return!1;if(B.createdAt)try{const Y=$ee(B.createdAt);if(!Y)return console.error(` Invalid creation date for piggybank ${B.name}:`,B.createdAt),!1;const ne=`${Y.getFullYear()}-${String(Y.getMonth()+1).padStart(2,"0")}`;return d>=ne}catch(Y){return console.error(` Error processing piggybank ${B.name}:`,Y,{createdAt:B.createdAt,typeofCreatedAt:typeof B.createdAt}),!1}return!0}),z=A;G.useEffect(()=>(R.current=setTimeout(()=>{D(!0)},8e3),n(),L(!0),()=>{R.current&&clearTimeout(R.current)}),[]),G.useEffect(()=>{O&&!r&&!E&&(D(!1),R.current&&clearTimeout(R.current))},[O,r,E]),G.useEffect(()=>{const B=t.filter(Y=>!Y.isPiggybank&&Y.isActive!==!1&&(g[d]||[]).some(ne=>ne.envelopeId===Y.id)).sort((Y,ne)=>{const ae=Y.orderIndex??0,he=ne.orderIndex??0;return ae-he});C(B),k.current=B},[t,g]);const P=(h[d]||[]).reduce((B,Y)=>B+Y.amount,0),W=(g[d]||[]).filter(B=>z.some(Y=>Y.id===B.envelopeId)||U.some(Y=>Y.id===B.envelopeId)).reduce((B,Y)=>B+Y.budgetedAmount,0),Q=P-W,$=G.useCallback(async B=>{if(!B.length)return;const Y=B.map(ne=>ne.id);try{await u(Y)}catch(ne){console.error("Failed to persist envelope order:",ne),S("Failed to save envelope order","error")}},[u,S]),H=G.useCallback(async B=>{await $(B)},[$]),ee=G.useCallback(B=>{m(d,B.id).catch(console.error),S(`Deleted "${B.name}"`,"neutral")},[m,d,S]),te=G.useCallback(async()=>{try{await _(d),S("Previous month budget copied","success")}catch(B){console.error("Error copying previous month:",B),S("Failed to copy previous month","error")}},[_,S]),fe=G.useCallback(async()=>{try{S(`"${d}" budget cleared`,"neutral")}catch(B){console.error("Error clearing month data:",B),S("Failed to clear month data","error")}},[d,S]);return{visibleEnvelopes:z,piggybanks:U,incomeSources:h,availableToBudget:Q,currentMonth:d,allocations:g,transactions:e,isLoading:r,isInitialLoading:j,isOnline:i,showTimeoutMessage:T,pendingSync:a,getEnvelopeBalance:M,fetchData:n,syncData:o,reorderEnvelopes:H,deleteIncomeSource:ee,clearMonthData:fe,copyFromPreviousMonth:te,setEnvelopeAllocation:x,testingConnectivity:c,localOrderRef:k,setLocalEnvelopes:C}},Kee=({currentMonth:t,onMonthChange:e})=>{const[n,r]=t.split("-").map(Number),a=["January","February","March","April","May","June","July","August","September","October","November","December"][r-1],o=()=>{let d=n,h=r-1;h<1&&(d=n-1,h=12);const g=`${d}-${h.toString().padStart(2,"0")}`;e(g)},c=()=>{let d=n,h=r+1;h>12&&(d=n+1,h=1);const g=`${d}-${h.toString().padStart(2,"0")}`;e(g)},u=()=>{const d=new Date,h=`${d.getFullYear()}-${(d.getMonth()+1).toString().padStart(2,"0")}`;e(h)};return y.jsx("div",{className:"py-1.5",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("button",{onClick:o,className:"p-2 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Previous month",children:y.jsx(Bz,{size:20})}),y.jsx("div",{className:"flex-1 text-center",children:y.jsxs("button",{onClick:u,className:"text-lg font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Click to go to current month",children:[a," ",n]})}),y.jsx("button",{onClick:c,className:"p-2 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Next month",children:y.jsx(Iu,{size:20})})]})})},Xee=({amount:t,totalIncome:e,totalAllocated:n,isLoading:r=!1,variant:i="default"})=>{const a=typeof n=="number"?n:parseFloat(n)||0,o=typeof e=="number"?e:parseFloat(e)||0,c=typeof t=="number"?t:parseFloat(t)||0,u=o>0?a/o*100:0,d=c>0,h=Math.abs(c)<.01,g=c<0,m=h?100:Math.min(u,100),x=g?"bg-red-500":"bg-green-500",_=h,E=g,S=d,D=_?{icon:m0,color:"text-green-600 dark:text-emerald-400",bgColor:"bg-green-50 dark:bg-emerald-900/20",borderColor:"border-green-200 dark:border-emerald-800",title:"Budget Balanced!",subtitle:"Every dollar has a job"}:E?{icon:LL,color:"text-red-600 dark:text-red-400",bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",title:"Over Budget",subtitle:"Reduce allocations or add income"}:{icon:OL,color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",title:"Available to Budget",subtitle:"Assign money to envelopes"};return r?y.jsxs("div",{className:i==="header"?"py-1.5 px-2":"bg-gray-50 dark:bg-zinc-900 rounded-2xl p-6 border border-gray-200 dark:border-zinc-800 animate-pulse",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-32"}),y.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20"})]}),y.jsx("div",{className:"h-2 bg-gray-200 dark:bg-zinc-700 rounded"})]}):y.jsxs("div",{className:i==="header"?"py-1.5 px-2":`rounded-2xl p-6 border ${D.bgColor} ${D.borderColor}`,children:[y.jsxs("div",{className:i==="header"?"flex items-center gap-3 mb-0.5":"flex items-center justify-between mb-4",children:[y.jsxs("div",{className:"flex-shrink-0 text-center",children:[y.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400",children:"Assigned:"}),y.jsxs("div",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["$",a.toFixed(2)]})]}),i==="header"&&y.jsx("div",{className:"flex-1 flex justify-center items-center",children:h?y.jsx("div",{className:"text-center",children:y.jsx("div",{className:"text-xs text-green-600 dark:text-emerald-400 font-medium",children:"Perfect! Every dollar has a job "})}):g?y.jsx("div",{className:"text-center",children:y.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 font-medium",children:"You're not in Congress!"})}):y.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-700 rounded-full",children:y.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${x}`,style:{width:`${m}%`}})})}),y.jsx("div",{className:"flex-shrink-0 text-center",children:d?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400",children:"Left to Budget:"}),y.jsxs("div",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["$",c.toFixed(2)]})]}):h?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"text-xs text-green-600 dark:text-emerald-400",children:"All Budgeted!"}),y.jsx("div",{className:"text-base font-semibold text-green-600 dark:text-emerald-400",children:"$0.00"})]}):y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"text-xs text-red-600 dark:text-red-400",children:"Over Budget:"}),y.jsxs("div",{className:"text-base font-semibold text-red-600 dark:text-red-400",children:["-$",Math.abs(c).toFixed(2)]})]})})]}),i!=="header"&&!_&&o>0&&y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-zinc-400",children:[y.jsx("span",{children:"Allocated"}),y.jsxs("span",{children:[u.toFixed(0),"% of income"]})]}),y.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2",children:y.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${E?"bg-red-500":S?"bg-blue-500":"bg-green-500"}`,style:{width:`${Math.min(u,100)}%`}})}),y.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-zinc-500",children:[y.jsxs("span",{children:["$",a.toFixed(2)," allocated"]}),y.jsxs("span",{children:["$",o.toFixed(2)," income"]})]})]}),i!=="header"&&y.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-zinc-700",children:y.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",o.toFixed(2)]}),y.jsx("div",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Total Income"})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",a.toFixed(2)]}),y.jsx("div",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Allocated"})]})]})})]})},Wee=()=>{const[t,e]=G.useState(!1),n=G.useRef(null),{currentUser:r,logout:i}=oa(),{handleUserLogout:a}=pr(),o=Wa();G.useEffect(()=>{const d=h=>{n.current&&!n.current.contains(h.target)&&e(!1)};if(t)return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[t]);const c=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{a(),i(),o("/"),e(!1)}catch(d){console.error("Logout failed:",d)}};if(!r)return null;const u=r.displayName?.charAt(0)?.toUpperCase()||r.email?.charAt(0)?.toUpperCase()||"U";return y.jsxs("div",{className:"relative",ref:n,children:[y.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors",children:[y.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-semibold",children:u}),y.jsx("span",{className:"hidden sm:block text-sm font-medium text-gray-700 dark:text-gray-300",children:r.displayName||r.email?.split("@")[0]||"User"}),y.jsx(Zk,{size:16,className:`text-gray-500 dark:text-gray-400 transition-transform ${t?"rotate-180":""}`})]}),t&&y.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-zinc-900 rounded-xl shadow-lg border border-gray-200 dark:border-zinc-800 overflow-hidden z-50",children:[y.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-zinc-800",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:u}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:r.displayName||r.email?.split("@")[0]||"User"}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 truncate",children:r.email})]})]})}),y.jsxs("div",{className:"py-1",children:[y.jsxs("button",{onClick:()=>{o("/settings"),e(!1)},className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:[y.jsx(Jk,{size:18,className:"text-gray-500 dark:text-gray-400"}),"Settings"]}),y.jsxs("button",{onClick:c,className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors",children:[y.jsx(TL,{size:18}),"Log Out"]})]})]})]})},qp=({children:t,onDelete:e,threshold:n=-100})=>{const r=D7(),[i,a]=G.useState(!1),o=G.useRef(0),c=()=>{a(!0),o.current=Date.now()},u=async(d,h)=>{const g=h.offset.x,m=h.velocity.x;if(setTimeout(()=>a(!1),100),g<n||g<-50&&m<-500){const x=e();x===!1?r.start({x:0}):x instanceof Promise&&x.then(_=>{_===!1&&r.start({x:0})})}else r.start({x:0})};return y.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[y.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:y.jsx(px,{className:"text-white w-6 h-6"})}),y.jsx(sl.div,{drag:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:c,onDragEnd:u,animate:r,className:`relative bg-white dark:bg-zinc-900 rounded-xl ${i?"z-20":"z-10"}`,style:{touchAction:"pan-y",pointerEvents:i?"none":"auto"},children:t})]})},oj=({message:t="Loading your budget...",showTimeout:e=!1})=>y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex flex-col items-center justify-center px-4",children:[y.jsx("div",{className:"mb-8",children:y.jsxs("div",{className:"relative",children:[y.jsx(nc,{size:48,className:"text-blue-500 animate-spin"}),y.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:y.jsx(ew,{size:24,className:"text-blue-600 dark:text-blue-400"})})]})}),y.jsxs("div",{className:"text-center space-y-3",children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 max-w-md",children:"This may take a moment on slow connections. We're fetching your budget data securely."})]}),y.jsxs("div",{className:"mt-12 w-full max-w-md space-y-4",children:[y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-24 animate-pulse"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),y.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),y.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]})]})}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-32 mb-2 animate-pulse"}),y.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20 animate-pulse"})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-28 animate-pulse"}),y.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),y.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-32 animate-pulse"}),y.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),y.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),y.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]})]}),e&&y.jsx("div",{className:"mt-8 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 max-w-md",children:y.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 text-center",children:"This is taking longer than usual. If you're on a very slow connection, this is normal. Your data will load shortly."})}),y.jsx("div",{className:"mt-8 w-full max-w-md",children:y.jsx("div",{className:"h-1 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:y.jsx("div",{className:"h-full bg-blue-500 rounded-full animate-pulse",style:{width:"60%"}})})})]}),Qee=({isVisible:t,onClose:e,mode:n,initialIncomeSource:r})=>{const{addIncomeSource:i,updateIncomeSource:a,currentMonth:o}=pr(),{showToast:c}=Gd(),[u,d]=G.useState(""),[h,g]=G.useState(""),[m,x]=G.useState(!1);G.useEffect(()=>{if(!t)return;const E=window.setTimeout(()=>{n==="edit"&&r?(d(r.name),g(r.amount.toString())):(d(""),g(""))},0);return()=>window.clearTimeout(E)},[t,n,r]);const _=async E=>{if(E.preventDefault(),!u.trim()||!h||parseFloat(h)<=0){c("Please fill in all required fields with valid values","error");return}x(!0);try{if(n==="add")await i(o,{name:u.trim(),amount:parseFloat(h),month:o,userId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),c("Income source added successfully","success");else{if(!r){c("Error: No income source to edit","error");return}await a(o,{...r,name:u.trim(),amount:parseFloat(h),updatedAt:new Date().toISOString()}),c(`Updated "${u.trim()}" income source`,"success")}e()}catch(S){console.error("Error saving income source:",S),c("Failed to save income source. Please try again.","error")}finally{x(!1)}};return t?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n==="add"?"Add Income Source":"Edit Income Source"}),y.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:""})]}),y.jsxs("form",{onSubmit:_,className:"p-6 space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Income Source Name *"}),y.jsx("input",{type:"text",value:u,onChange:E=>d(E.target.value),placeholder:"e.g., Primary Job, Freelance, Investments",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Amount *"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-zinc-400",children:"$"}),y.jsx("input",{type:"number",value:h,onChange:E=>g(E.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]})]}),y.jsxs("div",{className:"flex gap-3 pt-4",children:[y.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{type:"submit",disabled:m||!u.trim()||!h||parseFloat(h)<=0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?"Saving...":n==="add"?"Add Income":"Save Changes"})]})]})]})}):null},Zee=({isVisible:t,onClose:e,onConfirm:n,currentMonth:r,incomeCount:i,totalIncome:a,allocationCount:o,totalAllocated:c,isLoading:u=!1})=>{const[d,h]=G.useState(""),[g,m]=G.useState("confirm"),x=S=>{const[T,D]=S.split("-");return new Date(parseInt(T),parseInt(D)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},_=()=>{g==="confirm"?m("type"):g==="type"&&d==="START FRESH"&&n()},E=()=>{m("confirm"),h(""),e()};return t?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[y.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Start Fresh for ",x(r)]}),y.jsx("button",{onClick:E,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",disabled:u,children:""})]}),y.jsx("div",{className:"p-6 space-y-4",children:g==="confirm"?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:y.jsxs("div",{className:"flex items-start",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),y.jsxs("div",{className:"ml-3",children:[y.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action will permanently delete:"}),y.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:y.jsxs("ul",{className:"space-y-1",children:[y.jsxs("li",{children:[" ",i," income source",i!==1?"s":""," (totaling $",a.toFixed(2),"/month)"]}),y.jsxs("li",{children:[" ",o," envelope allocation",o!==1?"s":""," (totaling $",c.toFixed(2),")"]})]})})]})]})}),y.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:y.jsxs("div",{className:"flex",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),y.jsx("div",{className:"ml-3",children:y.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[y.jsx("strong",{children:"All other months will remain completely unchanged."})," This only affects the current month's budget data."]})})]})}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"You can undo this action within 30 seconds if you change your mind."})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"text-center",children:[y.jsxs("p",{className:"text-sm text-gray-900 dark:text-white mb-4",children:["Type ",y.jsx("strong",{children:"START FRESH"})," to confirm:"]}),y.jsx("input",{type:"text",value:d,onChange:S=>h(S.target.value),placeholder:"START FRESH",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-zinc-800 dark:text-white text-center font-mono text-lg",autoFocus:!0})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500 text-center",children:"This action cannot be undone after 30 seconds"})]})}),y.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200 dark:border-zinc-800",children:[y.jsx("button",{type:"button",onClick:E,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",disabled:u,children:"Cancel"}),y.jsx("button",{type:"button",onClick:_,disabled:u||g==="type"&&d!=="START FRESH",className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?"Clearing...":g==="confirm"?"Continue":"Start Fresh"})]})]})}):null},Jee=({currentMonth:t,onCopy:e,onDismiss:n,isLoading:r=!1})=>{const i=o=>{const[c,u]=o.split("-");return new Date(parseInt(c),parseInt(u)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},a=o=>{const[c,u]=o.split("-").map(Number);let d=c,h=u-1;return h<1&&(d=c-1,h=12),i(`${d}-${h.toString().padStart(2,"0")}`)};return y.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-6 mb-6",children:[y.jsxs("div",{className:"flex items-start justify-between",children:[y.jsxs("div",{className:"flex items-start space-x-3",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx(eL,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),y.jsxs("div",{className:"flex-1",children:[y.jsx("h3",{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:"Copy Previous Month?"}),y.jsxs("p",{className:"mt-1 text-sm text-blue-700 dark:text-blue-300",children:["Would you like to copy your budget setup from ",a(t)," to get started with ",i(t),"?"]}),y.jsx("p",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400",children:"This will copy your income sources and envelope allocations, but not transactions."})]})]}),y.jsx("button",{onClick:n,className:"flex-shrink-0 text-blue-400 hover:text-blue-600 dark:hover:text-blue-300 transition-colors","aria-label":"Dismiss",children:y.jsx(fv,{className:"h-5 w-5"})})]}),y.jsxs("div",{className:"mt-4 flex space-x-3",children:[y.jsx("button",{onClick:n,className:"flex-1 px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-300 bg-white dark:bg-zinc-800 border border-blue-300 dark:border-blue-600 rounded-lg hover:bg-blue-50 dark:hover:bg-zinc-700 transition-colors",disabled:r,children:"Start Fresh"}),y.jsx("button",{onClick:e,disabled:r,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?"Copying...":"Copy Previous Month"})]})]})},ete=({piggybank:t,balance:e,onNavigate:n})=>{const r=pr(M=>M.updatePiggybankContribution),i=Gd(M=>M.showToast),a=t.piggybankConfig?.targetAmount,o=t.piggybankConfig?.monthlyContribution??0,c=t.piggybankConfig?.color||"#3B82F6",u=t.piggybankConfig?.paused||!1;console.log(" PiggybankListItem data:",{piggybankId:t.id,piggybankName:t.name,monthlyContribution:o,targetAmount:a,isPaused:u,piggybankConfig:t.piggybankConfig});const d=typeof e=="number"?e:e.toNumber(),h=(M,U=1)=>{const z=M.replace("#",""),P=parseInt(z,16),W=P>>16&255,Q=P>>8&255,$=P&255;return`rgba(${W}, ${Q}, ${$}, ${U})`},g=`linear-gradient(135deg, ${h(c,.14)} 0%, ${h(c,.05)} 100%)`,m=h(c,.4),[x,_]=G.useState(!1),[E,S]=G.useState(o?o.toFixed(2):"0.00"),[T,D]=G.useState(!1),R=G.useRef(null),O=a&&a>0?Math.min(d/a*100,100):0,L=a&&d>=a;G.useEffect(()=>{x||S(o?o.toFixed(2):"0.00")},[o,x]),G.useEffect(()=>{x&&R.current&&(R.current.focus(),R.current.select())},[x]);const j=M=>{M.stopPropagation(),("touches"in M||M.type.startsWith("touch"))&&M.preventDefault(),!T&&(S(o?o.toFixed(2):"0.00"),_(!0))},A=()=>{_(!1),S(o?o.toFixed(2):"0.00")},C=async()=>{if(!x||T)return;const M=parseFloat(E);if(Number.isNaN(M)||M<0){i("Enter a valid contribution amount","error");return}if(M===o){_(!1);return}D(!0);try{console.log(" Calling updatePiggybankContribution:",{piggybankId:t.id,oldContribution:o,newContribution:M}),await r(t.id,M),console.log(" updatePiggybankContribution completed successfully"),i("Monthly contribution updated","success"),S(M.toFixed(2)),_(!1)}catch(U){console.error("Failed to update piggybank contribution",U),i("Failed to update contribution","error")}finally{D(!1)}},k=M=>{M.key==="Enter"?(M.preventDefault(),C()):M.key==="Escape"&&(M.preventDefault(),A())};return y.jsxs("div",{onClick:()=>n(t.id),className:"rounded-xl p-4 border transition-all cursor-pointer shadow-sm hover:shadow-md",style:{background:g,borderColor:m},children:[y.jsxs("div",{className:"flex items-start justify-between mb-3",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${c}20`},children:y.jsx(Ph,{size:20,style:{color:c}})}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:t.name}),L&&y.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:" Goal Reached!"})]})]}),y.jsxs("div",{className:"text-right",children:[y.jsxs("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["$",d.toFixed(2)]}),a&&y.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["of $",a.toFixed(2)]})]})]}),a&&a>0&&y.jsxs("div",{className:"mb-3",children:[y.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-800 rounded-full h-2 overflow-hidden",children:y.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${O}%`,backgroundColor:c}})}),y.jsxs("div",{className:"flex justify-between items-center mt-1",children:[y.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:[O.toFixed(0),"% complete"]}),y.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["$",(a-d).toFixed(2)," to go"]}),y.jsx("span",{className:"ml-2 px-2 py-0.5 text-[11px] font-semibold rounded-full uppercase tracking-wide",style:{backgroundColor:h(c,.15),color:c},children:"Piggybank"})]})]}),y.jsx("div",{className:"mt-2",children:u?y.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-zinc-400",children:[y.jsx(IL,{size:14,className:"text-orange-500"}),y.jsx("span",{className:"text-orange-600 dark:text-orange-400",children:"Paused"})]}):y.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-zinc-400",children:[y.jsx(UL,{size:14,style:{color:c}}),x?y.jsxs("form",{onSubmit:M=>{M.preventDefault(),C()},className:"flex items-center gap-2",children:[y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{ref:R,type:"number",min:"0",step:"0.01",value:E,onChange:M=>S(M.target.value),onBlur:C,onKeyDown:k,disabled:T,autoFocus:!0,className:"w-28 pl-6 pr-3 py-1.5 rounded-lg border border-gray-300 dark:border-zinc-600 bg-white dark:bg-zinc-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),T&&y.jsx(vL,{size:16,className:"animate-spin text-gray-400"})]}):y.jsxs("div",{onClick:j,onTouchEnd:j,className:"font-medium text-gray-900 dark:text-white hover:underline cursor-pointer",children:["$",o.toFixed(2),"/month"]})]})})]})},Jf=(t,e=1)=>{const n=t.replace("#",""),r=parseInt(n,16),i=r>>16&255,a=r>>8&255,o=r&255;return`rgba(${i}, ${a}, ${o}, ${e})`},tte=12,nte=(t,e,n)=>Math.min(Math.max(t,e),n),rte=({env:t,budgetedAmount:e,remainingBalance:n,editingEnvelopeId:r,setEditingEnvelopeId:i,editingAmount:a,setEditingAmount:o,handleBudgetSave:c,navigate:u,inputRef:d,transactions:h,currentMonth:g,setMoveableRef:m,isReorderingActive:x,activelyDraggingId:_,onItemDragStart:E,onMoveUp:S,onMoveDown:T,isFirst:D,isLast:R,isReorderUnlocked:O})=>{const L=!!t.isPiggybank,j=t.piggybankConfig?.color||"#3B82F6",A=L?`linear-gradient(135deg, ${Jf(j,.18)} 0%, ${Jf(j,.08)} 100%)`:void 0,C=L?Jf(j,.5):void 0,k=G.useRef(null),[M,U]=G.useState(!1),z=h.filter(B=>B.envelopeId===t.id&&B.month===g),P=z.filter(B=>B.type==="Expense"),W=z.filter(B=>B.type==="Income"),Q=P.reduce((B,Y)=>B+(Y.amount||0),0),$=W.reduce((B,Y)=>B+(Y.amount||0),0),H=Math.max(0,Q/$*100),ee=B=>{if(M||x){B.preventDefault(),B.stopPropagation();return}if(r===t.id){B.preventDefault(),B.stopPropagation();return}u(`/envelope/${t.id}`)};G.useEffect(()=>{_&&_!==t.id&&U(!1)},[_,t.id]),G.useEffect(()=>{_===t.id&&(U(!0),E(t.id))},[_,t.id,E]),G.useEffect(()=>{if(!_&&M){const B=setTimeout(()=>{U(!1)},300);return()=>clearTimeout(B)}},[_,M]);const te=y.jsxs("div",{className:"flex items-center gap-2 w-full",children:[O&&y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsx("button",{onClick:B=>{B.stopPropagation(),S()},disabled:D,className:`p-1 rounded transition-colors ${D?"text-gray-300 dark:text-zinc-700 cursor-not-allowed":"text-gray-500 dark:text-zinc-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,title:"Move up","aria-label":"Move envelope up",children:y.jsx(Gz,{size:18})}),y.jsx("button",{onClick:B=>{B.stopPropagation(),T()},disabled:R,className:`p-1 rounded transition-colors ${R?"text-gray-300 dark:text-zinc-700 cursor-not-allowed":"text-gray-500 dark:text-zinc-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,title:"Move down","aria-label":"Move envelope down",children:y.jsx(Zk,{size:18})})]}),y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[L&&y.jsx("span",{className:"w-8 h-8 rounded-full flex items-center justify-center border",style:{borderColor:Jf(j,.4),backgroundColor:Jf(j,.15),color:j},children:y.jsx(Ph,{size:16})}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:t.name}),L&&y.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",style:{color:j},children:"Piggybank"})]})]}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("div",{className:"flex items-center space-x-4",onPointerDown:B=>B.stopPropagation(),children:r===t.id?y.jsxs("div",{className:"flex items-center space-x-1",children:[y.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),y.jsx("form",{onSubmit:B=>{B.preventDefault(),c()},children:y.jsx("input",{ref:d,type:"number",value:a,onChange:B=>o(B.target.value),onBlur:c,className:"w-24 px-2 py-1 text-sm border rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white",step:"0.01",autoFocus:!0})})]}):y.jsxs("div",{onClick:B=>{B.preventDefault(),B.stopPropagation(),i(t.id),o(e.toString())},onTouchEnd:B=>{B.preventDefault(),B.stopPropagation(),i(t.id),o(e.toString())},className:"flex items-center space-x-1 hover:bg-gray-200 dark:hover:bg-zinc-700 px-3 py-2 rounded transition-colors cursor-pointer js-budget-target",children:[y.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),y.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["$",e.toFixed(2)]})]})}),y.jsxs("div",{className:"text-right",children:[y.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 block",children:"Remaining"}),y.jsxs("span",{className:`font-bold ${(typeof n=="number"?n:n.toNumber())<0||100-H<=5?"text-red-500":H>=80?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-emerald-400"}`,children:["$",(typeof n=="number"?n:n.toNumber()).toFixed(2)]})]})]}),e>0&&y.jsx("div",{className:"mt-3",onClick:B=>B.stopPropagation(),children:y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-zinc-400 mb-1",children:[y.jsx("span",{children:"Budget Used"}),y.jsxs("span",{children:[H.toFixed(0),"%"]})]}),y.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2 overflow-hidden",children:y.jsx("div",{className:`h-full transition-all duration-300 ease-out ${(typeof n=="number"?n:n.toNumber())<0||100-H<=5?"bg-red-500":H>=80?"bg-yellow-500":"bg-green-400"}`,style:{width:`${Math.max(100-H,2)}%`}})})]})})]})]}),fe=_===t.id;return y.jsx(sl.div,{layout:!fe,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},ref:B=>{m(t.id)(B),k.current=B},onClick:ee,style:{boxShadow:"0 1px 2px rgba(15,23,42,0.08)",background:A,borderColor:C,cursor:"pointer"},className:`p-4 rounded-xl active:scale-[0.99] transition-all select-none border ${L?"bg-white/70 dark:bg-zinc-800/80":"bg-gray-50 dark:bg-zinc-800 border-transparent"}`,children:te})},ite=()=>{const{visibleEnvelopes:t,piggybanks:e,incomeSources:n,availableToBudget:r,currentMonth:i,allocations:a,transactions:o,isLoading:c,isInitialLoading:u,isOnline:d,showTimeoutMessage:h,pendingSync:g,getEnvelopeBalance:m,syncData:x,reorderEnvelopes:_,deleteIncomeSource:E,clearMonthData:S,copyFromPreviousMonth:T,setEnvelopeAllocation:D,testingConnectivity:R,localOrderRef:O,setLocalEnvelopes:L}=Yee(),{setMonth:j}=pr(),A=Wa(),[C,k]=G.useState(!1),[M,U]=G.useState("add"),[z,P]=G.useState(null),[W,Q]=G.useState(!1),[$,H]=G.useState(!1),[ee,te]=G.useState(!1),fe=G.useRef(null),[B,Y]=G.useState(null),[ne,ae]=G.useState(""),he=G.useRef(null),[le,ge]=G.useState(()=>localStorage.getItem("envelopeReorderUnlocked")==="true");G.useEffect(()=>{localStorage.setItem("envelopeReorderUnlocked",le.toString())},[le]),G.useEffect(()=>{if(!u){const Oe=(n[i]||[]).length===0&&(a[i]||[]).length===0;te(Oe)}},[u,n,a,i]),G.useEffect(()=>{B&&he.current&&(he.current.focus(),he.current.select())},[B]);const xe=G.useCallback(Oe=>Ze=>{Ze?Se.current[Oe]=Ze:delete Se.current[Oe]},[]),Se=G.useRef({}),Ue=G.useRef({}),[Ee,Ce]=G.useState(null),He=G.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0}),[je,$e]=G.useState(!1),Qe=G.useRef(null),vt=G.useRef(0),yt=G.useCallback(()=>$e(!0),[]),Pe=G.useCallback(()=>{$e(!1),O.current.length&&_(O.current)},[_]),Ye=G.useCallback(Oe=>{},[]),Pt=G.useCallback(Oe=>{B!==Oe&&A(`/envelope/${Oe}`)},[B,A]);G.useEffect(()=>{const Oe=()=>{Object.values(Ue.current).forEach(Gt=>Gt?.destroy()),Ue.current={}};if(!t.length)return;const Ze=()=>{le&&t.forEach(Gt=>{const Zt=Se.current[Gt.id];if(!Zt)return;const En=Ue.current[Gt.id];if(En){En.target=Zt;return}const Dt=new H$(Qe.current,{target:Zt,draggable:le,throttleDrag:0,edgeDraggable:!1,startDragRotate:0,throttleDragRotate:0,rotatable:!1,scalable:!1,resizable:!1,warpable:!1,pinchable:!1,snappable:!0,snapThreshold:5,isDisplaySnapDigit:!1,isDisplayInnerSnapDigit:!1,snapGap:!0,snapDirections:{top:!0,bottom:!0,left:!1,right:!1},elementSnapDirections:{top:!0,bottom:!0,left:!1,right:!1},clickable:!0,preventClickDefault:!1,preventClickEventOnDrag:!0,checkInput:!1,dragArea:!0,hideDefaultLines:!0,hideChildMoveableDefaultLines:!0,renderDirections:[]});Dt.on("dragStart",rr=>{const un=O.current.findIndex(jt=>jt.id===Gt.id),We=rr.target,Tt=We.getBoundingClientRect().height+tte;Ce(Gt.id),He.current={activeId:Gt.id,startIndex:un,currentIndex:un,itemHeight:Tt},We&&(We.style.transition="none",We.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",We.style.zIndex="20"),yt()});let Ct=null;Dt.on("drag",rr=>{const un=rr.target;Ct!==null&&cancelAnimationFrame(Ct),Ct=requestAnimationFrame(()=>{const We=He.current;if(We.activeId!==Gt.id)return;const Ot=rr.beforeTranslate[1];un.style.transform=`translateY(${Ot}px)`,un.style.transition="none";const{itemHeight:Tt,startIndex:jt}=We;if(!Tt)return;const Rn=Math.round(Ot/Tt),mn=nte(jt+Rn,0,O.current.length-1);mn!==We.currentIndex&&(We.currentIndex=mn,O.current.forEach((Pc,Ja)=>{if(Pc.id===Gt.id)return;const zr=Se.current[Pc.id];if(!zr)return;let gi=0;jt<mn?Ja>jt&&Ja<=mn&&(gi=-Tt):jt>mn&&Ja>=mn&&Ja<jt&&(gi=Tt),zr.style.transform=gi?`translateY(${gi}px)`:"",zr.style.transition="transform 0.2s ease"})),Ct=null})}),Dt.on("dragEnd",rr=>{Ct!==null&&(cancelAnimationFrame(Ct),Ct=null);const un=rr.target,We=He.current,{startIndex:Ot,currentIndex:Tt}=We;if(un.style.transform="",un.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",un.style.boxShadow="",O.current.forEach(jt=>{if(jt.id===Gt.id)return;const Rn=Se.current[jt.id];Rn&&(Rn.style.transform="",Rn.style.transition="")}),Ot!==Tt){const jt=[...O.current],[Rn]=jt.splice(Ot,1);jt.splice(Tt,0,Rn),O.current=jt,L(jt)}setTimeout(()=>{un.style.zIndex="",un.style.transition="",Ce(null)},300),He.current={activeId:null,startIndex:0,currentIndex:0,itemHeight:0},vt.current=Date.now(),Pe()}),Dt.on("click",rr=>{const un=rr.inputEvent.target;un.closest(".js-budget-target")||un.tagName==="INPUT"||Pt(Gt.id)}),Ue.current[Gt.id]=Dt})},Ui=window.setTimeout(Ze,80);return()=>{clearTimeout(Ui),Oe()}},[t,yt,Pe,Pt,le]);const wn=async()=>{if(B)try{const Oe=parseFloat(ne)||0;await D(B,Oe)}catch(Oe){console.error("Failed to save budget amount:",Oe)}finally{Y(null),ae("")}},cn=()=>{U("add"),P(null),k(!0)},pt=Oe=>{fe.current&&clearTimeout(fe.current),!W&&(U("edit"),P(Oe),k(!0))},Vt=Oe=>{fe.current&&clearTimeout(fe.current),Q(!0),E(Oe),setTimeout(()=>Q(!1),500)},gr=()=>{k(!1),P(null)},mr=()=>{H(!0)},ei=async()=>{H(!1),await S()},qs=async()=>{te(!1),await T()};return u?y.jsx(oj,{message:h?"Still loading... This is normal on slow connections":"Loading your budget...",showTimeout:h}):y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .moveable-control { display: none !important; }
        .moveable-origin { display: none !important; }
        .moveable-line { display: none !important; }
      `}}),y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[y.jsxs("header",{className:"fixed top-0 left-0 right-0 z-50 bg-white dark:bg-zinc-900 border-b border-gray-100 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+4px)] pb-1",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("div",{className:"flex items-center gap-2",children:d?c?y.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[y.jsx(nc,{size:16,className:"animate-spin"}),y.jsx("span",{className:"text-sm font-medium",children:"Syncing..."})]}):g?y.jsxs("button",{onClick:x,className:"flex items-center gap-1 text-orange-500 hover:text-orange-600 transition-colors",title:"Sync pending - tap to sync",children:[y.jsx(nc,{size:16}),y.jsx("span",{className:"text-sm font-medium",children:"Sync"})]}):y.jsxs("div",{className:"flex items-center gap-1 text-green-500",children:[y.jsx(JL,{size:16}),y.jsx("span",{className:"text-sm font-medium",children:"Online"})]}):y.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[y.jsx(QL,{size:16}),y.jsx("span",{className:"text-sm font-medium",children:R?"Testing...":c?"Saving...":"Offline"})]})}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("button",{onClick:()=>ge(!le),className:`transition-colors ${le?"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300":"text-gray-500 hover:text-gray-600 dark:text-zinc-400 dark:hover:text-zinc-300"}`,title:le?"Lock envelope order":"Unlock to reorder envelopes",children:le?y.jsx(_L,{size:22}):y.jsx(EL,{size:22})}),y.jsx("button",{onClick:mr,className:"text-orange-500 hover:text-orange-600 dark:hover:text-orange-400 transition-colors",title:"Start Fresh - Clear current month budget",children:y.jsx(nc,{size:22})}),y.jsx(Wee,{})]})]}),y.jsx(Xee,{amount:r,totalIncome:(n[i]||[]).reduce((Oe,Ze)=>Oe+Ze.amount,0),totalAllocated:(a[i]||[]).filter(Oe=>t.some(Ze=>Ze.id===Oe.envelopeId)||e.some(Ze=>Ze.id===Oe.envelopeId)).reduce((Oe,Ze)=>Oe+Ze.budgetedAmount,0),isLoading:c,variant:"header"}),y.jsx(Kee,{currentMonth:i,onMonthChange:Oe=>{te(!1),j(Oe)}})]}),y.jsxs("div",{className:"pt-40 p-4 max-w-md mx-auto space-y-6",children:[ee&&y.jsx(Jee,{currentMonth:i,onCopy:qs,onDismiss:()=>te(!1)}),y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Income Sources"}),y.jsx("button",{onClick:cn,className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:y.jsx(gm,{size:20})})]}),(n[i]||[]).length===0?y.jsx("div",{className:"text-center py-6",children:y.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm",children:"No income sources yet. Add your monthly income."})}):y.jsx("div",{className:"space-y-3",children:y.jsx(dc,{initial:!1,mode:"popLayout",children:(n[i]||[]).map(Oe=>y.jsx(sl.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(qp,{onDelete:()=>Vt(Oe),children:y.jsxs("div",{className:"flex justify-between items-center py-3 px-4 bg-gray-50 dark:bg-zinc-800 rounded-xl cursor-pointer",onClick:()=>pt(Oe),children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:Oe.name}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Monthly income"})]}),y.jsxs("p",{className:"font-semibold text-green-600 dark:text-emerald-400",children:["$",Oe.amount.toFixed(2)]})]})})},Oe.id))})})]}),y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Spending Envelopes"}),y.jsx("button",{onClick:()=>A("/add-envelope"),className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",title:"Create New Envelope",children:y.jsx(gm,{size:20})})]}),t.length===0?y.jsxs("div",{className:"text-center py-6",children:[y.jsx(ew,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto mb-3"}),y.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm mb-4",children:t.length===0?"No envelopes added to this month. Copy from previous month or add new ones.":"No envelopes yet. Create one to get started."}),y.jsx("button",{onClick:()=>A("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:"Create First Envelope"})]}):y.jsx("div",{ref:Qe,children:y.jsx(dc,{initial:!1,children:y.jsx("div",{className:"space-y-3",children:t.map((Oe,Ze)=>{const Gt=(a[i]||[]).find(Ct=>Ct.envelopeId===Oe.id)?.budgetedAmount||0,Zt=m(Oe.id),En=()=>{if(Ze===0)return;const Ct=[...O.current];[Ct[Ze-1],Ct[Ze]]=[Ct[Ze],Ct[Ze-1]],O.current=Ct,L(Ct),_(Ct)},Dt=()=>{if(Ze===t.length-1)return;const Ct=[...O.current];[Ct[Ze],Ct[Ze+1]]=[Ct[Ze+1],Ct[Ze]],O.current=Ct,L(Ct),_(Ct)};return y.jsx(rte,{env:Oe,budgetedAmount:Gt,remainingBalance:Zt,editingEnvelopeId:B,setEditingEnvelopeId:Y,editingAmount:ne,setEditingAmount:ae,handleBudgetSave:wn,navigate:A,inputRef:he,transactions:o,currentMonth:i,setMoveableRef:xe,isReorderingActive:je,activelyDraggingId:Ee,onItemDragStart:Ye,onMoveUp:En,onMoveDown:Dt,isFirst:Ze===0,isLast:Ze===t.length-1,isReorderUnlocked:le},Oe.id)})})})})]}),y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[y.jsx(Ph,{size:20,className:"text-blue-600 dark:text-blue-400"}),"Piggybanks"]}),y.jsx("button",{onClick:()=>A("/add-envelope?type=piggybank"),className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",title:"Create New Piggybank",children:y.jsx(gm,{size:20})})]}),e.length>0?y.jsx("div",{className:"space-y-3",children:e.map(Oe=>y.jsx(ete,{piggybank:Oe,balance:new _s(typeof m(Oe.id)=="number"?m(Oe.id):0),onNavigate:Ze=>A(`/envelope/${Ze}`)},Oe.id))}):y.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-zinc-400",children:[y.jsx(Ph,{size:48,className:"mx-auto mb-3 opacity-30"}),y.jsx("p",{className:"text-sm",children:"No piggybanks yet"}),y.jsx("p",{className:"text-xs mt-1",children:"Click the + button above to create your first piggybank"})]})]}),y.jsx("button",{onClick:()=>A("/add-transaction"),className:"fixed bottom-32 right-6 md:bottom-20 bg-blue-600 text-white p-4 rounded-full shadow-lg active:scale-90 transition-transform z-40 pointer-events-auto",children:y.jsx(gm,{size:28})}),y.jsx(Qee,{isVisible:C,onClose:gr,mode:M,initialIncomeSource:z}),y.jsx(Zee,{isVisible:$,onClose:()=>H(!1),onConfirm:ei,currentMonth:i,incomeCount:(n[i]||[]).length,totalIncome:(n[i]||[]).reduce((Oe,Ze)=>Oe+Ze.amount,0),allocationCount:(a[i]||[]).filter(Oe=>t.some(Ze=>Ze.id===Oe.envelopeId)||e.some(Ze=>Ze.id===Oe.envelopeId)).length,totalAllocated:(a[i]||[]).filter(Oe=>t.some(Ze=>Ze.id===Oe.envelopeId)||e.some(Ze=>Ze.id===Oe.envelopeId)).reduce((Oe,Ze)=>Oe+Ze.budgetedAmount,0)})]})]})]})},ate=[{id:"1",name:"Amazon Prime",network:"Visa",last4:"7474",color:"#232f3e"},{id:"2",name:"Apple Card",network:"Mastercard",last4:"0274",color:"#e3e3e3"},{id:"3",name:"AA Credit Union",network:"Visa",last4:"3386",color:"#5494DA"}],lj=({selectedCard:t,onCardSelect:e,initialCards:n=ate,disabled:r=!1,isUserSelected:i=!1})=>{const[a,o]=G.useState(n[0]),[c,u]=G.useState(!1),[d,h]=G.useState(!1),[g,m]=G.useState(n),[x,_]=G.useState(null),[E,S]=G.useState({name:"",network:"Visa",last4:"",color:"#3b82f6"}),T=t||a;G.useEffect(()=>{!t&&e&&g.length>0&&e(g[0])},[t,e,g]);const D=k=>{r||(k.id==="add-new"?h(!0):(o(k),e?.(k),u(!1)))},R=()=>{r||u(!c)},O=k=>{r||_(k)},L=()=>{if(x&&!r){const k=g.filter(M=>M.id!==x.id);if(m(k),T.id===x.id&&k.length>0){const M=k[0];o(M),e?.(M)}_(null)}},j=()=>{_(null)},A=()=>{if(r)return;if(E.last4.length!==4||!/^\d{4}$/.test(E.last4)){alert("Please enter exactly 4 digits for the last 4 digits");return}if(!E.name.trim()){alert("Please enter a card name");return}const k={id:`custom-${Date.now()}`,name:E.name.trim(),network:E.network,last4:E.last4,color:E.color},M=[...g,k];m(M),o(k),e?.(k),h(!1),u(!1),S({name:"",network:"Visa",last4:"",color:"#3b82f6"})},C=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#6b7280","#0f4c81","#fdbb30","#7fb5b5","#232f3e","#e3e3e3"];return y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Payment Method",!i&&y.jsx("span",{className:"ml-2 text-xs text-blue-600 dark:text-blue-400 font-medium",children:"(Default selected)"})]}),y.jsxs("div",{onClick:R,className:`flex items-center gap-4 p-3 border rounded-lg transition-colors ${r?"cursor-not-allowed opacity-50 border-gray-300 dark:border-gray-600":"cursor-pointer hover:bg-gray-50 dark:hover:bg-zinc-800 border-gray-300 dark:border-gray-600"} ${i?"":"ring-2 ring-blue-200 dark:ring-blue-800"}`,children:[y.jsxs("div",{className:"w-[70px] h-[40px] rounded-lg flex flex-col justify-between p-[6px] shadow-lg text-white font-mono text-xs",style:{backgroundColor:T.color},children:[y.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:T.network}),y.jsxs("span",{className:"text-left text-[9px] leading-none",children:[" ",T.last4]})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:T.name}),y.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(...",T.last4,")"]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-gray-400",children:c?"":""}),!i&&y.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",title:"Default payment method - tap to change"})]})]}),c&&y.jsx("div",{className:"card-stack-dropdown",children:y.jsx("div",{className:"card-stack",children:y.jsx(dc,{initial:!1,mode:"popLayout",children:[...g,{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}].map((k,M)=>{const U=T.id===k.id,z=k.id==="add-new";return y.jsx(sl.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(qp,{onDelete:()=>!z&&!r&&O(k),threshold:-80,children:y.jsxs("div",{className:`card-stack-item ${U?"selected":""} ${z?"add-new-card":""}`,onClick:()=>D(k),style:{backgroundColor:z?"#f3f4f6":k.color,color:z?"#374151":k.color==="#e3e3e3"?"#000":"#fff",zIndex:g.length-M},children:[y.jsxs("div",{className:"card-header",children:[y.jsx("span",{className:"card-network",children:z?"":k.network}),U&&!z&&y.jsx("span",{className:"selected-indicator",children:""})]}),y.jsxs("div",{className:"card-details",children:[y.jsx("div",{className:"card-name",children:k.name}),y.jsx("div",{className:"card-number",children:z?"":` ${k.last4}`})]}),z&&y.jsx("div",{className:"add-icon",children:y.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[y.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),y.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})})},k.id)})})})})]}),d&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-md mx-4",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add New Card"}),y.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Card Name"}),y.jsx("input",{type:"text",value:E.name,onChange:k=>S({...E,name:k.target.value}),placeholder:"e.g., My Chase Card",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Network"}),y.jsxs("select",{value:E.network,onChange:k=>S({...E,network:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[y.jsx("option",{value:"Visa",children:"Visa"}),y.jsx("option",{value:"Mastercard",children:"Mastercard"}),y.jsx("option",{value:"Amex",children:"Amex"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last 4 Digits"}),y.jsx("input",{type:"text",value:E.last4,onChange:k=>S({...E,last4:k.target.value.replace(/\D/g,"").slice(0,4)}),placeholder:"1234",maxLength:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Card Color"}),y.jsx("div",{className:"grid grid-cols-6 gap-2",children:C.map(k=>y.jsx("button",{onClick:()=>S({...E,color:k}),className:`w-full h-10 rounded-lg border-2 transition-all ${E.color===k?"border-blue-500 scale-110":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:k}},k))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview"}),y.jsxs("div",{className:"w-full h-20 rounded-lg flex flex-col justify-between p-3 shadow-lg text-white font-mono text-xs",style:{backgroundColor:E.color},children:[y.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:E.network}),y.jsxs("span",{className:"text-left text-[9px] leading-none",children:[" ",E.last4||"0000"]})]})]}),y.jsxs("div",{className:"flex gap-3 pt-4",children:[y.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:A,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Add Card"})]})]})]})}),x&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-sm mx-4",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:y.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Delete Card"}),y.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete ",y.jsx("span",{className:"font-medium",children:x.name}),"?"]}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{onClick:j,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:L,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors",children:"Delete"})]})]})})})]})},cj=({isVisible:t,onClose:e,mode:n,currentEnvelope:r,initialTransaction:i})=>{const{addTransaction:a,updateTransaction:o,deleteTransaction:c,currentMonth:u}=pr(),[d,h]=G.useState(""),[g,m]=G.useState(""),[x,_]=G.useState(""),[E,S]=G.useState(new Date().toISOString().split("T")[0]),[T,D]=G.useState(null);if(G.useEffect(()=>{if(!t)return;const A=window.setTimeout(()=>{if(n==="edit"&&i){h(i.amount.toString()),m(i.merchant||""),_(i.description),D(i.paymentMethod||null);try{const C=new Date(i.date);isNaN(C.getTime())?(console.warn("Invalid date in transaction:",i.date),S(new Date().toISOString().split("T")[0])):S(C.toISOString().split("T")[0])}catch(C){console.error("Error parsing transaction date:",C),S(new Date().toISOString().split("T")[0])}}else h(""),m(""),_(""),S(new Date().toISOString().split("T")[0]),D(null)},0);return()=>window.clearTimeout(A)},[t,n,i]),!t)return null;const R=async A=>{A.preventDefault();const C=parseFloat(d);if(isNaN(C)||C<=0){console.log(" Invalid amount:",d);return}console.log(" Saving transaction:",{mode:n,amount:C,note:x,date:E,envelopeId:r.id,paymentMethod:T});try{const k=new Date(E),M=`${k.getFullYear()}-${(k.getMonth()+1).toString().padStart(2,"0")}`;if(M!==u){const U=`This transaction date (${M}) does not match the current budget month (${u}). Are you sure you want to save it?`;if(!window.confirm(U))return}n==="add"?(console.log(" Adding income transaction"),await a({amount:C,description:x,merchant:g||void 0,date:new Date(E).toISOString(),envelopeId:r.id,type:"Income",reconciled:!1,paymentMethod:T||void 0})):n==="spend"?(console.log(" Adding expense transaction"),await a({amount:C,description:x,merchant:g||void 0,date:new Date(E).toISOString(),envelopeId:r.id,type:"Expense",reconciled:!1,paymentMethod:T||void 0})):n==="edit"&&i&&(console.log(" Updating transaction"),await o({...i,amount:C,description:x,merchant:g||void 0,date:new Date(E).toISOString(),paymentMethod:T||void 0})),console.log(" Transaction saved successfully"),e()}catch(k){console.error(" Error saving transaction:",k),alert("Failed to save transaction: "+(k instanceof Error?k.message:"Unknown error"))}},O=()=>{!i||!i.id||window.confirm("Are you sure you want to delete this transaction?")&&(c(i.id),e())},L=n==="add"?"Add Money":n==="spend"?"Spend Money":"Edit Transaction",j=n==="add"?"text-green-500":"text-red-500";return y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[y.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[y.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),y.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:L}),y.jsx("button",{onClick:R,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!d||parseFloat(d)<=0,children:"Save"})]}),y.jsxs("form",{onSubmit:R,className:"p-6 space-y-6",children:[y.jsxs("div",{className:"text-center",children:[y.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),y.jsxs("div",{className:"relative inline-block",children:[y.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${j}`,children:"$"}),y.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:d,onChange:A=>{const C=A.target.value;(C===""||!isNaN(parseFloat(C))&&parseFloat(C)>=0)&&h(C)},onKeyDown:A=>{(A.key==="e"||A.key==="E"||A.key==="+"||A.key==="-")&&A.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${j} placeholder-gray-700`})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),y.jsx("input",{type:"text",value:g,onChange:A=>m(A.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsx(lj,{selectedCard:T,onCardSelect:D}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),y.jsx("input",{type:"text",value:x,onChange:A=>_(A.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsxs("div",{className:"flex justify-between items-center mb-1",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const A=new Date(E);return`${A.getFullYear()}-${(A.getMonth()+1).toString().padStart(2,"0")}`!==u?y.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[y.jsx(Ku,{size:14}),y.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),y.jsx("input",{type:"date",value:E,onChange:A=>{console.log("Date changed to:",A.target.value),S(A.target.value)},required:!0,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),n==="edit"&&y.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:y.jsxs("button",{type:"button",onClick:O,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[y.jsx(eN,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})})},ste=({isVisible:t,onClose:e,sourceEnvelope:n})=>{const{envelopes:r,transferFunds:i}=pr(),[a,o]=G.useState(""),[c,u]=G.useState(""),[d,h]=G.useState(""),[g,m]=G.useState(new Date().toISOString().split("T")[0]),x=r.filter(S=>S.id!==n.id);if(G.useEffect(()=>{if(!t)return;const S=window.setTimeout(()=>{o(""),u(""),h(""),m(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(S)},[t]),!t)return null;const _=S=>{S.preventDefault();const T=parseFloat(c);isNaN(T)||T<=0||!a||(i(n.id,a,T,d,new Date(g)),e())},E=r.find(S=>S.id===a);return y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[y.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[y.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),y.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),y.jsx("button",{onClick:_,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!c||parseFloat(c)<=0||!a,children:"Transfer"})]}),y.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),y.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:n.name})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),y.jsxs("select",{value:a,onChange:S=>o(S.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[y.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),x.map(S=>y.jsx("option",{value:S.id,className:"bg-white dark:bg-zinc-900",children:S.name},S.id))]})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),y.jsxs("div",{className:"relative inline-block",children:[y.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),y.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:c,onChange:S=>u(S.target.value),onKeyDown:S=>{(S.key==="e"||S.key==="E"||S.key==="+"||S.key==="-")&&S.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),y.jsx("input",{type:"text",value:d,onChange:S=>h(S.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),y.jsx("input",{type:"date",value:g,onChange:S=>m(S.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),E&&c&&parseFloat(c)>0&&y.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",y.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(c).toFixed(2)]})," from"," ",y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:n.name})," to"," ",y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:E.name})]})]})]})})},ote=t=>{if(!t)return"No Date";try{let e;return t&&typeof t=="object"&&t.toDate&&typeof t.toDate=="function"?e=t.toDate():typeof t=="number"?t<1e10?e=new Date((t+978307200)*1e3):e=new Date(t):e=new Date(t),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return console.error("Date error:",e),"Error"}},lte=t=>{const e=typeof t=="string"?parseFloat(t):t;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},uj=({transaction:t,envelopeName:e,onReconcile:n,onEdit:r})=>{if(!t)return null;console.log(" Transaction payment method:",t.paymentMethod);const i=t.type==="Income",a=t.type==="Expense";let o="text-gray-900 dark:text-white";return i&&(o="text-green-600 dark:text-green-400"),a&&(o="text-red-600 dark:text-red-400"),y.jsxs("div",{onClick:r,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 transition-colors cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[y.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:t.merchant||t.description||"No Description"}),t.reconciled&&y.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),t.merchant&&t.description&&t.description!==t.merchant&&y.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400 truncate",children:t.description}),y.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1 flex-wrap",children:[y.jsx("span",{children:ote(t.date)}),e&&y.jsxs(y.Fragment,{children:[y.jsx("span",{children:""}),y.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]}),t.paymentMethod&&y.jsxs(y.Fragment,{children:[y.jsx("span",{children:""}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"w-[12px] h-[8px] rounded-[2px] flex-shrink-0",style:{backgroundColor:t.paymentMethod.color}}),y.jsx("span",{className:"truncate max-w-[80px]",children:t.paymentMethod.name})]})]})]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${o}`,children:[a?"-":i?"+":"",lte(t.amount)]}),n?y.jsx("button",{type:"button",onClick:c=>{c.stopPropagation(),n()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":t.reconciled?"Mark as unreconciled":"Mark as reconciled",children:t.reconciled?y.jsx(h2,{className:"text-green-500",size:20}):y.jsx(g2,{className:"text-gray-400",size:20})}):y.jsx("span",{children:t.reconciled?y.jsx(h2,{className:"text-green-500",size:20}):y.jsx(g2,{className:"text-gray-400",size:20})})]})]})},cte=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),ute=()=>{const{id:t}=N6(),{envelopes:e,transactions:n,fetchData:r,isLoading:i,deleteEnvelope:a,renameEnvelope:o,updateTransaction:c,deleteTransaction:u,restoreTransaction:d,getEnvelopeBalance:h,currentMonth:g}=pr(),{showToast:m}=Gd(),x=Wa(),_=Xa(),[E,S]=G.useState(!1),[T,D]=G.useState(!1),[R,O]=G.useState(!1),[L,j]=G.useState(null);G.useEffect(()=>{e.length===0&&r()},[]);const A=e.find(z=>z.id===t);if(!A)return i?y.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:y.jsx("p",{children:"Loading envelope..."})}):y.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:y.jsx("p",{children:"Envelope not found."})});if(A.isPiggybank){const z=n.filter(P=>P.envelopeId===A.id);console.log(" Piggybank:",A.name),console.log(" Created at:",A.createdAt),console.log(" Transactions:",z.map(P=>({date:P.date,description:P.description,amount:P.amount})))}const C=n.filter(z=>z.envelopeId===A.id).filter(z=>{if(A.isPiggybank){if(z.description==="Monthly Allocation"&&z.isAutomatic||!A.createdAt)return!0;const P=new Date(A.createdAt);return new Date(z.date)>=P}return z.month===g||!z.month}).sort((z,P)=>new Date(P.date).getTime()-new Date(z.date).getTime()),k=()=>{_.state?.fromGlobalFAB?x("/"):x(-1)},M=()=>{t&&(a(t),x(-1))},U=z=>{const P={...z,reconciled:!z.reconciled};c(P)};return y.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4 pb-28",children:[y.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[y.jsx("button",{onClick:()=>{const z=prompt("Rename envelope:",A.name);z&&z.trim()&&t&&o(t,z)},className:"text-blue-600 dark:text-blue-400 font-medium",children:"Rename"}),y.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:A.name}),y.jsx("button",{onClick:k,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),y.jsx("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const z=typeof h(A.id)=="number"?h(A.id):0;return console.log(`Debug: Envelope ${A.name} Balance:`,z),y.jsx("span",{className:`text-xl font-bold ${z<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:cte(z)})})()]})}),y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[y.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>S(!0),children:[y.jsx(Yz,{className:"w-5 h-5 mr-3"}),"Add Money"]}),y.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>D(!0),children:[y.jsx(Hz,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),y.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>O(!0),children:[y.jsx(Oz,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),y.jsxs("section",{className:"mt-6",children:[y.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:C.length===0?y.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):y.jsx(dc,{initial:!1,mode:"popLayout",children:C.map(z=>y.jsx(sl.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(qp,{onDelete:()=>{if(!z.id)return;const P={...z};u(z.id),m("Transaction deleted","neutral",()=>d(P))},children:y.jsx(uj,{transaction:z,onReconcile:()=>U(z),onEdit:()=>j(z)})})},z.id))})})]}),y.jsx("div",{className:"mt-8",children:y.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{confirm(`Are you sure you want to delete "${A.name}"? This will delete all transactions.`)&&M()},children:[y.jsx(eN,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),(E||T||L)&&y.jsx(cj,{isVisible:E||T||!!L,onClose:()=>{S(!1),D(!1),j(null)},mode:E?"add":T?"spend":"edit",currentEnvelope:A,initialTransaction:L}),R&&y.jsx(ste,{isVisible:R,onClose:()=>O(!1),sourceEnvelope:A})]})},dte=()=>{const t=Wa(),e=G.useRef(null),{envelopes:n,transactions:r,resetData:i,importData:a,getEnvelopeBalance:o,appSettings:c,updateAppSettings:u,initializeAppSettings:d,incomeSources:h,allocations:g,currentMonth:m}=pr(),{deleteAccount:x}=oa(),[_,E]=G.useState(null),[S,T]=G.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[D,R]=G.useState(!1),[O,L]=G.useState(""),[j,A]=G.useState(!1),[C,k]=G.useState(!1),[M,U]=G.useState(null);console.log(M);const z=978307200,P=c?.theme??"system";G.useEffect(()=>{c||d().catch(Y=>{console.error("Failed to initialize app settings:",Y)})},[d,c]);const W=(Y,ne)=>{E({type:Y,text:ne}),setTimeout(()=>E(null),3500)},Q=G.useMemo(()=>{const Y=n.length,ne=r.length,ae=m?g[m]||[]:[],he=Object.values(h).reduce((Ee,Ce)=>Ee+Ce.length,0),le=ae.length,ge=n.reduce((Ee,Ce)=>{const He=o(Ce.id);return Ee+(typeof He=="number"?He:0)},0),xe=0,Se=r.reduce((Ee,Ce)=>{let He=0;if(typeof Ce.date=="string"){const je=Date.parse(Ce.date);He=Number.isNaN(je)?0:je}else typeof Ce.date=="number"&&(He=Ce.date<2e9?(Ce.date+z)*1e3:Ce.date);return Math.max(Ee,He)},0),Ue=xe||Se?new Date(Math.max(xe,Se)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:Y,transactionCount:ne,incomeSourceCount:he,allocationCount:le,totalBalance:ge,lastUpdated:Ue}},[n,r,h,g,m]),$=()=>{try{console.log(" Creating backup..."),console.log(" Envelopes in store:",n.map(ge=>({id:ge.id,name:ge.name,isPiggybank:ge.isPiggybank,hasPiggybankConfig:!!ge.piggybankConfig,piggybankConfig:ge.piggybankConfig})));const Y={appVersion:"2.1 (PWA)",backupDate:Date.now(),appSettings:c||{theme:"system"},envelopes:n.map(ge=>({...ge,currentBalance:(()=>{const xe=o(ge.id);return typeof xe=="number"?xe:0})(),lastUpdated:new Date().toISOString()})),transactions:r,allocations:g,incomeSources:h};console.log(" Backup data created:",{envelopeCount:Y.envelopes.length,piggybankEnvelopes:Y.envelopes.filter(ge=>ge.isPiggybank).length,sampleEnvelope:Y.envelopes.find(ge=>ge.isPiggybank)||Y.envelopes[0]});const ne=new Blob([JSON.stringify(Y,null,2)],{type:"application/json"}),ae=URL.createObjectURL(ne),he=document.createElement("a");he.href=ae,he.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(he),he.click(),document.body.removeChild(he),URL.revokeObjectURL(ae);const le=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",le),T(le),U({success:!0,message:"Backup downloaded successfully."})}catch(Y){console.error(Y),U({success:!1,message:"Failed to create backup file.",onRetry:$})}},H=()=>{k(!0),U(null);try{const Y=["Date","Merchant","Notes","Amount","Type","Envelope","Reconciled"],ne=r.map(xe=>{const Se=n.find(He=>He.id===xe.envelopeId)?.name||"Unknown",Ue=(xe.merchant||"").replace(/"/g,'""'),Ee=(xe.description||"").replace(/"/g,'""');let Ce="Invalid Date";if(xe.date){if(typeof xe.date=="string")Ce=xe.date.split("T")[0];else if(typeof xe.date=="number"){const He=xe.date<2e9?(xe.date+z)*1e3:xe.date;Ce=new Date(He).toISOString().split("T")[0]}}return[Ce,`"${Ue}"`,`"${Ee}"`,xe.amount.toFixed(2),xe.type,`"${Se}"`,xe.reconciled?"Yes":"No"].join(",")}),ae=[Y.join(","),...ne].join(`
`),he=new Blob([ae],{type:"text/csv;charset=utf-8;"}),le=URL.createObjectURL(he),ge=document.createElement("a");ge.href=le,ge.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(ge),ge.click(),document.body.removeChild(ge),URL.revokeObjectURL(le),U({success:!0,message:"Transactions CSV exported successfully."})}catch(Y){console.error(Y),U({success:!1,message:"Failed to export CSV. Please try again.",onRetry:H})}finally{k(!1)}},ee=()=>{e.current?.click()},te=Y=>{const ne=Y.target.files?.[0];if(!ne)return;const ae=new FileReader;ae.onload=async he=>{try{const le=JSON.parse(he.target?.result),ge=await a(le);if(!ge.success){W("error",ge.message);return}if(le.appSettings?.theme)try{await u({theme:le.appSettings.theme})}catch(xe){console.error("Failed to update imported settings:",xe)}else if(le.appSettings?.isDarkMode!==void 0)try{const xe=le.appSettings.isDarkMode?"dark":"light";await u({theme:xe})}catch(xe){console.error("Failed to update imported settings:",xe)}W("success",`Loaded ${le.envelopes?.length??0} envelopes, ${le.transactions?.length??0} transactions, ${le.allocations?Object.keys(le.allocations).reduce((xe,Se)=>xe+(le.allocations[Se]?.length||0),0):0} allocations, and ${le.incomeSources?Object.keys(le.incomeSources).reduce((xe,Se)=>xe+(le.incomeSources[Se]?.length||0),0):0} income sources.`)}catch(le){console.error(le),W("error","Invalid backup file. Please verify the JSON.")}},ae.readAsText(ne),Y.target.value=""},fe=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, budget allocations, income sources, and settings from the cloud. This action cannot be undone."))try{await i(),W("success","All data has been permanently deleted."),t("/")}catch(Y){console.error("Reset failed:",Y),W("error","Failed to delete all data. Some data may remain.")}},B=async()=>{if(!O.trim()){W("error","Please enter your password to confirm account deletion.");return}R(!0);try{await i(),await x(O)?W("success","Your account has been permanently deleted."):W("error","Failed to delete account. Please try again.")}catch(Y){console.error("Account deletion failed:",Y),W("error","Failed to delete account. Please try again.")}finally{R(!1),A(!1),L("")}};return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[y.jsx("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:y.jsxs("div",{className:"flex items-center",children:[y.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),y.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]})}),y.jsxs("div",{className:"p-4 space-y-6 max-w-2xl mx-auto pb-24",children:[_&&y.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${_.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[_.type==="success"?y.jsx(m0,{size:18}):y.jsx(px,{size:18}),_.text]}),y.jsx("section",{children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(m2,{className:"text-blue-500",size:22}),y.jsxs("div",{children:[y.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, budget allocations, income sources, and settings."})]})]}),y.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:Q.envelopeCount})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:Q.transactionCount})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Income Sources"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:Q.incomeSourceCount})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Budget Allocations"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:Q.allocationCount})]})]})]})}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4",children:[y.jsxs("div",{className:"flex items-center justify-between mb-3",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[P==="light"&&y.jsx("span",{className:"text-orange-500 text-lg",children:""}),P==="dark"&&y.jsx("span",{className:"text-purple-500 text-lg",children:""}),P==="system"&&y.jsx("span",{className:"text-gray-500 text-lg",children:""}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),y.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:P})]}),y.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-500 mb-3",children:"Choose your preferred appearance."}),y.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(Y=>y.jsx("button",{onClick:async()=>{try{await u({theme:Y.value})}catch(ne){console.error("Failed to update theme setting:",ne)}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${P===Y.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:Y.label},Y.value))})]})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[y.jsxs("button",{onClick:$,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(m2,{className:"text-blue-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),y.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",S]})]})]}),y.jsx(Iu,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:ee,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx($L,{className:"text-blue-500",size:20}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),y.jsx(Iu,{className:"text-gray-400",size:18})]}),y.jsx("div",{className:"p-4",children:y.jsxs("button",{onClick:H,disabled:C,className:"w-full flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors disabled:opacity-60 disabled:cursor-not-allowed rounded-xl border border-gray-100 dark:border-zinc-800 px-4 py-3 bg-white dark:bg-zinc-900",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[C?y.jsx(bL,{className:"text-blue-500 animate-spin",size:20}):y.jsx(oL,{className:"text-blue-500",size:20}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:C?"Preparing CSV":"Export Transactions (CSV)"})]}),y.jsx(Iu,{className:"text-gray-400",size:18})]})}),y.jsx("input",{type:"file",ref:e,onChange:te,accept:".json",className:"hidden"})]})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Tips"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 text-sm text-gray-600 dark:text-zinc-300 space-y-2",children:[y.jsx("p",{children:"Create regular backups before major changes."}),y.jsx("p",{children:"Store backups in iCloud, Files, or another safe location."}),y.jsx("p",{children:"Backups are plain JSON files and can be inspected in any text editor."}),y.jsx("p",{children:"Restoring replaces all current envelopes, transactions, budget allocations, income sources, and settings."})]})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:[y.jsxs("button",{onClick:fe,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(px,{className:"text-red-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Reset All Data"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete all envelopes, transactions, allocations, income sources, and settings"})]})]}),y.jsx(Iu,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:()=>A(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(Ku,{className:"text-red-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Delete Account"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete your account and all data"})]})]}),y.jsx(Iu,{className:"text-gray-400",size:18})]})]})]}),M&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[M.success?y.jsx(m0,{className:"text-green-500",size:24}):y.jsx(Ku,{className:"text-red-500",size:24}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:M.success?"Success":"Error"})]}),y.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:M.message}),y.jsxs("div",{className:"flex gap-2",children:[M.onRetry&&y.jsx("button",{onClick:()=>{U(null),M.onRetry?.()},className:"flex-1 py-2 px-4 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Retry"}),y.jsx("button",{onClick:()=>U(null),className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Close"})]})]})}),j&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[y.jsx(Ku,{className:"text-red-500",size:24}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Account"})]}),y.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:"This action cannot be undone. This will permanently delete your account and remove all data from our servers."}),y.jsx("input",{type:"password",value:O,onChange:Y=>L(Y.target.value),placeholder:"Enter your password",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 mb-4"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{onClick:()=>{A(!1),L("")},className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:B,disabled:D||!O.trim(),className:"flex-1 py-2 px-4 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:D?"Deleting...":"Delete Account"})]})]})})]})]})},fte=()=>{const{addEnvelope:t,setEnvelopeAllocation:e,currentMonth:n}=pr(),r=Wa(),[i]=wz(),[a,o]=G.useState(""),[c,u]=G.useState(""),d=i.get("type")==="piggybank",[h,g]=G.useState(""),[m,x]=G.useState(""),[_,E]=G.useState("#3B82F6"),S=async T=>{if(T.preventDefault(),!a.trim())return;const D=parseFloat(c),R=isNaN(D)?0:D,O=pr.getState().envelopes,j=(O.length>0?Math.max(...O.map(M=>M.orderIndex??0)):-1)+1,A=d?new Date(`${n}-01T00:00:00`):new Date,C={name:a,currentBalance:R,lastUpdated:new Date().toISOString(),createdAt:A.toISOString(),isActive:!0,orderIndex:j};d&&(C.isPiggybank=!0,C.piggybankConfig={targetAmount:h?parseFloat(h):void 0,monthlyContribution:parseFloat(m||"0"),color:_,icon:"piggy-bank"}),t(C).then(M=>{if(M){const U=d?parseFloat(m||"0"):0;e(M,U).catch(z=>console.error("Failed to create allocation:",z))}}).catch(M=>{console.error("Failed to create envelope:",M)}),setTimeout(()=>{r("/")},50)};return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-28",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[y.jsx("button",{onClick:()=>r("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:y.jsx(Mh,{size:24})}),y.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:d?"New Piggybank":"New Envelope"})]}),y.jsx("div",{className:"p-4 max-w-md mx-auto",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[y.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:y.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:d?y.jsx(Ph,{size:40}):y.jsx(cL,{size:40})})}),y.jsxs("form",{onSubmit:S,className:"p-6 space-y-6 pb-6",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:d?"Piggybank Name":"Envelope Name"}),y.jsx("input",{type:"text",id:"name",value:a,onChange:T=>o(T.target.value),placeholder:d?"e.g. Vacation Fund, Emergency Savings":"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),d&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{type:"number",id:"monthly-contribution",value:m,onChange:T=>x(T.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:d})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{type:"number",id:"target-amount",value:h,onChange:T=>g(T.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),y.jsx("div",{className:"grid grid-cols-6 gap-2",children:[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}].map(T=>y.jsx("button",{type:"button",onClick:()=>E(T.value),className:`w-full aspect-square rounded-lg transition-all ${_===T.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:T.value},title:T.label},T.value))})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"balance",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Initial Deposit (Optional)"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{type:"number",id:"balance",value:c,onChange:T=>u(T.target.value),onKeyDown:T=>{(T.key==="e"||T.key==="E"||T.key==="+"||T.key==="-")&&T.preventDefault()},placeholder:"0.00",step:"0.01",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:'This creates an "Initial Deposit" income transaction. You can also add money later by editing the envelope budget on the main screen.'})]}),y.jsxs("div",{className:"pt-4 flex gap-3",children:[y.jsx("button",{type:"button",onClick:()=>r("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),y.jsx("button",{type:"submit",disabled:!a.trim()||d&&!m,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${a.trim()&&(!d||m)?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:d?"Create Piggybank":"Create Envelope"})]})]})]})})]})},hte=({envelopes:t,transactionAmount:e,onSplitChange:n})=>{const[r,i]=G.useState([]),[a,o]=G.useState({}),[c,u]=G.useState(e),d=_=>{i(E=>E.includes(_)?E.filter(S=>S!==_):[...E,_])},h=(_,E)=>{o(S=>({...S,[_]:E}))};G.useEffect(()=>{if(r.length===1){const _=r[0];o({[_]:e})}},[r.length,e]),G.useEffect(()=>{const _=Object.values(a).reduce((E,S)=>E+(S||0),0);u(e-_),n(a)},[a,e,n]),G.useEffect(()=>{const _={...a};Object.keys(_).forEach(E=>{r.includes(E)||delete _[E]}),Object.keys(_).length!==Object.keys(a).length&&o(_)},[r,a]);const g=()=>{i([]),o({})},m=Math.abs(c)<.01&&r.length>0,x=r.length>0&&Math.abs(c)>.01;return y.jsxs("div",{className:"space-y-3",children:[r.length>1&&y.jsxs("div",{className:`p-3 rounded-lg ${x?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":m?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700"}`,children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("span",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Remaining to Split:"}),y.jsxs("span",{className:`font-bold text-lg ${x?"text-red-600 dark:text-red-400":m?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:["$",c.toFixed(2)]})]}),x&&y.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Split amounts must equal transaction total"})]}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("label",{className:"text-xs text-gray-500 dark:text-zinc-400",children:r.length>1?"Split Across Envelopes":"Select Envelope"}),r.length>0&&y.jsx("button",{type:"button",onClick:g,className:"text-xs text-blue-600 dark:text-blue-400",children:"Clear All"})]}),y.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-200 dark:border-zinc-800 rounded-lg",children:t.map(_=>y.jsxs("div",{className:"flex items-center py-3 px-3 border-b border-gray-100 dark:border-zinc-800 last:border-b-0 hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsx("input",{type:"checkbox",checked:r.includes(_.id),onChange:()=>d(_.id),className:"mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),y.jsx("span",{className:"flex-1 text-gray-900 dark:text-white",children:_.name}),r.includes(_.id)&&r.length>1&&y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"mr-1 text-gray-500 dark:text-zinc-400",children:"$"}),y.jsx("input",{type:"number",min:"0",step:"0.01",value:a[_.id]||"",onChange:E=>h(_.id,parseFloat(E.target.value)||0),className:"w-24 px-2 py-1 border border-gray-300 dark:border-zinc-700 rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]},_.id))})]})},pte=()=>{const t=Wa(),{envelopes:e,addTransaction:n,currentMonth:r}=pr(),[i,a]=G.useState(""),[o,c]=G.useState(""),[u,d]=G.useState(""),[h,g]=G.useState(new Date().toISOString().split("T")[0]),[m,x]=G.useState("expense"),[_,E]=G.useState({}),[S,T]=G.useState(null),[D,R]=G.useState(!1),O=z=>{T(z),S&&R(!0)},L=Object.keys(_).length>0,j=Object.values(_).reduce((z,P)=>z+(P||0),0),A=Math.abs(j-parseFloat(i||"0"))<.01,C=i&&parseFloat(i)>0&&L&&A,k=async z=>{if(z.preventDefault(),!C)return;const[P,W,Q]=h.split("-").map(Number),$=new Date(P,W-1,Q,12,0,0);console.log(" Selected date:",h),console.log(" Parsed date:",$.toISOString());try{const[H,ee]=h.split("-").map(Number),te=`${H}-${ee.toString().padStart(2,"0")}`;if(te!==r){const B=`This transaction date (${te}) does not match the current budget month (${r}). Are you sure you want to save it?`;if(!window.confirm(B))return}const fe=Object.entries(_).filter(([B,Y])=>Y>0);Promise.all(fe.map(([B,Y])=>n({amount:Y,description:u,merchant:o||void 0,date:$.toISOString(),envelopeId:B,type:m==="income"?"Income":"Expense",reconciled:!1,paymentMethod:S||void 0}).catch(ne=>console.error("Failed to create transaction:",ne)))).catch(B=>console.error("Failed to create transactions:",B)),t("/")}catch(H){console.error("Error saving transaction:",H),alert("Failed to save transaction: "+(H instanceof Error?H.message:"Unknown error"))}},M=[...e].sort((z,P)=>{const W=z.orderIndex??0,Q=P.orderIndex??0;return W!==Q?W-Q:z.name.localeCompare(P.name)}),U=m==="income"?"text-green-500":"text-red-500";return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 z-10 flex items-center justify-between",children:[y.jsx("button",{onClick:()=>t(-1),className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),y.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),y.jsx("button",{onClick:k,disabled:!C,className:"text-blue-600 dark:text-blue-400 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]}),y.jsx("div",{className:"p-4 max-w-md mx-auto pb-24",children:y.jsxs("form",{onSubmit:k,className:"space-y-6",children:[y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:y.jsxs("div",{className:"flex",children:[y.jsx("button",{type:"button",onClick:()=>x("expense"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${m==="expense"?"bg-red-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Expense"}),y.jsx("button",{type:"button",onClick:()=>x("income"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${m==="income"?"bg-green-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Income"})]})}),y.jsxs("div",{className:"text-center",children:[y.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),y.jsxs("div",{className:"relative inline-block",children:[y.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${U}`,children:"$"}),y.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:i,onChange:z=>{const P=z.target.value;(P===""||!isNaN(parseFloat(P))&&parseFloat(P)>=0)&&a(P)},onKeyDown:z=>{(z.key==="e"||z.key==="E"||z.key==="+"||z.key==="-")&&z.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${U} placeholder-gray-700`})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),y.jsx("input",{type:"text",value:o,onChange:z=>c(z.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsx(lj,{selectedCard:S,onCardSelect:O,isUserSelected:D}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),y.jsx("input",{type:"text",value:u,onChange:z=>d(z.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsxs("div",{className:"flex justify-between items-center mb-1",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const[z,P]=h.split("-").map(Number);return`${z}-${P.toString().padStart(2,"0")}`!==r?y.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[y.jsx(Ku,{size:14}),y.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),y.jsx("input",{type:"date",value:h,onChange:z=>g(z.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:y.jsx(hte,{envelopes:M,transactionAmount:parseFloat(i)||0,onSplitChange:E})})]})})]})},gte=()=>{const t=Wa(),{transactions:e,envelopes:n,updateTransaction:r,deleteTransaction:i,restoreTransaction:a,currentMonth:o}=pr(),{showToast:c}=Gd(),[u,d]=G.useState(!1),[h,g]=G.useState(""),[m,x]=G.useState("all"),[_,E]=G.useState("All"),[S,T]=G.useState(!1),[D,R]=G.useState("all"),[O,L]=G.useState(!1),[j,A]=G.useState("all"),[C,k]=G.useState(()=>{const H=new Date;return H.setMonth(H.getMonth()-1),H.toISOString().split("T")[0]}),[M,U]=G.useState(()=>new Date().toISOString().split("T")[0]),[z,P]=G.useState(null),W=G.useMemo(()=>{console.log(" Filtering transactions:",{totalTransactions:e.length,showAllTime:O,currentMonth:o,transactionMonths:e.map(te=>({id:te.id,month:te.month,date:te.date,description:te.description}))});let H=e;return O||(H=e.filter(te=>te.month===o||!te.month),console.log(" After month filter:",{remaining:H.length,currentMonth:o,filteredTransactions:H.map(te=>({id:te.id,description:te.description,month:te.month,matchesCurrentMonth:te.month===o}))})),H.map(te=>{if(!te)return null;let fe=te.date;if(typeof te.date=="number"){const Y=(te.date+978307200)*1e3;fe=new Date(Y).toISOString()}else if(!te.date||typeof te.date!="string")return null;return{...te,date:fe}}).filter(Boolean).filter(te=>{if(h){const B=h.toLowerCase(),Y=n.find(he=>he.id===te.envelopeId)?.name.toLowerCase()||"",ne=te.amount.toFixed(2);if(!(te.description.toLowerCase().includes(B)||Y.includes(B)||ne.includes(B)))return!1}if(m!=="all"&&te.envelopeId!==m||_!=="All"&&te.type!==_||j!=="all"&&(!te.paymentMethod||te.paymentMethod.id!==j)||!te.date||typeof te.date!="string")return!1;const fe=te.date.split("T")[0];return!(D!=="all"&&new Date(fe).getMonth()!==parseInt(D)||S&&!te.reconciled)}).sort((te,fe)=>new Date(fe.date).getTime()-new Date(te.date).getTime())},[e,n,h,m,_,j,C,M,S,O,o]);console.log(" Final filtered transactions:",{count:W.length,transactions:W.map(H=>({id:H.id,description:H.description,amount:H.amount,date:H.date,month:H.month,type:H.type}))});const Q=z?n.find(H=>H.id===z.envelopeId):null,$=H=>{const ee={...H,reconciled:!H.reconciled};r(ee)};return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20 transition-colors duration-200",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:y.jsx(Mh,{size:24})}),y.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),y.jsx("button",{onClick:()=>d(!u),className:`p-2 rounded-full transition-colors ${u?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:y.jsx(dL,{size:20,className:u?"fill-current":""})})]}),y.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 flex justify-between items-center",children:[y.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:["Month: ",o]}),y.jsx("button",{onClick:()=>L(!O),className:`text-sm px-3 py-1 rounded-md ${O?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-zinc-800 dark:text-zinc-300"}`,children:O?"Current Month Only":"All Time"})]}),y.jsx("div",{className:"px-4 py-3 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800",children:y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Payment Method"}),y.jsxs("select",{value:j,onChange:H=>A(H.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[y.jsx("option",{value:"all",children:"All Payment Methods"}),[{id:"1",name:"Amazon Prime",network:"Visa",last4:"7474",color:"#232f3e"},{id:"2",name:"Apple Card",network:"Mastercard",last4:"0274",color:"#e3e3e3"},{id:"3",name:"AA Credit Union",network:"Visa",last4:"3386",color:"#5494DA"}].map(H=>y.jsx("option",{value:H.id,children:H.name},H.id))]})]})}),y.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${u?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:y.jsxs("div",{className:"p-4 space-y-4",children:[y.jsxs("div",{className:"relative",children:[y.jsx(NL,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),y.jsx("input",{type:"text",placeholder:"Search transactions...",value:h,onChange:H=>g(H.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),h&&y.jsx("button",{onClick:()=>g(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:y.jsx(fv,{size:16})})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),y.jsxs("select",{value:m,onChange:H=>x(H.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[y.jsx("option",{value:"all",children:"All Envelopes"}),n.sort((H,ee)=>H.name.localeCompare(ee.name)).map(H=>y.jsx("option",{value:H.id,children:H.name},H.id))]})]}),y.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(H=>y.jsx("button",{onClick:()=>E(H),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${_===H?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:H},H))}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Month"}),y.jsxs("select",{value:D,onChange:H=>R(H.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[y.jsx("option",{value:"all",children:"All Months"}),Array.from({length:12},(H,ee)=>ee).map(H=>y.jsx("option",{value:H,children:new Date(2022,H).toLocaleString("default",{month:"long"})},H))]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"From"}),y.jsx("div",{className:"relative",children:y.jsx("input",{type:"date",value:C,onChange:H=>k(H.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"To"}),y.jsx("div",{className:"relative",children:y.jsx("input",{type:"date",value:M,onChange:H=>U(H.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]}),y.jsxs("div",{className:"flex items-center justify-between pt-2",children:[y.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),y.jsx("button",{onClick:()=>T(!S),className:`w-11 h-6 rounded-full transition-colors relative ${S?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:y.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${S?"translate-x-5":"translate-x-0"}`})})]}),y.jsxs("div",{className:"flex items-center justify-between pt-2",children:[y.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show all time"}),y.jsx("button",{onClick:()=>L(!O),className:`w-11 h-6 rounded-full transition-colors relative ${O?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:y.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${O?"translate-x-5":"translate-x-0"}`})})]})]})}),y.jsx("div",{className:"p-4 max-w-2xl mx-auto",children:y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:W.length===0?y.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):y.jsx(dc,{initial:!1,mode:"popLayout",children:W.map(H=>{const ee=n.find(te=>te.id===H.envelopeId);return y.jsx(sl.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(qp,{onDelete:()=>{if(!H.id)return;const te={...H};i(H.id),c("Transaction deleted","neutral",()=>a(te))},children:y.jsx(uj,{transaction:H,envelopeName:ee?.name||"Unknown Envelope",onReconcile:()=>$(H),onEdit:()=>{ee?P(H):alert("Cannot edit: Envelope deleted.")}})})},H.id)})})})}),z&&Q&&y.jsx(cj,{isVisible:!!z,onClose:()=>P(null),mode:"edit",currentEnvelope:Q,initialTransaction:z})]})},dj=[{id:"length",label:"Minimum 12 characters",regex:/^.{12,}$/},{id:"uppercase",label:"At least one uppercase letter (A-Z)",regex:/[A-Z]/},{id:"lowercase",label:"At least one lowercase letter (a-z)",regex:/[a-z]/},{id:"number",label:"At least one number (0-9)",regex:/\d/},{id:"special",label:"At least one special character (!@#$%^&*)",regex:/[!@#$%^&*]/}],mte=t=>{if(!t)return{score:0,level:"weak",color:"text-gray-400",label:"Enter password"};const r=dj.map(c=>({...c,met:c.regex.test(t)})).filter(c=>c.met).length;let i,a,o;return r<=1?(i="weak",a="text-red-500",o="Weak"):r<=3?(i="medium",a="text-yellow-500",o="Medium"):r===4?(i="strong",a="text-blue-500",o="Strong"):(i="very-strong",a="text-green-500",o="Very Strong"),{score:r,level:i,color:a,label:o}},IS=t=>{const e=dj.map(i=>({...i,met:i.regex.test(t)})),n=mte(t),r=e.every(i=>i.met);return{requirements:e,strength:n,isValid:r,isEmpty:!t.trim()}},vte=({password:t,className:e=""})=>{const{strength:n,isEmpty:r}=IS(t);return r?null:y.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[y.jsx("div",{className:"flex-1",children:y.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(i=>y.jsx("div",{className:`h-1 flex-1 rounded-full ${i<=n.score?n.score<=1?"bg-red-500":n.score<=3?"bg-yellow-500":n.score===4?"bg-blue-500":"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`},i))})}),y.jsx("span",{className:`text-sm font-medium ${n.color}`,children:n.label})]})},yte=({password:t,className:e=""})=>{const{requirements:n,isEmpty:r}=IS(t);return r?null:y.jsx("div",{className:`space-y-1 ${e}`,children:n.map(i=>y.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.met?y.jsx(jz,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):y.jsx(fv,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),y.jsx("span",{className:i.met?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400",children:i.label})]},i.id))})},bte=()=>{const[t,e]=G.useState(""),[n,r]=G.useState(""),[i,a]=G.useState(""),[o,c]=G.useState(!1),[u,d]=G.useState(!1),[h,g]=G.useState(!1),[m,x]=G.useState(!1),{login:_,register:E,sendPasswordReset:S,isLoading:T,loginError:D,clearError:R}=oa(),O=IS(n),L=async A=>{if(A.preventDefault(),R(),t.trim()&&n.trim())if(u){if(!i.trim()||!O.isValid)return;await E(t.trim(),n,i.trim())}else await _(t.trim(),n)},j=async A=>{A.preventDefault(),t.trim()&&await S(t.trim())&&x(!0)};return G.useEffect(()=>{e(""),r(""),a(""),x(!1)},[u,h]),y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full space-y-8",children:[y.jsx("div",{className:"text-center",children:y.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),y.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"Personal Budget"})]}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for personal finance"})]})}),y.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:h?y.jsxs("form",{onSubmit:j,className:"space-y-6",children:[y.jsxs("div",{className:"text-center mb-2",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:y.jsx(hx,{className:"h-5 w-5 text-gray-400"})}),y.jsx("input",{id:"reset-email",type:"email",value:t,onChange:A=>e(A.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:T,autoComplete:"email"})]})]}),m?y.jsxs("div",{className:"text-center py-4",children:[y.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:y.jsx(hx,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),y.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),y.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",y.jsx("span",{className:"font-medium",children:t})]}),y.jsxs("button",{type:"button",onClick:()=>g(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[y.jsx(Mh,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):y.jsxs(y.Fragment,{children:[y.jsx("button",{type:"submit",disabled:T||!t.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:T?"Sending...":"Send Reset Link"}),y.jsx("div",{className:"mt-4 text-center",children:y.jsxs("button",{type:"button",onClick:()=>g(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:T,children:[y.jsx(Mh,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):y.jsxs("form",{onSubmit:L,className:"space-y-6",children:[y.jsxs("div",{className:"text-center mb-6",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:u?"Create Account":"Sign In"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:u?"Create a new account to get started":"Sign in to your account"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),y.jsx("input",{id:"email",type:"email",value:t,onChange:A=>e(A.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:T,autoComplete:"username"})]}),u&&y.jsxs("div",{children:[y.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),y.jsx("input",{id:"displayName",type:"text",value:i,onChange:A=>a(A.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:T})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[y.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!u&&y.jsx("button",{type:"button",onClick:()=>g(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:T,children:"Forgot password?"})]}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{id:"password",type:o?"text":"password",value:n,onChange:A=>r(A.target.value),className:`w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${u&&n&&!O.isValid?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your password",required:!0,disabled:T,autoComplete:u?"new-password":"current-password"}),y.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:T,children:o?y.jsx(rL,{className:"h-5 w-5"}):y.jsx(aL,{className:"h-5 w-5"})})]}),u&&n&&y.jsx("div",{className:"mt-2",children:y.jsx(vte,{password:n})}),u&&n&&y.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:y.jsx(yte,{password:n})})]}),D&&y.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:[D,D.includes("verify your email")&&y.jsx("div",{className:"mt-3",children:y.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Please check your email and click the verification link to continue."})})]}),y.jsx("button",{type:"submit",disabled:T||!t.trim()||!n.trim()||u&&!i.trim()||u&&!O.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:T?u?"Creating Account...":"Signing in...":u?"Create Account":"Sign In"}),y.jsx("div",{className:"mt-6 text-center",children:y.jsxs("button",{type:"button",onClick:()=>{d(!u),g(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:T,children:[y.jsx(KL,{className:"h-4 w-4"}),u?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},Nk=()=>{const[t,e]=G.useState(!1),[n,r]=G.useState(!1),{currentUser:i,resendEmailVerification:a,logout:o,loginError:c}=oa();G.useEffect(()=>{i||console.warn("EmailVerificationView: No current user, this should not happen")},[i]);const u=async()=>{e(!0),r(!1);const h=await a();e(!1),h&&(r(!0),setTimeout(()=>r(!1),3e3))},d=async()=>{await o()};return i?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full space-y-8",children:[y.jsx("div",{className:"text-center",children:y.jsx("div",{className:"flex flex-col items-center gap-3 mb-2",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),y.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]})})}),y.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:y.jsx(hx,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Check your email"}),y.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a verification link to"," ",y.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.email})]}),y.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx(m0,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),y.jsxs("div",{className:"text-left",children:[y.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"What to do next:"}),y.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[y.jsx("li",{children:"1. Open your email inbox"}),y.jsx("li",{children:"2. Find the email from House Budget"}),y.jsx("li",{children:'3. Click the "Verify Email" link'}),y.jsx("li",{children:"4. Return here and sign in"})]})]})]})}),c&&y.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:c}),n&&y.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:"Verification email sent successfully!"}),y.jsx("button",{onClick:u,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed mb-4 flex items-center justify-center gap-2",children:t?y.jsxs(y.Fragment,{children:[y.jsx(nc,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):y.jsxs(y.Fragment,{children:[y.jsx(nc,{className:"h-4 w-4"}),"Resend verification email"]})}),y.jsxs("button",{onClick:d,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",children:[y.jsx(Mh,{className:"h-4 w-4"}),"Back to sign in"]})]})}),y.jsx("div",{className:"text-center",children:y.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Didn't receive the email? Check your spam folder or try resending."})})]})}):null},Mk=[{id:"1",name:"Amazon Prime",network:"Visa",last4:"7474",color:"#232f3e"},{id:"2",name:"Apple Card",network:"Mastercard",last4:"0274",color:"#e3e3e3"},{id:"3",name:"AA Credit Union",network:"Visa",last4:"3386",color:"#5494DA"}],xte=()=>{const[t,e]=G.useState(Mk[0]),[n,r]=G.useState(!1),[i,a]=G.useState(!1),[o,c]=G.useState(Mk),[u,d]=G.useState(null),[h,g]=G.useState({name:"",network:"Visa",last4:"",color:"#3b82f6"}),m=R=>{R.id==="add-new"?a(!0):(e(R),r(!1))},x=()=>{r(!n)},_=R=>{d(R)},E=()=>{if(u){const R=o.filter(O=>O.id!==u.id);c(R),t.id===u.id&&R.length>0&&e(R[0]),d(null)}},S=()=>{d(null)},T=()=>{if(h.last4.length!==4||!/^\d{4}$/.test(h.last4)){alert("Please enter exactly 4 digits for the last 4 digits");return}if(!h.name.trim()){alert("Please enter a card name");return}const R={id:`custom-${Date.now()}`,name:h.name.trim(),network:h.network,last4:h.last4,color:h.color};c([...o,R]),e(R),a(!1),r(!1),g({name:"",network:"Visa",last4:"",color:"#3b82f6"})},D=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#6b7280","#0f4c81","#fdbb30","#7fb5b5","#232f3e","#e3e3e3"];return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black p-8",children:[y.jsxs("div",{className:"max-w-md mx-auto",children:[y.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Apple Wallet-Style Card Stack"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-6 space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Method"}),y.jsxs("div",{onClick:x,className:"flex items-center gap-4 p-3 border border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:[y.jsxs("div",{className:"w-[70px] h-[40px] rounded-lg flex flex-col justify-between p-[6px] shadow-lg text-white font-mono text-xs",style:{backgroundColor:t.color},children:[y.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:t.network}),y.jsxs("span",{className:"text-left text-[9px] leading-none",children:[" ",t.last4]})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:t.name}),y.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(...",t.last4,")"]})]}),y.jsx("div",{className:"text-gray-400",children:n?"":""})]})]}),n&&y.jsx("div",{className:"card-stack-dropdown",children:y.jsx("div",{className:"card-stack",children:y.jsx(dc,{initial:!1,mode:"popLayout",children:[...o,{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}].map((R,O)=>{const L=t.id===R.id,j=R.id==="add-new";return y.jsx(sl.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(qp,{onDelete:()=>!j&&_(R),threshold:-80,children:y.jsxs("div",{className:`card-stack-item ${L?"selected":""} ${j?"add-new-card":""}`,onClick:()=>m(R),style:{backgroundColor:j?"#f3f4f6":R.color,color:j?"#374151":R.color==="#e3e3e3"?"#000":"#fff",zIndex:o.length-O},children:[y.jsxs("div",{className:"card-header",children:[y.jsx("span",{className:"card-network",children:j?"":R.network}),L&&!j&&y.jsx("span",{className:"selected-indicator",children:""})]}),y.jsxs("div",{className:"card-details",children:[y.jsx("div",{className:"card-name",children:R.name}),y.jsx("div",{className:"card-number",children:j?"":` ${R.last4}`})]}),j&&y.jsx("div",{className:"add-icon",children:y.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[y.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),y.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})})},R.id)})})})})]})]}),i&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-md mx-4",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add New Card"}),y.jsx("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Card Name"}),y.jsx("input",{type:"text",value:h.name,onChange:R=>g({...h,name:R.target.value}),placeholder:"e.g., My Chase Card",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Network"}),y.jsxs("select",{value:h.network,onChange:R=>g({...h,network:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[y.jsx("option",{value:"Visa",children:"Visa"}),y.jsx("option",{value:"Mastercard",children:"Mastercard"}),y.jsx("option",{value:"Amex",children:"Amex"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last 4 Digits"}),y.jsx("input",{type:"text",value:h.last4,onChange:R=>g({...h,last4:R.target.value.replace(/\D/g,"").slice(0,4)}),placeholder:"1234",maxLength:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Card Color"}),y.jsx("div",{className:"grid grid-cols-6 gap-2",children:D.map(R=>y.jsx("button",{onClick:()=>g({...h,color:R}),className:`w-full h-10 rounded-lg border-2 transition-all ${h.color===R?"border-blue-500 scale-110":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:R}},R))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview"}),y.jsxs("div",{className:"w-full h-20 rounded-lg flex flex-col justify-between p-3 shadow-lg text-white font-mono text-xs",style:{backgroundColor:h.color},children:[y.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:h.network}),y.jsxs("span",{className:"text-left text-[9px] leading-none",children:[" ",h.last4||"0000"]})]})]}),y.jsxs("div",{className:"flex gap-3 pt-4",children:[y.jsx("button",{onClick:()=>a(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:T,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Add Card"})]})]})]})}),u&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-sm mx-4",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:y.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Delete Card"}),y.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete ",y.jsx("span",{className:"font-medium",children:u.name}),"?"]}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{onClick:S,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:E,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors",children:"Delete"})]})]})})})]})},_te=()=>{const{message:t,type:e,isVisible:n,undoAction:r,hideToast:i}=Gd(),a=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return y.jsx(dc,{children:n&&y.jsx(sl.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-4 right-4 z-50 mb-[calc(env(safe-area-inset-bottom)+20px)]",children:y.jsxs("div",{className:`rounded-xl shadow-lg p-4 flex items-center justify-between ${a()}`,children:[y.jsx("div",{className:"flex items-center flex-1 min-w-0",children:y.jsx("span",{className:"text-sm font-medium truncate pr-2",children:t})}),y.jsxs("div",{className:"flex items-center gap-2 ml-3 flex-shrink-0",children:[r&&y.jsxs("button",{onClick:()=>{r(),i()},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-bold transition-colors",children:[y.jsx(qL,{size:14,className:"inline mr-1"}),"Undo"]}),y.jsx("button",{onClick:i,className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:y.jsx(fv,{size:16})})]})]})})})};class Zi extends G.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n}),this.props.onError&&this.props.onError(e,n)}componentDidUpdate(e){this.props.resetKeys&&this.props.resetOnPropsChange&&this.props.resetKeys.some((r,i)=>r!==e.resetKeys?.[i])&&this.state.hasError&&this.resetErrorBoundary()}resetErrorBoundary=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[y.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900/30 rounded-full",children:y.jsx(Ku,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. You can try refreshing or going back to the home screen."}),!1,y.jsxs("div",{className:"flex flex-col gap-3",children:[y.jsxs("button",{onClick:this.resetErrorBoundary,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:[y.jsx(nc,{className:"h-4 w-4"}),"Try Again"]}),y.jsxs("button",{onClick:()=>window.location.href="/#/",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-md transition-colors",children:[y.jsx(hL,{className:"h-4 w-4"}),"Go to Home"]})]})]})}):this.props.children}}const wte=()=>{const t=Wa(),e=Xa(),n=[{path:"/",label:"Budget",icon:y.jsx(ew,{className:"w-6 h-6"}),enabled:!0},{path:"/transactions",label:"Transactions",icon:y.jsx(gL,{className:"w-6 h-6"}),enabled:!0},{path:"/settings",label:"Settings",icon:y.jsx(Jk,{className:"w-6 h-6"}),enabled:!0},{path:"#",label:"Future",icon:y.jsx(p2,{className:"w-6 h-6"}),enabled:!1},{path:"#",label:"Future",icon:y.jsx(p2,{className:"w-6 h-6"}),enabled:!1}],r=(a,o)=>{o&&a!=="#"&&t(a)},i=a=>a==="/"?e.pathname==="/":e.pathname.startsWith(a);return y.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-zinc-900 border-t border-gray-200 dark:border-zinc-800 safe-area-inset-bottom z-50",children:y.jsx("div",{className:"flex justify-around items-center h-16 max-w-screen-xl mx-auto px-2",children:n.map((a,o)=>y.jsxs("button",{onClick:()=>r(a.path,a.enabled),disabled:!a.enabled,className:`flex flex-col items-center justify-center flex-1 h-full transition-colors ${a.enabled?i(a.path)?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white":"text-gray-300 dark:text-zinc-700 cursor-not-allowed"}`,children:[y.jsx("div",{className:`transition-transform ${i(a.path)&&a.enabled?"scale-110":""}`,children:a.icon}),y.jsx("span",{className:"text-xs mt-1 font-medium",children:a.label})]},o))})})};function Ete(){const[t,e]=G.useState(!0),{appSettings:n}=pr(),{isAuthenticated:r,isInitialized:i,initializeAuth:a,lastAuthTime:o,offlineGracePeriod:c,currentUser:u}=oa();if(G.useEffect(()=>{const g=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(g)},[]),G.useEffect(()=>a(),[a]),G.useEffect(()=>{const g=document.documentElement,m=window.matchMedia("(prefers-color-scheme: dark)"),x=()=>{const _=n?.theme??"system",E=m.matches;_==="dark"||_==="system"&&E?g.classList.add("dark"):g.classList.remove("dark")};if(x(),n?.theme==="system")return m.addEventListener("change",x),()=>m.removeEventListener("change",x)},[n]),t||!i)return y.jsx(oj,{message:"Initializing Personal Budget..."});if(!r)return u?y.jsx(Zi,{children:y.jsx(Nk,{})}):y.jsx(Zi,{children:y.jsx(bte,{})});const h=typeof navigator<"u"&&!navigator.onLine&&r&&o&&Date.now()-o<c;return y.jsxs(Zi,{children:[h&&y.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200 p-4",children:y.jsxs("div",{className:"flex",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),y.jsx("div",{className:"ml-3",children:y.jsxs("p",{className:"text-sm",children:[y.jsx("strong",{children:"Offline Access:"})," You're using cached authentication. Expires in"," ",Math.ceil((c-(Date.now()-o))/(1440*60*1e3))," ","days. Connect to internet to refresh."]})})]})}),y.jsxs(vz,{children:[y.jsxs(Y6,{children:[y.jsx(bs,{path:"/",element:y.jsx(Zi,{children:y.jsx(ite,{})})}),y.jsx(bs,{path:"/envelope/:id",element:y.jsx(Zi,{children:y.jsx(ute,{})})}),y.jsx(bs,{path:"/add-envelope",element:y.jsx(Zi,{children:y.jsx(fte,{})})}),y.jsx(bs,{path:"/add-transaction",element:y.jsx(Zi,{children:y.jsx(pte,{})})}),y.jsx(bs,{path:"/transactions",element:y.jsx(Zi,{children:y.jsx(gte,{})})}),y.jsx(bs,{path:"/settings",element:y.jsx(Zi,{children:y.jsx(dte,{})})}),y.jsx(bs,{path:"/verify-email",element:y.jsx(Zi,{children:y.jsx(Nk,{})})}),y.jsx(bs,{path:"/card-stack",element:y.jsx(Zi,{children:y.jsx(xte,{})})})]}),y.jsx(wte,{})]}),y.jsx(_te,{})]})}t6({onNeedRefresh(){},onOfflineReady(){console.log("App is ready for offline work")}});Z5.createRoot(document.getElementById("root")).render(y.jsx(G.StrictMode,{children:y.jsx(Ete,{})}));
