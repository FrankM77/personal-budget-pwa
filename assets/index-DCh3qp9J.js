(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function RI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jg={exports:{}},fu={};var Ow;function NI(){if(Ow)return fu;Ow=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,s,o){var c=null;if(o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),"key"in s){o={};for(var d in s)d!=="key"&&(o[d]=s[d])}else o=s;return s=o.ref,{$$typeof:t,type:i,key:c,ref:s!==void 0?s:null,props:o}}return fu.Fragment=e,fu.jsx=n,fu.jsxs=n,fu}var Vw;function II(){return Vw||(Vw=1,jg.exports=NI()),jg.exports}var b=II(),Lg={exports:{}},Ve={};var Pw;function kI(){if(Pw)return Ve;Pw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),_=Symbol.iterator;function E(V){return V===null||typeof V!="object"?null:(V=_&&V[_]||V["@@iterator"],typeof V=="function"?V:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,R={};function P(V,J,he){this.props=V,this.context=J,this.refs=R,this.updater=he||N}P.prototype.isReactComponent={},P.prototype.setState=function(V,J){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,J,"setState")},P.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function U(){}U.prototype=P.prototype;function L(V,J,he){this.props=V,this.context=J,this.refs=R,this.updater=he||N}var $=L.prototype=new U;$.constructor=L,A($,P.prototype),$.isPureReactComponent=!0;var te=Array.isArray;function ne(){}var S={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function M(V,J,he){var me=he.ref;return{$$typeof:t,type:V,key:J,ref:me!==void 0?me:null,props:he}}function z(V,J){return M(V.type,J,V.props)}function O(V){return typeof V=="object"&&V!==null&&V.$$typeof===t}function B(V){var J={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(he){return J[he]})}var j=/\/+/g;function Oe(V,J){return typeof V=="object"&&V!==null&&V.key!=null?B(""+V.key):J.toString(36)}function ce(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(ne,ne):(V.status="pending",V.then(function(J){V.status==="pending"&&(V.status="fulfilled",V.value=J)},function(J){V.status==="pending"&&(V.status="rejected",V.reason=J)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function G(V,J,he,me,ye){var xe=typeof V;(xe==="undefined"||xe==="boolean")&&(V=null);var we=!1;if(V===null)we=!0;else switch(xe){case"bigint":case"string":case"number":we=!0;break;case"object":switch(V.$$typeof){case t:case e:we=!0;break;case g:return we=V._init,G(we(V._payload),J,he,me,ye)}}if(we)return ye=ye(V),we=me===""?"."+Oe(V,0):me,te(ye)?(he="",we!=null&&(he=we.replace(j,"$&/")+"/"),G(ye,J,he,"",function(nn){return nn})):ye!=null&&(O(ye)&&(ye=z(ye,he+(ye.key==null||V&&V.key===ye.key?"":(""+ye.key).replace(j,"$&/")+"/")+we)),J.push(ye)),1;we=0;var ct=me===""?".":me+":";if(te(V))for(var Fe=0;Fe<V.length;Fe++)me=V[Fe],xe=ct+Oe(me,Fe),we+=G(me,J,he,xe,ye);else if(Fe=E(V),typeof Fe=="function")for(V=Fe.call(V),Fe=0;!(me=V.next()).done;)me=me.value,xe=ct+Oe(me,Fe++),we+=G(me,J,he,xe,ye);else if(xe==="object"){if(typeof V.then=="function")return G(ce(V),J,he,me,ye);throw J=String(V),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return we}function ee(V,J,he){if(V==null)return V;var me=[],ye=0;return G(V,me,"","",function(xe){return J.call(he,xe,ye++)}),me}function fe(V){if(V._status===-1){var J=V._result;J=J(),J.then(function(he){(V._status===0||V._status===-1)&&(V._status=1,V._result=he)},function(he){(V._status===0||V._status===-1)&&(V._status=2,V._result=he)}),V._status===-1&&(V._status=0,V._result=J)}if(V._status===1)return V._result.default;throw V._result}var de=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},re={map:ee,forEach:function(V,J,he){ee(V,function(){J.apply(this,arguments)},he)},count:function(V){var J=0;return ee(V,function(){J++}),J},toArray:function(V){return ee(V,function(J){return J})||[]},only:function(V){if(!O(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Ve.Activity=v,Ve.Children=re,Ve.Component=P,Ve.Fragment=n,Ve.Profiler=s,Ve.PureComponent=L,Ve.StrictMode=i,Ve.Suspense=h,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(V){return S.H.useMemoCache(V)}},Ve.cache=function(V){return function(){return V.apply(null,arguments)}},Ve.cacheSignal=function(){return null},Ve.cloneElement=function(V,J,he){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var me=A({},V.props),ye=V.key;if(J!=null)for(xe in J.key!==void 0&&(ye=""+J.key),J)!I.call(J,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&J.ref===void 0||(me[xe]=J[xe]);var xe=arguments.length-2;if(xe===1)me.children=he;else if(1<xe){for(var we=Array(xe),ct=0;ct<xe;ct++)we[ct]=arguments[ct+2];me.children=we}return M(V.type,ye,me)},Ve.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:o,_context:V},V},Ve.createElement=function(V,J,he){var me,ye={},xe=null;if(J!=null)for(me in J.key!==void 0&&(xe=""+J.key),J)I.call(J,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(ye[me]=J[me]);var we=arguments.length-2;if(we===1)ye.children=he;else if(1<we){for(var ct=Array(we),Fe=0;Fe<we;Fe++)ct[Fe]=arguments[Fe+2];ye.children=ct}if(V&&V.defaultProps)for(me in we=V.defaultProps,we)ye[me]===void 0&&(ye[me]=we[me]);return M(V,xe,ye)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(V){return{$$typeof:d,render:V}},Ve.isValidElement=O,Ve.lazy=function(V){return{$$typeof:g,_payload:{_status:-1,_result:V},_init:fe}},Ve.memo=function(V,J){return{$$typeof:f,type:V,compare:J===void 0?null:J}},Ve.startTransition=function(V){var J=S.T,he={};S.T=he;try{var me=V(),ye=S.S;ye!==null&&ye(he,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(ne,de)}catch(xe){de(xe)}finally{J!==null&&he.types!==null&&(J.types=he.types),S.T=J}},Ve.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},Ve.use=function(V){return S.H.use(V)},Ve.useActionState=function(V,J,he){return S.H.useActionState(V,J,he)},Ve.useCallback=function(V,J){return S.H.useCallback(V,J)},Ve.useContext=function(V){return S.H.useContext(V)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(V,J){return S.H.useDeferredValue(V,J)},Ve.useEffect=function(V,J){return S.H.useEffect(V,J)},Ve.useEffectEvent=function(V){return S.H.useEffectEvent(V)},Ve.useId=function(){return S.H.useId()},Ve.useImperativeHandle=function(V,J,he){return S.H.useImperativeHandle(V,J,he)},Ve.useInsertionEffect=function(V,J){return S.H.useInsertionEffect(V,J)},Ve.useLayoutEffect=function(V,J){return S.H.useLayoutEffect(V,J)},Ve.useMemo=function(V,J){return S.H.useMemo(V,J)},Ve.useOptimistic=function(V,J){return S.H.useOptimistic(V,J)},Ve.useReducer=function(V,J,he){return S.H.useReducer(V,J,he)},Ve.useRef=function(V){return S.H.useRef(V)},Ve.useState=function(V){return S.H.useState(V)},Ve.useSyncExternalStore=function(V,J,he){return S.H.useSyncExternalStore(V,J,he)},Ve.useTransition=function(){return S.H.useTransition()},Ve.version="19.2.0",Ve}var jw;function Ay(){return jw||(jw=1,Lg.exports=kI()),Lg.exports}var D=Ay();const Gh=RI(D);var Ug={exports:{}},mu={},zg={exports:{}},Fg={};var Lw;function DI(){return Lw||(Lw=1,(function(t){function e(G,ee){var fe=G.length;G.push(ee);e:for(;0<fe;){var de=fe-1>>>1,re=G[de];if(0<s(re,ee))G[de]=ee,G[fe]=re,fe=de;else break e}}function n(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var ee=G[0],fe=G.pop();if(fe!==ee){G[0]=fe;e:for(var de=0,re=G.length,V=re>>>1;de<V;){var J=2*(de+1)-1,he=G[J],me=J+1,ye=G[me];if(0>s(he,fe))me<re&&0>s(ye,he)?(G[de]=ye,G[me]=fe,de=me):(G[de]=he,G[J]=fe,de=J);else if(me<re&&0>s(ye,fe))G[de]=ye,G[me]=fe,de=me;else break e}}return ee}function s(G,ee){var fe=G.sortIndex-ee.sortIndex;return fe!==0?fe:G.id-ee.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var h=[],f=[],g=1,v=null,_=3,E=!1,N=!1,A=!1,R=!1,P=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function $(G){for(var ee=n(f);ee!==null;){if(ee.callback===null)i(f);else if(ee.startTime<=G)i(f),ee.sortIndex=ee.expirationTime,e(h,ee);else break;ee=n(f)}}function te(G){if(A=!1,$(G),!N)if(n(h)!==null)N=!0,ne||(ne=!0,B());else{var ee=n(f);ee!==null&&ce(te,ee.startTime-G)}}var ne=!1,S=-1,I=5,M=-1;function z(){return R?!0:!(t.unstable_now()-M<I)}function O(){if(R=!1,ne){var G=t.unstable_now();M=G;var ee=!0;try{e:{N=!1,A&&(A=!1,U(S),S=-1),E=!0;var fe=_;try{t:{for($(G),v=n(h);v!==null&&!(v.expirationTime>G&&z());){var de=v.callback;if(typeof de=="function"){v.callback=null,_=v.priorityLevel;var re=de(v.expirationTime<=G);if(G=t.unstable_now(),typeof re=="function"){v.callback=re,$(G),ee=!0;break t}v===n(h)&&i(h),$(G)}else i(h);v=n(h)}if(v!==null)ee=!0;else{var V=n(f);V!==null&&ce(te,V.startTime-G),ee=!1}}break e}finally{v=null,_=fe,E=!1}ee=void 0}}finally{ee?B():ne=!1}}}var B;if(typeof L=="function")B=function(){L(O)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,Oe=j.port2;j.port1.onmessage=O,B=function(){Oe.postMessage(null)}}else B=function(){P(O,0)};function ce(G,ee){S=P(function(){G(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(G){switch(_){case 1:case 2:case 3:var ee=3;break;default:ee=_}var fe=_;_=ee;try{return G()}finally{_=fe}},t.unstable_requestPaint=function(){R=!0},t.unstable_runWithPriority=function(G,ee){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var fe=_;_=G;try{return ee()}finally{_=fe}},t.unstable_scheduleCallback=function(G,ee,fe){var de=t.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?de+fe:de):fe=de,G){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=fe+re,G={id:g++,callback:ee,priorityLevel:G,startTime:fe,expirationTime:re,sortIndex:-1},fe>de?(G.sortIndex=fe,e(f,G),n(h)===null&&G===n(f)&&(A?(U(S),S=-1):A=!0,ce(te,fe-de))):(G.sortIndex=re,e(h,G),N||E||(N=!0,ne||(ne=!0,B()))),G},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(G){var ee=_;return function(){var fe=_;_=ee;try{return G.apply(this,arguments)}finally{_=fe}}}})(Fg)),Fg}var Uw;function MI(){return Uw||(Uw=1,zg.exports=DI()),zg.exports}var Bg={exports:{}},xn={};var zw;function OI(){if(zw)return xn;zw=1;var t=Ay();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(h,f,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:h,containerInfo:f,implementation:g}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return xn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,xn.createPortal=function(h,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(h,f,null,g)},xn.flushSync=function(h){var f=c.T,g=i.p;try{if(c.T=null,i.p=2,h)return h()}finally{c.T=f,i.p=g,i.d.f()}},xn.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(h,f))},xn.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},xn.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var g=f.as,v=d(g,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,E=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?i.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:_,fetchPriority:E}):g==="script"&&i.d.X(h,{crossOrigin:v,integrity:_,fetchPriority:E,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},xn.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=d(f.as,f.crossOrigin);i.d.M(h,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(h)},xn.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,v=d(g,f.crossOrigin);i.d.L(h,g,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},xn.preloadModule=function(h,f){if(typeof h=="string")if(f){var g=d(f.as,f.crossOrigin);i.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(h)},xn.requestFormReset=function(h){i.d.r(h)},xn.unstable_batchedUpdates=function(h,f){return h(f)},xn.useFormState=function(h,f,g){return c.H.useFormState(h,f,g)},xn.useFormStatus=function(){return c.H.useHostTransitionStatus()},xn.version="19.2.0",xn}var Fw;function VI(){if(Fw)return Bg.exports;Fw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Bg.exports=OI(),Bg.exports}var Bw;function PI(){if(Bw)return mu;Bw=1;var t=MI(),e=Ay(),n=VI();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var a=r,l=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(l=a.return),r=a.return;while(r)}return a.tag===3?l:null}function c(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function d(r){if(r.tag===31){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function h(r){if(o(r)!==r)throw Error(i(188))}function f(r){var a=r.alternate;if(!a){if(a=o(r),a===null)throw Error(i(188));return a!==r?null:r}for(var l=r,u=a;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(u=p.return,u!==null){l=u;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return h(p),r;if(y===u)return h(p),a;y=y.sibling}throw Error(i(188))}if(l.return!==u.return)l=p,u=y;else{for(var x=!1,C=p.child;C;){if(C===l){x=!0,l=p,u=y;break}if(C===u){x=!0,u=p,l=y;break}C=C.sibling}if(!x){for(C=y.child;C;){if(C===l){x=!0,l=y,u=p;break}if(C===u){x=!0,u=y,l=p;break}C=C.sibling}if(!x)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:a}function g(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=g(r),a!==null)return a;r=r.sibling}return null}var v=Object.assign,_=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),L=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function B(r){return r===null||typeof r!="object"?null:(r=O&&r[O]||r["@@iterator"],typeof r=="function"?r:null)}var j=Symbol.for("react.client.reference");function Oe(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===j?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case A:return"Fragment";case P:return"Profiler";case R:return"StrictMode";case te:return"Suspense";case ne:return"SuspenseList";case M:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case N:return"Portal";case L:return r.displayName||"Context";case U:return(r._context.displayName||"Context")+".Consumer";case $:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case S:return a=r.displayName||null,a!==null?a:Oe(r.type)||"Memo";case I:a=r._payload,r=r._init;try{return Oe(r(a))}catch{}}return null}var ce=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},de=[],re=-1;function V(r){return{current:r}}function J(r){0>re||(r.current=de[re],de[re]=null,re--)}function he(r,a){re++,de[re]=r.current,r.current=a}var me=V(null),ye=V(null),xe=V(null),we=V(null);function ct(r,a){switch(he(xe,a),he(ye,r),he(me,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?iw(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=iw(a),r=rw(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}J(me),he(me,r)}function Fe(){J(me),J(ye),J(xe)}function nn(r){r.memoizedState!==null&&he(we,r);var a=me.current,l=rw(a,r.type);a!==l&&(he(ye,r),he(me,l))}function wn(r){ye.current===r&&(J(me),J(ye)),we.current===r&&(J(we),cu._currentValue=fe)}var Ts,kr;function Kn(r){if(Ts===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Ts=a&&a[1]||"",kr=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ts+r+kr}var qi=!1;function Dr(r,a){if(!r||qi)return"";qi=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(Z){var X=Z}Reflect.construct(r,[],oe)}else{try{oe.call()}catch(Z){X=Z}r.call(oe.prototype)}}else{try{throw Error()}catch(Z){X=Z}(oe=r())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(Z){if(Z&&X&&typeof Z.stack=="string")return[Z.stack,X.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),x=y[0],C=y[1];if(x&&C){var F=x.split(`
`),Q=C.split(`
`);for(p=u=0;u<F.length&&!F[u].includes("DetermineComponentFrameRoot");)u++;for(;p<Q.length&&!Q[p].includes("DetermineComponentFrameRoot");)p++;if(u===F.length||p===Q.length)for(u=F.length-1,p=Q.length-1;1<=u&&0<=p&&F[u]!==Q[p];)p--;for(;1<=u&&0<=p;u--,p--)if(F[u]!==Q[p]){if(u!==1||p!==1)do if(u--,p--,0>p||F[u]!==Q[p]){var ie=`
`+F[u].replace(" at new "," at ");return r.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",r.displayName)),ie}while(1<=u&&0<=p);break}}}finally{qi=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?Kn(l):""}function Oa(r,a){switch(r.tag){case 26:case 27:case 5:return Kn(r.type);case 16:return Kn("Lazy");case 13:return r.child!==a&&a!==null?Kn("Suspense Fallback"):Kn("Suspense");case 19:return Kn("SuspenseList");case 0:case 15:return Dr(r.type,!1);case 11:return Dr(r.type.render,!1);case 1:return Dr(r.type,!0);case 31:return Kn("Activity");default:return""}}function Va(r){try{var a="",l=null;do a+=Oa(r,l),l=r,r=r.return;while(r);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Tt=Object.prototype.hasOwnProperty,Ot=t.unstable_scheduleCallback,Hi=t.unstable_cancelCallback,hc=t.unstable_shouldYield,Uo=t.unstable_requestPaint,ln=t.unstable_now,Mr=t.unstable_getCurrentPriorityLevel,Pa=t.unstable_ImmediatePriority,ja=t.unstable_UserBlockingPriority,$i=t.unstable_NormalPriority,fc=t.unstable_LowPriority,Te=t.unstable_IdlePriority,Ze=t.log,cn=t.unstable_setDisableYieldValue,Zt=null,Et=null;function Mn(r){if(typeof Ze=="function"&&cn(r),Et&&typeof Et.setStrictMode=="function")try{Et.setStrictMode(Zt,r)}catch{}}var Rt=Math.clz32?Math.clz32:Es,La=Math.log,tt=Math.LN2;function Es(r){return r>>>=0,r===0?32:31-(La(r)/tt|0)|0}var Gi=256,Ua=262144,zt=4194304;function Ki(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Yi(r,a,l){var u=r.pendingLanes;if(u===0)return 0;var p=0,y=r.suspendedLanes,x=r.pingedLanes;r=r.warmLanes;var C=u&134217727;return C!==0?(u=C&~y,u!==0?p=Ki(u):(x&=C,x!==0?p=Ki(x):l||(l=C&~r,l!==0&&(p=Ki(l))))):(C=u&~y,C!==0?p=Ki(C):x!==0?p=Ki(x):l||(l=u&~r,l!==0&&(p=Ki(l)))),p===0?0:a!==0&&a!==p&&(a&y)===0&&(y=p&-p,l=a&-a,y>=l||y===32&&(l&4194048)!==0)?a:p}function Ai(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function Fm(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Td(){var r=zt;return zt<<=1,(zt&62914560)===0&&(zt=4194304),r}function Qi(r){for(var a=[],l=0;31>l;l++)a.push(r);return a}function za(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Bm(r,a,l,u,p,y){var x=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var C=r.entanglements,F=r.expirationTimes,Q=r.hiddenUpdates;for(l=x&~l;0<l;){var ie=31-Rt(l),oe=1<<ie;C[ie]=0,F[ie]=-1;var X=Q[ie];if(X!==null)for(Q[ie]=null,ie=0;ie<X.length;ie++){var Z=X[ie];Z!==null&&(Z.lane&=-536870913)}l&=~oe}u!==0&&Fa(r,u,0),y!==0&&p===0&&r.tag!==0&&(r.suspendedLanes|=y&~(x&~a))}function Fa(r,a,l){r.pendingLanes|=a,r.suspendedLanes&=~a;var u=31-Rt(a);r.entangledLanes|=a,r.entanglements[u]=r.entanglements[u]|1073741824|l&261930}function mc(r,a){var l=r.entangledLanes|=a;for(r=r.entanglements;l;){var u=31-Rt(l),p=1<<u;p&a|r[u]&a&&(r[u]|=a),l&=~p}}function pc(r,a){var l=a&-a;return l=(l&42)!==0?1:Ba(l),(l&(r.suspendedLanes|a))!==0?0:l}function Ba(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Or(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Ed(){var r=ee.p;return r!==0?r:(r=window.event,r===void 0?32:Cw(r.type))}function Ci(r,a){var l=ee.p;try{return ee.p=r,a()}finally{ee.p=l}}var Ri=Math.random().toString(36).slice(2),Ft="__reactFiber$"+Ri,rn="__reactProps$"+Ri,Xi="__reactContainer$"+Ri,zo="__reactEvents$"+Ri,qm="__reactListeners$"+Ri,Sd="__reactHandles$"+Ri,Ad="__reactResources$"+Ri,Wi="__reactMarker$"+Ri;function Fo(r){delete r[Ft],delete r[rn],delete r[zo],delete r[qm],delete r[Sd]}function Zi(r){var a=r[Ft];if(a)return a;for(var l=r.parentNode;l;){if(a=l[Xi]||l[Ft]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(r=dw(r);r!==null;){if(l=r[Ft])return l;r=dw(r)}return a}r=l,l=r.parentNode}return null}function si(r){if(r=r[Ft]||r[Xi]){var a=r.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return r}return null}function Yn(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function Ji(r){var a=r[Ad];return a||(a=r[Ad]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Bt(r){r[Wi]=!0}var gc=new Set,yc={};function er(r,a){tr(r,a),tr(r+"Capture",a)}function tr(r,a){for(yc[r]=a,r=0;r<a.length;r++)gc.add(a[r])}var vc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bc={},_c={};function Cd(r){return Tt.call(_c,r)?!0:Tt.call(bc,r)?!1:vc.test(r)?_c[r]=!0:(bc[r]=!0,!1)}function Bo(r,a,l){if(Cd(a))if(l===null)r.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+l)}}function Qn(r,a,l){if(l===null)r.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+l)}}function qt(r,a,l,u){if(u===null)r.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(a,l,""+u)}}function sn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ss(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function wc(r,a,l){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,a);if(!r.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,y=u.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return p.call(this)},set:function(x){l=""+x,y.call(this,x)}}),Object.defineProperty(r,a,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(x){l=""+x},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function st(r){if(!r._valueTracker){var a=Ss(r)?"checked":"value";r._valueTracker=wc(r,a,""+r[a])}}function qa(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var l=a.getValue(),u="";return r&&(u=Ss(r)?r.checked?"true":"false":r.value),r=u,r!==l?(a.setValue(r),!0):!1}function nr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Ha=/[\n"\\]/g;function On(r){return r.replace(Ha,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function qo(r,a,l,u,p,y,x,C){r.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?r.type=x:r.removeAttribute("type"),a!=null?x==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+sn(a)):r.value!==""+sn(a)&&(r.value=""+sn(a)):x!=="submit"&&x!=="reset"||r.removeAttribute("value"),a!=null?xc(r,x,sn(a)):l!=null?xc(r,x,sn(l)):u!=null&&r.removeAttribute("value"),p==null&&y!=null&&(r.defaultChecked=!!y),p!=null&&(r.checked=p&&typeof p!="function"&&typeof p!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.name=""+sn(C):r.removeAttribute("name")}function Rd(r,a,l,u,p,y,x,C){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),a!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){st(r);return}l=l!=null?""+sn(l):"",a=a!=null?""+sn(a):l,C||a===r.value||(r.value=a),r.defaultValue=a}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=C?r.checked:!!u,r.defaultChecked=!!u,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.name=x),st(r)}function xc(r,a,l){a==="number"&&nr(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function As(r,a,l,u){if(r=r.options,a){a={};for(var p=0;p<l.length;p++)a["$"+l[p]]=!0;for(l=0;l<r.length;l++)p=a.hasOwnProperty("$"+r[l].value),r[l].selected!==p&&(r[l].selected=p),p&&u&&(r[l].defaultSelected=!0)}else{for(l=""+sn(l),a=null,p=0;p<r.length;p++){if(r[p].value===l){r[p].selected=!0,u&&(r[p].defaultSelected=!0);return}a!==null||r[p].disabled||(a=r[p])}a!==null&&(a.selected=!0)}}function Nd(r,a,l){if(a!=null&&(a=""+sn(a),a!==r.value&&(r.value=a),l==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=l!=null?""+sn(l):""}function Cs(r,a,l,u){if(a==null){if(u!=null){if(l!=null)throw Error(i(92));if(ce(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),a=l}l=sn(a),r.defaultValue=l,u=r.textContent,u===l&&u!==""&&u!==null&&(r.value=u),st(r)}function Vn(r,a){if(a){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=a;return}}r.textContent=a}var Id=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tc(r,a,l){var u=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":u?r.setProperty(a,l):typeof l!="number"||l===0||Id.has(a)?a==="float"?r.cssFloat=l:r[a]=(""+l).trim():r[a]=l+"px"}function Ec(r,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var p in a)u=a[p],a.hasOwnProperty(p)&&l[p]!==u&&Tc(r,p,u)}else for(var y in a)a.hasOwnProperty(y)&&Tc(r,y,a[y])}function Ho(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $o(r){return Rs.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Ni(){}var Sc=null;function ai(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ns=null,ir=null;function $a(r){var a=si(r);if(a&&(r=a.stateNode)){var l=r[rn]||null;e:switch(r=a.stateNode,a.type){case"input":if(qo(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+On(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var u=l[a];if(u!==r&&u.form===r.form){var p=u[rn]||null;if(!p)throw Error(i(90));qo(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<l.length;a++)u=l[a],u.form===r.form&&qa(u)}break e;case"textarea":Nd(r,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&As(r,!!l.multiple,a,!1)}}}var Go=!1;function Is(r,a,l){if(Go)return r(a,l);Go=!0;try{var u=r(a);return u}finally{if(Go=!1,(Ns!==null||ir!==null)&&(Eh(),Ns&&(a=Ns,r=ir,ir=Ns=null,$a(a),r)))for(a=0;a<r.length;a++)$a(r[a])}}function Ii(r,a){var l=r.stateNode;if(l===null)return null;var u=l[rn]||null;if(u===null)return null;l=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ga=!1;if(oi)try{var ut={};Object.defineProperty(ut,"passive",{get:function(){Ga=!0}}),window.addEventListener("test",ut,ut),window.removeEventListener("test",ut,ut)}catch{Ga=!1}var rr=null,Ac=null,Ka=null;function Cc(){if(Ka)return Ka;var r,a=Ac,l=a.length,u,p="value"in rr?rr.value:rr.textContent,y=p.length;for(r=0;r<l&&a[r]===p[r];r++);var x=l-r;for(u=1;u<=x&&a[l-u]===p[y-u];u++);return Ka=p.slice(r,1<u?1-u:void 0)}function Ya(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function Vr(){return!0}function ki(){return!1}function un(r){function a(l,u,p,y,x){this._reactName=l,this._targetInst=p,this.type=u,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(l=r[C],this[C]=l?l(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Vr:ki,this.isPropagationStopped=ki,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Vr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Vr)},persist:function(){},isPersistent:Vr}),a}var Pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sr=un(Pr),ks=v({},Pr,{view:0,detail:0}),Rc=un(ks),Ds,Ko,ar,Yo=v({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ms,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ar&&(ar&&r.type==="mousemove"?(Ds=r.screenX-ar.screenX,Ko=r.screenY-ar.screenY):Ko=Ds=0,ar=r),Ds)},movementY:function(r){return"movementY"in r?r.movementY:Ko}}),Nc=un(Yo),Qa=v({},Yo,{dataTransfer:0}),Dd=un(Qa),Md=v({},ks,{relatedTarget:0}),Xa=un(Md),Ic=v({},Pr,{animationName:0,elapsedTime:0,pseudoElement:0}),Od=un(Ic),Qo=v({},Pr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Vd=un(Qo),Pd=v({},Pr,{data:0}),or=un(Pd),jd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ld={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ud={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zd(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=Ud[r])?!!a[r]:!1}function Ms(){return zd}var In=v({},ks,{key:function(r){if(r.key){var a=jd[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=Ya(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Ld[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ms,charCode:function(r){return r.type==="keypress"?Ya(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ya(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Fd=un(In),Bd=v({},Yo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jr=un(Bd),m=v({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ms}),w=un(m),T=v({},Pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),k=un(T),K=v({},Yo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),W=un(K),pe=v({},Pr,{newState:0,oldState:0}),je=un(pe),Vt=[9,13,27,32],nt=oi&&"CompositionEvent"in window,_t=null;oi&&"documentMode"in document&&(_t=document.documentMode);var li=oi&&"TextEvent"in window&&!_t,lr=oi&&(!nt||_t&&8<_t&&11>=_t),Di=" ",Mi=!1;function Wa(r,a){switch(r){case"keyup":return Vt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xo(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Wo=!1;function ZR(r,a){switch(r){case"compositionend":return Xo(a);case"keypress":return a.which!==32?null:(Mi=!0,Di);case"textInput":return r=a.data,r===Di&&Mi?null:r;default:return null}}function JR(r,a){if(Wo)return r==="compositionend"||!nt&&Wa(r,a)?(r=Cc(),Ka=Ac=rr=null,Wo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return lr&&a.locale!=="ko"?null:a.data;default:return null}}var eN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mb(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!eN[r.type]:a==="textarea"}function pb(r,a,l,u){Ns?ir?ir.push(u):ir=[u]:Ns=u,a=kh(a,"onChange"),0<a.length&&(l=new sr("onChange","change",null,l,u),r.push({event:l,listeners:a}))}var kc=null,Dc=null;function tN(r){W_(r,0)}function qd(r){var a=Yn(r);if(qa(a))return r}function gb(r,a){if(r==="change")return a}var yb=!1;if(oi){var Hm;if(oi){var $m="oninput"in document;if(!$m){var vb=document.createElement("div");vb.setAttribute("oninput","return;"),$m=typeof vb.oninput=="function"}Hm=$m}else Hm=!1;yb=Hm&&(!document.documentMode||9<document.documentMode)}function bb(){kc&&(kc.detachEvent("onpropertychange",_b),Dc=kc=null)}function _b(r){if(r.propertyName==="value"&&qd(Dc)){var a=[];pb(a,Dc,r,ai(r)),Is(tN,a)}}function nN(r,a,l){r==="focusin"?(bb(),kc=a,Dc=l,kc.attachEvent("onpropertychange",_b)):r==="focusout"&&bb()}function iN(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return qd(Dc)}function rN(r,a){if(r==="click")return qd(a)}function sN(r,a){if(r==="input"||r==="change")return qd(a)}function aN(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Xn=typeof Object.is=="function"?Object.is:aN;function Mc(r,a){if(Xn(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var l=Object.keys(r),u=Object.keys(a);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var p=l[u];if(!Tt.call(a,p)||!Xn(r[p],a[p]))return!1}return!0}function wb(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function xb(r,a){var l=wb(r);r=0;for(var u;l;){if(l.nodeType===3){if(u=r+l.textContent.length,r<=a&&u>=a)return{node:l,offset:a-r};r=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=wb(l)}}function Tb(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?Tb(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function Eb(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=nr(r.document);a instanceof r.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)r=a.contentWindow;else break;a=nr(r.document)}return a}function Gm(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var oN=oi&&"documentMode"in document&&11>=document.documentMode,Zo=null,Km=null,Oc=null,Ym=!1;function Sb(r,a,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ym||Zo==null||Zo!==nr(u)||(u=Zo,"selectionStart"in u&&Gm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Oc&&Mc(Oc,u)||(Oc=u,u=kh(Km,"onSelect"),0<u.length&&(a=new sr("onSelect","select",null,a,l),r.push({event:a,listeners:u}),a.target=Zo)))}function Za(r,a){var l={};return l[r.toLowerCase()]=a.toLowerCase(),l["Webkit"+r]="webkit"+a,l["Moz"+r]="moz"+a,l}var Jo={animationend:Za("Animation","AnimationEnd"),animationiteration:Za("Animation","AnimationIteration"),animationstart:Za("Animation","AnimationStart"),transitionrun:Za("Transition","TransitionRun"),transitionstart:Za("Transition","TransitionStart"),transitioncancel:Za("Transition","TransitionCancel"),transitionend:Za("Transition","TransitionEnd")},Qm={},Ab={};oi&&(Ab=document.createElement("div").style,"AnimationEvent"in window||(delete Jo.animationend.animation,delete Jo.animationiteration.animation,delete Jo.animationstart.animation),"TransitionEvent"in window||delete Jo.transitionend.transition);function Ja(r){if(Qm[r])return Qm[r];if(!Jo[r])return r;var a=Jo[r],l;for(l in a)if(a.hasOwnProperty(l)&&l in Ab)return Qm[r]=a[l];return r}var Cb=Ja("animationend"),Rb=Ja("animationiteration"),Nb=Ja("animationstart"),lN=Ja("transitionrun"),cN=Ja("transitionstart"),uN=Ja("transitioncancel"),Ib=Ja("transitionend"),kb=new Map,Xm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xm.push("scrollEnd");function Oi(r,a){kb.set(r,a),er(a,[r])}var Hd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},ci=[],el=0,Wm=0;function $d(){for(var r=el,a=Wm=el=0;a<r;){var l=ci[a];ci[a++]=null;var u=ci[a];ci[a++]=null;var p=ci[a];ci[a++]=null;var y=ci[a];if(ci[a++]=null,u!==null&&p!==null){var x=u.pending;x===null?p.next=p:(p.next=x.next,x.next=p),u.pending=p}y!==0&&Db(l,p,y)}}function Gd(r,a,l,u){ci[el++]=r,ci[el++]=a,ci[el++]=l,ci[el++]=u,Wm|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Zm(r,a,l,u){return Gd(r,a,l,u),Kd(r)}function eo(r,a){return Gd(r,null,null,a),Kd(r)}function Db(r,a,l){r.lanes|=l;var u=r.alternate;u!==null&&(u.lanes|=l);for(var p=!1,y=r.return;y!==null;)y.childLanes|=l,u=y.alternate,u!==null&&(u.childLanes|=l),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(p=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,p&&a!==null&&(p=31-Rt(l),r=y.hiddenUpdates,u=r[p],u===null?r[p]=[a]:u.push(a),a.lane=l|536870912),y):null}function Kd(r){if(50<nu)throw nu=0,og=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var tl={};function dN(r,a,l,u){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(r,a,l,u){return new dN(r,a,l,u)}function Jm(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Lr(r,a){var l=r.alternate;return l===null?(l=Wn(r.tag,a,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=a,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,a=r.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function Mb(r,a){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,a=l.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function Yd(r,a,l,u,p,y){var x=0;if(u=r,typeof r=="function")Jm(r)&&(x=1);else if(typeof r=="string")x=gI(r,l,me.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case M:return r=Wn(31,l,a,p),r.elementType=M,r.lanes=y,r;case A:return to(l.children,p,y,a);case R:x=8,p|=24;break;case P:return r=Wn(12,l,a,p|2),r.elementType=P,r.lanes=y,r;case te:return r=Wn(13,l,a,p),r.elementType=te,r.lanes=y,r;case ne:return r=Wn(19,l,a,p),r.elementType=ne,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case L:x=10;break e;case U:x=9;break e;case $:x=11;break e;case S:x=14;break e;case I:x=16,u=null;break e}x=29,l=Error(i(130,r===null?"null":typeof r,"")),u=null}return a=Wn(x,l,a,p),a.elementType=r,a.type=u,a.lanes=y,a}function to(r,a,l,u){return r=Wn(7,r,u,a),r.lanes=l,r}function ep(r,a,l){return r=Wn(6,r,null,a),r.lanes=l,r}function Ob(r){var a=Wn(18,null,null,0);return a.stateNode=r,a}function tp(r,a,l){return a=Wn(4,r.children!==null?r.children:[],r.key,a),a.lanes=l,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var Vb=new WeakMap;function ui(r,a){if(typeof r=="object"&&r!==null){var l=Vb.get(r);return l!==void 0?l:(a={value:r,source:a,stack:Va(a)},Vb.set(r,a),a)}return{value:r,source:a,stack:Va(a)}}var nl=[],il=0,Qd=null,Vc=0,di=[],hi=0,Os=null,cr=1,ur="";function Ur(r,a){nl[il++]=Vc,nl[il++]=Qd,Qd=r,Vc=a}function Pb(r,a,l){di[hi++]=cr,di[hi++]=ur,di[hi++]=Os,Os=r;var u=cr;r=ur;var p=32-Rt(u)-1;u&=~(1<<p),l+=1;var y=32-Rt(a)+p;if(30<y){var x=p-p%5;y=(u&(1<<x)-1).toString(32),u>>=x,p-=x,cr=1<<32-Rt(a)+p|l<<p|u,ur=y+r}else cr=1<<y|l<<p|u,ur=r}function np(r){r.return!==null&&(Ur(r,1),Pb(r,1,0))}function ip(r){for(;r===Qd;)Qd=nl[--il],nl[il]=null,Vc=nl[--il],nl[il]=null;for(;r===Os;)Os=di[--hi],di[hi]=null,ur=di[--hi],di[hi]=null,cr=di[--hi],di[hi]=null}function jb(r,a){di[hi++]=cr,di[hi++]=ur,di[hi++]=Os,cr=a.id,ur=a.overflow,Os=r}var dn=null,yt=null,Qe=!1,Vs=null,fi=!1,rp=Error(i(519));function Ps(r){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Pc(ui(a,r)),rp}function Lb(r){var a=r.stateNode,l=r.type,u=r.memoizedProps;switch(a[Ft]=r,a[rn]=u,l){case"dialog":qe("cancel",a),qe("close",a);break;case"iframe":case"object":case"embed":qe("load",a);break;case"video":case"audio":for(l=0;l<ru.length;l++)qe(ru[l],a);break;case"source":qe("error",a);break;case"img":case"image":case"link":qe("error",a),qe("load",a);break;case"details":qe("toggle",a);break;case"input":qe("invalid",a),Rd(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":qe("invalid",a);break;case"textarea":qe("invalid",a),Cs(a,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||u.suppressHydrationWarning===!0||tw(a.textContent,l)?(u.popover!=null&&(qe("beforetoggle",a),qe("toggle",a)),u.onScroll!=null&&qe("scroll",a),u.onScrollEnd!=null&&qe("scrollend",a),u.onClick!=null&&(a.onclick=Ni),a=!0):a=!1,a||Ps(r,!0)}function Ub(r){for(dn=r.return;dn;)switch(dn.tag){case 5:case 31:case 13:fi=!1;return;case 27:case 3:fi=!0;return;default:dn=dn.return}}function rl(r){if(r!==dn)return!1;if(!Qe)return Ub(r),Qe=!0,!1;var a=r.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||xg(r.type,r.memoizedProps)),l=!l),l&&yt&&Ps(r),Ub(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));yt=uw(r)}else if(a===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));yt=uw(r)}else a===27?(a=yt,Xs(r.type)?(r=Cg,Cg=null,yt=r):yt=a):yt=dn?pi(r.stateNode.nextSibling):null;return!0}function no(){yt=dn=null,Qe=!1}function sp(){var r=Vs;return r!==null&&(Un===null?Un=r:Un.push.apply(Un,r),Vs=null),r}function Pc(r){Vs===null?Vs=[r]:Vs.push(r)}var ap=V(null),io=null,zr=null;function js(r,a,l){he(ap,a._currentValue),a._currentValue=l}function Fr(r){r._currentValue=ap.current,J(ap)}function op(r,a,l){for(;r!==null;){var u=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),r===l)break;r=r.return}}function lp(r,a,l,u){var p=r.child;for(p!==null&&(p.return=r);p!==null;){var y=p.dependencies;if(y!==null){var x=p.child;y=y.firstContext;e:for(;y!==null;){var C=y;y=p;for(var F=0;F<a.length;F++)if(C.context===a[F]){y.lanes|=l,C=y.alternate,C!==null&&(C.lanes|=l),op(y.return,l,r),u||(x=null);break e}y=C.next}}else if(p.tag===18){if(x=p.return,x===null)throw Error(i(341));x.lanes|=l,y=x.alternate,y!==null&&(y.lanes|=l),op(x,l,r),x=null}else x=p.child;if(x!==null)x.return=p;else for(x=p;x!==null;){if(x===r){x=null;break}if(p=x.sibling,p!==null){p.return=x.return,x=p;break}x=x.return}p=x}}function sl(r,a,l,u){r=null;for(var p=a,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var x=p.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var C=p.type;Xn(p.pendingProps.value,x.value)||(r!==null?r.push(C):r=[C])}}else if(p===we.current){if(x=p.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(r!==null?r.push(cu):r=[cu])}p=p.return}r!==null&&lp(a,r,l,u),a.flags|=262144}function Xd(r){for(r=r.firstContext;r!==null;){if(!Xn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ro(r){io=r,zr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function hn(r){return zb(io,r)}function Wd(r,a){return io===null&&ro(r),zb(r,a)}function zb(r,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},zr===null){if(r===null)throw Error(i(308));zr=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else zr=zr.next=a;return l}var hN=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(l,u){r.push(u)}};this.abort=function(){a.aborted=!0,r.forEach(function(l){return l()})}},fN=t.unstable_scheduleCallback,mN=t.unstable_NormalPriority,Ht={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cp(){return{controller:new hN,data:new Map,refCount:0}}function jc(r){r.refCount--,r.refCount===0&&fN(mN,function(){r.controller.abort()})}var Lc=null,up=0,al=0,ol=null;function pN(r,a){if(Lc===null){var l=Lc=[];up=0,al=fg(),ol={status:"pending",value:void 0,then:function(u){l.push(u)}}}return up++,a.then(Fb,Fb),a}function Fb(){if(--up===0&&Lc!==null){ol!==null&&(ol.status="fulfilled");var r=Lc;Lc=null,al=0,ol=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function gN(r,a){var l=[],u={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return r.then(function(){u.status="fulfilled",u.value=a;for(var p=0;p<l.length;p++)(0,l[p])(a)},function(p){for(u.status="rejected",u.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),u}var Bb=G.S;G.S=function(r,a){S_=ln(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&pN(r,a),Bb!==null&&Bb(r,a)};var so=V(null);function dp(){var r=so.current;return r!==null?r:mt.pooledCache}function Zd(r,a){a===null?he(so,so.current):he(so,a.pool)}function qb(){var r=dp();return r===null?null:{parent:Ht._currentValue,pool:r}}var ll=Error(i(460)),hp=Error(i(474)),Jd=Error(i(542)),eh={then:function(){}};function Hb(r){return r=r.status,r==="fulfilled"||r==="rejected"}function $b(r,a,l){switch(l=r[l],l===void 0?r.push(a):l!==a&&(a.then(Ni,Ni),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,Kb(r),r;default:if(typeof a.status=="string")a.then(Ni,Ni);else{if(r=mt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(u){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=u}},function(u){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,Kb(r),r}throw oo=a,ll}}function ao(r){try{var a=r._init;return a(r._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(oo=l,ll):l}}var oo=null;function Gb(){if(oo===null)throw Error(i(459));var r=oo;return oo=null,r}function Kb(r){if(r===ll||r===Jd)throw Error(i(483))}var cl=null,Uc=0;function th(r){var a=Uc;return Uc+=1,cl===null&&(cl=[]),$b(cl,r,a)}function zc(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function nh(r,a){throw a.$$typeof===_?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function Yb(r){function a(H,q){if(r){var Y=H.deletions;Y===null?(H.deletions=[q],H.flags|=16):Y.push(q)}}function l(H,q){if(!r)return null;for(;q!==null;)a(H,q),q=q.sibling;return null}function u(H){for(var q=new Map;H!==null;)H.key!==null?q.set(H.key,H):q.set(H.index,H),H=H.sibling;return q}function p(H,q){return H=Lr(H,q),H.index=0,H.sibling=null,H}function y(H,q,Y){return H.index=Y,r?(Y=H.alternate,Y!==null?(Y=Y.index,Y<q?(H.flags|=67108866,q):Y):(H.flags|=67108866,q)):(H.flags|=1048576,q)}function x(H){return r&&H.alternate===null&&(H.flags|=67108866),H}function C(H,q,Y,se){return q===null||q.tag!==6?(q=ep(Y,H.mode,se),q.return=H,q):(q=p(q,Y),q.return=H,q)}function F(H,q,Y,se){var Se=Y.type;return Se===A?ie(H,q,Y.props.children,se,Y.key):q!==null&&(q.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===I&&ao(Se)===q.type)?(q=p(q,Y.props),zc(q,Y),q.return=H,q):(q=Yd(Y.type,Y.key,Y.props,null,H.mode,se),zc(q,Y),q.return=H,q)}function Q(H,q,Y,se){return q===null||q.tag!==4||q.stateNode.containerInfo!==Y.containerInfo||q.stateNode.implementation!==Y.implementation?(q=tp(Y,H.mode,se),q.return=H,q):(q=p(q,Y.children||[]),q.return=H,q)}function ie(H,q,Y,se,Se){return q===null||q.tag!==7?(q=to(Y,H.mode,se,Se),q.return=H,q):(q=p(q,Y),q.return=H,q)}function oe(H,q,Y){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=ep(""+q,H.mode,Y),q.return=H,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case E:return Y=Yd(q.type,q.key,q.props,null,H.mode,Y),zc(Y,q),Y.return=H,Y;case N:return q=tp(q,H.mode,Y),q.return=H,q;case I:return q=ao(q),oe(H,q,Y)}if(ce(q)||B(q))return q=to(q,H.mode,Y,null),q.return=H,q;if(typeof q.then=="function")return oe(H,th(q),Y);if(q.$$typeof===L)return oe(H,Wd(H,q),Y);nh(H,q)}return null}function X(H,q,Y,se){var Se=q!==null?q.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Se!==null?null:C(H,q,""+Y,se);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case E:return Y.key===Se?F(H,q,Y,se):null;case N:return Y.key===Se?Q(H,q,Y,se):null;case I:return Y=ao(Y),X(H,q,Y,se)}if(ce(Y)||B(Y))return Se!==null?null:ie(H,q,Y,se,null);if(typeof Y.then=="function")return X(H,q,th(Y),se);if(Y.$$typeof===L)return X(H,q,Wd(H,Y),se);nh(H,Y)}return null}function Z(H,q,Y,se,Se){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return H=H.get(Y)||null,C(q,H,""+se,Se);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case E:return H=H.get(se.key===null?Y:se.key)||null,F(q,H,se,Se);case N:return H=H.get(se.key===null?Y:se.key)||null,Q(q,H,se,Se);case I:return se=ao(se),Z(H,q,Y,se,Se)}if(ce(se)||B(se))return H=H.get(Y)||null,ie(q,H,se,Se,null);if(typeof se.then=="function")return Z(H,q,Y,th(se),Se);if(se.$$typeof===L)return Z(H,q,Y,Wd(q,se),Se);nh(q,se)}return null}function be(H,q,Y,se){for(var Se=null,Je=null,_e=q,Ue=q=0,$e=null;_e!==null&&Ue<Y.length;Ue++){_e.index>Ue?($e=_e,_e=null):$e=_e.sibling;var et=X(H,_e,Y[Ue],se);if(et===null){_e===null&&(_e=$e);break}r&&_e&&et.alternate===null&&a(H,_e),q=y(et,q,Ue),Je===null?Se=et:Je.sibling=et,Je=et,_e=$e}if(Ue===Y.length)return l(H,_e),Qe&&Ur(H,Ue),Se;if(_e===null){for(;Ue<Y.length;Ue++)_e=oe(H,Y[Ue],se),_e!==null&&(q=y(_e,q,Ue),Je===null?Se=_e:Je.sibling=_e,Je=_e);return Qe&&Ur(H,Ue),Se}for(_e=u(_e);Ue<Y.length;Ue++)$e=Z(_e,H,Ue,Y[Ue],se),$e!==null&&(r&&$e.alternate!==null&&_e.delete($e.key===null?Ue:$e.key),q=y($e,q,Ue),Je===null?Se=$e:Je.sibling=$e,Je=$e);return r&&_e.forEach(function(ta){return a(H,ta)}),Qe&&Ur(H,Ue),Se}function Ce(H,q,Y,se){if(Y==null)throw Error(i(151));for(var Se=null,Je=null,_e=q,Ue=q=0,$e=null,et=Y.next();_e!==null&&!et.done;Ue++,et=Y.next()){_e.index>Ue?($e=_e,_e=null):$e=_e.sibling;var ta=X(H,_e,et.value,se);if(ta===null){_e===null&&(_e=$e);break}r&&_e&&ta.alternate===null&&a(H,_e),q=y(ta,q,Ue),Je===null?Se=ta:Je.sibling=ta,Je=ta,_e=$e}if(et.done)return l(H,_e),Qe&&Ur(H,Ue),Se;if(_e===null){for(;!et.done;Ue++,et=Y.next())et=oe(H,et.value,se),et!==null&&(q=y(et,q,Ue),Je===null?Se=et:Je.sibling=et,Je=et);return Qe&&Ur(H,Ue),Se}for(_e=u(_e);!et.done;Ue++,et=Y.next())et=Z(_e,H,Ue,et.value,se),et!==null&&(r&&et.alternate!==null&&_e.delete(et.key===null?Ue:et.key),q=y(et,q,Ue),Je===null?Se=et:Je.sibling=et,Je=et);return r&&_e.forEach(function(CI){return a(H,CI)}),Qe&&Ur(H,Ue),Se}function ft(H,q,Y,se){if(typeof Y=="object"&&Y!==null&&Y.type===A&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case E:e:{for(var Se=Y.key;q!==null;){if(q.key===Se){if(Se=Y.type,Se===A){if(q.tag===7){l(H,q.sibling),se=p(q,Y.props.children),se.return=H,H=se;break e}}else if(q.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===I&&ao(Se)===q.type){l(H,q.sibling),se=p(q,Y.props),zc(se,Y),se.return=H,H=se;break e}l(H,q);break}else a(H,q);q=q.sibling}Y.type===A?(se=to(Y.props.children,H.mode,se,Y.key),se.return=H,H=se):(se=Yd(Y.type,Y.key,Y.props,null,H.mode,se),zc(se,Y),se.return=H,H=se)}return x(H);case N:e:{for(Se=Y.key;q!==null;){if(q.key===Se)if(q.tag===4&&q.stateNode.containerInfo===Y.containerInfo&&q.stateNode.implementation===Y.implementation){l(H,q.sibling),se=p(q,Y.children||[]),se.return=H,H=se;break e}else{l(H,q);break}else a(H,q);q=q.sibling}se=tp(Y,H.mode,se),se.return=H,H=se}return x(H);case I:return Y=ao(Y),ft(H,q,Y,se)}if(ce(Y))return be(H,q,Y,se);if(B(Y)){if(Se=B(Y),typeof Se!="function")throw Error(i(150));return Y=Se.call(Y),Ce(H,q,Y,se)}if(typeof Y.then=="function")return ft(H,q,th(Y),se);if(Y.$$typeof===L)return ft(H,q,Wd(H,Y),se);nh(H,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,q!==null&&q.tag===6?(l(H,q.sibling),se=p(q,Y),se.return=H,H=se):(l(H,q),se=ep(Y,H.mode,se),se.return=H,H=se),x(H)):l(H,q)}return function(H,q,Y,se){try{Uc=0;var Se=ft(H,q,Y,se);return cl=null,Se}catch(_e){if(_e===ll||_e===Jd)throw _e;var Je=Wn(29,_e,null,H.mode);return Je.lanes=se,Je.return=H,Je}finally{}}}var lo=Yb(!0),Qb=Yb(!1),Ls=!1;function fp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mp(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Us(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function zs(r,a,l){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(it&2)!==0){var p=u.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),u.pending=a,a=Kd(r),Db(r,null,l),a}return Gd(r,u,a,l),Kd(r)}function Fc(r,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var u=a.lanes;u&=r.pendingLanes,l|=u,a.lanes=l,mc(r,l)}}function pp(r,a){var l=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var x={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?p=y=x:y=y.next=x,l=l.next}while(l!==null);y===null?p=y=a:y=y.next=a}else p=y=a;l={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=a:r.next=a,l.lastBaseUpdate=a}var gp=!1;function Bc(){if(gp){var r=ol;if(r!==null)throw r}}function qc(r,a,l,u){gp=!1;var p=r.updateQueue;Ls=!1;var y=p.firstBaseUpdate,x=p.lastBaseUpdate,C=p.shared.pending;if(C!==null){p.shared.pending=null;var F=C,Q=F.next;F.next=null,x===null?y=Q:x.next=Q,x=F;var ie=r.alternate;ie!==null&&(ie=ie.updateQueue,C=ie.lastBaseUpdate,C!==x&&(C===null?ie.firstBaseUpdate=Q:C.next=Q,ie.lastBaseUpdate=F))}if(y!==null){var oe=p.baseState;x=0,ie=Q=F=null,C=y;do{var X=C.lane&-536870913,Z=X!==C.lane;if(Z?(He&X)===X:(u&X)===X){X!==0&&X===al&&(gp=!0),ie!==null&&(ie=ie.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var be=r,Ce=C;X=a;var ft=l;switch(Ce.tag){case 1:if(be=Ce.payload,typeof be=="function"){oe=be.call(ft,oe,X);break e}oe=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Ce.payload,X=typeof be=="function"?be.call(ft,oe,X):be,X==null)break e;oe=v({},oe,X);break e;case 2:Ls=!0}}X=C.callback,X!==null&&(r.flags|=64,Z&&(r.flags|=8192),Z=p.callbacks,Z===null?p.callbacks=[X]:Z.push(X))}else Z={lane:X,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ie===null?(Q=ie=Z,F=oe):ie=ie.next=Z,x|=X;if(C=C.next,C===null){if(C=p.shared.pending,C===null)break;Z=C,C=Z.next,Z.next=null,p.lastBaseUpdate=Z,p.shared.pending=null}}while(!0);ie===null&&(F=oe),p.baseState=F,p.firstBaseUpdate=Q,p.lastBaseUpdate=ie,y===null&&(p.shared.lanes=0),$s|=x,r.lanes=x,r.memoizedState=oe}}function Xb(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function Wb(r,a){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)Xb(l[r],a)}var ul=V(null),ih=V(0);function Zb(r,a){r=Xr,he(ih,r),he(ul,a),Xr=r|a.baseLanes}function yp(){he(ih,Xr),he(ul,ul.current)}function vp(){Xr=ih.current,J(ul),J(ih)}var Zn=V(null),mi=null;function Fs(r){var a=r.alternate;he(Pt,Pt.current&1),he(Zn,r),mi===null&&(a===null||ul.current!==null||a.memoizedState!==null)&&(mi=r)}function bp(r){he(Pt,Pt.current),he(Zn,r),mi===null&&(mi=r)}function Jb(r){r.tag===22?(he(Pt,Pt.current),he(Zn,r),mi===null&&(mi=r)):Bs()}function Bs(){he(Pt,Pt.current),he(Zn,Zn.current)}function Jn(r){J(Zn),mi===r&&(mi=null),J(Pt)}var Pt=V(0);function rh(r){for(var a=r;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Sg(l)||Ag(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Br=0,Le=null,dt=null,$t=null,sh=!1,dl=!1,co=!1,ah=0,Hc=0,hl=null,yN=0;function Nt(){throw Error(i(321))}function _p(r,a){if(a===null)return!1;for(var l=0;l<a.length&&l<r.length;l++)if(!Xn(r[l],a[l]))return!1;return!0}function wp(r,a,l,u,p,y){return Br=y,Le=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,G.H=r===null||r.memoizedState===null?P1:Pp,co=!1,y=l(u,p),co=!1,dl&&(y=t1(a,l,u,p)),e1(r),y}function e1(r){G.H=Kc;var a=dt!==null&&dt.next!==null;if(Br=0,$t=dt=Le=null,sh=!1,Hc=0,hl=null,a)throw Error(i(300));r===null||Gt||(r=r.dependencies,r!==null&&Xd(r)&&(Gt=!0))}function t1(r,a,l,u){Le=r;var p=0;do{if(dl&&(hl=null),Hc=0,dl=!1,25<=p)throw Error(i(301));if(p+=1,$t=dt=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}G.H=j1,y=a(l,u)}while(dl);return y}function vN(){var r=G.H,a=r.useState()[0];return a=typeof a.then=="function"?$c(a):a,r=r.useState()[0],(dt!==null?dt.memoizedState:null)!==r&&(Le.flags|=1024),a}function xp(){var r=ah!==0;return ah=0,r}function Tp(r,a,l){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~l}function Ep(r){if(sh){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}sh=!1}Br=0,$t=dt=Le=null,dl=!1,Hc=ah=0,hl=null}function kn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?Le.memoizedState=$t=r:$t=$t.next=r,$t}function jt(){if(dt===null){var r=Le.alternate;r=r!==null?r.memoizedState:null}else r=dt.next;var a=$t===null?Le.memoizedState:$t.next;if(a!==null)$t=a,dt=r;else{if(r===null)throw Le.alternate===null?Error(i(467)):Error(i(310));dt=r,r={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},$t===null?Le.memoizedState=$t=r:$t=$t.next=r}return $t}function oh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $c(r){var a=Hc;return Hc+=1,hl===null&&(hl=[]),r=$b(hl,r,a),a=Le,($t===null?a.memoizedState:$t.next)===null&&(a=a.alternate,G.H=a===null||a.memoizedState===null?P1:Pp),r}function lh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return $c(r);if(r.$$typeof===L)return hn(r)}throw Error(i(438,String(r)))}function Sp(r){var a=null,l=Le.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var u=Le.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=oh(),Le.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(r),u=0;u<r;u++)l[u]=z;return a.index++,l}function qr(r,a){return typeof a=="function"?a(r):a}function ch(r){var a=jt();return Ap(a,dt,r)}function Ap(r,a,l){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var p=r.baseQueue,y=u.pending;if(y!==null){if(p!==null){var x=p.next;p.next=y.next,y.next=x}a.baseQueue=p=y,u.pending=null}if(y=r.baseState,p===null)r.memoizedState=y;else{a=p.next;var C=x=null,F=null,Q=a,ie=!1;do{var oe=Q.lane&-536870913;if(oe!==Q.lane?(He&oe)===oe:(Br&oe)===oe){var X=Q.revertLane;if(X===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),oe===al&&(ie=!0);else if((Br&X)===X){Q=Q.next,X===al&&(ie=!0);continue}else oe={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},F===null?(C=F=oe,x=y):F=F.next=oe,Le.lanes|=X,$s|=X;oe=Q.action,co&&l(y,oe),y=Q.hasEagerState?Q.eagerState:l(y,oe)}else X={lane:oe,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},F===null?(C=F=X,x=y):F=F.next=X,Le.lanes|=oe,$s|=oe;Q=Q.next}while(Q!==null&&Q!==a);if(F===null?x=y:F.next=C,!Xn(y,r.memoizedState)&&(Gt=!0,ie&&(l=ol,l!==null)))throw l;r.memoizedState=y,r.baseState=x,r.baseQueue=F,u.lastRenderedState=y}return p===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Cp(r){var a=jt(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var u=l.dispatch,p=l.pending,y=a.memoizedState;if(p!==null){l.pending=null;var x=p=p.next;do y=r(y,x.action),x=x.next;while(x!==p);Xn(y,a.memoizedState)||(Gt=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),l.lastRenderedState=y}return[y,u]}function n1(r,a,l){var u=Le,p=jt(),y=Qe;if(y){if(l===void 0)throw Error(i(407));l=l()}else l=a();var x=!Xn((dt||p).memoizedState,l);if(x&&(p.memoizedState=l,Gt=!0),p=p.queue,Ip(s1.bind(null,u,p,r),[r]),p.getSnapshot!==a||x||$t!==null&&$t.memoizedState.tag&1){if(u.flags|=2048,fl(9,{destroy:void 0},r1.bind(null,u,p,l,a),null),mt===null)throw Error(i(349));y||(Br&127)!==0||i1(u,a,l)}return l}function i1(r,a,l){r.flags|=16384,r={getSnapshot:a,value:l},a=Le.updateQueue,a===null?(a=oh(),Le.updateQueue=a,a.stores=[r]):(l=a.stores,l===null?a.stores=[r]:l.push(r))}function r1(r,a,l,u){a.value=l,a.getSnapshot=u,a1(a)&&o1(r)}function s1(r,a,l){return l(function(){a1(a)&&o1(r)})}function a1(r){var a=r.getSnapshot;r=r.value;try{var l=a();return!Xn(r,l)}catch{return!0}}function o1(r){var a=eo(r,2);a!==null&&zn(a,r,2)}function Rp(r){var a=kn();if(typeof r=="function"){var l=r;if(r=l(),co){Mn(!0);try{l()}finally{Mn(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qr,lastRenderedState:r},a}function l1(r,a,l,u){return r.baseState=l,Ap(r,dt,typeof u=="function"?u:qr)}function bN(r,a,l,u,p){if(hh(r))throw Error(i(485));if(r=a.action,r!==null){var y={payload:p,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){y.listeners.push(x)}};G.T!==null?l(!0):y.isTransition=!1,u(y),l=a.pending,l===null?(y.next=a.pending=y,c1(a,y)):(y.next=l.next,a.pending=l.next=y)}}function c1(r,a){var l=a.action,u=a.payload,p=r.state;if(a.isTransition){var y=G.T,x={};G.T=x;try{var C=l(p,u),F=G.S;F!==null&&F(x,C),u1(r,a,C)}catch(Q){Np(r,a,Q)}finally{y!==null&&x.types!==null&&(y.types=x.types),G.T=y}}else try{y=l(p,u),u1(r,a,y)}catch(Q){Np(r,a,Q)}}function u1(r,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){d1(r,a,u)},function(u){return Np(r,a,u)}):d1(r,a,l)}function d1(r,a,l){a.status="fulfilled",a.value=l,h1(a),r.state=l,a=r.pending,a!==null&&(l=a.next,l===a?r.pending=null:(l=l.next,a.next=l,c1(r,l)))}function Np(r,a,l){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=l,h1(a),a=a.next;while(a!==u)}r.action=null}function h1(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function f1(r,a){return a}function m1(r,a){if(Qe){var l=mt.formState;if(l!==null){e:{var u=Le;if(Qe){if(yt){t:{for(var p=yt,y=fi;p.nodeType!==8;){if(!y){p=null;break t}if(p=pi(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){yt=pi(p.nextSibling),u=p.data==="F!";break e}}Ps(u)}u=!1}u&&(a=l[0])}}return l=kn(),l.memoizedState=l.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f1,lastRenderedState:a},l.queue=u,l=M1.bind(null,Le,u),u.dispatch=l,u=Rp(!1),y=Vp.bind(null,Le,!1,u.queue),u=kn(),p={state:a,dispatch:null,action:r,pending:null},u.queue=p,l=bN.bind(null,Le,p,y,l),p.dispatch=l,u.memoizedState=r,[a,l,!1]}function p1(r){var a=jt();return g1(a,dt,r)}function g1(r,a,l){if(a=Ap(r,a,f1)[0],r=ch(qr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=$c(a)}catch(x){throw x===ll?Jd:x}else u=a;a=jt();var p=a.queue,y=p.dispatch;return l!==a.memoizedState&&(Le.flags|=2048,fl(9,{destroy:void 0},_N.bind(null,p,l),null)),[u,y,r]}function _N(r,a){r.action=a}function y1(r){var a=jt(),l=dt;if(l!==null)return g1(a,l,r);jt(),a=a.memoizedState,l=jt();var u=l.queue.dispatch;return l.memoizedState=r,[a,u,!1]}function fl(r,a,l,u){return r={tag:r,create:l,deps:u,inst:a,next:null},a=Le.updateQueue,a===null&&(a=oh(),Le.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=r.next=r:(u=l.next,l.next=r,r.next=u,a.lastEffect=r),r}function v1(){return jt().memoizedState}function uh(r,a,l,u){var p=kn();Le.flags|=r,p.memoizedState=fl(1|a,{destroy:void 0},l,u===void 0?null:u)}function dh(r,a,l,u){var p=jt();u=u===void 0?null:u;var y=p.memoizedState.inst;dt!==null&&u!==null&&_p(u,dt.memoizedState.deps)?p.memoizedState=fl(a,y,l,u):(Le.flags|=r,p.memoizedState=fl(1|a,y,l,u))}function b1(r,a){uh(8390656,8,r,a)}function Ip(r,a){dh(2048,8,r,a)}function wN(r){Le.flags|=4;var a=Le.updateQueue;if(a===null)a=oh(),Le.updateQueue=a,a.events=[r];else{var l=a.events;l===null?a.events=[r]:l.push(r)}}function _1(r){var a=jt().memoizedState;return wN({ref:a,nextImpl:r}),function(){if((it&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function w1(r,a){return dh(4,2,r,a)}function x1(r,a){return dh(4,4,r,a)}function T1(r,a){if(typeof a=="function"){r=r();var l=a(r);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function E1(r,a,l){l=l!=null?l.concat([r]):null,dh(4,4,T1.bind(null,a,r),l)}function kp(){}function S1(r,a){var l=jt();a=a===void 0?null:a;var u=l.memoizedState;return a!==null&&_p(a,u[1])?u[0]:(l.memoizedState=[r,a],r)}function A1(r,a){var l=jt();a=a===void 0?null:a;var u=l.memoizedState;if(a!==null&&_p(a,u[1]))return u[0];if(u=r(),co){Mn(!0);try{r()}finally{Mn(!1)}}return l.memoizedState=[u,a],u}function Dp(r,a,l){return l===void 0||(Br&1073741824)!==0&&(He&261930)===0?r.memoizedState=a:(r.memoizedState=l,r=C_(),Le.lanes|=r,$s|=r,l)}function C1(r,a,l,u){return Xn(l,a)?l:ul.current!==null?(r=Dp(r,l,u),Xn(r,a)||(Gt=!0),r):(Br&42)===0||(Br&1073741824)!==0&&(He&261930)===0?(Gt=!0,r.memoizedState=l):(r=C_(),Le.lanes|=r,$s|=r,a)}function R1(r,a,l,u,p){var y=ee.p;ee.p=y!==0&&8>y?y:8;var x=G.T,C={};G.T=C,Vp(r,!1,a,l);try{var F=p(),Q=G.S;if(Q!==null&&Q(C,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var ie=gN(F,u);Gc(r,a,ie,ni(r))}else Gc(r,a,u,ni(r))}catch(oe){Gc(r,a,{then:function(){},status:"rejected",reason:oe},ni())}finally{ee.p=y,x!==null&&C.types!==null&&(x.types=C.types),G.T=x}}function xN(){}function Mp(r,a,l,u){if(r.tag!==5)throw Error(i(476));var p=N1(r).queue;R1(r,p,a,fe,l===null?xN:function(){return I1(r),l(u)})}function N1(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qr,lastRenderedState:fe},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qr,lastRenderedState:l},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function I1(r){var a=N1(r);a.next===null&&(a=r.alternate.memoizedState),Gc(r,a.next.queue,{},ni())}function Op(){return hn(cu)}function k1(){return jt().memoizedState}function D1(){return jt().memoizedState}function TN(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var l=ni();r=Us(l);var u=zs(a,r,l);u!==null&&(zn(u,a,l),Fc(u,a,l)),a={cache:cp()},r.payload=a;return}a=a.return}}function EN(r,a,l){var u=ni();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},hh(r)?O1(a,l):(l=Zm(r,a,l,u),l!==null&&(zn(l,r,u),V1(l,a,u)))}function M1(r,a,l){var u=ni();Gc(r,a,l,u)}function Gc(r,a,l,u){var p={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(hh(r))O1(a,p);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var x=a.lastRenderedState,C=y(x,l);if(p.hasEagerState=!0,p.eagerState=C,Xn(C,x))return Gd(r,a,p,0),mt===null&&$d(),!1}catch{}finally{}if(l=Zm(r,a,p,u),l!==null)return zn(l,r,u),V1(l,a,u),!0}return!1}function Vp(r,a,l,u){if(u={lane:2,revertLane:fg(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},hh(r)){if(a)throw Error(i(479))}else a=Zm(r,l,u,2),a!==null&&zn(a,r,2)}function hh(r){var a=r.alternate;return r===Le||a!==null&&a===Le}function O1(r,a){dl=sh=!0;var l=r.pending;l===null?a.next=a:(a.next=l.next,l.next=a),r.pending=a}function V1(r,a,l){if((l&4194048)!==0){var u=a.lanes;u&=r.pendingLanes,l|=u,a.lanes=l,mc(r,l)}}var Kc={readContext:hn,use:lh,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt};Kc.useEffectEvent=Nt;var P1={readContext:hn,use:lh,useCallback:function(r,a){return kn().memoizedState=[r,a===void 0?null:a],r},useContext:hn,useEffect:b1,useImperativeHandle:function(r,a,l){l=l!=null?l.concat([r]):null,uh(4194308,4,T1.bind(null,a,r),l)},useLayoutEffect:function(r,a){return uh(4194308,4,r,a)},useInsertionEffect:function(r,a){uh(4,2,r,a)},useMemo:function(r,a){var l=kn();a=a===void 0?null:a;var u=r();if(co){Mn(!0);try{r()}finally{Mn(!1)}}return l.memoizedState=[u,a],u},useReducer:function(r,a,l){var u=kn();if(l!==void 0){var p=l(a);if(co){Mn(!0);try{l(a)}finally{Mn(!1)}}}else p=a;return u.memoizedState=u.baseState=p,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:p},u.queue=r,r=r.dispatch=EN.bind(null,Le,r),[u.memoizedState,r]},useRef:function(r){var a=kn();return r={current:r},a.memoizedState=r},useState:function(r){r=Rp(r);var a=r.queue,l=M1.bind(null,Le,a);return a.dispatch=l,[r.memoizedState,l]},useDebugValue:kp,useDeferredValue:function(r,a){var l=kn();return Dp(l,r,a)},useTransition:function(){var r=Rp(!1);return r=R1.bind(null,Le,r.queue,!0,!1),kn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,l){var u=Le,p=kn();if(Qe){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),mt===null)throw Error(i(349));(He&127)!==0||i1(u,a,l)}p.memoizedState=l;var y={value:l,getSnapshot:a};return p.queue=y,b1(s1.bind(null,u,y,r),[r]),u.flags|=2048,fl(9,{destroy:void 0},r1.bind(null,u,y,l,a),null),l},useId:function(){var r=kn(),a=mt.identifierPrefix;if(Qe){var l=ur,u=cr;l=(u&~(1<<32-Rt(u)-1)).toString(32)+l,a="_"+a+"R_"+l,l=ah++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=yN++,a="_"+a+"r_"+l.toString(32)+"_";return r.memoizedState=a},useHostTransitionStatus:Op,useFormState:m1,useActionState:m1,useOptimistic:function(r){var a=kn();a.memoizedState=a.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Vp.bind(null,Le,!0,l),l.dispatch=a,[r,a]},useMemoCache:Sp,useCacheRefresh:function(){return kn().memoizedState=TN.bind(null,Le)},useEffectEvent:function(r){var a=kn(),l={impl:r};return a.memoizedState=l,function(){if((it&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Pp={readContext:hn,use:lh,useCallback:S1,useContext:hn,useEffect:Ip,useImperativeHandle:E1,useInsertionEffect:w1,useLayoutEffect:x1,useMemo:A1,useReducer:ch,useRef:v1,useState:function(){return ch(qr)},useDebugValue:kp,useDeferredValue:function(r,a){var l=jt();return C1(l,dt.memoizedState,r,a)},useTransition:function(){var r=ch(qr)[0],a=jt().memoizedState;return[typeof r=="boolean"?r:$c(r),a]},useSyncExternalStore:n1,useId:k1,useHostTransitionStatus:Op,useFormState:p1,useActionState:p1,useOptimistic:function(r,a){var l=jt();return l1(l,dt,r,a)},useMemoCache:Sp,useCacheRefresh:D1};Pp.useEffectEvent=_1;var j1={readContext:hn,use:lh,useCallback:S1,useContext:hn,useEffect:Ip,useImperativeHandle:E1,useInsertionEffect:w1,useLayoutEffect:x1,useMemo:A1,useReducer:Cp,useRef:v1,useState:function(){return Cp(qr)},useDebugValue:kp,useDeferredValue:function(r,a){var l=jt();return dt===null?Dp(l,r,a):C1(l,dt.memoizedState,r,a)},useTransition:function(){var r=Cp(qr)[0],a=jt().memoizedState;return[typeof r=="boolean"?r:$c(r),a]},useSyncExternalStore:n1,useId:k1,useHostTransitionStatus:Op,useFormState:y1,useActionState:y1,useOptimistic:function(r,a){var l=jt();return dt!==null?l1(l,dt,r,a):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:Sp,useCacheRefresh:D1};j1.useEffectEvent=_1;function jp(r,a,l,u){a=r.memoizedState,l=l(u,a),l=l==null?a:v({},a,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Lp={enqueueSetState:function(r,a,l){r=r._reactInternals;var u=ni(),p=Us(u);p.payload=a,l!=null&&(p.callback=l),a=zs(r,p,u),a!==null&&(zn(a,r,u),Fc(a,r,u))},enqueueReplaceState:function(r,a,l){r=r._reactInternals;var u=ni(),p=Us(u);p.tag=1,p.payload=a,l!=null&&(p.callback=l),a=zs(r,p,u),a!==null&&(zn(a,r,u),Fc(a,r,u))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var l=ni(),u=Us(l);u.tag=2,a!=null&&(u.callback=a),a=zs(r,u,l),a!==null&&(zn(a,r,l),Fc(a,r,l))}};function L1(r,a,l,u,p,y,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,y,x):a.prototype&&a.prototype.isPureReactComponent?!Mc(l,u)||!Mc(p,y):!0}function U1(r,a,l,u){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,u),a.state!==r&&Lp.enqueueReplaceState(a,a.state,null)}function uo(r,a){var l=a;if("ref"in a){l={};for(var u in a)u!=="ref"&&(l[u]=a[u])}if(r=r.defaultProps){l===a&&(l=v({},l));for(var p in r)l[p]===void 0&&(l[p]=r[p])}return l}function z1(r){Hd(r)}function F1(r){console.error(r)}function B1(r){Hd(r)}function fh(r,a){try{var l=r.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function q1(r,a,l){try{var u=r.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Up(r,a,l){return l=Us(l),l.tag=3,l.payload={element:null},l.callback=function(){fh(r,a)},l}function H1(r){return r=Us(r),r.tag=3,r}function $1(r,a,l,u){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var y=u.value;r.payload=function(){return p(y)},r.callback=function(){q1(a,l,u)}}var x=l.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(r.callback=function(){q1(a,l,u),typeof p!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function SN(r,a,l,u,p){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=l.alternate,a!==null&&sl(a,l,p,!0),l=Zn.current,l!==null){switch(l.tag){case 31:case 13:return mi===null?Sh():l.alternate===null&&It===0&&(It=3),l.flags&=-257,l.flags|=65536,l.lanes=p,u===eh?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([u]):a.add(u),ug(r,u,p)),!1;case 22:return l.flags|=65536,u===eh?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([u]):l.add(u)),ug(r,u,p)),!1}throw Error(i(435,l.tag))}return ug(r,u,p),Sh(),!1}if(Qe)return a=Zn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,u!==rp&&(r=Error(i(422),{cause:u}),Pc(ui(r,l)))):(u!==rp&&(a=Error(i(423),{cause:u}),Pc(ui(a,l))),r=r.current.alternate,r.flags|=65536,p&=-p,r.lanes|=p,u=ui(u,l),p=Up(r.stateNode,u,p),pp(r,p),It!==4&&(It=2)),!1;var y=Error(i(520),{cause:u});if(y=ui(y,l),tu===null?tu=[y]:tu.push(y),It!==4&&(It=2),a===null)return!0;u=ui(u,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,r=p&-p,l.lanes|=r,r=Up(l.stateNode,u,r),pp(l,r),!1;case 1:if(a=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Gs===null||!Gs.has(y))))return l.flags|=65536,p&=-p,l.lanes|=p,p=H1(p),$1(p,r,l,u),pp(l,p),!1}l=l.return}while(l!==null);return!1}var zp=Error(i(461)),Gt=!1;function fn(r,a,l,u){a.child=r===null?Qb(a,null,l,u):lo(a,r.child,l,u)}function G1(r,a,l,u,p){l=l.render;var y=a.ref;if("ref"in u){var x={};for(var C in u)C!=="ref"&&(x[C]=u[C])}else x=u;return ro(a),u=wp(r,a,l,x,y,p),C=xp(),r!==null&&!Gt?(Tp(r,a,p),Hr(r,a,p)):(Qe&&C&&np(a),a.flags|=1,fn(r,a,u,p),a.child)}function K1(r,a,l,u,p){if(r===null){var y=l.type;return typeof y=="function"&&!Jm(y)&&y.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=y,Y1(r,a,y,u,p)):(r=Yd(l.type,null,u,a,a.mode,p),r.ref=a.ref,r.return=a,a.child=r)}if(y=r.child,!Yp(r,p)){var x=y.memoizedProps;if(l=l.compare,l=l!==null?l:Mc,l(x,u)&&r.ref===a.ref)return Hr(r,a,p)}return a.flags|=1,r=Lr(y,u),r.ref=a.ref,r.return=a,a.child=r}function Y1(r,a,l,u,p){if(r!==null){var y=r.memoizedProps;if(Mc(y,u)&&r.ref===a.ref)if(Gt=!1,a.pendingProps=u=y,Yp(r,p))(r.flags&131072)!==0&&(Gt=!0);else return a.lanes=r.lanes,Hr(r,a,p)}return Fp(r,a,l,u,p)}function Q1(r,a,l,u){var p=u.children,y=r!==null?r.memoizedState:null;if(r===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|l:l,r!==null){for(u=a.child=r.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~y}else u=0,a.child=null;return X1(r,a,y,l,u)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&Zd(a,y!==null?y.cachePool:null),y!==null?Zb(a,y):yp(),Jb(a);else return u=a.lanes=536870912,X1(r,a,y!==null?y.baseLanes|l:l,l,u)}else y!==null?(Zd(a,y.cachePool),Zb(a,y),Bs(),a.memoizedState=null):(r!==null&&Zd(a,null),yp(),Bs());return fn(r,a,p,l),a.child}function Yc(r,a){return r!==null&&r.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function X1(r,a,l,u,p){var y=dp();return y=y===null?null:{parent:Ht._currentValue,pool:y},a.memoizedState={baseLanes:l,cachePool:y},r!==null&&Zd(a,null),yp(),Jb(a),r!==null&&sl(r,a,u,!0),a.childLanes=p,null}function mh(r,a){return a=gh({mode:a.mode,children:a.children},r.mode),a.ref=r.ref,r.child=a,a.return=r,a}function W1(r,a,l){return lo(a,r.child,null,l),r=mh(a,a.pendingProps),r.flags|=2,Jn(a),a.memoizedState=null,r}function AN(r,a,l){var u=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,r===null){if(Qe){if(u.mode==="hidden")return r=mh(a,u),a.lanes=536870912,Yc(null,r);if(bp(a),(r=yt)?(r=cw(r,fi),r=r!==null&&r.data==="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Os!==null?{id:cr,overflow:ur}:null,retryLane:536870912,hydrationErrors:null},l=Ob(r),l.return=a,a.child=l,dn=a,yt=null)):r=null,r===null)throw Ps(a);return a.lanes=536870912,null}return mh(a,u)}var y=r.memoizedState;if(y!==null){var x=y.dehydrated;if(bp(a),p)if(a.flags&256)a.flags&=-257,a=W1(r,a,l);else if(a.memoizedState!==null)a.child=r.child,a.flags|=128,a=null;else throw Error(i(558));else if(Gt||sl(r,a,l,!1),p=(l&r.childLanes)!==0,Gt||p){if(u=mt,u!==null&&(x=pc(u,l),x!==0&&x!==y.retryLane))throw y.retryLane=x,eo(r,x),zn(u,r,x),zp;Sh(),a=W1(r,a,l)}else r=y.treeContext,yt=pi(x.nextSibling),dn=a,Qe=!0,Vs=null,fi=!1,r!==null&&jb(a,r),a=mh(a,u),a.flags|=4096;return a}return r=Lr(r.child,{mode:u.mode,children:u.children}),r.ref=a.ref,a.child=r,r.return=a,r}function ph(r,a){var l=a.ref;if(l===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(a.flags|=4194816)}}function Fp(r,a,l,u,p){return ro(a),l=wp(r,a,l,u,void 0,p),u=xp(),r!==null&&!Gt?(Tp(r,a,p),Hr(r,a,p)):(Qe&&u&&np(a),a.flags|=1,fn(r,a,l,p),a.child)}function Z1(r,a,l,u,p,y){return ro(a),a.updateQueue=null,l=t1(a,u,l,p),e1(r),u=xp(),r!==null&&!Gt?(Tp(r,a,y),Hr(r,a,y)):(Qe&&u&&np(a),a.flags|=1,fn(r,a,l,y),a.child)}function J1(r,a,l,u,p){if(ro(a),a.stateNode===null){var y=tl,x=l.contextType;typeof x=="object"&&x!==null&&(y=hn(x)),y=new l(u,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Lp,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=u,y.state=a.memoizedState,y.refs={},fp(a),x=l.contextType,y.context=typeof x=="object"&&x!==null?hn(x):tl,y.state=a.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(jp(a,l,x,u),y.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(x=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),x!==y.state&&Lp.enqueueReplaceState(y,y.state,null),qc(a,u,y,p),Bc(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(r===null){y=a.stateNode;var C=a.memoizedProps,F=uo(l,C);y.props=F;var Q=y.context,ie=l.contextType;x=tl,typeof ie=="object"&&ie!==null&&(x=hn(ie));var oe=l.getDerivedStateFromProps;ie=typeof oe=="function"||typeof y.getSnapshotBeforeUpdate=="function",C=a.pendingProps!==C,ie||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C||Q!==x)&&U1(a,y,u,x),Ls=!1;var X=a.memoizedState;y.state=X,qc(a,u,y,p),Bc(),Q=a.memoizedState,C||X!==Q||Ls?(typeof oe=="function"&&(jp(a,l,oe,u),Q=a.memoizedState),(F=Ls||L1(a,l,F,u,X,Q,x))?(ie||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=Q),y.props=u,y.state=Q,y.context=x,u=F):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{y=a.stateNode,mp(r,a),x=a.memoizedProps,ie=uo(l,x),y.props=ie,oe=a.pendingProps,X=y.context,Q=l.contextType,F=tl,typeof Q=="object"&&Q!==null&&(F=hn(Q)),C=l.getDerivedStateFromProps,(Q=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x!==oe||X!==F)&&U1(a,y,u,F),Ls=!1,X=a.memoizedState,y.state=X,qc(a,u,y,p),Bc();var Z=a.memoizedState;x!==oe||X!==Z||Ls||r!==null&&r.dependencies!==null&&Xd(r.dependencies)?(typeof C=="function"&&(jp(a,l,C,u),Z=a.memoizedState),(ie=Ls||L1(a,l,ie,u,X,Z,F)||r!==null&&r.dependencies!==null&&Xd(r.dependencies))?(Q||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,Z,F),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,Z,F)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||x===r.memoizedProps&&X===r.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&X===r.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=Z),y.props=u,y.state=Z,y.context=F,u=ie):(typeof y.componentDidUpdate!="function"||x===r.memoizedProps&&X===r.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&X===r.memoizedState||(a.flags|=1024),u=!1)}return y=u,ph(r,a),u=(a.flags&128)!==0,y||u?(y=a.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,r!==null&&u?(a.child=lo(a,r.child,null,p),a.child=lo(a,null,l,p)):fn(r,a,l,p),a.memoizedState=y.state,r=a.child):r=Hr(r,a,p),r}function e_(r,a,l,u){return no(),a.flags|=256,fn(r,a,l,u),a.child}var Bp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qp(r){return{baseLanes:r,cachePool:qb()}}function Hp(r,a,l){return r=r!==null?r.childLanes&~l:0,a&&(r|=ti),r}function t_(r,a,l){var u=a.pendingProps,p=!1,y=(a.flags&128)!==0,x;if((x=y)||(x=r!==null&&r.memoizedState===null?!1:(Pt.current&2)!==0),x&&(p=!0,a.flags&=-129),x=(a.flags&32)!==0,a.flags&=-33,r===null){if(Qe){if(p?Fs(a):Bs(),(r=yt)?(r=cw(r,fi),r=r!==null&&r.data!=="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Os!==null?{id:cr,overflow:ur}:null,retryLane:536870912,hydrationErrors:null},l=Ob(r),l.return=a,a.child=l,dn=a,yt=null)):r=null,r===null)throw Ps(a);return Ag(r)?a.lanes=32:a.lanes=536870912,null}var C=u.children;return u=u.fallback,p?(Bs(),p=a.mode,C=gh({mode:"hidden",children:C},p),u=to(u,p,l,null),C.return=a,u.return=a,C.sibling=u,a.child=C,u=a.child,u.memoizedState=qp(l),u.childLanes=Hp(r,x,l),a.memoizedState=Bp,Yc(null,u)):(Fs(a),$p(a,C))}var F=r.memoizedState;if(F!==null&&(C=F.dehydrated,C!==null)){if(y)a.flags&256?(Fs(a),a.flags&=-257,a=Gp(r,a,l)):a.memoizedState!==null?(Bs(),a.child=r.child,a.flags|=128,a=null):(Bs(),C=u.fallback,p=a.mode,u=gh({mode:"visible",children:u.children},p),C=to(C,p,l,null),C.flags|=2,u.return=a,C.return=a,u.sibling=C,a.child=u,lo(a,r.child,null,l),u=a.child,u.memoizedState=qp(l),u.childLanes=Hp(r,x,l),a.memoizedState=Bp,a=Yc(null,u));else if(Fs(a),Ag(C)){if(x=C.nextSibling&&C.nextSibling.dataset,x)var Q=x.dgst;x=Q,u=Error(i(419)),u.stack="",u.digest=x,Pc({value:u,source:null,stack:null}),a=Gp(r,a,l)}else if(Gt||sl(r,a,l,!1),x=(l&r.childLanes)!==0,Gt||x){if(x=mt,x!==null&&(u=pc(x,l),u!==0&&u!==F.retryLane))throw F.retryLane=u,eo(r,u),zn(x,r,u),zp;Sg(C)||Sh(),a=Gp(r,a,l)}else Sg(C)?(a.flags|=192,a.child=r.child,a=null):(r=F.treeContext,yt=pi(C.nextSibling),dn=a,Qe=!0,Vs=null,fi=!1,r!==null&&jb(a,r),a=$p(a,u.children),a.flags|=4096);return a}return p?(Bs(),C=u.fallback,p=a.mode,F=r.child,Q=F.sibling,u=Lr(F,{mode:"hidden",children:u.children}),u.subtreeFlags=F.subtreeFlags&65011712,Q!==null?C=Lr(Q,C):(C=to(C,p,l,null),C.flags|=2),C.return=a,u.return=a,u.sibling=C,a.child=u,Yc(null,u),u=a.child,C=r.child.memoizedState,C===null?C=qp(l):(p=C.cachePool,p!==null?(F=Ht._currentValue,p=p.parent!==F?{parent:F,pool:F}:p):p=qb(),C={baseLanes:C.baseLanes|l,cachePool:p}),u.memoizedState=C,u.childLanes=Hp(r,x,l),a.memoizedState=Bp,Yc(r.child,u)):(Fs(a),l=r.child,r=l.sibling,l=Lr(l,{mode:"visible",children:u.children}),l.return=a,l.sibling=null,r!==null&&(x=a.deletions,x===null?(a.deletions=[r],a.flags|=16):x.push(r)),a.child=l,a.memoizedState=null,l)}function $p(r,a){return a=gh({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function gh(r,a){return r=Wn(22,r,null,a),r.lanes=0,r}function Gp(r,a,l){return lo(a,r.child,null,l),r=$p(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function n_(r,a,l){r.lanes|=a;var u=r.alternate;u!==null&&(u.lanes|=a),op(r.return,a,l)}function Kp(r,a,l,u,p,y){var x=r.memoizedState;x===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:p,treeForkCount:y}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=u,x.tail=l,x.tailMode=p,x.treeForkCount=y)}function i_(r,a,l){var u=a.pendingProps,p=u.revealOrder,y=u.tail;u=u.children;var x=Pt.current,C=(x&2)!==0;if(C?(x=x&1|2,a.flags|=128):x&=1,he(Pt,x),fn(r,a,u,l),u=Qe?Vc:0,!C&&r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&n_(r,l,a);else if(r.tag===19)n_(r,l,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(p){case"forwards":for(l=a.child,p=null;l!==null;)r=l.alternate,r!==null&&rh(r)===null&&(p=l),l=l.sibling;l=p,l===null?(p=a.child,a.child=null):(p=l.sibling,l.sibling=null),Kp(a,!1,p,l,y,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=a.child,a.child=null;p!==null;){if(r=p.alternate,r!==null&&rh(r)===null){a.child=p;break}r=p.sibling,p.sibling=l,l=p,p=r}Kp(a,!0,l,null,y,u);break;case"together":Kp(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function Hr(r,a,l){if(r!==null&&(a.dependencies=r.dependencies),$s|=a.lanes,(l&a.childLanes)===0)if(r!==null){if(sl(r,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,l=Lr(r,r.pendingProps),a.child=l,l.return=a;r.sibling!==null;)r=r.sibling,l=l.sibling=Lr(r,r.pendingProps),l.return=a;l.sibling=null}return a.child}function Yp(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&Xd(r)))}function CN(r,a,l){switch(a.tag){case 3:ct(a,a.stateNode.containerInfo),js(a,Ht,r.memoizedState.cache),no();break;case 27:case 5:nn(a);break;case 4:ct(a,a.stateNode.containerInfo);break;case 10:js(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,bp(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(Fs(a),a.flags|=128,null):(l&a.child.childLanes)!==0?t_(r,a,l):(Fs(a),r=Hr(r,a,l),r!==null?r.sibling:null);Fs(a);break;case 19:var p=(r.flags&128)!==0;if(u=(l&a.childLanes)!==0,u||(sl(r,a,l,!1),u=(l&a.childLanes)!==0),p){if(u)return i_(r,a,l);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),he(Pt,Pt.current),u)break;return null;case 22:return a.lanes=0,Q1(r,a,l,a.pendingProps);case 24:js(a,Ht,r.memoizedState.cache)}return Hr(r,a,l)}function r_(r,a,l){if(r!==null)if(r.memoizedProps!==a.pendingProps)Gt=!0;else{if(!Yp(r,l)&&(a.flags&128)===0)return Gt=!1,CN(r,a,l);Gt=(r.flags&131072)!==0}else Gt=!1,Qe&&(a.flags&1048576)!==0&&Pb(a,Vc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var u=a.pendingProps;if(r=ao(a.elementType),a.type=r,typeof r=="function")Jm(r)?(u=uo(r,u),a.tag=1,a=J1(null,a,r,u,l)):(a.tag=0,a=Fp(null,a,r,u,l));else{if(r!=null){var p=r.$$typeof;if(p===$){a.tag=11,a=G1(null,a,r,u,l);break e}else if(p===S){a.tag=14,a=K1(null,a,r,u,l);break e}}throw a=Oe(r)||r,Error(i(306,a,""))}}return a;case 0:return Fp(r,a,a.type,a.pendingProps,l);case 1:return u=a.type,p=uo(u,a.pendingProps),J1(r,a,u,p,l);case 3:e:{if(ct(a,a.stateNode.containerInfo),r===null)throw Error(i(387));u=a.pendingProps;var y=a.memoizedState;p=y.element,mp(r,a),qc(a,u,null,l);var x=a.memoizedState;if(u=x.cache,js(a,Ht,u),u!==y.cache&&lp(a,[Ht],l,!0),Bc(),u=x.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:x.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=e_(r,a,u,l);break e}else if(u!==p){p=ui(Error(i(424)),a),Pc(p),a=e_(r,a,u,l);break e}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(yt=pi(r.firstChild),dn=a,Qe=!0,Vs=null,fi=!0,l=Qb(a,null,u,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(no(),u===p){a=Hr(r,a,l);break e}fn(r,a,u,l)}a=a.child}return a;case 26:return ph(r,a),r===null?(l=pw(a.type,null,a.pendingProps,null))?a.memoizedState=l:Qe||(l=a.type,r=a.pendingProps,u=Dh(xe.current).createElement(l),u[Ft]=a,u[rn]=r,mn(u,l,r),Bt(u),a.stateNode=u):a.memoizedState=pw(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return nn(a),r===null&&Qe&&(u=a.stateNode=hw(a.type,a.pendingProps,xe.current),dn=a,fi=!0,p=yt,Xs(a.type)?(Cg=p,yt=pi(u.firstChild)):yt=p),fn(r,a,a.pendingProps.children,l),ph(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&Qe&&((p=u=yt)&&(u=iI(u,a.type,a.pendingProps,fi),u!==null?(a.stateNode=u,dn=a,yt=pi(u.firstChild),fi=!1,p=!0):p=!1),p||Ps(a)),nn(a),p=a.type,y=a.pendingProps,x=r!==null?r.memoizedProps:null,u=y.children,xg(p,y)?u=null:x!==null&&xg(p,x)&&(a.flags|=32),a.memoizedState!==null&&(p=wp(r,a,vN,null,null,l),cu._currentValue=p),ph(r,a),fn(r,a,u,l),a.child;case 6:return r===null&&Qe&&((r=l=yt)&&(l=rI(l,a.pendingProps,fi),l!==null?(a.stateNode=l,dn=a,yt=null,r=!0):r=!1),r||Ps(a)),null;case 13:return t_(r,a,l);case 4:return ct(a,a.stateNode.containerInfo),u=a.pendingProps,r===null?a.child=lo(a,null,u,l):fn(r,a,u,l),a.child;case 11:return G1(r,a,a.type,a.pendingProps,l);case 7:return fn(r,a,a.pendingProps,l),a.child;case 8:return fn(r,a,a.pendingProps.children,l),a.child;case 12:return fn(r,a,a.pendingProps.children,l),a.child;case 10:return u=a.pendingProps,js(a,a.type,u.value),fn(r,a,u.children,l),a.child;case 9:return p=a.type._context,u=a.pendingProps.children,ro(a),p=hn(p),u=u(p),a.flags|=1,fn(r,a,u,l),a.child;case 14:return K1(r,a,a.type,a.pendingProps,l);case 15:return Y1(r,a,a.type,a.pendingProps,l);case 19:return i_(r,a,l);case 31:return AN(r,a,l);case 22:return Q1(r,a,l,a.pendingProps);case 24:return ro(a),u=hn(Ht),r===null?(p=dp(),p===null&&(p=mt,y=cp(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=l),p=y),a.memoizedState={parent:u,cache:p},fp(a),js(a,Ht,p)):((r.lanes&l)!==0&&(mp(r,a),qc(a,null,null,l),Bc()),p=r.memoizedState,y=a.memoizedState,p.parent!==u?(p={parent:u,cache:u},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),js(a,Ht,u)):(u=y.cache,js(a,Ht,u),u!==p.cache&&lp(a,[Ht],l,!0))),fn(r,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function $r(r){r.flags|=4}function Qp(r,a,l,u,p){if((a=(r.mode&32)!==0)&&(a=!1),a){if(r.flags|=16777216,(p&335544128)===p)if(r.stateNode.complete)r.flags|=8192;else if(k_())r.flags|=8192;else throw oo=eh,hp}else r.flags&=-16777217}function s_(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!_w(a))if(k_())r.flags|=8192;else throw oo=eh,hp}function yh(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?Td():536870912,r.lanes|=a,yl|=a)}function Qc(r,a){if(!Qe)switch(r.tailMode){case"hidden":a=r.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function vt(r){var a=r.alternate!==null&&r.alternate.child===r.child,l=0,u=0;if(a)for(var p=r.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=u,r.childLanes=l,a}function RN(r,a,l){var u=a.pendingProps;switch(ip(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(a),null;case 1:return vt(a),null;case 3:return l=a.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Fr(Ht),Fe(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(rl(a)?$r(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,sp())),vt(a),null;case 26:var p=a.type,y=a.memoizedState;return r===null?($r(a),y!==null?(vt(a),s_(a,y)):(vt(a),Qp(a,p,null,u,l))):y?y!==r.memoizedState?($r(a),vt(a),s_(a,y)):(vt(a),a.flags&=-16777217):(r=r.memoizedProps,r!==u&&$r(a),vt(a),Qp(a,p,r,u,l)),null;case 27:if(wn(a),l=xe.current,p=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==u&&$r(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return vt(a),null}r=me.current,rl(a)?Lb(a):(r=hw(p,u,l),a.stateNode=r,$r(a))}return vt(a),null;case 5:if(wn(a),p=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==u&&$r(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return vt(a),null}if(y=me.current,rl(a))Lb(a);else{var x=Dh(xe.current);switch(y){case 1:y=x.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=x.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=x.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=x.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=x.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?x.createElement("select",{is:u.is}):x.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?x.createElement(p,{is:u.is}):x.createElement(p)}}y[Ft]=a,y[rn]=u;e:for(x=a.child;x!==null;){if(x.tag===5||x.tag===6)y.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===a)break e;for(;x.sibling===null;){if(x.return===null||x.return===a)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}a.stateNode=y;e:switch(mn(y,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&$r(a)}}return vt(a),Qp(a,a.type,r===null?null:r.memoizedProps,a.pendingProps,l),null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==u&&$r(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(i(166));if(r=xe.current,rl(a)){if(r=a.stateNode,l=a.memoizedProps,u=null,p=dn,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}r[Ft]=a,r=!!(r.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||tw(r.nodeValue,l)),r||Ps(a,!0)}else r=Dh(r).createTextNode(u),r[Ft]=a,a.stateNode=r}return vt(a),null;case 31:if(l=a.memoizedState,r===null||r.memoizedState!==null){if(u=rl(a),l!==null){if(r===null){if(!u)throw Error(i(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Ft]=a}else no(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;vt(a),r=!1}else l=sp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=l),r=!0;if(!r)return a.flags&256?(Jn(a),a):(Jn(a),null);if((a.flags&128)!==0)throw Error(i(558))}return vt(a),null;case 13:if(u=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(p=rl(a),u!==null&&u.dehydrated!==null){if(r===null){if(!p)throw Error(i(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[Ft]=a}else no(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;vt(a),p=!1}else p=sp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(Jn(a),a):(Jn(a),null)}return Jn(a),(a.flags&128)!==0?(a.lanes=l,a):(l=u!==null,r=r!==null&&r.memoizedState!==null,l&&(u=a.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048)),l!==r&&l&&(a.child.flags|=8192),yh(a,a.updateQueue),vt(a),null);case 4:return Fe(),r===null&&yg(a.stateNode.containerInfo),vt(a),null;case 10:return Fr(a.type),vt(a),null;case 19:if(J(Pt),u=a.memoizedState,u===null)return vt(a),null;if(p=(a.flags&128)!==0,y=u.rendering,y===null)if(p)Qc(u,!1);else{if(It!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(y=rh(r),y!==null){for(a.flags|=128,Qc(u,!1),r=y.updateQueue,a.updateQueue=r,yh(a,r),a.subtreeFlags=0,r=l,l=a.child;l!==null;)Mb(l,r),l=l.sibling;return he(Pt,Pt.current&1|2),Qe&&Ur(a,u.treeForkCount),a.child}r=r.sibling}u.tail!==null&&ln()>xh&&(a.flags|=128,p=!0,Qc(u,!1),a.lanes=4194304)}else{if(!p)if(r=rh(y),r!==null){if(a.flags|=128,p=!0,r=r.updateQueue,a.updateQueue=r,yh(a,r),Qc(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!Qe)return vt(a),null}else 2*ln()-u.renderingStartTime>xh&&l!==536870912&&(a.flags|=128,p=!0,Qc(u,!1),a.lanes=4194304);u.isBackwards?(y.sibling=a.child,a.child=y):(r=u.last,r!==null?r.sibling=y:a.child=y,u.last=y)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=ln(),r.sibling=null,l=Pt.current,he(Pt,p?l&1|2:l&1),Qe&&Ur(a,u.treeForkCount),r):(vt(a),null);case 22:case 23:return Jn(a),vp(),u=a.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(l&536870912)!==0&&(a.flags&128)===0&&(vt(a),a.subtreeFlags&6&&(a.flags|=8192)):vt(a),l=a.updateQueue,l!==null&&yh(a,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==l&&(a.flags|=2048),r!==null&&J(so),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Fr(Ht),vt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function NN(r,a){switch(ip(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Fr(Ht),Fe(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return wn(a),null;case 31:if(a.memoizedState!==null){if(Jn(a),a.alternate===null)throw Error(i(340));no()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 13:if(Jn(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));no()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return J(Pt),null;case 4:return Fe(),null;case 10:return Fr(a.type),null;case 22:case 23:return Jn(a),vp(),r!==null&&J(so),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return Fr(Ht),null;case 25:return null;default:return null}}function a_(r,a){switch(ip(a),a.tag){case 3:Fr(Ht),Fe();break;case 26:case 27:case 5:wn(a);break;case 4:Fe();break;case 31:a.memoizedState!==null&&Jn(a);break;case 13:Jn(a);break;case 19:J(Pt);break;case 10:Fr(a.type);break;case 22:case 23:Jn(a),vp(),r!==null&&J(so);break;case 24:Fr(Ht)}}function Xc(r,a){try{var l=a.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var p=u.next;l=p;do{if((l.tag&r)===r){u=void 0;var y=l.create,x=l.inst;u=y(),x.destroy=u}l=l.next}while(l!==p)}}catch(C){ot(a,a.return,C)}}function qs(r,a,l){try{var u=a.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var y=p.next;u=y;do{if((u.tag&r)===r){var x=u.inst,C=x.destroy;if(C!==void 0){x.destroy=void 0,p=a;var F=l,Q=C;try{Q()}catch(ie){ot(p,F,ie)}}}u=u.next}while(u!==y)}}catch(ie){ot(a,a.return,ie)}}function o_(r){var a=r.updateQueue;if(a!==null){var l=r.stateNode;try{Wb(a,l)}catch(u){ot(r,r.return,u)}}}function l_(r,a,l){l.props=uo(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(u){ot(r,a,u)}}function Wc(r,a){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof l=="function"?r.refCleanup=l(u):l.current=u}}catch(p){ot(r,a,p)}}function dr(r,a){var l=r.ref,u=r.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(p){ot(r,a,p)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){ot(r,a,p)}else l.current=null}function c_(r){var a=r.type,l=r.memoizedProps,u=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(p){ot(r,r.return,p)}}function Xp(r,a,l){try{var u=r.stateNode;WN(u,r.type,l,a),u[rn]=a}catch(p){ot(r,r.return,p)}}function u_(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Xs(r.type)||r.tag===4}function Wp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||u_(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Xs(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Zp(r,a,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(r),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Ni));else if(u!==4&&(u===27&&Xs(r.type)&&(l=r.stateNode,a=null),r=r.child,r!==null))for(Zp(r,a,l),r=r.sibling;r!==null;)Zp(r,a,l),r=r.sibling}function vh(r,a,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,a?l.insertBefore(r,a):l.appendChild(r);else if(u!==4&&(u===27&&Xs(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(vh(r,a,l),r=r.sibling;r!==null;)vh(r,a,l),r=r.sibling}function d_(r){var a=r.stateNode,l=r.memoizedProps;try{for(var u=r.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);mn(a,u,l),a[Ft]=r,a[rn]=l}catch(y){ot(r,r.return,y)}}var Gr=!1,Kt=!1,Jp=!1,h_=typeof WeakSet=="function"?WeakSet:Set,an=null;function IN(r,a){if(r=r.containerInfo,_g=Uh,r=Eb(r),Gm(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var p=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var x=0,C=-1,F=-1,Q=0,ie=0,oe=r,X=null;t:for(;;){for(var Z;oe!==l||p!==0&&oe.nodeType!==3||(C=x+p),oe!==y||u!==0&&oe.nodeType!==3||(F=x+u),oe.nodeType===3&&(x+=oe.nodeValue.length),(Z=oe.firstChild)!==null;)X=oe,oe=Z;for(;;){if(oe===r)break t;if(X===l&&++Q===p&&(C=x),X===y&&++ie===u&&(F=x),(Z=oe.nextSibling)!==null)break;oe=X,X=oe.parentNode}oe=Z}l=C===-1||F===-1?null:{start:C,end:F}}else l=null}l=l||{start:0,end:0}}else l=null;for(wg={focusedElem:r,selectionRange:l},Uh=!1,an=a;an!==null;)if(a=an,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,an=r;else for(;an!==null;){switch(a=an,y=a.alternate,r=a.flags,a.tag){case 0:if((r&4)!==0&&(r=a.updateQueue,r=r!==null?r.events:null,r!==null))for(l=0;l<r.length;l++)p=r[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,l=a,p=y.memoizedProps,y=y.memoizedState,u=l.stateNode;try{var be=uo(l.type,p);r=u.getSnapshotBeforeUpdate(be,y),u.__reactInternalSnapshotBeforeUpdate=r}catch(Ce){ot(l,l.return,Ce)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,l=r.nodeType,l===9)Eg(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Eg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,an=r;break}an=a.return}}function f_(r,a,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Yr(r,l),u&4&&Xc(5,l);break;case 1:if(Yr(r,l),u&4)if(r=l.stateNode,a===null)try{r.componentDidMount()}catch(x){ot(l,l.return,x)}else{var p=uo(l.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(p,a,r.__reactInternalSnapshotBeforeUpdate)}catch(x){ot(l,l.return,x)}}u&64&&o_(l),u&512&&Wc(l,l.return);break;case 3:if(Yr(r,l),u&64&&(r=l.updateQueue,r!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{Wb(r,a)}catch(x){ot(l,l.return,x)}}break;case 27:a===null&&u&4&&d_(l);case 26:case 5:Yr(r,l),a===null&&u&4&&c_(l),u&512&&Wc(l,l.return);break;case 12:Yr(r,l);break;case 31:Yr(r,l),u&4&&g_(r,l);break;case 13:Yr(r,l),u&4&&y_(r,l),u&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=UN.bind(null,l),sI(r,l))));break;case 22:if(u=l.memoizedState!==null||Gr,!u){a=a!==null&&a.memoizedState!==null||Kt,p=Gr;var y=Kt;Gr=u,(Kt=a)&&!y?Qr(r,l,(l.subtreeFlags&8772)!==0):Yr(r,l),Gr=p,Kt=y}break;case 30:break;default:Yr(r,l)}}function m_(r){var a=r.alternate;a!==null&&(r.alternate=null,m_(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&Fo(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var wt=null,Pn=!1;function Kr(r,a,l){for(l=l.child;l!==null;)p_(r,a,l),l=l.sibling}function p_(r,a,l){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(Zt,l)}catch{}switch(l.tag){case 26:Kt||dr(l,a),Kr(r,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Kt||dr(l,a);var u=wt,p=Pn;Xs(l.type)&&(wt=l.stateNode,Pn=!1),Kr(r,a,l),au(l.stateNode),wt=u,Pn=p;break;case 5:Kt||dr(l,a);case 6:if(u=wt,p=Pn,wt=null,Kr(r,a,l),wt=u,Pn=p,wt!==null)if(Pn)try{(wt.nodeType===9?wt.body:wt.nodeName==="HTML"?wt.ownerDocument.body:wt).removeChild(l.stateNode)}catch(y){ot(l,a,y)}else try{wt.removeChild(l.stateNode)}catch(y){ot(l,a,y)}break;case 18:wt!==null&&(Pn?(r=wt,ow(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),Sl(r)):ow(wt,l.stateNode));break;case 4:u=wt,p=Pn,wt=l.stateNode.containerInfo,Pn=!0,Kr(r,a,l),wt=u,Pn=p;break;case 0:case 11:case 14:case 15:qs(2,l,a),Kt||qs(4,l,a),Kr(r,a,l);break;case 1:Kt||(dr(l,a),u=l.stateNode,typeof u.componentWillUnmount=="function"&&l_(l,a,u)),Kr(r,a,l);break;case 21:Kr(r,a,l);break;case 22:Kt=(u=Kt)||l.memoizedState!==null,Kr(r,a,l),Kt=u;break;default:Kr(r,a,l)}}function g_(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Sl(r)}catch(l){ot(a,a.return,l)}}}function y_(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Sl(r)}catch(l){ot(a,a.return,l)}}function kN(r){switch(r.tag){case 31:case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new h_),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new h_),a;default:throw Error(i(435,r.tag))}}function bh(r,a){var l=kN(r);a.forEach(function(u){if(!l.has(u)){l.add(u);var p=zN.bind(null,r,u);u.then(p,p)}})}function jn(r,a){var l=a.deletions;if(l!==null)for(var u=0;u<l.length;u++){var p=l[u],y=r,x=a,C=x;e:for(;C!==null;){switch(C.tag){case 27:if(Xs(C.type)){wt=C.stateNode,Pn=!1;break e}break;case 5:wt=C.stateNode,Pn=!1;break e;case 3:case 4:wt=C.stateNode.containerInfo,Pn=!0;break e}C=C.return}if(wt===null)throw Error(i(160));p_(y,x,p),wt=null,Pn=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)v_(a,r),a=a.sibling}var Vi=null;function v_(r,a){var l=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:jn(a,r),Ln(r),u&4&&(qs(3,r,r.return),Xc(3,r),qs(5,r,r.return));break;case 1:jn(a,r),Ln(r),u&512&&(Kt||l===null||dr(l,l.return)),u&64&&Gr&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var p=Vi;if(jn(a,r),Ln(r),u&512&&(Kt||l===null||dr(l,l.return)),u&4){var y=l!==null?l.memoizedState:null;if(u=r.memoizedState,l===null)if(u===null)if(r.stateNode===null){e:{u=r.type,l=r.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Wi]||y[Ft]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(u),p.head.insertBefore(y,p.querySelector("head > title"))),mn(y,u,l),y[Ft]=r,Bt(y),u=y;break e;case"link":var x=vw("link","href",p).get(u+(l.href||""));if(x){for(var C=0;C<x.length;C++)if(y=x[C],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){x.splice(C,1);break t}}y=p.createElement(u),mn(y,u,l),p.head.appendChild(y);break;case"meta":if(x=vw("meta","content",p).get(u+(l.content||""))){for(C=0;C<x.length;C++)if(y=x[C],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){x.splice(C,1);break t}}y=p.createElement(u),mn(y,u,l),p.head.appendChild(y);break;default:throw Error(i(468,u))}y[Ft]=r,Bt(y),u=y}r.stateNode=u}else bw(p,r.type,r.stateNode);else r.stateNode=yw(p,u,r.memoizedProps);else y!==u?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,u===null?bw(p,r.type,r.stateNode):yw(p,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Xp(r,r.memoizedProps,l.memoizedProps)}break;case 27:jn(a,r),Ln(r),u&512&&(Kt||l===null||dr(l,l.return)),l!==null&&u&4&&Xp(r,r.memoizedProps,l.memoizedProps);break;case 5:if(jn(a,r),Ln(r),u&512&&(Kt||l===null||dr(l,l.return)),r.flags&32){p=r.stateNode;try{Vn(p,"")}catch(be){ot(r,r.return,be)}}u&4&&r.stateNode!=null&&(p=r.memoizedProps,Xp(r,p,l!==null?l.memoizedProps:p)),u&1024&&(Jp=!0);break;case 6:if(jn(a,r),Ln(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,l=r.stateNode;try{l.nodeValue=u}catch(be){ot(r,r.return,be)}}break;case 3:if(Vh=null,p=Vi,Vi=Mh(a.containerInfo),jn(a,r),Vi=p,Ln(r),u&4&&l!==null&&l.memoizedState.isDehydrated)try{Sl(a.containerInfo)}catch(be){ot(r,r.return,be)}Jp&&(Jp=!1,b_(r));break;case 4:u=Vi,Vi=Mh(r.stateNode.containerInfo),jn(a,r),Ln(r),Vi=u;break;case 12:jn(a,r),Ln(r);break;case 31:jn(a,r),Ln(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,bh(r,u)));break;case 13:jn(a,r),Ln(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(wh=ln()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,bh(r,u)));break;case 22:p=r.memoizedState!==null;var F=l!==null&&l.memoizedState!==null,Q=Gr,ie=Kt;if(Gr=Q||p,Kt=ie||F,jn(a,r),Kt=ie,Gr=Q,Ln(r),u&8192)e:for(a=r.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(l===null||F||Gr||Kt||ho(r)),l=null,a=r;;){if(a.tag===5||a.tag===26){if(l===null){F=l=a;try{if(y=F.stateNode,p)x=y.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{C=F.stateNode;var oe=F.memoizedProps.style,X=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;C.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(be){ot(F,F.return,be)}}}else if(a.tag===6){if(l===null){F=a;try{F.stateNode.nodeValue=p?"":F.memoizedProps}catch(be){ot(F,F.return,be)}}}else if(a.tag===18){if(l===null){F=a;try{var Z=F.stateNode;p?lw(Z,!0):lw(F.stateNode,!1)}catch(be){ot(F,F.return,be)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=r.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,bh(r,l))));break;case 19:jn(a,r),Ln(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,bh(r,u)));break;case 30:break;case 21:break;default:jn(a,r),Ln(r)}}function Ln(r){var a=r.flags;if(a&2){try{for(var l,u=r.return;u!==null;){if(u_(u)){l=u;break}u=u.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var p=l.stateNode,y=Wp(r);vh(r,y,p);break;case 5:var x=l.stateNode;l.flags&32&&(Vn(x,""),l.flags&=-33);var C=Wp(r);vh(r,C,x);break;case 3:case 4:var F=l.stateNode.containerInfo,Q=Wp(r);Zp(r,Q,F);break;default:throw Error(i(161))}}catch(ie){ot(r,r.return,ie)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function b_(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;b_(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function Yr(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)f_(r,a.alternate,a),a=a.sibling}function ho(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:qs(4,a,a.return),ho(a);break;case 1:dr(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&l_(a,a.return,l),ho(a);break;case 27:au(a.stateNode);case 26:case 5:dr(a,a.return),ho(a);break;case 22:a.memoizedState===null&&ho(a);break;case 30:ho(a);break;default:ho(a)}r=r.sibling}}function Qr(r,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,p=r,y=a,x=y.flags;switch(y.tag){case 0:case 11:case 15:Qr(p,y,l),Xc(4,y);break;case 1:if(Qr(p,y,l),u=y,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(Q){ot(u,u.return,Q)}if(u=y,p=u.updateQueue,p!==null){var C=u.stateNode;try{var F=p.shared.hiddenCallbacks;if(F!==null)for(p.shared.hiddenCallbacks=null,p=0;p<F.length;p++)Xb(F[p],C)}catch(Q){ot(u,u.return,Q)}}l&&x&64&&o_(y),Wc(y,y.return);break;case 27:d_(y);case 26:case 5:Qr(p,y,l),l&&u===null&&x&4&&c_(y),Wc(y,y.return);break;case 12:Qr(p,y,l);break;case 31:Qr(p,y,l),l&&x&4&&g_(p,y);break;case 13:Qr(p,y,l),l&&x&4&&y_(p,y);break;case 22:y.memoizedState===null&&Qr(p,y,l),Wc(y,y.return);break;case 30:break;default:Qr(p,y,l)}a=a.sibling}}function eg(r,a){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&jc(l))}function tg(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&jc(r))}function Pi(r,a,l,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)__(r,a,l,u),a=a.sibling}function __(r,a,l,u){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Pi(r,a,l,u),p&2048&&Xc(9,a);break;case 1:Pi(r,a,l,u);break;case 3:Pi(r,a,l,u),p&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&jc(r)));break;case 12:if(p&2048){Pi(r,a,l,u),r=a.stateNode;try{var y=a.memoizedProps,x=y.id,C=y.onPostCommit;typeof C=="function"&&C(x,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(F){ot(a,a.return,F)}}else Pi(r,a,l,u);break;case 31:Pi(r,a,l,u);break;case 13:Pi(r,a,l,u);break;case 23:break;case 22:y=a.stateNode,x=a.alternate,a.memoizedState!==null?y._visibility&2?Pi(r,a,l,u):Zc(r,a):y._visibility&2?Pi(r,a,l,u):(y._visibility|=2,ml(r,a,l,u,(a.subtreeFlags&10256)!==0||!1)),p&2048&&eg(x,a);break;case 24:Pi(r,a,l,u),p&2048&&tg(a.alternate,a);break;default:Pi(r,a,l,u)}}function ml(r,a,l,u,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=r,x=a,C=l,F=u,Q=x.flags;switch(x.tag){case 0:case 11:case 15:ml(y,x,C,F,p),Xc(8,x);break;case 23:break;case 22:var ie=x.stateNode;x.memoizedState!==null?ie._visibility&2?ml(y,x,C,F,p):Zc(y,x):(ie._visibility|=2,ml(y,x,C,F,p)),p&&Q&2048&&eg(x.alternate,x);break;case 24:ml(y,x,C,F,p),p&&Q&2048&&tg(x.alternate,x);break;default:ml(y,x,C,F,p)}a=a.sibling}}function Zc(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=r,u=a,p=u.flags;switch(u.tag){case 22:Zc(l,u),p&2048&&eg(u.alternate,u);break;case 24:Zc(l,u),p&2048&&tg(u.alternate,u);break;default:Zc(l,u)}a=a.sibling}}var Jc=8192;function pl(r,a,l){if(r.subtreeFlags&Jc)for(r=r.child;r!==null;)w_(r,a,l),r=r.sibling}function w_(r,a,l){switch(r.tag){case 26:pl(r,a,l),r.flags&Jc&&r.memoizedState!==null&&yI(l,Vi,r.memoizedState,r.memoizedProps);break;case 5:pl(r,a,l);break;case 3:case 4:var u=Vi;Vi=Mh(r.stateNode.containerInfo),pl(r,a,l),Vi=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=Jc,Jc=16777216,pl(r,a,l),Jc=u):pl(r,a,l));break;default:pl(r,a,l)}}function x_(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function eu(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];an=u,E_(u,r)}x_(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)T_(r),r=r.sibling}function T_(r){switch(r.tag){case 0:case 11:case 15:eu(r),r.flags&2048&&qs(9,r,r.return);break;case 3:eu(r);break;case 12:eu(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,_h(r)):eu(r);break;default:eu(r)}}function _h(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];an=u,E_(u,r)}x_(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:qs(8,a,a.return),_h(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,_h(a));break;default:_h(a)}r=r.sibling}}function E_(r,a){for(;an!==null;){var l=an;switch(l.tag){case 0:case 11:case 15:qs(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:jc(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,an=u;else e:for(l=r;an!==null;){u=an;var p=u.sibling,y=u.return;if(m_(u),u===l){an=null;break e}if(p!==null){p.return=y,an=p;break e}an=y}}}var DN={getCacheForType:function(r){var a=hn(Ht),l=a.data.get(r);return l===void 0&&(l=r(),a.data.set(r,l)),l},cacheSignal:function(){return hn(Ht).controller.signal}},MN=typeof WeakMap=="function"?WeakMap:Map,it=0,mt=null,Be=null,He=0,at=0,ei=null,Hs=!1,gl=!1,ng=!1,Xr=0,It=0,$s=0,fo=0,ig=0,ti=0,yl=0,tu=null,Un=null,rg=!1,wh=0,S_=0,xh=1/0,Th=null,Gs=null,Jt=0,Ks=null,vl=null,Wr=0,sg=0,ag=null,A_=null,nu=0,og=null;function ni(){return(it&2)!==0&&He!==0?He&-He:G.T!==null?fg():Ed()}function C_(){if(ti===0)if((He&536870912)===0||Qe){var r=Ua;Ua<<=1,(Ua&3932160)===0&&(Ua=262144),ti=r}else ti=536870912;return r=Zn.current,r!==null&&(r.flags|=32),ti}function zn(r,a,l){(r===mt&&(at===2||at===9)||r.cancelPendingCommit!==null)&&(bl(r,0),Ys(r,He,ti,!1)),za(r,l),((it&2)===0||r!==mt)&&(r===mt&&((it&2)===0&&(fo|=l),It===4&&Ys(r,He,ti,!1)),hr(r))}function R_(r,a,l){if((it&6)!==0)throw Error(i(327));var u=!l&&(a&127)===0&&(a&r.expiredLanes)===0||Ai(r,a),p=u?PN(r,a):cg(r,a,!0),y=u;do{if(p===0){gl&&!u&&Ys(r,a,0,!1);break}else{if(l=r.current.alternate,y&&!ON(l)){p=cg(r,a,!1),y=!1;continue}if(p===2){if(y=a,r.errorRecoveryDisabledLanes&y)var x=0;else x=r.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){a=x;e:{var C=r;p=tu;var F=C.current.memoizedState.isDehydrated;if(F&&(bl(C,x).flags|=256),x=cg(C,x,!1),x!==2){if(ng&&!F){C.errorRecoveryDisabledLanes|=y,fo|=y,p=4;break e}y=Un,Un=p,y!==null&&(Un===null?Un=y:Un.push.apply(Un,y))}p=x}if(y=!1,p!==2)continue}}if(p===1){bl(r,0),Ys(r,a,0,!0);break}e:{switch(u=r,y=p,y){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Ys(u,a,ti,!Hs);break e;case 2:Un=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(p=wh+300-ln(),10<p)){if(Ys(u,a,ti,!Hs),Yi(u,0,!0)!==0)break e;Wr=a,u.timeoutHandle=sw(N_.bind(null,u,l,Un,Th,rg,a,ti,fo,yl,Hs,y,"Throttled",-0,0),p);break e}N_(u,l,Un,Th,rg,a,ti,fo,yl,Hs,y,null,-0,0)}}break}while(!0);hr(r)}function N_(r,a,l,u,p,y,x,C,F,Q,ie,oe,X,Z){if(r.timeoutHandle=-1,oe=a.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ni},w_(a,y,oe);var be=(y&62914560)===y?wh-ln():(y&4194048)===y?S_-ln():0;if(be=vI(oe,be),be!==null){Wr=y,r.cancelPendingCommit=be(j_.bind(null,r,a,y,l,u,p,x,C,F,ie,oe,null,X,Z)),Ys(r,y,x,!Q);return}}j_(r,a,y,l,u,p,x,C,F)}function ON(r){for(var a=r;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var p=l[u],y=p.getSnapshot;p=p.value;try{if(!Xn(y(),p))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ys(r,a,l,u){a&=~ig,a&=~fo,r.suspendedLanes|=a,r.pingedLanes&=~a,u&&(r.warmLanes|=a),u=r.expirationTimes;for(var p=a;0<p;){var y=31-Rt(p),x=1<<y;u[y]=-1,p&=~x}l!==0&&Fa(r,l,a)}function Eh(){return(it&6)===0?(iu(0),!1):!0}function lg(){if(Be!==null){if(at===0)var r=Be.return;else r=Be,zr=io=null,Ep(r),cl=null,Uc=0,r=Be;for(;r!==null;)a_(r.alternate,r),r=r.return;Be=null}}function bl(r,a){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,eI(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),Wr=0,lg(),mt=r,Be=l=Lr(r.current,null),He=a,at=0,ei=null,Hs=!1,gl=Ai(r,a),ng=!1,yl=ti=ig=fo=$s=It=0,Un=tu=null,rg=!1,(a&8)!==0&&(a|=a&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=a;0<u;){var p=31-Rt(u),y=1<<p;a|=r[p],u&=~y}return Xr=a,$d(),l}function I_(r,a){Le=null,G.H=Kc,a===ll||a===Jd?(a=Gb(),at=3):a===hp?(a=Gb(),at=4):at=a===zp?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ei=a,Be===null&&(It=1,fh(r,ui(a,r.current)))}function k_(){var r=Zn.current;return r===null?!0:(He&4194048)===He?mi===null:(He&62914560)===He||(He&536870912)!==0?r===mi:!1}function D_(){var r=G.H;return G.H=Kc,r===null?Kc:r}function M_(){var r=G.A;return G.A=DN,r}function Sh(){It=4,Hs||(He&4194048)!==He&&Zn.current!==null||(gl=!0),($s&134217727)===0&&(fo&134217727)===0||mt===null||Ys(mt,He,ti,!1)}function cg(r,a,l){var u=it;it|=2;var p=D_(),y=M_();(mt!==r||He!==a)&&(Th=null,bl(r,a)),a=!1;var x=It;e:do try{if(at!==0&&Be!==null){var C=Be,F=ei;switch(at){case 8:lg(),x=6;break e;case 3:case 2:case 9:case 6:Zn.current===null&&(a=!0);var Q=at;if(at=0,ei=null,_l(r,C,F,Q),l&&gl){x=0;break e}break;default:Q=at,at=0,ei=null,_l(r,C,F,Q)}}VN(),x=It;break}catch(ie){I_(r,ie)}while(!0);return a&&r.shellSuspendCounter++,zr=io=null,it=u,G.H=p,G.A=y,Be===null&&(mt=null,He=0,$d()),x}function VN(){for(;Be!==null;)O_(Be)}function PN(r,a){var l=it;it|=2;var u=D_(),p=M_();mt!==r||He!==a?(Th=null,xh=ln()+500,bl(r,a)):gl=Ai(r,a);e:do try{if(at!==0&&Be!==null){a=Be;var y=ei;t:switch(at){case 1:at=0,ei=null,_l(r,a,y,1);break;case 2:case 9:if(Hb(y)){at=0,ei=null,V_(a);break}a=function(){at!==2&&at!==9||mt!==r||(at=7),hr(r)},y.then(a,a);break e;case 3:at=7;break e;case 4:at=5;break e;case 7:Hb(y)?(at=0,ei=null,V_(a)):(at=0,ei=null,_l(r,a,y,7));break;case 5:var x=null;switch(Be.tag){case 26:x=Be.memoizedState;case 5:case 27:var C=Be;if(x?_w(x):C.stateNode.complete){at=0,ei=null;var F=C.sibling;if(F!==null)Be=F;else{var Q=C.return;Q!==null?(Be=Q,Ah(Q)):Be=null}break t}}at=0,ei=null,_l(r,a,y,5);break;case 6:at=0,ei=null,_l(r,a,y,6);break;case 8:lg(),It=6;break e;default:throw Error(i(462))}}jN();break}catch(ie){I_(r,ie)}while(!0);return zr=io=null,G.H=u,G.A=p,it=l,Be!==null?0:(mt=null,He=0,$d(),It)}function jN(){for(;Be!==null&&!hc();)O_(Be)}function O_(r){var a=r_(r.alternate,r,Xr);r.memoizedProps=r.pendingProps,a===null?Ah(r):Be=a}function V_(r){var a=r,l=a.alternate;switch(a.tag){case 15:case 0:a=Z1(l,a,a.pendingProps,a.type,void 0,He);break;case 11:a=Z1(l,a,a.pendingProps,a.type.render,a.ref,He);break;case 5:Ep(a);default:a_(l,a),a=Be=Mb(a,Xr),a=r_(l,a,Xr)}r.memoizedProps=r.pendingProps,a===null?Ah(r):Be=a}function _l(r,a,l,u){zr=io=null,Ep(a),cl=null,Uc=0;var p=a.return;try{if(SN(r,p,a,l,He)){It=1,fh(r,ui(l,r.current)),Be=null;return}}catch(y){if(p!==null)throw Be=p,y;It=1,fh(r,ui(l,r.current)),Be=null;return}a.flags&32768?(Qe||u===1?r=!0:gl||(He&536870912)!==0?r=!1:(Hs=r=!0,(u===2||u===9||u===3||u===6)&&(u=Zn.current,u!==null&&u.tag===13&&(u.flags|=16384))),P_(a,r)):Ah(a)}function Ah(r){var a=r;do{if((a.flags&32768)!==0){P_(a,Hs);return}r=a.return;var l=RN(a.alternate,a,Xr);if(l!==null){Be=l;return}if(a=a.sibling,a!==null){Be=a;return}Be=a=r}while(a!==null);It===0&&(It=5)}function P_(r,a){do{var l=NN(r.alternate,r);if(l!==null){l.flags&=32767,Be=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(r=r.sibling,r!==null)){Be=r;return}Be=r=l}while(r!==null);It=6,Be=null}function j_(r,a,l,u,p,y,x,C,F){r.cancelPendingCommit=null;do Ch();while(Jt!==0);if((it&6)!==0)throw Error(i(327));if(a!==null){if(a===r.current)throw Error(i(177));if(y=a.lanes|a.childLanes,y|=Wm,Bm(r,l,y,x,C,F),r===mt&&(Be=mt=null,He=0),vl=a,Ks=r,Wr=l,sg=y,ag=p,A_=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,FN($i,function(){return B_(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=G.T,G.T=null,p=ee.p,ee.p=2,x=it,it|=4;try{IN(r,a,l)}finally{it=x,ee.p=p,G.T=u}}Jt=1,L_(),U_(),z_()}}function L_(){if(Jt===1){Jt=0;var r=Ks,a=vl,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=G.T,G.T=null;var u=ee.p;ee.p=2;var p=it;it|=4;try{v_(a,r);var y=wg,x=Eb(r.containerInfo),C=y.focusedElem,F=y.selectionRange;if(x!==C&&C&&C.ownerDocument&&Tb(C.ownerDocument.documentElement,C)){if(F!==null&&Gm(C)){var Q=F.start,ie=F.end;if(ie===void 0&&(ie=Q),"selectionStart"in C)C.selectionStart=Q,C.selectionEnd=Math.min(ie,C.value.length);else{var oe=C.ownerDocument||document,X=oe&&oe.defaultView||window;if(X.getSelection){var Z=X.getSelection(),be=C.textContent.length,Ce=Math.min(F.start,be),ft=F.end===void 0?Ce:Math.min(F.end,be);!Z.extend&&Ce>ft&&(x=ft,ft=Ce,Ce=x);var H=xb(C,Ce),q=xb(C,ft);if(H&&q&&(Z.rangeCount!==1||Z.anchorNode!==H.node||Z.anchorOffset!==H.offset||Z.focusNode!==q.node||Z.focusOffset!==q.offset)){var Y=oe.createRange();Y.setStart(H.node,H.offset),Z.removeAllRanges(),Ce>ft?(Z.addRange(Y),Z.extend(q.node,q.offset)):(Y.setEnd(q.node,q.offset),Z.addRange(Y))}}}}for(oe=[],Z=C;Z=Z.parentNode;)Z.nodeType===1&&oe.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<oe.length;C++){var se=oe[C];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Uh=!!_g,wg=_g=null}finally{it=p,ee.p=u,G.T=l}}r.current=a,Jt=2}}function U_(){if(Jt===2){Jt=0;var r=Ks,a=vl,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=G.T,G.T=null;var u=ee.p;ee.p=2;var p=it;it|=4;try{f_(r,a.alternate,a)}finally{it=p,ee.p=u,G.T=l}}Jt=3}}function z_(){if(Jt===4||Jt===3){Jt=0,Uo();var r=Ks,a=vl,l=Wr,u=A_;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Jt=5:(Jt=0,vl=Ks=null,F_(r,r.pendingLanes));var p=r.pendingLanes;if(p===0&&(Gs=null),Or(l),a=a.stateNode,Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(Zt,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=G.T,p=ee.p,ee.p=2,G.T=null;try{for(var y=r.onRecoverableError,x=0;x<u.length;x++){var C=u[x];y(C.value,{componentStack:C.stack})}}finally{G.T=a,ee.p=p}}(Wr&3)!==0&&Ch(),hr(r),p=r.pendingLanes,(l&261930)!==0&&(p&42)!==0?r===og?nu++:(nu=0,og=r):nu=0,iu(0)}}function F_(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,jc(a)))}function Ch(){return L_(),U_(),z_(),B_()}function B_(){if(Jt!==5)return!1;var r=Ks,a=sg;sg=0;var l=Or(Wr),u=G.T,p=ee.p;try{ee.p=32>l?32:l,G.T=null,l=ag,ag=null;var y=Ks,x=Wr;if(Jt=0,vl=Ks=null,Wr=0,(it&6)!==0)throw Error(i(331));var C=it;if(it|=4,T_(y.current),__(y,y.current,x,l),it=C,iu(0,!1),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(Zt,y)}catch{}return!0}finally{ee.p=p,G.T=u,F_(r,a)}}function q_(r,a,l){a=ui(l,a),a=Up(r.stateNode,a,2),r=zs(r,a,2),r!==null&&(za(r,2),hr(r))}function ot(r,a,l){if(r.tag===3)q_(r,r,l);else for(;a!==null;){if(a.tag===3){q_(a,r,l);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Gs===null||!Gs.has(u))){r=ui(l,r),l=H1(2),u=zs(a,l,2),u!==null&&($1(l,u,a,r),za(u,2),hr(u));break}}a=a.return}}function ug(r,a,l){var u=r.pingCache;if(u===null){u=r.pingCache=new MN;var p=new Set;u.set(a,p)}else p=u.get(a),p===void 0&&(p=new Set,u.set(a,p));p.has(l)||(ng=!0,p.add(l),r=LN.bind(null,r,a,l),a.then(r,r))}function LN(r,a,l){var u=r.pingCache;u!==null&&u.delete(a),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,mt===r&&(He&l)===l&&(It===4||It===3&&(He&62914560)===He&&300>ln()-wh?(it&2)===0&&bl(r,0):ig|=l,yl===He&&(yl=0)),hr(r)}function H_(r,a){a===0&&(a=Td()),r=eo(r,a),r!==null&&(za(r,a),hr(r))}function UN(r){var a=r.memoizedState,l=0;a!==null&&(l=a.retryLane),H_(r,l)}function zN(r,a){var l=0;switch(r.tag){case 31:case 13:var u=r.stateNode,p=r.memoizedState;p!==null&&(l=p.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(a),H_(r,l)}function FN(r,a){return Ot(r,a)}var Rh=null,wl=null,dg=!1,Nh=!1,hg=!1,Qs=0;function hr(r){r!==wl&&r.next===null&&(wl===null?Rh=wl=r:wl=wl.next=r),Nh=!0,dg||(dg=!0,qN())}function iu(r,a){if(!hg&&Nh){hg=!0;do for(var l=!1,u=Rh;u!==null;){if(r!==0){var p=u.pendingLanes;if(p===0)var y=0;else{var x=u.suspendedLanes,C=u.pingedLanes;y=(1<<31-Rt(42|r)+1)-1,y&=p&~(x&~C),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,Y_(u,y))}else y=He,y=Yi(u,u===mt?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Ai(u,y)||(l=!0,Y_(u,y));u=u.next}while(l);hg=!1}}function BN(){$_()}function $_(){Nh=dg=!1;var r=0;Qs!==0&&JN()&&(r=Qs);for(var a=ln(),l=null,u=Rh;u!==null;){var p=u.next,y=G_(u,a);y===0?(u.next=null,l===null?Rh=p:l.next=p,p===null&&(wl=l)):(l=u,(r!==0||(y&3)!==0)&&(Nh=!0)),u=p}Jt!==0&&Jt!==5||iu(r),Qs!==0&&(Qs=0)}function G_(r,a){for(var l=r.suspendedLanes,u=r.pingedLanes,p=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var x=31-Rt(y),C=1<<x,F=p[x];F===-1?((C&l)===0||(C&u)!==0)&&(p[x]=Fm(C,a)):F<=a&&(r.expiredLanes|=C),y&=~C}if(a=mt,l=He,l=Yi(r,r===a?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,l===0||r===a&&(at===2||at===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Hi(u),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||Ai(r,l)){if(a=l&-l,a===r.callbackPriority)return a;switch(u!==null&&Hi(u),Or(l)){case 2:case 8:l=ja;break;case 32:l=$i;break;case 268435456:l=Te;break;default:l=$i}return u=K_.bind(null,r),l=Ot(l,u),r.callbackPriority=a,r.callbackNode=l,a}return u!==null&&u!==null&&Hi(u),r.callbackPriority=2,r.callbackNode=null,2}function K_(r,a){if(Jt!==0&&Jt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(Ch()&&r.callbackNode!==l)return null;var u=He;return u=Yi(r,r===mt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(R_(r,u,a),G_(r,ln()),r.callbackNode!=null&&r.callbackNode===l?K_.bind(null,r):null)}function Y_(r,a){if(Ch())return null;R_(r,a,!0)}function qN(){tI(function(){(it&6)!==0?Ot(Pa,BN):$_()})}function fg(){if(Qs===0){var r=al;r===0&&(r=Gi,Gi<<=1,(Gi&261888)===0&&(Gi=256)),Qs=r}return Qs}function Q_(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:$o(""+r)}function X_(r,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,r.id&&l.setAttribute("form",r.id),a.parentNode.insertBefore(l,a),r=new FormData(r),l.parentNode.removeChild(l),r}function HN(r,a,l,u,p){if(a==="submit"&&l&&l.stateNode===p){var y=Q_((p[rn]||null).action),x=u.submitter;x&&(a=(a=x[rn]||null)?Q_(a.formAction):x.getAttribute("formAction"),a!==null&&(y=a,x=null));var C=new sr("action","action",null,u,p);r.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Qs!==0){var F=x?X_(p,x):new FormData(p);Mp(l,{pending:!0,data:F,method:p.method,action:y},null,F)}}else typeof y=="function"&&(C.preventDefault(),F=x?X_(p,x):new FormData(p),Mp(l,{pending:!0,data:F,method:p.method,action:y},y,F))},currentTarget:p}]})}}for(var mg=0;mg<Xm.length;mg++){var pg=Xm[mg],$N=pg.toLowerCase(),GN=pg[0].toUpperCase()+pg.slice(1);Oi($N,"on"+GN)}Oi(Cb,"onAnimationEnd"),Oi(Rb,"onAnimationIteration"),Oi(Nb,"onAnimationStart"),Oi("dblclick","onDoubleClick"),Oi("focusin","onFocus"),Oi("focusout","onBlur"),Oi(lN,"onTransitionRun"),Oi(cN,"onTransitionStart"),Oi(uN,"onTransitionCancel"),Oi(Ib,"onTransitionEnd"),tr("onMouseEnter",["mouseout","mouseover"]),tr("onMouseLeave",["mouseout","mouseover"]),tr("onPointerEnter",["pointerout","pointerover"]),tr("onPointerLeave",["pointerout","pointerover"]),er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),er("onBeforeInput",["compositionend","keypress","textInput","paste"]),er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ru));function W_(r,a){a=(a&4)!==0;for(var l=0;l<r.length;l++){var u=r[l],p=u.event;u=u.listeners;e:{var y=void 0;if(a)for(var x=u.length-1;0<=x;x--){var C=u[x],F=C.instance,Q=C.currentTarget;if(C=C.listener,F!==y&&p.isPropagationStopped())break e;y=C,p.currentTarget=Q;try{y(p)}catch(ie){Hd(ie)}p.currentTarget=null,y=F}else for(x=0;x<u.length;x++){if(C=u[x],F=C.instance,Q=C.currentTarget,C=C.listener,F!==y&&p.isPropagationStopped())break e;y=C,p.currentTarget=Q;try{y(p)}catch(ie){Hd(ie)}p.currentTarget=null,y=F}}}}function qe(r,a){var l=a[zo];l===void 0&&(l=a[zo]=new Set);var u=r+"__bubble";l.has(u)||(Z_(a,r,2,!1),l.add(u))}function gg(r,a,l){var u=0;a&&(u|=4),Z_(l,r,u,a)}var Ih="_reactListening"+Math.random().toString(36).slice(2);function yg(r){if(!r[Ih]){r[Ih]=!0,gc.forEach(function(l){l!=="selectionchange"&&(KN.has(l)||gg(l,!1,r),gg(l,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[Ih]||(a[Ih]=!0,gg("selectionchange",!1,a))}}function Z_(r,a,l,u){switch(Cw(a)){case 2:var p=wI;break;case 8:p=xI;break;default:p=Dg}l=p.bind(null,a,l,r),p=void 0,!Ga||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),u?p!==void 0?r.addEventListener(a,l,{capture:!0,passive:p}):r.addEventListener(a,l,!0):p!==void 0?r.addEventListener(a,l,{passive:p}):r.addEventListener(a,l,!1)}function vg(r,a,l,u,p){var y=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var x=u.tag;if(x===3||x===4){var C=u.stateNode.containerInfo;if(C===p)break;if(x===4)for(x=u.return;x!==null;){var F=x.tag;if((F===3||F===4)&&x.stateNode.containerInfo===p)return;x=x.return}for(;C!==null;){if(x=Zi(C),x===null)return;if(F=x.tag,F===5||F===6||F===26||F===27){u=y=x;continue e}C=C.parentNode}}u=u.return}Is(function(){var Q=y,ie=ai(l),oe=[];e:{var X=kb.get(r);if(X!==void 0){var Z=sr,be=r;switch(r){case"keypress":if(Ya(l)===0)break e;case"keydown":case"keyup":Z=Fd;break;case"focusin":be="focus",Z=Xa;break;case"focusout":be="blur",Z=Xa;break;case"beforeblur":case"afterblur":Z=Xa;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Nc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=w;break;case Cb:case Rb:case Nb:Z=Od;break;case Ib:Z=k;break;case"scroll":case"scrollend":Z=Rc;break;case"wheel":Z=W;break;case"copy":case"cut":case"paste":Z=Vd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=jr;break;case"toggle":case"beforetoggle":Z=je}var Ce=(a&4)!==0,ft=!Ce&&(r==="scroll"||r==="scrollend"),H=Ce?X!==null?X+"Capture":null:X;Ce=[];for(var q=Q,Y;q!==null;){var se=q;if(Y=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||Y===null||H===null||(se=Ii(q,H),se!=null&&Ce.push(su(q,se,Y))),ft)break;q=q.return}0<Ce.length&&(X=new Z(X,be,null,l,ie),oe.push({event:X,listeners:Ce}))}}if((a&7)===0){e:{if(X=r==="mouseover"||r==="pointerover",Z=r==="mouseout"||r==="pointerout",X&&l!==Sc&&(be=l.relatedTarget||l.fromElement)&&(Zi(be)||be[Xi]))break e;if((Z||X)&&(X=ie.window===ie?ie:(X=ie.ownerDocument)?X.defaultView||X.parentWindow:window,Z?(be=l.relatedTarget||l.toElement,Z=Q,be=be?Zi(be):null,be!==null&&(ft=o(be),Ce=be.tag,be!==ft||Ce!==5&&Ce!==27&&Ce!==6)&&(be=null)):(Z=null,be=Q),Z!==be)){if(Ce=Nc,se="onMouseLeave",H="onMouseEnter",q="mouse",(r==="pointerout"||r==="pointerover")&&(Ce=jr,se="onPointerLeave",H="onPointerEnter",q="pointer"),ft=Z==null?X:Yn(Z),Y=be==null?X:Yn(be),X=new Ce(se,q+"leave",Z,l,ie),X.target=ft,X.relatedTarget=Y,se=null,Zi(ie)===Q&&(Ce=new Ce(H,q+"enter",be,l,ie),Ce.target=Y,Ce.relatedTarget=ft,se=Ce),ft=se,Z&&be)t:{for(Ce=YN,H=Z,q=be,Y=0,se=H;se;se=Ce(se))Y++;se=0;for(var Se=q;Se;Se=Ce(Se))se++;for(;0<Y-se;)H=Ce(H),Y--;for(;0<se-Y;)q=Ce(q),se--;for(;Y--;){if(H===q||q!==null&&H===q.alternate){Ce=H;break t}H=Ce(H),q=Ce(q)}Ce=null}else Ce=null;Z!==null&&J_(oe,X,Z,Ce,!1),be!==null&&ft!==null&&J_(oe,ft,be,Ce,!0)}}e:{if(X=Q?Yn(Q):window,Z=X.nodeName&&X.nodeName.toLowerCase(),Z==="select"||Z==="input"&&X.type==="file")var Je=gb;else if(mb(X))if(yb)Je=sN;else{Je=iN;var _e=nN}else Z=X.nodeName,!Z||Z.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Q&&Ho(Q.elementType)&&(Je=gb):Je=rN;if(Je&&(Je=Je(r,Q))){pb(oe,Je,l,ie);break e}_e&&_e(r,X,Q),r==="focusout"&&Q&&X.type==="number"&&Q.memoizedProps.value!=null&&xc(X,"number",X.value)}switch(_e=Q?Yn(Q):window,r){case"focusin":(mb(_e)||_e.contentEditable==="true")&&(Zo=_e,Km=Q,Oc=null);break;case"focusout":Oc=Km=Zo=null;break;case"mousedown":Ym=!0;break;case"contextmenu":case"mouseup":case"dragend":Ym=!1,Sb(oe,l,ie);break;case"selectionchange":if(oN)break;case"keydown":case"keyup":Sb(oe,l,ie)}var Ue;if(nt)e:{switch(r){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else Wo?Wa(r,l)&&($e="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&($e="onCompositionStart");$e&&(lr&&l.locale!=="ko"&&(Wo||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&Wo&&(Ue=Cc()):(rr=ie,Ac="value"in rr?rr.value:rr.textContent,Wo=!0)),_e=kh(Q,$e),0<_e.length&&($e=new or($e,r,null,l,ie),oe.push({event:$e,listeners:_e}),Ue?$e.data=Ue:(Ue=Xo(l),Ue!==null&&($e.data=Ue)))),(Ue=li?ZR(r,l):JR(r,l))&&($e=kh(Q,"onBeforeInput"),0<$e.length&&(_e=new or("onBeforeInput","beforeinput",null,l,ie),oe.push({event:_e,listeners:$e}),_e.data=Ue)),HN(oe,r,Q,l,ie)}W_(oe,a)})}function su(r,a,l){return{instance:r,listener:a,currentTarget:l}}function kh(r,a){for(var l=a+"Capture",u=[];r!==null;){var p=r,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Ii(r,l),p!=null&&u.unshift(su(r,p,y)),p=Ii(r,a),p!=null&&u.push(su(r,p,y))),r.tag===3)return u;r=r.return}return[]}function YN(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function J_(r,a,l,u,p){for(var y=a._reactName,x=[];l!==null&&l!==u;){var C=l,F=C.alternate,Q=C.stateNode;if(C=C.tag,F!==null&&F===u)break;C!==5&&C!==26&&C!==27||Q===null||(F=Q,p?(Q=Ii(l,y),Q!=null&&x.unshift(su(l,Q,F))):p||(Q=Ii(l,y),Q!=null&&x.push(su(l,Q,F)))),l=l.return}x.length!==0&&r.push({event:a,listeners:x})}var QN=/\r\n?/g,XN=/\u0000|\uFFFD/g;function ew(r){return(typeof r=="string"?r:""+r).replace(QN,`
`).replace(XN,"")}function tw(r,a){return a=ew(a),ew(r)===a}function ht(r,a,l,u,p,y){switch(l){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||Vn(r,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&Vn(r,""+u);break;case"className":Qn(r,"class",u);break;case"tabIndex":Qn(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Qn(r,l,u);break;case"style":Ec(r,u,y);break;case"data":if(a!=="object"){Qn(r,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||l!=="href")){r.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=$o(""+u),r.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(a!=="input"&&ht(r,a,"name",p.name,p,null),ht(r,a,"formEncType",p.formEncType,p,null),ht(r,a,"formMethod",p.formMethod,p,null),ht(r,a,"formTarget",p.formTarget,p,null)):(ht(r,a,"encType",p.encType,p,null),ht(r,a,"method",p.method,p,null),ht(r,a,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=$o(""+u),r.setAttribute(l,u);break;case"onClick":u!=null&&(r.onclick=Ni);break;case"onScroll":u!=null&&qe("scroll",r);break;case"onScrollEnd":u!=null&&qe("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}l=$o(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""+u):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":u===!0?r.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,u):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(l,u):r.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(l):r.setAttribute(l,u);break;case"popover":qe("beforetoggle",r),qe("toggle",r),Bo(r,"popover",u);break;case"xlinkActuate":qt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":qt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":qt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":qt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":qt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":qt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":qt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":qt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":qt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Bo(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=kd.get(l)||l,Bo(r,l,u))}}function bg(r,a,l,u,p,y){switch(l){case"style":Ec(r,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof u=="string"?Vn(r,u):(typeof u=="number"||typeof u=="bigint")&&Vn(r,""+u);break;case"onScroll":u!=null&&qe("scroll",r);break;case"onScrollEnd":u!=null&&qe("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Ni);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yc.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),a=l.slice(2,p?l.length-7:void 0),y=r[rn]||null,y=y!=null?y[l]:null,typeof y=="function"&&r.removeEventListener(a,y,p),typeof u=="function")){typeof y!="function"&&y!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(a,u,p);break e}l in r?r[l]=u:u===!0?r.setAttribute(l,""):Bo(r,l,u)}}}function mn(r,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",r),qe("load",r);var u=!1,p=!1,y;for(y in l)if(l.hasOwnProperty(y)){var x=l[y];if(x!=null)switch(y){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ht(r,a,y,x,l,null)}}p&&ht(r,a,"srcSet",l.srcSet,l,null),u&&ht(r,a,"src",l.src,l,null);return;case"input":qe("invalid",r);var C=y=x=p=null,F=null,Q=null;for(u in l)if(l.hasOwnProperty(u)){var ie=l[u];if(ie!=null)switch(u){case"name":p=ie;break;case"type":x=ie;break;case"checked":F=ie;break;case"defaultChecked":Q=ie;break;case"value":y=ie;break;case"defaultValue":C=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,a));break;default:ht(r,a,u,ie,l,null)}}Rd(r,y,C,F,Q,x,p,!1);return;case"select":qe("invalid",r),u=x=y=null;for(p in l)if(l.hasOwnProperty(p)&&(C=l[p],C!=null))switch(p){case"value":y=C;break;case"defaultValue":x=C;break;case"multiple":u=C;default:ht(r,a,p,C,l,null)}a=y,l=x,r.multiple=!!u,a!=null?As(r,!!u,a,!1):l!=null&&As(r,!!u,l,!0);return;case"textarea":qe("invalid",r),y=p=u=null;for(x in l)if(l.hasOwnProperty(x)&&(C=l[x],C!=null))switch(x){case"value":u=C;break;case"defaultValue":p=C;break;case"children":y=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:ht(r,a,x,C,l,null)}Cs(r,u,p,y);return;case"option":for(F in l)if(l.hasOwnProperty(F)&&(u=l[F],u!=null))switch(F){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ht(r,a,F,u,l,null)}return;case"dialog":qe("beforetoggle",r),qe("toggle",r),qe("cancel",r),qe("close",r);break;case"iframe":case"object":qe("load",r);break;case"video":case"audio":for(u=0;u<ru.length;u++)qe(ru[u],r);break;case"image":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"embed":case"source":case"link":qe("error",r),qe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in l)if(l.hasOwnProperty(Q)&&(u=l[Q],u!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ht(r,a,Q,u,l,null)}return;default:if(Ho(a)){for(ie in l)l.hasOwnProperty(ie)&&(u=l[ie],u!==void 0&&bg(r,a,ie,u,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(u=l[C],u!=null&&ht(r,a,C,u,l,null))}function WN(r,a,l,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,x=null,C=null,F=null,Q=null,ie=null;for(Z in l){var oe=l[Z];if(l.hasOwnProperty(Z)&&oe!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":F=oe;default:u.hasOwnProperty(Z)||ht(r,a,Z,null,u,oe)}}for(var X in u){var Z=u[X];if(oe=l[X],u.hasOwnProperty(X)&&(Z!=null||oe!=null))switch(X){case"type":y=Z;break;case"name":p=Z;break;case"checked":Q=Z;break;case"defaultChecked":ie=Z;break;case"value":x=Z;break;case"defaultValue":C=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,a));break;default:Z!==oe&&ht(r,a,X,Z,u,oe)}}qo(r,x,C,F,Q,ie,y,p);return;case"select":Z=x=C=X=null;for(y in l)if(F=l[y],l.hasOwnProperty(y)&&F!=null)switch(y){case"value":break;case"multiple":Z=F;default:u.hasOwnProperty(y)||ht(r,a,y,null,u,F)}for(p in u)if(y=u[p],F=l[p],u.hasOwnProperty(p)&&(y!=null||F!=null))switch(p){case"value":X=y;break;case"defaultValue":C=y;break;case"multiple":x=y;default:y!==F&&ht(r,a,p,y,u,F)}a=C,l=x,u=Z,X!=null?As(r,!!l,X,!1):!!u!=!!l&&(a!=null?As(r,!!l,a,!0):As(r,!!l,l?[]:"",!1));return;case"textarea":Z=X=null;for(C in l)if(p=l[C],l.hasOwnProperty(C)&&p!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:ht(r,a,C,null,u,p)}for(x in u)if(p=u[x],y=l[x],u.hasOwnProperty(x)&&(p!=null||y!=null))switch(x){case"value":X=p;break;case"defaultValue":Z=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==y&&ht(r,a,x,p,u,y)}Nd(r,X,Z);return;case"option":for(var be in l)if(X=l[be],l.hasOwnProperty(be)&&X!=null&&!u.hasOwnProperty(be))switch(be){case"selected":r.selected=!1;break;default:ht(r,a,be,null,u,X)}for(F in u)if(X=u[F],Z=l[F],u.hasOwnProperty(F)&&X!==Z&&(X!=null||Z!=null))switch(F){case"selected":r.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:ht(r,a,F,X,u,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in l)X=l[Ce],l.hasOwnProperty(Ce)&&X!=null&&!u.hasOwnProperty(Ce)&&ht(r,a,Ce,null,u,X);for(Q in u)if(X=u[Q],Z=l[Q],u.hasOwnProperty(Q)&&X!==Z&&(X!=null||Z!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,a));break;default:ht(r,a,Q,X,u,Z)}return;default:if(Ho(a)){for(var ft in l)X=l[ft],l.hasOwnProperty(ft)&&X!==void 0&&!u.hasOwnProperty(ft)&&bg(r,a,ft,void 0,u,X);for(ie in u)X=u[ie],Z=l[ie],!u.hasOwnProperty(ie)||X===Z||X===void 0&&Z===void 0||bg(r,a,ie,X,u,Z);return}}for(var H in l)X=l[H],l.hasOwnProperty(H)&&X!=null&&!u.hasOwnProperty(H)&&ht(r,a,H,null,u,X);for(oe in u)X=u[oe],Z=l[oe],!u.hasOwnProperty(oe)||X===Z||X==null&&Z==null||ht(r,a,oe,X,u,Z)}function nw(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ZN(){if(typeof performance.getEntriesByType=="function"){for(var r=0,a=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var p=l[u],y=p.transferSize,x=p.initiatorType,C=p.duration;if(y&&C&&nw(x)){for(x=0,C=p.responseEnd,u+=1;u<l.length;u++){var F=l[u],Q=F.startTime;if(Q>C)break;var ie=F.transferSize,oe=F.initiatorType;ie&&nw(oe)&&(F=F.responseEnd,x+=ie*(F<C?1:(C-Q)/(F-Q)))}if(--u,a+=8*(y+x)/(p.duration/1e3),r++,10<r)break}}if(0<r)return a/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var _g=null,wg=null;function Dh(r){return r.nodeType===9?r:r.ownerDocument}function iw(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rw(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function xg(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Tg=null;function JN(){var r=window.event;return r&&r.type==="popstate"?r===Tg?!1:(Tg=r,!0):(Tg=null,!1)}var sw=typeof setTimeout=="function"?setTimeout:void 0,eI=typeof clearTimeout=="function"?clearTimeout:void 0,aw=typeof Promise=="function"?Promise:void 0,tI=typeof queueMicrotask=="function"?queueMicrotask:typeof aw<"u"?function(r){return aw.resolve(null).then(r).catch(nI)}:sw;function nI(r){setTimeout(function(){throw r})}function Xs(r){return r==="head"}function ow(r,a){var l=a,u=0;do{var p=l.nextSibling;if(r.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(u===0){r.removeChild(p),Sl(a);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")au(r.ownerDocument.documentElement);else if(l==="head"){l=r.ownerDocument.head,au(l);for(var y=l.firstChild;y;){var x=y.nextSibling,C=y.nodeName;y[Wi]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&y.rel.toLowerCase()==="stylesheet"||l.removeChild(y),y=x}}else l==="body"&&au(r.ownerDocument.body);l=p}while(l);Sl(a)}function lw(r,a){var l=r;r=0;do{var u=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(r===0)break;r--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||r++;l=u}while(l)}function Eg(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Eg(l),Fo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function iI(r,a,l,u){for(;r.nodeType===1;){var p=l;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Wi])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==p.rel||r.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||r.getAttribute("title")!==(p.title==null?null:p.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(p.src==null?null:p.src)||r.getAttribute("type")!==(p.type==null?null:p.type)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=pi(r.nextSibling),r===null)break}return null}function rI(r,a,l){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=pi(r.nextSibling),r===null))return null;return r}function cw(r,a){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=pi(r.nextSibling),r===null))return null;return r}function Sg(r){return r.data==="$?"||r.data==="$~"}function Ag(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function sI(r,a){var l=r.ownerDocument;if(r.data==="$~")r._reactRetry=a;else if(r.data!=="$?"||l.readyState!=="loading")a();else{var u=function(){a(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function pi(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return r}var Cg=null;function uw(r){r=r.nextSibling;for(var a=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"||l==="/&"){if(a===0)return pi(r.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}r=r.nextSibling}return null}function dw(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return r;a--}else l!=="/$"&&l!=="/&"||a++}r=r.previousSibling}return null}function hw(r,a,l){switch(a=Dh(l),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function au(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);Fo(r)}var gi=new Map,fw=new Set;function Mh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Zr=ee.d;ee.d={f:aI,r:oI,D:lI,C:cI,L:uI,m:dI,X:fI,S:hI,M:mI};function aI(){var r=Zr.f(),a=Eh();return r||a}function oI(r){var a=si(r);a!==null&&a.tag===5&&a.type==="form"?I1(a):Zr.r(r)}var xl=typeof document>"u"?null:document;function mw(r,a,l){var u=xl;if(u&&typeof a=="string"&&a){var p=On(a);p='link[rel="'+r+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),fw.has(p)||(fw.add(p),r={rel:r,crossOrigin:l,href:a},u.querySelector(p)===null&&(a=u.createElement("link"),mn(a,"link",r),Bt(a),u.head.appendChild(a)))}}function lI(r){Zr.D(r),mw("dns-prefetch",r,null)}function cI(r,a){Zr.C(r,a),mw("preconnect",r,a)}function uI(r,a,l){Zr.L(r,a,l);var u=xl;if(u&&r&&a){var p='link[rel="preload"][as="'+On(a)+'"]';a==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+On(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+On(l.imageSizes)+'"]')):p+='[href="'+On(r)+'"]';var y=p;switch(a){case"style":y=Tl(r);break;case"script":y=El(r)}gi.has(y)||(r=v({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:r,as:a},l),gi.set(y,r),u.querySelector(p)!==null||a==="style"&&u.querySelector(ou(y))||a==="script"&&u.querySelector(lu(y))||(a=u.createElement("link"),mn(a,"link",r),Bt(a),u.head.appendChild(a)))}}function dI(r,a){Zr.m(r,a);var l=xl;if(l&&r){var u=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+On(u)+'"][href="'+On(r)+'"]',y=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=El(r)}if(!gi.has(y)&&(r=v({rel:"modulepreload",href:r},a),gi.set(y,r),l.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(lu(y)))return}u=l.createElement("link"),mn(u,"link",r),Bt(u),l.head.appendChild(u)}}}function hI(r,a,l){Zr.S(r,a,l);var u=xl;if(u&&r){var p=Ji(u).hoistableStyles,y=Tl(r);a=a||"default";var x=p.get(y);if(!x){var C={loading:0,preload:null};if(x=u.querySelector(ou(y)))C.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":a},l),(l=gi.get(y))&&Rg(r,l);var F=x=u.createElement("link");Bt(F),mn(F,"link",r),F._p=new Promise(function(Q,ie){F.onload=Q,F.onerror=ie}),F.addEventListener("load",function(){C.loading|=1}),F.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Oh(x,a,u)}x={type:"stylesheet",instance:x,count:1,state:C},p.set(y,x)}}}function fI(r,a){Zr.X(r,a);var l=xl;if(l&&r){var u=Ji(l).hoistableScripts,p=El(r),y=u.get(p);y||(y=l.querySelector(lu(p)),y||(r=v({src:r,async:!0},a),(a=gi.get(p))&&Ng(r,a),y=l.createElement("script"),Bt(y),mn(y,"link",r),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function mI(r,a){Zr.M(r,a);var l=xl;if(l&&r){var u=Ji(l).hoistableScripts,p=El(r),y=u.get(p);y||(y=l.querySelector(lu(p)),y||(r=v({src:r,async:!0,type:"module"},a),(a=gi.get(p))&&Ng(r,a),y=l.createElement("script"),Bt(y),mn(y,"link",r),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function pw(r,a,l,u){var p=(p=xe.current)?Mh(p):null;if(!p)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Tl(l.href),l=Ji(p).hoistableStyles,u=l.get(a),u||(u={type:"style",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=Tl(l.href);var y=Ji(p).hoistableStyles,x=y.get(r);if(x||(p=p.ownerDocument||p,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,x),(y=p.querySelector(ou(r)))&&!y._p&&(x.instance=y,x.state.loading=5),gi.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},gi.set(r,l),y||pI(p,r,l,x.state))),a&&u===null)throw Error(i(528,""));return x}if(a&&u!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=El(l),l=Ji(p).hoistableScripts,u=l.get(a),u||(u={type:"script",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Tl(r){return'href="'+On(r)+'"'}function ou(r){return'link[rel="stylesheet"]['+r+"]"}function gw(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function pI(r,a,l,u){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=r.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),mn(a,"link",l),Bt(a),r.head.appendChild(a))}function El(r){return'[src="'+On(r)+'"]'}function lu(r){return"script[async]"+r}function yw(r,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var u=r.querySelector('style[data-href~="'+On(l.href)+'"]');if(u)return a.instance=u,Bt(u),u;var p=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Bt(u),mn(u,"style",p),Oh(u,l.precedence,r),a.instance=u;case"stylesheet":p=Tl(l.href);var y=r.querySelector(ou(p));if(y)return a.state.loading|=4,a.instance=y,Bt(y),y;u=gw(l),(p=gi.get(p))&&Rg(u,p),y=(r.ownerDocument||r).createElement("link"),Bt(y);var x=y;return x._p=new Promise(function(C,F){x.onload=C,x.onerror=F}),mn(y,"link",u),a.state.loading|=4,Oh(y,l.precedence,r),a.instance=y;case"script":return y=El(l.src),(p=r.querySelector(lu(y)))?(a.instance=p,Bt(p),p):(u=l,(p=gi.get(y))&&(u=v({},l),Ng(u,p)),r=r.ownerDocument||r,p=r.createElement("script"),Bt(p),mn(p,"link",u),r.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,Oh(u,l.precedence,r));return a.instance}function Oh(r,a,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,y=p,x=0;x<u.length;x++){var C=u[x];if(C.dataset.precedence===a)y=C;else if(y!==p)break}y?y.parentNode.insertBefore(r,y.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(r,a.firstChild))}function Rg(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function Ng(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var Vh=null;function vw(r,a,l){if(Vh===null){var u=new Map,p=Vh=new Map;p.set(l,u)}else p=Vh,u=p.get(l),u||(u=new Map,p.set(l,u));if(u.has(r))return u;for(u.set(r,null),l=l.getElementsByTagName(r),p=0;p<l.length;p++){var y=l[p];if(!(y[Wi]||y[Ft]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var x=y.getAttribute(a)||"";x=r+x;var C=u.get(x);C?C.push(y):u.set(x,[y])}}return u}function bw(r,a,l){r=r.ownerDocument||r,r.head.insertBefore(l,a==="title"?r.querySelector("head > title"):null)}function gI(r,a,l){if(l===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function _w(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function yI(r,a,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=Tl(u.href),y=a.querySelector(ou(p));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=Ph.bind(r),a.then(r,r)),l.state.loading|=4,l.instance=y,Bt(y);return}y=a.ownerDocument||a,u=gw(u),(p=gi.get(p))&&Rg(u,p),y=y.createElement("link"),Bt(y);var x=y;x._p=new Promise(function(C,F){x.onload=C,x.onerror=F}),mn(y,"link",u),l.instance=y}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(r.count++,l=Ph.bind(r),a.addEventListener("load",l),a.addEventListener("error",l))}}var Ig=0;function vI(r,a){return r.stylesheets&&r.count===0&&Lh(r,r.stylesheets),0<r.count||0<r.imgCount?function(l){var u=setTimeout(function(){if(r.stylesheets&&Lh(r,r.stylesheets),r.unsuspend){var y=r.unsuspend;r.unsuspend=null,y()}},6e4+a);0<r.imgBytes&&Ig===0&&(Ig=62500*ZN());var p=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Lh(r,r.stylesheets),r.unsuspend)){var y=r.unsuspend;r.unsuspend=null,y()}},(r.imgBytes>Ig?50:800)+a);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function Ph(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Lh(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var jh=null;function Lh(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,jh=new Map,a.forEach(bI,r),jh=null,Ph.call(r))}function bI(r,a){if(!(a.state.loading&4)){var l=jh.get(r);if(l)var u=l.get(null);else{l=new Map,jh.set(r,l);for(var p=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var x=p[y];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(l.set(x.dataset.precedence,x),u=x)}u&&l.set(null,u)}p=a.instance,x=p.getAttribute("data-precedence"),y=l.get(x)||u,y===u&&l.set(null,p),l.set(x,p),this.count++,u=Ph.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),y?y.parentNode.insertBefore(p,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(p,r.firstChild)),a.state.loading|=4}}var cu={$$typeof:L,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function _I(r,a,l,u,p,y,x,C,F){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qi(0),this.hiddenUpdates=Qi(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function ww(r,a,l,u,p,y,x,C,F,Q,ie,oe){return r=new _I(r,a,l,x,F,Q,ie,oe,C),a=1,y===!0&&(a|=24),y=Wn(3,null,null,a),r.current=y,y.stateNode=r,a=cp(),a.refCount++,r.pooledCache=a,a.refCount++,y.memoizedState={element:u,isDehydrated:l,cache:a},fp(y),r}function xw(r){return r?(r=tl,r):tl}function Tw(r,a,l,u,p,y){p=xw(p),u.context===null?u.context=p:u.pendingContext=p,u=Us(a),u.payload={element:l},y=y===void 0?null:y,y!==null&&(u.callback=y),l=zs(r,u,a),l!==null&&(zn(l,r,a),Fc(l,r,a))}function Ew(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<a?l:a}}function kg(r,a){Ew(r,a),(r=r.alternate)&&Ew(r,a)}function Sw(r){if(r.tag===13||r.tag===31){var a=eo(r,67108864);a!==null&&zn(a,r,67108864),kg(r,67108864)}}function Aw(r){if(r.tag===13||r.tag===31){var a=ni();a=Ba(a);var l=eo(r,a);l!==null&&zn(l,r,a),kg(r,a)}}var Uh=!0;function wI(r,a,l,u){var p=G.T;G.T=null;var y=ee.p;try{ee.p=2,Dg(r,a,l,u)}finally{ee.p=y,G.T=p}}function xI(r,a,l,u){var p=G.T;G.T=null;var y=ee.p;try{ee.p=8,Dg(r,a,l,u)}finally{ee.p=y,G.T=p}}function Dg(r,a,l,u){if(Uh){var p=Mg(u);if(p===null)vg(r,a,u,zh,l),Rw(r,u);else if(EI(p,r,a,l,u))u.stopPropagation();else if(Rw(r,u),a&4&&-1<TI.indexOf(r)){for(;p!==null;){var y=si(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var x=Ki(y.pendingLanes);if(x!==0){var C=y;for(C.pendingLanes|=2,C.entangledLanes|=2;x;){var F=1<<31-Rt(x);C.entanglements[1]|=F,x&=~F}hr(y),(it&6)===0&&(xh=ln()+500,iu(0))}}break;case 31:case 13:C=eo(y,2),C!==null&&zn(C,y,2),Eh(),kg(y,2)}if(y=Mg(u),y===null&&vg(r,a,u,zh,l),y===p)break;p=y}p!==null&&u.stopPropagation()}else vg(r,a,u,null,l)}}function Mg(r){return r=ai(r),Og(r)}var zh=null;function Og(r){if(zh=null,r=Zi(r),r!==null){var a=o(r);if(a===null)r=null;else{var l=a.tag;if(l===13){if(r=c(a),r!==null)return r;r=null}else if(l===31){if(r=d(a),r!==null)return r;r=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return zh=r,null}function Cw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Mr()){case Pa:return 2;case ja:return 8;case $i:case fc:return 32;case Te:return 268435456;default:return 32}default:return 32}}var Vg=!1,Ws=null,Zs=null,Js=null,uu=new Map,du=new Map,ea=[],TI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rw(r,a){switch(r){case"focusin":case"focusout":Ws=null;break;case"dragenter":case"dragleave":Zs=null;break;case"mouseover":case"mouseout":Js=null;break;case"pointerover":case"pointerout":uu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":du.delete(a.pointerId)}}function hu(r,a,l,u,p,y){return r===null||r.nativeEvent!==y?(r={blockedOn:a,domEventName:l,eventSystemFlags:u,nativeEvent:y,targetContainers:[p]},a!==null&&(a=si(a),a!==null&&Sw(a)),r):(r.eventSystemFlags|=u,a=r.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),r)}function EI(r,a,l,u,p){switch(a){case"focusin":return Ws=hu(Ws,r,a,l,u,p),!0;case"dragenter":return Zs=hu(Zs,r,a,l,u,p),!0;case"mouseover":return Js=hu(Js,r,a,l,u,p),!0;case"pointerover":var y=p.pointerId;return uu.set(y,hu(uu.get(y)||null,r,a,l,u,p)),!0;case"gotpointercapture":return y=p.pointerId,du.set(y,hu(du.get(y)||null,r,a,l,u,p)),!0}return!1}function Nw(r){var a=Zi(r.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){r.blockedOn=a,Ci(r.priority,function(){Aw(l)});return}}else if(a===31){if(a=d(l),a!==null){r.blockedOn=a,Ci(r.priority,function(){Aw(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Fh(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var l=Mg(r.nativeEvent);if(l===null){l=r.nativeEvent;var u=new l.constructor(l.type,l);Sc=u,l.target.dispatchEvent(u),Sc=null}else return a=si(l),a!==null&&Sw(a),r.blockedOn=l,!1;a.shift()}return!0}function Iw(r,a,l){Fh(r)&&l.delete(a)}function SI(){Vg=!1,Ws!==null&&Fh(Ws)&&(Ws=null),Zs!==null&&Fh(Zs)&&(Zs=null),Js!==null&&Fh(Js)&&(Js=null),uu.forEach(Iw),du.forEach(Iw)}function Bh(r,a){r.blockedOn===a&&(r.blockedOn=null,Vg||(Vg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,SI)))}var qh=null;function kw(r){qh!==r&&(qh=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){qh===r&&(qh=null);for(var a=0;a<r.length;a+=3){var l=r[a],u=r[a+1],p=r[a+2];if(typeof u!="function"){if(Og(u||l)===null)continue;break}var y=si(l);y!==null&&(r.splice(a,3),a-=3,Mp(y,{pending:!0,data:p,method:l.method,action:u},u,p))}}))}function Sl(r){function a(F){return Bh(F,r)}Ws!==null&&Bh(Ws,r),Zs!==null&&Bh(Zs,r),Js!==null&&Bh(Js,r),uu.forEach(a),du.forEach(a);for(var l=0;l<ea.length;l++){var u=ea[l];u.blockedOn===r&&(u.blockedOn=null)}for(;0<ea.length&&(l=ea[0],l.blockedOn===null);)Nw(l),l.blockedOn===null&&ea.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var p=l[u],y=l[u+1],x=p[rn]||null;if(typeof y=="function")x||kw(l);else if(x){var C=null;if(y&&y.hasAttribute("formAction")){if(p=y,x=y[rn]||null)C=x.formAction;else if(Og(p)!==null)continue}else C=x.action;typeof C=="function"?l[u+1]=C:(l.splice(u,3),u-=3),kw(l)}}}function Dw(){function r(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(x){return p=x})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function Pg(r){this._internalRoot=r}Hh.prototype.render=Pg.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,u=ni();Tw(l,u,r,a,null,null)},Hh.prototype.unmount=Pg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;Tw(r.current,2,null,r,null,null),Eh(),a[Xi]=null}};function Hh(r){this._internalRoot=r}Hh.prototype.unstable_scheduleHydration=function(r){if(r){var a=Ed();r={blockedOn:null,target:r,priority:a};for(var l=0;l<ea.length&&a!==0&&a<ea[l].priority;l++);ea.splice(l,0,r),l===0&&Nw(r)}};var Mw=e.version;if(Mw!=="19.2.0")throw Error(i(527,Mw,"19.2.0"));ee.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(a),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var AI={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$h.isDisabled&&$h.supportsFiber)try{Zt=$h.inject(AI),Et=$h}catch{}}return mu.createRoot=function(r,a){if(!s(r))throw Error(i(299));var l=!1,u="",p=z1,y=F1,x=B1;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=ww(r,1,!1,null,null,l,u,null,p,y,x,Dw),r[Xi]=a.current,yg(r),new Pg(a)},mu.hydrateRoot=function(r,a,l){if(!s(r))throw Error(i(299));var u=!1,p="",y=z1,x=F1,C=B1,F=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.formState!==void 0&&(F=l.formState)),a=ww(r,1,!0,a,l??null,u,p,F,y,x,C,Dw),a.context=xw(null),l=a.current,u=ni(),u=Ba(u),p=Us(u),p.callback=null,zs(l,p,u),l=u,a.current.lanes=l,za(a,l),hr(a),r[Xi]=a.current,yg(r),new Hh(a)},mu.version="19.2.0",mu}var qw;function jI(){if(qw)return Ug.exports;qw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ug.exports=PI(),Ug.exports}var LI=jI();const UI="modulepreload",zI=function(t){return"/personal-budget-pwa/"+t},Hw={},FI=function(e,n,i){let s=Promise.resolve();if(n&&n.length>0){let f=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};var c=f;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=d?.nonce||d?.getAttribute("nonce");s=f(n.map(g=>{if(g=zI(g),g in Hw)return;Hw[g]=!0;const v=g.endsWith(".css"),_=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${_}`))return;const E=document.createElement("link");if(E.rel=v?"stylesheet":UI,v||(E.as="script"),E.crossOrigin="",E.href=g,h&&E.setAttribute("nonce",h),document.head.appendChild(E),v)return new Promise((N,A)=>{E.addEventListener("load",N),E.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return s.then(d=>{for(const h of d||[])h.status==="rejected"&&o(h.reason);return e().catch(o)})};function BI(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:s,onRegisteredSW:o,onRegisterError:c}=t;let d,h;const f=async(v=!0)=>{await h};async function g(){if("serviceWorker"in navigator){if(d=await FI(async()=>{const{Workbox:v}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:v}},[]).then(({Workbox:v})=>new v("/personal-budget-pwa/sw.js",{scope:"/personal-budget-pwa/",type:"classic"})).catch(v=>{c?.(v)}),!d)return;d.addEventListener("activated",v=>{(v.isUpdate||v.isExternal)&&window.location.reload()}),d.addEventListener("installed",v=>{v.isUpdate||i?.()}),d.register({immediate:e}).then(v=>{o?o("/personal-budget-pwa/sw.js",v):s?.(v)}).catch(v=>{c?.(v)})}}return h=g(),f}var $w="popstate";function qI(t={}){function e(s,o){let{pathname:c="/",search:d="",hash:h=""}=Oo(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),S0("",{pathname:c,search:d,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){let c=s.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let h=s.location.href,f=h.indexOf("#");d=f===-1?h:h.slice(0,f)}return d+"#"+(typeof o=="string"?o:Pu(o))}function i(s,o){Si(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return $I(e,n,i,t)}function St(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Si(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HI(){return Math.random().toString(36).substring(2,10)}function Gw(t,e){return{usr:t.state,key:t.key,idx:e}}function S0(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Oo(e):e,state:n,key:e&&e.key||i||HI()}}function Pu({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Oo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function $I(t,e,n,i={}){let{window:s=document.defaultView,v5Compat:o=!1}=i,c=s.history,d="POP",h=null,f=g();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function g(){return(c.state||{idx:null}).idx}function v(){d="POP";let R=g(),P=R==null?null:R-f;f=R,h&&h({action:d,location:A.location,delta:P})}function _(R,P){d="PUSH";let U=S0(A.location,R,P);n&&n(U,R),f=g()+1;let L=Gw(U,f),$=A.createHref(U);try{c.pushState(L,"",$)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;s.location.assign($)}o&&h&&h({action:d,location:A.location,delta:1})}function E(R,P){d="REPLACE";let U=S0(A.location,R,P);n&&n(U,R),f=g();let L=Gw(U,f),$=A.createHref(U);c.replaceState(L,"",$),o&&h&&h({action:d,location:A.location,delta:0})}function N(R){return GI(R)}let A={get action(){return d},get location(){return t(s,c)},listen(R){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener($w,v),h=R,()=>{s.removeEventListener($w,v),h=null}},createHref(R){return e(s,R)},createURL:N,encodeLocation(R){let P=N(R);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:_,replace:E,go(R){return c.go(R)}};return A}function GI(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),St(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Pu(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function aS(t,e,n="/"){return KI(t,e,n,!1)}function KI(t,e,n,i){let s=typeof e=="string"?Oo(e):e,o=ls(s.pathname||"/",n);if(o==null)return null;let c=oS(t);YI(c);let d=null;for(let h=0;d==null&&h<c.length;++h){let f=sk(o);d=ik(c[h],f,i)}return d}function oS(t,e=[],n=[],i="",s=!1){let o=(c,d,h=s,f)=>{let g={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&h)return;St(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let v=ss([i,g.relativePath]),_=n.concat(g);c.children&&c.children.length>0&&(St(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),oS(c.children,e,_,v,h)),!(c.path==null&&!c.index)&&e.push({path:v,score:tk(v,c.index),routesMeta:_})};return t.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))o(c,d);else for(let h of lS(c.path))o(c,d,!0,h)}),e}function lS(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let c=lS(i.join("/")),d=[];return d.push(...c.map(h=>h===""?o:[o,h].join("/"))),s&&d.push(...c),d.map(h=>t.startsWith("/")&&h===""?"/":h)}function YI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:nk(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var QI=/^:[\w-]+$/,XI=3,WI=2,ZI=1,JI=10,ek=-2,Kw=t=>t==="*";function tk(t,e){let n=t.split("/"),i=n.length;return n.some(Kw)&&(i+=ek),e&&(i+=WI),n.filter(s=>!Kw(s)).reduce((s,o)=>s+(QI.test(o)?XI:o===""?ZI:JI),i)}function nk(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function ik(t,e,n=!1){let{routesMeta:i}=t,s={},o="/",c=[];for(let d=0;d<i.length;++d){let h=i[d],f=d===i.length-1,g=o==="/"?e:e.slice(o.length)||"/",v=Sf({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},g),_=h.route;if(!v&&f&&n&&!i[i.length-1].route.index&&(v=Sf({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!v)return null;Object.assign(s,v.params),c.push({params:s,pathname:ss([o,v.pathname]),pathnameBase:uk(ss([o,v.pathnameBase])),route:_}),v.pathnameBase!=="/"&&(o=ss([o,v.pathnameBase]))}return c}function Sf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=rk(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],c=o.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:i.reduce((f,{paramName:g,isOptional:v},_)=>{if(g==="*"){let N=d[_]||"";c=o.slice(0,o.length-N.length).replace(/(.)\/+$/,"$1")}const E=d[_];return v&&!E?f[g]=void 0:f[g]=(E||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:t}}function rk(t,e=!1,n=!0){Si(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,h)=>(i.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function sk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Si(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ls(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}var ak=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ok=t=>ak.test(t);function lk(t,e="/"){let{pathname:n,search:i="",hash:s=""}=typeof t=="string"?Oo(t):t,o;if(n)if(ok(n))o=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),Si(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${n}`)}n.startsWith("/")?o=Yw(n.substring(1),"/"):o=Yw(n,e)}else o=e;return{pathname:o,search:dk(i),hash:hk(s)}}function Yw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function qg(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ck(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function cS(t){let e=ck(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function uS(t,e,n,i=!1){let s;typeof t=="string"?s=Oo(t):(s={...t},St(!s.pathname||!s.pathname.includes("?"),qg("?","pathname","search",s)),St(!s.pathname||!s.pathname.includes("#"),qg("#","pathname","hash",s)),St(!s.search||!s.search.includes("#"),qg("#","search","hash",s)));let o=t===""||s.pathname==="",c=o?"/":s.pathname,d;if(c==null)d=n;else{let v=e.length-1;if(!i&&c.startsWith("..")){let _=c.split("/");for(;_[0]==="..";)_.shift(),v-=1;s.pathname=_.join("/")}d=v>=0?e[v]:"/"}let h=lk(s,d),f=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||g)&&(h.pathname+="/"),h}var ss=t=>t.join("/").replace(/\/\/+/g,"/"),uk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),dk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,hk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function fk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var dS=["POST","PUT","PATCH","DELETE"];new Set(dS);var mk=["GET",...dS];new Set(mk);var tc=D.createContext(null);tc.displayName="DataRouter";var nm=D.createContext(null);nm.displayName="DataRouterState";D.createContext(!1);var hS=D.createContext({isTransitioning:!1});hS.displayName="ViewTransition";var pk=D.createContext(new Map);pk.displayName="Fetchers";var gk=D.createContext(null);gk.displayName="Await";var Rr=D.createContext(null);Rr.displayName="Navigation";var td=D.createContext(null);td.displayName="Location";var Nr=D.createContext({outlet:null,matches:[],isDataRoute:!1});Nr.displayName="Route";var Cy=D.createContext(null);Cy.displayName="RouteError";function yk(t,{relative:e}={}){St(nd(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=D.useContext(Rr),{hash:s,pathname:o,search:c}=id(t,{relative:e}),d=o;return n!=="/"&&(d=o==="/"?n:ss([n,o])),i.createHref({pathname:d,search:c,hash:s})}function nd(){return D.useContext(td)!=null}function ys(){return St(nd(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(td).location}var fS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mS(t){D.useContext(Rr).static||D.useLayoutEffect(t)}function vs(){let{isDataRoute:t}=D.useContext(Nr);return t?kk():vk()}function vk(){St(nd(),"useNavigate() may be used only in the context of a <Router> component.");let t=D.useContext(tc),{basename:e,navigator:n}=D.useContext(Rr),{matches:i}=D.useContext(Nr),{pathname:s}=ys(),o=JSON.stringify(cS(i)),c=D.useRef(!1);return mS(()=>{c.current=!0}),D.useCallback((h,f={})=>{if(Si(c.current,fS),!c.current)return;if(typeof h=="number"){n.go(h);return}let g=uS(h,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:ss([e,g.pathname])),(f.replace?n.replace:n.push)(g,f.state,f)},[e,n,o,s,t])}D.createContext(null);function bk(){let{matches:t}=D.useContext(Nr),e=t[t.length-1];return e?e.params:{}}function id(t,{relative:e}={}){let{matches:n}=D.useContext(Nr),{pathname:i}=ys(),s=JSON.stringify(cS(n));return D.useMemo(()=>uS(t,JSON.parse(s),i,e==="path"),[t,s,i,e])}function _k(t,e){return pS(t,e)}function pS(t,e,n,i,s){St(nd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=D.useContext(Rr),{matches:c}=D.useContext(Nr),d=c[c.length-1],h=d?d.params:{},f=d?d.pathname:"/",g=d?d.pathnameBase:"/",v=d&&d.route;{let U=v&&v.path||"";gS(f,!v||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let _=ys(),E;if(e){let U=typeof e=="string"?Oo(e):e;St(g==="/"||U.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${U.pathname}" was given in the \`location\` prop.`),E=U}else E=_;let N=E.pathname||"/",A=N;if(g!=="/"){let U=g.replace(/^\//,"").split("/");A="/"+N.replace(/^\//,"").split("/").slice(U.length).join("/")}let R=aS(t,{pathname:A});Si(v||R!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Si(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=Sk(R&&R.map(U=>Object.assign({},U,{params:Object.assign({},h,U.params),pathname:ss([g,o.encodeLocation?o.encodeLocation(U.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?g:ss([g,o.encodeLocation?o.encodeLocation(U.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathnameBase])})),c,n,i,s);return e&&P?D.createElement(td.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},P):P}function wk(){let t=Ik(),e=fk(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=D.createElement(D.Fragment,null,D.createElement("p",null," Hey developer "),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:o},"ErrorBoundary")," or"," ",D.createElement("code",{style:o},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,c)}var xk=D.createElement(wk,null),Tk=class extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?D.createElement(Nr.Provider,{value:this.props.routeContext},D.createElement(Cy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ek({routeContext:t,match:e,children:n}){let i=D.useContext(tc);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(Nr.Provider,{value:t},n)}function Sk(t,e=[],n=null,i=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=n?.errors;if(c!=null){let g=o.findIndex(v=>v.route.id&&c?.[v.route.id]!==void 0);St(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let d=!1,h=-1;if(n)for(let g=0;g<o.length;g++){let v=o[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(h=g),v.route.id){let{loaderData:_,errors:E}=n,N=v.route.loader&&!_.hasOwnProperty(v.route.id)&&(!E||E[v.route.id]===void 0);if(v.route.lazy||N){d=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}let f=n&&i?(g,v)=>{i(g,{location:n.location,params:n.matches?.[0]?.params??{},errorInfo:v})}:void 0;return o.reduceRight((g,v,_)=>{let E,N=!1,A=null,R=null;n&&(E=c&&v.route.id?c[v.route.id]:void 0,A=v.route.errorElement||xk,d&&(h<0&&_===0?(gS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,R=null):h===_&&(N=!0,R=v.route.hydrateFallbackElement||null)));let P=e.concat(o.slice(0,_+1)),U=()=>{let L;return E?L=A:N?L=R:v.route.Component?L=D.createElement(v.route.Component,null):v.route.element?L=v.route.element:L=g,D.createElement(Ek,{match:v,routeContext:{outlet:g,matches:P,isDataRoute:n!=null},children:L})};return n&&(v.route.ErrorBoundary||v.route.errorElement||_===0)?D.createElement(Tk,{location:n.location,revalidation:n.revalidation,component:A,error:E,children:U(),routeContext:{outlet:null,matches:P,isDataRoute:!0},onError:f}):U()},null)}function Ry(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ak(t){let e=D.useContext(tc);return St(e,Ry(t)),e}function Ck(t){let e=D.useContext(nm);return St(e,Ry(t)),e}function Rk(t){let e=D.useContext(Nr);return St(e,Ry(t)),e}function Ny(t){let e=Rk(t),n=e.matches[e.matches.length-1];return St(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Nk(){return Ny("useRouteId")}function Ik(){let t=D.useContext(Cy),e=Ck("useRouteError"),n=Ny("useRouteError");return t!==void 0?t:e.errors?.[n]}function kk(){let{router:t}=Ak("useNavigate"),e=Ny("useNavigate"),n=D.useRef(!1);return mS(()=>{n.current=!0}),D.useCallback(async(s,o={})=>{Si(n.current,fS),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...o}))},[t,e])}var Qw={};function gS(t,e,n){!e&&!Qw[t]&&(Qw[t]=!0,Si(!1,n))}D.memo(Dk);function Dk({routes:t,future:e,state:n,unstable_onError:i}){return pS(t,void 0,n,i,e)}function sa(t){St(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Mk({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:s,static:o=!1}){St(!nd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),d=D.useMemo(()=>({basename:c,navigator:s,static:o,future:{}}),[c,s,o]);typeof n=="string"&&(n=Oo(n));let{pathname:h="/",search:f="",hash:g="",state:v=null,key:_="default"}=n,E=D.useMemo(()=>{let N=ls(h,c);return N==null?null:{location:{pathname:N,search:f,hash:g,state:v,key:_},navigationType:i}},[c,h,f,g,v,_,i]);return Si(E!=null,`<Router basename="${c}"> is not able to match the URL "${h}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:D.createElement(Rr.Provider,{value:d},D.createElement(td.Provider,{children:e,value:E}))}function Ok({children:t,location:e}){return _k(A0(t),e)}function A0(t,e=[]){let n=[];return D.Children.forEach(t,(i,s)=>{if(!D.isValidElement(i))return;let o=[...e,s];if(i.type===D.Fragment){n.push.apply(n,A0(i.props.children,o));return}St(i.type===sa,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),St(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=A0(i.props.children,o)),n.push(c)}),n}var af="get",of="application/x-www-form-urlencoded";function im(t){return t!=null&&typeof t.tagName=="string"}function Vk(t){return im(t)&&t.tagName.toLowerCase()==="button"}function Pk(t){return im(t)&&t.tagName.toLowerCase()==="form"}function jk(t){return im(t)&&t.tagName.toLowerCase()==="input"}function Lk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Uk(t,e){return t.button===0&&(!e||e==="_self")&&!Lk(t)}var Kh=null;function zk(){if(Kh===null)try{new FormData(document.createElement("form"),0),Kh=!1}catch{Kh=!0}return Kh}var Fk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hg(t){return t!=null&&!Fk.has(t)?(Si(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${of}"`),null):t}function Bk(t,e){let n,i,s,o,c;if(Pk(t)){let d=t.getAttribute("action");i=d?ls(d,e):null,n=t.getAttribute("method")||af,s=Hg(t.getAttribute("enctype"))||of,o=new FormData(t)}else if(Vk(t)||jk(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=t.getAttribute("formaction")||d.getAttribute("action");if(i=h?ls(h,e):null,n=t.getAttribute("formmethod")||d.getAttribute("method")||af,s=Hg(t.getAttribute("formenctype"))||Hg(d.getAttribute("enctype"))||of,o=new FormData(d,t),!zk()){let{name:f,type:g,value:v}=t;if(g==="image"){let _=f?`${f}.`:"";o.append(`${_}x`,"0"),o.append(`${_}y`,"0")}else f&&o.append(f,v)}}else{if(im(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=af,i=null,s=of,c=t}return o&&s==="text/plain"&&(c=o,o=void 0),{action:i,method:n.toLowerCase(),encType:s,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Iy(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function qk(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&ls(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function Hk(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function $k(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Gk(t,e,n){let i=await Promise.all(t.map(async s=>{let o=e.routes[s.route.id];if(o){let c=await Hk(o,n);return c.links?c.links():[]}return[]}));return Xk(i.flat(1).filter($k).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Xw(t,e,n,i,s,o){let c=(h,f)=>n[f]?h.route.id!==n[f].route.id:!0,d=(h,f)=>n[f].pathname!==h.pathname||n[f].route.path?.endsWith("*")&&n[f].params["*"]!==h.params["*"];return o==="assets"?e.filter((h,f)=>c(h,f)||d(h,f)):o==="data"?e.filter((h,f)=>{let g=i.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(c(h,f)||d(h,f))return!0;if(h.route.shouldRevalidate){let v=h.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function Kk(t,e,{includeHydrateFallback:n}={}){return Yk(t.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function Yk(t){return[...new Set(t)]}function Qk(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function Xk(t,e){let n=new Set;return new Set(e),t.reduce((i,s)=>{let o=JSON.stringify(Qk(s));return n.has(o)||(n.add(o),i.push({key:o,link:s})),i},[])}function yS(){let t=D.useContext(tc);return Iy(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Wk(){let t=D.useContext(nm);return Iy(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var ky=D.createContext(void 0);ky.displayName="FrameworkContext";function vS(){let t=D.useContext(ky);return Iy(t,"You must render this element inside a <HydratedRouter> element"),t}function Zk(t,e){let n=D.useContext(ky),[i,s]=D.useState(!1),[o,c]=D.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:f,onMouseLeave:g,onTouchStart:v}=e,_=D.useRef(null);D.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let A=P=>{P.forEach(U=>{c(U.isIntersecting)})},R=new IntersectionObserver(A,{threshold:.5});return _.current&&R.observe(_.current),()=>{R.disconnect()}}},[t]),D.useEffect(()=>{if(i){let A=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(A)}}},[i]);let E=()=>{s(!0)},N=()=>{s(!1),c(!1)};return n?t!=="intent"?[o,_,{}]:[o,_,{onFocus:pu(d,E),onBlur:pu(h,N),onMouseEnter:pu(f,E),onMouseLeave:pu(g,N),onTouchStart:pu(v,E)}]:[!1,_,{}]}function pu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Jk({page:t,...e}){let{router:n}=yS(),i=D.useMemo(()=>aS(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?D.createElement(tD,{page:t,matches:i,...e}):null}function eD(t){let{manifest:e,routeModules:n}=vS(),[i,s]=D.useState([]);return D.useEffect(()=>{let o=!1;return Gk(t,e,n).then(c=>{o||s(c)}),()=>{o=!0}},[t,e,n]),i}function tD({page:t,matches:e,...n}){let i=ys(),{manifest:s,routeModules:o}=vS(),{basename:c}=yS(),{loaderData:d,matches:h}=Wk(),f=D.useMemo(()=>Xw(t,e,h,s,i,"data"),[t,e,h,s,i]),g=D.useMemo(()=>Xw(t,e,h,s,i,"assets"),[t,e,h,s,i]),v=D.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let N=new Set,A=!1;if(e.forEach(P=>{let U=s.routes[P.route.id];!U||!U.hasLoader||(!f.some(L=>L.route.id===P.route.id)&&P.route.id in d&&o[P.route.id]?.shouldRevalidate||U.hasClientLoader?A=!0:N.add(P.route.id))}),N.size===0)return[];let R=qk(t,c,"data");return A&&N.size>0&&R.searchParams.set("_routes",e.filter(P=>N.has(P.route.id)).map(P=>P.route.id).join(",")),[R.pathname+R.search]},[c,d,i,s,f,e,t,o]),_=D.useMemo(()=>Kk(g,s),[g,s]),E=eD(g);return D.createElement(D.Fragment,null,v.map(N=>D.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...n})),_.map(N=>D.createElement("link",{key:N,rel:"modulepreload",href:N,...n})),E.map(({key:N,link:A})=>D.createElement("link",{key:N,nonce:n.nonce,...A})))}function nD(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var bS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{bS&&(window.__reactRouterVersion="7.9.6")}catch{}function iD({basename:t,children:e,window:n}){let i=D.useRef();i.current==null&&(i.current=qI({window:n,v5Compat:!0}));let s=i.current,[o,c]=D.useState({action:s.action,location:s.location}),d=D.useCallback(h=>{D.startTransition(()=>c(h))},[c]);return D.useLayoutEffect(()=>s.listen(d),[s,d]),D.createElement(Mk,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s})}var _S=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wS=D.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:s,reloadDocument:o,replace:c,state:d,target:h,to:f,preventScrollReset:g,viewTransition:v,..._},E){let{basename:N}=D.useContext(Rr),A=typeof f=="string"&&_S.test(f),R,P=!1;if(typeof f=="string"&&A&&(R=f,bS))try{let M=new URL(window.location.href),z=f.startsWith("//")?new URL(M.protocol+f):new URL(f),O=ls(z.pathname,N);z.origin===M.origin&&O!=null?f=O+z.search+z.hash:P=!0}catch{Si(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let U=yk(f,{relative:s}),[L,$,te]=Zk(i,_),ne=oD(f,{replace:c,state:d,target:h,preventScrollReset:g,relative:s,viewTransition:v});function S(M){e&&e(M),M.defaultPrevented||ne(M)}let I=D.createElement("a",{..._,...te,href:R||U,onClick:P||o?e:S,ref:nD(E,$),target:h,"data-discover":!A&&n==="render"?"true":void 0});return L&&!A?D.createElement(D.Fragment,null,I,D.createElement(Jk,{page:U})):I});wS.displayName="Link";var rD=D.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:s=!1,style:o,to:c,viewTransition:d,children:h,...f},g){let v=id(c,{relative:f.relative}),_=ys(),E=D.useContext(nm),{navigator:N,basename:A}=D.useContext(Rr),R=E!=null&&hD(v)&&d===!0,P=N.encodeLocation?N.encodeLocation(v).pathname:v.pathname,U=_.pathname,L=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;n||(U=U.toLowerCase(),L=L?L.toLowerCase():null,P=P.toLowerCase()),L&&A&&(L=ls(L,A)||L);const $=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let te=U===P||!s&&U.startsWith(P)&&U.charAt($)==="/",ne=L!=null&&(L===P||!s&&L.startsWith(P)&&L.charAt(P.length)==="/"),S={isActive:te,isPending:ne,isTransitioning:R},I=te?e:void 0,M;typeof i=="function"?M=i(S):M=[i,te?"active":null,ne?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let z=typeof o=="function"?o(S):o;return D.createElement(wS,{...f,"aria-current":I,className:M,ref:g,style:z,to:c,viewTransition:d},typeof h=="function"?h(S):h)});rD.displayName="NavLink";var sD=D.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:s,state:o,method:c=af,action:d,onSubmit:h,relative:f,preventScrollReset:g,viewTransition:v,..._},E)=>{let N=uD(),A=dD(d,{relative:f}),R=c.toLowerCase()==="get"?"get":"post",P=typeof d=="string"&&_S.test(d),U=L=>{if(h&&h(L),L.defaultPrevented)return;L.preventDefault();let $=L.nativeEvent.submitter,te=$?.getAttribute("formmethod")||c;N($||L.currentTarget,{fetcherKey:e,method:te,navigate:n,replace:s,state:o,relative:f,preventScrollReset:g,viewTransition:v})};return D.createElement("form",{ref:E,method:R,action:A,onSubmit:i?h:U,..._,"data-discover":!P&&t==="render"?"true":void 0})});sD.displayName="Form";function aD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xS(t){let e=D.useContext(tc);return St(e,aD(t)),e}function oD(t,{target:e,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:c}={}){let d=vs(),h=ys(),f=id(t,{relative:o});return D.useCallback(g=>{if(Uk(g,e)){g.preventDefault();let v=n!==void 0?n:Pu(h)===Pu(f);d(t,{replace:v,state:i,preventScrollReset:s,relative:o,viewTransition:c})}},[h,d,f,n,i,e,t,s,o,c])}var lD=0,cD=()=>`__${String(++lD)}__`;function uD(){let{router:t}=xS("useSubmit"),{basename:e}=D.useContext(Rr),n=Nk();return D.useCallback(async(i,s={})=>{let{action:o,method:c,encType:d,formData:h,body:f}=Bk(i,e);if(s.navigate===!1){let g=s.fetcherKey||cD();await t.fetch(g,n,s.action||o,{preventScrollReset:s.preventScrollReset,formData:h,body:f,formMethod:s.method||c,formEncType:s.encType||d,flushSync:s.flushSync})}else await t.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:h,body:f,formMethod:s.method||c,formEncType:s.encType||d,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function dD(t,{relative:e}={}){let{basename:n}=D.useContext(Rr),i=D.useContext(Nr);St(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),o={...id(t||".",{relative:e})},c=ys();if(t==null){o.search=c.search;let d=new URLSearchParams(o.search),h=d.getAll("index");if(h.some(g=>g==="")){d.delete("index"),h.filter(v=>v).forEach(v=>d.append("index",v));let g=d.toString();o.search=g?`?${g}`:""}}return(!t||t===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:ss([n,o.pathname])),Pu(o)}function hD(t,{relative:e}={}){let n=D.useContext(hS);St(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=xS("useViewTransitionState"),s=id(t,{relative:e});if(!n.isTransitioning)return!1;let o=ls(n.currentLocation.pathname,i)||n.currentLocation.pathname,c=ls(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Sf(s.pathname,c)!=null||Sf(s.pathname,o)!=null}const fD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mD=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),Ww=t=>{const e=mD(t);return e.charAt(0).toUpperCase()+e.slice(1)},TS=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),pD=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var gD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const yD=D.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:s="",children:o,iconNode:c,...d},h)=>D.createElement("svg",{ref:h,...gD,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:TS("lucide",s),...!o&&!pD(d)&&{"aria-hidden":"true"},...d},[...c.map(([f,g])=>D.createElement(f,g)),...Array.isArray(o)?o:[o]]));const ze=(t,e)=>{const n=D.forwardRef(({className:i,...s},o)=>D.createElement(yD,{ref:o,iconNode:e,className:TS(`lucide-${fD(Ww(t))}`,`lucide-${t}`,i),...s}));return n.displayName=Ww(t),n};const vD=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ju=ze("arrow-left",vD);const bD=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],_D=ze("arrow-right-left",bD);const wD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],xD=ze("check",wD);const TD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ED=ze("chevron-down",TD);const SD=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],AD=ze("chevron-left",SD);const CD=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],po=ze("chevron-right",CD);const RD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],ND=ze("circle-arrow-down",RD);const ID=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],kD=ze("circle-arrow-up",ID);const DD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Dy=ze("circle-check-big",DD);const MD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Zw=ze("circle-check",MD);const OD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],$g=ze("circle-plus",OD);const VD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Jw=ze("circle-question-mark",VD);const PD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ex=ze("circle",PD);const jD=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],LD=ze("copy",jD);const UD=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],tx=ze("download",UD);const zD=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],FD=ze("eye-off",zD);const BD=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qD=ze("eye",BD);const HD=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],$D=ze("file-text",HD);const GD=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],KD=ze("folder-plus",GD);const YD=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],QD=ze("funnel",YD);const XD=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],WD=ze("house",XD);const ZD=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],JD=ze("list",ZD);const e4=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],nx=ze("loader",e4);const t4=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],n4=ze("log-out",t4);const i4=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],C0=ze("mail",i4);const r4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],pa=ze("refresh-cw",r4);const s4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],a4=ze("search",s4);const o4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ES=ze("settings",o4);const l4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],c4=ze("target",l4);const u4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],lf=ze("trash-2",u4);const d4=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],SS=ze("trash",d4);const h4=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],f4=ze("trending-down",h4);const m4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],AS=ze("triangle-alert",m4);const p4=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],g4=ze("undo-2",p4);const y4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],v4=ze("upload",y4);const b4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],_4=ze("user-plus",b4);const w4=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],My=ze("wallet",w4);const x4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],T4=ze("wifi-off",x4);const E4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],S4=ze("wifi",E4);const A4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],rd=ze("x",A4),Oy=D.createContext({});function bs(t){const e=D.useRef(null);return e.current===null&&(e.current=t()),e.current}const Vy=typeof window<"u",rm=Vy?D.useLayoutEffect:D.useEffect,sm=D.createContext(null);function Py(t,e){t.indexOf(e)===-1&&t.push(e)}function jy(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function C4([...t],e,n){const i=e<0?t.length+e:e;if(i>=0&&i<t.length){const s=n<0?t.length+n:n,[o]=t.splice(e,1);t.splice(s,0,o)}return t}const cs=(t,e,n)=>n>e?e:n<t?t:n;let Ly=()=>{};const us={},CS=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function RS(t){return typeof t=="object"&&t!==null}const NS=t=>/^0[^.\s]+$/u.test(t);function Uy(t){let e;return()=>(e===void 0&&(e=t()),e)}const xi=t=>t,R4=(t,e)=>n=>e(t(n)),sd=(...t)=>t.reduce(R4),Lu=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i};class zy{constructor(){this.subscriptions=[]}add(e){return Py(this.subscriptions,e),()=>jy(this.subscriptions,e)}notify(e,n,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,i);else for(let o=0;o<s;o++){const c=this.subscriptions[o];c&&c(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const vr=t=>t*1e3,wi=t=>t/1e3;function IS(t,e){return e?t*(1e3/e):0}const kS=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,N4=1e-7,I4=12;function k4(t,e,n,i,s){let o,c,d=0;do c=e+(n-e)/2,o=kS(c,i,s)-t,o>0?n=c:e=c;while(Math.abs(o)>N4&&++d<I4);return c}function ad(t,e,n,i){if(t===e&&n===i)return xi;const s=o=>k4(o,0,1,t,n);return o=>o===0||o===1?o:kS(s(o),e,i)}const DS=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,MS=t=>e=>1-t(1-e),OS=ad(.33,1.53,.69,.99),Fy=MS(OS),VS=DS(Fy),PS=t=>(t*=2)<1?.5*Fy(t):.5*(2-Math.pow(2,-10*(t-1))),By=t=>1-Math.sin(Math.acos(t)),jS=MS(By),LS=DS(By),D4=ad(.42,0,1,1),M4=ad(0,0,.58,1),US=ad(.42,0,.58,1),O4=t=>Array.isArray(t)&&typeof t[0]!="number",zS=t=>Array.isArray(t)&&typeof t[0]=="number",V4={linear:xi,easeIn:D4,easeInOut:US,easeOut:M4,circIn:By,circInOut:LS,circOut:jS,backIn:Fy,backInOut:VS,backOut:OS,anticipate:PS},P4=t=>typeof t=="string",ix=t=>{if(zS(t)){Ly(t.length===4);const[e,n,i,s]=t;return ad(e,n,i,s)}else if(P4(t))return V4[t];return t},Yh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function j4(t,e){let n=new Set,i=new Set,s=!1,o=!1;const c=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function h(g){c.has(g)&&(f.schedule(g),t()),g(d)}const f={schedule:(g,v=!1,_=!1)=>{const N=_&&s?n:i;return v&&c.add(g),N.has(g)||N.add(g),g},cancel:g=>{i.delete(g),c.delete(g)},process:g=>{if(d=g,s){o=!0;return}s=!0,[n,i]=[i,n],n.forEach(h),n.clear(),s=!1,o&&(o=!1,f.process(g))}};return f}const L4=40;function FS(t,e){let n=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,c=Yh.reduce((L,$)=>(L[$]=j4(o),L),{}),{setup:d,read:h,resolveKeyframes:f,preUpdate:g,update:v,preRender:_,render:E,postRender:N}=c,A=()=>{const L=us.useManualTiming?s.timestamp:performance.now();n=!1,us.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(L-s.timestamp,L4),1)),s.timestamp=L,s.isProcessing=!0,d.process(s),h.process(s),f.process(s),g.process(s),v.process(s),_.process(s),E.process(s),N.process(s),s.isProcessing=!1,n&&e&&(i=!1,t(A))},R=()=>{n=!0,i=!0,s.isProcessing||t(A)};return{schedule:Yh.reduce((L,$)=>{const te=c[$];return L[$]=(ne,S=!1,I=!1)=>(n||R(),te.schedule(ne,S,I)),L},{}),cancel:L=>{for(let $=0;$<Yh.length;$++)c[Yh[$]].cancel(L)},state:s,steps:c}}const{schedule:bt,cancel:ds,state:pn,steps:Gg}=FS(typeof requestAnimationFrame<"u"?requestAnimationFrame:xi,!0);let cf;function U4(){cf=void 0}const Hn={now:()=>(cf===void 0&&Hn.set(pn.isProcessing||us.useManualTiming?pn.timestamp:performance.now()),cf),set:t=>{cf=t,queueMicrotask(U4)}},BS=t=>e=>typeof e=="string"&&e.startsWith(t),qy=BS("--"),z4=BS("var(--"),Hy=t=>z4(t)?F4.test(t.split("/*")[0].trim()):!1,F4=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,nc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Uu={...nc,transform:t=>cs(0,1,t)},Qh={...nc,default:1},Eu=t=>Math.round(t*1e5)/1e5,$y=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function B4(t){return t==null}const q4=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Gy=(t,e)=>n=>!!(typeof n=="string"&&q4.test(n)&&n.startsWith(t)||e&&!B4(n)&&Object.prototype.hasOwnProperty.call(n,e)),qS=(t,e,n)=>i=>{if(typeof i!="string")return i;const[s,o,c,d]=i.match($y);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(c),alpha:d!==void 0?parseFloat(d):1}},H4=t=>cs(0,255,t),Kg={...nc,transform:t=>Math.round(H4(t))},vo={test:Gy("rgb","red"),parse:qS("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Kg.transform(t)+", "+Kg.transform(e)+", "+Kg.transform(n)+", "+Eu(Uu.transform(i))+")"};function $4(t){let e="",n="",i="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const R0={test:Gy("#"),parse:$4,transform:vo.transform},od=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),aa=od("deg"),br=od("%"),ke=od("px"),G4=od("vh"),K4=od("vw"),rx={...br,parse:t=>br.parse(t)/100,transform:t=>br.transform(t*100)},kl={test:Gy("hsl","hue"),parse:qS("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+br.transform(Eu(e))+", "+br.transform(Eu(n))+", "+Eu(Uu.transform(i))+")"},Qt={test:t=>vo.test(t)||R0.test(t)||kl.test(t),parse:t=>vo.test(t)?vo.parse(t):kl.test(t)?kl.parse(t):R0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?vo.transform(t):kl.transform(t),getAnimatableNone:t=>{const e=Qt.parse(t);return e.alpha=0,Qt.transform(e)}},Y4=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Q4(t){return isNaN(t)&&typeof t=="string"&&(t.match($y)?.length||0)+(t.match(Y4)?.length||0)>0}const HS="number",$S="color",X4="var",W4="var(",sx="${}",Z4=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function zu(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},s=[];let o=0;const d=e.replace(Z4,h=>(Qt.test(h)?(i.color.push(o),s.push($S),n.push(Qt.parse(h))):h.startsWith(W4)?(i.var.push(o),s.push(X4),n.push(h)):(i.number.push(o),s.push(HS),n.push(parseFloat(h))),++o,sx)).split(sx);return{values:n,split:d,indexes:i,types:s}}function GS(t){return zu(t).values}function KS(t){const{split:e,types:n}=zu(t),i=e.length;return s=>{let o="";for(let c=0;c<i;c++)if(o+=e[c],s[c]!==void 0){const d=n[c];d===HS?o+=Eu(s[c]):d===$S?o+=Qt.transform(s[c]):o+=s[c]}return o}}const J4=t=>typeof t=="number"?0:Qt.test(t)?Qt.getAnimatableNone(t):t;function eM(t){const e=GS(t);return KS(t)(e.map(J4))}const wa={test:Q4,parse:GS,createTransformer:KS,getAnimatableNone:eM};function Yg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function tM({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let s=0,o=0,c=0;if(!e)s=o=c=n;else{const d=n<.5?n*(1+e):n+e-n*e,h=2*n-d;s=Yg(h,d,t+1/3),o=Yg(h,d,t),c=Yg(h,d,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(c*255),alpha:i}}function Af(t,e){return n=>n>0?e:t}const xt=(t,e,n)=>t+(e-t)*n,Qg=(t,e,n)=>{const i=t*t,s=n*(e*e-i)+i;return s<0?0:Math.sqrt(s)},nM=[R0,vo,kl],iM=t=>nM.find(e=>e.test(t));function ax(t){const e=iM(t);if(!e)return!1;let n=e.parse(t);return e===kl&&(n=tM(n)),n}const ox=(t,e)=>{const n=ax(t),i=ax(e);if(!n||!i)return Af(t,e);const s={...n};return o=>(s.red=Qg(n.red,i.red,o),s.green=Qg(n.green,i.green,o),s.blue=Qg(n.blue,i.blue,o),s.alpha=xt(n.alpha,i.alpha,o),vo.transform(s))},N0=new Set(["none","hidden"]);function rM(t,e){return N0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function sM(t,e){return n=>xt(t,e,n)}function Ky(t){return typeof t=="number"?sM:typeof t=="string"?Hy(t)?Af:Qt.test(t)?ox:lM:Array.isArray(t)?YS:typeof t=="object"?Qt.test(t)?ox:aM:Af}function YS(t,e){const n=[...t],i=n.length,s=t.map((o,c)=>Ky(o)(o,e[c]));return o=>{for(let c=0;c<i;c++)n[c]=s[c](o);return n}}function aM(t,e){const n={...t,...e},i={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(i[s]=Ky(t[s])(t[s],e[s]));return s=>{for(const o in i)n[o]=i[o](s);return n}}function oM(t,e){const n=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],c=t.indexes[o][i[o]],d=t.values[c]??0;n[s]=d,i[o]++}return n}const lM=(t,e)=>{const n=wa.createTransformer(e),i=zu(t),s=zu(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?N0.has(t)&&!s.values.length||N0.has(e)&&!i.values.length?rM(t,e):sd(YS(oM(i,s),s.values),n):Af(t,e)};function QS(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?xt(t,e,n):Ky(t)(t,e)}const cM=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>bt.update(e,n),stop:()=>ds(e),now:()=>pn.isProcessing?pn.timestamp:Hn.now()}},XS=(t,e,n=10)=>{let i="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)i+=Math.round(t(o/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Cf=2e4;function Yy(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<Cf;)e+=n,i=t.next(e);return e>=Cf?1/0:e}function uM(t,e=100,n){const i=n({...t,keyframes:[0,e]}),s=Math.min(Yy(i),Cf);return{type:"keyframes",ease:o=>i.next(s*o).value/e,duration:wi(s)}}const dM=5;function WS(t,e,n){const i=Math.max(e-dM,0);return IS(n-t(i),e-i)}const kt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Xg=.001;function hM({duration:t=kt.duration,bounce:e=kt.bounce,velocity:n=kt.velocity,mass:i=kt.mass}){let s,o,c=1-e;c=cs(kt.minDamping,kt.maxDamping,c),t=cs(kt.minDuration,kt.maxDuration,wi(t)),c<1?(s=f=>{const g=f*c,v=g*t,_=g-n,E=I0(f,c),N=Math.exp(-v);return Xg-_/E*N},o=f=>{const v=f*c*t,_=v*n+n,E=Math.pow(c,2)*Math.pow(f,2)*t,N=Math.exp(-v),A=I0(Math.pow(f,2),c);return(-s(f)+Xg>0?-1:1)*((_-E)*N)/A}):(s=f=>{const g=Math.exp(-f*t),v=(f-n)*t+1;return-Xg+g*v},o=f=>{const g=Math.exp(-f*t),v=(n-f)*(t*t);return g*v});const d=5/t,h=mM(s,o,d);if(t=vr(t),isNaN(h))return{stiffness:kt.stiffness,damping:kt.damping,duration:t};{const f=Math.pow(h,2)*i;return{stiffness:f,damping:c*2*Math.sqrt(i*f),duration:t}}}const fM=12;function mM(t,e,n){let i=n;for(let s=1;s<fM;s++)i=i-t(i)/e(i);return i}function I0(t,e){return t*Math.sqrt(1-e*e)}const pM=["duration","bounce"],gM=["stiffness","damping","mass"];function lx(t,e){return e.some(n=>t[n]!==void 0)}function yM(t){let e={velocity:kt.velocity,stiffness:kt.stiffness,damping:kt.damping,mass:kt.mass,isResolvedFromDuration:!1,...t};if(!lx(t,gM)&&lx(t,pM))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),s=i*i,o=2*cs(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:kt.mass,stiffness:s,damping:o}}else{const n=hM(t);e={...e,...n,mass:kt.mass},e.isResolvedFromDuration=!0}return e}function Rf(t=kt.visualDuration,e=kt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:s}=n;const o=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],d={done:!1,value:o},{stiffness:h,damping:f,mass:g,duration:v,velocity:_,isResolvedFromDuration:E}=yM({...n,velocity:-wi(n.velocity||0)}),N=_||0,A=f/(2*Math.sqrt(h*g)),R=c-o,P=wi(Math.sqrt(h/g)),U=Math.abs(R)<5;i||(i=U?kt.restSpeed.granular:kt.restSpeed.default),s||(s=U?kt.restDelta.granular:kt.restDelta.default);let L;if(A<1){const te=I0(P,A);L=ne=>{const S=Math.exp(-A*P*ne);return c-S*((N+A*P*R)/te*Math.sin(te*ne)+R*Math.cos(te*ne))}}else if(A===1)L=te=>c-Math.exp(-P*te)*(R+(N+P*R)*te);else{const te=P*Math.sqrt(A*A-1);L=ne=>{const S=Math.exp(-A*P*ne),I=Math.min(te*ne,300);return c-S*((N+A*P*R)*Math.sinh(I)+te*R*Math.cosh(I))/te}}const $={calculatedDuration:E&&v||null,next:te=>{const ne=L(te);if(E)d.done=te>=v;else{let S=te===0?N:0;A<1&&(S=te===0?vr(N):WS(L,te,ne));const I=Math.abs(S)<=i,M=Math.abs(c-ne)<=s;d.done=I&&M}return d.value=d.done?c:ne,d},toString:()=>{const te=Math.min(Yy($),Cf),ne=XS(S=>$.next(te*S).value,te,30);return te+"ms "+ne},toTransition:()=>{}};return $}Rf.applyToOptions=t=>{const e=uM(t,100,Rf);return t.ease=e.ease,t.duration=vr(e.duration),t.type="keyframes",t};function k0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:c,min:d,max:h,restDelta:f=.5,restSpeed:g}){const v=t[0],_={done:!1,value:v},E=I=>d!==void 0&&I<d||h!==void 0&&I>h,N=I=>d===void 0?h:h===void 0||Math.abs(d-I)<Math.abs(h-I)?d:h;let A=n*e;const R=v+A,P=c===void 0?R:c(R);P!==R&&(A=P-v);const U=I=>-A*Math.exp(-I/i),L=I=>P+U(I),$=I=>{const M=U(I),z=L(I);_.done=Math.abs(M)<=f,_.value=_.done?P:z};let te,ne;const S=I=>{E(_.value)&&(te=I,ne=Rf({keyframes:[_.value,N(_.value)],velocity:WS(L,I,_.value),damping:s,stiffness:o,restDelta:f,restSpeed:g}))};return S(0),{calculatedDuration:null,next:I=>{let M=!1;return!ne&&te===void 0&&(M=!0,$(I),S(I)),te!==void 0&&I>=te?ne.next(I-te):(!M&&$(I),_)}}}function vM(t,e,n){const i=[],s=n||us.mix||QS,o=t.length-1;for(let c=0;c<o;c++){let d=s(t[c],t[c+1]);if(e){const h=Array.isArray(e)?e[c]||xi:e;d=sd(h,d)}i.push(d)}return i}function ZS(t,e,{clamp:n=!0,ease:i,mixer:s}={}){const o=t.length;if(Ly(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=vM(e,i,s),h=d.length,f=g=>{if(c&&g<t[0])return e[0];let v=0;if(h>1)for(;v<t.length-2&&!(g<t[v+1]);v++);const _=Lu(t[v],t[v+1],g);return d[v](_)};return n?g=>f(cs(t[0],t[o-1],g)):f}function bM(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const s=Lu(0,e,i);t.push(xt(n,1,s))}}function _M(t){const e=[0];return bM(e,t.length-1),e}function wM(t,e){return t.map(n=>n*e)}function xM(t,e){return t.map(()=>e||US).splice(0,t.length-1)}function Su({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const s=O4(i)?i.map(ix):ix(i),o={done:!1,value:e[0]},c=wM(n&&n.length===e.length?n:_M(e),t),d=ZS(c,e,{ease:Array.isArray(s)?s:xM(e,s)});return{calculatedDuration:t,next:h=>(o.value=d(h),o.done=h>=t,o)}}const TM=t=>t!==null;function Qy(t,{repeat:e,repeatType:n="loop"},i,s=1){const o=t.filter(TM),d=s<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!d||i===void 0?o[d]:i}const EM={decay:k0,inertia:k0,tween:Su,keyframes:Su,spring:Rf};function JS(t){typeof t.type=="string"&&(t.type=EM[t.type])}class Xy{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const SM=t=>t/100;class Wy extends Xy{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Hn.now()&&this.tick(Hn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;JS(e);const{type:n=Su,repeat:i=0,repeatDelay:s=0,repeatType:o,velocity:c=0}=e;let{keyframes:d}=e;const h=n||Su;h!==Su&&typeof d[0]!="number"&&(this.mixKeyframes=sd(SM,QS(d[0],d[1])),d=[0,100]);const f=h({...e,keyframes:d});o==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...d].reverse(),velocity:-c})),f.calculatedDuration===null&&(f.calculatedDuration=Yy(f));const{calculatedDuration:g}=f;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:i,totalDuration:s,mixKeyframes:o,mirroredGenerator:c,resolvedDuration:d,calculatedDuration:h}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:g,repeat:v,repeatType:_,repeatDelay:E,type:N,onUpdate:A,finalKeyframe:R}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const P=this.currentTime-f*(this.playbackSpeed>=0?1:-1),U=this.playbackSpeed>=0?P<0:P>s;this.currentTime=Math.max(P,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let L=this.currentTime,$=i;if(v){const I=Math.min(this.currentTime,s)/d;let M=Math.floor(I),z=I%1;!z&&I>=1&&(z=1),z===1&&M--,M=Math.min(M,v+1),!!(M%2)&&(_==="reverse"?(z=1-z,E&&(z-=E/d)):_==="mirror"&&($=c)),L=cs(0,1,z)*d}const te=U?{done:!1,value:g[0]}:$.next(L);o&&(te.value=o(te.value));let{done:ne}=te;!U&&h!==null&&(ne=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ne);return S&&N!==k0&&(te.value=Qy(g,this.options,R,this.speed)),A&&A(te.value),S&&this.finish(),te}then(e,n){return this.finished.then(e,n)}get duration(){return wi(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+wi(e)}get time(){return wi(this.currentTime)}set time(e){e=vr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Hn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=wi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=cM,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Hn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function AM(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const bo=t=>t*180/Math.PI,D0=t=>{const e=bo(Math.atan2(t[1],t[0]));return M0(e)},CM={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:D0,rotateZ:D0,skewX:t=>bo(Math.atan(t[1])),skewY:t=>bo(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},M0=t=>(t=t%360,t<0&&(t+=360),t),cx=D0,ux=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),dx=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),RM={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ux,scaleY:dx,scale:t=>(ux(t)+dx(t))/2,rotateX:t=>M0(bo(Math.atan2(t[6],t[5]))),rotateY:t=>M0(bo(Math.atan2(-t[2],t[0]))),rotateZ:cx,rotate:cx,skewX:t=>bo(Math.atan(t[4])),skewY:t=>bo(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function O0(t){return t.includes("scale")?1:0}function V0(t,e){if(!t||t==="none")return O0(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(n)i=RM,s=n;else{const d=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=CM,s=d}if(!s)return O0(e);const o=i[e],c=s[1].split(",").map(IM);return typeof o=="function"?o(c):c[o]}const NM=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return V0(n,e)};function IM(t){return parseFloat(t.trim())}const ic=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],rc=new Set(ic),hx=t=>t===nc||t===ke,kM=new Set(["x","y","z"]),DM=ic.filter(t=>!kM.has(t));function MM(t){const e=[];return DM.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const wo={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>V0(e,"x"),y:(t,{transform:e})=>V0(e,"y")};wo.translateX=wo.x;wo.translateY=wo.y;const xo=new Set;let P0=!1,j0=!1,L0=!1;function eA(){if(j0){const t=Array.from(xo).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const s=MM(i);s.length&&(n.set(i,s),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const s=n.get(i);s&&s.forEach(([o,c])=>{i.getValue(o)?.set(c)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}j0=!1,P0=!1,xo.forEach(t=>t.complete(L0)),xo.clear()}function tA(){xo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(j0=!0)})}function OM(){L0=!0,tA(),eA(),L0=!1}class Zy{constructor(e,n,i,s,o,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=s,this.element=o,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(xo.add(this),P0||(P0=!0,bt.read(tA),bt.resolveKeyframes(eA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:s}=this;if(e[0]===null){const o=s?.get(),c=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&n){const d=i.readValue(n,c);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=c),s&&o===void 0&&s.set(e[0])}AM(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),xo.delete(this)}cancel(){this.state==="scheduled"&&(xo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const VM=t=>t.startsWith("--");function PM(t,e,n){VM(e)?t.style.setProperty(e,n):t.style[e]=n}const jM=Uy(()=>window.ScrollTimeline!==void 0),LM={};function UM(t,e){const n=Uy(t);return()=>LM[e]??n()}const nA=UM(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),yu=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,fx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:yu([0,.65,.55,1]),circOut:yu([.55,0,1,.45]),backIn:yu([.31,.01,.66,-.59]),backOut:yu([.33,1.53,.69,.99])};function iA(t,e){if(t)return typeof t=="function"?nA()?XS(t,e):"ease-out":zS(t)?yu(t):Array.isArray(t)?t.map(n=>iA(n,e)||fx.easeOut):fx[t]}function zM(t,e,n,{delay:i=0,duration:s=300,repeat:o=0,repeatType:c="loop",ease:d="easeOut",times:h}={},f=void 0){const g={[e]:n};h&&(g.offset=h);const v=iA(d,s);Array.isArray(v)&&(g.easing=v);const _={delay:i,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:o+1,direction:c==="reverse"?"alternate":"normal"};return f&&(_.pseudoElement=f),t.animate(g,_)}function rA(t){return typeof t=="function"&&"applyToOptions"in t}function FM({type:t,...e}){return rA(t)&&nA()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class BM extends Xy{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:i,keyframes:s,pseudoElement:o,allowFlatten:c=!1,finalKeyframe:d,onComplete:h}=e;this.isPseudoElement=!!o,this.allowFlatten=c,this.options=e,Ly(typeof e.type!="string");const f=FM(e);this.animation=zM(n,i,s,f,o),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const g=Qy(s,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(g):PM(n,i,g),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return wi(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+wi(e)}get time(){return wi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=vr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&jM()?(this.animation.timeline=e,xi):n(this)}}const sA={anticipate:PS,backInOut:VS,circInOut:LS};function qM(t){return t in sA}function HM(t){typeof t.ease=="string"&&qM(t.ease)&&(t.ease=sA[t.ease])}const mx=10;class $M extends BM{constructor(e){HM(e),JS(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:i,onComplete:s,element:o,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const d=new Wy({...c,autoplay:!1}),h=vr(this.finishedTime??this.time);n.setWithVelocity(d.sample(h-mx).value,d.sample(h).value,mx),d.stop()}}const px=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(wa.test(t)||t==="0")&&!t.startsWith("url("));function GM(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function KM(t,e,n,i){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],c=px(s,e),d=px(o,e);return!c||!d?!1:GM(t)||(n==="spring"||rA(n))&&i}function U0(t){t.duration=0,t.type="keyframes"}const YM=new Set(["opacity","clipPath","filter","transform"]),QM=Uy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function XM(t){const{motionValue:e,name:n,repeatDelay:i,repeatType:s,damping:o,type:c}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=e.owner.getProps();return QM()&&n&&YM.has(n)&&(n!=="transform"||!f)&&!h&&!i&&s!=="mirror"&&o!==0&&c!=="inertia"}const WM=40;class ZM extends Xy{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:c="loop",keyframes:d,name:h,motionValue:f,element:g,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Hn.now();const _={autoplay:e,delay:n,type:i,repeat:s,repeatDelay:o,repeatType:c,name:h,motionValue:f,element:g,...v},E=g?.KeyframeResolver||Zy;this.keyframeResolver=new E(d,(N,A,R)=>this.onKeyframesResolved(N,A,_,!R),h,f,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,i,s){this.keyframeResolver=void 0;const{name:o,type:c,velocity:d,delay:h,isHandoff:f,onUpdate:g}=i;this.resolvedAt=Hn.now(),KM(e,o,c,d)||((us.instantAnimations||!h)&&g?.(Qy(e,i,n)),e[0]=e[e.length-1],U0(i),i.repeat=0);const _={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>WM?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:e},E=!f&&XM(_)?new $M({..._,element:_.motionValue.owner.current}):new Wy(_);E.finished.then(()=>this.notifyFinished()).catch(xi),this.pendingTimeline&&(this.stopTimeline=E.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=E}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),OM()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const JM=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function eO(t){const e=JM.exec(t);if(!e)return[,];const[,n,i,s]=e;return[`--${n??i}`,s]}function aA(t,e,n=1){const[i,s]=eO(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const c=o.trim();return CS(c)?parseFloat(c):c}return Hy(s)?aA(s,e,n+1):s}function Jy(t,e){return t?.[e]??t?.default??t}const oA=new Set(["width","height","top","left","right","bottom",...ic]),tO={test:t=>t==="auto",parse:t=>t},lA=t=>e=>e.test(t),cA=[nc,ke,br,aa,K4,G4,tO],gx=t=>cA.find(lA(t));function nO(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||NS(t):!0}const iO=new Set(["brightness","contrast","saturate","opacity"]);function rO(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match($y)||[];if(!i)return t;const s=n.replace(i,"");let o=iO.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+s+")"}const sO=/\b([a-z-]*)\(.*?\)/gu,z0={...wa,getAnimatableNone:t=>{const e=t.match(sO);return e?e.map(rO).join(" "):t}},yx={...nc,transform:Math.round},aO={rotate:aa,rotateX:aa,rotateY:aa,rotateZ:aa,scale:Qh,scaleX:Qh,scaleY:Qh,scaleZ:Qh,skew:aa,skewX:aa,skewY:aa,distance:ke,translateX:ke,translateY:ke,translateZ:ke,x:ke,y:ke,z:ke,perspective:ke,transformPerspective:ke,opacity:Uu,originX:rx,originY:rx,originZ:ke},ev={borderWidth:ke,borderTopWidth:ke,borderRightWidth:ke,borderBottomWidth:ke,borderLeftWidth:ke,borderRadius:ke,radius:ke,borderTopLeftRadius:ke,borderTopRightRadius:ke,borderBottomRightRadius:ke,borderBottomLeftRadius:ke,width:ke,maxWidth:ke,height:ke,maxHeight:ke,top:ke,right:ke,bottom:ke,left:ke,padding:ke,paddingTop:ke,paddingRight:ke,paddingBottom:ke,paddingLeft:ke,margin:ke,marginTop:ke,marginRight:ke,marginBottom:ke,marginLeft:ke,backgroundPositionX:ke,backgroundPositionY:ke,...aO,zIndex:yx,fillOpacity:Uu,strokeOpacity:Uu,numOctaves:yx},oO={...ev,color:Qt,backgroundColor:Qt,outlineColor:Qt,fill:Qt,stroke:Qt,borderColor:Qt,borderTopColor:Qt,borderRightColor:Qt,borderBottomColor:Qt,borderLeftColor:Qt,filter:z0,WebkitFilter:z0},uA=t=>oO[t];function dA(t,e){let n=uA(t);return n!==z0&&(n=wa),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const lO=new Set(["auto","none","0"]);function cO(t,e,n){let i=0,s;for(;i<t.length&&!s;){const o=t[i];typeof o=="string"&&!lO.has(o)&&zu(o).values.length&&(s=t[i]),i++}if(s&&n)for(const o of e)t[o]=dA(n,s)}class uO extends Zy{constructor(e,n,i,s,o){super(e,n,i,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let f=e[h];if(typeof f=="string"&&(f=f.trim(),Hy(f))){const g=aA(f,n.current);g!==void 0&&(e[h]=g),h===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!oA.has(i)||e.length!==2)return;const[s,o]=e,c=gx(s),d=gx(o);if(c!==d)if(hx(c)&&hx(d))for(let h=0;h<e.length;h++){const f=e[h];typeof f=="string"&&(e[h]=parseFloat(f))}else wo[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let s=0;s<e.length;s++)(e[s]===null||nO(e[s]))&&i.push(s);i.length&&cO(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=wo[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(i,s).jump(s,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,c=i[o];i[o]=wo[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([d,h])=>{e.getValue(d).set(h)}),this.resolveNoneKeyframes()}}function dO(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const s=n?.[t]??i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const hA=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function fA(t){return RS(t)&&"offsetHeight"in t}const vx=30,hO=t=>!isNaN(parseFloat(t)),Au={current:void 0};class fO{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const s=Hn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Hn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=hO(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new zy);const i=this.events[e].add(n);return e==="change"?()=>{i(),bt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return Au.current&&Au.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Hn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>vx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,vx);return IS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ao(t,e){return new fO(t,e)}const{schedule:tv}=FS(queueMicrotask,!1),ji={x:!1,y:!1};function mA(){return ji.x||ji.y}function mO(t){return t==="x"||t==="y"?ji[t]?null:(ji[t]=!0,()=>{ji[t]=!1}):ji.x||ji.y?null:(ji.x=ji.y=!0,()=>{ji.x=ji.y=!1})}function pA(t,e){const n=dO(t),i=new AbortController,s={passive:!0,...e,signal:i.signal};return[n,s,()=>i.abort()]}function bx(t){return!(t.pointerType==="touch"||mA())}function pO(t,e,n={}){const[i,s,o]=pA(t,n),c=d=>{if(!bx(d))return;const{target:h}=d,f=e(h,d);if(typeof f!="function"||!h)return;const g=v=>{bx(v)&&(f(v),h.removeEventListener("pointerleave",g))};h.addEventListener("pointerleave",g,s)};return i.forEach(d=>{d.addEventListener("pointerenter",c,s)}),o}const gA=(t,e)=>e?t===e?!0:gA(t,e.parentElement):!1,nv=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,gO=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function yO(t){return gO.has(t.tagName)||t.tabIndex!==-1}const uf=new WeakSet;function _x(t){return e=>{e.key==="Enter"&&t(e)}}function Wg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const vO=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=_x(()=>{if(uf.has(n))return;Wg(n,"down");const s=_x(()=>{Wg(n,"up")}),o=()=>Wg(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function wx(t){return nv(t)&&!mA()}function bO(t,e,n={}){const[i,s,o]=pA(t,n),c=d=>{const h=d.currentTarget;if(!wx(d))return;uf.add(h);const f=e(h,d),g=(E,N)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",_),uf.has(h)&&uf.delete(h),wx(E)&&typeof f=="function"&&f(E,{success:N})},v=E=>{g(E,h===window||h===document||n.useGlobalTarget||gA(h,E.target))},_=E=>{g(E,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",_,s)};return i.forEach(d=>{(n.useGlobalTarget?window:d).addEventListener("pointerdown",c,s),fA(d)&&(d.addEventListener("focus",f=>vO(f,s)),!yO(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),o}function yA(t){return RS(t)&&"ownerSVGElement"in t}function _O(t){return yA(t)&&t.tagName==="svg"}function wO(...t){const e=!Array.isArray(t[0]),n=e?0:-1,i=t[0+n],s=t[1+n],o=t[2+n],c=t[3+n],d=ZS(s,o,c);return e?d(i):d}const vn=t=>!!(t&&t.getVelocity),xO=[...cA,Qt,wa],TO=t=>xO.find(lA(t)),am=D.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function xx(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function EO(...t){return e=>{let n=!1;const i=t.map(s=>{const o=xx(s,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<i.length;s++){const o=i[s];typeof o=="function"?o():xx(t[s],null)}}}}function SO(...t){return D.useCallback(EO(...t),t)}class AO extends D.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=n.offsetParent,s=fA(i)&&i.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function CO({children:t,isPresent:e,anchorX:n,root:i}){const s=D.useId(),o=D.useRef(null),c=D.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=D.useContext(am),h=SO(o,t?.ref);return D.useInsertionEffect(()=>{const{width:f,height:g,top:v,left:_,right:E}=c.current;if(e||!o.current||!f||!g)return;const N=n==="left"?`left: ${_}`:`right: ${E}`;o.current.dataset.motionPopId=s;const A=document.createElement("style");d&&(A.nonce=d);const R=i??document.head;return R.appendChild(A),A.sheet&&A.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${g}px !important;
            ${N}px !important;
            top: ${v}px !important;
          }
        `),()=>{R.contains(A)&&R.removeChild(A)}},[e]),b.jsx(AO,{isPresent:e,childRef:o,sizeRef:c,children:D.cloneElement(t,{ref:h})})}const RO=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:s,presenceAffectsLayout:o,mode:c,anchorX:d,root:h})=>{const f=bs(NO),g=D.useId();let v=!0,_=D.useMemo(()=>(v=!1,{id:g,initial:e,isPresent:n,custom:s,onExitComplete:E=>{f.set(E,!0);for(const N of f.values())if(!N)return;i&&i()},register:E=>(f.set(E,!1),()=>f.delete(E))}),[n,f,i]);return o&&v&&(_={..._}),D.useMemo(()=>{f.forEach((E,N)=>f.set(N,!1))},[n]),D.useEffect(()=>{!n&&!f.size&&i&&i()},[n]),c==="popLayout"&&(t=b.jsx(CO,{isPresent:n,anchorX:d,root:h,children:t})),b.jsx(sm.Provider,{value:_,children:t})};function NO(){return new Map}function vA(t=!0){const e=D.useContext(sm);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:s}=e,o=D.useId();D.useEffect(()=>{if(t)return s(o)},[t]);const c=D.useCallback(()=>t&&i&&i(o),[o,i,t]);return!n&&i?[!1,c]:[!0]}const Xh=t=>t.key||"";function Tx(t){const e=[];return D.Children.forEach(t,n=>{D.isValidElement(n)&&e.push(n)}),e}const om=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:o="sync",propagate:c=!1,anchorX:d="left",root:h})=>{const[f,g]=vA(c),v=D.useMemo(()=>Tx(t),[t]),_=c&&!f?[]:v.map(Xh),E=D.useRef(!0),N=D.useRef(v),A=bs(()=>new Map),[R,P]=D.useState(v),[U,L]=D.useState(v);rm(()=>{E.current=!1,N.current=v;for(let ne=0;ne<U.length;ne++){const S=Xh(U[ne]);_.includes(S)?A.delete(S):A.get(S)!==!0&&A.set(S,!1)}},[U,_.length,_.join("-")]);const $=[];if(v!==R){let ne=[...v];for(let S=0;S<U.length;S++){const I=U[S],M=Xh(I);_.includes(M)||(ne.splice(S,0,I),$.push(I))}return o==="wait"&&$.length&&(ne=$),L(Tx(ne)),P(v),null}const{forceRender:te}=D.useContext(Oy);return b.jsx(b.Fragment,{children:U.map(ne=>{const S=Xh(ne),I=c&&!f?!1:v===U||_.includes(S),M=()=>{if(A.has(S))A.set(S,!0);else return;let z=!0;A.forEach(O=>{O||(z=!1)}),z&&(te?.(),L(N.current),c&&g?.(),i&&i())};return b.jsx(RO,{isPresent:I,initial:!E.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,root:h,onExitComplete:I?void 0:M,anchorX:d,children:ne},S)})})},bA=D.createContext({strict:!1}),Ex={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ql={};for(const t in Ex)ql[t]={isEnabled:e=>Ex[t].some(n=>!!e[n])};function IO(t){for(const e in t)ql[e]={...ql[e],...t[e]}}const kO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Nf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||kO.has(t)}let _A=t=>!Nf(t);function DO(t){typeof t=="function"&&(_A=e=>e.startsWith("on")?!Nf(e):t(e))}try{DO(require("@emotion/is-prop-valid").default)}catch{}function MO(t,e,n){const i={};for(const s in t)s==="values"&&typeof t.values=="object"||(_A(s)||n===!0&&Nf(s)||!e&&!Nf(s)||t.draggable&&s.startsWith("onDrag"))&&(i[s]=t[s]);return i}const lm=D.createContext({});function cm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Fu(t){return typeof t=="string"||Array.isArray(t)}const iv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],rv=["initial",...iv];function um(t){return cm(t.animate)||rv.some(e=>Fu(t[e]))}function wA(t){return!!(um(t)||t.variants)}function OO(t,e){if(um(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Fu(n)?n:void 0,animate:Fu(i)?i:void 0}}return t.inherit!==!1?e:{}}function VO(t){const{initial:e,animate:n}=OO(t,D.useContext(lm));return D.useMemo(()=>({initial:e,animate:n}),[Sx(e),Sx(n)])}function Sx(t){return Array.isArray(t)?t.join(" "):t}const Bu={};function PO(t){for(const e in t)Bu[e]=t[e],qy(e)&&(Bu[e].isCSSVariable=!0)}function xA(t,{layout:e,layoutId:n}){return rc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Bu[t]||t==="opacity")}const jO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},LO=ic.length;function UO(t,e,n){let i="",s=!0;for(let o=0;o<LO;o++){const c=ic[o],d=t[c];if(d===void 0)continue;let h=!0;if(typeof d=="number"?h=d===(c.startsWith("scale")?1:0):h=parseFloat(d)===0,!h||n){const f=hA(d,ev[c]);if(!h){s=!1;const g=jO[c]||c;i+=`${g}(${f}) `}n&&(e[c]=f)}}return i=i.trim(),n?i=n(e,s?"":i):s&&(i="none"),i}function sv(t,e,n){const{style:i,vars:s,transformOrigin:o}=t;let c=!1,d=!1;for(const h in e){const f=e[h];if(rc.has(h)){c=!0;continue}else if(qy(h)){s[h]=f;continue}else{const g=hA(f,ev[h]);h.startsWith("origin")?(d=!0,o[h]=g):i[h]=g}}if(e.transform||(c||n?i.transform=UO(e,t.transform,n):i.transform&&(i.transform="none")),d){const{originX:h="50%",originY:f="50%",originZ:g=0}=o;i.transformOrigin=`${h} ${f} ${g}`}}const av=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function TA(t,e,n){for(const i in e)!vn(e[i])&&!xA(i,n)&&(t[i]=e[i])}function zO({transformTemplate:t},e){return D.useMemo(()=>{const n=av();return sv(n,e,t),Object.assign({},n.vars,n.style)},[e])}function FO(t,e){const n=t.style||{},i={};return TA(i,n,t),Object.assign(i,zO(t,e)),i}function BO(t,e){const n={},i=FO(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const qO={offset:"stroke-dashoffset",array:"stroke-dasharray"},HO={offset:"strokeDashoffset",array:"strokeDasharray"};function $O(t,e,n=1,i=0,s=!0){t.pathLength=1;const o=s?qO:HO;t[o.offset]=ke.transform(-i);const c=ke.transform(e),d=ke.transform(n);t[o.array]=`${c} ${d}`}function EA(t,{attrX:e,attrY:n,attrScale:i,pathLength:s,pathSpacing:o=1,pathOffset:c=0,...d},h,f,g){if(sv(t,d,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:v,style:_}=t;v.transform&&(_.transform=v.transform,delete v.transform),(_.transform||v.transformOrigin)&&(_.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),_.transform&&(_.transformBox=g?.transformBox??"fill-box",delete v.transformBox),e!==void 0&&(v.x=e),n!==void 0&&(v.y=n),i!==void 0&&(v.scale=i),s!==void 0&&$O(v,s,o,c,!1)}const SA=()=>({...av(),attrs:{}}),AA=t=>typeof t=="string"&&t.toLowerCase()==="svg";function GO(t,e,n,i){const s=D.useMemo(()=>{const o=SA();return EA(o,e,AA(i),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};TA(o,t.style,t),s.style={...o,...s.style}}return s}const KO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ov(t){return typeof t!="string"||t.includes("-")?!1:!!(KO.indexOf(t)>-1||/[A-Z]/u.test(t))}function YO(t,e,n,{latestValues:i},s,o=!1){const d=(ov(t)?GO:BO)(e,i,s,t),h=MO(e,typeof t=="string",o),f=t!==D.Fragment?{...h,...d,ref:n}:{},{children:g}=e,v=D.useMemo(()=>vn(g)?g.get():g,[g]);return D.createElement(t,{...f,children:v})}function Ax(t){const e=[{},{}];return t?.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function lv(t,e,n,i){if(typeof e=="function"){const[s,o]=Ax(i);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=Ax(i);e=e(n!==void 0?n:t.custom,s,o)}return e}function df(t){return vn(t)?t.get():t}function QO({scrapeMotionValuesFromProps:t,createRenderState:e},n,i,s){return{latestValues:XO(n,i,s,t),renderState:e()}}function XO(t,e,n,i){const s={},o=i(t,{});for(const _ in o)s[_]=df(o[_]);let{initial:c,animate:d}=t;const h=um(t),f=wA(t);e&&f&&!h&&t.inherit!==!1&&(c===void 0&&(c=e.initial),d===void 0&&(d=e.animate));let g=n?n.initial===!1:!1;g=g||c===!1;const v=g?d:c;if(v&&typeof v!="boolean"&&!cm(v)){const _=Array.isArray(v)?v:[v];for(let E=0;E<_.length;E++){const N=lv(t,_[E]);if(N){const{transitionEnd:A,transition:R,...P}=N;for(const U in P){let L=P[U];if(Array.isArray(L)){const $=g?L.length-1:0;L=L[$]}L!==null&&(s[U]=L)}for(const U in A)s[U]=A[U]}}}return s}const CA=t=>(e,n)=>{const i=D.useContext(lm),s=D.useContext(sm),o=()=>QO(t,e,i,s);return n?o():bs(o)};function cv(t,e,n){const{style:i}=t,s={};for(const o in i)(vn(i[o])||e.style&&vn(e.style[o])||xA(o,t)||n?.getValue(o)?.liveStyle!==void 0)&&(s[o]=i[o]);return s}const WO=CA({scrapeMotionValuesFromProps:cv,createRenderState:av});function RA(t,e,n){const i=cv(t,e,n);for(const s in t)if(vn(t[s])||vn(e[s])){const o=ic.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[o]=t[s]}return i}const ZO=CA({scrapeMotionValuesFromProps:RA,createRenderState:SA}),JO=Symbol.for("motionComponentSymbol");function Dl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function e3(t,e,n){return D.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):Dl(n)&&(n.current=i))},[e])}const uv=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),t3="framerAppearId",NA="data-"+uv(t3),IA=D.createContext({});function n3(t,e,n,i,s){const{visualElement:o}=D.useContext(lm),c=D.useContext(bA),d=D.useContext(sm),h=D.useContext(am).reducedMotion,f=D.useRef(null);i=i||c.renderer,!f.current&&i&&(f.current=i(t,{visualState:e,parent:o,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const g=f.current,v=D.useContext(IA);g&&!g.projection&&s&&(g.type==="html"||g.type==="svg")&&i3(f.current,n,s,v);const _=D.useRef(!1);D.useInsertionEffect(()=>{g&&_.current&&g.update(n,d)});const E=n[NA],N=D.useRef(!!E&&!window.MotionHandoffIsComplete?.(E)&&window.MotionHasOptimisedAnimation?.(E));return rm(()=>{g&&(_.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),N.current&&g.animationState&&g.animationState.animateChanges())}),D.useEffect(()=>{g&&(!N.current&&g.animationState&&g.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(E)}),N.current=!1),g.enteringChildren=void 0)}),g}function i3(t,e,n,i){const{layoutId:s,layout:o,drag:c,dragConstraints:d,layoutScroll:h,layoutRoot:f,layoutCrossfade:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:kA(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!c||d&&Dl(d),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,crossfade:g,layoutScroll:h,layoutRoot:f})}function kA(t){if(t)return t.options.allowProjection!==!1?t.projection:kA(t.parent)}function Zg(t,{forwardMotionProps:e=!1}={},n,i){n&&IO(n);const s=ov(t)?ZO:WO;function o(d,h){let f;const g={...D.useContext(am),...d,layoutId:r3(d)},{isStatic:v}=g,_=VO(d),E=s(d,v);if(!v&&Vy){s3();const N=a3(g);f=N.MeasureLayout,_.visualElement=n3(t,E,g,i,N.ProjectionNode)}return b.jsxs(lm.Provider,{value:_,children:[f&&_.visualElement?b.jsx(f,{visualElement:_.visualElement,...g}):null,YO(t,d,e3(E,_.visualElement,h),E,v,e)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=D.forwardRef(o);return c[JO]=t,c}function r3({layoutId:t}){const e=D.useContext(Oy).id;return e&&t!==void 0?e+"-"+t:t}function s3(t,e){D.useContext(bA).strict}function a3(t){const{drag:e,layout:n}=ql;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function o3(t,e){if(typeof Proxy>"u")return Zg;const n=new Map,i=(o,c)=>Zg(o,c,t,e),s=(o,c)=>i(o,c);return new Proxy(s,{get:(o,c)=>c==="create"?i:(n.has(c)||n.set(c,Zg(c,void 0,t,e)),n.get(c))})}function DA({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function l3({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function c3(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Jg(t){return t===void 0||t===1}function F0({scale:t,scaleX:e,scaleY:n}){return!Jg(t)||!Jg(e)||!Jg(n)}function go(t){return F0(t)||MA(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function MA(t){return Cx(t.x)||Cx(t.y)}function Cx(t){return t&&t!=="0%"}function If(t,e,n){const i=t-n,s=e*i;return n+s}function Rx(t,e,n,i,s){return s!==void 0&&(t=If(t,s,i)),If(t,n,i)+e}function B0(t,e=0,n=1,i,s){t.min=Rx(t.min,e,n,i,s),t.max=Rx(t.max,e,n,i,s)}function OA(t,{x:e,y:n}){B0(t.x,e.translate,e.scale,e.originPoint),B0(t.y,n.translate,n.scale,n.originPoint)}const Nx=.999999999999,Ix=1.0000000000001;function u3(t,e,n,i=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,c;for(let d=0;d<s;d++){o=n[d],c=o.projectionDelta;const{visualElement:h}=o.options;h&&h.props.style&&h.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ol(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,OA(t,c)),i&&go(o.latestValues)&&Ol(t,o.latestValues))}e.x<Ix&&e.x>Nx&&(e.x=1),e.y<Ix&&e.y>Nx&&(e.y=1)}function Ml(t,e){t.min=t.min+e,t.max=t.max+e}function kx(t,e,n,i,s=.5){const o=xt(t.min,t.max,s);B0(t,e,n,o,i)}function Ol(t,e){kx(t.x,e.x,e.scaleX,e.scale,e.originX),kx(t.y,e.y,e.scaleY,e.scale,e.originY)}function VA(t,e){return DA(c3(t.getBoundingClientRect(),e))}function d3(t,e,n){const i=VA(t,n),{scroll:s}=e;return s&&(Ml(i.x,s.offset.x),Ml(i.y,s.offset.y)),i}const Dx=()=>({translate:0,scale:1,origin:0,originPoint:0}),Vl=()=>({x:Dx(),y:Dx()}),Mx=()=>({min:0,max:0}),Lt=()=>({x:Mx(),y:Mx()}),q0={current:null},PA={current:!1};function h3(){if(PA.current=!0,!!Vy)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>q0.current=t.matches;t.addEventListener("change",e),e()}else q0.current=!1}const f3=new WeakMap;function m3(t,e,n){for(const i in e){const s=e[i],o=n[i];if(vn(s))t.addValue(i,s);else if(vn(o))t.addValue(i,Ao(s,{owner:t}));else if(o!==s)if(t.hasValue(i)){const c=t.getValue(i);c.liveStyle===!0?c.jump(s):c.hasAnimated||c.set(s)}else{const c=t.getStaticValue(i);t.addValue(i,Ao(c!==void 0?c:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const Ox=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class p3{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:o,visualState:c},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Zy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Hn.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,bt.render(this.render,!1,!0))};const{latestValues:h,renderState:f}=c;this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=d,this.blockInitialAnimation=!!o,this.isControllingVariants=um(n),this.isVariantNode=wA(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...v}=this.scrapeMotionValuesFromProps(n,{},this);for(const _ in v){const E=v[_];h[_]!==void 0&&vn(E)&&E.set(h[_])}}mount(e){this.current=e,f3.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),PA.current||h3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:q0.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ds(this.notifyUpdate),ds(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=rc.has(e);i&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&bt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ql){const n=ql[e];if(!n)continue;const{isEnabled:i,Feature:s}=n;if(!this.features[e]&&s&&i(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Lt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<Ox.length;i++){const s=Ox[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,c=e[o];c&&(this.propEventSubscriptions[s]=this.on(s,c))}this.prevMotionValues=m3(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Ao(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(CS(i)||NS(i))?i=parseFloat(i):!TO(i)&&wa.test(n)&&(i=dA(e,n)),this.setBaseTarget(e,vn(i)?i.get():i)),vn(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const o=lv(this.props,n,this.presenceContext?.custom);o&&(i=o[e])}if(n&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!vn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new zy),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){tv.render(this.render)}}class jA extends p3{constructor(){super(...arguments),this.KeyframeResolver=uO}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;vn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function LA(t,{style:e,vars:n},i,s){const o=t.style;let c;for(c in e)o[c]=e[c];s?.applyProjectionStyles(o,i);for(c in n)o.setProperty(c,n[c])}function g3(t){return window.getComputedStyle(t)}class y3 extends jA{constructor(){super(...arguments),this.type="html",this.renderInstance=LA}readValueFromInstance(e,n){if(rc.has(n))return this.projection?.isProjecting?O0(n):NM(e,n);{const i=g3(e),s=(qy(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return VA(e,n)}build(e,n,i){sv(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return cv(e,n,i)}}const UA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function v3(t,e,n,i){LA(t,e,void 0,i);for(const s in e.attrs)t.setAttribute(UA.has(s)?s:uv(s),e.attrs[s])}class b3 extends jA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Lt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(rc.has(n)){const i=uA(n);return i&&i.default||0}return n=UA.has(n)?n:uv(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return RA(e,n,i)}build(e,n,i){EA(e,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,n,i,s){v3(e,n,i,s)}mount(e){this.isSVGTag=AA(e.tagName),super.mount(e)}}const _3=(t,e)=>ov(t)?new b3(e):new y3(e,{allowProjection:t!==D.Fragment});function Ll(t,e,n){const i=t.getProps();return lv(i,e,n!==void 0?n:i.custom,t)}const H0=t=>Array.isArray(t);function w3(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ao(n))}function x3(t){return H0(t)?t[t.length-1]||0:t}function dv(t,e){const n=Ll(t,e);let{transitionEnd:i={},transition:s={},...o}=n||{};o={...o,...i};for(const c in o){const d=x3(o[c]);w3(t,c,d)}}function T3(t){return!!(vn(t)&&t.add)}function $0(t,e){const n=t.getValue("willChange");if(T3(n))return n.add(e);if(!n&&us.WillChange){const i=new us.WillChange("auto");t.addValue("willChange",i),i.add(e)}}function zA(t){return t.props[NA]}const E3=t=>t!==null;function S3(t,{repeat:e,repeatType:n="loop"},i){const s=t.filter(E3),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[o]}const A3={type:"spring",stiffness:500,damping:25,restSpeed:10},C3=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),R3={type:"keyframes",duration:.8},N3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},I3=(t,{keyframes:e})=>e.length>2?R3:rc.has(t)?t.startsWith("scale")?C3(e[1]):A3:N3;function k3({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:s,repeat:o,repeatType:c,repeatDelay:d,from:h,elapsed:f,...g}){return!!Object.keys(g).length}const hv=(t,e,n,i={},s,o)=>c=>{const d=Jy(i,t)||{},h=d.delay||i.delay||0;let{elapsed:f=0}=i;f=f-vr(h);const g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-f,onUpdate:_=>{e.set(_),d.onUpdate&&d.onUpdate(_)},onComplete:()=>{c(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:o?void 0:s};k3(d)||Object.assign(g,I3(t,g)),g.duration&&(g.duration=vr(g.duration)),g.repeatDelay&&(g.repeatDelay=vr(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let v=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(U0(g),g.delay===0&&(v=!0)),(us.instantAnimations||us.skipAnimations)&&(v=!0,U0(g),g.delay=0),g.allowFlatten=!d.type&&!d.ease,v&&!o&&e.get()!==void 0){const _=S3(g.keyframes,d);if(_!==void 0){bt.update(()=>{g.onUpdate(_),g.onComplete()});return}}return d.isSync?new Wy(g):new ZM(g)};function D3({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function FA(t,e,{delay:n=0,transitionOverride:i,type:s}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:c,...d}=e;i&&(o=i);const h=[],f=s&&t.animationState&&t.animationState.getState()[s];for(const g in d){const v=t.getValue(g,t.latestValues[g]??null),_=d[g];if(_===void 0||f&&D3(f,g))continue;const E={delay:n,...Jy(o||{},g)},N=v.get();if(N!==void 0&&!v.isAnimating&&!Array.isArray(_)&&_===N&&!E.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const P=zA(t);if(P){const U=window.MotionHandoffAnimation(P,g,bt);U!==null&&(E.startTime=U,A=!0)}}$0(t,g),v.start(hv(g,v,_,t.shouldReduceMotion&&oA.has(g)?{type:!1}:E,t,A));const R=v.animation;R&&h.push(R)}return c&&Promise.all(h).then(()=>{bt.update(()=>{c&&dv(t,c)})}),h}function BA(t,e,n,i=0,s=1){const o=Array.from(t).sort((f,g)=>f.sortNodePosition(g)).indexOf(e),c=t.size,d=(c-1)*i;return typeof n=="function"?n(o,c):s===1?o*i:d-o*i}function G0(t,e,n={}){const i=Ll(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(FA(t,i,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:g,staggerDirection:v}=s;return M3(t,e,h,f,g,v,n)}:()=>Promise.resolve(),{when:d}=s;if(d){const[h,f]=d==="beforeChildren"?[o,c]:[c,o];return h().then(()=>f())}else return Promise.all([o(),c(n.delay)])}function M3(t,e,n=0,i=0,s=0,o=1,c){const d=[];for(const h of t.variantChildren)h.notify("AnimationStart",e),d.push(G0(h,e,{...c,delay:n+(typeof i=="function"?0:i)+BA(t.variantChildren,h,i,s,o)}).then(()=>h.notify("AnimationComplete",e)));return Promise.all(d)}function qA(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(o=>G0(t,o,n));i=Promise.all(s)}else if(typeof e=="string")i=G0(t,e,n);else{const s=typeof e=="function"?Ll(t,e,n.custom):e;i=Promise.all(FA(t,s,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}function HA(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}const O3=rv.length;function $A(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?$A(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<O3;n++){const i=rv[n],s=t.props[i];(Fu(s)||s===!1)&&(e[i]=s)}return e}const V3=[...iv].reverse(),P3=iv.length;function j3(t){return e=>Promise.all(e.map(({animation:n,options:i})=>qA(t,n,i)))}function L3(t){let e=j3(t),n=Vx(),i=!0;const s=h=>(f,g)=>{const v=Ll(t,g,h==="exit"?t.presenceContext?.custom:void 0);if(v){const{transition:_,transitionEnd:E,...N}=v;f={...f,...N,...E}}return f};function o(h){e=h(t)}function c(h){const{props:f}=t,g=$A(t.parent)||{},v=[],_=new Set;let E={},N=1/0;for(let R=0;R<P3;R++){const P=V3[R],U=n[P],L=f[P]!==void 0?f[P]:g[P],$=Fu(L),te=P===h?U.isActive:null;te===!1&&(N=R);let ne=L===g[P]&&L!==f[P]&&$;if(ne&&i&&t.manuallyAnimateOnMount&&(ne=!1),U.protectedKeys={...E},!U.isActive&&te===null||!L&&!U.prevProp||cm(L)||typeof L=="boolean")continue;const S=U3(U.prevProp,L);let I=S||P===h&&U.isActive&&!ne&&$||R>N&&$,M=!1;const z=Array.isArray(L)?L:[L];let O=z.reduce(s(P),{});te===!1&&(O={});const{prevResolvedValues:B={}}=U,j={...B,...O},Oe=ee=>{I=!0,_.has(ee)&&(M=!0,_.delete(ee)),U.needsAnimating[ee]=!0;const fe=t.getValue(ee);fe&&(fe.liveStyle=!1)};for(const ee in j){const fe=O[ee],de=B[ee];if(E.hasOwnProperty(ee))continue;let re=!1;H0(fe)&&H0(de)?re=!HA(fe,de):re=fe!==de,re?fe!=null?Oe(ee):_.add(ee):fe!==void 0&&_.has(ee)?Oe(ee):U.protectedKeys[ee]=!0}U.prevProp=L,U.prevResolvedValues=O,U.isActive&&(E={...E,...O}),i&&t.blockInitialAnimation&&(I=!1);const ce=ne&&S;I&&(!ce||M)&&v.push(...z.map(ee=>{const fe={type:P};if(typeof ee=="string"&&i&&!ce&&t.manuallyAnimateOnMount&&t.parent){const{parent:de}=t,re=Ll(de,ee);if(de.enteringChildren&&re){const{delayChildren:V}=re.transition||{};fe.delay=BA(de.enteringChildren,t,V)}}return{animation:ee,options:fe}}))}if(_.size){const R={};if(typeof f.initial!="boolean"){const P=Ll(t,Array.isArray(f.initial)?f.initial[0]:f.initial);P&&P.transition&&(R.transition=P.transition)}_.forEach(P=>{const U=t.getBaseTarget(P),L=t.getValue(P);L&&(L.liveStyle=!0),R[P]=U??null}),v.push({animation:R})}let A=!!v.length;return i&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(A=!1),i=!1,A?e(v):Promise.resolve()}function d(h,f){if(n[h].isActive===f)return Promise.resolve();t.variantChildren?.forEach(v=>v.animationState?.setActive(h,f)),n[h].isActive=f;const g=c(h);for(const v in n)n[v].protectedKeys={};return g}return{animateChanges:c,setActive:d,setAnimateFunction:o,getState:()=>n,reset:()=>{n=Vx()}}}function U3(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!HA(e,t):!1}function mo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Vx(){return{animate:mo(!0),whileInView:mo(),whileHover:mo(),whileTap:mo(),whileDrag:mo(),whileFocus:mo(),exit:mo()}}class Na{constructor(e){this.isMounted=!1,this.node=e}update(){}}class z3 extends Na{constructor(e){super(e),e.animationState||(e.animationState=L3(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();cm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let F3=0;class B3 extends Na{constructor(){super(...arguments),this.id=F3++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const q3={animation:{Feature:z3},exit:{Feature:B3}};function qu(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function ld(t){return{point:{x:t.pageX,y:t.pageY}}}const H3=t=>e=>nv(e)&&t(e,ld(e));function Cu(t,e,n,i){return qu(t,e,H3(n),i)}const GA=1e-4,$3=1-GA,G3=1+GA,KA=.01,K3=0-KA,Y3=0+KA;function Dn(t){return t.max-t.min}function Q3(t,e,n){return Math.abs(t-e)<=n}function Px(t,e,n,i=.5){t.origin=i,t.originPoint=xt(e.min,e.max,t.origin),t.scale=Dn(n)/Dn(e),t.translate=xt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=$3&&t.scale<=G3||isNaN(t.scale))&&(t.scale=1),(t.translate>=K3&&t.translate<=Y3||isNaN(t.translate))&&(t.translate=0)}function Ru(t,e,n,i){Px(t.x,e.x,n.x,i?i.originX:void 0),Px(t.y,e.y,n.y,i?i.originY:void 0)}function jx(t,e,n){t.min=n.min+e.min,t.max=t.min+Dn(e)}function X3(t,e,n){jx(t.x,e.x,n.x),jx(t.y,e.y,n.y)}function Lx(t,e,n){t.min=e.min-n.min,t.max=t.min+Dn(e)}function Nu(t,e,n){Lx(t.x,e.x,n.x),Lx(t.y,e.y,n.y)}function vi(t){return[t("x"),t("y")]}const YA=({current:t})=>t?t.ownerDocument.defaultView:null,Ux=(t,e)=>Math.abs(t-e);function W3(t,e){const n=Ux(t.x,e.x),i=Ux(t.y,e.y);return Math.sqrt(n**2+i**2)}class QA{constructor(e,n,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=t0(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,N=W3(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!E&&!N)return;const{point:A}=_,{timestamp:R}=pn;this.history.push({...A,timestamp:R});const{onStart:P,onMove:U}=this.handlers;E||(P&&P(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),U&&U(this.lastMoveEvent,_)},this.handlePointerMove=(_,E)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=e0(E,this.transformPagePoint),bt.update(this.updatePoint,!0)},this.handlePointerUp=(_,E)=>{this.end();const{onEnd:N,onSessionEnd:A,resumeAnimation:R}=this.handlers;if(this.dragSnapToOrigin&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=t0(_.type==="pointercancel"?this.lastMoveEventInfo:e0(E,this.transformPagePoint),this.history);this.startEvent&&N&&N(_,P),A&&A(_,P)},!nv(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=c,this.contextWindow=s||window;const d=ld(e),h=e0(d,this.transformPagePoint),{point:f}=h,{timestamp:g}=pn;this.history=[{...f,timestamp:g}];const{onSessionStart:v}=n;v&&v(e,t0(h,this.history)),this.removeListeners=sd(Cu(this.contextWindow,"pointermove",this.handlePointerMove),Cu(this.contextWindow,"pointerup",this.handlePointerUp),Cu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ds(this.updatePoint)}}function e0(t,e){return e?{point:e(t.point)}:t}function zx(t,e){return{x:t.x-e.x,y:t.y-e.y}}function t0({point:t},e){return{point:t,delta:zx(t,XA(e)),offset:zx(t,Z3(e)),velocity:J3(e,.1)}}function Z3(t){return t[0]}function XA(t){return t[t.length-1]}function J3(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const s=XA(t);for(;n>=0&&(i=t[n],!(s.timestamp-i.timestamp>vr(e)));)n--;if(!i)return{x:0,y:0};const o=wi(s.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const c={x:(s.x-i.x)/o,y:(s.y-i.y)/o};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function eV(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?xt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?xt(n,t,i.max):Math.min(t,n)),t}function Fx(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function tV(t,{top:e,left:n,bottom:i,right:s}){return{x:Fx(t.x,n,s),y:Fx(t.y,e,i)}}function Bx(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function nV(t,e){return{x:Bx(t.x,e.x),y:Bx(t.y,e.y)}}function iV(t,e){let n=.5;const i=Dn(t),s=Dn(e);return s>i?n=Lu(e.min,e.max-i,t.min):i>s&&(n=Lu(t.min,t.max-s,e.min)),cs(0,1,n)}function rV(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const K0=.35;function sV(t=K0){return t===!1?t=0:t===!0&&(t=K0),{x:qx(t,"left","right"),y:qx(t,"top","bottom")}}function qx(t,e,n){return{min:Hx(t,e),max:Hx(t,n)}}function Hx(t,e){return typeof t=="number"?t:t[e]||0}const aV=new WeakMap;class oV{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Lt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=v=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ld(v).point)},c=(v,_)=>{const{drag:E,dragPropagation:N,onDragStart:A}=this.getProps();if(E&&!N&&(this.openDragLock&&this.openDragLock(),this.openDragLock=mO(E),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vi(P=>{let U=this.getAxisMotionValue(P).get()||0;if(br.test(U)){const{projection:L}=this.visualElement;if(L&&L.layout){const $=L.layout.layoutBox[P];$&&(U=Dn($)*(parseFloat(U)/100))}}this.originPoint[P]=U}),A&&bt.postRender(()=>A(v,_)),$0(this.visualElement,"transform");const{animationState:R}=this.visualElement;R&&R.setActive("whileDrag",!0)},d=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_;const{dragPropagation:E,dragDirectionLock:N,onDirectionLock:A,onDrag:R}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:P}=_;if(N&&this.currentDirection===null){this.currentDirection=lV(P),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",_.point,P),this.updateAxis("y",_.point,P),this.visualElement.render(),R&&R(v,_)},h=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_,this.stop(v,_),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>vi(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new QA(e,{onSessionStart:o,onStart:c,onMove:d,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:i,contextWindow:YA(this.visualElement)})}stop(e,n){const i=e||this.latestPointerEvent,s=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!i)return;const{velocity:c}=s;this.startAnimation(c);const{onDragEnd:d}=this.getProps();d&&bt.postRender(()=>d(i,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:s}=this.getProps();if(!i||!Wh(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let c=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(c=eV(c,this.constraints[e],this.elastic[e])),o.set(c)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&Dl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=tV(i.layoutBox,e):this.constraints=!1,this.elastic=sV(n),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&vi(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=rV(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Dl(e))return!1;const i=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=d3(i,s.root,this.visualElement.getTransformPagePoint());let c=nV(s.layout.layoutBox,o);if(n){const d=n(l3(c));this.hasMutatedConstraints=!!d,d&&(c=DA(d))}return c}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:s,dragTransition:o,dragSnapToOrigin:c,onDragTransitionEnd:d}=this.getProps(),h=this.constraints||{},f=vi(g=>{if(!Wh(g,n,this.currentDirection))return;let v=h&&h[g]||{};c&&(v={min:0,max:0});const _=s?200:1e6,E=s?40:1e7,N={type:"inertia",velocity:i?e[g]:0,bounceStiffness:_,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(g,N)});return Promise.all(f).then(d)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return $0(this.visualElement,e),i.start(hv(e,i,0,n,this.visualElement,!1))}stopAnimation(){vi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){vi(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),s=i[n];return s||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){vi(n=>{const{drag:i}=this.getProps();if(!Wh(n,i,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:c,max:d}=s.layout.layoutBox[n];o.set(e[n]-xt(c,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Dl(n)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};vi(c=>{const d=this.getAxisMotionValue(c);if(d&&this.constraints!==!1){const h=d.get();s[c]=iV({min:h,max:h},this.constraints[c])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),vi(c=>{if(!Wh(c,e,null))return;const d=this.getAxisMotionValue(c),{min:h,max:f}=this.constraints[c];d.set(xt(h,f,s[c]))})}addListeners(){if(!this.visualElement.current)return;aV.set(this.visualElement,this);const e=this.visualElement.current,n=Cu(e,"pointerdown",h=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();Dl(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),bt.read(i);const c=qu(window,"resize",()=>this.scalePositionWithinConstraints()),d=s.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(vi(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=h[g].translate,v.set(v.get()+h[g].translate))}),this.visualElement.render())}));return()=>{c(),n(),o(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:c=K0,dragMomentum:d=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:s,dragConstraints:o,dragElastic:c,dragMomentum:d}}}function Wh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function lV(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class cV extends Na{constructor(e){super(e),this.removeGroupControls=xi,this.removeListeners=xi,this.controls=new oV(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||xi}unmount(){this.removeGroupControls(),this.removeListeners()}}const $x=t=>(e,n)=>{t&&bt.postRender(()=>t(e,n))};class uV extends Na{constructor(){super(...arguments),this.removePointerDownListener=xi}onPointerDown(e){this.session=new QA(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:YA(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:$x(e),onStart:$x(n),onMove:i,onEnd:(o,c)=>{delete this.session,s&&bt.postRender(()=>s(o,c))}}}mount(){this.removePointerDownListener=Cu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const hf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Gx(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const gu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ke.test(t))t=parseFloat(t);else return t;const n=Gx(t,e.target.x),i=Gx(t,e.target.y);return`${n}% ${i}%`}},dV={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,s=wa.parse(t);if(s.length>5)return i;const o=wa.createTransformer(t),c=typeof s[0]!="number"?1:0,d=n.x.scale*e.x,h=n.y.scale*e.y;s[0+c]/=d,s[1+c]/=h;const f=xt(d,h,.5);return typeof s[2+c]=="number"&&(s[2+c]/=f),typeof s[3+c]=="number"&&(s[3+c]/=f),o(s)}};let n0=!1;class hV extends D.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:s}=this.props,{projection:o}=e;PO(fV),o&&(n.group&&n.group.add(o),i&&i.register&&s&&i.register(o),n0&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),hf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:s,isPresent:o}=this.props,{projection:c}=i;return c&&(c.isPresent=o,n0=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==o?c.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?c.promote():c.relegate()||bt.postRender(()=>{const d=c.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),tv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:s}=e;n0=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function WA(t){const[e,n]=vA(),i=D.useContext(Oy);return b.jsx(hV,{...t,layoutGroup:i,switchLayoutGroup:D.useContext(IA),isPresent:e,safeToRemove:n})}const fV={borderRadius:{...gu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:gu,borderTopRightRadius:gu,borderBottomLeftRadius:gu,borderBottomRightRadius:gu,boxShadow:dV};function mV(t,e,n){const i=vn(t)?t:Ao(t);return i.start(hv("",i,e,n)),i.animation}const pV=(t,e)=>t.depth-e.depth;class gV{constructor(){this.children=[],this.isDirty=!1}add(e){Py(this.children,e),this.isDirty=!0}remove(e){jy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(pV),this.isDirty=!1,this.children.forEach(e)}}function yV(t,e){const n=Hn.now(),i=({timestamp:s})=>{const o=s-n;o>=e&&(ds(i),t(o-e))};return bt.setup(i,!0),()=>ds(i)}const ZA=["TopLeft","TopRight","BottomLeft","BottomRight"],vV=ZA.length,Kx=t=>typeof t=="string"?parseFloat(t):t,Yx=t=>typeof t=="number"||ke.test(t);function bV(t,e,n,i,s,o){s?(t.opacity=xt(0,n.opacity??1,_V(i)),t.opacityExit=xt(e.opacity??1,0,wV(i))):o&&(t.opacity=xt(e.opacity??1,n.opacity??1,i));for(let c=0;c<vV;c++){const d=`border${ZA[c]}Radius`;let h=Qx(e,d),f=Qx(n,d);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||Yx(h)===Yx(f)?(t[d]=Math.max(xt(Kx(h),Kx(f),i),0),(br.test(f)||br.test(h))&&(t[d]+="%")):t[d]=f}(e.rotate||n.rotate)&&(t.rotate=xt(e.rotate||0,n.rotate||0,i))}function Qx(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const _V=JA(0,.5,jS),wV=JA(.5,.95,xi);function JA(t,e,n){return i=>i<t?0:i>e?1:n(Lu(t,e,i))}function Xx(t,e){t.min=e.min,t.max=e.max}function yi(t,e){Xx(t.x,e.x),Xx(t.y,e.y)}function Wx(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Zx(t,e,n,i,s){return t-=e,t=If(t,1/n,i),s!==void 0&&(t=If(t,1/s,i)),t}function xV(t,e=0,n=1,i=.5,s,o=t,c=t){if(br.test(e)&&(e=parseFloat(e),e=xt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let d=xt(o.min,o.max,i);t===o&&(d-=e),t.min=Zx(t.min,e,n,d,s),t.max=Zx(t.max,e,n,d,s)}function Jx(t,e,[n,i,s],o,c){xV(t,e[n],e[i],e[s],e.scale,o,c)}const TV=["x","scaleX","originX"],EV=["y","scaleY","originY"];function eT(t,e,n,i){Jx(t.x,e,TV,n?n.x:void 0,i?i.x:void 0),Jx(t.y,e,EV,n?n.y:void 0,i?i.y:void 0)}function tT(t){return t.translate===0&&t.scale===1}function e2(t){return tT(t.x)&&tT(t.y)}function nT(t,e){return t.min===e.min&&t.max===e.max}function SV(t,e){return nT(t.x,e.x)&&nT(t.y,e.y)}function iT(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function t2(t,e){return iT(t.x,e.x)&&iT(t.y,e.y)}function rT(t){return Dn(t.x)/Dn(t.y)}function sT(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class AV{constructor(){this.members=[]}add(e){Py(this.members,e),e.scheduleRender()}remove(e){if(jy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let i;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function CV(t,e,n){let i="";const s=t.x.translate/e.x,o=t.y.translate/e.y,c=n?.z||0;if((s||o||c)&&(i=`translate3d(${s}px, ${o}px, ${c}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:g,rotateX:v,rotateY:_,skewX:E,skewY:N}=n;f&&(i=`perspective(${f}px) ${i}`),g&&(i+=`rotate(${g}deg) `),v&&(i+=`rotateX(${v}deg) `),_&&(i+=`rotateY(${_}deg) `),E&&(i+=`skewX(${E}deg) `),N&&(i+=`skewY(${N}deg) `)}const d=t.x.scale*e.x,h=t.y.scale*e.y;return(d!==1||h!==1)&&(i+=`scale(${d}, ${h})`),i||"none"}const i0=["","X","Y","Z"],RV=1e3;let NV=0;function r0(t,e,n,i){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),i&&(i[t]=0))}function n2(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=zA(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",bt,!(s||o))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&n2(i)}function i2({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(c={},d=e?.()){this.id=NV++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(DV),this.nodes.forEach(PV),this.nodes.forEach(jV),this.nodes.forEach(MV)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new gV)}addEventListener(c,d){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new zy),this.eventHandlers.get(c).add(d)}notifyListeners(c,...d){const h=this.eventHandlers.get(c);h&&h.notify(...d)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=yA(c)&&!_O(c),this.instance=c;const{layoutId:d,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||d)&&(this.isLayoutDirty=!0),t){let g,v=0;const _=()=>this.root.updateBlockedByResize=!1;bt.read(()=>{v=window.innerWidth}),t(c,()=>{const E=window.innerWidth;E!==v&&(v=E,this.root.updateBlockedByResize=!0,g&&g(),g=yV(_,250),hf.hasAnimatedSinceResize&&(hf.hasAnimatedSinceResize=!1,this.nodes.forEach(lT)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&f&&(d||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeLayoutChanged:_,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||f.getDefaultTransition()||BV,{onLayoutAnimationStart:A,onLayoutAnimationComplete:R}=f.getProps(),P=!this.targetLayout||!t2(this.targetLayout,E),U=!v&&_;if(this.options.layoutRoot||this.resumeFrom||U||v&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const L={...Jy(N,"layout"),onPlay:A,onComplete:R};(f.shouldReduceMotion||this.options.layoutRoot)&&(L.delay=0,L.type=!1),this.startAnimation(L),this.setAnimationOrigin(g,U)}else v||lT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ds(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(LV),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&n2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const v=this.path[g];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:d,layout:h}=this.options;if(d===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(aT);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(oT);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(VV),this.nodes.forEach(IV),this.nodes.forEach(kV)):this.nodes.forEach(oT),this.clearAllSnapshots();const d=Hn.now();pn.delta=cs(0,1e3/60,d-pn.timestamp),pn.timestamp=d,pn.isProcessing=!0,Gg.update.process(pn),Gg.preRender.process(pn),Gg.render.process(pn),pn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,tv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(OV),this.sharedNodes.forEach(UV)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,bt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){bt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Dn(this.snapshot.measuredBox.x)&&!Dn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Lt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(d=!1),d&&this.instance){const h=i(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:h,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!s)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!e2(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;c&&this.instance&&(d||go(this.latestValues)||g)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const d=this.measurePageBox();let h=this.removeElementScroll(d);return c&&(h=this.removeTransform(h)),qV(h),{animationId:this.root.animationId,measuredBox:d,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return Lt();const d=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(HV))){const{scroll:f}=this.root;f&&(Ml(d.x,f.offset.x),Ml(d.y,f.offset.y))}return d}removeElementScroll(c){const d=Lt();if(yi(d,c),this.scroll?.wasRoot)return d;for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:g,options:v}=f;f!==this.root&&g&&v.layoutScroll&&(g.wasRoot&&yi(d,c),Ml(d.x,g.offset.x),Ml(d.y,g.offset.y))}return d}applyTransform(c,d=!1){const h=Lt();yi(h,c);for(let f=0;f<this.path.length;f++){const g=this.path[f];!d&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Ol(h,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),go(g.latestValues)&&Ol(h,g.latestValues)}return go(this.latestValues)&&Ol(h,this.latestValues),h}removeTransform(c){const d=Lt();yi(d,c);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!go(f.latestValues))continue;F0(f.latestValues)&&f.updateSnapshot();const g=Lt(),v=f.measurePageBox();yi(g,v),eT(d,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return go(this.latestValues)&&eT(d,this.latestValues),d}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==pn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(c||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=pn.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Lt(),this.relativeTargetOrigin=Lt(),Nu(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),yi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Lt(),this.targetWithTransforms=Lt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),X3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):yi(this.target,this.layout.layoutBox),OA(this.target,this.targetDelta)):yi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Lt(),this.relativeTargetOrigin=Lt(),Nu(this.relativeTargetOrigin,this.target,_.target),yi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||F0(this.parent.latestValues)||MA(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const c=this.getLead(),d=!!this.resumingFrom||this!==c;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===pn.timestamp&&(h=!1),h)return;const{layout:f,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||g))return;yi(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,_=this.treeScale.y;u3(this.layoutCorrected,this.treeScale,this.path,d),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Lt());const{target:E}=c;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Wx(this.prevProjectionDelta.x,this.projectionDelta.x),Wx(this.prevProjectionDelta.y,this.projectionDelta.y)),Ru(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==_||!sT(this.projectionDelta.x,this.prevProjectionDelta.x)||!sT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Vl(),this.projectionDelta=Vl(),this.projectionDeltaWithTransform=Vl()}setAnimationOrigin(c,d=!1){const h=this.snapshot,f=h?h.latestValues:{},g={...this.latestValues},v=Vl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const _=Lt(),E=h?h.source:void 0,N=this.layout?this.layout.source:void 0,A=E!==N,R=this.getStack(),P=!R||R.members.length<=1,U=!!(A&&!P&&this.options.crossfade===!0&&!this.path.some(FV));this.animationProgress=0;let L;this.mixTargetDelta=$=>{const te=$/1e3;cT(v.x,c.x,te),cT(v.y,c.y,te),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Nu(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),zV(this.relativeTarget,this.relativeTargetOrigin,_,te),L&&SV(this.relativeTarget,L)&&(this.isProjectionDirty=!1),L||(L=Lt()),yi(L,this.relativeTarget)),A&&(this.animationValues=g,bV(g,f,this.latestValues,te,U,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=te},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ds(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=bt.update(()=>{hf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ao(0)),this.currentAnimation=mV(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),c.onUpdate&&c.onUpdate(d)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(RV),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:d,target:h,layout:f,latestValues:g}=c;if(!(!d||!h||!f)){if(this!==c&&this.layout&&f&&r2(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||Lt();const v=Dn(this.layout.layoutBox.x);h.x.min=c.target.x.min,h.x.max=h.x.min+v;const _=Dn(this.layout.layoutBox.y);h.y.min=c.target.y.min,h.y.max=h.y.min+_}yi(d,h),Ol(d,g),Ru(this.projectionDeltaWithTransform,this.layoutCorrected,d,g)}}registerSharedNode(c,d){this.sharedNodes.has(c)||this.sharedNodes.set(c,new AV),this.sharedNodes.get(c).add(d);const f=d.options.initialPromotionConfig;d.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(d):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:d,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),c&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let d=!1;const{latestValues:h}=c;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(d=!0),!d)return;const f={};h.z&&r0("z",c,f,this.animationValues);for(let g=0;g<i0.length;g++)r0(`rotate${i0[g]}`,c,f,this.animationValues),r0(`skew${i0[g]}`,c,f,this.animationValues);c.render();for(const g in f)c.setStaticValue(g,f[g]),this.animationValues&&(this.animationValues[g]=f[g]);c.scheduleRender()}applyProjectionStyles(c,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=df(d?.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=df(d?.pointerEvents)||""),this.hasProjected&&!go(this.latestValues)&&(c.transform=h?h({},""):"none",this.hasProjected=!1);return}c.visibility="";const g=f.animationValues||f.latestValues;this.applyTransformsToTarget();let v=CV(this.projectionDeltaWithTransform,this.treeScale,g);h&&(v=h(g,v)),c.transform=v;const{x:_,y:E}=this.projectionDelta;c.transformOrigin=`${_.origin*100}% ${E.origin*100}% 0`,f.animationValues?c.opacity=f===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:c.opacity=f===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const N in Bu){if(g[N]===void 0)continue;const{correct:A,applyTo:R,isCSSVariable:P}=Bu[N],U=v==="none"?g[N]:A(g[N],f);if(R){const L=R.length;for(let $=0;$<L;$++)c[R[$]]=U}else P?this.options.visualElement.renderState.vars[N]=U:c[N]=U}this.options.layoutId&&(c.pointerEvents=f===this?df(d?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(aT),this.root.sharedNodes.clear()}}}function IV(t){t.updateLayout()}function kV(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?vi(g=>{const v=o?e.measuredBox[g]:e.layoutBox[g],_=Dn(v);v.min=n[g].min,v.max=v.min+_}):r2(s,e.layoutBox,n)&&vi(g=>{const v=o?e.measuredBox[g]:e.layoutBox[g],_=Dn(n[g]);v.max=v.min+_,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+_)});const c=Vl();Ru(c,n,e.layoutBox);const d=Vl();o?Ru(d,t.applyTransform(i,!0),e.measuredBox):Ru(d,n,e.layoutBox);const h=!e2(c);let f=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:_}=g;if(v&&_){const E=Lt();Nu(E,e.layoutBox,v.layoutBox);const N=Lt();Nu(N,n,_.layoutBox),t2(E,N)||(f=!0),g.options.layoutRoot&&(t.relativeTarget=N,t.relativeTargetOrigin=E,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:d,layoutDelta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function DV(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function MV(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function OV(t){t.clearSnapshot()}function aT(t){t.clearMeasurements()}function oT(t){t.isLayoutDirty=!1}function VV(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function lT(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function PV(t){t.resolveTargetDelta()}function jV(t){t.calcProjection()}function LV(t){t.resetSkewAndRotation()}function UV(t){t.removeLeadSnapshot()}function cT(t,e,n){t.translate=xt(e.translate,0,n),t.scale=xt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function uT(t,e,n,i){t.min=xt(e.min,n.min,i),t.max=xt(e.max,n.max,i)}function zV(t,e,n,i){uT(t.x,e.x,n.x,i),uT(t.y,e.y,n.y,i)}function FV(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const BV={duration:.45,ease:[.4,0,.1,1]},dT=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),hT=dT("applewebkit/")&&!dT("chrome/")?Math.round:xi;function fT(t){t.min=hT(t.min),t.max=hT(t.max)}function qV(t){fT(t.x),fT(t.y)}function r2(t,e,n){return t==="position"||t==="preserve-aspect"&&!Q3(rT(e),rT(n),.2)}function HV(t){return t!==t.root&&t.scroll?.wasRoot}const $V=i2({attachResizeListener:(t,e)=>qu(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),s0={current:void 0},s2=i2({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!s0.current){const t=new $V({});t.mount(window),t.setOptions({layoutScroll:!0}),s0.current=t}return s0.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),GV={pan:{Feature:uV},drag:{Feature:cV,ProjectionNode:s2,MeasureLayout:WA}};function mT(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=i[s];o&&bt.postRender(()=>o(e,ld(e)))}class KV extends Na{mount(){const{current:e}=this.node;e&&(this.unmount=pO(e,(n,i)=>(mT(this.node,i,"Start"),s=>mT(this.node,s,"End"))))}unmount(){}}class YV extends Na{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sd(qu(this.node.current,"focus",()=>this.onFocus()),qu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function pT(t,e,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=i[s];o&&bt.postRender(()=>o(e,ld(e)))}class QV extends Na{mount(){const{current:e}=this.node;e&&(this.unmount=bO(e,(n,i)=>(pT(this.node,i,"Start"),(s,{success:o})=>pT(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Y0=new WeakMap,a0=new WeakMap,XV=t=>{const e=Y0.get(t.target);e&&e(t)},WV=t=>{t.forEach(XV)};function ZV({root:t,...e}){const n=t||document;a0.has(n)||a0.set(n,{});const i=a0.get(n),s=JSON.stringify(e);return i[s]||(i[s]=new IntersectionObserver(WV,{root:t,...e})),i[s]}function JV(t,e,n){const i=ZV(e);return Y0.set(t,n),i.observe(t),()=>{Y0.delete(t),i.unobserve(t)}}const eP={some:0,all:1};class tP extends Na{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:s="some",once:o}=e,c={root:n?n.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:eP[s]},d=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:v}=this.node.getProps(),_=f?g:v;_&&_(h)};return JV(this.node.current,c,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(nP(e,n))&&this.startObserver()}unmount(){}}function nP({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const iP={inView:{Feature:tP},tap:{Feature:QV},focus:{Feature:YV},hover:{Feature:KV}},rP={layout:{ProjectionNode:s2,MeasureLayout:WA}},sP={...q3,...iP,...GV,...rP},Vo=o3(sP,_3);function a2(t){const e=bs(()=>Ao(t)),{isStatic:n}=D.useContext(am);if(n){const[,i]=D.useState(t);D.useEffect(()=>e.on("change",i),[])}return e}function o2(t,e){const n=a2(e()),i=()=>n.set(e());return i(),rm(()=>{const s=()=>bt.preRender(i,!1,!0),o=t.map(c=>c.on("change",s));return()=>{o.forEach(c=>c()),ds(i)}}),n}function aP(t){Au.current=[],t();const e=o2(Au.current,t);return Au.current=void 0,e}function oP(t,e,n,i){if(typeof t=="function")return aP(t);const s=typeof e=="function"?e:wO(e,n,i);return Array.isArray(t)?gT(t,s):gT([t],([o])=>s(o))}function gT(t,e){const n=bs(()=>[]);return o2(t,()=>{n.length=0;const i=t.length;for(let s=0;s<i;s++)n[s]=t[s].get();return e(n)})}function lP(t){t.values.forEach(e=>e.stop())}function Q0(t,e){[...e].reverse().forEach(i=>{const s=t.getVariant(i);s&&dv(t,s),t.variantChildren&&t.variantChildren.forEach(o=>{Q0(o,e)})})}function cP(t,e){if(Array.isArray(e))return Q0(t,e);if(typeof e=="string")return Q0(t,[e]);dv(t,e)}function uP(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,i){const s=[];return t.forEach(o=>{s.push(qA(o,n,{transitionOverride:i}))}),Promise.all(s)},set(n){return t.forEach(i=>{cP(i,n)})},stop(){t.forEach(n=>{lP(n)})},mount(){return()=>{e.stop()}}};return e}function dP(){const t=bs(uP);return rm(t.mount,[]),t}const hP=dP;class fP{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,n){this.componentControls.forEach(i=>{i.start(e.nativeEvent||e,n)})}cancel(){this.componentControls.forEach(e=>{e.cancel()})}stop(){this.componentControls.forEach(e=>{e.stop()})}}const mP=()=>new fP;function pP(){return bs(mP)}const l2=D.createContext(null);function gP(t,e,n,i){if(!i)return t;const s=t.findIndex(g=>g.value===e);if(s===-1)return t;const o=i>0?1:-1,c=t[s+o];if(!c)return t;const d=t[s],h=c.layout,f=xt(h.min,h.max,.5);return o===1&&d.layout.max+n>f||o===-1&&d.layout.min+n<f?C4(t,s,s+o):t}function yP({children:t,as:e="ul",axis:n="y",onReorder:i,values:s,...o},c){const d=bs(()=>Vo[e]),h=[],f=D.useRef(!1),g={axis:n,registerItem:(v,_)=>{const E=h.findIndex(N=>v===N.value);E!==-1?h[E].layout=_[n]:h.push({value:v,layout:_[n]}),h.sort(_P)},updateOrder:(v,_,E)=>{if(f.current)return;const N=gP(h,v,_,E);h!==N&&(f.current=!0,i(N.map(bP).filter(A=>s.indexOf(A)!==-1)))}};return D.useEffect(()=>{f.current=!1}),b.jsx(d,{...o,ref:c,ignoreStrict:!0,children:b.jsx(l2.Provider,{value:g,children:t})})}const vP=D.forwardRef(yP);function bP(t){return t.value}function _P(t,e){return t.layout.min-e.layout.min}function yT(t,e=0){return vn(t)?t:a2(e)}function wP({children:t,style:e={},value:n,as:i="li",onDrag:s,layout:o=!0,...c},d){const h=bs(()=>Vo[i]),f=D.useContext(l2),g={x:yT(e.x),y:yT(e.y)},v=oP([g.x,g.y],([A,R])=>A||R?1:"unset"),{axis:_,registerItem:E,updateOrder:N}=f;return b.jsx(h,{drag:_,...c,dragSnapToOrigin:!0,style:{...e,x:g.x,y:g.y,zIndex:v},layout:o,onDrag:(A,R)=>{const{velocity:P}=R;P[_]&&N(n,g[_].get(),P[_]),s&&s(A,R)},onLayoutMeasure:A=>E(n,A),ref:d,ignoreStrict:!0,children:t})}const xP=D.forwardRef(wP),vT=t=>{let e;const n=new Set,i=(f,g)=>{const v=typeof f=="function"?f(e):f;if(!Object.is(v,e)){const _=e;e=g??(typeof v!="object"||v===null)?v:Object.assign({},e,v),n.forEach(E=>E(e,_))}},s=()=>e,d={setState:i,getState:s,getInitialState:()=>h,subscribe:f=>(n.add(f),()=>n.delete(f))},h=e=t(i,s,d);return d},TP=(t=>t?vT(t):vT),EP=t=>t;function SP(t,e=EP){const n=Gh.useSyncExternalStore(t.subscribe,Gh.useCallback(()=>e(t.getState()),[t,e]),Gh.useCallback(()=>e(t.getInitialState()),[t,e]));return Gh.useDebugValue(n),n}const bT=t=>{const e=TP(t),n=i=>SP(e,i);return Object.assign(n,e),n},dm=(t=>t?bT(t):bT);function AP(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var o;const c=h=>h===null?null:JSON.parse(h,void 0),d=(o=n.getItem(s))!=null?o:null;return d instanceof Promise?d.then(c):c(d)},setItem:(s,o)=>n.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>n.removeItem(s)}}const X0=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(i){return X0(i)(n)},catch(i){return this}}}catch(n){return{then(i){return this},catch(i){return X0(i)(n)}}}},CP=(t,e)=>(n,i,s)=>{let o={storage:AP(()=>localStorage),partialize:A=>A,version:0,merge:(A,R)=>({...R,...A}),...e},c=!1;const d=new Set,h=new Set;let f=o.storage;if(!f)return t((...A)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...A)},i,s);const g=()=>{const A=o.partialize({...i()});return f.setItem(o.name,{state:A,version:o.version})},v=s.setState;s.setState=(A,R)=>(v(A,R),g());const _=t((...A)=>(n(...A),g()),i,s);s.getInitialState=()=>_;let E;const N=()=>{var A,R;if(!f)return;c=!1,d.forEach(U=>{var L;return U((L=i())!=null?L:_)});const P=((R=o.onRehydrateStorage)==null?void 0:R.call(o,(A=i())!=null?A:_))||void 0;return X0(f.getItem.bind(f))(o.name).then(U=>{if(U)if(typeof U.version=="number"&&U.version!==o.version){if(o.migrate){const L=o.migrate(U.state,U.version);return L instanceof Promise?L.then($=>[!0,$]):[!0,L]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,U.state];return[!1,void 0]}).then(U=>{var L;const[$,te]=U;if(E=o.merge(te,(L=i())!=null?L:_),n(E,!0),$)return g()}).then(()=>{P?.(E,void 0),E=i(),c=!0,h.forEach(U=>U(E))}).catch(U=>{P?.(void 0,U)})};return s.persist={setOptions:A=>{o={...o,...A},A.storage&&(f=A.storage)},clearStorage:()=>{f?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>N(),hasHydrated:()=>c,onHydrate:A=>(d.add(A),()=>{d.delete(A)}),onFinishHydration:A=>(h.add(A),()=>{h.delete(A)})},o.skipHydration||N(),E||_},fv=CP;var Pl=9e15,Ia=1e9,W0="0123456789abcdef",kf="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Df="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Z0={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Pl,maxE:Pl,crypto:!1},c2,ns,De=!0,hm="[DecimalError] ",xa=hm+"Invalid argument: ",u2=hm+"Precision limit exceeded",d2=hm+"crypto unavailable",h2="[object Decimal]",Cn=Math.floor,en=Math.pow,RP=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,NP=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,IP=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,f2=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,zi=1e7,Re=7,kP=9007199254740991,DP=kf.length-1,J0=Df.length-1,ue={toStringTag:h2};ue.absoluteValue=ue.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Ee(t)};ue.ceil=function(){return Ee(new this.constructor(this),this.e+1,2)};ue.clampedTo=ue.clamp=function(t,e){var n,i=this,s=i.constructor;if(t=new s(t),e=new s(e),!t.s||!e.s)return new s(NaN);if(t.gt(e))throw Error(xa+e);return n=i.cmp(t),n<0?t:i.cmp(e)>0?e:new s(i)};ue.comparedTo=ue.cmp=function(t){var e,n,i,s,o=this,c=o.d,d=(t=new o.constructor(t)).d,h=o.s,f=t.s;if(!c||!d)return!h||!f?NaN:h!==f?h:c===d?0:!c^h<0?1:-1;if(!c[0]||!d[0])return c[0]?h:d[0]?-f:0;if(h!==f)return h;if(o.e!==t.e)return o.e>t.e^h<0?1:-1;for(i=c.length,s=d.length,e=0,n=i<s?i:s;e<n;++e)if(c[e]!==d[e])return c[e]>d[e]^h<0?1:-1;return i===s?0:i>s^h<0?1:-1};ue.cosine=ue.cos=function(){var t,e,n=this,i=n.constructor;return n.d?n.d[0]?(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+Re,i.rounding=1,n=MP(i,v2(i,n)),i.precision=t,i.rounding=e,Ee(ns==2||ns==3?n.neg():n,t,e,!0)):new i(1):new i(NaN)};ue.cubeRoot=ue.cbrt=function(){var t,e,n,i,s,o,c,d,h,f,g=this,v=g.constructor;if(!g.isFinite()||g.isZero())return new v(g);for(De=!1,o=g.s*en(g.s*g,1/3),!o||Math.abs(o)==1/0?(n=bn(g.d),t=g.e,(o=(t-n.length+1)%3)&&(n+=o==1||o==-2?"0":"00"),o=en(n,1/3),t=Cn((t+1)/3)-(t%3==(t<0?-1:2)),o==1/0?n="5e"+t:(n=o.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),i=new v(n),i.s=g.s):i=new v(o.toString()),c=(t=v.precision)+3;;)if(d=i,h=d.times(d).times(d),f=h.plus(g),i=pt(f.plus(g).times(d),f.plus(h),c+2,1),bn(d.d).slice(0,c)===(n=bn(i.d)).slice(0,c))if(n=n.slice(c-3,c+1),n=="9999"||!s&&n=="4999"){if(!s&&(Ee(d,t+1,0),d.times(d).times(d).eq(g))){i=d;break}c+=4,s=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Ee(i,t+1,1),e=!i.times(i).times(i).eq(g));break}return De=!0,Ee(i,t,v.rounding,e)};ue.decimalPlaces=ue.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-Cn(this.e/Re))*Re,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};ue.dividedBy=ue.div=function(t){return pt(this,new this.constructor(t))};ue.dividedToIntegerBy=ue.divToInt=function(t){var e=this,n=e.constructor;return Ee(pt(e,new n(t),0,1,1),n.precision,n.rounding)};ue.equals=ue.eq=function(t){return this.cmp(t)===0};ue.floor=function(){return Ee(new this.constructor(this),this.e+1,3)};ue.greaterThan=ue.gt=function(t){return this.cmp(t)>0};ue.greaterThanOrEqualTo=ue.gte=function(t){var e=this.cmp(t);return e==1||e===0};ue.hyperbolicCosine=ue.cosh=function(){var t,e,n,i,s,o=this,c=o.constructor,d=new c(1);if(!o.isFinite())return new c(o.s?1/0:NaN);if(o.isZero())return d;n=c.precision,i=c.rounding,c.precision=n+Math.max(o.e,o.sd())+4,c.rounding=1,s=o.d.length,s<32?(t=Math.ceil(s/3),e=(1/mm(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),o=Hl(c,1,o.times(e),new c(1),!0);for(var h,f=t,g=new c(8);f--;)h=o.times(o),o=d.minus(h.times(g.minus(h.times(g))));return Ee(o,c.precision=n,c.rounding=i,!0)};ue.hyperbolicSine=ue.sinh=function(){var t,e,n,i,s=this,o=s.constructor;if(!s.isFinite()||s.isZero())return new o(s);if(e=o.precision,n=o.rounding,o.precision=e+Math.max(s.e,s.sd())+4,o.rounding=1,i=s.d.length,i<3)s=Hl(o,2,s,s,!0);else{t=1.4*Math.sqrt(i),t=t>16?16:t|0,s=s.times(1/mm(5,t)),s=Hl(o,2,s,s,!0);for(var c,d=new o(5),h=new o(16),f=new o(20);t--;)c=s.times(s),s=s.times(d.plus(c.times(h.times(c).plus(f))))}return o.precision=e,o.rounding=n,Ee(s,e,n,!0)};ue.hyperbolicTangent=ue.tanh=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+7,i.rounding=1,pt(n.sinh(),n.cosh(),i.precision=t,i.rounding=e)):new i(n.s)};ue.inverseCosine=ue.acos=function(){var t=this,e=t.constructor,n=t.abs().cmp(1),i=e.precision,s=e.rounding;return n!==-1?n===0?t.isNeg()?gr(e,i,s):new e(0):new e(NaN):t.isZero()?gr(e,i+4,s).times(.5):(e.precision=i+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=i,e.rounding=s,t.times(2))};ue.inverseHyperbolicCosine=ue.acosh=function(){var t,e,n=this,i=n.constructor;return n.lte(1)?new i(n.eq(1)?0:NaN):n.isFinite()?(t=i.precision,e=i.rounding,i.precision=t+Math.max(Math.abs(n.e),n.sd())+4,i.rounding=1,De=!1,n=n.times(n).minus(1).sqrt().plus(n),De=!0,i.precision=t,i.rounding=e,n.ln()):new i(n)};ue.inverseHyperbolicSine=ue.asinh=function(){var t,e,n=this,i=n.constructor;return!n.isFinite()||n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,i.rounding=1,De=!1,n=n.times(n).plus(1).sqrt().plus(n),De=!0,i.precision=t,i.rounding=e,n.ln())};ue.inverseHyperbolicTangent=ue.atanh=function(){var t,e,n,i,s=this,o=s.constructor;return s.isFinite()?s.e>=0?new o(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(t=o.precision,e=o.rounding,i=s.sd(),Math.max(i,t)<2*-s.e-1?Ee(new o(s),t,e,!0):(o.precision=n=i-s.e,s=pt(s.plus(1),new o(1).minus(s),n+t,1),o.precision=t+4,o.rounding=1,s=s.ln(),o.precision=t,o.rounding=e,s.times(.5))):new o(NaN)};ue.inverseSine=ue.asin=function(){var t,e,n,i,s=this,o=s.constructor;return s.isZero()?new o(s):(e=s.abs().cmp(1),n=o.precision,i=o.rounding,e!==-1?e===0?(t=gr(o,n+4,i).times(.5),t.s=s.s,t):new o(NaN):(o.precision=n+6,o.rounding=1,s=s.div(new o(1).minus(s.times(s)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=i,s.times(2)))};ue.inverseTangent=ue.atan=function(){var t,e,n,i,s,o,c,d,h,f=this,g=f.constructor,v=g.precision,_=g.rounding;if(f.isFinite()){if(f.isZero())return new g(f);if(f.abs().eq(1)&&v+4<=J0)return c=gr(g,v+4,_).times(.25),c.s=f.s,c}else{if(!f.s)return new g(NaN);if(v+4<=J0)return c=gr(g,v+4,_).times(.5),c.s=f.s,c}for(g.precision=d=v+10,g.rounding=1,n=Math.min(28,d/Re+2|0),t=n;t;--t)f=f.div(f.times(f).plus(1).sqrt().plus(1));for(De=!1,e=Math.ceil(d/Re),i=1,h=f.times(f),c=new g(f),s=f;t!==-1;)if(s=s.times(h),o=c.minus(s.div(i+=2)),s=s.times(h),c=o.plus(s.div(i+=2)),c.d[e]!==void 0)for(t=e;c.d[t]===o.d[t]&&t--;);return n&&(c=c.times(2<<n-1)),De=!0,Ee(c,g.precision=v,g.rounding=_,!0)};ue.isFinite=function(){return!!this.d};ue.isInteger=ue.isInt=function(){return!!this.d&&Cn(this.e/Re)>this.d.length-2};ue.isNaN=function(){return!this.s};ue.isNegative=ue.isNeg=function(){return this.s<0};ue.isPositive=ue.isPos=function(){return this.s>0};ue.isZero=function(){return!!this.d&&this.d[0]===0};ue.lessThan=ue.lt=function(t){return this.cmp(t)<0};ue.lessThanOrEqualTo=ue.lte=function(t){return this.cmp(t)<1};ue.logarithm=ue.log=function(t){var e,n,i,s,o,c,d,h,f=this,g=f.constructor,v=g.precision,_=g.rounding,E=5;if(t==null)t=new g(10),e=!0;else{if(t=new g(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new g(NaN);e=t.eq(10)}if(n=f.d,f.s<0||!n||!n[0]||f.eq(1))return new g(n&&!n[0]?-1/0:f.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)o=!0;else{for(s=n[0];s%10===0;)s/=10;o=s!==1}if(De=!1,d=v+E,c=fa(f,d),i=e?Mf(g,d+10):fa(t,d),h=pt(c,i,d,1),Hu(h.d,s=v,_))do if(d+=10,c=fa(f,d),i=e?Mf(g,d+10):fa(t,d),h=pt(c,i,d,1),!o){+bn(h.d).slice(s+1,s+15)+1==1e14&&(h=Ee(h,v+1,0));break}while(Hu(h.d,s+=10,_));return De=!0,Ee(h,v,_)};ue.minus=ue.sub=function(t){var e,n,i,s,o,c,d,h,f,g,v,_,E=this,N=E.constructor;if(t=new N(t),!E.d||!t.d)return!E.s||!t.s?t=new N(NaN):E.d?t.s=-t.s:t=new N(t.d||E.s!==t.s?E:NaN),t;if(E.s!=t.s)return t.s=-t.s,E.plus(t);if(f=E.d,_=t.d,d=N.precision,h=N.rounding,!f[0]||!_[0]){if(_[0])t.s=-t.s;else if(f[0])t=new N(E);else return new N(h===3?-0:0);return De?Ee(t,d,h):t}if(n=Cn(t.e/Re),g=Cn(E.e/Re),f=f.slice(),o=g-n,o){for(v=o<0,v?(e=f,o=-o,c=_.length):(e=_,n=g,c=f.length),i=Math.max(Math.ceil(d/Re),c)+2,o>i&&(o=i,e.length=1),e.reverse(),i=o;i--;)e.push(0);e.reverse()}else{for(i=f.length,c=_.length,v=i<c,v&&(c=i),i=0;i<c;i++)if(f[i]!=_[i]){v=f[i]<_[i];break}o=0}for(v&&(e=f,f=_,_=e,t.s=-t.s),c=f.length,i=_.length-c;i>0;--i)f[c++]=0;for(i=_.length;i>o;){if(f[--i]<_[i]){for(s=i;s&&f[--s]===0;)f[s]=zi-1;--f[s],f[i]+=zi}f[i]-=_[i]}for(;f[--c]===0;)f.pop();for(;f[0]===0;f.shift())--n;return f[0]?(t.d=f,t.e=fm(f,n),De?Ee(t,d,h):t):new N(h===3?-0:0)};ue.modulo=ue.mod=function(t){var e,n=this,i=n.constructor;return t=new i(t),!n.d||!t.s||t.d&&!t.d[0]?new i(NaN):!t.d||n.d&&!n.d[0]?Ee(new i(n),i.precision,i.rounding):(De=!1,i.modulo==9?(e=pt(n,t.abs(),0,3,1),e.s*=t.s):e=pt(n,t,0,i.modulo,1),e=e.times(t),De=!0,n.minus(e))};ue.naturalExponential=ue.exp=function(){return ey(this)};ue.naturalLogarithm=ue.ln=function(){return fa(this)};ue.negated=ue.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Ee(t)};ue.plus=ue.add=function(t){var e,n,i,s,o,c,d,h,f,g,v=this,_=v.constructor;if(t=new _(t),!v.d||!t.d)return!v.s||!t.s?t=new _(NaN):v.d||(t=new _(t.d||v.s===t.s?v:NaN)),t;if(v.s!=t.s)return t.s=-t.s,v.minus(t);if(f=v.d,g=t.d,d=_.precision,h=_.rounding,!f[0]||!g[0])return g[0]||(t=new _(v)),De?Ee(t,d,h):t;if(o=Cn(v.e/Re),i=Cn(t.e/Re),f=f.slice(),s=o-i,s){for(s<0?(n=f,s=-s,c=g.length):(n=g,i=o,c=f.length),o=Math.ceil(d/Re),c=o>c?o+1:c+1,s>c&&(s=c,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(c=f.length,s=g.length,c-s<0&&(s=c,n=g,g=f,f=n),e=0;s;)e=(f[--s]=f[s]+g[s]+e)/zi|0,f[s]%=zi;for(e&&(f.unshift(e),++i),c=f.length;f[--c]==0;)f.pop();return t.d=f,t.e=fm(f,i),De?Ee(t,d,h):t};ue.precision=ue.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(xa+t);return n.d?(e=m2(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};ue.round=function(){var t=this,e=t.constructor;return Ee(new e(t),t.e+1,e.rounding)};ue.sine=ue.sin=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+Re,i.rounding=1,n=VP(i,v2(i,n)),i.precision=t,i.rounding=e,Ee(ns>2?n.neg():n,t,e,!0)):new i(NaN)};ue.squareRoot=ue.sqrt=function(){var t,e,n,i,s,o,c=this,d=c.d,h=c.e,f=c.s,g=c.constructor;if(f!==1||!d||!d[0])return new g(!f||f<0&&(!d||d[0])?NaN:d?c:1/0);for(De=!1,f=Math.sqrt(+c),f==0||f==1/0?(e=bn(d),(e.length+h)%2==0&&(e+="0"),f=Math.sqrt(e),h=Cn((h+1)/2)-(h<0||h%2),f==1/0?e="5e"+h:(e=f.toExponential(),e=e.slice(0,e.indexOf("e")+1)+h),i=new g(e)):i=new g(f.toString()),n=(h=g.precision)+3;;)if(o=i,i=o.plus(pt(c,o,n+2,1)).times(.5),bn(o.d).slice(0,n)===(e=bn(i.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!s&&e=="4999"){if(!s&&(Ee(o,h+1,0),o.times(o).eq(c))){i=o;break}n+=4,s=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Ee(i,h+1,1),t=!i.times(i).eq(c));break}return De=!0,Ee(i,h,g.rounding,t)};ue.tangent=ue.tan=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+10,i.rounding=1,n=n.sin(),n.s=1,n=pt(n,new i(1).minus(n.times(n)).sqrt(),t+10,0),i.precision=t,i.rounding=e,Ee(ns==2||ns==4?n.neg():n,t,e,!0)):new i(NaN)};ue.times=ue.mul=function(t){var e,n,i,s,o,c,d,h,f,g=this,v=g.constructor,_=g.d,E=(t=new v(t)).d;if(t.s*=g.s,!_||!_[0]||!E||!E[0])return new v(!t.s||_&&!_[0]&&!E||E&&!E[0]&&!_?NaN:!_||!E?t.s/0:t.s*0);for(n=Cn(g.e/Re)+Cn(t.e/Re),h=_.length,f=E.length,h<f&&(o=_,_=E,E=o,c=h,h=f,f=c),o=[],c=h+f,i=c;i--;)o.push(0);for(i=f;--i>=0;){for(e=0,s=h+i;s>i;)d=o[s]+E[i]*_[s-i-1]+e,o[s--]=d%zi|0,e=d/zi|0;o[s]=(o[s]+e)%zi|0}for(;!o[--c];)o.pop();return e?++n:o.shift(),t.d=o,t.e=fm(o,n),De?Ee(t,v.precision,v.rounding):t};ue.toBinary=function(t,e){return mv(this,2,t,e)};ue.toDecimalPlaces=ue.toDP=function(t,e){var n=this,i=n.constructor;return n=new i(n),t===void 0?n:(Gn(t,0,Ia),e===void 0?e=i.rounding:Gn(e,0,8),Ee(n,t+n.e+1,e))};ue.toExponential=function(t,e){var n,i=this,s=i.constructor;return t===void 0?n=Ar(i,!0):(Gn(t,0,Ia),e===void 0?e=s.rounding:Gn(e,0,8),i=Ee(new s(i),t+1,e),n=Ar(i,!0,t+1)),i.isNeg()&&!i.isZero()?"-"+n:n};ue.toFixed=function(t,e){var n,i,s=this,o=s.constructor;return t===void 0?n=Ar(s):(Gn(t,0,Ia),e===void 0?e=o.rounding:Gn(e,0,8),i=Ee(new o(s),t+s.e+1,e),n=Ar(i,!1,t+i.e+1)),s.isNeg()&&!s.isZero()?"-"+n:n};ue.toFraction=function(t){var e,n,i,s,o,c,d,h,f,g,v,_,E=this,N=E.d,A=E.constructor;if(!N)return new A(E);if(f=n=new A(1),i=h=new A(0),e=new A(i),o=e.e=m2(N)-E.e-1,c=o%Re,e.d[0]=en(10,c<0?Re+c:c),t==null)t=o>0?e:f;else{if(d=new A(t),!d.isInt()||d.lt(f))throw Error(xa+d);t=d.gt(e)?o>0?e:f:d}for(De=!1,d=new A(bn(N)),g=A.precision,A.precision=o=N.length*Re*2;v=pt(d,e,0,1,1),s=n.plus(v.times(i)),s.cmp(t)!=1;)n=i,i=s,s=f,f=h.plus(v.times(s)),h=s,s=e,e=d.minus(v.times(s)),d=s;return s=pt(t.minus(n),i,0,1,1),h=h.plus(s.times(f)),n=n.plus(s.times(i)),h.s=f.s=E.s,_=pt(f,i,o,1).minus(E).abs().cmp(pt(h,n,o,1).minus(E).abs())<1?[f,i]:[h,n],A.precision=g,De=!0,_};ue.toHexadecimal=ue.toHex=function(t,e){return mv(this,16,t,e)};ue.toNearest=function(t,e){var n=this,i=n.constructor;if(n=new i(n),t==null){if(!n.d)return n;t=new i(1),e=i.rounding}else{if(t=new i(t),e===void 0?e=i.rounding:Gn(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(De=!1,n=pt(n,t,0,e,1).times(t),De=!0,Ee(n)):(t.s=n.s,n=t),n};ue.toNumber=function(){return+this};ue.toOctal=function(t,e){return mv(this,8,t,e)};ue.toPower=ue.pow=function(t){var e,n,i,s,o,c,d=this,h=d.constructor,f=+(t=new h(t));if(!d.d||!t.d||!d.d[0]||!t.d[0])return new h(en(+d,f));if(d=new h(d),d.eq(1))return d;if(i=h.precision,o=h.rounding,t.eq(1))return Ee(d,i,o);if(e=Cn(t.e/Re),e>=t.d.length-1&&(n=f<0?-f:f)<=kP)return s=p2(h,d,n,i),t.s<0?new h(1).div(s):Ee(s,i,o);if(c=d.s,c<0){if(e<t.d.length-1)return new h(NaN);if((t.d[e]&1)==0&&(c=1),d.e==0&&d.d[0]==1&&d.d.length==1)return d.s=c,d}return n=en(+d,f),e=n==0||!isFinite(n)?Cn(f*(Math.log("0."+bn(d.d))/Math.LN10+d.e+1)):new h(n+"").e,e>h.maxE+1||e<h.minE-1?new h(e>0?c/0:0):(De=!1,h.rounding=d.s=1,n=Math.min(12,(e+"").length),s=ey(t.times(fa(d,i+n)),i),s.d&&(s=Ee(s,i+5,1),Hu(s.d,i,o)&&(e=i+10,s=Ee(ey(t.times(fa(d,e+n)),e),e+5,1),+bn(s.d).slice(i+1,i+15)+1==1e14&&(s=Ee(s,i+1,0)))),s.s=c,De=!0,h.rounding=o,Ee(s,i,o))};ue.toPrecision=function(t,e){var n,i=this,s=i.constructor;return t===void 0?n=Ar(i,i.e<=s.toExpNeg||i.e>=s.toExpPos):(Gn(t,1,Ia),e===void 0?e=s.rounding:Gn(e,0,8),i=Ee(new s(i),t,e),n=Ar(i,t<=i.e||i.e<=s.toExpNeg,t)),i.isNeg()&&!i.isZero()?"-"+n:n};ue.toSignificantDigits=ue.toSD=function(t,e){var n=this,i=n.constructor;return t===void 0?(t=i.precision,e=i.rounding):(Gn(t,1,Ia),e===void 0?e=i.rounding:Gn(e,0,8)),Ee(new i(n),t,e)};ue.toString=function(){var t=this,e=t.constructor,n=Ar(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};ue.truncated=ue.trunc=function(){return Ee(new this.constructor(this),this.e+1,1)};ue.valueOf=ue.toJSON=function(){var t=this,e=t.constructor,n=Ar(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function bn(t){var e,n,i,s=t.length-1,o="",c=t[0];if(s>0){for(o+=c,e=1;e<s;e++)i=t[e]+"",n=Re-i.length,n&&(o+=oa(n)),o+=i;c=t[e],i=c+"",n=Re-i.length,n&&(o+=oa(n))}else if(c===0)return"0";for(;c%10===0;)c/=10;return o+c}function Gn(t,e,n){if(t!==~~t||t<e||t>n)throw Error(xa+t)}function Hu(t,e,n,i){var s,o,c,d;for(o=t[0];o>=10;o/=10)--e;return--e<0?(e+=Re,s=0):(s=Math.ceil((e+1)/Re),e%=Re),o=en(10,Re-e),d=t[s]%o|0,i==null?e<3?(e==0?d=d/100|0:e==1&&(d=d/10|0),c=n<4&&d==99999||n>3&&d==49999||d==5e4||d==0):c=(n<4&&d+1==o||n>3&&d+1==o/2)&&(t[s+1]/o/100|0)==en(10,e-2)-1||(d==o/2||d==0)&&(t[s+1]/o/100|0)==0:e<4?(e==0?d=d/1e3|0:e==1?d=d/100|0:e==2&&(d=d/10|0),c=(i||n<4)&&d==9999||!i&&n>3&&d==4999):c=((i||n<4)&&d+1==o||!i&&n>3&&d+1==o/2)&&(t[s+1]/o/1e3|0)==en(10,e-3)-1,c}function ff(t,e,n){for(var i,s=[0],o,c=0,d=t.length;c<d;){for(o=s.length;o--;)s[o]*=e;for(s[0]+=W0.indexOf(t.charAt(c++)),i=0;i<s.length;i++)s[i]>n-1&&(s[i+1]===void 0&&(s[i+1]=0),s[i+1]+=s[i]/n|0,s[i]%=n)}return s.reverse()}function MP(t,e){var n,i,s;if(e.isZero())return e;i=e.d.length,i<32?(n=Math.ceil(i/3),s=(1/mm(4,n)).toString()):(n=16,s="2.3283064365386962890625e-10"),t.precision+=n,e=Hl(t,1,e.times(s),new t(1));for(var o=n;o--;){var c=e.times(e);e=c.times(c).minus(c).times(8).plus(1)}return t.precision-=n,e}var pt=(function(){function t(i,s,o){var c,d=0,h=i.length;for(i=i.slice();h--;)c=i[h]*s+d,i[h]=c%o|0,d=c/o|0;return d&&i.unshift(d),i}function e(i,s,o,c){var d,h;if(o!=c)h=o>c?1:-1;else for(d=h=0;d<o;d++)if(i[d]!=s[d]){h=i[d]>s[d]?1:-1;break}return h}function n(i,s,o,c){for(var d=0;o--;)i[o]-=d,d=i[o]<s[o]?1:0,i[o]=d*c+i[o]-s[o];for(;!i[0]&&i.length>1;)i.shift()}return function(i,s,o,c,d,h){var f,g,v,_,E,N,A,R,P,U,L,$,te,ne,S,I,M,z,O,B,j=i.constructor,Oe=i.s==s.s?1:-1,ce=i.d,G=s.d;if(!ce||!ce[0]||!G||!G[0])return new j(!i.s||!s.s||(ce?G&&ce[0]==G[0]:!G)?NaN:ce&&ce[0]==0||!G?Oe*0:Oe/0);for(h?(E=1,g=i.e-s.e):(h=zi,E=Re,g=Cn(i.e/E)-Cn(s.e/E)),O=G.length,M=ce.length,P=new j(Oe),U=P.d=[],v=0;G[v]==(ce[v]||0);v++);if(G[v]>(ce[v]||0)&&g--,o==null?(ne=o=j.precision,c=j.rounding):d?ne=o+(i.e-s.e)+1:ne=o,ne<0)U.push(1),N=!0;else{if(ne=ne/E+2|0,v=0,O==1){for(_=0,G=G[0],ne++;(v<M||_)&&ne--;v++)S=_*h+(ce[v]||0),U[v]=S/G|0,_=S%G|0;N=_||v<M}else{for(_=h/(G[0]+1)|0,_>1&&(G=t(G,_,h),ce=t(ce,_,h),O=G.length,M=ce.length),I=O,L=ce.slice(0,O),$=L.length;$<O;)L[$++]=0;B=G.slice(),B.unshift(0),z=G[0],G[1]>=h/2&&++z;do _=0,f=e(G,L,O,$),f<0?(te=L[0],O!=$&&(te=te*h+(L[1]||0)),_=te/z|0,_>1?(_>=h&&(_=h-1),A=t(G,_,h),R=A.length,$=L.length,f=e(A,L,R,$),f==1&&(_--,n(A,O<R?B:G,R,h))):(_==0&&(f=_=1),A=G.slice()),R=A.length,R<$&&A.unshift(0),n(L,A,$,h),f==-1&&($=L.length,f=e(G,L,O,$),f<1&&(_++,n(L,O<$?B:G,$,h))),$=L.length):f===0&&(_++,L=[0]),U[v++]=_,f&&L[0]?L[$++]=ce[I]||0:(L=[ce[I]],$=1);while((I++<M||L[0]!==void 0)&&ne--);N=L[0]!==void 0}U[0]||U.shift()}if(E==1)P.e=g,c2=N;else{for(v=1,_=U[0];_>=10;_/=10)v++;P.e=v+g*E-1,Ee(P,d?o+P.e+1:o,c,N)}return P}})();function Ee(t,e,n,i){var s,o,c,d,h,f,g,v,_,E=t.constructor;e:if(e!=null){if(v=t.d,!v)return t;for(s=1,d=v[0];d>=10;d/=10)s++;if(o=e-s,o<0)o+=Re,c=e,g=v[_=0],h=g/en(10,s-c-1)%10|0;else if(_=Math.ceil((o+1)/Re),d=v.length,_>=d)if(i){for(;d++<=_;)v.push(0);g=h=0,s=1,o%=Re,c=o-Re+1}else break e;else{for(g=d=v[_],s=1;d>=10;d/=10)s++;o%=Re,c=o-Re+s,h=c<0?0:g/en(10,s-c-1)%10|0}if(i=i||e<0||v[_+1]!==void 0||(c<0?g:g%en(10,s-c-1)),f=n<4?(h||i)&&(n==0||n==(t.s<0?3:2)):h>5||h==5&&(n==4||i||n==6&&(o>0?c>0?g/en(10,s-c):0:v[_-1])%10&1||n==(t.s<0?8:7)),e<1||!v[0])return v.length=0,f?(e-=t.e+1,v[0]=en(10,(Re-e%Re)%Re),t.e=-e||0):v[0]=t.e=0,t;if(o==0?(v.length=_,d=1,_--):(v.length=_+1,d=en(10,Re-o),v[_]=c>0?(g/en(10,s-c)%en(10,c)|0)*d:0),f)for(;;)if(_==0){for(o=1,c=v[0];c>=10;c/=10)o++;for(c=v[0]+=d,d=1;c>=10;c/=10)d++;o!=d&&(t.e++,v[0]==zi&&(v[0]=1));break}else{if(v[_]+=d,v[_]!=zi)break;v[_--]=0,d=1}for(o=v.length;v[--o]===0;)v.pop()}return De&&(t.e>E.maxE?(t.d=null,t.e=NaN):t.e<E.minE&&(t.e=0,t.d=[0])),t}function Ar(t,e,n){if(!t.isFinite())return y2(t);var i,s=t.e,o=bn(t.d),c=o.length;return e?(n&&(i=n-c)>0?o=o.charAt(0)+"."+o.slice(1)+oa(i):c>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):s<0?(o="0."+oa(-s-1)+o,n&&(i=n-c)>0&&(o+=oa(i))):s>=c?(o+=oa(s+1-c),n&&(i=n-s-1)>0&&(o=o+"."+oa(i))):((i=s+1)<c&&(o=o.slice(0,i)+"."+o.slice(i)),n&&(i=n-c)>0&&(s+1===c&&(o+="."),o+=oa(i))),o}function fm(t,e){var n=t[0];for(e*=Re;n>=10;n/=10)e++;return e}function Mf(t,e,n){if(e>DP)throw De=!0,n&&(t.precision=n),Error(u2);return Ee(new t(kf),e,1,!0)}function gr(t,e,n){if(e>J0)throw Error(u2);return Ee(new t(Df),e,n,!0)}function m2(t){var e=t.length-1,n=e*Re+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function oa(t){for(var e="";t--;)e+="0";return e}function p2(t,e,n,i){var s,o=new t(1),c=Math.ceil(i/Re+4);for(De=!1;;){if(n%2&&(o=o.times(e),wT(o.d,c)&&(s=!0)),n=Cn(n/2),n===0){n=o.d.length-1,s&&o.d[n]===0&&++o.d[n];break}e=e.times(e),wT(e.d,c)}return De=!0,o}function _T(t){return t.d[t.d.length-1]&1}function g2(t,e,n){for(var i,s,o=new t(e[0]),c=0;++c<e.length;){if(s=new t(e[c]),!s.s){o=s;break}i=o.cmp(s),(i===n||i===0&&o.s===n)&&(o=s)}return o}function ey(t,e){var n,i,s,o,c,d,h,f=0,g=0,v=0,_=t.constructor,E=_.rounding,N=_.precision;if(!t.d||!t.d[0]||t.e>17)return new _(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(De=!1,h=N):h=e,d=new _(.03125);t.e>-2;)t=t.times(d),v+=5;for(i=Math.log(en(2,v))/Math.LN10*2+5|0,h+=i,n=o=c=new _(1),_.precision=h;;){if(o=Ee(o.times(t),h,1),n=n.times(++g),d=c.plus(pt(o,n,h,1)),bn(d.d).slice(0,h)===bn(c.d).slice(0,h)){for(s=v;s--;)c=Ee(c.times(c),h,1);if(e==null)if(f<3&&Hu(c.d,h-i,E,f))_.precision=h+=10,n=o=d=new _(1),g=0,f++;else return Ee(c,_.precision=N,E,De=!0);else return _.precision=N,c}c=d}}function fa(t,e){var n,i,s,o,c,d,h,f,g,v,_,E=1,N=10,A=t,R=A.d,P=A.constructor,U=P.rounding,L=P.precision;if(A.s<0||!R||!R[0]||!A.e&&R[0]==1&&R.length==1)return new P(R&&!R[0]?-1/0:A.s!=1?NaN:R?0:A);if(e==null?(De=!1,g=L):g=e,P.precision=g+=N,n=bn(R),i=n.charAt(0),Math.abs(o=A.e)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)A=A.times(t),n=bn(A.d),i=n.charAt(0),E++;o=A.e,i>1?(A=new P("0."+n),o++):A=new P(i+"."+n.slice(1))}else return f=Mf(P,g+2,L).times(o+""),A=fa(new P(i+"."+n.slice(1)),g-N).plus(f),P.precision=L,e==null?Ee(A,L,U,De=!0):A;for(v=A,h=c=A=pt(A.minus(1),A.plus(1),g,1),_=Ee(A.times(A),g,1),s=3;;){if(c=Ee(c.times(_),g,1),f=h.plus(pt(c,new P(s),g,1)),bn(f.d).slice(0,g)===bn(h.d).slice(0,g))if(h=h.times(2),o!==0&&(h=h.plus(Mf(P,g+2,L).times(o+""))),h=pt(h,new P(E),g,1),e==null)if(Hu(h.d,g-N,U,d))P.precision=g+=N,f=c=A=pt(v.minus(1),v.plus(1),g,1),_=Ee(A.times(A),g,1),s=d=1;else return Ee(h,P.precision=L,U,De=!0);else return P.precision=L,h;h=f,s+=2}}function y2(t){return String(t.s*t.s/0)}function mf(t,e){var n,i,s;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;i++);for(s=e.length;e.charCodeAt(s-1)===48;--s);if(e=e.slice(i,s),e){if(s-=i,t.e=n=n-i-1,t.d=[],i=(n+1)%Re,n<0&&(i+=Re),i<s){for(i&&t.d.push(+e.slice(0,i)),s-=Re;i<s;)t.d.push(+e.slice(i,i+=Re));e=e.slice(i),i=Re-e.length}else i-=s;for(;i--;)e+="0";t.d.push(+e),De&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function OP(t,e){var n,i,s,o,c,d,h,f,g;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),f2.test(e))return mf(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(NP.test(e))n=16,e=e.toLowerCase();else if(RP.test(e))n=2;else if(IP.test(e))n=8;else throw Error(xa+e);for(o=e.search(/p/i),o>0?(h=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),o=e.indexOf("."),c=o>=0,i=t.constructor,c&&(e=e.replace(".",""),d=e.length,o=d-o,s=p2(i,new i(n),o,o*2)),f=ff(e,n,zi),g=f.length-1,o=g;f[o]===0;--o)f.pop();return o<0?new i(t.s*0):(t.e=fm(f,g),t.d=f,De=!1,c&&(t=pt(t,s,d*4)),h&&(t=t.times(Math.abs(h)<54?en(2,h):Bn.pow(2,h))),De=!0,t)}function VP(t,e){var n,i=e.d.length;if(i<3)return e.isZero()?e:Hl(t,2,e,e);n=1.4*Math.sqrt(i),n=n>16?16:n|0,e=e.times(1/mm(5,n)),e=Hl(t,2,e,e);for(var s,o=new t(5),c=new t(16),d=new t(20);n--;)s=e.times(e),e=e.times(o.plus(s.times(c.times(s).minus(d))));return e}function Hl(t,e,n,i,s){var o,c,d,h,f=t.precision,g=Math.ceil(f/Re);for(De=!1,h=n.times(n),d=new t(i);;){if(c=pt(d.times(h),new t(e++*e++),f,1),d=s?i.plus(c):i.minus(c),i=pt(c.times(h),new t(e++*e++),f,1),c=d.plus(i),c.d[g]!==void 0){for(o=g;c.d[o]===d.d[o]&&o--;);if(o==-1)break}o=d,d=i,i=c,c=o}return De=!0,c.d.length=g+1,c}function mm(t,e){for(var n=t;--e;)n*=t;return n}function v2(t,e){var n,i=e.s<0,s=gr(t,t.precision,1),o=s.times(.5);if(e=e.abs(),e.lte(o))return ns=i?4:1,e;if(n=e.divToInt(s),n.isZero())ns=i?3:2;else{if(e=e.minus(n.times(s)),e.lte(o))return ns=_T(n)?i?2:3:i?4:1,e;ns=_T(n)?i?1:4:i?3:2}return e.minus(s).abs()}function mv(t,e,n,i){var s,o,c,d,h,f,g,v,_,E=t.constructor,N=n!==void 0;if(N?(Gn(n,1,Ia),i===void 0?i=E.rounding:Gn(i,0,8)):(n=E.precision,i=E.rounding),!t.isFinite())g=y2(t);else{for(g=Ar(t),c=g.indexOf("."),N?(s=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):s=e,c>=0&&(g=g.replace(".",""),_=new E(1),_.e=g.length-c,_.d=ff(Ar(_),10,s),_.e=_.d.length),v=ff(g,10,s),o=h=v.length;v[--h]==0;)v.pop();if(!v[0])g=N?"0p+0":"0";else{if(c<0?o--:(t=new E(t),t.d=v,t.e=o,t=pt(t,_,n,i,0,s),v=t.d,o=t.e,f=c2),c=v[n],d=s/2,f=f||v[n+1]!==void 0,f=i<4?(c!==void 0||f)&&(i===0||i===(t.s<0?3:2)):c>d||c===d&&(i===4||f||i===6&&v[n-1]&1||i===(t.s<0?8:7)),v.length=n,f)for(;++v[--n]>s-1;)v[n]=0,n||(++o,v.unshift(1));for(h=v.length;!v[h-1];--h);for(c=0,g="";c<h;c++)g+=W0.charAt(v[c]);if(N){if(h>1)if(e==16||e==8){for(c=e==16?4:3,--h;h%c;h++)g+="0";for(v=ff(g,s,e),h=v.length;!v[h-1];--h);for(c=1,g="1.";c<h;c++)g+=W0.charAt(v[c])}else g=g.charAt(0)+"."+g.slice(1);g=g+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)g="0"+g;g="0."+g}else if(++o>h)for(o-=h;o--;)g+="0";else o<h&&(g=g.slice(0,o)+"."+g.slice(o))}g=(e==16?"0x":e==2?"0b":e==8?"0o":"")+g}return t.s<0?"-"+g:g}function wT(t,e){if(t.length>e)return t.length=e,!0}function PP(t){return new this(t).abs()}function jP(t){return new this(t).acos()}function LP(t){return new this(t).acosh()}function UP(t,e){return new this(t).plus(e)}function zP(t){return new this(t).asin()}function FP(t){return new this(t).asinh()}function BP(t){return new this(t).atan()}function qP(t){return new this(t).atanh()}function HP(t,e){t=new this(t),e=new this(e);var n,i=this.precision,s=this.rounding,o=i+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=gr(this,o,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?gr(this,i,s):new this(0),n.s=t.s):!t.d||e.isZero()?(n=gr(this,o,1).times(.5),n.s=t.s):e.s<0?(this.precision=o,this.rounding=1,n=this.atan(pt(t,e,o,1)),e=gr(this,o,1),this.precision=i,this.rounding=s,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(pt(t,e,o,1)),n}function $P(t){return new this(t).cbrt()}function GP(t){return Ee(t=new this(t),t.e+1,2)}function KP(t,e,n){return new this(t).clamp(e,n)}function YP(t){if(!t||typeof t!="object")throw Error(hm+"Object expected");var e,n,i,s=t.defaults===!0,o=["precision",1,Ia,"rounding",0,8,"toExpNeg",-Pl,0,"toExpPos",0,Pl,"maxE",0,Pl,"minE",-Pl,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(n=o[e],s&&(this[n]=Z0[n]),(i=t[n])!==void 0)if(Cn(i)===i&&i>=o[e+1]&&i<=o[e+2])this[n]=i;else throw Error(xa+n+": "+i);if(n="crypto",s&&(this[n]=Z0[n]),(i=t[n])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(d2);else this[n]=!1;else throw Error(xa+n+": "+i);return this}function QP(t){return new this(t).cos()}function XP(t){return new this(t).cosh()}function b2(t){var e,n,i;function s(o){var c,d,h,f=this;if(!(f instanceof s))return new s(o);if(f.constructor=s,xT(o)){f.s=o.s,De?!o.d||o.e>s.maxE?(f.e=NaN,f.d=null):o.e<s.minE?(f.e=0,f.d=[0]):(f.e=o.e,f.d=o.d.slice()):(f.e=o.e,f.d=o.d?o.d.slice():o.d);return}if(h=typeof o,h==="number"){if(o===0){f.s=1/o<0?-1:1,f.e=0,f.d=[0];return}if(o<0?(o=-o,f.s=-1):f.s=1,o===~~o&&o<1e7){for(c=0,d=o;d>=10;d/=10)c++;De?c>s.maxE?(f.e=NaN,f.d=null):c<s.minE?(f.e=0,f.d=[0]):(f.e=c,f.d=[o]):(f.e=c,f.d=[o]);return}if(o*0!==0){o||(f.s=NaN),f.e=NaN,f.d=null;return}return mf(f,o.toString())}if(h==="string")return(d=o.charCodeAt(0))===45?(o=o.slice(1),f.s=-1):(d===43&&(o=o.slice(1)),f.s=1),f2.test(o)?mf(f,o):OP(f,o);if(h==="bigint")return o<0?(o=-o,f.s=-1):f.s=1,mf(f,o.toString());throw Error(xa+o)}if(s.prototype=ue,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=YP,s.clone=b2,s.isDecimal=xT,s.abs=PP,s.acos=jP,s.acosh=LP,s.add=UP,s.asin=zP,s.asinh=FP,s.atan=BP,s.atanh=qP,s.atan2=HP,s.cbrt=$P,s.ceil=GP,s.clamp=KP,s.cos=QP,s.cosh=XP,s.div=WP,s.exp=ZP,s.floor=JP,s.hypot=e5,s.ln=t5,s.log=n5,s.log10=r5,s.log2=i5,s.max=s5,s.min=a5,s.mod=o5,s.mul=l5,s.pow=c5,s.random=u5,s.round=d5,s.sign=h5,s.sin=f5,s.sinh=m5,s.sqrt=p5,s.sub=g5,s.sum=y5,s.tan=v5,s.tanh=b5,s.trunc=_5,t===void 0&&(t={}),t&&t.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<i.length;)t.hasOwnProperty(n=i[e++])||(t[n]=this[n]);return s.config(t),s}function WP(t,e){return new this(t).div(e)}function ZP(t){return new this(t).exp()}function JP(t){return Ee(t=new this(t),t.e+1,3)}function e5(){var t,e,n=new this(0);for(De=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return De=!0,new this(1/0);n=e}return De=!0,n.sqrt()}function xT(t){return t instanceof Bn||t&&t.toStringTag===h2||!1}function t5(t){return new this(t).ln()}function n5(t,e){return new this(t).log(e)}function i5(t){return new this(t).log(2)}function r5(t){return new this(t).log(10)}function s5(){return g2(this,arguments,-1)}function a5(){return g2(this,arguments,1)}function o5(t,e){return new this(t).mod(e)}function l5(t,e){return new this(t).mul(e)}function c5(t,e){return new this(t).pow(e)}function u5(t){var e,n,i,s,o=0,c=new this(1),d=[];if(t===void 0?t=this.precision:Gn(t,1,Ia),i=Math.ceil(t/Re),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));o<i;)s=e[o],s>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:d[o++]=s%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);o<i;)s=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((e[o+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(e,o):(d.push(s%1e7),o+=4);o=i/4}else throw Error(d2);else for(;o<i;)d[o++]=Math.random()*1e7|0;for(i=d[--o],t%=Re,i&&t&&(s=en(10,Re-t),d[o]=(i/s|0)*s);d[o]===0;o--)d.pop();if(o<0)n=0,d=[0];else{for(n=-1;d[0]===0;n-=Re)d.shift();for(i=1,s=d[0];s>=10;s/=10)i++;i<Re&&(n-=Re-i)}return c.e=n,c.d=d,c}function d5(t){return Ee(t=new this(t),t.e+1,this.rounding)}function h5(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function f5(t){return new this(t).sin()}function m5(t){return new this(t).sinh()}function p5(t){return new this(t).sqrt()}function g5(t,e){return new this(t).sub(e)}function y5(){var t=0,e=arguments,n=new this(e[t]);for(De=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return De=!0,Ee(n,this.precision,this.rounding)}function v5(t){return new this(t).tan()}function b5(t){return new this(t).tanh()}function _5(t){return Ee(t=new this(t),t.e+1,1)}ue[Symbol.for("nodejs.util.inspect.custom")]=ue.toString;ue[Symbol.toStringTag]="Decimal";var Bn=ue.constructor=b2(Z0);kf=new Bn(kf);Df=new Bn(Df);const w5=()=>{};var TT={};const _2=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},x5=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],c=t[n++],d=t[n++],h=((s&7)<<18|(o&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],c=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return e.join("")},w2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const o=t[s],c=s+1<t.length,d=c?t[s+1]:0,h=s+2<t.length,f=h?t[s+2]:0,g=o>>2,v=(o&3)<<4|d>>4;let _=(d&15)<<2|f>>6,E=f&63;h||(E=64,c||(_=64)),i.push(n[g],n[v],n[_],n[E])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):x5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],d=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const v=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||d==null||f==null||v==null)throw new T5;const _=o<<2|d>>4;if(i.push(_),f!==64){const E=d<<4&240|f>>2;if(i.push(E),v!==64){const N=f<<6&192|v;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class T5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const E5=function(t){const e=_2(t);return w2.encodeByteArray(e,!0)},Of=function(t){return E5(t).replace(/\./g,"")},x2=function(t){try{return w2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function S5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const A5=()=>S5().__FIREBASE_DEFAULTS__,C5=()=>{if(typeof process>"u"||typeof TT>"u")return;const t=TT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},R5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&x2(t[1]);return e&&JSON.parse(e)},pm=()=>{try{return w5()||A5()||C5()||R5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},T2=t=>pm()?.emulatorHosts?.[t],N5=t=>{const e=T2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},E2=()=>pm()?.config,S2=t=>pm()?.[`_${t}`];class I5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function sc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function A2(t){return(await fetch(t,{credentials:"include"})).ok}function k5(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Of(JSON.stringify(n)),Of(JSON.stringify(c)),""].join(".")}const Iu={};function D5(){const t={prod:[],emulator:[]};for(const e of Object.keys(Iu))Iu[e]?t.emulator.push(e):t.prod.push(e);return t}function M5(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ET=!1;function C2(t,e){if(typeof window>"u"||typeof document>"u"||!sc(window.location.host)||Iu[t]===e||Iu[t]||ET)return;Iu[t]=e;function n(_){return`__firebase__banner__${_}`}const i="__firebase__banner",o=D5().prod.length>0;function c(){const _=document.getElementById(i);_&&_.remove()}function d(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function h(_,E){_.setAttribute("width","24"),_.setAttribute("id",E),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{ET=!0,c()},_}function g(_,E){_.setAttribute("id",E),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){const _=M5(i),E=n("text"),N=document.getElementById(E)||document.createElement("span"),A=n("learnmore"),R=document.getElementById(A)||document.createElement("a"),P=n("preprendIcon"),U=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const L=_.element;d(L),g(R,A);const $=f();h(U,P),L.append(U,N,R,$),document.body.appendChild(L)}o?(N.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function Rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function O5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rn())}function V5(){const t=pm()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function P5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function j5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function L5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function U5(){const t=Rn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function z5(){return!V5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function F5(){try{return typeof indexedDB=="object"}catch{return!1}}function B5(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}const q5="FirebaseError";class _s extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=q5,Object.setPrototypeOf(this,_s.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cd.prototype.create)}}class cd{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],c=o?H5(o,i):"Error",d=`${this.serviceName}: ${c} (${s}).`;return new _s(s,d,i)}}function H5(t,e){return t.replace($5,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const $5=/\{\$([^}]+)}/g;function G5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Co(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const o=t[s],c=e[s];if(ST(o)&&ST(c)){if(!Co(o,c))return!1}else if(o!==c)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function ST(t){return t!==null&&typeof t=="object"}function ud(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function vu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function bu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function K5(t,e){const n=new Y5(t,e);return n.subscribe.bind(n)}class Y5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Q5(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=o0),s.error===void 0&&(s.error=o0),s.complete===void 0&&(s.complete=o0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Q5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function o0(){}function At(t){return t&&t._delegate?t._delegate:t}class Ro{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const yo="[DEFAULT]";class X5{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new I5;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Z5(e))try{this.getOrInitializeService({instanceIdentifier:yo})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=yo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yo){return this.instances.has(e)}getOptions(e=yo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);i===d&&c.resolve(s)}return s}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:W5(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=yo){return this.component?this.component.multipleInstances?e:yo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function W5(t){return t===yo?void 0:t}function Z5(t){return t.instantiationMode==="EAGER"}class J5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new X5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ge||(Ge={}));const e6={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},t6=Ge.INFO,n6={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},i6=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=n6[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pv{constructor(e){this.name=e,this._logLevel=t6,this._logHandler=i6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?e6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const r6=(t,e)=>e.some(n=>t instanceof n);let AT,CT;function s6(){return AT||(AT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function a6(){return CT||(CT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const R2=new WeakMap,ty=new WeakMap,N2=new WeakMap,l0=new WeakMap,gv=new WeakMap;function o6(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",c)},o=()=>{n(ga(t.result)),s()},c=()=>{i(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&R2.set(n,t)}).catch(()=>{}),gv.set(e,t),e}function l6(t){if(ty.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",c),t.removeEventListener("abort",c)},o=()=>{n(),s()},c=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",c),t.addEventListener("abort",c)});ty.set(t,e)}let ny={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ty.get(t);if(e==="objectStoreNames")return t.objectStoreNames||N2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ga(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function c6(t){ny=t(ny)}function u6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(c0(this),e,...n);return N2.set(i,e.sort?e.sort():[e]),ga(i)}:a6().includes(t)?function(...e){return t.apply(c0(this),e),ga(R2.get(this))}:function(...e){return ga(t.apply(c0(this),e))}}function d6(t){return typeof t=="function"?u6(t):(t instanceof IDBTransaction&&l6(t),r6(t,s6())?new Proxy(t,ny):t)}function ga(t){if(t instanceof IDBRequest)return o6(t);if(l0.has(t))return l0.get(t);const e=d6(t);return e!==t&&(l0.set(t,e),gv.set(e,t)),e}const c0=t=>gv.get(t);function h6(t,e,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const c=indexedDB.open(t,e),d=ga(c);return i&&c.addEventListener("upgradeneeded",h=>{i(ga(c.result),h.oldVersion,h.newVersion,ga(c.transaction),h)}),n&&c.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),d.then(h=>{o&&h.addEventListener("close",()=>o()),s&&h.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),d}const f6=["get","getKey","getAll","getAllKeys","count"],m6=["put","add","delete","clear"],u0=new Map;function RT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(u0.get(e))return u0.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=m6.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||f6.includes(n)))return;const o=async function(c,...d){const h=this.transaction(c,s?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(d.shift())),(await Promise.all([f[n](...d),s&&h.done]))[0]};return u0.set(e,o),o}c6(t=>({...t,get:(e,n,i)=>RT(e,n)||t.get(e,n,i),has:(e,n)=>!!RT(e,n)||t.has(e,n)}));class p6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(g6(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function g6(t){return t.getComponent()?.type==="VERSION"}const iy="@firebase/app",NT="0.14.6";const hs=new pv("@firebase/app"),y6="@firebase/app-compat",v6="@firebase/analytics-compat",b6="@firebase/analytics",_6="@firebase/app-check-compat",w6="@firebase/app-check",x6="@firebase/auth",T6="@firebase/auth-compat",E6="@firebase/database",S6="@firebase/data-connect",A6="@firebase/database-compat",C6="@firebase/functions",R6="@firebase/functions-compat",N6="@firebase/installations",I6="@firebase/installations-compat",k6="@firebase/messaging",D6="@firebase/messaging-compat",M6="@firebase/performance",O6="@firebase/performance-compat",V6="@firebase/remote-config",P6="@firebase/remote-config-compat",j6="@firebase/storage",L6="@firebase/storage-compat",U6="@firebase/firestore",z6="@firebase/ai",F6="@firebase/firestore-compat",B6="firebase",q6="12.6.0";const ry="[DEFAULT]",H6={[iy]:"fire-core",[y6]:"fire-core-compat",[b6]:"fire-analytics",[v6]:"fire-analytics-compat",[w6]:"fire-app-check",[_6]:"fire-app-check-compat",[x6]:"fire-auth",[T6]:"fire-auth-compat",[E6]:"fire-rtdb",[S6]:"fire-data-connect",[A6]:"fire-rtdb-compat",[C6]:"fire-fn",[R6]:"fire-fn-compat",[N6]:"fire-iid",[I6]:"fire-iid-compat",[k6]:"fire-fcm",[D6]:"fire-fcm-compat",[M6]:"fire-perf",[O6]:"fire-perf-compat",[V6]:"fire-rc",[P6]:"fire-rc-compat",[j6]:"fire-gcs",[L6]:"fire-gcs-compat",[U6]:"fire-fst",[F6]:"fire-fst-compat",[z6]:"fire-vertex","fire-js":"fire-js",[B6]:"fire-js-all"};const Vf=new Map,$6=new Map,sy=new Map;function IT(t,e){try{t.container.addComponent(e)}catch(n){hs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function $l(t){const e=t.name;if(sy.has(e))return hs.debug(`There were multiple attempts to register component ${e}.`),!1;sy.set(e,t);for(const n of Vf.values())IT(n,t);for(const n of $6.values())IT(n,t);return!0}function yv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function bi(t){return t==null?!1:t.settings!==void 0}const G6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ya=new cd("app","Firebase",G6);class K6{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ro("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ya.create("app-deleted",{appName:this._name})}}const ac=q6;function I2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:ry,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw ya.create("bad-app-name",{appName:String(s)});if(n||(n=E2()),!n)throw ya.create("no-options");const o=Vf.get(s);if(o){if(Co(n,o.options)&&Co(i,o.config))return o;throw ya.create("duplicate-app",{appName:s})}const c=new J5(s);for(const h of sy.values())c.addComponent(h);const d=new K6(n,i,c);return Vf.set(s,d),d}function k2(t=ry){const e=Vf.get(t);if(!e&&t===ry&&E2())return I2();if(!e)throw ya.create("no-app",{appName:t});return e}function va(t,e,n){let i=H6[t]??t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hs.warn(c.join(" "));return}$l(new Ro(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Y6="firebase-heartbeat-database",Q6=1,$u="firebase-heartbeat-store";let d0=null;function D2(){return d0||(d0=h6(Y6,Q6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($u)}catch(n){console.warn(n)}}}}).catch(t=>{throw ya.create("idb-open",{originalErrorMessage:t.message})})),d0}async function X6(t){try{const n=(await D2()).transaction($u),i=await n.objectStore($u).get(M2(t));return await n.done,i}catch(e){if(e instanceof _s)hs.warn(e.message);else{const n=ya.create("idb-get",{originalErrorMessage:e?.message});hs.warn(n.message)}}}async function kT(t,e){try{const i=(await D2()).transaction($u,"readwrite");await i.objectStore($u).put(e,M2(t)),await i.done}catch(n){if(n instanceof _s)hs.warn(n.message);else{const i=ya.create("idb-set",{originalErrorMessage:n?.message});hs.warn(i.message)}}}function M2(t){return`${t.name}!${t.options.appId}`}const W6=1024,Z6=30;class J6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new tj(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=DT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>Z6){const s=nj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){hs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=DT(),{heartbeatsToSend:n,unsentEntries:i}=ej(this._heartbeatsCache.heartbeats),s=Of(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return hs.warn(e),""}}}function DT(){return new Date().toISOString().substring(0,10)}function ej(t,e=W6){const n=[];let i=t.slice();for(const s of t){const o=n.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),MT(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),MT(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class tj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return F5()?B5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await X6(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return kT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return kT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function MT(t){return Of(JSON.stringify({version:2,heartbeats:t})).length}function nj(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}function ij(t){$l(new Ro("platform-logger",e=>new p6(e),"PRIVATE")),$l(new Ro("heartbeat",e=>new J6(e),"PRIVATE")),va(iy,NT,t),va(iy,NT,"esm2020"),va("fire-js","")}ij("");function O2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rj=O2,V2=new cd("auth","Firebase",O2());const Pf=new pv("@firebase/auth");function sj(t,...e){Pf.logLevel<=Ge.WARN&&Pf.warn(`Auth (${ac}): ${t}`,...e)}function pf(t,...e){Pf.logLevel<=Ge.ERROR&&Pf.error(`Auth (${ac}): ${t}`,...e)}function Fi(t,...e){throw vv(t,...e)}function _r(t,...e){return vv(t,...e)}function P2(t,e,n){const i={...rj(),[e]:n};return new cd("auth","Firebase",i).create(e,{appName:t.name})}function as(t){return P2(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vv(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return V2.create(t,...e)}function Ne(t,e,...n){if(!t)throw vv(e,...n)}function is(t){const e="INTERNAL ASSERTION FAILED: "+t;throw pf(e),new Error(e)}function fs(t,e){t||is(e)}function ay(){return typeof self<"u"&&self.location?.href||""}function aj(){return OT()==="http:"||OT()==="https:"}function OT(){return typeof self<"u"&&self.location?.protocol||null}function oj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aj()||j5()||"connection"in navigator)?navigator.onLine:!0}function lj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class dd{constructor(e,n){this.shortDelay=e,this.longDelay=n,fs(n>e,"Short delay should be less than long delay!"),this.isMobile=O5()||L5()}get(){return oj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function bv(t,e){fs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class j2{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;is("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;is("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;is("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const cj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const uj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],dj=new dd(3e4,6e4);function ws(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ir(t,e,n,i,s={}){return L2(t,s,async()=>{let o={},c={};i&&(e==="GET"?c=i:o={body:JSON.stringify(i)});const d=ud({key:t.config.apiKey,...c}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:h,...o};return P5()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&sc(t.emulatorConfig.host)&&(f.credentials="include"),j2.fetch()(await U2(t,t.config.apiHost,n,d),f)})}async function L2(t,e,n){t._canInitEmulator=!1;const i={...cj,...e};try{const s=new fj(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw Zh(t,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const d=o.ok?c.errorMessage:c.error.message,[h,f]=d.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zh(t,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw Zh(t,"email-already-in-use",c);if(h==="USER_DISABLED")throw Zh(t,"user-disabled",c);const g=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw P2(t,g,f);Fi(t,g)}}catch(s){if(s instanceof _s)throw s;Fi(t,"network-request-failed",{message:String(s)})}}async function hd(t,e,n,i,s={}){const o=await Ir(t,e,n,i,s);return"mfaPendingCredential"in o&&Fi(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function U2(t,e,n,i){const s=`${e}${n}?${i}`,o=t,c=o.config.emulator?bv(t.config,s):`${t.config.apiScheme}://${s}`;return uj.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function hj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(_r(this.auth,"network-request-failed")),dj.get())})}}function Zh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=_r(t,e,i);return s.customData._tokenResponse=n,s}function VT(t){return t!==void 0&&t.enterprise!==void 0}class mj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return hj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function pj(t,e){return Ir(t,"GET","/v2/recaptchaConfig",ws(t,e))}async function gj(t,e){return Ir(t,"POST","/v1/accounts:delete",e)}async function jf(t,e){return Ir(t,"POST","/v1/accounts:lookup",e)}function ku(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yj(t,e=!1){const n=At(t),i=await n.getIdToken(e),s=_v(i);Ne(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,c=o?.sign_in_provider;return{claims:s,token:i,authTime:ku(h0(s.auth_time)),issuedAtTime:ku(h0(s.iat)),expirationTime:ku(h0(s.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function h0(t){return Number(t)*1e3}function _v(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return pf("JWT malformed, contained fewer than 3 sections"),null;try{const s=x2(n);return s?JSON.parse(s):(pf("Failed to decode base64 JWT payload"),null)}catch(s){return pf("Caught error parsing JWT payload as JSON",s?.toString()),null}}function PT(t){const e=_v(t);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Gl(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof _s&&vj(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function vj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class bj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class oy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ku(this.lastLoginAt),this.creationTime=ku(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Lf(t){const e=t.auth,n=await t.getIdToken(),i=await Gl(t,jf(e,{idToken:n}));Ne(i?.users.length,e,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=s.providerUserInfo?.length?z2(s.providerUserInfo):[],c=wj(t.providerData,o),d=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!c?.length,f=d?h:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new oy(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,g)}async function _j(t){const e=At(t);await Lf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wj(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function z2(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function xj(t,e){const n=await L2(t,{},async()=>{const i=ud({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,c=await U2(t,s,"/v1/token",`key=${o}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:d,body:i};return t.emulatorConfig&&sc(t.emulatorConfig.host)&&(h.credentials="include"),j2.fetch()(c,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Tj(t,e){return Ir(t,"POST","/v2/accounts:revokeToken",ws(t,e))}class Ul{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):PT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const n=PT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:o}=await xj(e,n);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:o}=n,c=new Ul;return i&&(Ne(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),s&&(Ne(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),o&&(Ne(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ul,this.toJSON())}_performRefresh(){return is("not implemented")}}function na(t,e){Ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Li{constructor({uid:e,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new bj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new oy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Gl(this,this.stsTokenManager.getToken(this.auth,e));return Ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return yj(this,e)}reload(){return _j(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Li({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Lf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bi(this.auth.app))return Promise.reject(as(this.auth));const e=await this.getIdToken();return await Gl(this,gj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,s=n.email??void 0,o=n.phoneNumber??void 0,c=n.photoURL??void 0,d=n.tenantId??void 0,h=n._redirectEventId??void 0,f=n.createdAt??void 0,g=n.lastLoginAt??void 0,{uid:v,emailVerified:_,isAnonymous:E,providerData:N,stsTokenManager:A}=n;Ne(v&&A,e,"internal-error");const R=Ul.fromJSON(this.name,A);Ne(typeof v=="string",e,"internal-error"),na(i,e.name),na(s,e.name),Ne(typeof _=="boolean",e,"internal-error"),Ne(typeof E=="boolean",e,"internal-error"),na(o,e.name),na(c,e.name),na(d,e.name),na(h,e.name),na(f,e.name),na(g,e.name);const P=new Li({uid:v,auth:e,email:s,emailVerified:_,displayName:i,isAnonymous:E,photoURL:c,phoneNumber:o,tenantId:d,stsTokenManager:R,createdAt:f,lastLoginAt:g});return N&&Array.isArray(N)&&(P.providerData=N.map(U=>({...U}))),h&&(P._redirectEventId=h),P}static async _fromIdTokenResponse(e,n,i=!1){const s=new Ul;s.updateFromServerResponse(n);const o=new Li({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Lf(o),o}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];Ne(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?z2(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!o?.length,d=new Ul;d.updateFromIdToken(i);const h=new Li({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:c}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new oy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(h,f),h}}const jT=new Map;function rs(t){fs(t instanceof Function,"Expected a class definition");let e=jT.get(t);return e?(fs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,jT.set(t,e),e)}class F2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}F2.type="NONE";const LT=F2;function gf(t,e,n){return`firebase:${t}:${e}:${n}`}class zl{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=gf(this.userKey,s.apiKey,o),this.fullPersistenceKey=gf("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await jf(this.auth,{idToken:e}).catch(()=>{});return n?Li._fromGetAccountInfoResponse(this.auth,n,e):null}return Li._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new zl(rs(LT),e,i);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||rs(LT);const c=gf(i,e.config.apiKey,e.name);let d=null;for(const f of n)try{const g=await f._get(c);if(g){let v;if(typeof g=="string"){const _=await jf(e,{idToken:g}).catch(()=>{});if(!_)break;v=await Li._fromGetAccountInfoResponse(e,_,g)}else v=Li._fromJSON(e,g);f!==o&&(d=v),o=f;break}}catch{}const h=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new zl(o,e,i):(o=h[0],d&&await o._set(c,d.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(c)}catch{}})),new zl(o,e,i))}}function UT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(B2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(K2(e))return"Blackberry";if(Y2(e))return"Webos";if(q2(e))return"Safari";if((e.includes("chrome/")||H2(e))&&!e.includes("edge/"))return"Chrome";if(G2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function B2(t=Rn()){return/firefox\//i.test(t)}function q2(t=Rn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function H2(t=Rn()){return/crios\//i.test(t)}function $2(t=Rn()){return/iemobile/i.test(t)}function G2(t=Rn()){return/android/i.test(t)}function K2(t=Rn()){return/blackberry/i.test(t)}function Y2(t=Rn()){return/webos/i.test(t)}function wv(t=Rn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Ej(t=Rn()){return wv(t)&&!!window.navigator?.standalone}function Sj(){return U5()&&document.documentMode===10}function Q2(t=Rn()){return wv(t)||G2(t)||Y2(t)||K2(t)||/windows phone/i.test(t)||$2(t)}function X2(t,e=[]){let n;switch(t){case"Browser":n=UT(Rn());break;case"Worker":n=`${UT(Rn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ac}/${i}`}class Aj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((c,d)=>{try{const h=e(o);c(h)}catch(h){d(h)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function Cj(t,e={}){return Ir(t,"GET","/v2/passwordPolicy",ws(t,e))}const Rj=6;class Nj{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Rj,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class Ij{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zT(this),this.idTokenSubscription=new zT(this),this.beforeStateQueue=new Aj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=V2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=rs(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await zl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await jf(this,{idToken:e}),i=await Li._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(bi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=i?._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===c)&&d?.user&&(i=d.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Lf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bi(this.app))return Promise.reject(as(this));const n=e?At(e):null;return n&&Ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bi(this.app)?Promise.reject(as(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bi(this.app)?Promise.reject(as(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Cj(this),n=new Nj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cd("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await Tj(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&rs(e)||this._popupRedirectResolver;Ne(n,this,"argument-error"),this.redirectPersistenceManager=await zl.create(this,[rs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(d,this,"internal-error"),d.then(()=>{c||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,s);return()=>{c=!0,h()}}else{const h=e.addObserver(n);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=X2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(bi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&sj(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ka(t){return At(t)}class zT{constructor(e){this.auth=e,this.observer=null,this.addObserver=K5(n=>this.observer=n)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let gm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kj(t){gm=t}function W2(t){return gm.loadJS(t)}function Dj(){return gm.recaptchaEnterpriseScript}function Mj(){return gm.gapiScript}function Oj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Vj{constructor(){this.enterprise=new Pj}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Pj{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const jj="recaptcha-enterprise",Z2="NO_RECAPTCHA";class Lj{constructor(e){this.type=jj,this.auth=ka(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,d)=>{pj(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const f=new mj(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,c(f.siteKey)}}).catch(h=>{d(h)})})}function s(o,c,d){const h=window.grecaptcha;VT(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{c(f)}).catch(()=>{c(Z2)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Vj().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{i(this.auth).then(d=>{if(!n&&VT(window.grecaptcha))s(d,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=Dj();h.length!==0&&(h+=d),W2(h).then(()=>{s(d,o,c)}).catch(f=>{c(f)})}}).catch(d=>{c(d)})})}}async function FT(t,e,n,i=!1,s=!1){const o=new Lj(t);let c;if(s)c=Z2;else try{c=await o.verify(n)}catch{c=await o.verify(n,!0)}const d={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const h=d.phoneEnrollmentInfo.phoneNumber,f=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const h=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Uf(t,e,n,i,s){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await FT(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await FT(t,e,n,n==="getOobCode");return i(t,c)}else return Promise.reject(o)})}function Uj(t,e){const n=yv(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Co(o,e??{}))return s;Fi(s,"already-initialized")}return n.initialize({options:e})}function zj(t,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(rs);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function Fj(t,e,n){const i=ka(t);Ne(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=J2(e),{host:c,port:d}=Bj(e),h=d===null?"":`:${d}`,f={url:`${o}//${c}${h}/`},g=Object.freeze({host:c,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Ne(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ne(Co(f,i.config.emulator)&&Co(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,sc(c)?(A2(`${o}//${c}${h}`),C2("Auth",!0)):qj()}function J2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Bj(t){const e=J2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:BT(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:BT(c)}}}function BT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function qj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class xv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return is("not implemented")}_getIdTokenResponse(e){return is("not implemented")}_linkToIdToken(e,n){return is("not implemented")}_getReauthenticationResolver(e){return is("not implemented")}}async function Hj(t,e){return Ir(t,"POST","/v1/accounts:signUp",e)}async function $j(t,e){return hd(t,"POST","/v1/accounts:signInWithPassword",ws(t,e))}async function eC(t,e){return Ir(t,"POST","/v1/accounts:sendOobCode",ws(t,e))}async function Gj(t,e){return eC(t,e)}async function Kj(t,e){return eC(t,e)}async function Yj(t,e){return hd(t,"POST","/v1/accounts:signInWithEmailLink",ws(t,e))}async function Qj(t,e){return hd(t,"POST","/v1/accounts:signInWithEmailLink",ws(t,e))}class Gu extends xv{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Gu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Gu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uf(e,n,"signInWithPassword",$j);case"emailLink":return Yj(e,{email:this._email,oobCode:this._password});default:Fi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uf(e,i,"signUpPassword",Hj);case"emailLink":return Qj(e,{idToken:n,email:this._email,oobCode:this._password});default:Fi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Fl(t,e){return hd(t,"POST","/v1/accounts:signInWithIdp",ws(t,e))}const Xj="http://localhost";class No extends xv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new No(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=n;if(!i||!s)return null;const c=new No(i,s);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return Fl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Fl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fl(e,n)}buildRequest(){const e={requestUri:Xj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ud(n)}return e}}function Wj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Zj(t){const e=vu(bu(t)).link,n=e?vu(bu(e)).deep_link_id:null,i=vu(bu(t)).deep_link_id;return(i?vu(bu(i)).link:null)||i||n||e||t}class Tv{constructor(e){const n=vu(bu(e)),i=n.apiKey??null,s=n.oobCode??null,o=Wj(n.mode??null);Ne(i&&s&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Zj(e);try{return new Tv(n)}catch{return null}}}class Po{constructor(){this.providerId=Po.PROVIDER_ID}static credential(e,n){return Gu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Tv.parseLink(n);return Ne(i,"argument-error"),Gu._fromEmailAndCode(e,i.code,i.tenantId)}}Po.PROVIDER_ID="password";Po.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Po.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class tC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class fd extends tC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class la extends fd{constructor(){super("facebook.com")}static credential(e){return No._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return la.credentialFromTaggedObject(e)}static credentialFromError(e){return la.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return la.credential(e.oauthAccessToken)}catch{return null}}}la.FACEBOOK_SIGN_IN_METHOD="facebook.com";la.PROVIDER_ID="facebook.com";class ca extends fd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return No._fromParams({providerId:ca.PROVIDER_ID,signInMethod:ca.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ca.credentialFromTaggedObject(e)}static credentialFromError(e){return ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ca.credential(n,i)}catch{return null}}}ca.GOOGLE_SIGN_IN_METHOD="google.com";ca.PROVIDER_ID="google.com";class ua extends fd{constructor(){super("github.com")}static credential(e){return No._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ua.credential(e.oauthAccessToken)}catch{return null}}}ua.GITHUB_SIGN_IN_METHOD="github.com";ua.PROVIDER_ID="github.com";class da extends fd{constructor(){super("twitter.com")}static credential(e,n){return No._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return da.credential(n,i)}catch{return null}}}da.TWITTER_SIGN_IN_METHOD="twitter.com";da.PROVIDER_ID="twitter.com";async function Jj(t,e){return hd(t,"POST","/v1/accounts:signUp",ws(t,e))}class Io{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const o=await Li._fromIdTokenResponse(e,i,s),c=qT(i);return new Io({user:o,providerId:c,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=qT(i);return new Io({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function qT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class zf extends _s{constructor(e,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,zf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new zf(e,n,i,s)}}function nC(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?zf._fromErrorAndOperation(t,o,e,i):o})}async function e9(t,e,n=!1){const i=await Gl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Io._forOperation(t,"link",i)}async function iC(t,e,n=!1){const{auth:i}=t;if(bi(i.app))return Promise.reject(as(i));const s="reauthenticate";try{const o=await Gl(t,nC(i,s,e,t),n);Ne(o.idToken,i,"internal-error");const c=_v(o.idToken);Ne(c,i,"internal-error");const{sub:d}=c;return Ne(t.uid===d,i,"user-mismatch"),Io._forOperation(t,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&Fi(i,"user-mismatch"),o}}async function rC(t,e,n=!1){if(bi(t.app))return Promise.reject(as(t));const i="signIn",s=await nC(t,i,e),o=await Io._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(o.user),o}async function t9(t,e){return rC(ka(t),e)}async function n9(t,e){return iC(At(t),e)}async function sC(t){const e=ka(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function i9(t,e,n){const i=ka(t);await Uf(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Kj)}async function r9(t,e,n){if(bi(t.app))return Promise.reject(as(t));const i=ka(t),c=await Uf(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Jj).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&sC(t),h}),d=await Io._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(d.user),d}function s9(t,e,n){return bi(t.app)?Promise.reject(as(t)):t9(At(t),Po.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&sC(t),i})}async function HT(t,e){const n=At(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:o}=await Gj(n.auth,s);o!==t.email&&await t.reload()}async function a9(t,e){return Ir(t,"POST","/v1/accounts:update",e)}async function o9(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=At(t),o={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},c=await Gl(i,a9(i.auth,o));i.displayName=c.displayName||null,i.photoURL=c.photoUrl||null;const d=i.providerData.find(({providerId:h})=>h==="password");d&&(d.displayName=i.displayName,d.photoURL=i.photoURL),await i._updateTokensIfNecessary(c)}function l9(t,e,n,i){return At(t).onIdTokenChanged(e,n,i)}function c9(t,e,n){return At(t).beforeAuthStateChanged(e,n)}function u9(t,e,n,i){return At(t).onAuthStateChanged(e,n,i)}function $T(t){return At(t).signOut()}async function d9(t){return At(t).delete()}const Ff="__sak";class aC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ff,"1"),this.storage.removeItem(Ff),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const h9=1e3,f9=10;class oC extends aC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Q2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,d,h)=>{this.notifyListeners(c,h)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(i);!n&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);Sj()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,f9):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},h9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}oC.type="LOCAL";const m9=oC;class lC extends aC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}lC.type="SESSION";const cC=lC;function p9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class ym{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new ym(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:o}=n.data,c=this.handlersMap[s];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const d=Array.from(c).map(async f=>f(n.origin,o)),h=await p9(d);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ym.receivers=[];function Ev(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}class g9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,c;return new Promise((d,h)=>{const f=Ev("",20);s.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},i);c={messageChannel:s,onMessage(v){const _=v;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(_.data.response);break;default:clearTimeout(g),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function wr(){return window}function y9(t){wr().location.href=t}function uC(){return typeof wr().WorkerGlobalScope<"u"&&typeof wr().importScripts=="function"}async function v9(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function b9(){return navigator?.serviceWorker?.controller||null}function _9(){return uC()?self:null}const dC="firebaseLocalStorageDb",w9=1,Bf="firebaseLocalStorage",hC="fbase_key";class md{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vm(t,e){return t.transaction([Bf],e?"readwrite":"readonly").objectStore(Bf)}function x9(){const t=indexedDB.deleteDatabase(dC);return new md(t).toPromise()}function ly(){const t=indexedDB.open(dC,w9);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Bf,{keyPath:hC})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Bf)?e(i):(i.close(),await x9(),e(await ly()))})})}async function GT(t,e,n){const i=vm(t,!0).put({[hC]:e,value:n});return new md(i).toPromise()}async function T9(t,e){const n=vm(t,!1).get(e),i=await new md(n).toPromise();return i===void 0?null:i.value}function KT(t,e){const n=vm(t,!0).delete(e);return new md(n).toPromise()}const E9=800,S9=3;class fC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ly(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>S9)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ym._getInstance(_9()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await v9(),!this.activeServiceWorker)return;this.sender=new g9(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||b9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ly();return await GT(e,Ff,"1"),await KT(e,Ff),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>GT(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>T9(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>KT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=vm(s,!1).getAll();return new md(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),E9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fC.type="LOCAL";const A9=fC;new dd(3e4,6e4);function C9(t,e){return e?rs(e):(Ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Sv extends xv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function R9(t){return rC(t.auth,new Sv(t),t.bypassAuthState)}function N9(t){const{auth:e,user:n}=t;return Ne(n,e,"internal-error"),iC(n,new Sv(t),t.bypassAuthState)}async function I9(t){const{auth:e,user:n}=t;return Ne(n,e,"internal-error"),e9(n,new Sv(t),t.bypassAuthState)}class mC{constructor(e,n,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:o,error:c,type:d}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return R9;case"linkViaPopup":case"linkViaRedirect":return I9;case"reauthViaPopup":case"reauthViaRedirect":return N9;default:Fi(this.auth,"internal-error")}}resolve(e){fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const k9=new dd(2e3,1e4);class jl extends mC{constructor(e,n,i,s,o){super(e,n,s,o),this.provider=i,this.authWindow=null,this.pollId=null,jl.currentPopupAction&&jl.currentPopupAction.cancel(),jl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){fs(this.filter.length===1,"Popup operations only handle one event");const e=Ev();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_r(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(_r(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_r(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,k9.get())};e()}}jl.currentPopupAction=null;const D9="pendingRedirect",yf=new Map;class M9 extends mC{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=yf.get(this.auth._key());if(!e){try{const i=await O9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}yf.set(this.auth._key(),e)}return this.bypassAuthState||yf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function O9(t,e){const n=j9(e),i=P9(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function V9(t,e){yf.set(t._key(),e)}function P9(t){return rs(t._redirectPersistence)}function j9(t){return gf(D9,t.config.apiKey,t.name)}async function L9(t,e,n=!1){if(bi(t.app))return Promise.reject(as(t));const i=ka(t),s=C9(i,e),c=await new M9(i,s,n).execute();return c&&!n&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}const U9=600*1e3;class z9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!F9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!pC(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(_r(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=U9&&this.cachedEventUids.clear(),this.cachedEventUids.has(YT(e))}saveEventToCache(e){this.cachedEventUids.add(YT(e)),this.lastProcessedEventTime=Date.now()}}function YT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function pC({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function F9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pC(t);default:return!1}}async function B9(t,e={}){return Ir(t,"GET","/v1/projects",e)}const q9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,H9=/^https?/;async function $9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await B9(t);for(const n of e)try{if(G9(n))return}catch{}Fi(t,"unauthorized-domain")}function G9(t){const e=ay(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===i}if(!H9.test(n))return!1;if(q9.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const K9=new dd(3e4,6e4);function QT(){const t=wr().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Y9(t){return new Promise((e,n)=>{function i(){QT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QT(),n(_r(t,"network-request-failed"))},timeout:K9.get()})}if(wr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(wr().gapi?.load)i();else{const s=Oj("iframefcb");return wr()[s]=()=>{gapi.load?i():n(_r(t,"network-request-failed"))},W2(`${Mj()}?onload=${s}`).catch(o=>n(o))}}).catch(e=>{throw vf=null,e})}let vf=null;function Q9(t){return vf=vf||Y9(t),vf}const X9=new dd(5e3,15e3),W9="__/auth/iframe",Z9="emulator/auth/iframe",J9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tL(t){const e=t.config;Ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?bv(e,Z9):`https://${t.config.authDomain}/${W9}`,i={apiKey:e.apiKey,appName:t.name,v:ac},s=eL.get(t.config.apiHost);s&&(i.eid=s);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${ud(i).slice(1)}`}async function nL(t){const e=await Q9(t),n=wr().gapi;return Ne(n,t,"internal-error"),e.open({where:document.body,url:tL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:J9,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const c=_r(t,"network-request-failed"),d=wr().setTimeout(()=>{o(c)},X9.get());function h(){wr().clearTimeout(d),s(i)}i.ping(h).then(h,()=>{o(c)})}))}const iL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rL=500,sL=600,aL="_blank",oL="http://localhost";class XT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lL(t,e,n,i=rL,s=sL){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const h={...iL,width:i.toString(),height:s.toString(),top:o,left:c},f=Rn().toLowerCase();n&&(d=H2(f)?aL:n),B2(f)&&(e=e||oL,h.scrollbars="yes");const g=Object.entries(h).reduce((_,[E,N])=>`${_}${E}=${N},`,"");if(Ej(f)&&d!=="_self")return cL(e||"",d),new XT(null);const v=window.open(e||"",d,g);Ne(v,t,"popup-blocked");try{v.focus()}catch{}return new XT(v)}function cL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const uL="__/auth/handler",dL="emulator/auth/handler",hL=encodeURIComponent("fac");async function WT(t,e,n,i,s,o){Ne(t.config.authDomain,t,"auth-domain-config-required"),Ne(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ac,eventId:s};if(e instanceof tC){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",G5(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))c[g]=v}if(e instanceof fd){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(c.scopes=g.join(","))}t.tenantId&&(c.tid=t.tenantId);const d=c;for(const g of Object.keys(d))d[g]===void 0&&delete d[g];const h=await t._getAppCheckToken(),f=h?`#${hL}=${encodeURIComponent(h)}`:"";return`${fL(t)}?${ud(d).slice(1)}${f}`}function fL({config:t}){return t.emulator?bv(t,dL):`https://${t.authDomain}/${uL}`}const f0="webStorageSupport";class mL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cC,this._completeRedirectFn=L9,this._overrideRedirectResult=V9}async _openPopup(e,n,i,s){fs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await WT(e,n,i,ay(),s);return lL(e,o,Ev())}async _openRedirect(e,n,i,s){await this._originValidation(e);const o=await WT(e,n,i,ay(),s);return y9(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(fs(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await nL(e),i=new z9(e);return n.register("authEvent",s=>(Ne(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(f0,{type:f0},s=>{const o=s?.[0]?.[f0];o!==void 0&&n(!!o),Fi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Q2()||q2()||wv()}}const pL=mL;var ZT="@firebase/auth",JT="1.11.1";class gL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function yL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vL(t){$l(new Ro("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;Ne(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:c,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:X2(t)},f=new Ij(i,s,o,h);return zj(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),$l(new Ro("auth-internal",e=>{const n=ka(e.getProvider("auth").getImmediate());return(i=>new gL(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),va(ZT,JT,yL(t)),va(ZT,JT,"esm2020")}const bL=300,_L=S2("authIdTokenMaxAge")||bL;let eE=null;const wL=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>_L)return;const s=n?.token;eE!==s&&(eE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function xL(t=k2()){const e=yv(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Uj(t,{popupRedirectResolver:pL,persistence:[A9,m9,cC]}),i=S2("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const c=wL(o.toString());c9(n,c,()=>c(n.currentUser)),l9(n,d=>c(d))}}const s=T2("auth");return s&&Fj(n,`http://${s}`),n}function TL(){return document.getElementsByTagName("head")?.[0]??document}kj({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const o=_r("internal-error");o.customData=s,n(o)},i.type="text/javascript",i.charset="UTF-8",TL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vL("Browser");var EL="firebase",SL="12.6.0";va(EL,SL,"app");var tE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ba,gC;(function(){var t;function e(S,I){function M(){}M.prototype=I.prototype,S.F=I.prototype,S.prototype=new M,S.prototype.constructor=S,S.D=function(z,O,B){for(var j=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)j[Oe-2]=arguments[Oe];return I.prototype[O].apply(z,j)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,I,M){M||(M=0);const z=Array(16);if(typeof I=="string")for(var O=0;O<16;++O)z[O]=I.charCodeAt(M++)|I.charCodeAt(M++)<<8|I.charCodeAt(M++)<<16|I.charCodeAt(M++)<<24;else for(O=0;O<16;++O)z[O]=I[M++]|I[M++]<<8|I[M++]<<16|I[M++]<<24;I=S.g[0],M=S.g[1],O=S.g[2];let B=S.g[3],j;j=I+(B^M&(O^B))+z[0]+3614090360&4294967295,I=M+(j<<7&4294967295|j>>>25),j=B+(O^I&(M^O))+z[1]+3905402710&4294967295,B=I+(j<<12&4294967295|j>>>20),j=O+(M^B&(I^M))+z[2]+606105819&4294967295,O=B+(j<<17&4294967295|j>>>15),j=M+(I^O&(B^I))+z[3]+3250441966&4294967295,M=O+(j<<22&4294967295|j>>>10),j=I+(B^M&(O^B))+z[4]+4118548399&4294967295,I=M+(j<<7&4294967295|j>>>25),j=B+(O^I&(M^O))+z[5]+1200080426&4294967295,B=I+(j<<12&4294967295|j>>>20),j=O+(M^B&(I^M))+z[6]+2821735955&4294967295,O=B+(j<<17&4294967295|j>>>15),j=M+(I^O&(B^I))+z[7]+4249261313&4294967295,M=O+(j<<22&4294967295|j>>>10),j=I+(B^M&(O^B))+z[8]+1770035416&4294967295,I=M+(j<<7&4294967295|j>>>25),j=B+(O^I&(M^O))+z[9]+2336552879&4294967295,B=I+(j<<12&4294967295|j>>>20),j=O+(M^B&(I^M))+z[10]+4294925233&4294967295,O=B+(j<<17&4294967295|j>>>15),j=M+(I^O&(B^I))+z[11]+2304563134&4294967295,M=O+(j<<22&4294967295|j>>>10),j=I+(B^M&(O^B))+z[12]+1804603682&4294967295,I=M+(j<<7&4294967295|j>>>25),j=B+(O^I&(M^O))+z[13]+4254626195&4294967295,B=I+(j<<12&4294967295|j>>>20),j=O+(M^B&(I^M))+z[14]+2792965006&4294967295,O=B+(j<<17&4294967295|j>>>15),j=M+(I^O&(B^I))+z[15]+1236535329&4294967295,M=O+(j<<22&4294967295|j>>>10),j=I+(O^B&(M^O))+z[1]+4129170786&4294967295,I=M+(j<<5&4294967295|j>>>27),j=B+(M^O&(I^M))+z[6]+3225465664&4294967295,B=I+(j<<9&4294967295|j>>>23),j=O+(I^M&(B^I))+z[11]+643717713&4294967295,O=B+(j<<14&4294967295|j>>>18),j=M+(B^I&(O^B))+z[0]+3921069994&4294967295,M=O+(j<<20&4294967295|j>>>12),j=I+(O^B&(M^O))+z[5]+3593408605&4294967295,I=M+(j<<5&4294967295|j>>>27),j=B+(M^O&(I^M))+z[10]+38016083&4294967295,B=I+(j<<9&4294967295|j>>>23),j=O+(I^M&(B^I))+z[15]+3634488961&4294967295,O=B+(j<<14&4294967295|j>>>18),j=M+(B^I&(O^B))+z[4]+3889429448&4294967295,M=O+(j<<20&4294967295|j>>>12),j=I+(O^B&(M^O))+z[9]+568446438&4294967295,I=M+(j<<5&4294967295|j>>>27),j=B+(M^O&(I^M))+z[14]+3275163606&4294967295,B=I+(j<<9&4294967295|j>>>23),j=O+(I^M&(B^I))+z[3]+4107603335&4294967295,O=B+(j<<14&4294967295|j>>>18),j=M+(B^I&(O^B))+z[8]+1163531501&4294967295,M=O+(j<<20&4294967295|j>>>12),j=I+(O^B&(M^O))+z[13]+2850285829&4294967295,I=M+(j<<5&4294967295|j>>>27),j=B+(M^O&(I^M))+z[2]+4243563512&4294967295,B=I+(j<<9&4294967295|j>>>23),j=O+(I^M&(B^I))+z[7]+1735328473&4294967295,O=B+(j<<14&4294967295|j>>>18),j=M+(B^I&(O^B))+z[12]+2368359562&4294967295,M=O+(j<<20&4294967295|j>>>12),j=I+(M^O^B)+z[5]+4294588738&4294967295,I=M+(j<<4&4294967295|j>>>28),j=B+(I^M^O)+z[8]+2272392833&4294967295,B=I+(j<<11&4294967295|j>>>21),j=O+(B^I^M)+z[11]+1839030562&4294967295,O=B+(j<<16&4294967295|j>>>16),j=M+(O^B^I)+z[14]+4259657740&4294967295,M=O+(j<<23&4294967295|j>>>9),j=I+(M^O^B)+z[1]+2763975236&4294967295,I=M+(j<<4&4294967295|j>>>28),j=B+(I^M^O)+z[4]+1272893353&4294967295,B=I+(j<<11&4294967295|j>>>21),j=O+(B^I^M)+z[7]+4139469664&4294967295,O=B+(j<<16&4294967295|j>>>16),j=M+(O^B^I)+z[10]+3200236656&4294967295,M=O+(j<<23&4294967295|j>>>9),j=I+(M^O^B)+z[13]+681279174&4294967295,I=M+(j<<4&4294967295|j>>>28),j=B+(I^M^O)+z[0]+3936430074&4294967295,B=I+(j<<11&4294967295|j>>>21),j=O+(B^I^M)+z[3]+3572445317&4294967295,O=B+(j<<16&4294967295|j>>>16),j=M+(O^B^I)+z[6]+76029189&4294967295,M=O+(j<<23&4294967295|j>>>9),j=I+(M^O^B)+z[9]+3654602809&4294967295,I=M+(j<<4&4294967295|j>>>28),j=B+(I^M^O)+z[12]+3873151461&4294967295,B=I+(j<<11&4294967295|j>>>21),j=O+(B^I^M)+z[15]+530742520&4294967295,O=B+(j<<16&4294967295|j>>>16),j=M+(O^B^I)+z[2]+3299628645&4294967295,M=O+(j<<23&4294967295|j>>>9),j=I+(O^(M|~B))+z[0]+4096336452&4294967295,I=M+(j<<6&4294967295|j>>>26),j=B+(M^(I|~O))+z[7]+1126891415&4294967295,B=I+(j<<10&4294967295|j>>>22),j=O+(I^(B|~M))+z[14]+2878612391&4294967295,O=B+(j<<15&4294967295|j>>>17),j=M+(B^(O|~I))+z[5]+4237533241&4294967295,M=O+(j<<21&4294967295|j>>>11),j=I+(O^(M|~B))+z[12]+1700485571&4294967295,I=M+(j<<6&4294967295|j>>>26),j=B+(M^(I|~O))+z[3]+2399980690&4294967295,B=I+(j<<10&4294967295|j>>>22),j=O+(I^(B|~M))+z[10]+4293915773&4294967295,O=B+(j<<15&4294967295|j>>>17),j=M+(B^(O|~I))+z[1]+2240044497&4294967295,M=O+(j<<21&4294967295|j>>>11),j=I+(O^(M|~B))+z[8]+1873313359&4294967295,I=M+(j<<6&4294967295|j>>>26),j=B+(M^(I|~O))+z[15]+4264355552&4294967295,B=I+(j<<10&4294967295|j>>>22),j=O+(I^(B|~M))+z[6]+2734768916&4294967295,O=B+(j<<15&4294967295|j>>>17),j=M+(B^(O|~I))+z[13]+1309151649&4294967295,M=O+(j<<21&4294967295|j>>>11),j=I+(O^(M|~B))+z[4]+4149444226&4294967295,I=M+(j<<6&4294967295|j>>>26),j=B+(M^(I|~O))+z[11]+3174756917&4294967295,B=I+(j<<10&4294967295|j>>>22),j=O+(I^(B|~M))+z[2]+718787259&4294967295,O=B+(j<<15&4294967295|j>>>17),j=M+(B^(O|~I))+z[9]+3951481745&4294967295,S.g[0]=S.g[0]+I&4294967295,S.g[1]=S.g[1]+(O+(j<<21&4294967295|j>>>11))&4294967295,S.g[2]=S.g[2]+O&4294967295,S.g[3]=S.g[3]+B&4294967295}i.prototype.v=function(S,I){I===void 0&&(I=S.length);const M=I-this.blockSize,z=this.C;let O=this.h,B=0;for(;B<I;){if(O==0)for(;B<=M;)s(this,S,B),B+=this.blockSize;if(typeof S=="string"){for(;B<I;)if(z[O++]=S.charCodeAt(B++),O==this.blockSize){s(this,z),O=0;break}}else for(;B<I;)if(z[O++]=S[B++],O==this.blockSize){s(this,z),O=0;break}}this.h=O,this.o+=I},i.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var I=1;I<S.length-8;++I)S[I]=0;I=this.o*8;for(var M=S.length-8;M<S.length;++M)S[M]=I&255,I/=256;for(this.v(S),S=Array(16),I=0,M=0;M<4;++M)for(let z=0;z<32;z+=8)S[I++]=this.g[M]>>>z&255;return S};function o(S,I){var M=d;return Object.prototype.hasOwnProperty.call(M,S)?M[S]:M[S]=I(S)}function c(S,I){this.h=I;const M=[];let z=!0;for(let O=S.length-1;O>=0;O--){const B=S[O]|0;z&&B==I||(M[O]=B,z=!1)}this.g=M}var d={};function h(S){return-128<=S&&S<128?o(S,function(I){return new c([I|0],I<0?-1:0)}):new c([S|0],S<0?-1:0)}function f(S){if(isNaN(S)||!isFinite(S))return v;if(S<0)return R(f(-S));const I=[];let M=1;for(let z=0;S>=M;z++)I[z]=S/M|0,M*=4294967296;return new c(I,0)}function g(S,I){if(S.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(S.charAt(0)=="-")return R(g(S.substring(1),I));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=f(Math.pow(I,8));let z=v;for(let B=0;B<S.length;B+=8){var O=Math.min(8,S.length-B);const j=parseInt(S.substring(B,B+O),I);O<8?(O=f(Math.pow(I,O)),z=z.j(O).add(f(j))):(z=z.j(M),z=z.add(f(j)))}return z}var v=h(0),_=h(1),E=h(16777216);t=c.prototype,t.m=function(){if(A(this))return-R(this).m();let S=0,I=1;for(let M=0;M<this.g.length;M++){const z=this.i(M);S+=(z>=0?z:4294967296+z)*I,I*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(N(this))return"0";if(A(this))return"-"+R(this).toString(S);const I=f(Math.pow(S,6));var M=this;let z="";for(;;){const O=$(M,I).g;M=P(M,O.j(I));let B=((M.g.length>0?M.g[0]:M.h)>>>0).toString(S);if(M=O,N(M))return B+z;for(;B.length<6;)B="0"+B;z=B+z}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function N(S){if(S.h!=0)return!1;for(let I=0;I<S.g.length;I++)if(S.g[I]!=0)return!1;return!0}function A(S){return S.h==-1}t.l=function(S){return S=P(this,S),A(S)?-1:N(S)?0:1};function R(S){const I=S.g.length,M=[];for(let z=0;z<I;z++)M[z]=~S.g[z];return new c(M,~S.h).add(_)}t.abs=function(){return A(this)?R(this):this},t.add=function(S){const I=Math.max(this.g.length,S.g.length),M=[];let z=0;for(let O=0;O<=I;O++){let B=z+(this.i(O)&65535)+(S.i(O)&65535),j=(B>>>16)+(this.i(O)>>>16)+(S.i(O)>>>16);z=j>>>16,B&=65535,j&=65535,M[O]=j<<16|B}return new c(M,M[M.length-1]&-2147483648?-1:0)};function P(S,I){return S.add(R(I))}t.j=function(S){if(N(this)||N(S))return v;if(A(this))return A(S)?R(this).j(R(S)):R(R(this).j(S));if(A(S))return R(this.j(R(S)));if(this.l(E)<0&&S.l(E)<0)return f(this.m()*S.m());const I=this.g.length+S.g.length,M=[];for(var z=0;z<2*I;z++)M[z]=0;for(z=0;z<this.g.length;z++)for(let O=0;O<S.g.length;O++){const B=this.i(z)>>>16,j=this.i(z)&65535,Oe=S.i(O)>>>16,ce=S.i(O)&65535;M[2*z+2*O]+=j*ce,U(M,2*z+2*O),M[2*z+2*O+1]+=B*ce,U(M,2*z+2*O+1),M[2*z+2*O+1]+=j*Oe,U(M,2*z+2*O+1),M[2*z+2*O+2]+=B*Oe,U(M,2*z+2*O+2)}for(S=0;S<I;S++)M[S]=M[2*S+1]<<16|M[2*S];for(S=I;S<2*I;S++)M[S]=0;return new c(M,0)};function U(S,I){for(;(S[I]&65535)!=S[I];)S[I+1]+=S[I]>>>16,S[I]&=65535,I++}function L(S,I){this.g=S,this.h=I}function $(S,I){if(N(I))throw Error("division by zero");if(N(S))return new L(v,v);if(A(S))return I=$(R(S),I),new L(R(I.g),R(I.h));if(A(I))return I=$(S,R(I)),new L(R(I.g),I.h);if(S.g.length>30){if(A(S)||A(I))throw Error("slowDivide_ only works with positive integers.");for(var M=_,z=I;z.l(S)<=0;)M=te(M),z=te(z);var O=ne(M,1),B=ne(z,1);for(z=ne(z,2),M=ne(M,2);!N(z);){var j=B.add(z);j.l(S)<=0&&(O=O.add(M),B=j),z=ne(z,1),M=ne(M,1)}return I=P(S,O.j(I)),new L(O,I)}for(O=v;S.l(I)>=0;){for(M=Math.max(1,Math.floor(S.m()/I.m())),z=Math.ceil(Math.log(M)/Math.LN2),z=z<=48?1:Math.pow(2,z-48),B=f(M),j=B.j(I);A(j)||j.l(S)>0;)M-=z,B=f(M),j=B.j(I);N(B)&&(B=_),O=O.add(B),S=P(S,j)}return new L(O,S)}t.B=function(S){return $(this,S).h},t.and=function(S){const I=Math.max(this.g.length,S.g.length),M=[];for(let z=0;z<I;z++)M[z]=this.i(z)&S.i(z);return new c(M,this.h&S.h)},t.or=function(S){const I=Math.max(this.g.length,S.g.length),M=[];for(let z=0;z<I;z++)M[z]=this.i(z)|S.i(z);return new c(M,this.h|S.h)},t.xor=function(S){const I=Math.max(this.g.length,S.g.length),M=[];for(let z=0;z<I;z++)M[z]=this.i(z)^S.i(z);return new c(M,this.h^S.h)};function te(S){const I=S.g.length+1,M=[];for(let z=0;z<I;z++)M[z]=S.i(z)<<1|S.i(z-1)>>>31;return new c(M,S.h)}function ne(S,I){const M=I>>5;I%=32;const z=S.g.length-M,O=[];for(let B=0;B<z;B++)O[B]=I>0?S.i(B+M)>>>I|S.i(B+M+1)<<32-I:S.i(B+M);return new c(O,S.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,gC=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=g,ba=c}).apply(typeof tE<"u"?tE:typeof self<"u"?self:typeof window<"u"?window:{});var Jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var yC,_u,vC,bf,cy,bC,_C,wC;(function(){var t,e=Object.defineProperty;function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jh=="object"&&Jh];for(var w=0;w<m.length;++w){var T=m[w];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=n(this);function s(m,w){if(w)e:{var T=i;m=m.split(".");for(var k=0;k<m.length-1;k++){var K=m[k];if(!(K in T))break e;T=T[K]}m=m[m.length-1],k=T[m],w=w(k),w!=k&&w!=null&&e(T,m,{configurable:!0,writable:!0,value:w})}}s("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(m){return m||function(w){var T=[],k;for(k in w)Object.prototype.hasOwnProperty.call(w,k)&&T.push([k,w[k]]);return T}});var o=o||{},c=this||self;function d(m){var w=typeof m;return w=="object"&&m!=null||w=="function"}function h(m,w,T){return m.call.apply(m.bind,arguments)}function f(m,w,T){return f=h,f.apply(null,arguments)}function g(m,w){var T=Array.prototype.slice.call(arguments,1);return function(){var k=T.slice();return k.push.apply(k,arguments),m.apply(this,k)}}function v(m,w){function T(){}T.prototype=w.prototype,m.Z=w.prototype,m.prototype=new T,m.prototype.constructor=m,m.Ob=function(k,K,W){for(var pe=Array(arguments.length-2),je=2;je<arguments.length;je++)pe[je-2]=arguments[je];return w.prototype[K].apply(k,pe)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function E(m){const w=m.length;if(w>0){const T=Array(w);for(let k=0;k<w;k++)T[k]=m[k];return T}return[]}function N(m,w){for(let k=1;k<arguments.length;k++){const K=arguments[k];var T=typeof K;if(T=T!="object"?T:K?Array.isArray(K)?"array":T:"null",T=="array"||T=="object"&&typeof K.length=="number"){T=m.length||0;const W=K.length||0;m.length=T+W;for(let pe=0;pe<W;pe++)m[T+pe]=K[pe]}else m.push(K)}}class A{constructor(w,T){this.i=w,this.j=T,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function R(m){c.setTimeout(()=>{throw m},0)}function P(){var m=S;let w=null;return m.g&&(w=m.g,m.g=m.g.next,m.g||(m.h=null),w.next=null),w}class U{constructor(){this.h=this.g=null}add(w,T){const k=L.get();k.set(w,T),this.h?this.h.next=k:this.g=k,this.h=k}}var L=new A(()=>new $,m=>m.reset());class ${constructor(){this.next=this.g=this.h=null}set(w,T){this.h=w,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let te,ne=!1,S=new U,I=()=>{const m=Promise.resolve(void 0);te=()=>{m.then(M)}};function M(){for(var m;m=P();){try{m.h.call(m.g)}catch(T){R(T)}var w=L;w.j(m),w.h<100&&(w.h++,m.next=w.g,w.g=m)}ne=!1}function z(){this.u=this.u,this.C=this.C}z.prototype.u=!1,z.prototype.dispose=function(){this.u||(this.u=!0,this.N())},z.prototype[Symbol.dispose]=function(){this.dispose()},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(m,w){this.type=m,this.g=this.target=w,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,w=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const T=()=>{};c.addEventListener("test",T,w),c.removeEventListener("test",T,w)}catch{}return m})();function j(m){return/^[\s\xa0]*$/.test(m)}function Oe(m,w){O.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,w)}v(Oe,O),Oe.prototype.init=function(m,w){const T=this.type=m.type,k=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=w,w=m.relatedTarget,w||(T=="mouseover"?w=m.fromElement:T=="mouseout"&&(w=m.toElement)),this.relatedTarget=w,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&Oe.Z.h.call(this)},Oe.prototype.h=function(){Oe.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var ce="closure_listenable_"+(Math.random()*1e6|0),G=0;function ee(m,w,T,k,K){this.listener=m,this.proxy=null,this.src=w,this.type=T,this.capture=!!k,this.ha=K,this.key=++G,this.da=this.fa=!1}function fe(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function de(m,w,T){for(const k in m)w.call(T,m[k],k,m)}function re(m,w){for(const T in m)w.call(void 0,m[T],T,m)}function V(m){const w={};for(const T in m)w[T]=m[T];return w}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(m,w){let T,k;for(let K=1;K<arguments.length;K++){k=arguments[K];for(T in k)m[T]=k[T];for(let W=0;W<J.length;W++)T=J[W],Object.prototype.hasOwnProperty.call(k,T)&&(m[T]=k[T])}}function me(m){this.src=m,this.g={},this.h=0}me.prototype.add=function(m,w,T,k,K){const W=m.toString();m=this.g[W],m||(m=this.g[W]=[],this.h++);const pe=xe(m,w,k,K);return pe>-1?(w=m[pe],T||(w.fa=!1)):(w=new ee(w,this.src,W,!!k,K),w.fa=T,m.push(w)),w};function ye(m,w){const T=w.type;if(T in m.g){var k=m.g[T],K=Array.prototype.indexOf.call(k,w,void 0),W;(W=K>=0)&&Array.prototype.splice.call(k,K,1),W&&(fe(w),m.g[T].length==0&&(delete m.g[T],m.h--))}}function xe(m,w,T,k){for(let K=0;K<m.length;++K){const W=m[K];if(!W.da&&W.listener==w&&W.capture==!!T&&W.ha==k)return K}return-1}var we="closure_lm_"+(Math.random()*1e6|0),ct={};function Fe(m,w,T,k,K){if(Array.isArray(w)){for(let W=0;W<w.length;W++)Fe(m,w[W],T,k,K);return null}return T=Va(T),m&&m[ce]?m.J(w,T,d(k)?!!k.capture:!1,K):nn(m,w,T,!1,k,K)}function nn(m,w,T,k,K,W){if(!w)throw Error("Invalid event type");const pe=d(K)?!!K.capture:!!K;let je=Dr(m);if(je||(m[we]=je=new me(m)),T=je.add(w,T,k,pe,W),T.proxy)return T;if(k=wn(),T.proxy=k,k.src=m,k.listener=T,m.addEventListener)B||(K=pe),K===void 0&&(K=!1),m.addEventListener(w.toString(),k,K);else if(m.attachEvent)m.attachEvent(Kn(w.toString()),k);else if(m.addListener&&m.removeListener)m.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return T}function wn(){function m(T){return w.call(m.src,m.listener,T)}const w=qi;return m}function Ts(m,w,T,k,K){if(Array.isArray(w))for(var W=0;W<w.length;W++)Ts(m,w[W],T,k,K);else k=d(k)?!!k.capture:!!k,T=Va(T),m&&m[ce]?(m=m.i,W=String(w).toString(),W in m.g&&(w=m.g[W],T=xe(w,T,k,K),T>-1&&(fe(w[T]),Array.prototype.splice.call(w,T,1),w.length==0&&(delete m.g[W],m.h--)))):m&&(m=Dr(m))&&(w=m.g[w.toString()],m=-1,w&&(m=xe(w,T,k,K)),(T=m>-1?w[m]:null)&&kr(T))}function kr(m){if(typeof m!="number"&&m&&!m.da){var w=m.src;if(w&&w[ce])ye(w.i,m);else{var T=m.type,k=m.proxy;w.removeEventListener?w.removeEventListener(T,k,m.capture):w.detachEvent?w.detachEvent(Kn(T),k):w.addListener&&w.removeListener&&w.removeListener(k),(T=Dr(w))?(ye(T,m),T.h==0&&(T.src=null,w[we]=null)):fe(m)}}}function Kn(m){return m in ct?ct[m]:ct[m]="on"+m}function qi(m,w){if(m.da)m=!0;else{w=new Oe(w,this);const T=m.listener,k=m.ha||m.src;m.fa&&kr(m),m=T.call(k,w)}return m}function Dr(m){return m=m[we],m instanceof me?m:null}var Oa="__closure_events_fn_"+(Math.random()*1e9>>>0);function Va(m){return typeof m=="function"?m:(m[Oa]||(m[Oa]=function(w){return m.handleEvent(w)}),m[Oa])}function Tt(){z.call(this),this.i=new me(this),this.M=this,this.G=null}v(Tt,z),Tt.prototype[ce]=!0,Tt.prototype.removeEventListener=function(m,w,T,k){Ts(this,m,w,T,k)};function Ot(m,w){var T,k=m.G;if(k)for(T=[];k;k=k.G)T.push(k);if(m=m.M,k=w.type||w,typeof w=="string")w=new O(w,m);else if(w instanceof O)w.target=w.target||m;else{var K=w;w=new O(k,m),he(w,K)}K=!0;let W,pe;if(T)for(pe=T.length-1;pe>=0;pe--)W=w.g=T[pe],K=Hi(W,k,!0,w)&&K;if(W=w.g=m,K=Hi(W,k,!0,w)&&K,K=Hi(W,k,!1,w)&&K,T)for(pe=0;pe<T.length;pe++)W=w.g=T[pe],K=Hi(W,k,!1,w)&&K}Tt.prototype.N=function(){if(Tt.Z.N.call(this),this.i){var m=this.i;for(const w in m.g){const T=m.g[w];for(let k=0;k<T.length;k++)fe(T[k]);delete m.g[w],m.h--}}this.G=null},Tt.prototype.J=function(m,w,T,k){return this.i.add(String(m),w,!1,T,k)},Tt.prototype.K=function(m,w,T,k){return this.i.add(String(m),w,!0,T,k)};function Hi(m,w,T,k){if(w=m.i.g[String(w)],!w)return!0;w=w.concat();let K=!0;for(let W=0;W<w.length;++W){const pe=w[W];if(pe&&!pe.da&&pe.capture==T){const je=pe.listener,Vt=pe.ha||pe.src;pe.fa&&ye(m.i,pe),K=je.call(Vt,k)!==!1&&K}}return K&&!k.defaultPrevented}function hc(m,w){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:c.setTimeout(m,w||0)}function Uo(m){m.g=hc(()=>{m.g=null,m.i&&(m.i=!1,Uo(m))},m.l);const w=m.h;m.h=null,m.m.apply(null,w)}class ln extends z{constructor(w,T){super(),this.m=w,this.l=T,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Uo(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mr(m){z.call(this),this.h=m,this.g={}}v(Mr,z);var Pa=[];function ja(m){de(m.g,function(w,T){this.g.hasOwnProperty(T)&&kr(w)},m),m.g={}}Mr.prototype.N=function(){Mr.Z.N.call(this),ja(this)},Mr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $i=c.JSON.stringify,fc=c.JSON.parse,Te=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function Ze(){}function cn(){}var Zt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Et(){O.call(this,"d")}v(Et,O);function Mn(){O.call(this,"c")}v(Mn,O);var Rt={},La=null;function tt(){return La=La||new Tt}Rt.Ia="serverreachability";function Es(m){O.call(this,Rt.Ia,m)}v(Es,O);function Gi(m){const w=tt();Ot(w,new Es(w))}Rt.STAT_EVENT="statevent";function Ua(m,w){O.call(this,Rt.STAT_EVENT,m),this.stat=w}v(Ua,O);function zt(m){const w=tt();Ot(w,new Ua(w,m))}Rt.Ja="timingevent";function Ki(m,w){O.call(this,Rt.Ja,m),this.size=w}v(Ki,O);function Yi(m,w){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},w)}function Ai(){this.g=!0}Ai.prototype.ua=function(){this.g=!1};function Fm(m,w,T,k,K,W){m.info(function(){if(m.g)if(W){var pe="",je=W.split("&");for(let nt=0;nt<je.length;nt++){var Vt=je[nt].split("=");if(Vt.length>1){const _t=Vt[0];Vt=Vt[1];const li=_t.split("_");pe=li.length>=2&&li[1]=="type"?pe+(_t+"="+Vt+"&"):pe+(_t+"=redacted&")}}}else pe=null;else pe=W;return"XMLHTTP REQ ("+k+") [attempt "+K+"]: "+w+`
`+T+`
`+pe})}function Td(m,w,T,k,K,W,pe){m.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+K+"]: "+w+`
`+T+`
`+W+" "+pe})}function Qi(m,w,T,k){m.info(function(){return"XMLHTTP TEXT ("+w+"): "+Bm(m,T)+(k?" "+k:"")})}function za(m,w){m.info(function(){return"TIMEOUT: "+w})}Ai.prototype.info=function(){};function Bm(m,w){if(!m.g)return w;if(!w)return null;try{const W=JSON.parse(w);if(W){for(m=0;m<W.length;m++)if(Array.isArray(W[m])){var T=W[m];if(!(T.length<2)){var k=T[1];if(Array.isArray(k)&&!(k.length<1)){var K=k[0];if(K!="noop"&&K!="stop"&&K!="close")for(let pe=1;pe<k.length;pe++)k[pe]=""}}}}return $i(W)}catch{return w}}var Fa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},mc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},pc;function Ba(){}v(Ba,Ze),Ba.prototype.g=function(){return new XMLHttpRequest},pc=new Ba;function Or(m){return encodeURIComponent(String(m))}function Ed(m){var w=1;m=m.split(":");const T=[];for(;w>0&&m.length;)T.push(m.shift()),w--;return m.length&&T.push(m.join(":")),T}function Ci(m,w,T,k){this.j=m,this.i=w,this.l=T,this.S=k||1,this.V=new Mr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ri}function Ri(){this.i=null,this.g="",this.h=!1}var Ft={},rn={};function Xi(m,w,T){m.M=1,m.A=qa(qt(w)),m.u=T,m.R=!0,zo(m,null)}function zo(m,w){m.F=Date.now(),Wi(m),m.B=qt(m.A);var T=m.B,k=m.S;Array.isArray(k)||(k=[String(k)]),Ho(T.i,"t",k),m.C=0,T=m.j.L,m.h=new Ri,m.g=Ud(m.j,T?w:null,!m.u),m.P>0&&(m.O=new ln(f(m.Y,m,m.g),m.P)),w=m.V,T=m.g,k=m.ba;var K="readystatechange";Array.isArray(K)||(K&&(Pa[0]=K.toString()),K=Pa);for(let W=0;W<K.length;W++){const pe=Fe(T,K[W],k||w.handleEvent,!1,w.h||w);if(!pe)break;w.g[pe.key]=pe}w=m.J?V(m.J):{},m.u?(m.v||(m.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,w)):(m.v="GET",m.g.ea(m.B,m.v,null,w)),Gi(),Fm(m.i,m.v,m.B,m.l,m.S,m.u)}Ci.prototype.ba=function(m){m=m.target;const w=this.O;w&&ki(m)==3?w.j():this.Y(m)},Ci.prototype.Y=function(m){try{if(m==this.g)e:{const je=ki(this.g),Vt=this.g.ya(),nt=this.g.ca();if(!(je<3)&&(je!=3||this.g&&(this.h.h||this.g.la()||un(this.g)))){this.K||je!=4||Vt==7||(Vt==8||nt<=0?Gi(3):Gi(2)),Zi(this);var w=this.g.ca();this.X=w;var T=qm(this);if(this.o=w==200,Td(this.i,this.v,this.B,this.l,this.S,je,w),this.o){if(this.U&&!this.L){t:{if(this.g){var k,K=this.g;if((k=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(k)){var W=k;break t}}W=null}if(m=W)Qi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ji(this,m);else{this.o=!1,this.m=3,zt(12),Yn(this),si(this);break e}}if(this.R){m=!0;let _t;for(;!this.K&&this.C<T.length;)if(_t=Ad(this,T),_t==rn){je==4&&(this.m=4,zt(14),m=!1),Qi(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==Ft){this.m=4,zt(15),Qi(this.i,this.l,T,"[Invalid Chunk]"),m=!1;break}else Qi(this.i,this.l,_t,null),Ji(this,_t);if(Sd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),je!=4||T.length!=0||this.h.h||(this.m=1,zt(16),m=!1),this.o=this.o&&m,!m)Qi(this.i,this.l,T,"[Invalid Chunked Response]"),Yn(this),si(this);else if(T.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Ic(pe),pe.P=!0,zt(11))}}else Qi(this.i,this.l,T,null),Ji(this,T);je==4&&Yn(this),this.o&&!this.K&&(je==4?Vd(this.j,this):(this.o=!1,Wi(this)))}else Pr(this.g),w==400&&T.indexOf("Unknown SID")>0?(this.m=3,zt(12)):(this.m=0,zt(13)),Yn(this),si(this)}}}catch{}finally{}};function qm(m){if(!Sd(m))return m.g.la();const w=un(m.g);if(w==="")return"";let T="";const k=w.length,K=ki(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Yn(m),si(m),"";m.h.i=new c.TextDecoder}for(let W=0;W<k;W++)m.h.h=!0,T+=m.h.i.decode(w[W],{stream:!(K&&W==k-1)});return w.length=0,m.h.g+=T,m.C=0,m.h.g}function Sd(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Ad(m,w){var T=m.C,k=w.indexOf(`
`,T);return k==-1?rn:(T=Number(w.substring(T,k)),isNaN(T)?Ft:(k+=1,k+T>w.length?rn:(w=w.slice(k,k+T),m.C=k+T,w)))}Ci.prototype.cancel=function(){this.K=!0,Yn(this)};function Wi(m){m.T=Date.now()+m.H,Fo(m,m.H)}function Fo(m,w){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Yi(f(m.aa,m),w)}function Zi(m){m.D&&(c.clearTimeout(m.D),m.D=null)}Ci.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(za(this.i,this.B),this.M!=2&&(Gi(),zt(17)),Yn(this),this.m=2,si(this)):Fo(this,this.T-m)};function si(m){m.j.I==0||m.K||Vd(m.j,m)}function Yn(m){Zi(m);var w=m.O;w&&typeof w.dispose=="function"&&w.dispose(),m.O=null,ja(m.V),m.g&&(w=m.g,m.g=null,w.abort(),w.dispose())}function Ji(m,w){try{var T=m.j;if(T.I!=0&&(T.g==m||tr(T.h,m))){if(!m.L&&tr(T.h,m)&&T.I==3){try{var k=T.Ba.g.parse(w)}catch{k=null}if(Array.isArray(k)&&k.length==3){var K=k;if(K[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<m.F)Qo(T),Ds(T);else break e;Xa(T),zt(18)}}else T.xa=K[1],0<T.xa-T.K&&K[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Yi(f(T.Va,T),6e3));er(T.h)<=1&&T.ta&&(T.ta=void 0)}else or(T,11)}else if((m.L||T.g==m)&&Qo(T),!j(w))for(K=T.Ba.g.parse(w),w=0;w<K.length;w++){let nt=K[w];const _t=nt[0];if(!(_t<=T.K))if(T.K=_t,nt=nt[1],T.I==2)if(nt[0]=="c"){T.M=nt[1],T.ba=nt[2];const li=nt[3];li!=null&&(T.ka=li,T.j.info("VER="+T.ka));const lr=nt[4];lr!=null&&(T.za=lr,T.j.info("SVER="+T.za));const Di=nt[5];Di!=null&&typeof Di=="number"&&Di>0&&(k=1.5*Di,T.O=k,T.j.info("backChannelRequestTimeoutMs_="+k)),k=T;const Mi=m.g;if(Mi){const Wa=Mi.g?Mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wa){var W=k.h;W.g||Wa.indexOf("spdy")==-1&&Wa.indexOf("quic")==-1&&Wa.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(vc(W,W.h),W.h=null))}if(k.G){const Xo=Mi.g?Mi.g.getResponseHeader("X-HTTP-Session-Id"):null;Xo&&(k.wa=Xo,st(k.J,k.G,Xo))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-m.F,T.j.info("Handshake RTT: "+T.T+"ms")),k=T;var pe=m;if(k.na=Ld(k,k.L?k.ba:null,k.W),pe.L){bc(k.h,pe);var je=pe,Vt=k.O;Vt&&(je.H=Vt),je.D&&(Zi(je),Wi(je)),k.g=pe}else Md(k);T.i.length>0&&ar(T)}else nt[0]!="stop"&&nt[0]!="close"||or(T,7);else T.I==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?or(T,7):Rc(T):nt[0]!="noop"&&T.l&&T.l.qa(nt),T.A=0)}}Gi(4)}catch{}}var Bt=class{constructor(m,w){this.g=m,this.map=w}};function gc(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function yc(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function er(m){return m.h?1:m.g?m.g.size:0}function tr(m,w){return m.h?m.h==w:m.g?m.g.has(w):!1}function vc(m,w){m.g?m.g.add(w):m.h=w}function bc(m,w){m.h&&m.h==w?m.h=null:m.g&&m.g.has(w)&&m.g.delete(w)}gc.prototype.cancel=function(){if(this.i=_c(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function _c(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let w=m.i;for(const T of m.g.values())w=w.concat(T.G);return w}return E(m.i)}var Cd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bo(m,w){if(m){m=m.split("&");for(let T=0;T<m.length;T++){const k=m[T].indexOf("=");let K,W=null;k>=0?(K=m[T].substring(0,k),W=m[T].substring(k+1)):K=m[T],w(K,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Qn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;m instanceof Qn?(this.l=m.l,sn(this,m.j),this.o=m.o,this.g=m.g,Ss(this,m.u),this.h=m.h,wc(this,kd(m.i)),this.m=m.m):m&&(w=String(m).match(Cd))?(this.l=!1,sn(this,w[1]||"",!0),this.o=nr(w[2]||""),this.g=nr(w[3]||"",!0),Ss(this,w[4]),this.h=nr(w[5]||"",!0),wc(this,w[6]||"",!0),this.m=nr(w[7]||"")):(this.l=!1,this.i=new Cs(null,this.l))}Qn.prototype.toString=function(){const m=[];var w=this.j;w&&m.push(Ha(w,qo,!0),":");var T=this.g;return(T||w=="file")&&(m.push("//"),(w=this.o)&&m.push(Ha(w,qo,!0),"@"),m.push(Or(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&m.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&m.push("/"),m.push(Ha(T,T.charAt(0)=="/"?xc:Rd,!0))),(T=this.i.toString())&&m.push("?",T),(T=this.m)&&m.push("#",Ha(T,Nd)),m.join("")},Qn.prototype.resolve=function(m){const w=qt(this);let T=!!m.j;T?sn(w,m.j):T=!!m.o,T?w.o=m.o:T=!!m.g,T?w.g=m.g:T=m.u!=null;var k=m.h;if(T)Ss(w,m.u);else if(T=!!m.h){if(k.charAt(0)!="/")if(this.g&&!this.h)k="/"+k;else{var K=w.h.lastIndexOf("/");K!=-1&&(k=w.h.slice(0,K+1)+k)}if(K=k,K==".."||K==".")k="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){k=K.lastIndexOf("/",0)==0,K=K.split("/");const W=[];for(let pe=0;pe<K.length;){const je=K[pe++];je=="."?k&&pe==K.length&&W.push(""):je==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),k&&pe==K.length&&W.push("")):(W.push(je),k=!0)}k=W.join("/")}else k=K}return T?w.h=k:T=m.i.toString()!=="",T?wc(w,kd(m.i)):T=!!m.m,T&&(w.m=m.m),w};function qt(m){return new Qn(m)}function sn(m,w,T){m.j=T?nr(w,!0):w,m.j&&(m.j=m.j.replace(/:$/,""))}function Ss(m,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);m.u=w}else m.u=null}function wc(m,w,T){w instanceof Cs?(m.i=w,$o(m.i,m.l)):(T||(w=Ha(w,As)),m.i=new Cs(w,m.l))}function st(m,w,T){m.i.set(w,T)}function qa(m){return st(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function nr(m,w){return m?w?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Ha(m,w,T){return typeof m=="string"?(m=encodeURI(m).replace(w,On),T&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function On(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var qo=/[#\/\?@]/g,Rd=/[#\?:]/g,xc=/[#\?]/g,As=/[#\?@]/g,Nd=/#/g;function Cs(m,w){this.h=this.g=null,this.i=m||null,this.j=!!w}function Vn(m){m.g||(m.g=new Map,m.h=0,m.i&&Bo(m.i,function(w,T){m.add(decodeURIComponent(w.replace(/\+/g," ")),T)}))}t=Cs.prototype,t.add=function(m,w){Vn(this),this.i=null,m=Rs(this,m);let T=this.g.get(m);return T||this.g.set(m,T=[]),T.push(w),this.h+=1,this};function Id(m,w){Vn(m),w=Rs(m,w),m.g.has(w)&&(m.i=null,m.h-=m.g.get(w).length,m.g.delete(w))}function Tc(m,w){return Vn(m),w=Rs(m,w),m.g.has(w)}t.forEach=function(m,w){Vn(this),this.g.forEach(function(T,k){T.forEach(function(K){m.call(w,K,k,this)},this)},this)};function Ec(m,w){Vn(m);let T=[];if(typeof w=="string")Tc(m,w)&&(T=T.concat(m.g.get(Rs(m,w))));else for(m=Array.from(m.g.values()),w=0;w<m.length;w++)T=T.concat(m[w]);return T}t.set=function(m,w){return Vn(this),this.i=null,m=Rs(this,m),Tc(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[w]),this.h+=1,this},t.get=function(m,w){return m?(m=Ec(this,m),m.length>0?String(m[0]):w):w};function Ho(m,w,T){Id(m,w),T.length>0&&(m.i=null,m.g.set(Rs(m,w),E(T)),m.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],w=Array.from(this.g.keys());for(let k=0;k<w.length;k++){var T=w[k];const K=Or(T);T=Ec(this,T);for(let W=0;W<T.length;W++){let pe=K;T[W]!==""&&(pe+="="+Or(T[W])),m.push(pe)}}return this.i=m.join("&")};function kd(m){const w=new Cs;return w.i=m.i,m.g&&(w.g=new Map(m.g),w.h=m.h),w}function Rs(m,w){return w=String(w),m.j&&(w=w.toLowerCase()),w}function $o(m,w){w&&!m.j&&(Vn(m),m.i=null,m.g.forEach(function(T,k){const K=k.toLowerCase();k!=K&&(Id(this,k),Ho(this,K,T))},m)),m.j=w}function Ni(m,w){const T=new Ai;if(c.Image){const k=new Image;k.onload=g(ai,T,"TestLoadImage: loaded",!0,w,k),k.onerror=g(ai,T,"TestLoadImage: error",!1,w,k),k.onabort=g(ai,T,"TestLoadImage: abort",!1,w,k),k.ontimeout=g(ai,T,"TestLoadImage: timeout",!1,w,k),c.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=m}else w(!1)}function Sc(m,w){const T=new Ai,k=new AbortController,K=setTimeout(()=>{k.abort(),ai(T,"TestPingServer: timeout",!1,w)},1e4);fetch(m,{signal:k.signal}).then(W=>{clearTimeout(K),W.ok?ai(T,"TestPingServer: ok",!0,w):ai(T,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(K),ai(T,"TestPingServer: error",!1,w)})}function ai(m,w,T,k,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),k(T)}catch{}}function Ns(){this.g=new Te}function ir(m){this.i=m.Sb||null,this.h=m.ab||!1}v(ir,Ze),ir.prototype.g=function(){return new $a(this.i,this.h)};function $a(m,w){Tt.call(this),this.H=m,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v($a,Tt),t=$a.prototype,t.open=function(m,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=w,this.readyState=1,Ii(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(w.body=m),(this.H||c).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Is(this)),this.readyState=0},t.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ii(this)),this.g&&(this.readyState=3,Ii(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Go(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Go(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}t.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var w=m.value?m.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!m.done}))&&(this.response=this.responseText+=w)}m.done?Is(this):Ii(this),this.readyState==3&&Go(this)}},t.Oa=function(m){this.g&&(this.response=this.responseText=m,Is(this))},t.Na=function(m){this.g&&(this.response=m,Is(this))},t.ga=function(){this.g&&Is(this)};function Is(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Ii(m)}t.setRequestHeader=function(m,w){this.A.append(m,w)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],w=this.h.entries();for(var T=w.next();!T.done;)T=T.value,m.push(T[0]+": "+T[1]),T=w.next();return m.join(`\r
`)};function Ii(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty($a.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function oi(m){let w="";return de(m,function(T,k){w+=k,w+=":",w+=T,w+=`\r
`}),w}function Ga(m,w,T){e:{for(k in T){var k=!1;break e}k=!0}k||(T=oi(T),typeof m=="string"?T!=null&&Or(T):st(m,w,T))}function ut(m){Tt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(ut,Tt);var rr=/^https?$/i,Ac=["POST","PUT"];t=ut.prototype,t.Fa=function(m){this.H=m},t.ea=function(m,w,T,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);w=w?w.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():pc.g(),this.g.onreadystatechange=_(f(this.Ca,this));try{this.B=!0,this.g.open(w,String(m),!0),this.B=!1}catch(W){Ka(this,W);return}if(m=T||"",T=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var K in k)T.set(K,k[K]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const W of k.keys())T.set(W,k.get(W));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(T.keys()).find(W=>W.toLowerCase()=="content-type"),K=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(Ac,w,void 0)>=0)||k||K||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,pe]of T)this.g.setRequestHeader(W,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(W){Ka(this,W)}};function Ka(m,w){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=w,m.o=5,Cc(m),Vr(m)}function Cc(m){m.A||(m.A=!0,Ot(m,"complete"),Ot(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Ot(this,"complete"),Ot(this,"abort"),Vr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vr(this,!0)),ut.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ya(this):this.Xa())},t.Xa=function(){Ya(this)};function Ya(m){if(m.h&&typeof o<"u"){if(m.v&&ki(m)==4)setTimeout(m.Ca.bind(m),0);else if(Ot(m,"readystatechange"),ki(m)==4){m.h=!1;try{const W=m.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var T;if(!(T=w)){var k;if(k=W===0){let pe=String(m.D).match(Cd)[1]||null;!pe&&c.self&&c.self.location&&(pe=c.self.location.protocol.slice(0,-1)),k=!rr.test(pe?pe.toLowerCase():"")}T=k}if(T)Ot(m,"complete"),Ot(m,"success");else{m.o=6;try{var K=ki(m)>2?m.g.statusText:""}catch{K=""}m.l=K+" ["+m.ca()+"]",Cc(m)}}finally{Vr(m)}}}}function Vr(m,w){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const T=m.g;m.g=null,w||Ot(m,"ready");try{T.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ki(m){return m.g?m.g.readyState:0}t.ca=function(){try{return ki(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(m){if(this.g){var w=this.g.responseText;return m&&w.indexOf(m)==0&&(w=w.substring(m.length)),fc(w)}};function un(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Pr(m){const w={};m=(m.g&&ki(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<m.length;k++){if(j(m[k]))continue;var T=Ed(m[k]);const K=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const W=w[K]||[];w[K]=W,W.push(T)}re(w,function(k){return k.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function sr(m,w,T){return T&&T.internalChannelParams&&T.internalChannelParams[m]||w}function ks(m){this.za=0,this.i=[],this.j=new Ai,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=sr("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=sr("baseRetryDelayMs",5e3,m),this.Za=sr("retryDelaySeedMs",1e4,m),this.Ta=sr("forwardChannelMaxRetries",2,m),this.va=sr("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new gc(m&&m.concurrentRequestLimit),this.Ba=new Ns,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ks.prototype,t.ka=8,t.I=1,t.connect=function(m,w,T,k){zt(0),this.W=m,this.H=w||{},T&&k!==void 0&&(this.H.OSID=T,this.H.OAID=k),this.F=this.X,this.J=Ld(this,null,this.W),ar(this)};function Rc(m){if(Ko(m),m.I==3){var w=m.V++,T=qt(m.J);if(st(T,"SID",m.M),st(T,"RID",w),st(T,"TYPE","terminate"),Qa(m,T),w=new Ci(m,m.j,w),w.M=2,w.A=qa(qt(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(w.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=w.A,T=!0),T||(w.g=Ud(w.j,null),w.g.ea(w.A)),w.F=Date.now(),Wi(w)}jd(m)}function Ds(m){m.g&&(Ic(m),m.g.cancel(),m.g=null)}function Ko(m){Ds(m),m.v&&(c.clearTimeout(m.v),m.v=null),Qo(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function ar(m){if(!yc(m.h)&&!m.m){m.m=!0;var w=m.Ea;te||I(),ne||(te(),ne=!0),S.add(w,m),m.D=0}}function Yo(m,w){return er(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=w.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Yi(f(m.Ea,m,w),Pd(m,m.D)),m.D++,!0)}t.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const K=new Ci(this,this.j,m);let W=this.o;if(this.U&&(W?(W=V(W),he(W,this.U)):W=this.U),this.u!==null||this.R||(K.J=W,W=null),this.S)e:{for(var w=0,T=0;T<this.i.length;T++){t:{var k=this.i[T];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(w+=k,w>4096){w=T;break e}if(w===4096||T===this.i.length-1){w=T+1;break e}}w=1e3}else w=1e3;w=Dd(this,K,w),T=qt(this.J),st(T,"RID",m),st(T,"CVER",22),this.G&&st(T,"X-HTTP-Session-Id",this.G),Qa(this,T),W&&(this.R?w="headers="+Or(oi(W))+"&"+w:this.u&&Ga(T,this.u,W)),vc(this.h,K),this.Ra&&st(T,"TYPE","init"),this.S?(st(T,"$req",w),st(T,"SID","null"),K.U=!0,Xi(K,T,null)):Xi(K,T,w),this.I=2}}else this.I==3&&(m?Nc(this,m):this.i.length==0||yc(this.h)||Nc(this))};function Nc(m,w){var T;w?T=w.l:T=m.V++;const k=qt(m.J);st(k,"SID",m.M),st(k,"RID",T),st(k,"AID",m.K),Qa(m,k),m.u&&m.o&&Ga(k,m.u,m.o),T=new Ci(m,m.j,T,m.D+1),m.u===null&&(T.J=m.o),w&&(m.i=w.G.concat(m.i)),w=Dd(m,T,1e3),T.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),vc(m.h,T),Xi(T,k,w)}function Qa(m,w){m.H&&de(m.H,function(T,k){st(w,k,T)}),m.l&&de({},function(T,k){st(w,k,T)})}function Dd(m,w,T){T=Math.min(m.i.length,T);const k=m.l?f(m.l.Ka,m.l,m):null;e:{var K=m.i;let je=-1;for(;;){const Vt=["count="+T];je==-1?T>0?(je=K[0].g,Vt.push("ofs="+je)):je=0:Vt.push("ofs="+je);let nt=!0;for(let _t=0;_t<T;_t++){var W=K[_t].g;const li=K[_t].map;if(W-=je,W<0)je=Math.max(0,K[_t].g-100),nt=!1;else try{W="req"+W+"_"||"";try{var pe=li instanceof Map?li:Object.entries(li);for(const[lr,Di]of pe){let Mi=Di;d(Di)&&(Mi=$i(Di)),Vt.push(W+lr+"="+encodeURIComponent(Mi))}}catch(lr){throw Vt.push(W+"type="+encodeURIComponent("_badmap")),lr}}catch{k&&k(li)}}if(nt){pe=Vt.join("&");break e}}pe=void 0}return m=m.i.splice(0,T),w.G=m,pe}function Md(m){if(!m.g&&!m.v){m.Y=1;var w=m.Da;te||I(),ne||(te(),ne=!0),S.add(w,m),m.A=0}}function Xa(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Yi(f(m.Da,m),Pd(m,m.A)),m.A++,!0)}t.Da=function(){if(this.v=null,Od(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Yi(f(this.Wa,this),m)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,zt(10),Ds(this),Od(this))};function Ic(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function Od(m){m.g=new Ci(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var w=qt(m.na);st(w,"RID","rpc"),st(w,"SID",m.M),st(w,"AID",m.K),st(w,"CI",m.F?"0":"1"),!m.F&&m.ia&&st(w,"TO",m.ia),st(w,"TYPE","xmlhttp"),Qa(m,w),m.u&&m.o&&Ga(w,m.u,m.o),m.O&&(m.g.H=m.O);var T=m.g;m=m.ba,T.M=1,T.A=qa(qt(w)),T.u=null,T.R=!0,zo(T,m)}t.Va=function(){this.C!=null&&(this.C=null,Ds(this),Xa(this),zt(19))};function Qo(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function Vd(m,w){var T=null;if(m.g==w){Qo(m),Ic(m),m.g=null;var k=2}else if(tr(m.h,w))T=w.G,bc(m.h,w),k=1;else return;if(m.I!=0){if(w.o)if(k==1){T=w.u?w.u.length:0,w=Date.now()-w.F;var K=m.D;k=tt(),Ot(k,new Ki(k,T)),ar(m)}else Md(m);else if(K=w.m,K==3||K==0&&w.X>0||!(k==1&&Yo(m,w)||k==2&&Xa(m)))switch(T&&T.length>0&&(w=m.h,w.i=w.i.concat(T)),K){case 1:or(m,5);break;case 4:or(m,10);break;case 3:or(m,6);break;default:or(m,2)}}}function Pd(m,w){let T=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(T*=2),T*w}function or(m,w){if(m.j.info("Error code "+w),w==2){var T=f(m.bb,m),k=m.Ua;const K=!k;k=new Qn(k||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||sn(k,"https"),qa(k),K?Ni(k.toString(),T):Sc(k.toString(),T)}else zt(2);m.I=0,m.l&&m.l.pa(w),jd(m),Ko(m)}t.bb=function(m){m?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function jd(m){if(m.I=0,m.ja=[],m.l){const w=_c(m.h);(w.length!=0||m.i.length!=0)&&(N(m.ja,w),N(m.ja,m.i),m.h.i.length=0,E(m.i),m.i.length=0),m.l.oa()}}function Ld(m,w,T){var k=T instanceof Qn?qt(T):new Qn(T);if(k.g!="")w&&(k.g=w+"."+k.g),Ss(k,k.u);else{var K=c.location;k=K.protocol,w=w?w+"."+K.hostname:K.hostname,K=+K.port;const W=new Qn(null);k&&sn(W,k),w&&(W.g=w),K&&Ss(W,K),T&&(W.h=T),k=W}return T=m.G,w=m.wa,T&&w&&st(k,T,w),st(k,"VER",m.ka),Qa(m,k),k}function Ud(m,w,T){if(w&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=m.Aa&&!m.ma?new ut(new ir({ab:T})):new ut(m.ma),w.Fa(m.L),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function zd(){}t=zd.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ms(){}Ms.prototype.g=function(m,w){return new In(m,w)};function In(m,w){Tt.call(this),this.g=new ks(w),this.l=m,this.h=w&&w.messageUrlParams||null,m=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(m?m["X-WebChannel-Content-Type"]=w.messageContentType:m={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(m?m["X-WebChannel-Client-Profile"]=w.sa:m={"X-WebChannel-Client-Profile":w.sa}),this.g.U=m,(m=w&&w.Qb)&&!j(m)&&(this.g.u=m),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!j(w)&&(this.g.G=w,m=this.h,m!==null&&w in m&&(m=this.h,w in m&&delete m[w])),this.j=new jr(this)}v(In,Tt),In.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){Rc(this.g)},In.prototype.o=function(m){var w=this.g;if(typeof m=="string"){var T={};T.__data__=m,m=T}else this.v&&(T={},T.__data__=$i(m),m=T);w.i.push(new Bt(w.Ya++,m)),w.I==3&&ar(w)},In.prototype.N=function(){this.g.l=null,delete this.j,Rc(this.g),delete this.g,In.Z.N.call(this)};function Fd(m){Et.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var w=m.__sm__;if(w){e:{for(const T in w){m=T;break e}m=void 0}(this.i=m)&&(m=this.i,w=w!==null&&m in w?w[m]:void 0),this.data=w}else this.data=m}v(Fd,Et);function Bd(){Mn.call(this),this.status=1}v(Bd,Mn);function jr(m){this.g=m}v(jr,zd),jr.prototype.ra=function(){Ot(this.g,"a")},jr.prototype.qa=function(m){Ot(this.g,new Fd(m))},jr.prototype.pa=function(m){Ot(this.g,new Bd)},jr.prototype.oa=function(){Ot(this.g,"b")},Ms.prototype.createWebChannel=Ms.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,wC=function(){return new Ms},_C=function(){return tt()},bC=Rt,cy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fa.NO_ERROR=0,Fa.TIMEOUT=8,Fa.HTTP_ERROR=6,bf=Fa,mc.COMPLETE="complete",vC=mc,cn.EventType=Zt,Zt.OPEN="a",Zt.CLOSE="b",Zt.ERROR="c",Zt.MESSAGE="d",Tt.prototype.listen=Tt.prototype.J,_u=cn,ut.prototype.listenOnce=ut.prototype.K,ut.prototype.getLastError=ut.prototype.Ha,ut.prototype.getLastErrorCode=ut.prototype.ya,ut.prototype.getStatus=ut.prototype.ca,ut.prototype.getResponseJson=ut.prototype.La,ut.prototype.getResponseText=ut.prototype.la,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Fa,yC=ut}).apply(typeof Jh<"u"?Jh:typeof self<"u"?self:typeof window<"u"?window:{});const nE="@firebase/firestore",iE="4.9.2";class Sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sn.UNAUTHENTICATED=new Sn(null),Sn.GOOGLE_CREDENTIALS=new Sn("google-credentials-uid"),Sn.FIRST_PARTY=new Sn("first-party-uid"),Sn.MOCK_USER=new Sn("mock-user");let oc="12.3.0";const ko=new pv("@firebase/firestore");function Al(){return ko.logLevel}function ve(t,...e){if(ko.logLevel<=Ge.DEBUG){const n=e.map(Av);ko.debug(`Firestore (${oc}): ${t}`,...n)}}function ms(t,...e){if(ko.logLevel<=Ge.ERROR){const n=e.map(Av);ko.error(`Firestore (${oc}): ${t}`,...n)}}function Kl(t,...e){if(ko.logLevel<=Ge.WARN){const n=e.map(Av);ko.warn(`Firestore (${oc}): ${t}`,...n)}}function Av(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Ie(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,xC(t,i,n)}function xC(t,e,n){let i=`FIRESTORE (${oc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw ms(i),new Error(i)}function rt(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||xC(e,s,i)}function Pe(t,e){return t}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends _s{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class os{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class TC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Sn.UNAUTHENTICATED)))}shutdown(){}}class CL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class RL{constructor(e){this.t=e,this.currentUser=Sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){rt(this.o===void 0,42304);let i=this.i;const s=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new os;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new os,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await s(this.currentUser)}))},d=h=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((h=>d(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?d(h):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new os)}}),0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(rt(typeof i.accessToken=="string",31837,{l:i}),new TC(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string",2055,{h:e}),new Sn(e)}}class NL{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class IL{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new NL(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class rE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kL{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){rt(this.o===void 0,3512);const i=o=>{o.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,ve("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const s=o=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new rE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(rt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new rE(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function DL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}class Cv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=DL(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<n&&(i+=e.charAt(s[o]%62))}return i}}function Ke(t,e){return t<e?-1:t>e?1:0}function uy(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const s=t.charAt(i),o=e.charAt(i);if(s!==o)return m0(s)===m0(o)?Ke(s,o):m0(s)?1:-1}return Ke(t.length,e.length)}const ML=55296,OL=57343;function m0(t){const e=t.charCodeAt(0);return e>=ML&&e<=OL}function Yl(t,e,n){return t.length===e.length&&t.every(((i,s)=>n(i,e[s])))}const sE="__name__";class mr{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ie(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Ie(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return mr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof mr?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const o=mr.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return Ke(e.length,n.length)}static compareSegments(e,n){const i=mr.isNumericId(e),s=mr.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?mr.extractNumericId(e).compare(mr.extractNumericId(n)):uy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ba.fromString(e.substring(4,e.length-2))}}class gt extends mr{construct(e,n,i){return new gt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ge(ae.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((s=>s.length>0)))}return new gt(n)}static emptyPath(){return new gt([])}}const VL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yn extends mr{construct(e,n,i){return new yn(e,n,i)}static isValidIdentifier(e){return VL.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sE}static keyField(){return new yn([sE])}static fromServerFormat(e){const n=[];let i="",s=0;const o=()=>{if(i.length===0)throw new ge(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let c=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new ge(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new ge(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,s+=2}else d==="`"?(c=!c,s++):d!=="."||c?(i+=d,s++):(o(),s++)}if(o(),c)throw new ge(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yn(n)}static emptyPath(){return new yn([])}}class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(gt.fromString(e))}static fromName(e){return new Ae(gt.fromString(e).popFirst(5))}static empty(){return new Ae(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return gt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new gt(e.slice()))}}function EC(t,e,n){if(!n)throw new ge(ae.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function PL(t,e,n,i){if(e===!0&&i===!0)throw new ge(ae.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function aE(t){if(!Ae.isDocumentKey(t))throw new ge(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function oE(t){if(Ae.isDocumentKey(t))throw new ge(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function SC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function bm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ie(12329,{type:typeof t})}function $n(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ge(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bm(t);throw new ge(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Wt(t,e){const n={typeString:t};return e&&(n.value=e),n}function pd(t,e){if(!SC(t))throw new ge(ae.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const c=t[i];if(s&&typeof c!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&c!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new ge(ae.INVALID_ARGUMENT,n);return!0}const lE=-62135596800,cE=1e6;class Xe{static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*cE);return new Xe(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<lE)throw new ge(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cE}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(pd(e,Xe._jsonSchema))return new Xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-lE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:Wt("string",Xe._jsonSchemaVersion),seconds:Wt("number"),nanoseconds:Wt("number")};class Me{static fromTimestamp(e){return new Me(e)}static min(){return new Me(new Xe(0,0))}static max(){return new Me(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ku=-1;function jL(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Me.fromTimestamp(i===1e9?new Xe(n+1,0):new Xe(n,i));return new Ta(s,Ae.empty(),e)}function LL(t){return new Ta(t.readTime,t.key,Ku)}class Ta{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ta(Me.min(),Ae.empty(),Ku)}static max(){return new Ta(Me.max(),Ae.empty(),Ku)}}function UL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ae.comparator(t.documentKey,e.documentKey),n!==0?n:Ke(t.largestBatchId,e.largestBatchId))}const zL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function lc(t){if(t.code!==ae.FAILED_PRECONDITION||t.message!==zL)throw t;ve("LocalStore","Unexpectedly lost primary lease")}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new le(((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof le?n:le.resolve(n)}catch(n){return le.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):le.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):le.reject(n)}static resolve(e){return new le(((n,i)=>{n(e)}))}static reject(e){return new le(((n,i)=>{i(e)}))}static waitFor(e){return new le(((n,i)=>{let s=0,o=0,c=!1;e.forEach((d=>{++s,d.next((()=>{++o,c&&o===s&&n()}),(h=>i(h)))})),c=!0,o===s&&n()}))}static or(e){let n=le.resolve(!1);for(const i of e)n=n.next((s=>s?le.resolve(s):i()));return n}static forEach(e,n){const i=[];return e.forEach(((s,o)=>{i.push(n.call(this,s,o))})),this.waitFor(i)}static mapArray(e,n){return new le(((i,s)=>{const o=e.length,c=new Array(o);let d=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next((g=>{c[f]=g,++d,d===o&&i(c)}),(g=>s(g)))}}))}static doWhile(e,n){return new le(((i,s)=>{const o=()=>{e()===!0?n().next((()=>{o()}),s):i()};o()}))}}function BL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function cc(t){return t.name==="IndexedDbTransactionError"}class _m{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}_m.ce=-1;const Rv=-1;function wm(t){return t==null}function qf(t){return t===0&&1/t==-1/0}function qL(t){return typeof t=="number"&&Number.isInteger(t)&&!qf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const AC="";function HL(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=uE(e)),e=$L(t.get(n),e);return uE(e)}function $L(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case AC:n+="";break;default:n+=o}}return n}function uE(t){return t+AC+""}function dE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Da(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function CC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Ct{constructor(e,n){this.comparator=e,this.root=n||gn.EMPTY}insert(e,n){return new Ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gn.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ef(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ef(this.root,e,this.comparator,!1)}getReverseIterator(){return new ef(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ef(this.root,e,this.comparator,!0)}}class ef{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gn{constructor(e,n,i,s,o){this.key=e,this.value=n,this.color=i??gn.RED,this.left=s??gn.EMPTY,this.right=o??gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,o){return new gn(e??this.key,n??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,i),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return gn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return gn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}gn.EMPTY=null,gn.RED=!0,gn.BLACK=!1;gn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,n,i,s,o){return this}insert(e,n,i){return new gn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class tn{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hE(this.data.getIterator())}getIteratorFrom(e){return new hE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof tn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new tn(this.comparator);return n.data=e,n}}class hE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ri{constructor(e){this.fields=e,e.sort(yn.comparator)}static empty(){return new ri([])}unionWith(e){let n=new tn(yn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new ri(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yl(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}class RC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class _n{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new RC("Invalid base64 string: "+o):o}})(e);return new _n(n)}static fromUint8Array(e){const n=(function(s){let o="";for(let c=0;c<s.length;++c)o+=String.fromCharCode(s[c]);return o})(e);return new _n(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_n.EMPTY_BYTE_STRING=new _n("");const GL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ea(t){if(rt(!!t,39018),typeof t=="string"){let e=0;const n=GL.exec(t);if(rt(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ut(t.seconds),nanos:Ut(t.nanos)}}function Ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Sa(t){return typeof t=="string"?_n.fromBase64String(t):_n.fromUint8Array(t)}const NC="server_timestamp",IC="__type__",kC="__previous_value__",DC="__local_write_time__";function Nv(t){return(t?.mapValue?.fields||{})[IC]?.stringValue===NC}function xm(t){const e=t.mapValue.fields[kC];return Nv(e)?xm(e):e}function Yu(t){const e=Ea(t.mapValue.fields[DC].timestampValue);return new Xe(e.seconds,e.nanos)}class KL{constructor(e,n,i,s,o,c,d,h,f,g){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=g}}const Hf="(default)";class Qu{constructor(e,n){this.projectId=e,this.database=n||Hf}static empty(){return new Qu("","")}get isDefaultDatabase(){return this.database===Hf}isEqual(e){return e instanceof Qu&&e.projectId===this.projectId&&e.database===this.database}}const MC="__type__",YL="__max__",tf={mapValue:{}},OC="__vector__",$f="value";function Aa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Nv(t)?4:XL(t)?9007199254740991:QL(t)?10:11:Ie(28295,{value:t})}function Cr(t,e){if(t===e)return!0;const n=Aa(t);if(n!==Aa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yu(t).isEqual(Yu(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const c=Ea(s.timestampValue),d=Ea(o.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,o){return Sa(s.bytesValue).isEqual(Sa(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,o){return Ut(s.geoPointValue.latitude)===Ut(o.geoPointValue.latitude)&&Ut(s.geoPointValue.longitude)===Ut(o.geoPointValue.longitude)})(t,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return Ut(s.integerValue)===Ut(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const c=Ut(s.doubleValue),d=Ut(o.doubleValue);return c===d?qf(c)===qf(d):isNaN(c)&&isNaN(d)}return!1})(t,e);case 9:return Yl(t.arrayValue.values||[],e.arrayValue.values||[],Cr);case 10:case 11:return(function(s,o){const c=s.mapValue.fields||{},d=o.mapValue.fields||{};if(dE(c)!==dE(d))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(d[h]===void 0||!Cr(c[h],d[h])))return!1;return!0})(t,e);default:return Ie(52216,{left:t})}}function Xu(t,e){return(t.values||[]).find((n=>Cr(n,e)))!==void 0}function Ql(t,e){if(t===e)return 0;const n=Aa(t),i=Aa(e);if(n!==i)return Ke(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(t.booleanValue,e.booleanValue);case 2:return(function(o,c){const d=Ut(o.integerValue||o.doubleValue),h=Ut(c.integerValue||c.doubleValue);return d<h?-1:d>h?1:d===h?0:isNaN(d)?isNaN(h)?0:-1:1})(t,e);case 3:return fE(t.timestampValue,e.timestampValue);case 4:return fE(Yu(t),Yu(e));case 5:return uy(t.stringValue,e.stringValue);case 6:return(function(o,c){const d=Sa(o),h=Sa(c);return d.compareTo(h)})(t.bytesValue,e.bytesValue);case 7:return(function(o,c){const d=o.split("/"),h=c.split("/");for(let f=0;f<d.length&&f<h.length;f++){const g=Ke(d[f],h[f]);if(g!==0)return g}return Ke(d.length,h.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,c){const d=Ke(Ut(o.latitude),Ut(c.latitude));return d!==0?d:Ke(Ut(o.longitude),Ut(c.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return mE(t.arrayValue,e.arrayValue);case 10:return(function(o,c){const d=o.fields||{},h=c.fields||{},f=d[$f]?.arrayValue,g=h[$f]?.arrayValue,v=Ke(f?.values?.length||0,g?.values?.length||0);return v!==0?v:mE(f,g)})(t.mapValue,e.mapValue);case 11:return(function(o,c){if(o===tf.mapValue&&c===tf.mapValue)return 0;if(o===tf.mapValue)return 1;if(c===tf.mapValue)return-1;const d=o.fields||{},h=Object.keys(d),f=c.fields||{},g=Object.keys(f);h.sort(),g.sort();for(let v=0;v<h.length&&v<g.length;++v){const _=uy(h[v],g[v]);if(_!==0)return _;const E=Ql(d[h[v]],f[g[v]]);if(E!==0)return E}return Ke(h.length,g.length)})(t.mapValue,e.mapValue);default:throw Ie(23264,{he:n})}}function fE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ke(t,e);const n=Ea(t),i=Ea(e),s=Ke(n.seconds,i.seconds);return s!==0?s:Ke(n.nanos,i.nanos)}function mE(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const o=Ql(n[s],i[s]);if(o)return o}return Ke(n.length,i.length)}function Xl(t){return dy(t)}function dy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=Ea(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Sa(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ae.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",s=!0;for(const o of n.values||[])s?s=!1:i+=",",i+=dy(o);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const c of i)o?o=!1:s+=",",s+=`${c}:${dy(n.fields[c])}`;return s+"}"})(t.mapValue):Ie(61005,{value:t})}function _f(t){switch(Aa(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xm(t);return e?16+_f(e):16;case 5:return 2*t.stringValue.length;case 6:return Sa(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,o)=>s+_f(o)),0)})(t.arrayValue);case 10:case 11:return(function(i){let s=0;return Da(i.fields,((o,c)=>{s+=o.length+_f(c)})),s})(t.mapValue);default:throw Ie(13486,{value:t})}}function pE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hy(t){return!!t&&"integerValue"in t}function Iv(t){return!!t&&"arrayValue"in t}function gE(t){return!!t&&"nullValue"in t}function yE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wf(t){return!!t&&"mapValue"in t}function QL(t){return(t?.mapValue?.fields||{})[MC]?.stringValue===OC}function Du(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Da(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=Du(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Du(t.arrayValue.values[n]);return e}return{...t}}function XL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===YL}class qn{constructor(e){this.value=e}static empty(){return new qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!wf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Du(n)}setAll(e){let n=yn.emptyPath(),i={},s=[];e.forEach(((c,d)=>{if(!n.isImmediateParentOf(d)){const h=this.getFieldsMap(n);this.applyChanges(h,i,s),i={},s=[],n=d.popLast()}c?i[d.lastSegment()]=Du(c):s.push(d.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,i,s)}delete(e){const n=this.field(e.popLast());wf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];wf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){Da(n,((s,o)=>e[s]=o));for(const s of i)delete e[s]}clone(){return new qn(Du(this.value))}}function VC(t){const e=[];return Da(t.fields,((n,i)=>{const s=new yn([n]);if(wf(i)){const o=VC(i.mapValue).fields;if(o.length===0)e.push(s);else for(const c of o)e.push(s.child(c))}else e.push(s)})),new ri(e)}class An{constructor(e,n,i,s,o,c,d){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=o,this.data=c,this.documentState=d}static newInvalidDocument(e){return new An(e,0,Me.min(),Me.min(),Me.min(),qn.empty(),0)}static newFoundDocument(e,n,i,s){return new An(e,1,n,Me.min(),i,s,0)}static newNoDocument(e,n){return new An(e,2,n,Me.min(),Me.min(),qn.empty(),0)}static newUnknownDocument(e,n){return new An(e,3,n,Me.min(),Me.min(),qn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof An&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new An(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Gf{constructor(e,n){this.position=e,this.inclusive=n}}function vE(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const o=e[s],c=t.position[s];if(o.field.isKeyField()?i=Ae.comparator(Ae.fromName(c.referenceValue),n.key):i=Ql(c,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function bE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cr(t.position[n],e.position[n]))return!1;return!0}class Wu{constructor(e,n="asc"){this.field=e,this.dir=n}}function WL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class PC{}class Xt extends PC{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new JL(e,n,i):n==="array-contains"?new nU(e,i):n==="in"?new iU(e,i):n==="not-in"?new rU(e,i):n==="array-contains-any"?new sU(e,i):new Xt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new eU(e,i):new tU(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ql(n,this.value)):n!==null&&Aa(this.value)===Aa(n)&&this.matchesComparison(Ql(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bi extends PC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Bi(e,n)}matches(e){return jC(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function jC(t){return t.op==="and"}function LC(t){return ZL(t)&&jC(t)}function ZL(t){for(const e of t.filters)if(e instanceof Bi)return!1;return!0}function fy(t){if(t instanceof Xt)return t.field.canonicalString()+t.op.toString()+Xl(t.value);if(LC(t))return t.filters.map((e=>fy(e))).join(",");{const e=t.filters.map((n=>fy(n))).join(",");return`${t.op}(${e})`}}function UC(t,e){return t instanceof Xt?(function(i,s){return s instanceof Xt&&i.op===s.op&&i.field.isEqual(s.field)&&Cr(i.value,s.value)})(t,e):t instanceof Bi?(function(i,s){return s instanceof Bi&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((o,c,d)=>o&&UC(c,s.filters[d])),!0):!1})(t,e):void Ie(19439)}function zC(t){return t instanceof Xt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Xl(n.value)}`})(t):t instanceof Bi?(function(n){return n.op.toString()+" {"+n.getFilters().map(zC).join(" ,")+"}"})(t):"Filter"}class JL extends Xt{constructor(e,n,i){super(e,n,i),this.key=Ae.fromName(i.referenceValue)}matches(e){const n=Ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class eU extends Xt{constructor(e,n){super(e,"in",n),this.keys=FC("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class tU extends Xt{constructor(e,n){super(e,"not-in",n),this.keys=FC("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function FC(t,e){return(e.arrayValue?.values||[]).map((n=>Ae.fromName(n.referenceValue)))}class nU extends Xt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Iv(n)&&Xu(n.arrayValue,this.value)}}class iU extends Xt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Xu(this.value.arrayValue,n)}}class rU extends Xt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Xu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Xu(this.value.arrayValue,n)}}class sU extends Xt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Iv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Xu(this.value.arrayValue,i)))}}class aU{constructor(e,n=null,i=[],s=[],o=null,c=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=c,this.endAt=d,this.Te=null}}function _E(t,e=null,n=[],i=[],s=null,o=null,c=null){return new aU(t,e,n,i,s,o,c)}function kv(t){const e=Pe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>fy(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),wm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Xl(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Xl(i))).join(",")),e.Te=n}return e.Te}function Dv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!WL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!UC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!bE(t.startAt,e.startAt)&&bE(t.endAt,e.endAt)}function my(t){return Ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class uc{constructor(e,n=null,i=[],s=[],o=null,c="F",d=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=c,this.startAt=d,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function oU(t,e,n,i,s,o,c,d){return new uc(t,e,n,i,s,o,c,d)}function Tm(t){return new uc(t)}function wE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function BC(t){return t.collectionGroup!==null}function Mu(t){const e=Pe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new tn(yn.comparator);return c.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(d=d.add(f.field))}))})),d})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Wu(o,i))})),n.has(yn.keyField().canonicalString())||e.Ie.push(new Wu(yn.keyField(),i))}return e.Ie}function xr(t){const e=Pe(t);return e.Ee||(e.Ee=lU(e,Mu(t))),e.Ee}function lU(t,e){if(t.limitType==="F")return _E(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new Wu(s.field,o)}));const n=t.endAt?new Gf(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Gf(t.startAt.position,t.startAt.inclusive):null;return _E(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function py(t,e){const n=t.filters.concat([e]);return new uc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Kf(t,e,n){return new uc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Em(t,e){return Dv(xr(t),xr(e))&&t.limitType===e.limitType}function qC(t){return`${kv(xr(t))}|lt:${t.limitType}`}function Cl(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((s=>zC(s))).join(", ")}]`),wm(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((s=>Xl(s))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((s=>Xl(s))).join(",")),`Target(${i})`})(xr(t))}; limitType=${t.limitType})`}function Sm(t,e){return e.isFoundDocument()&&(function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Ae.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(t,e)&&(function(i,s){for(const o of Mu(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0})(t,e)&&(function(i,s){return!(i.startAt&&!(function(c,d,h){const f=vE(c,d,h);return c.inclusive?f<=0:f<0})(i.startAt,Mu(i),s)||i.endAt&&!(function(c,d,h){const f=vE(c,d,h);return c.inclusive?f>=0:f>0})(i.endAt,Mu(i),s))})(t,e)}function cU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function HC(t){return(e,n)=>{let i=!1;for(const s of Mu(t)){const o=uU(s,e,n);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function uU(t,e,n){const i=t.field.isKeyField()?Ae.comparator(e.key,n.key):(function(o,c,d){const h=c.data.field(o),f=d.data.field(o);return h!==null&&f!==null?Ql(h,f):Ie(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Ie(19790,{direction:t.dir})}}class jo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Da(this.inner,((n,i)=>{for(const[s,o]of i)e(s,o)}))}isEmpty(){return CC(this.inner)}size(){return this.innerSize}}const dU=new Ct(Ae.comparator);function ps(){return dU}const $C=new Ct(Ae.comparator);function wu(...t){let e=$C;for(const n of t)e=e.insert(n.key,n);return e}function GC(t){let e=$C;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function _o(){return Ou()}function KC(){return Ou()}function Ou(){return new jo((t=>t.toString()),((t,e)=>t.isEqual(e)))}const hU=new Ct(Ae.comparator),fU=new tn(Ae.comparator);function Ye(...t){let e=fU;for(const n of t)e=e.add(n);return e}const mU=new tn(Ke);function pU(){return mU}function Mv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qf(e)?"-0":e}}function YC(t){return{integerValue:""+t}}function gU(t,e){return qL(e)?YC(e):Mv(t,e)}class Am{constructor(){this._=void 0}}function yU(t,e,n){return t instanceof Yf?(function(s,o){const c={fields:{[IC]:{stringValue:NC},[DC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Nv(o)&&(o=xm(o)),o&&(c.fields[kC]=o),{mapValue:c}})(n,e):t instanceof Zu?XC(t,e):t instanceof Ju?WC(t,e):(function(s,o){const c=QC(s,o),d=xE(c)+xE(s.Ae);return hy(c)&&hy(s.Ae)?YC(d):Mv(s.serializer,d)})(t,e)}function vU(t,e,n){return t instanceof Zu?XC(t,e):t instanceof Ju?WC(t,e):n}function QC(t,e){return t instanceof Qf?(function(i){return hy(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class Yf extends Am{}class Zu extends Am{constructor(e){super(),this.elements=e}}function XC(t,e){const n=ZC(e);for(const i of t.elements)n.some((s=>Cr(s,i)))||n.push(i);return{arrayValue:{values:n}}}class Ju extends Am{constructor(e){super(),this.elements=e}}function WC(t,e){let n=ZC(e);for(const i of t.elements)n=n.filter((s=>!Cr(s,i)));return{arrayValue:{values:n}}}class Qf extends Am{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function xE(t){return Ut(t.integerValue||t.doubleValue)}function ZC(t){return Iv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function bU(t,e){return t.field.isEqual(e.field)&&(function(i,s){return i instanceof Zu&&s instanceof Zu||i instanceof Ju&&s instanceof Ju?Yl(i.elements,s.elements,Cr):i instanceof Qf&&s instanceof Qf?Cr(i.Ae,s.Ae):i instanceof Yf&&s instanceof Yf})(t.transform,e.transform)}class _U{constructor(e,n){this.version=e,this.transformResults=n}}class Ti{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ti}static exists(e){return new Ti(void 0,e)}static updateTime(e){return new Ti(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Cm{}function JC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ov(t.key,Ti.none()):new gd(t.key,t.data,Ti.none());{const n=t.data,i=qn.empty();let s=new tn(yn.comparator);for(let o of e.fields)if(!s.has(o)){let c=n.field(o);c===null&&o.length>1&&(o=o.popLast(),c=n.field(o)),c===null?i.delete(o):i.set(o,c),s=s.add(o)}return new Ma(t.key,i,new ri(s.toArray()),Ti.none())}}function wU(t,e,n){t instanceof gd?(function(s,o,c){const d=s.value.clone(),h=EE(s.fieldTransforms,o,c.transformResults);d.setAll(h),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(t,e,n):t instanceof Ma?(function(s,o,c){if(!xf(s.precondition,o))return void o.convertToUnknownDocument(c.version);const d=EE(s.fieldTransforms,o,c.transformResults),h=o.data;h.setAll(eR(s)),h.setAll(d),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(t,e,n):(function(s,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,n)}function Vu(t,e,n,i){return t instanceof gd?(function(o,c,d,h){if(!xf(o.precondition,c))return d;const f=o.value.clone(),g=SE(o.fieldTransforms,h,c);return f.setAll(g),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null})(t,e,n,i):t instanceof Ma?(function(o,c,d,h){if(!xf(o.precondition,c))return d;const f=SE(o.fieldTransforms,h,c),g=c.data;return g.setAll(eR(o)),g.setAll(f),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),d===null?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((v=>v.field)))})(t,e,n,i):(function(o,c,d){return xf(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(t,e,n)}function xU(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),o=QC(i.transform,s||null);o!=null&&(n===null&&(n=qn.empty()),n.set(i.field,o))}return n||null}function TE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Yl(i,s,((o,c)=>bU(o,c)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class gd extends Cm{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ma extends Cm{constructor(e,n,i,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function eR(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function EE(t,e,n){const i=new Map;rt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const o=t[s],c=o.transform,d=e.data.field(o.field);i.set(o.field,vU(c,d,n[s]))}return i}function SE(t,e,n){const i=new Map;for(const s of t){const o=s.transform,c=n.data.field(s.field);i.set(s.field,yU(o,c,e))}return i}class Ov extends Cm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TU extends Cm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class EU{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&wU(o,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Vu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Vu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=KC();return this.mutations.forEach((s=>{const o=e.get(s.key),c=o.overlayedDocument;let d=this.applyToLocalView(c,o.mutatedFields);d=n.has(s.key)?null:d;const h=JC(c,d);h!==null&&i.set(s.key,h),c.isValidDocument()||c.convertToNoDocument(Me.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ye())}isEqual(e){return this.batchId===e.batchId&&Yl(this.mutations,e.mutations,((n,i)=>TE(n,i)))&&Yl(this.baseMutations,e.baseMutations,((n,i)=>TE(n,i)))}}class Vv{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){rt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return hU})();const o=e.mutations;for(let c=0;c<o.length;c++)s=s.insert(o[c].key,i[c].version);return new Vv(e,n,i,s)}}class SU{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class AU{constructor(e,n){this.count=e,this.unchangedNames=n}}var Yt,We;function CU(t){switch(t){case ae.OK:return Ie(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Ie(15467,{code:t})}}function tR(t){if(t===void 0)return ms("GRPC error has no .code"),ae.UNKNOWN;switch(t){case Yt.OK:return ae.OK;case Yt.CANCELLED:return ae.CANCELLED;case Yt.UNKNOWN:return ae.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return ae.INTERNAL;case Yt.UNAVAILABLE:return ae.UNAVAILABLE;case Yt.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Yt.NOT_FOUND:return ae.NOT_FOUND;case Yt.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Yt.ABORTED:return ae.ABORTED;case Yt.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Yt.DATA_LOSS:return ae.DATA_LOSS;default:return Ie(39323,{code:t})}}(We=Yt||(Yt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";function RU(){return new TextEncoder}const NU=new ba([4294967295,4294967295],0);function AE(t){const e=RU().encode(t),n=new gC;return n.update(e),new Uint8Array(n.digest())}function CE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ba([n,i],0),new ba([s,o],0)]}class Pv{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new xu(`Invalid padding: ${n}`);if(i<0)throw new xu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new xu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new xu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ba.fromNumber(this.ge)}ye(e,n,i){let s=e.add(n.multiply(ba.fromNumber(i)));return s.compare(NU)===1&&(s=new ba([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=AE(e),[i,s]=CE(n);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,s,o);if(!this.we(c))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new Pv(o,s,n);return i.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const n=AE(e),[i,s]=CE(n);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,s,o);this.Se(c)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class xu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Rm{constructor(e,n,i,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,yd.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Rm(Me.min(),s,new Ct(Ke),ps(),Ye())}}class yd{constructor(e,n,i,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new yd(i,n,Ye(),Ye(),Ye())}}class Tf{constructor(e,n,i,s){this.be=e,this.removedTargetIds=n,this.key=i,this.De=s}}class nR{constructor(e,n){this.targetId=e,this.Ce=n}}class iR{constructor(e,n,i=_n.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class RE{constructor(){this.ve=0,this.Fe=NE(),this.Me=_n.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),n=Ye(),i=Ye();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:Ie(38017,{changeType:o})}})),new yd(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=NE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,rt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class IU{constructor(e){this.Ge=e,this.ze=new Map,this.je=ps(),this.Je=nf(),this.He=nf(),this.Ye=new Ct(Ke)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,i=e.Ce.count,s=this.ot(n);if(s){const o=s.target;if(my(o))if(i===0){const c=new Ae(o.path);this.et(n,c,An.newNoDocument(c,Me.min()))}else rt(i===1,20013,{expectedCount:i});else{const c=this._t(n);if(c!==i){const d=this.ut(e),h=d?this.ct(d,e,c):1;if(h!==0){this.it(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let c,d;try{c=Sa(i).toUint8Array()}catch(h){if(h instanceof RC)return Kl("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{d=new Pv(c,s,o)}catch(h){return Kl(h instanceof xu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return d.ge===0?null:d}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach((o=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(d)||(this.et(n,o,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((o,c)=>{const d=this.ot(c);if(d){if(o.current&&my(d.target)){const h=new Ae(d.target.path);this.It(h).has(c)||this.Et(c,h)||this.et(c,h,An.newNoDocument(h,e))}o.Be&&(n.set(c,o.ke()),o.qe())}}));let i=Ye();this.He.forEach(((o,c)=>{let d=!0;c.forEachWhile((h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const s=new Rm(e,n,this.Ye,this.je,i);return this.je=ps(),this.Je=nf(),this.He=nf(),this.Ye=new Ct(Ke),s}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new RE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new tn(Ke),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new tn(Ke),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new RE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function nf(){return new Ct(Ae.comparator)}function NE(){return new Ct(Ae.comparator)}const kU={asc:"ASCENDING",desc:"DESCENDING"},DU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MU={and:"AND",or:"OR"};class OU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gy(t,e){return t.useProto3Json||wm(e)?e:{value:e}}function Xf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function VU(t,e){return Xf(t,e.toTimestamp())}function Tr(t){return rt(!!t,49232),Me.fromTimestamp((function(n){const i=Ea(n);return new Xe(i.seconds,i.nanos)})(t))}function jv(t,e){return yy(t,e).canonicalString()}function yy(t,e){const n=(function(s){return new gt(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function sR(t){const e=gt.fromString(t);return rt(uR(e),10190,{key:e.toString()}),e}function vy(t,e){return jv(t.databaseId,e.path)}function p0(t,e){const n=sR(e);if(n.get(1)!==t.databaseId.projectId)throw new ge(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ge(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ae(oR(n))}function aR(t,e){return jv(t.databaseId,e)}function PU(t){const e=sR(t);return e.length===4?gt.emptyPath():oR(e)}function by(t){return new gt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function oR(t){return rt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function IE(t,e,n){return{name:vy(t,e),fields:n.value.mapValue.fields}}function jU(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ie(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(rt(g===void 0||typeof g=="string",58123),_n.fromBase64String(g||"")):(rt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),_n.fromUint8Array(g||new Uint8Array))})(t,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(f){const g=f.code===void 0?ae.UNKNOWN:tR(f.code);return new ge(g,f.message||"")})(c);n=new iR(i,s,o,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=p0(t,i.document.name),o=Tr(i.document.updateTime),c=i.document.createTime?Tr(i.document.createTime):Me.min(),d=new qn({mapValue:{fields:i.document.fields}}),h=An.newFoundDocument(s,o,c,d),f=i.targetIds||[],g=i.removedTargetIds||[];n=new Tf(f,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=p0(t,i.document),o=i.readTime?Tr(i.readTime):Me.min(),c=An.newNoDocument(s,o),d=i.removedTargetIds||[];n=new Tf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=p0(t,i.document),o=i.removedTargetIds||[];n=new Tf([],o,s,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,c=new AU(s,o),d=i.targetId;n=new nR(d,c)}}return n}function LU(t,e){let n;if(e instanceof gd)n={update:IE(t,e.key,e.value)};else if(e instanceof Ov)n={delete:vy(t,e.key)};else if(e instanceof Ma)n={update:IE(t,e.key,e.data),updateMask:KU(e.fieldMask)};else{if(!(e instanceof TU))return Ie(16599,{Vt:e.type});n={verify:vy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(o,c){const d=c.transform;if(d instanceof Yf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Zu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ju)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Qf)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Ie(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:VU(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ie(27497)})(t,e.precondition)),n}function UU(t,e){return t&&t.length>0?(rt(e!==void 0,14353),t.map((n=>(function(s,o){let c=s.updateTime?Tr(s.updateTime):Tr(o);return c.isEqual(Me.min())&&(c=Tr(o)),new _U(c,s.transformResults||[])})(n,e)))):[]}function zU(t,e){return{documents:[aR(t,e.path)]}}function FU(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=aR(t,s);const o=(function(f){if(f.length!==0)return cR(Bi.create(f,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const c=(function(f){if(f.length!==0)return f.map((g=>(function(_){return{field:Rl(_.field),direction:HU(_.dir)}})(g)))})(e.orderBy);c&&(n.structuredQuery.orderBy=c);const d=gy(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:n,parent:s}}function BU(t){let e=PU(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){rt(i===1,65062);const g=n.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=(function(v){const _=lR(v);return _ instanceof Bi&&LC(_)?_.getFilters():[_]})(n.where));let c=[];n.orderBy&&(c=(function(v){return v.map((_=>(function(N){return new Wu(Nl(N.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(_)))})(n.orderBy));let d=null;n.limit&&(d=(function(v){let _;return _=typeof v=="object"?v.value:v,wm(_)?null:_})(n.limit));let h=null;n.startAt&&(h=(function(v){const _=!!v.before,E=v.values||[];return new Gf(E,_)})(n.startAt));let f=null;return n.endAt&&(f=(function(v){const _=!v.before,E=v.values||[];return new Gf(E,_)})(n.endAt)),oU(e,s,c,o,d,"F",h,f)}function qU(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lR(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Nl(n.unaryFilter.field);return Xt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Nl(n.unaryFilter.field);return Xt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Nl(n.unaryFilter.field);return Xt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Nl(n.unaryFilter.field);return Xt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Xt.create(Nl(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Bi.create(n.compositeFilter.filters.map((i=>lR(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(n.compositeFilter.op))})(t):Ie(30097,{filter:t})}function HU(t){return kU[t]}function $U(t){return DU[t]}function GU(t){return MU[t]}function Rl(t){return{fieldPath:t.canonicalString()}}function Nl(t){return yn.fromServerFormat(t.fieldPath)}function cR(t){return t instanceof Xt?(function(n){if(n.op==="=="){if(yE(n.value))return{unaryFilter:{field:Rl(n.field),op:"IS_NAN"}};if(gE(n.value))return{unaryFilter:{field:Rl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(yE(n.value))return{unaryFilter:{field:Rl(n.field),op:"IS_NOT_NAN"}};if(gE(n.value))return{unaryFilter:{field:Rl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rl(n.field),op:$U(n.op),value:n.value}}})(t):t instanceof Bi?(function(n){const i=n.getFilters().map((s=>cR(s)));return i.length===1?i[0]:{compositeFilter:{op:GU(n.op),filters:i}}})(t):Ie(54877,{filter:t})}function KU(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function uR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class ma{constructor(e,n,i,s,o=Me.min(),c=Me.min(),d=_n.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=h}withSequenceNumber(e){return new ma(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ma(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ma(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ma(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class YU{constructor(e){this.yt=e}}function QU(t){const e=BU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Kf(e,e.limit,"L"):e}class XU{constructor(){this.Cn=new WU}addToCollectionParentIndex(e,n){return this.Cn.add(n),le.resolve()}getCollectionParents(e,n){return le.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return le.resolve()}deleteFieldIndex(e,n){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,n){return le.resolve()}getDocumentsMatchingTarget(e,n){return le.resolve(null)}getIndexType(e,n){return le.resolve(0)}getFieldIndexes(e,n){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,n){return le.resolve(Ta.min())}getMinOffsetFromCollectionGroup(e,n){return le.resolve(Ta.min())}updateCollectionGroup(e,n,i){return le.resolve()}updateIndexEntries(e,n){return le.resolve()}}class WU{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new tn(gt.comparator),o=!s.has(i);return this.index[n]=s.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new tn(gt.comparator)).toArray()}}const kE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dR=41943040;class Fn{static withCacheSize(e){return new Fn(e,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}Fn.DEFAULT_COLLECTION_PERCENTILE=10,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fn.DEFAULT=new Fn(dR,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fn.DISABLED=new Fn(-1,0,0);class Wl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Wl(0)}static cr(){return new Wl(-1)}}const DE="LruGarbageCollector",ZU=1048576;function ME([t,e],[n,i]){const s=Ke(t,n);return s===0?Ke(e,i):s}class JU{constructor(e){this.Ir=e,this.buffer=new tn(ME),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();ME(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class e8{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve(DE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){cc(n)?ve(DE,"Ignoring IndexedDB error during garbage collection: ",n):await lc(n)}await this.Vr(3e5)}))}}class t8{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return le.resolve(_m.ce);const i=new JU(n);return this.mr.forEachTarget(e,(s=>i.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>i.Ar(s))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(kE)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,s,o,c,d,h,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,c=Date.now(),this.nthSequenceNumber(e,s)))).next((v=>(i=v,d=Date.now(),this.removeTargets(e,i,n)))).next((v=>(o=v,h=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(f=Date.now(),Al()<=Ge.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(d-c)+`ms
	Removed ${o} targets in `+(h-d)+`ms
	Removed ${v} documents in `+(f-h)+`ms
Total Duration: ${f-g}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v}))))}}function n8(t,e){return new t8(t,e)}class i8{constructor(){this.changes=new jo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?le.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class r8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class s8{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(i!==null&&Vu(i.mutation,s,ri.empty(),Xe.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Ye()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Ye()){const s=_o();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,i).next((o=>{let c=wu();return o.forEach(((d,h)=>{c=c.insert(d,h.overlayedDocument)})),c}))))}getOverlayedDocuments(e,n){const i=_o();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Ye())))}populateOverlays(e,n,i){const s=[];return i.forEach((o=>{n.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((c,d)=>{n.set(c,d)}))}))}computeViews(e,n,i,s){let o=ps();const c=Ou(),d=(function(){return Ou()})();return n.forEach(((h,f)=>{const g=i.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof Ma)?o=o.insert(f.key,f):g!==void 0?(c.set(f.key,g.mutation.getFieldMask()),Vu(g.mutation,f,g.mutation.getFieldMask(),Xe.now())):c.set(f.key,ri.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((f,g)=>c.set(f,g))),n.forEach(((f,g)=>d.set(f,new r8(g,c.get(f)??null)))),d)))}recalculateAndSaveOverlays(e,n){const i=Ou();let s=new Ct(((c,d)=>c-d)),o=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((c=>{for(const d of c)d.keys().forEach((h=>{const f=n.get(h);if(f===null)return;let g=i.get(h)||ri.empty();g=d.applyToLocalView(f,g),i.set(h,g);const v=(s.get(d.batchId)||Ye()).add(h);s=s.insert(d.batchId,v)}))})).next((()=>{const c=[],d=s.getReverseIterator();for(;d.hasNext();){const h=d.getNext(),f=h.key,g=h.value,v=KC();g.forEach((_=>{if(!o.has(_)){const E=JC(n.get(_),i.get(_));E!==null&&v.set(_,E),o=o.add(_)}})),c.push(this.documentOverlayCache.saveOverlays(e,f,v))}return le.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,s){return(function(c){return Ae.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):BC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next((o=>{const c=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-o.size):le.resolve(_o());let d=Ku,h=o;return c.next((f=>le.forEach(f,((g,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),o.get(g)?le.resolve():this.remoteDocumentCache.getEntry(e,g).next((_=>{h=h.insert(g,_)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,h,f,Ye()))).next((g=>({batchId:d,changes:GC(g)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ae(n)).next((i=>{let s=wu();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const o=n.collectionGroup;let c=wu();return this.indexManager.getCollectionParents(e,o).next((d=>le.forEach(d,(h=>{const f=(function(v,_){return new uc(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,s).next((g=>{g.forEach(((v,_)=>{c=c.insert(v,_)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,n,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,s)))).next((c=>{o.forEach(((h,f)=>{const g=f.getKey();c.get(g)===null&&(c=c.insert(g,An.newInvalidDocument(g)))}));let d=wu();return c.forEach(((h,f)=>{const g=o.get(h);g!==void 0&&Vu(g.mutation,f,ri.empty(),Xe.now()),Sm(n,f)&&(d=d.insert(h,f))})),d}))}}class a8{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return le.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Tr(s.createTime)}})(n)),le.resolve()}getNamedQuery(e,n){return le.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:QU(s.bundledQuery),readTime:Tr(s.readTime)}})(n)),le.resolve()}}class o8{constructor(){this.overlays=new Ct(Ae.comparator),this.qr=new Map}getOverlay(e,n){return le.resolve(this.overlays.get(n))}getOverlays(e,n){const i=_o();return le.forEach(n,(s=>this.getOverlay(e,s).next((o=>{o!==null&&i.set(s,o)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((s,o)=>{this.St(e,n,o)})),le.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(i)),le.resolve()}getOverlaysForCollection(e,n,i){const s=_o(),o=n.length+1,c=new Ae(n.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const h=d.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&s.set(h.getKey(),h)}return le.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let o=new Ct(((f,g)=>f-g));const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let g=o.get(f.largestBatchId);g===null&&(g=_o(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const d=_o(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,g)=>d.set(f,g))),!(d.size()>=s)););return le.resolve(d)}St(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const c=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new SU(n,i));let o=this.qr.get(n);o===void 0&&(o=Ye(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}class l8{constructor(){this.sessionToken=_n.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,le.resolve()}}class Lv{constructor(){this.Qr=new tn(on.$r),this.Ur=new tn(on.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new on(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new on(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new Ae(new gt([])),i=new on(n,e),s=new on(n,e+1),o=[];return this.Ur.forEachInRange([i,s],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ae(new gt([])),i=new on(n,e),s=new on(n,e+1);let o=Ye();return this.Ur.forEachInRange([i,s],(c=>{o=o.add(c.key)})),o}containsKey(e){const n=new on(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class on{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ae.comparator(e.key,n.key)||Ke(e.Yr,n.Yr)}static Kr(e,n){return Ke(e.Yr,n.Yr)||Ae.comparator(e.key,n.key)}}class c8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new tn(on.$r)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new EU(o,n,i,s);this.mutationQueue.push(c);for(const d of s)this.Zr=this.Zr.add(new on(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return le.resolve(c)}lookupMutationBatch(e,n){return le.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.ei(i),o=s<0?0:s;return le.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?Rv:this.tr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new on(n,0),s=new on(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,s],(c=>{const d=this.Xr(c.Yr);o.push(d)})),le.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new tn(Ke);return n.forEach((s=>{const o=new on(s,0),c=new on(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(d=>{i=i.add(d.Yr)}))})),le.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let o=i;Ae.isDocumentKey(o)||(o=o.child(""));const c=new on(new Ae(o),0);let d=new tn(Ke);return this.Zr.forEachWhile((h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===s&&(d=d.add(h.Yr)),!0)}),c),le.resolve(this.ti(d))}ti(e){const n=[];return e.forEach((i=>{const s=this.Xr(i);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){rt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return le.forEach(n.mutations,(s=>{const o=new on(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new on(n,0),s=this.Zr.firstAfterOrEqual(i);return le.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class u8{constructor(e){this.ri=e,this.docs=(function(){return new Ct(Ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),o=s?s.size:0,c=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return le.resolve(i?i.document.mutableCopy():An.newInvalidDocument(n))}getEntries(e,n){let i=ps();return n.forEach((s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():An.newInvalidDocument(s))})),le.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let o=ps();const c=n.path,d=new Ae(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(d);for(;h.hasNext();){const{key:f,value:{document:g}}=h.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||UL(LL(g),i)<=0||(s.has(g.key)||Sm(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return le.resolve(o)}getAllFromCollectionGroup(e,n,i,s){Ie(9500)}ii(e,n){return le.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new d8(this)}getSize(e){return le.resolve(this.size)}}class d8 extends i8{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)})),le.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class h8{constructor(e){this.persistence=e,this.si=new jo((n=>kv(n)),Dv),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.oi=0,this._i=new Lv,this.targetCount=0,this.ai=Wl.ur()}forEachTarget(e,n){return this.si.forEach(((i,s)=>n(s))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),le.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Wl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,le.resolve()}updateTargetData(e,n){return this.Pr(n),le.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,n,i){let s=0;const o=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=n&&i.get(d.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),le.waitFor(o).next((()=>s))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return le.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),le.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach((c=>{o.push(s.markPotentiallyOrphaned(e,c))})),le.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),le.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return le.resolve(i)}containsKey(e,n){return le.resolve(this._i.containsKey(n))}}class hR{constructor(e,n){this.ui={},this.overlays={},this.ci=new _m(0),this.li=!1,this.li=!0,this.hi=new l8,this.referenceDelegate=e(this),this.Pi=new h8(this),this.indexManager=new XU,this.remoteDocumentCache=(function(s){return new u8(s)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new YU(n),this.Ii=new a8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new o8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new c8(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){ve("MemoryPersistence","Starting transaction:",e);const s=new f8(this.ci.next());return this.referenceDelegate.Ei(),i(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,n){return le.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class f8 extends FL{constructor(e){super(),this.currentSequenceNumber=e}}class Uv{constructor(e){this.persistence=e,this.Ri=new Lv,this.Vi=null}static mi(e){return new Uv(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),le.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),le.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),le.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.fi,(i=>{const s=Ae.fromPath(i);return this.gi(e,s).next((o=>{o||n.removeEntry(s,Me.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return le.or([()=>le.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Wf{constructor(e,n){this.persistence=e,this.pi=new jo((i=>HL(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=n8(this,n)}static mi(e,n){return new Wf(e,n)}Ei(){}di(e){return le.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((s=>i+s))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return le.forEach(this.pi,((i,s)=>this.br(e,i,s).next((o=>o?le.resolve():n(s)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(c=>this.br(e,c,n).next((d=>{d||(i++,o.removeEntry(c,Me.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),le.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),le.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),le.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=_f(e.data.value)),n}br(e,n,i){return le.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return le.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class zv{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=s}static As(e,n){let i=Ye(),s=Ye();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new zv(e,n.fromCache,i,s)}}class m8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class p8{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return z5()?8:BL(Rn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,s){const o={result:null};return this.ys(e,n).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,n,s,i).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new m8;return this.Ss(e,n,c).next((d=>{if(o.result=d,this.Vs)return this.bs(e,n,c,d.size)}))})).next((()=>o.result))}bs(e,n,i,s){return i.documentReadCount<this.fs?(Al()<=Ge.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Cl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),le.resolve()):(Al()<=Ge.DEBUG&&ve("QueryEngine","Query:",Cl(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Al()<=Ge.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Cl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xr(n))):le.resolve())}ys(e,n){if(wE(n))return le.resolve(null);let i=xr(n);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Kf(n,null,"F"),i=xr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const c=Ye(...o);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,i).next((h=>{const f=this.Ds(n,d);return this.Cs(n,f,c,h.readTime)?this.ys(e,Kf(n,null,"F")):this.vs(e,f,n,h)}))))})))))}ws(e,n,i,s){return wE(n)||s.isEqual(Me.min())?le.resolve(null):this.ps.getDocuments(e,i).next((o=>{const c=this.Ds(n,o);return this.Cs(n,c,i,s)?le.resolve(null):(Al()<=Ge.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Cl(n)),this.vs(e,c,n,jL(s,Ku)).next((d=>d)))}))}Ds(e,n){let i=new tn(HC(e));return n.forEach(((s,o)=>{Sm(e,o)&&(i=i.add(o))})),i}Cs(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,i){return Al()<=Ge.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Cl(n)),this.ps.getDocumentsMatchingQuery(e,n,Ta.min(),i)}vs(e,n,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next((o=>(n.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const Fv="LocalStore",g8=3e8;class y8{constructor(e,n,i,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ct(Ke),this.xs=new jo((o=>kv(o)),Dv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new s8(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function v8(t,e,n,i){return new y8(t,e,n,i)}async function fR(t,e){const n=Pe(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next((o=>(s=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((o=>{const c=[],d=[];let h=Ye();for(const f of s){c.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}for(const f of o){d.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}return n.localDocuments.getDocuments(i,h).next((f=>({Ls:f,removedBatchIds:c,addedBatchIds:d})))}))}))}function b8(t,e){const n=Pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,h,f,g){const v=f.batch,_=v.keys();let E=le.resolve();return _.forEach((N=>{E=E.next((()=>g.getEntry(h,N))).next((A=>{const R=f.docVersions.get(N);rt(R!==null,48541),A.version.compareTo(R)<0&&(v.applyToRemoteDocument(A,f),A.isValidDocument()&&(A.setReadTime(f.commitVersion),g.addEntry(A)))}))})),E.next((()=>d.mutationQueue.removeMutationBatch(h,v)))})(n,i,e,o).next((()=>o.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let h=Ye();for(let f=0;f<d.mutationResults.length;++f)d.mutationResults[f].transformResults.length>0&&(h=h.add(d.batch.mutations[f].key));return h})(e)))).next((()=>n.localDocuments.getDocuments(i,s)))}))}function mR(t){const e=Pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function _8(t,e){const n=Pe(t),i=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const d=[];e.targetChanges.forEach(((g,v)=>{const _=s.get(v);if(!_)return;d.push(n.Pi.removeMatchingKeys(o,g.removedDocuments,v).next((()=>n.Pi.addMatchingKeys(o,g.addedDocuments,v))));let E=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?E=E.withResumeToken(_n.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):g.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(g.resumeToken,i)),s=s.insert(v,E),(function(A,R,P){return A.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=g8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(_,E,g)&&d.push(n.Pi.updateTargetData(o,E))}));let h=ps(),f=Ye();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))})),d.push(w8(o,c,e.documentUpdates).next((g=>{h=g.ks,f=g.qs}))),!i.isEqual(Me.min())){const g=n.Pi.getLastRemoteSnapshotVersion(o).next((v=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i)));d.push(g)}return le.waitFor(d).next((()=>c.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,h,f))).next((()=>h))})).then((o=>(n.Ms=s,o)))}function w8(t,e,n){let i=Ye(),s=Ye();return n.forEach((o=>i=i.add(o))),e.getEntries(t,i).next((o=>{let c=ps();return n.forEach(((d,h)=>{const f=o.get(d);h.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(d)),h.isNoDocument()&&h.version.isEqual(Me.min())?(e.removeEntry(d,h.readTime),c=c.insert(d,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),c=c.insert(d,h)):ve(Fv,"Ignoring outdated watch update for ",d,". Current version:",f.version," Watch version:",h.version)})),{ks:c,qs:s}}))}function x8(t,e){const n=Pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Rv),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function T8(t,e){const n=Pe(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return n.Pi.getTargetData(i,e).next((o=>o?(s=o,le.resolve(s)):n.Pi.allocateTargetId(i).next((c=>(s=new ma(e,c,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function _y(t,e,n){const i=Pe(t),s=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,(c=>i.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!cc(c))throw c;ve(Fv,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function OE(t,e,n){const i=Pe(t);let s=Me.min(),o=Ye();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(h,f,g){const v=Pe(h),_=v.xs.get(g);return _!==void 0?le.resolve(v.Ms.get(_)):v.Pi.getTargetData(f,g)})(i,c,xr(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,d.targetId).next((h=>{o=h}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,e,n?s:Me.min(),n?o:Ye()))).next((d=>(E8(i,cU(e),d),{documents:d,Qs:o})))))}function E8(t,e,n){let i=t.Os.get(e)||Me.min();n.forEach(((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),t.Os.set(e,i)}class VE{constructor(){this.activeTargetIds=pU()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class S8{constructor(){this.Mo=new VE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new VE,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class A8{Oo(e){}shutdown(){}}const PE="ConnectivityMonitor";class jE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(PE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(PE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let rf=null;function wy(){return rf===null?rf=(function(){return 268435456+Math.round(2147483648*Math.random())})():rf++,"0x"+rf.toString(16)}const g0="RestConnection",C8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class R8{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Hf?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,n,i,s,o){const c=wy(),d=this.zo(e,n.toUriEncodedString());ve(g0,`Sending RPC '${e}' ${c}:`,d,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,s,o);const{host:f}=new URL(d),g=sc(f);return this.Jo(e,d,h,i,g).then((v=>(ve(g0,`Received RPC '${e}' ${c}: `,v),v)),(v=>{throw Kl(g0,`RPC '${e}' ${c} failed with error: `,v,"url: ",d,"request:",i),v}))}Ho(e,n,i,s,o,c){return this.Go(e,n,i,s,o)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+oc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,o)=>e[o]=s)),i&&i.headers.forEach(((s,o)=>e[o]=s))}zo(e,n){const i=C8[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}class N8{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Tn="WebChannelConnection";class I8 extends R8{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,s,o){const c=wy();return new Promise(((d,h)=>{const f=new yC;f.setWithCredentials(!0),f.listenOnce(vC.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case bf.NO_ERROR:const v=f.getResponseJson();ve(Tn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),d(v);break;case bf.TIMEOUT:ve(Tn,`RPC '${e}' ${c} timed out`),h(new ge(ae.DEADLINE_EXCEEDED,"Request time out"));break;case bf.HTTP_ERROR:const _=f.getStatus();if(ve(Tn,`RPC '${e}' ${c} failed with status:`,_,"response text:",f.getResponseText()),_>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const N=E?.error;if(N&&N.status&&N.message){const A=(function(P){const U=P.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(U)>=0?U:ae.UNKNOWN})(N.status);h(new ge(A,N.message))}else h(new ge(ae.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new ge(ae.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:c,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ve(Tn,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(s);ve(Tn,`RPC '${e}' ${c} sending request:`,s),f.send(n,"POST",g,i,15)}))}T_(e,n,i){const s=wy(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=wC(),d=_C(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const g=o.join("");ve(Tn,`Creating RPC '${e}' stream ${s}: ${g}`,h);const v=c.createWebChannel(g,h);this.I_(v);let _=!1,E=!1;const N=new N8({Yo:R=>{E?ve(Tn,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(_||(ve(Tn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),_=!0),ve(Tn,`RPC '${e}' stream ${s} sending:`,R),v.send(R))},Zo:()=>v.close()}),A=(R,P,U)=>{R.listen(P,(L=>{try{U(L)}catch($){setTimeout((()=>{throw $}),0)}}))};return A(v,_u.EventType.OPEN,(()=>{E||(ve(Tn,`RPC '${e}' stream ${s} transport opened.`),N.o_())})),A(v,_u.EventType.CLOSE,(()=>{E||(E=!0,ve(Tn,`RPC '${e}' stream ${s} transport closed`),N.a_(),this.E_(v))})),A(v,_u.EventType.ERROR,(R=>{E||(E=!0,Kl(Tn,`RPC '${e}' stream ${s} transport errored. Name:`,R.name,"Message:",R.message),N.a_(new ge(ae.UNAVAILABLE,"The operation could not be completed")))})),A(v,_u.EventType.MESSAGE,(R=>{if(!E){const P=R.data[0];rt(!!P,16349);const U=P,L=U?.error||U[0]?.error;if(L){ve(Tn,`RPC '${e}' stream ${s} received error:`,L);const $=L.status;let te=(function(I){const M=Yt[I];if(M!==void 0)return tR(M)})($),ne=L.message;te===void 0&&(te=ae.INTERNAL,ne="Unknown error status: "+$+" with message "+L.message),E=!0,N.a_(new ge(te,ne)),v.close()}else ve(Tn,`RPC '${e}' stream ${s} received:`,P),N.u_(P)}})),A(d,bC.STAT_EVENT,(R=>{R.stat===cy.PROXY?ve(Tn,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===cy.NOPROXY&&ve(Tn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function y0(){return typeof document<"u"?document:null}function Nm(t){return new OU(t,!0)}class pR{constructor(e,n,i=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&ve("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const LE="PersistentStream";class gR{constructor(e,n,i,s,o,c,d,h){this.Mi=e,this.S_=i,this.b_=s,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new pR(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ae.RESOURCE_EXHAUSTED?(ms(n.toString()),ms("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===n&&this.G_(i,s)}),(i=>{e((()=>{const s=new ge(ae.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(LE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ve(LE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class k8 extends gR{constructor(e,n,i,s,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,c),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=jU(this.serializer,e),i=(function(o){if(!("targetChange"in o))return Me.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Me.min():c.readTime?Tr(c.readTime):Me.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=by(this.serializer),n.addTarget=(function(o,c){let d;const h=c.target;if(d=my(h)?{documents:zU(o,h)}:{query:FU(o,h).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=rR(o,c.resumeToken);const f=gy(o,c.expectedCount);f!==null&&(d.expectedCount=f)}else if(c.snapshotVersion.compareTo(Me.min())>0){d.readTime=Xf(o,c.snapshotVersion.toTimestamp());const f=gy(o,c.expectedCount);f!==null&&(d.expectedCount=f)}return d})(this.serializer,e);const i=qU(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=by(this.serializer),n.removeTarget=e,this.q_(n)}}class D8 extends gR{constructor(e,n,i,s,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return rt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,rt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){rt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=UU(e.writeResults,e.commitTime),i=Tr(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=by(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>LU(this.serializer,i)))};this.q_(n)}}class M8{}class O8 extends M8{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ge(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,yy(n,i),s,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(ae.UNKNOWN,o.toString())}))}Ho(e,n,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,yy(n,i),s,c,d,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ge(ae.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class V8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ms(n),this.aa=!1):ve("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Do="RemoteStore";class P8{constructor(e,n,i,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{Lo(this)&&(ve(Do,"Restarting streams for network reachability change."),await(async function(h){const f=Pe(h);f.Ea.add(4),await vd(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Im(f)})(this))}))})),this.Ra=new V8(i,s)}}async function Im(t){if(Lo(t))for(const e of t.da)await e(!0)}async function vd(t){for(const e of t.da)await e(!1)}function yR(t,e){const n=Pe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),$v(n)?Hv(n):dc(n).O_()&&qv(n,e))}function Bv(t,e){const n=Pe(t),i=dc(n);n.Ia.delete(e),i.O_()&&vR(n,e),n.Ia.size===0&&(i.O_()?i.L_():Lo(n)&&n.Ra.set("Unknown"))}function qv(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}dc(t).Y_(e)}function vR(t,e){t.Va.Ue(e),dc(t).Z_(e)}function Hv(t){t.Va=new IU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),dc(t).start(),t.Ra.ua()}function $v(t){return Lo(t)&&!dc(t).x_()&&t.Ia.size>0}function Lo(t){return Pe(t).Ea.size===0}function bR(t){t.Va=void 0}async function j8(t){t.Ra.set("Online")}async function L8(t){t.Ia.forEach(((e,n)=>{qv(t,e)}))}async function U8(t,e){bR(t),$v(t)?(t.Ra.ha(e),Hv(t)):t.Ra.set("Unknown")}async function z8(t,e,n){if(t.Ra.set("Online"),e instanceof iR&&e.state===2&&e.cause)try{await(async function(s,o){const c=o.cause;for(const d of o.targetIds)s.Ia.has(d)&&(await s.remoteSyncer.rejectListen(d,c),s.Ia.delete(d),s.Va.removeTarget(d))})(t,e)}catch(i){ve(Do,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Zf(t,i)}else if(e instanceof Tf?t.Va.Ze(e):e instanceof nR?t.Va.st(e):t.Va.tt(e),!n.isEqual(Me.min()))try{const i=await mR(t.localStore);n.compareTo(i)>=0&&await(function(o,c){const d=o.Va.Tt(c);return d.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(h.resumeToken,c))}})),d.targetMismatches.forEach(((h,f)=>{const g=o.Ia.get(h);if(!g)return;o.Ia.set(h,g.withResumeToken(_n.EMPTY_BYTE_STRING,g.snapshotVersion)),vR(o,h);const v=new ma(g.target,h,f,g.sequenceNumber);qv(o,v)})),o.remoteSyncer.applyRemoteEvent(d)})(t,n)}catch(i){ve(Do,"Failed to raise snapshot:",i),await Zf(t,i)}}async function Zf(t,e,n){if(!cc(e))throw e;t.Ea.add(1),await vd(t),t.Ra.set("Offline"),n||(n=()=>mR(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ve(Do,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Im(t)}))}function _R(t,e){return e().catch((n=>Zf(t,n,e)))}async function km(t){const e=Pe(t),n=Ca(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Rv;for(;F8(e);)try{const s=await x8(e.localStore,i);if(s===null){e.Ta.length===0&&n.L_();break}i=s.batchId,B8(e,s)}catch(s){await Zf(e,s)}wR(e)&&xR(e)}function F8(t){return Lo(t)&&t.Ta.length<10}function B8(t,e){t.Ta.push(e);const n=Ca(t);n.O_()&&n.X_&&n.ea(e.mutations)}function wR(t){return Lo(t)&&!Ca(t).x_()&&t.Ta.length>0}function xR(t){Ca(t).start()}async function q8(t){Ca(t).ra()}async function H8(t){const e=Ca(t);for(const n of t.Ta)e.ea(n.mutations)}async function $8(t,e,n){const i=t.Ta.shift(),s=Vv.from(i,e,n);await _R(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await km(t)}async function G8(t,e){e&&Ca(t).X_&&await(async function(i,s){if((function(c){return CU(c)&&c!==ae.ABORTED})(s.code)){const o=i.Ta.shift();Ca(i).B_(),await _R(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s))),await km(i)}})(t,e),wR(t)&&xR(t)}async function UE(t,e){const n=Pe(t);n.asyncQueue.verifyOperationInProgress(),ve(Do,"RemoteStore received new credentials");const i=Lo(n);n.Ea.add(3),await vd(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Im(n)}async function K8(t,e){const n=Pe(t);e?(n.Ea.delete(2),await Im(n)):e||(n.Ea.add(2),await vd(n),n.Ra.set("Unknown"))}function dc(t){return t.ma||(t.ma=(function(n,i,s){const o=Pe(n);return o.sa(),new k8(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(t.datastore,t.asyncQueue,{Xo:j8.bind(null,t),t_:L8.bind(null,t),r_:U8.bind(null,t),H_:z8.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),$v(t)?Hv(t):t.Ra.set("Unknown")):(await t.ma.stop(),bR(t))}))),t.ma}function Ca(t){return t.fa||(t.fa=(function(n,i,s){const o=Pe(n);return o.sa(),new D8(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:q8.bind(null,t),r_:G8.bind(null,t),ta:H8.bind(null,t),na:$8.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await km(t)):(await t.fa.stop(),t.Ta.length>0&&(ve(Do,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class Gv{constructor(e,n,i,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,o){const c=Date.now()+i,d=new Gv(e,n,c,s,o);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kv(t,e){if(ms("AsyncQueue",`${e}: ${t}`),cc(t))return new ge(ae.UNAVAILABLE,`${e}: ${t}`);throw t}class Bl{static emptySet(e){return new Bl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ae.comparator(n.key,i.key):(n,i)=>Ae.comparator(n.key,i.key),this.keyedMap=wu(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Bl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Bl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}class zE{constructor(){this.ga=new Ct(Ae.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Zl{constructor(e,n,i,s,o,c,d,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,s,o){const c=[];return n.forEach((d=>{c.push({type:0,doc:d})})),new Zl(e,n,Bl.emptySet(n),c,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Em(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}class Y8{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Q8{constructor(){this.queries=FE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=Pe(n),o=s.queries;s.queries=FE(),o.forEach(((c,d)=>{for(const h of d.Sa)h.onError(i)}))})(this,new ge(ae.ABORTED,"Firestore shutting down"))}}function FE(){return new jo((t=>qC(t)),Em)}async function Yv(t,e){const n=Pe(t);let i=3;const s=e.query;let o=n.queries.get(s);o?!o.ba()&&e.Da()&&(i=2):(o=new Y8,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(s,!0);break;case 1:o.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(c){const d=Kv(c,`Initialization of query '${Cl(e.query)}' failed`);return void e.onError(d)}n.queries.set(s,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Xv(n)}async function Qv(t,e){const n=Pe(t),i=e.query;let s=3;const o=n.queries.get(i);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function X8(t,e){const n=Pe(t);let i=!1;for(const s of e){const o=s.query,c=n.queries.get(o);if(c){for(const d of c.Sa)d.Fa(s)&&(i=!0);c.wa=s}}i&&Xv(n)}function W8(t,e,n){const i=Pe(t),s=i.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);i.queries.delete(e)}function Xv(t){t.Ca.forEach((e=>{e.next()}))}var xy,BE;(BE=xy||(xy={})).Ma="default",BE.Cache="cache";class Wv{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Zl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Zl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==xy.Cache}}class TR{constructor(e){this.key=e}}class ER{constructor(e){this.key=e}}class Z8{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ye(),this.mutatedKeys=Ye(),this.eu=HC(e),this.tu=new Bl(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new zE,s=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,c=s,d=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,v)=>{const _=s.get(g),E=Sm(this.query,v)?v:null,N=!!_&&this.mutatedKeys.has(_.key),A=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let R=!1;_&&E?_.data.isEqual(E.data)?N!==A&&(i.track({type:3,doc:E}),R=!0):this.su(_,E)||(i.track({type:2,doc:E}),R=!0,(h&&this.eu(E,h)>0||f&&this.eu(E,f)<0)&&(d=!0)):!_&&E?(i.track({type:0,doc:E}),R=!0):_&&!E&&(i.track({type:1,doc:_}),R=!0,(h||f)&&(d=!0)),R&&(E?(c=c.add(E),o=A?o.add(g):o.delete(g)):(c=c.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{tu:c,iu:i,Cs:d,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,v)=>(function(E,N){const A=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:R})}};return A(E)-A(N)})(g.type,v.type)||this.eu(g.doc,v.doc))),this.ou(i),s=s??!1;const d=n&&!s?this._u():[],h=this.Xa.size===0&&this.current&&!s?1:0,f=h!==this.Za;return this.Za=h,c.length!==0||f?{snapshot:new Zl(this.query,e.tu,o,c,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ye(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new ER(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new TR(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ye();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Zl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Zv="SyncEngine";class J8{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class ez{constructor(e){this.key=e,this.hu=!1}}class tz{constructor(e,n,i,s,o,c){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new jo((d=>qC(d)),Em),this.Iu=new Map,this.Eu=new Set,this.du=new Ct(Ae.comparator),this.Au=new Map,this.Ru=new Lv,this.Vu={},this.mu=new Map,this.fu=Wl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function nz(t,e,n=!0){const i=IR(t);let s;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await SR(i,e,n,!0),s}async function iz(t,e){const n=IR(t);await SR(n,e,!0,!1)}async function SR(t,e,n,i){const s=await T8(t.localStore,xr(e)),o=s.targetId,c=t.sharedClientState.addLocalQueryTarget(o,n);let d;return i&&(d=await rz(t,e,o,c==="current",s.resumeToken)),t.isPrimaryClient&&n&&yR(t.remoteStore,s),d}async function rz(t,e,n,i,s){t.pu=(v,_,E)=>(async function(A,R,P,U){let L=R.view.ru(P);L.Cs&&(L=await OE(A.localStore,R.query,!1).then((({documents:S})=>R.view.ru(S,L))));const $=U&&U.targetChanges.get(R.targetId),te=U&&U.targetMismatches.get(R.targetId)!=null,ne=R.view.applyChanges(L,A.isPrimaryClient,$,te);return HE(A,R.targetId,ne.au),ne.snapshot})(t,v,_,E);const o=await OE(t.localStore,e,!0),c=new Z8(e,o.Qs),d=c.ru(o.documents),h=yd.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),f=c.applyChanges(d,t.isPrimaryClient,h);HE(t,n,f.au);const g=new J8(e,n,c);return t.Tu.set(e,g),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function sz(t,e,n){const i=Pe(t),s=i.Tu.get(e),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter((c=>!Em(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await _y(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Bv(i.remoteStore,s.targetId),Ty(i,s.targetId)})).catch(lc)):(Ty(i,s.targetId),await _y(i.localStore,s.targetId,!0))}async function az(t,e){const n=Pe(t),i=n.Tu.get(e),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Bv(n.remoteStore,i.targetId))}async function oz(t,e,n){const i=mz(t);try{const s=await(function(c,d){const h=Pe(c),f=Xe.now(),g=d.reduce(((E,N)=>E.add(N.key)),Ye());let v,_;return h.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let N=ps(),A=Ye();return h.Ns.getEntries(E,g).next((R=>{N=R,N.forEach(((P,U)=>{U.isValidDocument()||(A=A.add(P))}))})).next((()=>h.localDocuments.getOverlayedDocuments(E,N))).next((R=>{v=R;const P=[];for(const U of d){const L=xU(U,v.get(U.key).overlayedDocument);L!=null&&P.push(new Ma(U.key,L,VC(L.value.mapValue),Ti.exists(!0)))}return h.mutationQueue.addMutationBatch(E,f,P,d)})).next((R=>{_=R;const P=R.applyToLocalDocumentSet(v,A);return h.documentOverlayCache.saveOverlays(E,R.batchId,P)}))})).then((()=>({batchId:_.batchId,changes:GC(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(c,d,h){let f=c.Vu[c.currentUser.toKey()];f||(f=new Ct(Ke)),f=f.insert(d,h),c.Vu[c.currentUser.toKey()]=f})(i,s.batchId,n),await bd(i,s.changes),await km(i.remoteStore)}catch(s){const o=Kv(s,"Failed to persist write");n.reject(o)}}async function AR(t,e){const n=Pe(t);try{const i=await _8(n.localStore,e);e.targetChanges.forEach(((s,o)=>{const c=n.Au.get(o);c&&(rt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?rt(c.hu,14607):s.removedDocuments.size>0&&(rt(c.hu,42227),c.hu=!1))})),await bd(n,i,e)}catch(i){await lc(i)}}function qE(t,e,n){const i=Pe(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach(((o,c)=>{const d=c.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(c,d){const h=Pe(c);h.onlineState=d;let f=!1;h.queries.forEach(((g,v)=>{for(const _ of v.Sa)_.va(d)&&(f=!0)})),f&&Xv(h)})(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function lz(t,e,n){const i=Pe(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Au.get(e),o=s&&s.key;if(o){let c=new Ct(Ae.comparator);c=c.insert(o,An.newNoDocument(o,Me.min()));const d=Ye().add(o),h=new Rm(Me.min(),new Map,new Ct(Ke),c,d);await AR(i,h),i.du=i.du.remove(o),i.Au.delete(e),Jv(i)}else await _y(i.localStore,e,!1).then((()=>Ty(i,e,n))).catch(lc)}async function cz(t,e){const n=Pe(t),i=e.batch.batchId;try{const s=await b8(n.localStore,e);RR(n,i,null),CR(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await bd(n,s)}catch(s){await lc(s)}}async function uz(t,e,n){const i=Pe(t);try{const s=await(function(c,d){const h=Pe(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let g;return h.mutationQueue.lookupMutationBatch(f,d).next((v=>(rt(v!==null,37113),g=v.keys(),h.mutationQueue.removeMutationBatch(f,v)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,g,d))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g))).next((()=>h.localDocuments.getDocuments(f,g)))}))})(i.localStore,e);RR(i,e,n),CR(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await bd(i,s)}catch(s){await lc(s)}}function CR(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function RR(t,e,n){const i=Pe(t);let s=i.Vu[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function Ty(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((i=>{t.Ru.containsKey(i)||NR(t,i)}))}function NR(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Bv(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Jv(t))}function HE(t,e,n){for(const i of n)i instanceof TR?(t.Ru.addReference(i.key,e),dz(t,i)):i instanceof ER?(ve(Zv,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||NR(t,i.key)):Ie(19791,{wu:i})}function dz(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(ve(Zv,"New document in limbo: "+n),t.Eu.add(i),Jv(t))}function Jv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ae(gt.fromString(e)),i=t.fu.next();t.Au.set(i,new ez(n)),t.du=t.du.insert(n,i),yR(t.remoteStore,new ma(xr(Tm(n.path)),i,"TargetPurposeLimboResolution",_m.ce))}}async function bd(t,e,n){const i=Pe(t),s=[],o=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,h)=>{c.push(i.pu(h,e,n).then((f=>{if((f||n)&&i.isPrimaryClient){const g=f?!f.fromCache:n?.targetChanges.get(h.targetId)?.current;i.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(f){s.push(f);const g=zv.As(h.targetId,f);o.push(g)}})))})),await Promise.all(c),i.Pu.H_(s),await(async function(h,f){const g=Pe(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>le.forEach(f,(_=>le.forEach(_.Es,(E=>g.persistence.referenceDelegate.addReference(v,_.targetId,E))).next((()=>le.forEach(_.ds,(E=>g.persistence.referenceDelegate.removeReference(v,_.targetId,E)))))))))}catch(v){if(!cc(v))throw v;ve(Fv,"Failed to update sequence numbers: "+v)}for(const v of f){const _=v.targetId;if(!v.fromCache){const E=g.Ms.get(_),N=E.snapshotVersion,A=E.withLastLimboFreeSnapshotVersion(N);g.Ms=g.Ms.insert(_,A)}}})(i.localStore,o))}async function hz(t,e){const n=Pe(t);if(!n.currentUser.isEqual(e)){ve(Zv,"User change. New user:",e.toKey());const i=await fR(n.localStore,e);n.currentUser=e,(function(o,c){o.mu.forEach((d=>{d.forEach((h=>{h.reject(new ge(ae.CANCELLED,c))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await bd(n,i.Ls)}}function fz(t,e){const n=Pe(t),i=n.Au.get(e);if(i&&i.hu)return Ye().add(i.key);{let s=Ye();const o=n.Iu.get(e);if(!o)return s;for(const c of o){const d=n.Tu.get(c);s=s.unionWith(d.view.nu)}return s}}function IR(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lz.bind(null,e),e.Pu.H_=X8.bind(null,e.eventManager),e.Pu.yu=W8.bind(null,e.eventManager),e}function mz(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uz.bind(null,e),e}class Jf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return v8(this.persistence,new p8,e.initialUser,this.serializer)}Cu(e){return new hR(Uv.mi,this.serializer)}Du(e){return new S8}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jf.provider={build:()=>new Jf};class pz extends Jf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){rt(this.persistence.referenceDelegate instanceof Wf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new e8(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Fn.withCacheSize(this.cacheSizeBytes):Fn.DEFAULT;return new hR((i=>Wf.mi(i,n)),this.serializer)}}class Ey{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>qE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=hz.bind(null,this.syncEngine),await K8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Q8})()}createDatastore(e){const n=Nm(e.databaseInfo.databaseId),i=(function(o){return new I8(o)})(e.databaseInfo);return(function(o,c,d,h){return new O8(o,c,d,h)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,s,o,c,d){return new P8(i,s,o,c,d)})(this.localStore,this.datastore,e.asyncQueue,(n=>qE(this.syncEngine,n,0)),(function(){return jE.v()?new jE:new A8})())}createSyncEngine(e,n){return(function(s,o,c,d,h,f,g){const v=new tz(s,o,c,d,h,f);return g&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=Pe(n);ve(Do,"RemoteStore shutting down."),i.Ea.add(5),await vd(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ey.provider={build:()=>new Ey};class eb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ms("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Ra="FirestoreClient";class gz{constructor(e,n,i,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Sn.UNAUTHENTICATED,this.clientId=Cv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async c=>{ve(Ra,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(ve(Ra,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Kv(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function v0(t,e){t.asyncQueue.verifyOperationInProgress(),ve(Ra,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async s=>{i.isEqual(s)||(await fR(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function $E(t,e){t.asyncQueue.verifyOperationInProgress();const n=await yz(t);ve(Ra,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>UE(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,s)=>UE(e.remoteStore,s))),t._onlineComponents=e}async function yz(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ve(Ra,"Using user provided OfflineComponentProvider");try{await v0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ae.FAILED_PRECONDITION||s.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Kl("Error using user provided cache. Falling back to memory cache: "+n),await v0(t,new Jf)}}else ve(Ra,"Using default OfflineComponentProvider"),await v0(t,new pz(void 0));return t._offlineComponents}async function kR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ve(Ra,"Using user provided OnlineComponentProvider"),await $E(t,t._uninitializedComponentsProvider._online)):(ve(Ra,"Using default OnlineComponentProvider"),await $E(t,new Ey))),t._onlineComponents}function vz(t){return kR(t).then((e=>e.syncEngine))}async function em(t){const e=await kR(t),n=e.eventManager;return n.onListen=nz.bind(null,e.syncEngine),n.onUnlisten=sz.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=iz.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=az.bind(null,e.syncEngine),n}function bz(t,e,n={}){const i=new os;return t.asyncQueue.enqueueAndForget((async()=>(function(o,c,d,h,f){const g=new eb({next:_=>{g.Nu(),c.enqueueAndForget((()=>Qv(o,v)));const E=_.docs.has(d);!E&&_.fromCache?f.reject(new ge(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&_.fromCache&&h&&h.source==="server"?f.reject(new ge(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(_)},error:_=>f.reject(_)}),v=new Wv(Tm(d.path),g,{includeMetadataChanges:!0,qa:!0});return Yv(o,v)})(await em(t),t.asyncQueue,e,n,i))),i.promise}function _z(t,e,n={}){const i=new os;return t.asyncQueue.enqueueAndForget((async()=>(function(o,c,d,h,f){const g=new eb({next:_=>{g.Nu(),c.enqueueAndForget((()=>Qv(o,v))),_.fromCache&&h.source==="server"?f.reject(new ge(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),v=new Wv(d,g,{includeMetadataChanges:!0,qa:!0});return Yv(o,v)})(await em(t),t.asyncQueue,e,n,i))),i.promise}function DR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const GE=new Map;const MR="firestore.googleapis.com",KE=!0;class YE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MR,this.ssl=KE}else this.host=e.host,this.ssl=e.ssl??KE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZU)throw new ge(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DR(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ge(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ge(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ge(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dm{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new YE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new YE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new AL;switch(i.type){case"firstParty":return new IL(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ge(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=GE.get(n);i&&(ve("ComponentProvider","Removing Datastore"),GE.delete(n),i.terminate())})(this),Promise.resolve()}}function wz(t,e,n,i={}){t=$n(t,Dm);const s=sc(e),o=t._getSettings(),c={...o,emulatorOptions:t._getEmulatorOptions()},d=`${e}:${n}`;s&&(A2(`https://${d}`),C2("Firestore",!0)),o.host!==MR&&o.host!==d&&Kl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:d,ssl:s,emulatorOptions:i};if(!Co(h,c)&&(t._setSettings(h),i.mockUserToken)){let f,g;if(typeof i.mockUserToken=="string")f=i.mockUserToken,g=Sn.MOCK_USER;else{f=k5(i.mockUserToken,t._app?.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new ge(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Sn(v)}t._authCredentials=new CL(new TC(f,g))}}class xs{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new xs(this.firestore,e,this._query)}}class Mt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _a(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}toJSON(){return{type:Mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(pd(n,Mt._jsonSchema))return new Mt(e,i||null,new Ae(gt.fromString(n.referencePath)))}}Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:Wt("string",Mt._jsonSchemaVersion),referencePath:Wt("string")};class _a extends xs{constructor(e,n,i){super(e,n,Tm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new Ae(e))}withConverter(e){return new _a(this.firestore,e,this._path)}}function pr(t,e,...n){if(t=At(t),EC("collection","path",e),t instanceof Dm){const i=gt.fromString(e,...n);return oE(i),new _a(t,null,i)}{if(!(t instanceof Mt||t instanceof _a))throw new ge(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(gt.fromString(e,...n));return oE(i),new _a(t.firestore,null,i)}}function Dt(t,e,...n){if(t=At(t),arguments.length===1&&(e=Cv.newId()),EC("doc","path",e),t instanceof Dm){const i=gt.fromString(e,...n);return aE(i),new Mt(t,null,new Ae(i))}{if(!(t instanceof Mt||t instanceof _a))throw new ge(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(gt.fromString(e,...n));return aE(i),new Mt(t.firestore,t instanceof _a?t.converter:null,new Ae(i))}}const QE="AsyncQueue";class XE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new pR(this,"async_queue_retry"),this._c=()=>{const i=y0();i&&ve(QE,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=y0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=y0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new os;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!cc(e))throw e;ve(QE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ms("INTERNAL UNHANDLED ERROR: ",WE(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Gv.createAndSchedule(this,e,n,i,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&Ie(47125,{Pc:WE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function WE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function ZE(t){return(function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const o of i)if(o in s&&typeof s[o]=="function")return!0;return!1})(t,["next","error","complete"])}class gs extends Dm{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new XE,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new XE(e),this._firestoreClient=void 0,await e}}}function xz(t,e){const n=typeof t=="object"?t:k2(),i=typeof t=="string"?t:Hf,s=yv(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=N5("firestore");o&&wz(s,...o)}return s}function Mm(t){if(t._terminated)throw new ge(ae.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Tz(t),t._firestoreClient}function Tz(t){const e=t._freezeSettings(),n=(function(s,o,c,d){return new KL(s,o,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,DR(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new gz(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(t._componentsProvider))}class _i{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _i(_n.fromBase64String(e))}catch(n){throw new ge(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _i(_n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_i._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(pd(e,_i._jsonSchema))return _i.fromBase64String(e.bytes)}}_i._jsonSchemaVersion="firestore/bytes/1.0",_i._jsonSchema={type:Wt("string",_i._jsonSchemaVersion),bytes:Wt("string")};class Om{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ge(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class tb{constructor(e){this._methodName=e}}class Er{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Er._jsonSchemaVersion}}static fromJSON(e){if(pd(e,Er._jsonSchema))return new Er(e.latitude,e.longitude)}}Er._jsonSchemaVersion="firestore/geoPoint/1.0",Er._jsonSchema={type:Wt("string",Er._jsonSchemaVersion),latitude:Wt("number"),longitude:Wt("number")};class Sr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Sr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(pd(e,Sr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Sr(e.vectorValues);throw new ge(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Sr._jsonSchemaVersion="firestore/vectorValue/1.0",Sr._jsonSchema={type:Wt("string",Sr._jsonSchemaVersion),vectorValues:Wt("object")};const Ez=/^__.*__$/;class Sz{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ma(e,this.data,this.fieldMask,n,this.fieldTransforms):new gd(e,this.data,n,this.fieldTransforms)}}class OR{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ma(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function VR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:t})}}class nb{constructor(e,n,i,s,o,c){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new nb({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return tm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(VR(this.Ac)&&Ez.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Az{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Nm(e)}Cc(e,n,i,s=!1){return new nb({Ac:e,methodName:n,Dc:i,path:yn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vm(t){const e=t._freezeSettings(),n=Nm(t._databaseId);return new Az(t._databaseId,!!e.ignoreUndefinedProperties,n)}function PR(t,e,n,i,s,o={}){const c=t.Cc(o.merge||o.mergeFields?2:0,e,n,s);ib("Data must be an object, but it was:",c,i);const d=jR(i,c);let h,f;if(o.merge)h=new ri(c.fieldMask),f=c.fieldTransforms;else if(o.mergeFields){const g=[];for(const v of o.mergeFields){const _=Sy(e,v,n);if(!c.contains(_))throw new ge(ae.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);UR(g,_)||g.push(_)}h=new ri(g),f=c.fieldTransforms.filter((v=>h.covers(v.field)))}else h=null,f=c.fieldTransforms;return new Sz(new qn(d),h,f)}class Pm extends tb{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pm}}function Cz(t,e,n,i){const s=t.Cc(1,e,n);ib("Data must be an object, but it was:",s,i);const o=[],c=qn.empty();Da(i,((h,f)=>{const g=rb(e,h,n);f=At(f);const v=s.yc(g);if(f instanceof Pm)o.push(g);else{const _=_d(f,v);_!=null&&(o.push(g),c.set(g,_))}}));const d=new ri(o);return new OR(c,d,s.fieldTransforms)}function Rz(t,e,n,i,s,o){const c=t.Cc(1,e,n),d=[Sy(e,i,n)],h=[s];if(o.length%2!=0)throw new ge(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)d.push(Sy(e,o[_])),h.push(o[_+1]);const f=[],g=qn.empty();for(let _=d.length-1;_>=0;--_)if(!UR(f,d[_])){const E=d[_];let N=h[_];N=At(N);const A=c.yc(E);if(N instanceof Pm)f.push(E);else{const R=_d(N,A);R!=null&&(f.push(E),g.set(E,R))}}const v=new ri(f);return new OR(g,v,c.fieldTransforms)}function Nz(t,e,n,i=!1){return _d(n,t.Cc(i?4:3,e))}function _d(t,e){if(LR(t=At(t)))return ib("Unsupported field value:",e,t),jR(t,e);if(t instanceof tb)return(function(i,s){if(!VR(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,s){const o=[];let c=0;for(const d of i){let h=_d(d,s.wc(c));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),c++}return{arrayValue:{values:o}}})(t,e)}return(function(i,s){if((i=At(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return gU(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Xe.fromDate(i);return{timestampValue:Xf(s.serializer,o)}}if(i instanceof Xe){const o=new Xe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Xf(s.serializer,o)}}if(i instanceof Er)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof _i)return{bytesValue:rR(s.serializer,i._byteString)};if(i instanceof Mt){const o=s.databaseId,c=i.firestore._databaseId;if(!c.isEqual(o))throw s.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:jv(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Sr)return(function(c,d){return{mapValue:{fields:{[MC]:{stringValue:OC},[$f]:{arrayValue:{values:c.toArray().map((f=>{if(typeof f!="number")throw d.Sc("VectorValues must only contain numeric values.");return Mv(d.serializer,f)}))}}}}}})(i,s);throw s.Sc(`Unsupported field value: ${bm(i)}`)})(t,e)}function jR(t,e){const n={};return CC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Da(t,((i,s)=>{const o=_d(s,e.mc(i));o!=null&&(n[i]=o)})),{mapValue:{fields:n}}}function LR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof Er||t instanceof _i||t instanceof Mt||t instanceof tb||t instanceof Sr)}function ib(t,e,n){if(!LR(n)||!SC(n)){const i=bm(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function Sy(t,e,n){if((e=At(e))instanceof Om)return e._internalPath;if(typeof e=="string")return rb(t,e);throw tm("Field path arguments must be of type string or ",t,!1,void 0,n)}const Iz=new RegExp("[~\\*/\\[\\]]");function rb(t,e,n){if(e.search(Iz)>=0)throw tm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Om(...e.split("."))._internalPath}catch{throw tm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function tm(t,e,n,i,s){const o=i&&!i.isEmpty(),c=s!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let h="";return(o||c)&&(h+=" (found",o&&(h+=` in field ${i}`),c&&(h+=` in document ${s}`),h+=")"),new ge(ae.INVALID_ARGUMENT,d+t+h)}function UR(t,e){return t.some((n=>n.isEqual(e)))}class zR{constructor(e,n,i,s,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class kz extends zR{data(){return super.data()}}function jm(t,e){return typeof e=="string"?rb(t,e):e instanceof Om?e._internalPath:e._delegate._internalPath}function FR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ge(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sb{}class ab extends sb{}function Ui(t,e,...n){let i=[];e instanceof sb&&i.push(e),i=i.concat(n),(function(o){const c=o.filter((h=>h instanceof ob)).length,d=o.filter((h=>h instanceof Lm)).length;if(c>1||c>0&&d>0)throw new ge(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)t=s._apply(t);return t}class Lm extends ab{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Lm(e,n,i)}_apply(e){const n=this._parse(e);return BR(e._query,n),new xs(e.firestore,e.converter,py(e._query,n))}_parse(e){const n=Vm(e.firestore);return(function(o,c,d,h,f,g,v){let _;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ge(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){tS(v,g);const N=[];for(const A of v)N.push(eS(h,o,A));_={arrayValue:{values:N}}}else _=eS(h,o,v)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||tS(v,g),_=Nz(d,c,v,g==="in"||g==="not-in");return Xt.create(f,g,_)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ia(t,e,n){const i=e,s=jm("where",t);return Lm._create(s,i,n)}class ob extends sb{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ob(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Bi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,o){let c=s;const d=o.getFlattenedFilters();for(const h of d)BR(c,h),c=py(c,h)})(e._query,n),new xs(e.firestore,e.converter,py(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class lb extends ab{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new lb(e,n)}_apply(e){const n=(function(s,o,c){if(s.startAt!==null)throw new ge(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ge(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wu(o,c)})(e._query,this._field,this._direction);return new xs(e.firestore,e.converter,(function(s,o){const c=s.explicitOrderBy.concat([o]);return new uc(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function ed(t,e="asc"){const n=e,i=jm("orderBy",t);return lb._create(i,n)}class cb extends ab{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new cb(e,n,i)}_apply(e){return new xs(e.firestore,e.converter,Kf(e._query,this._limit,this._limitType))}}function JE(t){return cb._create("limit",t,"F")}function eS(t,e,n){if(typeof(n=At(n))=="string"){if(n==="")throw new ge(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BC(e)&&n.indexOf("/")!==-1)throw new ge(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(gt.fromString(n));if(!Ae.isDocumentKey(i))throw new ge(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return pE(t,new Ae(i))}if(n instanceof Mt)return pE(t,n._key);throw new ge(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bm(n)}.`)}function tS(t,e){if(!Array.isArray(t)||t.length===0)throw new ge(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function BR(t,e){const n=(function(s,o){for(const c of s)for(const d of c.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ge(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Dz{convertValue(e,n="none"){switch(Aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Sa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Da(e,((s,o)=>{i[s]=this.convertValue(o,n)})),i}convertVectorValue(e){const n=e.fields?.[$f].arrayValue?.values?.map((i=>Ut(i.doubleValue)));return new Sr(n)}convertGeoPoint(e){return new Er(Ut(e.latitude),Ut(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=xm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Yu(e));default:return null}}convertTimestamp(e){const n=Ea(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=gt.fromString(e);rt(uR(i),9688,{name:e});const s=new Qu(i.get(1),i.get(3)),o=new Ae(i.popFirst(5));return s.isEqual(n)||ms(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}function qR(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Tu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class To extends zR{constructor(e,n,i,s,o,c){super(e,n,i,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ef(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(jm("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=To._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}To._jsonSchemaVersion="firestore/documentSnapshot/1.0",To._jsonSchema={type:Wt("string",To._jsonSchemaVersion),bundleSource:Wt("string","DocumentSnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class Ef extends To{data(e={}){return super.data(e)}}class Eo{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Tu(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Ef(this._firestore,this._userDataWriter,i.key,i,new Tu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((d=>{const h=new Ef(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Tu(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>o||d.type!==3)).map((d=>{const h=new Ef(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Tu(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,g=-1;return d.type!==0&&(f=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),g=c.indexOf(d.doc.key)),{type:Mz(d.type),doc:h,oldIndex:f,newIndex:g}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Eo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Mz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:t})}}function Oz(t){t=$n(t,Mt);const e=$n(t.firestore,gs);return bz(Mm(e),t._key).then((n=>HR(e,t,n)))}Eo._jsonSchemaVersion="firestore/querySnapshot/1.0",Eo._jsonSchema={type:Wt("string",Eo._jsonSchemaVersion),bundleSource:Wt("string","QuerySnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class ub extends Dz{constructor(e){super(),this.firestore=e}convertBytes(e){return new _i(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,n)}}function Jl(t){t=$n(t,xs);const e=$n(t.firestore,gs),n=Mm(e),i=new ub(e);return FR(t._query),_z(n,t._query).then((s=>new Eo(e,i,t,s)))}function ha(t,e,n){t=$n(t,Mt);const i=$n(t.firestore,gs),s=qR(t.converter,e,n);return zm(i,[PR(Vm(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ti.none())])}function wd(t,e,n,...i){t=$n(t,Mt);const s=$n(t.firestore,gs),o=Vm(s);let c;return c=typeof(e=At(e))=="string"||e instanceof Om?Rz(o,"updateDoc",t._key,e,n,i):Cz(o,"updateDoc",t._key,e),zm(s,[c.toMutation(t._key,Ti.exists(!0))])}function ec(t){return zm($n(t.firestore,gs),[new Ov(t._key,Ti.none())])}function Um(t,e){const n=$n(t.firestore,gs),i=Dt(t),s=qR(t.converter,e);return zm(n,[PR(Vm(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,Ti.exists(!1))]).then((()=>i))}function So(t,...e){t=At(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||ZE(e[i])||(n=e[i++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(ZE(e[i])){const h=e[i];e[i]=h.next?.bind(h),e[i+1]=h.error?.bind(h),e[i+2]=h.complete?.bind(h)}let o,c,d;if(t instanceof Mt)c=$n(t.firestore,gs),d=Tm(t._key.path),o={next:h=>{e[i]&&e[i](HR(c,t,h))},error:e[i+1],complete:e[i+2]};else{const h=$n(t,xs);c=$n(h.firestore,gs),d=h._query;const f=new ub(c);o={next:g=>{e[i]&&e[i](new Eo(c,f,h,g))},error:e[i+1],complete:e[i+2]},FR(t._query)}return(function(f,g,v,_){const E=new eb(_),N=new Wv(g,E,v);return f.asyncQueue.enqueueAndForget((async()=>Yv(await em(f),N))),()=>{E.Nu(),f.asyncQueue.enqueueAndForget((async()=>Qv(await em(f),N)))}})(Mm(c),d,s,o)}function zm(t,e){return(function(i,s){const o=new os;return i.asyncQueue.enqueueAndForget((async()=>oz(await vz(i),s,o))),o.promise})(Mm(t),e)}function HR(t,e,n){const i=n.docs.get(e._key),s=new ub(t);return new To(t,s,e._key,i,new Tu(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){oc=s})(ac),$l(new Ro("firestore",((i,{instanceIdentifier:s,options:o})=>{const c=i.getProvider("app").getImmediate(),d=new gs(new RL(i.getProvider("auth-internal")),new kL(c,i.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ge(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qu(f.options.projectId,g)})(c,s),c);return o={useFetchStreams:n,...o},d._setSettings(o),d}),"PUBLIC").setMultipleInstances(!0)),va(nE,iE,e),va(nE,iE,"esm2020")})();const Vz={apiKey:"AIzaSyDwUA0paVI6n01aENV5Q2aLwVz1DEDtNuA",authDomain:"personal-budget-pwa-5defb.firebaseapp.com",projectId:"personal-budget-pwa-5defb",storageBucket:"personal-budget-pwa-5defb.firebasestorage.app",messagingSenderId:"137454342284",appId:"1:137454342284:web:d7a8169fd53f437e42aba9"},$R=I2(Vz),ra=xL($R),lt=xz($R),b0=t=>({id:t.uid,username:t.email||t.uid,displayName:t.displayName||t.email?.split("@")[0]||"User",email:t.email||void 0}),Ei=dm()(fv(t=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,lastAuthTime:null,offlineGracePeriod:10080*60*1e3,lastVerificationEmailSent:null,login:async(e,n)=>{t({isLoading:!0,loginError:null});try{const s=(await s9(ra,e,n)).user;if(!s.emailVerified)return await $T(ra),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Please verify your email address before signing in. Check your email for a verification link."}),console.log(` Login blocked: ${s.email} not verified`),!1;const o=b0(s);return t({currentUser:o,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),console.log(` User logged in: ${o.email}`),!0}catch(i){console.error("Login error:",i),console.error("Error code:",i.code),console.error("Error message:",i.message);let s="Login failed. Please try again.";if(i.code)switch(i.code){case"auth/invalid-email":s="Invalid email address.";break;case"auth/user-disabled":s="This account has been disabled.";break;case"auth/user-not-found":s="No account found with this email.";break;case"auth/wrong-password":s="Incorrect password.";break;case"auth/too-many-requests":s="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":s="Network error. Please check your connection and try again.";break;case"auth/invalid-credential":s="Invalid email or password.";break;default:console.warn(`Unhandled Firebase error code: ${i.code}`),s="Authentication failed. Please try again.";break}else console.warn("Non-Firebase error in login:",i),s="An unexpected error occurred. Please try again.";return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:s}),!1}},register:async(e,n,i)=>{t({isLoading:!0,loginError:null});try{const o=(await r9(ra,e,n)).user;await o9(o,{displayName:i}),await HT(o);const c=b0(o);return t({currentUser:c,isAuthenticated:!1,isLoading:!1,loginError:null,lastVerificationEmailSent:Date.now()}),console.log(` User registered: ${c.email}, verification email sent`),!0}catch(s){console.error("Registration error:",s);let o="Registration failed. Please try again.";switch(s.code){case"auth/email-already-in-use":o="An account with this email already exists.";break;case"auth/invalid-email":o="Invalid email address.";break;case"auth/weak-password":o="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":o="Email/password accounts are not enabled.";break}return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:o}),!1}},logout:async()=>{try{await $T(ra),console.log(" User logged out")}catch(e){console.error("Logout error:",e)}},clearError:()=>{t({loginError:null})},sendPasswordReset:async e=>{t({isLoading:!0,loginError:null});try{return await i9(ra,e),t({isLoading:!1}),!0}catch(n){console.error("Password reset error:",n);let i="Failed to send password reset email. Please try again.";switch(n.code){case"auth/user-not-found":i="No account found with this email.";break;case"auth/invalid-email":i="Invalid email address.";break;case"auth/too-many-requests":i="Too many attempts. Please try again later.";break}return t({isLoading:!1,loginError:i}),!1}},sendEmailVerification:async()=>{const e=ra.currentUser;if(!e)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{return await HT(e),t({isLoading:!1,lastVerificationEmailSent:Date.now()}),console.log(` Verification email sent to: ${e.email}`),!0}catch(n){console.error("Email verification error:",n);let i="Failed to send verification email. Please try again.";switch(n.code){case"auth/too-many-requests":i="Too many verification emails sent. Please wait before trying again.";break}return t({isLoading:!1,loginError:i}),!1}},resendEmailVerification:async()=>{const e=Ei.getState();if(e.lastVerificationEmailSent){const n=Date.now()-e.lastVerificationEmailSent,i=60*1e3;if(n<i){const s=Math.ceil((i-n)/1e3);return t({loginError:`Please wait ${s} seconds before requesting another verification email.`}),!1}}return e.sendEmailVerification()},deleteAccount:async e=>{const n=ra.currentUser;if(!n||!n.email)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{const i=Po.credential(n.email,e);return await n9(n,i),await d9(n),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:null,lastAuthTime:null}),console.log(` Account permanently deleted: ${n.email}`),!0}catch(i){console.error("Account deletion error:",i);let s="Failed to delete account. Please try again.";switch(i.code){case"auth/requires-recent-login":s="For security, please log out and log back in before deleting your account.";break;case"auth/wrong-password":s="Incorrect password. Please enter your current password.";break;case"auth/too-many-requests":s="Too many deletion attempts. Please wait before trying again.";break;case"auth/network-request-failed":s="Network error. Please check your connection and try again.";break}return t({isLoading:!1,loginError:s}),!1}},initializeAuth:()=>Ei.getState().isInitialized?()=>{}:(t({isInitialized:!1}),u9(ra,i=>{const s=Date.now(),o=Ei.getState(),c=i?b0(i):null,d=o.lastAuthTime&&s-o.lastAuthTime<o.offlineGracePeriod,f=typeof navigator<"u"&&!navigator.onLine&&o.isAuthenticated&&d&&!c,g=i?i.emailVerified:!0,v=i&&g||!!f,_=i?c:f?o.currentUser:null;t({currentUser:_,isAuthenticated:v,isInitialized:!0,isLoading:!1,loginError:null,lastAuthTime:i&&g?s:o.lastAuthTime}),_?console.log(` Auth state: User is signed in (${_.email})`,f?"(offline grace period)":g?"(verified)":"(unverified)"):console.log(" Auth state: User is signed out")}))}),{name:"auth-storage",partialize:t=>({isAuthenticated:t.isAuthenticated,currentUser:t.currentUser,lastAuthTime:t.lastAuthTime,offlineGracePeriod:t.offlineGracePeriod,lastVerificationEmailSent:t.lastVerificationEmailSent})})),Pz=t=>t==="income"?"Income":t==="expense"?"Expense":t==="transfer"?"Transfer":t,GR=t=>{const e=t.toLowerCase();return e==="income"||e==="expense"||e==="transfer"?e:"expense"},db=t=>{const e=t.date?.toDate?.()?t.date.toDate().toISOString():t.date,n=new Date(e),i=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;return{id:t.id,date:e,amount:typeof t.amount=="string"?parseFloat(t.amount)||0:t.amount,description:t.description||"",envelopeId:t.envelopeId||"",reconciled:t.reconciled??!1,type:Pz(t.type),transferId:t.transferId??void 0,userId:t.userId,month:i}},jz=(t,e)=>({id:t.id,userId:e,envelopeId:t.envelopeId,amount:t.amount.toString(),date:Xe.fromDate(new Date(t.date)),description:t.description,reconciled:t.reconciled??!1,type:GR(t.type),transferId:t.transferId??null}),Lz=t=>({envelopeId:t.envelopeId,amount:t.amount.toString(),date:Xe.fromDate(new Date(t.date)),description:t.description,reconciled:t.reconciled??!1,type:GR(t.type),transferId:t.transferId??null}),_0=t=>pr(lt,"users",t,"transactions"),yr={subscribeToTransactions:(t,e)=>{const n=Ui(_0(t),ed("date","desc"));return So(n,s=>{const o=s.docs.map(c=>({id:c.id,...c.data()}));e(o)})},getAllTransactions:async t=>{console.log(` TransactionService.getAllTransactions: Fetching for user ${t}`);const e=Ui(_0(t),ed("date","desc")),i=(await Jl(e)).docs.map(s=>{const o={id:s.id,...s.data()};return db(o)});return console.log(` Fetched ${i.length} transactions:`,i.map(s=>({id:s.id,description:s.description,month:s.month}))),i},addTransaction:async t=>{const{userId:e,id:n,...i}=t;if(!e)throw new Error("User ID is required to create transaction");console.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,i),console.log(` Original transaction had temp ID: ${n}`);try{console.log(" About to call addDoc with:",i);const s=await Um(_0(e),i);console.log(" addDoc succeeded, docRef:",s),console.log(` Document ID: ${s.id}`),console.log(` Document path: ${s.path}`);const o={id:s.id,...i,userId:e};return console.log(" Final result object:",o),o}catch(s){throw console.error(" addDoc failed:",s),console.error("Error message:",s.message),s}},updateTransaction:async(t,e,n)=>{const i=Dt(lt,"users",t,"transactions",e);return await wd(i,n)},deleteTransaction:async(t,e)=>{console.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${t}`);try{const n=Dt(lt,"users",t,"transactions",e);console.log(` Deleting document at path: ${n.path}`),await ec(n),console.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(n){throw console.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,n),console.error("Error message:",n.message),n}}},w0=t=>pr(lt,"users",t,"envelopes"),es={subscribeToEnvelopes:(t,e)=>{const n=Ui(w0(t),ed("orderIndex","asc"));return So(n,s=>{const o=s.docs.map(c=>({id:c.id,...c.data()}));e(o)})},getAllEnvelopes:async t=>{try{console.log(" EnvelopeService.getAllEnvelopes called for user:",t);const e=w0(t),s=(await Jl(e)).docs.map((o,c)=>({id:o.id,...o.data(),orderIndex:o.data().orderIndex??c})).sort((o,c)=>{const d=o.orderIndex??0,h=c.orderIndex??0;return d-h});return console.log(" Fetched envelopes:",s.length),s}catch(e){return console.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async t=>{const{userId:e,id:n,...i}=t;if(!e)throw new Error("User ID is required to create envelope");console.log(` EnvelopeService.createEnvelope: Adding envelope for user ${e}:`,i),console.log(` Original envelope had temp ID: ${n}`);try{const s=await Um(w0(e),i);console.log(" Envelope addDoc succeeded, docRef:",s),console.log(` Document ID: ${s.id}`);const o={id:s.id,...i,userId:e};return console.log(" Final envelope result object:",o),o}catch(s){throw console.error(" Envelope addDoc failed:",s),s}},saveEnvelope:async(t,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const n=Dt(lt,"users",t,"envelopes",e.id);return await ha(n,e,{merge:!0})},updateBalance:async(t,e,n)=>{const i=Dt(lt,"users",t,"envelopes",e);return await wd(i,{currentBalance:n,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(t,e)=>{console.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${t}`);const n=Dt(lt,"users",t,"envelopes",e);await ec(n),console.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},Uz=({set:t,get:e,getCurrentUserId:n,isNetworkError:i})=>{const s=o=>({id:o.id,date:o.date?.toDate?.()?o.date.toDate().toISOString():o.date,amount:parseFloat(o.amount)||0,description:o.description||"",envelopeId:o.envelopeId||"",reconciled:o.reconciled||!1,type:o.type==="income"?"Income":o.type==="expense"?"Expense":"Transfer",transferId:o.transferId||void 0,userId:o.userId||void 0});return{createEnvelope:async o=>{const c=o.currentBalance&&o.currentBalance>0,d=c?{...o,currentBalance:0,orderIndex:o.orderIndex??0}:{...o,orderIndex:o.orderIndex??0},h=`temp-${Date.now()}-${Math.random()}`,f={...d,id:h};if(t(g=>({envelopes:[...g.envelopes,f],isLoading:!0})),c){console.log(` Creating initial deposit transaction locally first: ${f.name} (tempId: ${h})`);try{await e().addTransaction({description:"Initial Deposit",amount:o.currentBalance,envelopeId:h,date:new Date().toISOString(),type:"Income",reconciled:!1}),console.log(" Initial deposit transaction created locally");const g=e().getEnvelopeBalance(h);console.log(` Test balance for temp envelope ${h}: $${g.toNumber()}`)}catch(g){console.error(" Failed to create initial deposit transaction locally:",g)}}try{console.log(" Attempting Firebase envelope creation...");const g=n(),v={...d,id:"",userId:g},_=await es.createEnvelope(v);console.log(" Firebase envelope creation successful:",_);const E={id:_.id,name:_.name,currentBalance:_.currentBalance,lastUpdated:_.lastUpdated,isActive:_.isActive??!0,orderIndex:_.orderIndex??0,userId:_.userId};if(t(N=>({envelopes:N.envelopes.map(A=>A.id===h?E:A),isLoading:!1,pendingSync:!1})),c){console.log(` Updating transactions from temp envelope ID ${h} to real ID ${_.id}`),console.log(" Transactions before update:",e().transactions.map(A=>({id:A.id,envelopeId:A.envelopeId,description:A.description}))),t(A=>({transactions:A.transactions.map(R=>R.envelopeId===h?{...R,envelopeId:_.id}:R)})),console.log(" Transactions after envelopeId update:",e().transactions.map(A=>({id:A.id,envelopeId:A.envelopeId,description:A.description})));const N=e().transactions.filter(A=>A.envelopeId===_.id&&A.id&&A.id.startsWith("temp-"));console.log(` Found ${N.length} transactions to sync for envelope ${_.id}:`,N.map(A=>({id:A.id,envelopeId:A.envelopeId})));for(const A of N)try{console.log(" Syncing transaction:",A);const R={...A,amount:A.amount.toString(),type:A.type.toLowerCase(),date:Xe.fromDate(new Date(A.date))},P=await yr.addTransaction(R);console.log(" Transaction synced:",P);const U=s(P);console.log(` Replacing temp transaction ${A.id} with Firebase transaction ${P.id}`),t(L=>({transactions:L.transactions.map($=>$.id===A.id?U:$)}))}catch(R){console.error(` Failed to sync transaction ${A.id}:`,R)}console.log(" Final transactions after sync:",e().transactions.map(A=>({id:A.id,envelopeId:A.envelopeId,description:A.description}))),t({pendingSync:!1}),console.log(` All transactions synced for envelope ${_.id}`)}return _}catch(g){if(console.error("Create Envelope Failed:",g),console.log("Error details:",{code:g?.code,message:g?.message,name:g?.name,isNetworkError:i(g)}),i(g))return console.log(" Treating as offline scenario - keeping temp envelope and transactions"),t({isLoading:!1,pendingSync:!0,error:null}),f;throw console.log(" Real error - removing temp envelope"),t(v=>({envelopes:v.envelopes.filter(_=>_.id!==h),transactions:v.transactions.filter(_=>_.envelopeId!==h),error:g.message,isLoading:!1})),g}return f},addToEnvelope:async(o,c,d,h)=>{const f=h?typeof h=="string"?h:h.toISOString():new Date().toISOString();await e().addTransaction({description:d,amount:c,envelopeId:o,date:f,type:"Income",reconciled:!1})},spendFromEnvelope:async(o,c,d,h)=>{const f=h?typeof h=="string"?h:h.toISOString():new Date().toISOString();await e().addTransaction({description:d,amount:c,envelopeId:o,date:f,type:"Expense",reconciled:!1})},transferFunds:async(o,c,d,h,f)=>{console.log(`Transferring ${d} from ${o} to ${c} with note: ${h}`);const g=f?typeof f=="string"?f:f.toISOString():new Date().toISOString(),v=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(_=>_.id===c)?.name||"envelope"}`,amount:d,envelopeId:o,date:g,type:"Expense",transferId:v,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(_=>_.id===o)?.name||"envelope"}`,amount:d,envelopeId:c,date:g,type:"Income",transferId:v,reconciled:!1})},deleteEnvelope:async o=>{const c=e().transactions.filter(d=>d.envelopeId===o);t(d=>({envelopes:d.envelopes.filter(h=>h.id!==o),transactions:d.transactions.filter(h=>h.envelopeId!==o),isLoading:!0}));try{const d=n();await es.deleteEnvelope(d,o);for(const h of c)h.id&&!h.id.startsWith("temp-")&&await yr.deleteTransaction(d,h.id);await e().removeEnvelopeFromTemplates(o),t({isLoading:!1})}catch(d){if(console.error("Delete Envelope Failed:",d),i(d))t({isLoading:!1,pendingSync:!0,error:null});else{const h=e().envelopes.find(f=>f.id===o);t(h?f=>({envelopes:[...f.envelopes,h],transactions:[...f.transactions,...c],error:d.message,isLoading:!1}):{error:d.message,isLoading:!1})}}},updateEnvelope:async o=>{t(c=>({envelopes:c.envelopes.map(d=>d.id===o.id?o:d),isLoading:!0}));try{const c=n();await es.saveEnvelope(c,o),t({isLoading:!1})}catch(c){console.error("Update Envelope Failed:",c),i(c)?t({isLoading:!1,pendingSync:!0,error:null}):t({error:c.message,isLoading:!1})}},renameEnvelope:async(o,c)=>{t(d=>({envelopes:d.envelopes.map(h=>h.id===o?{...h,name:c}:h),isLoading:!0}));try{t({isLoading:!1})}catch(d){console.error("Rename Envelope Failed:",d),t({error:d.message,isLoading:!1})}}}},x0=t=>pr(lt,"users",t,"distributionTemplates"),ii={subscribeToDistributionTemplates:(t,e)=>{const n=Ui(x0(t),ed("lastUsed","desc"));return So(n,s=>{const o=s.docs.map(c=>({id:c.id,...c.data()}));e(o)})},getAllDistributionTemplates:async t=>{const e=Ui(x0(t),ed("lastUsed","desc"));return(await Jl(e)).docs.map(i=>({id:i.id,...i.data()}))},createDistributionTemplate:async t=>{const{userId:e,id:n,...i}=t;if(!e)throw new Error("User ID is required to create distribution template");console.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,i);try{const s=await Um(x0(e),i);console.log(" Template addDoc succeeded, docRef:",s);const o={id:s.id,...i,userId:e};return console.log(" Final template result object:",o),o}catch(s){throw console.error(" Template addDoc failed:",s),s}},saveDistributionTemplate:async(t,e)=>{const n=Dt(lt,"users",t,"distributionTemplates",e.id);return await ha(n,e,{merge:!0})},updateDistributionTemplate:async(t,e,n)=>{const i=Dt(lt,"users",t,"distributionTemplates",e);return await wd(i,n)},deleteDistributionTemplate:async(t,e)=>{console.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${t}`);const n=Dt(lt,"users",t,"distributionTemplates",e);await ec(n),console.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},zz=({set:t,get:e,getCurrentUserId:n,isNetworkError:i})=>({saveTemplate:async(s,o,c)=>{console.log(" saveTemplate called with:",{name:s,distributions:o,note:c});try{const d=n(),h={id:`temp-${Date.now()}`,userId:d,name:s,note:c,lastUsed:new Date().toISOString(),distributions:o};console.log(" Attempting Firebase template save..."),console.log(" Current online status:",navigator.onLine);try{const f=ii.createDistributionTemplate(h),g=new Promise((_,E)=>setTimeout(()=>E(new Error("Firebase timeout - likely offline")),5e3)),v=await Promise.race([f,g]);console.log(" Firebase template save succeeded (online mode):",v),console.log(" Template saved to Firebase - real-time subscription will update local state"),console.log(" Template saved to Firebase:",v),console.log(" Store now has templates:",e().distributionTemplates.length)}catch(f){throw console.log(" Firebase template save failed or timed out:",f.message),f}}catch(d){console.error(" Failed to save template to Firebase, saving locally:",d),console.log(" Error details:",{name:d?.name||"Unknown",message:d?.message||"Unknown",code:d?.code||"Unknown",isNetworkError:i(d)});const h=n(),f={id:`local-${Date.now()}`,userId:h,name:s,note:c,lastUsed:new Date().toISOString(),distributions:o};console.log(" Saving template locally (offline):",f),t(g=>({distributionTemplates:[...g.distributionTemplates,f],pendingSync:!0})),console.log(" Template saved locally as fallback:",f),console.log(" Store now has templates:",e().distributionTemplates.length)}},updateTemplate:async s=>{try{const o=n();await ii.updateDistributionTemplate(o,s.id,{name:s.name,note:s.note,distributions:s.distributions,lastUsed:s.lastUsed}),t(c=>({distributionTemplates:c.distributionTemplates.map(d=>d.id===s.id?s:d)})),console.log(" Template updated in Firebase:",s.id)}catch(o){throw console.error(" Failed to update template in Firebase:",o),o}},deleteTemplate:async s=>{try{const o=n();await ii.deleteDistributionTemplate(o,s),t(c=>({distributionTemplates:c.distributionTemplates.filter(d=>d.id!==s)})),console.log(" Template deleted from Firebase:",s)}catch(o){throw console.error(" Failed to delete template from Firebase:",o),o}},cleanupOrphanedTemplates:async()=>{console.log(" Cleaning up orphaned templates...");const s=e().distributionTemplates,o=e().envelopes,c=new Set(o.map(h=>h.id));let d=0;for(const h of s){const f={...h.distributions},g={};for(const[v,_]of Object.entries(h.distributions))c.has(v)&&(g[v]=_);if(Object.keys(g).length===0){console.log(` Deleting orphaned template: ${h.name}`);const v=n();await ii.deleteDistributionTemplate(v,h.id),d++}else if(JSON.stringify(g)!==JSON.stringify(f)){console.log(` Updating template ${h.name} - removed orphaned envelope references`);const v=n();await ii.updateDistributionTemplate(v,h.id,{distributions:g}),d++}}d>0?console.log(` Cleaned up ${d} templates`):console.log(" No orphaned templates found")},updateTemplateEnvelopeReferences:async(s,o)=>{console.log(` Updating template references: ${s}  ${o}`);const c=e().distributionTemplates;let d=0;for(const h of c)if(h.distributions[s]!==void 0){const f={...h.distributions};f[o]=f[s],delete f[s],console.log(` Updating template: ${h.name}`);const g=n();await ii.updateDistributionTemplate(g,h.id,{distributions:f}),d++}d>0&&console.log(` Updated ${d} templates with new envelope reference`)},removeEnvelopeFromTemplates:async s=>{console.log(` Removing envelope ${s} from all templates`);const o=e().distributionTemplates;let c=0,d=0;for(const h of o)if(h.distributions[s]!==void 0){const f={...h.distributions};if(delete f[s],Object.keys(f).length===0){console.log(` Deleting template ${h.name} - no envelopes left`);const g=n();await ii.deleteDistributionTemplate(g,h.id),d++}else{console.log(` Removing envelope from template: ${h.name}`);const g=n();await ii.updateDistributionTemplate(g,h.id,{distributions:f}),c++}}(c>0||d>0)&&console.log(` Updated ${c} templates, deleted ${d} empty templates`)}}),T0=t=>pr(lt,"users",t,"appSettings"),ts={subscribeToAppSettings:(t,e)=>{const n=Ui(T0(t),JE(1));return So(n,s=>{if(s.empty){e(null);return}const o=s.docs.map(c=>({id:c.id,...c.data()}))[0];e(o)})},getAppSettings:async t=>{const e=Ui(T0(t),JE(1)),n=await Jl(e);if(n.empty)return null;const i=n.docs[0];return{id:i.id,...i.data()}},createAppSettings:async t=>{const{userId:e,...n}=t;if(!e)throw new Error("User ID is required to create app settings");console.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,n);try{const i=await Um(T0(e),n);console.log(" Settings addDoc succeeded, docRef:",i);const s={id:i.id,...n,userId:e};return console.log(" Final settings result object:",s),s}catch(i){throw console.error(" Settings addDoc failed:",i),i}},saveAppSettings:async(t,e)=>{const n=Dt(lt,"users",t,"appSettings",e.id);return await ha(n,e,{merge:!0})},updateAppSettings:async(t,e,n)=>{const i=Dt(lt,"users",t,"appSettings",e);return await wd(i,n)},deleteAppSettings:async(t,e)=>{console.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${t}`);const n=Dt(lt,"users",t,"appSettings",e);await ec(n),console.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}},KR=({set:t,get:e,getCurrentUserId:n})=>({updateAppSettings:async i=>{const s=e();if(!s.appSettings){try{await KR({set:t,get:e,getCurrentUserId:n}).initializeAppSettings();const o=e();if(o.appSettings){const c={...o.appSettings,...i};t({appSettings:c});const d=n();await ts.updateAppSettings(d,o.appSettings.id,i),console.log(" App settings updated successfully")}}catch(o){console.error(" Failed to initialize/update settings:",o)}return}try{t(c=>({appSettings:{...c.appSettings,...i}}));const o=n();await ts.updateAppSettings(o,s.appSettings.id,i),console.log(" App settings updated successfully")}catch(o){throw console.error(" Failed to update app settings:",o),t(c=>({appSettings:c.appSettings})),o}},initializeAppSettings:async()=>{try{const s={userId:n(),theme:"system"},o=await ts.createAppSettings(s);t({appSettings:o}),console.log(" App settings initialized successfully")}catch(i){console.error(" Failed to initialize app settings:",i);const s=n();t({appSettings:{id:"local-settings",userId:s,theme:"system"}})}}});class En{static instance;static getInstance(){return En.instance||(En.instance=new En),En.instance}async getMonthlyBudget(e,n){try{const i=Dt(lt,"monthlyBudgets",`${e}_${n}`),s=await Oz(i);if(s.exists()){const o=s.data();return{id:o.id,userId:o.userId,month:o.month,totalIncome:parseFloat(o.totalIncome),availableToBudget:parseFloat(o.availableToBudget),createdAt:o.createdAt.toDate().toISOString(),updatedAt:o.updatedAt.toDate().toISOString()}}return null}catch(i){throw console.error("Error getting monthly budget:",i),i}}async createOrUpdateMonthlyBudget(e){try{const n=Xe.now(),i=`${e.userId}_${e.month}`,s={id:i,userId:e.userId,month:e.month,totalIncome:e.totalIncome.toString(),availableToBudget:e.availableToBudget.toString(),createdAt:n,updatedAt:n};return await ha(Dt(lt,"monthlyBudgets",i),s),{...e,id:i,createdAt:n.toDate().toISOString(),updatedAt:n.toDate().toISOString()}}catch(n){throw console.error("Error creating/updating monthly budget:",n),n}}async getIncomeSources(e,n){try{const i=Ui(pr(lt,"incomeSources"),ia("userId","==",e),ia("month","==",n));return(await Jl(i)).docs.map(o=>{const c=o.data();return{id:c.id,userId:c.userId,month:c.month,name:c.name,amount:parseFloat(c.amount),frequency:c.frequency,category:c.category,createdAt:c.createdAt.toDate().toISOString(),updatedAt:c.updatedAt.toDate().toISOString()}}).sort((o,c)=>new Date(o.createdAt).getTime()-new Date(c.createdAt).getTime())}catch(i){throw console.error("Error getting income sources:",i),i}}async createIncomeSource(e){try{const n=Xe.now(),i=Dt(pr(lt,"incomeSources")),s={id:i.id,userId:e.userId,month:e.month,name:e.name,amount:e.amount.toString(),frequency:e.frequency||"monthly",...e.category&&{category:e.category},createdAt:n,updatedAt:n};return await ha(i,s),{...e,frequency:e.frequency||"monthly",id:i.id,createdAt:n.toDate().toISOString(),updatedAt:n.toDate().toISOString()}}catch(n){throw console.error("Error creating income source:",n),n}}async getEnvelopeAllocations(e,n){try{const i=Ui(pr(lt,"envelopeAllocations"),ia("userId","==",e),ia("month","==",n));return(await Jl(i)).docs.map(o=>{const c=o.data();return{id:c.id,userId:c.userId,envelopeId:c.envelopeId,month:c.month,budgetedAmount:parseFloat(c.budgetedAmount),createdAt:c.createdAt.toDate().toISOString(),updatedAt:c.updatedAt.toDate().toISOString()}}).sort((o,c)=>new Date(o.createdAt).getTime()-new Date(c.createdAt).getTime())}catch(i){throw console.error("Error getting envelope allocations:",i),i}}async createEnvelopeAllocation(e){try{const n=Xe.now(),i=Dt(pr(lt,"envelopeAllocations")),s={id:i.id,userId:e.userId,envelopeId:e.envelopeId,month:e.month,budgetedAmount:e.budgetedAmount.toString(),createdAt:n,updatedAt:n};return await ha(i,s),{...e,id:i.id,createdAt:n.toDate().toISOString(),updatedAt:n.toDate().toISOString()}}catch(n){throw console.error("Error creating envelope allocation:",n),n}}async copyMonthData(e,n,i){try{const s=await this.getIncomeSources(e,n);for(const f of s)await this.createIncomeSource({...f,month:i});const o=await this.getEnvelopeAllocations(e,n);for(const f of o)await this.createEnvelopeAllocation({...f,month:i});const c=s.reduce((f,g)=>f+g.amount,0),d=o.reduce((f,g)=>f+g.budgetedAmount,0),h=c-d;await this.createOrUpdateMonthlyBudget({userId:e,month:i,totalIncome:c,availableToBudget:h})}catch(s){throw console.error("Error copying month data:",s),s}}async deleteIncomeSource(e){try{const n=Dt(lt,"incomeSources",e);await ec(n)}catch(n){throw console.error("Error deleting income source:",n),n}}async updateIncomeSource(e,n){try{const i=Dt(lt,"incomeSources",e),s={...n,updatedAt:Xe.now()};await ha(i,s,{merge:!0})}catch(i){throw console.error("Error updating income source:",i),i}}async deleteEnvelopeAllocation(e){try{const n=Dt(lt,"envelopeAllocations",e);await ec(n)}catch(n){throw console.error("Error deleting envelope allocation:",n),n}}async updateEnvelopeAllocation(e,n){try{const i=Dt(lt,"envelopeAllocations",e),s={...n,updatedAt:Xe.now()};await ha(i,s,{merge:!0})}catch(i){throw console.error("Error updating envelope allocation:",i),i}}async clearMonthData(e,n){try{const[i,s]=await Promise.all([this.getIncomeSources(e,n),this.getEnvelopeAllocations(e,n)]),o=i.map(d=>this.deleteIncomeSource(d.id)),c=s.map(d=>this.deleteEnvelopeAllocation(d.id));await Promise.all([...o,...c]),await this.createOrUpdateMonthlyBudget({userId:e,month:n,totalIncome:0,availableToBudget:0})}catch(i){throw console.error("Error clearing month data:",i),i}}async calculateAvailableToBudget(e,n){try{const i=await this.getIncomeSources(e,n),s=await this.getEnvelopeAllocations(e,n),o=i.reduce((d,h)=>d+h.amount,0),c=s.reduce((d,h)=>d+h.budgetedAmount,0);return o-c}catch(i){throw console.error("Error calculating available to budget:",i),i}}subscribeToMonthlyBudget(e,n,i){const s=Dt(lt,"monthlyBudgets",`${e}_${n}`);return So(s,o=>{if(o.exists()){const c=o.data();i(c)}else i(null)})}subscribeToIncomeSources(e,n,i){const s=Ui(pr(lt,"incomeSources"),ia("userId","==",e),ia("month","==",n));return So(s,o=>{const c=o.docs.map(d=>({id:d.id,...d.data()})).sort((d,h)=>{const f=d.createdAt?.toDate?.()?.getTime()||0,g=h.createdAt?.toDate?.()?.getTime()||0;return f-g});i(c)})}subscribeToEnvelopeAllocations(e,n,i){const s=Ui(pr(lt,"envelopeAllocations"),ia("userId","==",e),ia("month","==",n));return So(s,o=>{const c=o.docs.map(d=>({id:d.id,...d.data()}));i(c)})}}const Fz=t=>t?{id:t.id,userId:t.userId,month:t.month,totalIncome:parseFloat(t.totalIncome),availableToBudget:parseFloat(t.availableToBudget),createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt||new Date().toISOString(),updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt||new Date().toISOString()}:null,Bz=t=>({id:t.id,userId:t.userId,month:t.month,name:t.name,amount:parseFloat(t.amount),frequency:t.frequency,category:t.category,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt||new Date().toISOString(),updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt||new Date().toISOString()}),qz=t=>({id:t.id,userId:t.userId,envelopeId:t.envelopeId,month:t.month,budgetedAmount:parseFloat(t.budgetedAmount),createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt||new Date().toISOString(),updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt||new Date().toISOString()}),E0=(t,e,n)=>{if(window.__monthlyBudgetUnsubscribers){console.log(" Monthly budget real-time subscriptions already active, skipping setup");return}console.log(" Setting up monthly budget real-time Firebase subscriptions for month:",n);const i=En.getInstance(),s=i.subscribeToMonthlyBudget(e,n,d=>{const h=t.getState();if(h.isOnline&&!h.pendingSync&&!h.resetPending){console.log(" Real-time sync: Monthly budget updated",d?"found":"null");const f=Fz(d);t.setState({monthlyBudget:f})}}),o=i.subscribeToIncomeSources(e,n,d=>{const h=t.getState();if(h.isOnline&&!h.pendingSync&&!h.resetPending){const f=d.map(Bz),g=new Set,v=f.filter(_=>g.has(_.id)?!1:(g.add(_.id),!0));t.setState({incomeSources:v})}}),c=i.subscribeToEnvelopeAllocations(e,n,d=>{const h=t.getState();if(h.isOnline&&!h.pendingSync&&!h.resetPending){console.log(" Real-time sync: Envelope allocations updated",d.length);const f=d.map(qz);t.setState({envelopeAllocations:f})}});window.__monthlyBudgetUnsubscribers={monthlyBudget:s,incomeSources:o,envelopeAllocations:c},console.log(" Monthly budget real-time subscriptions active for month:",n)},nS=()=>{if(window.__monthlyBudgetUnsubscribers){const t=window.__monthlyBudgetUnsubscribers;t.monthlyBudget&&t.monthlyBudget(),t.incomeSources&&t.incomeSources(),t.envelopeAllocations&&t.envelopeAllocations(),delete window.__monthlyBudgetUnsubscribers,console.log(" Cleaned up monthly budget Firebase subscriptions")}},Hz=t=>{const{useMonthlyBudgetStore:e,useAuthStore:n,getCurrentUserId:i}=t;if(typeof window>"u")return;window.addEventListener("online",async()=>{console.log(" Browser online event detected"),await e.getState().updateOnlineStatus();const h=e.getState();h.isOnline&&(h.pendingSync||h.resetPending)&&(console.log(" Auto-syncing pending operations..."),h.syncData())}),window.addEventListener("offline",()=>{console.log(" Browser offline event detected"),e.setState({isOnline:!1})}),setTimeout(()=>{e.getState().updateOnlineStatus()},1e3);let s=null;const o=()=>{s&&clearInterval(s),s=setInterval(async()=>{const h=e.getState();if(!h.isOnline&&!h.testingConnectivity){console.log(" Periodic offline retry: testing connectivity..."),e.setState({testingConnectivity:!0});try{await(async()=>(await e.getState().updateOnlineStatus(),e.getState().isOnline))()?(console.log(" Periodic retry succeeded - back online!"),e.setState({isOnline:!0,testingConnectivity:!1}),(h.pendingSync||h.resetPending)&&e.getState().syncData(),s&&(clearInterval(s),s=null)):e.setState({testingConnectivity:!1})}catch(f){console.log(" Periodic retry failed:",f),e.setState({testingConnectivity:!1})}}else h.isOnline&&s&&(clearInterval(s),s=null)},3e4)};o(),e.subscribe(h=>{!h.isOnline&&!s&&(console.log(" Starting periodic connectivity retry"),o())});let c=null;e.subscribe(h=>{if(c!==null&&h.currentMonth!==c){console.log(" Month changed from",c,"to",h.currentMonth),nS();const f=n.getState();f.isAuthenticated&&f.currentUser&&E0(e,i(),h.currentMonth)}c=h.currentMonth});const d=n.getState();if(d.isAuthenticated&&d.currentUser){console.log(" User already authenticated on app load, setting up monthly budget real-time subscriptions");const h=e.getState().currentMonth;E0(e,i(),h)}n.subscribe(h=>{if(h.isAuthenticated&&h.currentUser){console.log(" User authenticated, setting up monthly budget real-time subscriptions");const f=e.getState().currentMonth;E0(e,i(),f)}else!h.isAuthenticated&&!h.isLoading&&(console.log(" User logged out, clearing monthly budget data and unsubscribing"),nS(),e.getState().handleUserLogout())})},$z=()=>{const t=new Date;return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}`},Jr=()=>{const t=Ei.getState().currentUser;if(!t)throw new Error("User not authenticated");return t.id},Gz=Jr,Kz=async(t,e,n)=>{const{transactions:i,addTransaction:s,deleteTransaction:o}=Nn.getState(),c="Monthly Budget Allocation",[d,h]=n.split("-").map(Number);console.log(" Syncing budget allocation transaction:",{envelopeId:t,budgetedAmount:e,month:n,totalTransactions:i.length});const f=i.filter(v=>{if(v.envelopeId!==t||v.description!==c)return!1;try{let _;if(typeof v.date=="string")_=new Date(v.date);else if(v.date?.toDate&&typeof v.date.toDate=="function")_=v.date.toDate();else return!1;return _.getFullYear()===d&&_.getMonth()+1===h}catch{return!1}});console.log(" Found existing transactions:",f.length);for(const v of f)console.log(" Deleting old allocation transaction:",v.id,"amount:",v.amount),await o(v.id);const g=new Bn(e.toString()||"0");if(g.gt(0)){console.log(" Creating new allocation transaction with amount",g.toNumber());const v=new Date(d,h-1,2).toISOString();await s({description:c,amount:g.toNumber(),envelopeId:t,date:v,type:"Income",reconciled:!0})}else console.log(" No new transaction needed (amount is 0)")},Mo=dm()(fv((t,e)=>({currentMonth:$z(),monthlyBudget:null,incomeSources:[],envelopeAllocations:[],isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1,testingConnectivity:!1,setCurrentMonth:n=>{t({currentMonth:n,isLoading:!0}),e().fetchMonthlyData()},fetchMonthlyData:async()=>{try{t({isLoading:!0,error:null});const n=Jr(),i=e().currentMonth,s=En.getInstance(),[o,c,d]=await Promise.all([s.getMonthlyBudget(n,i),s.getIncomeSources(n,i),s.getEnvelopeAllocations(n,i)]);t({monthlyBudget:o,incomeSources:c,envelopeAllocations:d,isLoading:!1})}catch(n){console.error("Error fetching monthly data:",n),t({error:n instanceof Error?n.message:"Failed to fetch monthly data",isLoading:!1})}},createIncomeSource:async n=>{try{const i=Jr(),s=e().currentMonth,o=En.getInstance();await o.createIncomeSource({...n,userId:i,month:s});const c=await o.getIncomeSources(i,s);t({incomeSources:c})}catch(i){throw console.error("Error creating income source:",i),i}},updateIncomeSource:async(n,i)=>{try{const s={updatedAt:Xe.now()};i.name!==void 0&&(s.name=i.name),i.amount!==void 0&&(s.amount=i.amount.toString()),i.frequency!==void 0&&(s.frequency=i.frequency),i.category!==void 0&&(s.category=i.category);const o=Dt(lt,"incomeSources",n);await wd(o,s);const c=En.getInstance(),d=Jr(),h=e().currentMonth,f=await c.getIncomeSources(d,h);t({incomeSources:f})}catch(s){throw console.error("Error updating income source:",s),s}},deleteIncomeSource:async n=>{t(s=>({incomeSources:s.incomeSources.filter(o=>o.id!==n)})),En.getInstance().deleteIncomeSource(n).catch(s=>{console.error("Error deleting income source from Firebase:",s)})},restoreIncomeSource:async(n,i)=>{try{t(s=>{const o=[...s.incomeSources];return i!==void 0&&i>=0&&i<=o.length?o.splice(i,0,n):o.push(n),{incomeSources:o}}),await e().refreshAvailableToBudget()}catch(s){throw console.error("Error restoring income source:",s),s}},createEnvelopeAllocation:async n=>{try{const i=Jr(),s=e().currentMonth,o=En.getInstance();await o.createEnvelopeAllocation({...n,userId:i,month:s});const c=await o.getEnvelopeAllocations(i,s);t({envelopeAllocations:c})}catch(i){throw console.error("Error creating envelope allocation:",i),i}},updateEnvelopeAllocation:async(n,i)=>{try{const s=Jr(),o=e().currentMonth,c=En.getInstance(),d={};i.envelopeId!==void 0&&(d.envelopeId=i.envelopeId),i.budgetedAmount!==void 0&&(d.budgetedAmount=i.budgetedAmount.toString()),await c.updateEnvelopeAllocation(n,d);const h=await c.getEnvelopeAllocations(s,o);t({envelopeAllocations:h})}catch(s){throw console.error("Error updating envelope allocation:",s),s}},deleteEnvelopeAllocation:async n=>{t(s=>({envelopeAllocations:s.envelopeAllocations.filter(o=>o.id!==n)})),En.getInstance().deleteEnvelopeAllocation(n).catch(s=>{console.error("Error deleting envelope allocation from Firebase:",s)})},restoreEnvelopeAllocation:async(n,i)=>{try{t(s=>{const o=[...s.envelopeAllocations];return i!==void 0&&i>=0&&i<=o.length?o.splice(i,0,n):o.push(n),{envelopeAllocations:o}}),await e().refreshAvailableToBudget()}catch(s){throw console.error("Error restoring envelope allocation:",s),s}},setEnvelopeAllocation:async(n,i)=>{try{console.log(" setEnvelopeAllocation called:",{envelopeId:n,budgetedAmount:i});const s=e().envelopeAllocations.find(c=>c.envelopeId===n);console.log(" Existing allocation:",s),s?(console.log(" Updating existing allocation..."),await e().updateEnvelopeAllocation(s.id,{budgetedAmount:i}),console.log(" Allocation updated")):(console.log(" Creating new allocation..."),await e().createEnvelopeAllocation({envelopeId:n,budgetedAmount:i}),console.log(" Allocation created")),console.log(" Syncing budget allocation transaction...");const o=e().currentMonth;await Kz(n,i,o),console.log(" Transaction synced"),console.log(" Refreshing available to budget..."),await e().refreshAvailableToBudget(),console.log(" Available to budget refreshed")}catch(s){throw console.error(" Error setting envelope allocation:",s),console.error("Error details:",s instanceof Error?s.message:s),s}},copyFromPreviousMonth:async()=>{try{t({isLoading:!0,error:null});const n=Jr(),i=e().currentMonth,[s,o]=i.split("-").map(Number);let c=s,d=o-1;d<1&&(c=s-1,d=12);const h=`${c}-${d.toString().padStart(2,"0")}`,f=En.getInstance(),[g,v]=await Promise.all([f.getIncomeSources(n,h),f.getEnvelopeAllocations(n,h)]);for(const _ of g)await e().createIncomeSource({name:_.name,amount:_.amount});for(const _ of v)await e().setEnvelopeAllocation(_.envelopeId,_.budgetedAmount);await e().fetchMonthlyData()}catch(n){console.error("Error copying from previous month:",n),t({error:n instanceof Error?n.message:"Failed to copy month data",isLoading:!1})}},calculateAvailableToBudget:()=>{const n=e(),i=n.incomeSources.reduce((o,c)=>o+c.amount,0),s=n.envelopeAllocations.reduce((o,c)=>o+c.budgetedAmount,0);return i-s},refreshAvailableToBudget:async()=>{try{const n=e(),i=Jr(),s=n.currentMonth,o=n.incomeSources.reduce((g,v)=>g+v.amount,0),c=n.envelopeAllocations.reduce((g,v)=>g+v.budgetedAmount,0),d=o-c,h=En.getInstance(),f=n.monthlyBudget;if(f){const g={...f,availableToBudget:d,totalIncome:o};await h.createOrUpdateMonthlyBudget(g),t({monthlyBudget:g})}else{const g=await h.createOrUpdateMonthlyBudget({userId:i,month:s,totalIncome:o,availableToBudget:d});t({monthlyBudget:g})}}catch(n){console.error("Error refreshing available to budget:",n)}},loadDemoData:(n,i)=>{t({incomeSources:n,envelopeAllocations:i,isLoading:!1})},clearMonthData:async()=>{try{const n=Jr(),i=e().currentMonth,s=En.getInstance(),{transactions:o,deleteTransaction:c}=Nn.getState(),d="Monthly Budget Allocation",[h,f]=i.split("-").map(Number),g=o.filter(v=>{if(v.description!==d)return!1;try{const _=new Date(v.date);return _.getFullYear()===h&&_.getMonth()+1===f}catch{return!1}});for(const v of g)await c(v.id);await s.clearMonthData(n,i),t({incomeSources:[],envelopeAllocations:[]}),await e().refreshAvailableToBudget()}catch(n){throw console.error("Error clearing month data:",n),n}},updateOnlineStatus:async()=>{console.log("Monthly budget updateOnlineStatus called")},syncData:async()=>{console.log("Monthly budget syncData called")},handleUserLogout:()=>{t({monthlyBudget:null,incomeSources:[],envelopeAllocations:[],isLoading:!1,error:null,pendingSync:!1,resetPending:!1,testingConnectivity:!1})}}),{name:"monthly-budget-store",version:1,partialize:t=>({})}));Hz({useMonthlyBudgetStore:Mo,useAuthStore:Ei,getCurrentUserId:Gz});const Yz=({set:t,get:e,getCurrentUserId:n,isNetworkError:i})=>({addTransaction:async s=>{const o=`temp-${Date.now()}-${Math.random()}`,c=n(),d=new Date(s.date),h=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}`;console.log(" Month calculation in addTransaction:",{originalDate:s.date,dateObj:d,calculatedMonth:h,currentMonth:Mo.getState().currentMonth});const f={...s,id:o,userId:c,month:h};if(t(g=>({transactions:[...g.transactions,f],isLoading:!0})),s.envelopeId.startsWith("temp-"))console.log(` Skipping Firebase sync for transaction with temp envelopeId: ${s.envelopeId}`),t({isLoading:!1,pendingSync:!0});else try{const g=jz(f,c),v=await yr.addTransaction(g);console.log(` Replacing temp transaction ${o} with Firebase transaction:`,v);const _=db(v);t(E=>({transactions:E.transactions.map(N=>N.id===o?_:N),isLoading:!1,pendingSync:!1}))}catch(g){console.error("Add Transaction Failed:",g),i(g)?t({isLoading:!1,pendingSync:!0,error:null}):t(v=>({transactions:v.transactions.filter(_=>_.id!==o),error:g.message,isLoading:!1}))}},deleteTransaction:async s=>{const o=e().transactions.find(d=>d.id===s);if(!o)return;const c=[s];if(o.transferId){const d=e().transactions.find(h=>h.transferId===o.transferId&&h.id!==s);d&&d.id&&c.push(d.id)}t(d=>({transactions:d.transactions.filter(h=>h.id&&!c.includes(h.id)),isLoading:!0}));try{const d=n(),h=c.filter(f=>!f.startsWith("temp-"));for(const f of h)console.log(` About to delete transaction ID: ${f}`),await yr.deleteTransaction(d,f),console.log(` Deleted transaction ID: ${f}`);console.log(" All transaction deletions completed"),t({isLoading:!1})}catch(d){if(console.error("Delete Transaction Failed:",d),i(d))t({isLoading:!1,pendingSync:!0,error:null});else{const h=c.map(f=>e().transactions.find(g=>g.id===f)||o).filter(Boolean);t(f=>({transactions:[...f.transactions,...h],error:d.message,isLoading:!1}))}}},updateTransaction:async s=>{console.log(" updateTransaction called:",s),t(o=>({transactions:o.transactions.map(c=>c.id===s.id?s:c),isLoading:!0}));try{const o=n(),c=yr.updateTransaction(o,s.id,Lz(s)),d=new Promise((h,f)=>setTimeout(()=>f(new Error("Firebase timeout - likely offline")),5e3));await Promise.race([c,d]),console.log(" Transaction updated in Firebase"),t({isLoading:!1})}catch(o){console.error("Update Transaction Failed:",o),console.log(" Error details:",{name:o?.name||"Unknown",message:o?.message||"Unknown",code:o?.code||"Unknown",isNetworkError:i(o)}),i(o)?(console.log(" Treating as offline scenario - keeping local transaction update"),t({isLoading:!1,pendingSync:!0,error:null})):t({error:o.message,isLoading:!1})}},restoreTransaction:async s=>{t(o=>({transactions:[...o.transactions,s],isLoading:!0}));try{t({isLoading:!1})}catch(o){console.error("Restore Transaction Failed:",o),t({error:o.message,isLoading:!1})}}}),Qz=({set:t,get:e,getCurrentUserId:n,isNetworkError:i,loadFallbackData:s,checkOnlineStatus:o,clearUserData:c})=>{const d=async()=>{const A=e(),R=n();if(A.resetPending){console.log(" fetchData: Reset pending detected, performing Firebase reset instead..."),await e().performFirebaseReset();return}console.log(" fetchData: Starting data fetch for user:",R),t({isLoading:!0,error:null});try{let P,U,L,$;[P,U,L,$]=await Promise.all([es.getAllEnvelopes(R).catch(S=>(console.error(" Failed to fetch envelopes:",S),[])),yr.getAllTransactions(R).catch(S=>(console.error(" Failed to fetch transactions:",S),[])),ii.getAllDistributionTemplates(R).catch(S=>(console.error(" Failed to fetch templates:",S),[])),ts.getAppSettings(R).catch(S=>(console.error(" Failed to fetch settings:",S),null))]),console.log(" fetchData: Firebase calls completed"),console.log(" Fetched data counts:",{envelopes:P?.length||0,transactions:U?.length||0,templates:L?.length||0,settings:$?"found":"null"}),e().markOnlineFromFirebaseSuccess();const te=(P?.length||0)>0||(U?.length||0)>0||(L?.length||0)>0;let ne=null;te||(console.log(" No data from Firebase, loading fallback data..."),ne=await s(),ne&&(console.log(" Using fallback data for initialization"),P=ne.envelopes||[],U=ne.transactions||[],L=ne.distributionTemplates||[],$=ne.appSettings||null)),t(S=>{const I=re=>re.map(V=>({...V,date:V.date&&typeof V.date=="object"&&V.date.toDate?V.date.toDate().toISOString():V.date,type:V.type==="income"?"Income":V.type==="expense"?"Expense":V.type==="transfer"?"Transfer":V.type,amount:typeof V.amount=="string"?parseFloat(V.amount):V.amount})),M=re=>({id:re.id,name:re.name,currentBalance:re.currentBalance||0,lastUpdated:re.lastUpdated,isActive:re.isActive??!0,orderIndex:re.orderIndex??0}),z=P.filter(re=>!("orderIndex"in re));z.length>0&&(console.log(` Migrating ${z.length} envelopes to add orderIndex...`),z.forEach((re,V)=>{const J=V,he=n();es.saveEnvelope(he,{...re,orderIndex:J}).then(()=>console.log(` Migrated envelope ${re.name} with orderIndex ${J}`)).catch(me=>console.warn(`Failed to migrate envelope ${re.id}:`,me))}));const O=P.map(M),B=new Set([...S.envelopes.map(re=>re.id),...P.map(re=>re.id)]),j=S.envelopes.filter(re=>re.id&&!P.some(V=>V.id===re.id)&&!re.id.startsWith("temp-")),Oe=S.transactions.filter(re=>re.id&&!U.some(V=>V.id===re.id)&&(!re.id.startsWith("temp-")||B.has(re.envelopeId)));let ce,G=[];navigator.onLine?(ce=L,console.log(` Online mode: Using Firebase templates only (${ce.length} templates)`)):(G=S.distributionTemplates.filter(re=>re.id&&!L.some(V=>V.id===re.id)),ce=L.concat(G),console.log(` Offline mode: Merged ${L.length} Firebase + ${G.length} local templates`)),console.log(" fetchData merge details:"),console.log("  Store envelopes:",S.envelopes.map(re=>({id:re.id,name:re.name}))),console.log("  Firebase envelopes:",P.map(re=>({id:re.id,name:re.name}))),console.log("  Store transactions:",S.transactions.map(re=>({id:re.id,envelopeId:re.envelopeId,description:re.description}))),console.log("  Firebase transactions:",U.map(re=>({id:re.id,envelopeId:re.envelopeId,description:re.description}))),console.log("  Store templates:",S.distributionTemplates.map(re=>({id:re.id,name:re.name}))),console.log("  Firebase templates:",L.map(re=>({id:re.id,name:re.name}))),console.log("  Local-only envelopes:",j.map(re=>({id:re.id,name:re.name}))),console.log("  Local-only transactions:",Oe.map(re=>({id:re.id,envelopeId:re.envelopeId,description:re.description}))),console.log("  Local-only templates:",G.map(re=>({id:re.id,name:re.name}))),console.log("  Total merged templates:",ce.length,ce.map(re=>({id:re.id,name:re.name})));const ee=O.concat(j),fe=I(U).concat(Oe);let de=$;if($&&"isDarkMode"in $&&!("theme"in $)){const re=$;if(de={...re,theme:re.isDarkMode?"dark":"light"},delete de.isDarkMode,de&&de.id){const V=n();ts.updateAppSettings(V,de.id,{theme:de.theme}).catch(J=>console.warn("Failed to migrate app settings:",J))}}return{envelopes:ee,transactions:fe,distributionTemplates:ce,appSettings:de,isLoading:!1,pendingSync:!1}})}catch(P){console.error("Sync Failed:",P),i(P)?t({isLoading:!1,pendingSync:!0}):t({error:P.message,isLoading:!1})}},h=async()=>{if(!e().isOnline)return;if(e().resetPending){console.log(" Sync detected pending reset - performing Firebase reset..."),t({pendingSync:!0});try{await e().performFirebaseReset(),console.log(" Pending reset completed during sync")}catch(R){console.error("Firebase reset during sync failed:",R)}return}t({pendingSync:!0});try{await e().fetchData()}catch(R){console.error("Manual sync failed:",R)}},f=async()=>{const A=await o();t({isOnline:A})},g=()=>{e().isOnline||(console.log(" Firebase operation succeeded - marking as online"),t({isOnline:!0}))},v=()=>{c()},_=async A=>{try{if(!A.envelopes||!A.transactions)return{success:!1,message:"Invalid backup format: Missing core data."};const R=n();console.log(` Importing data for user: ${R}`),console.log(" Clearing existing Firebase data before import..."),await E(),t({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,error:null,pendingSync:!0,isLoading:!0}),console.log(" Local state cleared before import");const P=A.envelopes.map(S=>({id:S.id||`imported-${Date.now()}-${Math.random()}`,name:S.name,currentBalance:S.currentBalance||S.budget||0,lastUpdated:new Date().toISOString(),isActive:S.isActive??!0,orderIndex:S.orderIndex??0,userId:R})),U=A.transactions.map(S=>({...S,id:S.id||`imported-${Date.now()}-${Math.random()}`,userId:R,date:S.date,amount:typeof S.amount=="number"?S.amount:parseFloat(S.amount)||0,type:S.type,reconciled:S.reconciled??!1})),L=(A.distributionTemplates||[]).map(S=>({...S,id:S.id||`imported-${Date.now()}-${Math.random()}`,userId:R})),$=A.appSettings?{...A.appSettings,id:A.appSettings.id||`settings-${R}`,userId:R}:null;console.log(` Importing: ${P.length} envelopes, ${U.length} transactions, ${L.length} templates`),t({envelopes:P,transactions:U,distributionTemplates:L,appSettings:$,error:null,pendingSync:!0});try{console.log(" Syncing imported data to Firebase...");for(const S of P)try{await es.saveEnvelope(R,S),console.log(` Synced envelope: ${S.name}`)}catch(I){console.error(` Failed to sync envelope ${S.name}:`,I)}for(const S of U)try{const I={...S,amount:S.amount.toString(),type:S.type.toLowerCase(),date:Xe.fromDate(new Date(S.date))};await yr.addTransaction(I),console.log(` Synced transaction: ${S.description}`)}catch(I){console.error(` Failed to sync transaction ${S.description}:`,I)}for(const S of L)try{await ii.createDistributionTemplate(S),console.log(` Synced template: ${S.name}`)}catch(I){console.error(` Failed to sync template ${S.name}:`,I)}if($)try{await ts.createAppSettings($),console.log(" Synced app settings")}catch(S){console.error(" Failed to sync app settings:",S)}console.log(" All imported data synced to Firebase"),t({pendingSync:!1,isLoading:!1})}catch(S){console.error(" Error syncing to Firebase:",S),t({pendingSync:!0})}const te=L.length,ne=$?"Settings imported.":"";return{success:!0,message:`Imported and synced ${P.length} envelopes, ${U.length} transactions${te>0?`, ${te} templates`:""} to Firebase.${ne?` ${ne}`:""}`}}catch(R){return console.error("Import failed:",R),{success:!1,message:"Failed to import data. Check file format."}}},E=async()=>{console.log(" performFirebaseReset: Starting complete Firebase reset..."),t({isLoading:!0});try{const A=n();console.log(" Querying Firebase for all data to delete...");const[R,P,U,L]=await Promise.all([es.getAllEnvelopes(A).catch(S=>(console.error(" Failed to fetch envelopes for reset:",S),[])),yr.getAllTransactions(A).catch(S=>(console.error(" Failed to fetch transactions for reset:",S),[])),ii.getAllDistributionTemplates(A).catch(S=>(console.error(" Failed to fetch templates for reset:",S),[])),ts.getAppSettings(A).catch(S=>(console.error(" Failed to fetch settings for reset:",S),null))]);console.log(` Found in Firebase: ${R.length} envelopes, ${P.length} transactions, ${U.length} templates`);let $=0;for(const S of R)if(S.id)try{await es.deleteEnvelope(A,S.id),$++,console.log(` Deleted envelope: ${S.name||S.id}`)}catch(I){console.error(` Failed to delete envelope ${S.id}:`,I)}let te=0;for(const S of P)if(S.id)try{await yr.deleteTransaction(A,S.id),te++,console.log(` Deleted transaction: ${S.id}`)}catch(I){console.error(` Failed to delete transaction ${S.id}:`,I)}let ne=0;for(const S of U)if(S.id)try{await ii.deleteDistributionTemplate(A,S.id),ne++,console.log(` Deleted template: ${S.name||S.id}`)}catch(I){console.error(` Failed to delete template ${S.id}:`,I)}if(L?.id)try{await ts.deleteAppSettings(A,L.id),console.log(" Deleted app settings")}catch(S){console.error(" Failed to delete app settings:",S)}console.log(` Firebase reset complete: Deleted ${$} envelopes, ${te} transactions, ${ne} templates`),t({resetPending:!1,isLoading:!1,pendingSync:!1})}catch(A){throw console.error(" Error during Firebase reset:",A),t({isLoading:!1,pendingSync:!0}),A}};return{fetchData:d,syncData:h,updateOnlineStatus:f,markOnlineFromFirebaseSuccess:g,handleUserLogout:v,importData:_,performFirebaseReset:E,resetData:async()=>{if(console.log(" Starting complete data reset (offline-first)..."),t({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,error:null,resetPending:!0,isLoading:!0}),console.log(" Local state cleared immediately"),e().isOnline){console.log(" Online - performing Firebase reset immediately...");try{await e().performFirebaseReset(),console.log(" Firebase reset completed immediately")}catch(R){console.error(" Firebase reset failed, will retry on next sync:",R),t({isLoading:!1,pendingSync:!0})}}else console.log(" Offline - Firebase reset will be performed when connection is restored"),t({isLoading:!1,pendingSync:!0})}}},Xz=t=>db(t),Wz=t=>({id:t.id,name:t.name||"",currentBalance:t.currentBalance||0,lastUpdated:t.lastUpdated,isActive:t.isActive??!0,orderIndex:t.orderIndex??0,userId:t.userId||void 0}),Zz=t=>({id:t.id,name:t.name||"",distributions:t.distributions||{},lastUsed:t.lastUsed?.toDate?.()?t.lastUsed.toDate().toISOString():t.lastUsed||new Date().toISOString(),note:t.note||"",userId:t.userId||void 0}),iS=(t,e)=>{if(window.__firebaseUnsubscribers){console.log(" Real-time subscriptions already active, skipping setup");return}console.log(" Setting up real-time Firebase subscriptions...");const n=es.subscribeToEnvelopes(e,c=>{const d=t.getState();if(d.isOnline&&!d.pendingSync&&!d.resetPending){console.log(" Real-time sync: Envelopes updated",c.length);const h=c.map(Wz);t.setState({envelopes:h})}}),i=yr.subscribeToTransactions(e,c=>{const d=t.getState();if(d.isOnline&&!d.pendingSync&&!d.resetPending){console.log(" Real-time sync: Transactions updated",c.length);const h=c.map(Xz);t.setState({transactions:h})}}),s=ii.subscribeToDistributionTemplates(e,c=>{const d=t.getState();if(d.isOnline&&!d.pendingSync&&!d.resetPending){console.log(" Real-time sync: Templates updated from Firebase",c.length),console.log(" Firebase templates:",c.map(f=>({id:f.id,name:f.name})));const h=c.map(Zz);console.log(" Setting store templates to:",h.map(f=>({id:f.id,name:f.name}))),t.setState({distributionTemplates:h})}else console.log(" Real-time sync: Skipping template update (offline or pending changes)")}),o=ts.subscribeToAppSettings(e,c=>{const d=t.getState();d.isOnline&&!d.pendingSync&&!d.resetPending&&(console.log(" Real-time sync: Settings updated",c?"found":"null"),t.setState({appSettings:c}))});window.__firebaseUnsubscribers={envelopes:n,transactions:i,templates:s,settings:o},console.log(" Real-time subscriptions active - cross-device sync enabled")},Jz=t=>{const{useEnvelopeStore:e,useAuthStore:n,getCurrentUserId:i}=t;if(typeof window>"u")return;window.addEventListener("online",async()=>{console.log(" Browser online event detected"),await e.getState().updateOnlineStatus();const d=e.getState();d.isOnline&&(d.pendingSync||d.resetPending)&&(console.log(" Auto-syncing pending operations..."),d.syncData())}),window.addEventListener("offline",()=>{console.log(" Browser offline event detected"),e.setState({isOnline:!1})}),setTimeout(()=>{e.getState().updateOnlineStatus()},1e3);let s=null;const o=()=>{s&&clearInterval(s),s=setInterval(async()=>{const d=e.getState();if(!d.isOnline&&!d.testingConnectivity){console.log(" Periodic offline retry: testing connectivity..."),e.setState({testingConnectivity:!0});try{await(async()=>(await e.getState().updateOnlineStatus(),e.getState().isOnline))()?(console.log(" Periodic retry succeeded - back online!"),e.setState({isOnline:!0,testingConnectivity:!1}),(d.pendingSync||d.resetPending)&&e.getState().syncData(),s&&(clearInterval(s),s=null)):e.setState({testingConnectivity:!1})}catch(h){console.log(" Periodic retry failed:",h),e.setState({testingConnectivity:!1})}}else d.isOnline&&s&&(clearInterval(s),s=null)},3e4)};o(),e.subscribe(d=>{!d.isOnline&&!s&&(console.log(" Starting periodic connectivity retry"),o())});const c=n.getState();c.isAuthenticated&&c.currentUser&&(console.log(" User already authenticated on app load, setting up real-time subscriptions"),iS(e,i())),n.subscribe(d=>{if(d.isAuthenticated&&d.currentUser)console.log(" User authenticated, setting up real-time subscriptions"),iS(e,i());else if(!d.isAuthenticated&&!d.isLoading){if(console.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const h=window.__firebaseUnsubscribers;h.envelopes&&h.envelopes(),h.transactions&&h.transactions(),h.templates&&h.templates(),h.settings&&h.settings(),delete window.__firebaseUnsubscribers,console.log(" Cleaned up Firebase subscriptions")}e.getState().handleUserLogout()}})},e7=async()=>{try{console.log(" Attempting to load fallback data from backup file...");const t=await fetch("/HouseBudget_Backup_2025-11-25.json");if(t.ok){const e=await t.json();return console.log(" Loaded fallback data:",{envelopes:e.envelopes?.length||0,transactions:e.transactions?.length||0,templates:e.distributionTemplates?.length||0}),e}}catch(t){console.log(" Could not load fallback data:",t)}return null},Il=()=>{const{currentUser:t}=Ei.getState();if(!t)throw new Error("No authenticated user found");return t.id},t7=()=>{console.log(" Clearing user data on logout"),Nn.setState({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1})},rS=async()=>{if(typeof navigator>"u"||!navigator.onLine)return console.log(" Browser reports offline"),!1;const t=async(n,i={})=>{try{const s=new AbortController,o=setTimeout(()=>s.abort(),4e3);return await fetch(n,{method:"HEAD",mode:"no-cors",cache:"no-cache",signal:s.signal,...i}),clearTimeout(o),!0}catch(s){return console.log(` Connectivity test failed for ${n}:`,s instanceof Error?s.message:"Unknown error"),!1}},e=[t("https://httpbin.org/status/200",{method:"GET"}),t("https://www.cloudflare.com/favicon.ico"),t("https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"),t("https://www.google.com/favicon.ico")];console.log(" Testing connectivity with multiple endpoints...");try{const n=await Promise.allSettled(e),i=n.filter(o=>o.status==="fulfilled"&&o.value===!0).length,s=n.length;return i>0?(console.log(` Connectivity confirmed (${i}/${s} tests passed)`),!0):(console.log(` All connectivity tests failed (${s} tests)`),!1)}catch(n){return console.log(" Connectivity testing error:",n),!1}},sf=t=>{const e=t?.code?.toLowerCase()||"",n=t?.message?.toLowerCase()||"",i=t?.name?.toLowerCase()||"";return!!(e==="unavailable"||e==="cancelled"||n.includes("network")||n.includes("offline")||n.includes("disconnected")||n.includes("connection")||n.includes("fetch")||n.includes("timeout")||n.includes("err_internet_disconnected")||n.includes("err_network_changed")||n.includes("err_connection_refused")||!navigator.onLine||i==="undefined"&&n==="undefined")},Nn=dm()(fv((t,e)=>{const n=Uz({set:t,get:e,getCurrentUserId:Il,isNetworkError:sf}),i=zz({set:t,get:e,getCurrentUserId:Il,isNetworkError:sf}),s=KR({set:t,get:e,getCurrentUserId:Il}),o=Yz({set:t,get:e,getCurrentUserId:Il,isNetworkError:sf}),c=Qz({set:t,get:e,getCurrentUserId:Il,isNetworkError:sf,loadFallbackData:e7,checkOnlineStatus:rS,clearUserData:t7});return{envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1,testingConnectivity:!1,addEnvelope:async d=>(await n.createEnvelope(d)).id,updateEnvelope:n.updateEnvelope,deleteEnvelope:n.deleteEnvelope,renameEnvelope:n.renameEnvelope,transferFunds:n.transferFunds,addTransaction:o.addTransaction,updateTransaction:o.updateTransaction,deleteTransaction:o.deleteTransaction,restoreTransaction:o.restoreTransaction,addDistributionTemplate:i.saveTemplate,updateDistributionTemplate:i.updateTemplate,deleteDistributionTemplate:i.deleteTemplate,removeEnvelopeFromTemplates:i.removeEnvelopeFromTemplates,cleanupOrphanedTemplates:i.cleanupOrphanedTemplates,updateAppSettings:s.updateAppSettings,initializeAppSettings:s.initializeAppSettings,fetchData:c.fetchData,syncData:c.syncData,updateOnlineStatus:c.updateOnlineStatus,markOnlineFromFirebaseSuccess:c.markOnlineFromFirebaseSuccess,handleUserLogout:c.handleUserLogout,importData:c.importData,performFirebaseReset:c.performFirebaseReset,resetData:c.resetData,getEnvelopeBalance:d=>{const h=e();if(!h.envelopes.find(R=>R.id===d))return console.log(` getEnvelopeBalance: Envelope ${d} not found`),new Bn(0);const g=h.transactions.filter(R=>R.envelopeId===d),v=g.filter(R=>R.type==="Expense"),_=g.filter(R=>R.type==="Income"),E=v.reduce((R,P)=>R.plus(new Bn(P.amount||0)),new Bn(0));return _.reduce((R,P)=>R.plus(new Bn(P.amount||0)),new Bn(0)).minus(E)},getTransactionsForMonth:d=>e().transactions.filter(f=>f.month===d),resetAllData:async()=>{console.log(" Resetting all data"),t({envelopes:[],transactions:[],distributionTemplates:[],appSettings:null,isLoading:!1,error:null,isOnline:typeof navigator<"u"?navigator.onLine:!0,pendingSync:!1,resetPending:!1})},testConnectivity:async()=>{console.log(" Testing connectivity"),await rS()}}},{name:"envelope-storage",partialize:t=>({envelopes:t.envelopes,transactions:t.transactions,distributionTemplates:t.distributionTemplates,appSettings:t.appSettings})}));Jz({useEnvelopeStore:Nn,useAuthStore:Ei,getCurrentUserId:Il});const n7=({currentMonth:t,onMonthChange:e})=>{const[n,i]=t.split("-").map(Number),o=["January","February","March","April","May","June","July","August","September","October","November","December"][i-1],c=()=>{let f=n,g=i-1;g<1&&(f=n-1,g=12);const v=`${f}-${g.toString().padStart(2,"0")}`;e(v)},d=()=>{let f=n,g=i+1;g>12&&(f=n+1,g=1);const v=`${f}-${g.toString().padStart(2,"0")}`;e(v)},h=()=>{const f=new Date,g=`${f.getFullYear()}-${(f.getMonth()+1).toString().padStart(2,"0")}`;e(g)};return b.jsx("div",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 py-3",children:b.jsxs("div",{className:"flex items-center justify-between max-w-md mx-auto",children:[b.jsx("button",{onClick:c,className:"p-2 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Previous month",children:b.jsx(AD,{size:20})}),b.jsx("div",{className:"flex-1 text-center",children:b.jsxs("button",{onClick:h,className:"text-lg font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Click to go to current month",children:[o," ",n]})}),b.jsx("button",{onClick:d,className:"p-2 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Next month",children:b.jsx(po,{size:20})})]})})},i7=({amount:t,totalIncome:e,totalAllocated:n,isLoading:i=!1})=>{const s=e>0?n/e*100:0,o=Math.abs(t)<.01,c=t<0,d=t>0,f=o?{icon:Dy,color:"text-green-600 dark:text-emerald-400",bgColor:"bg-green-50 dark:bg-emerald-900/20",borderColor:"border-green-200 dark:border-emerald-800",title:"Budget Balanced!",subtitle:"Every dollar has a job"}:c?{icon:f4,color:"text-red-600 dark:text-red-400",bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",title:"Over Budget",subtitle:"Reduce allocations or add income"}:{icon:c4,color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",title:"Available to Budget",subtitle:"Assign money to envelopes"},g=f.icon;return i?b.jsxs("div",{className:"bg-gray-50 dark:bg-zinc-900 rounded-2xl p-6 border border-gray-200 dark:border-zinc-800 animate-pulse",children:[b.jsxs("div",{className:"flex items-center justify-between mb-4",children:[b.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-32"}),b.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20"})]}),b.jsx("div",{className:"h-2 bg-gray-200 dark:bg-zinc-700 rounded"})]}):b.jsxs("div",{className:`rounded-2xl p-6 border ${f.bgColor} ${f.borderColor}`,children:[b.jsxs("div",{className:"flex items-center justify-between mb-4",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:`p-2 rounded-xl ${f.bgColor} ${f.borderColor}`,children:b.jsx(g,{size:24,className:f.color})}),b.jsxs("div",{children:[b.jsx("h3",{className:`font-semibold ${f.color}`,children:f.title}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:f.subtitle})]})]}),b.jsxs("div",{className:"text-right",children:[b.jsxs("div",{className:`text-3xl font-bold ${f.color}`,children:[c?"-":"","$",Math.abs(t).toFixed(2)]}),o&&b.jsx("div",{className:"text-sm text-green-600 dark:text-emerald-400 font-medium",children:"Perfect Balance"})]})]}),!o&&e>0&&b.jsxs("div",{className:"space-y-2",children:[b.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-zinc-400",children:[b.jsx("span",{children:"Allocated"}),b.jsxs("span",{children:[s.toFixed(0),"% of income"]})]}),b.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2",children:b.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${c?"bg-red-500":d?"bg-blue-500":"bg-green-500"}`,style:{width:`${Math.min(s,100)}%`}})}),b.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-zinc-500",children:[b.jsxs("span",{children:["$",n.toFixed(2)," allocated"]}),b.jsxs("span",{children:["$",e.toFixed(2)," income"]})]})]}),b.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-zinc-700",children:b.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[b.jsxs("div",{children:[b.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",e.toFixed(2)]}),b.jsx("div",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Total Income"})]}),b.jsxs("div",{children:[b.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",n.toFixed(2)]}),b.jsx("div",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Allocated"})]})]})})]})},r7=()=>{const[t,e]=D.useState(!1),n=D.useRef(null),{currentUser:i,logout:s}=Ei(),{handleUserLogout:o}=Nn(),c=vs();D.useEffect(()=>{const f=g=>{n.current&&!n.current.contains(g.target)&&e(!1)};if(t)return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[t]);const d=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{o(),s(),c("/"),e(!1)}catch(f){console.error("Logout failed:",f)}};if(!i)return null;const h=i.displayName?.charAt(0)?.toUpperCase()||i.email?.charAt(0)?.toUpperCase()||"U";return b.jsxs("div",{className:"relative",ref:n,children:[b.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors",children:[b.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-semibold",children:h}),b.jsx("span",{className:"hidden sm:block text-sm font-medium text-gray-700 dark:text-gray-300",children:i.displayName||i.email?.split("@")[0]||"User"}),b.jsx(ED,{size:16,className:`text-gray-500 dark:text-gray-400 transition-transform ${t?"rotate-180":""}`})]}),t&&b.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-zinc-900 rounded-xl shadow-lg border border-gray-200 dark:border-zinc-800 overflow-hidden z-50",children:[b.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-zinc-800",children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:h}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:i.displayName||i.email?.split("@")[0]||"User"}),b.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 truncate",children:i.email})]})]})}),b.jsxs("div",{className:"py-1",children:[b.jsxs("button",{onClick:()=>{c("/settings"),e(!1)},className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:[b.jsx(ES,{size:18,className:"text-gray-500 dark:text-gray-400"}),"Settings"]}),b.jsxs("button",{onClick:d,className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors",children:[b.jsx(n4,{size:18}),"Log Out"]})]})]})]})},hb=({children:t,onDelete:e,threshold:n=-100})=>{const i=hP(),[s,o]=D.useState(!1),c=D.useRef(0),d=()=>{o(!0),c.current=Date.now()},h=async(f,g)=>{const v=g.offset.x,_=g.velocity.x;if(setTimeout(()=>o(!1),100),v<n||v<-50&&_<-500){const E=e();E===!1?i.start({x:0}):E instanceof Promise&&E.then(N=>{N===!1&&i.start({x:0})})}else i.start({x:0})};return b.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[b.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:b.jsx(lf,{className:"text-white w-6 h-6"})}),b.jsx(Vo.div,{drag:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:d,onDragEnd:h,animate:i,className:`relative bg-white dark:bg-zinc-900 rounded-xl ${s?"z-20":"z-10"}`,style:{touchAction:"pan-y",pointerEvents:s?"none":"auto"},children:t})]})},YR=({message:t="Loading your budget...",showTimeout:e=!1})=>b.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex flex-col items-center justify-center px-4",children:[b.jsx("div",{className:"mb-8",children:b.jsxs("div",{className:"relative",children:[b.jsx(pa,{size:48,className:"text-blue-500 animate-spin"}),b.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:b.jsx(My,{size:24,className:"text-blue-600 dark:text-blue-400"})})]})}),b.jsxs("div",{className:"text-center space-y-3",children:[b.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 max-w-md",children:"This may take a moment on slow connections. We're fetching your budget data securely."})]}),b.jsxs("div",{className:"mt-12 w-full max-w-md space-y-4",children:[b.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-24 animate-pulse"}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),b.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),b.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]})]})}),b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-zinc-800",children:[b.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-32 mb-2 animate-pulse"}),b.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20 animate-pulse"})]}),b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[b.jsxs("div",{className:"flex justify-between items-center mb-4",children:[b.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-28 animate-pulse"}),b.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),b.jsxs("div",{className:"space-y-3",children:[b.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),b.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]}),b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[b.jsxs("div",{className:"flex justify-between items-center mb-4",children:[b.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-32 animate-pulse"}),b.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),b.jsxs("div",{className:"space-y-3",children:[b.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),b.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),b.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]})]}),e&&b.jsx("div",{className:"mt-8 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 max-w-md",children:b.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 text-center",children:"This is taking longer than usual. If you're on a very slow connection, this is normal. Your data will load shortly."})}),b.jsx("div",{className:"mt-8 w-full max-w-md",children:b.jsx("div",{className:"h-1 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:b.jsx("div",{className:"h-full bg-blue-500 rounded-full animate-pulse",style:{width:"60%"}})})})]}),xd=dm((t,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(n,i="neutral",s)=>{t({message:n,type:i,isVisible:!0,undoAction:s}),setTimeout(()=>{e().hideToast()},6e3)},hideToast:()=>{t({isVisible:!1})}})),s7=({isVisible:t,onClose:e,mode:n,initialIncomeSource:i})=>{const{createIncomeSource:s,updateIncomeSource:o}=Mo(),{showToast:c}=xd(),[d,h]=D.useState(""),[f,g]=D.useState(""),[v,_]=D.useState(!1);D.useEffect(()=>{if(!t)return;const N=window.setTimeout(()=>{n==="edit"&&i?(h(i.name),g(i.amount.toString())):(h(""),g(""))},0);return()=>window.clearTimeout(N)},[t,n,i]);const E=async N=>{if(N.preventDefault(),!d.trim()||!f||parseFloat(f)<=0){c("Please fill in all required fields with valid values","error");return}_(!0);try{if(n==="add")await s({name:d.trim(),amount:parseFloat(f)}),c(`Added "${d.trim()}" as income source`,"success");else if(n==="edit"){if(!i){c("Error: No income source to edit","error");return}await o(i.id,{name:d.trim(),amount:parseFloat(f)}),c(`Updated "${d.trim()}" income source`,"success")}e()}catch(A){console.error("Error saving income source:",A),c("Failed to save income source. Please try again.","error")}finally{_(!1)}};return t?b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[b.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[b.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n==="add"?"Add Income Source":"Edit Income Source"}),b.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:""})]}),b.jsxs("form",{onSubmit:E,className:"p-6 space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Income Source Name *"}),b.jsx("input",{type:"text",value:d,onChange:N=>h(N.target.value),placeholder:"e.g., Primary Job, Freelance, Investments",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Amount *"}),b.jsxs("div",{className:"relative",children:[b.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-zinc-400",children:"$"}),b.jsx("input",{type:"number",value:f,onChange:N=>g(N.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]})]}),b.jsxs("div",{className:"flex gap-3 pt-4",children:[b.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),b.jsx("button",{type:"submit",disabled:v||!d.trim()||!f||parseFloat(f)<=0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:v?"Saving...":n==="add"?"Add Income":"Save Changes"})]})]})]})}):null},a7=({isVisible:t,onClose:e,onConfirm:n,currentMonth:i,incomeCount:s,totalIncome:o,allocationCount:c,totalAllocated:d,isLoading:h=!1})=>{const[f,g]=D.useState(""),[v,_]=D.useState("confirm"),E=R=>{const[P,U]=R.split("-");return new Date(parseInt(P),parseInt(U)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},N=()=>{v==="confirm"?_("type"):v==="type"&&f==="START FRESH"&&n()},A=()=>{_("confirm"),g(""),e()};return t?b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[b.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[b.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Start Fresh for ",E(i)]}),b.jsx("button",{onClick:A,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",disabled:h,children:""})]}),b.jsx("div",{className:"p-6 space-y-4",children:v==="confirm"?b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:b.jsxs("div",{className:"flex items-start",children:[b.jsx("div",{className:"flex-shrink-0",children:b.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),b.jsxs("div",{className:"ml-3",children:[b.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action will permanently delete:"}),b.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:b.jsxs("ul",{className:"space-y-1",children:[b.jsxs("li",{children:[" ",s," income source",s!==1?"s":""," (totaling $",o.toFixed(2),"/month)"]}),b.jsxs("li",{children:[" ",c," envelope allocation",c!==1?"s":""," (totaling $",d.toFixed(2),")"]})]})})]})]})}),b.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:b.jsxs("div",{className:"flex",children:[b.jsx("div",{className:"flex-shrink-0",children:b.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),b.jsx("div",{className:"ml-3",children:b.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[b.jsx("strong",{children:"All other months will remain completely unchanged."})," This only affects the current month's budget data."]})})]})}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"You can undo this action within 30 seconds if you change your mind."})]}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"text-center",children:[b.jsxs("p",{className:"text-sm text-gray-900 dark:text-white mb-4",children:["Type ",b.jsx("strong",{children:"START FRESH"})," to confirm:"]}),b.jsx("input",{type:"text",value:f,onChange:R=>g(R.target.value),placeholder:"START FRESH",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-zinc-800 dark:text-white text-center font-mono text-lg",autoFocus:!0})]}),b.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500 text-center",children:"This action cannot be undone after 30 seconds"})]})}),b.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200 dark:border-zinc-800",children:[b.jsx("button",{type:"button",onClick:A,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",disabled:h,children:"Cancel"}),b.jsx("button",{type:"button",onClick:N,disabled:h||v==="type"&&f!=="START FRESH",className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?"Clearing...":v==="confirm"?"Continue":"Start Fresh"})]})]})}):null},o7=({currentMonth:t,onCopy:e,onDismiss:n,isLoading:i=!1})=>{const s=c=>{const[d,h]=c.split("-");return new Date(parseInt(d),parseInt(h)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},o=c=>{const[d,h]=c.split("-").map(Number);let f=d,g=h-1;return g<1&&(f=d-1,g=12),s(`${f}-${g.toString().padStart(2,"0")}`)};return b.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-6 mb-6",children:[b.jsxs("div",{className:"flex items-start justify-between",children:[b.jsxs("div",{className:"flex items-start space-x-3",children:[b.jsx("div",{className:"flex-shrink-0",children:b.jsx(LD,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),b.jsxs("div",{className:"flex-1",children:[b.jsx("h3",{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:"Copy Previous Month?"}),b.jsxs("p",{className:"mt-1 text-sm text-blue-700 dark:text-blue-300",children:["Would you like to copy your budget setup from ",o(t)," to get started with ",s(t),"?"]}),b.jsx("p",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400",children:"This will copy your income sources and envelope allocations, but not transactions."})]})]}),b.jsx("button",{onClick:n,className:"flex-shrink-0 text-blue-400 hover:text-blue-600 dark:hover:text-blue-300 transition-colors","aria-label":"Dismiss",children:b.jsx(rd,{className:"h-5 w-5"})})]}),b.jsxs("div",{className:"mt-4 flex space-x-3",children:[b.jsx("button",{onClick:n,className:"flex-1 px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-300 bg-white dark:bg-zinc-800 border border-blue-300 dark:border-blue-600 rounded-lg hover:bg-blue-50 dark:hover:bg-zinc-700 transition-colors",disabled:i,children:"Start Fresh"}),b.jsx("button",{onClick:e,disabled:i,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?"Copying...":"Copy Previous Month"})]})]})},l7=({env:t,budgetedAmount:e,remainingBalance:n,editingEnvelopeId:i,setEditingEnvelopeId:s,editingAmount:o,setEditingAmount:c,handleBudgetSave:d,navigate:h,inputRef:f,dragConstraints:g,onDragStart:v,onDragEnd:_,transactions:E,currentMonth:N})=>{const A=pP(),[R,P]=D.useState(!1),[U,L]=D.useState(!1),$=D.useRef(null),te=D.useRef(null),ne=D.useRef(null),S=E.filter(de=>de.envelopeId===t.id&&de.month===N),I=S.filter(de=>de.type==="Expense"),M=S.filter(de=>de.type==="Income"),z=I.reduce((de,re)=>de+(re.amount||0),0),O=M.reduce((de,re)=>de+(re.amount||0),0),B=Math.max(0,z/O*100),j=()=>{$.current!==null&&(clearTimeout($.current),$.current=null)},Oe=de=>{de.button!==0&&de.pointerType!=="touch"||(te.current={x:de.clientX,y:de.clientY},j(),$.current=window.setTimeout(()=>{L(!0),A.start(de)},220))},ce=de=>{if(!te.current||$.current===null)return;const re=de.clientX-te.current.x,V=de.clientY-te.current.y;Math.hypot(re,V)>8&&j()},G=()=>{j(),L(!1),te.current=null},ee=()=>{j(),L(!1),te.current=null},fe=()=>{R||i!==t.id&&h(`/envelope/${t.id}`)};return D.useEffect(()=>{const de=ne.current;if(!de)return;const re=V=>{(R||U)&&V.preventDefault()};return de.addEventListener("touchmove",re,{passive:!1}),()=>{de.removeEventListener("touchmove",re)}},[R,U]),b.jsx(xP,{ref:ne,value:t,dragListener:!1,dragControls:A,dragConstraints:g,dragElastic:.16,dragMomentum:!1,onDragStart:()=>{P(!0),v()},onDragEnd:()=>{P(!1),L(!1),_()},transition:{type:"spring",stiffness:420,damping:30,mass:.7},whileDrag:{scale:1.04,zIndex:20},layout:!0,onPointerDown:Oe,onPointerUp:G,onPointerMove:ce,onPointerCancel:ee,style:{boxShadow:R?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",touchAction:"none"},className:"bg-gray-50 dark:bg-zinc-800 p-4 rounded-xl cursor-pointer active:scale-[0.99] transition-transform select-none",children:b.jsx("div",{className:"flex items-center gap-3 w-full",children:b.jsxs("div",{className:"flex-1",onClick:fe,children:[b.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:t.name}),b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("div",{className:"flex items-center space-x-4",onClick:de=>de.stopPropagation(),onPointerDown:de=>de.stopPropagation(),children:i===t.id?b.jsxs("div",{className:"flex items-center space-x-1",children:[b.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),b.jsx("form",{onSubmit:de=>{de.preventDefault(),d()},children:b.jsx("input",{ref:f,type:"number",value:o,onChange:de=>c(de.target.value),onBlur:d,className:"w-24 px-2 py-1 text-sm border rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white",step:"0.01",autoFocus:!0})})]}):b.jsxs("div",{onClick:de=>{de.stopPropagation(),s(t.id),c(e.toString())},className:"flex items-center space-x-1 hover:bg-gray-200 dark:hover:bg-zinc-700 px-2 py-1 rounded transition-colors",children:[b.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),b.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["$",e.toFixed(2)]})]})}),b.jsxs("div",{className:"text-right",children:[b.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 block",children:"Remaining"}),b.jsxs("span",{className:`font-bold ${n.toNumber()<0||100-B<=5?"text-red-500":B>=80?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-emerald-400"}`,children:["$",n.toNumber().toFixed(2)]})]})]}),e>0&&b.jsx("div",{className:"mt-3",onClick:de=>de.stopPropagation(),children:(console.log(` Envelope: ${t.name}`,{budgetedAmount:e,totalIncome:O,totalSpent:z,remainingBalance:n.toNumber(),percentage:B}),b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-zinc-400 mb-1",children:[b.jsx("span",{children:"Budget Used"}),b.jsxs("span",{children:[B.toFixed(0),"%"]})]}),b.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2 overflow-hidden",children:b.jsx("div",{className:`h-full transition-all duration-300 ease-out ${n.toNumber()<0||100-B<=5?"bg-red-500":B>=80?"bg-yellow-500":"bg-green-400"}`,style:{width:`${Math.max(100-B,2)}%`}})})]}))})]})})})},c7=()=>{const{envelopes:t,transactions:e,fetchData:n,isLoading:i,isOnline:s,pendingSync:o,syncData:c,testingConnectivity:d}=Nn(),{currentMonth:h,fetchMonthlyData:f,incomeSources:g,envelopeAllocations:v,calculateAvailableToBudget:_,deleteIncomeSource:E,restoreIncomeSource:N,clearMonthData:A,copyFromPreviousMonth:R,setEnvelopeAllocation:P,isLoading:U}=Mo(),{showToast:L}=xd(),$=vs(),[te,ne]=D.useState(!1),[S,I]=D.useState("add"),[M,z]=D.useState(null),[O,B]=D.useState(!1),[j,Oe]=D.useState(!1),[ce,G]=D.useState(!1),ee=D.useRef(null),[fe,de]=D.useState(!0),[re,V]=D.useState(!1),J=D.useRef(null),[he,me]=D.useState(null),[ye,xe]=D.useState(""),we=D.useRef(null),ct=Te=>{const Ze=e.filter(tt=>tt.envelopeId===Te&&tt.month===h),cn=e.filter(tt=>tt.envelopeId===Te);console.log(` Balance calc for envelope ${Te}:`,{currentMonth:h,totalTransactions:e.length,allEnvelopeTransactions:cn.map(tt=>({id:tt.id,amount:tt.amount,type:tt.type,month:tt.month,date:tt.date})),matchingMonthTransactions:Ze.map(tt=>({id:tt.id,amount:tt.amount,type:tt.type,month:tt.month,date:tt.date}))});const Zt=Ze.filter(tt=>tt.type==="Expense"),Et=Ze.filter(tt=>tt.type==="Income"),Mn=Zt.reduce((tt,Es)=>tt.plus(new Bn(Es.amount||0)),new Bn(0)),La=Et.reduce((tt,Es)=>tt.plus(new Bn(Es.amount||0)),new Bn(0)).minus(Mn);return console.log(` Final balance for envelope ${Te}:`,La.toNumber()),La};D.useEffect(()=>(console.log(" Starting initial data load, isInitialLoading:",fe),(async()=>{console.log(" Setting timeout for loading message"),J.current=setTimeout(()=>{console.log(" Loading timeout reached, showing timeout message"),V(!0)},8e3);try{console.log(" Fetching data in parallel..."),await Promise.all([n().then(()=>console.log(" Envelope data fetched")),f().then(()=>console.log(" Monthly budget data fetched"))]),J.current&&clearTimeout(J.current),console.log(" Data load complete, hiding loading screen"),de(!1),V(!1)}catch(Ze){console.error(" Error loading initial data:",Ze),de(!1),V(!1)}})(),()=>{J.current&&clearTimeout(J.current)}),[]),D.useEffect(()=>{if(!U&&!fe){const Te=g.length===0&&v.length===0;G(Te)}},[U,fe,g,v,h]),D.useEffect(()=>{he&&we.current&&(we.current.focus(),we.current.select())},[he]);const[Fe,nn]=D.useState(!1),wn=D.useRef(null),Ts=Te=>{console.log(" Reordered envelopes:",Te.map(Ze=>Ze.name)),Te.forEach((Ze,cn)=>{Ze.orderIndex!==cn&&Nn.getState().updateEnvelope({...Ze,orderIndex:cn})})},[kr,Kn]=D.useState([]),qi=D.useRef([]);D.useEffect(()=>{if(!Fe){const Te=[...t].filter(Ze=>v.some(cn=>cn.envelopeId===Ze.id)).sort((Ze,cn)=>{const Zt=Ze.orderIndex??0,Et=cn.orderIndex??0;return Zt-Et});Kn(Te),qi.current=Te}},[t,v,Fe]);const Dr=Te=>{Kn(Te),qi.current=Te},Oa=()=>nn(!0),Va=()=>{nn(!1),qi.current.length&&Ts(qi.current)},Tt=kr,Ot=t.reduce((Te,Ze)=>Te+ct(Ze.id).toNumber(),0);console.log(" Total balance:",Ot);const Hi=async()=>{if(he)try{const Te=parseFloat(ye)||0;await P(he,Te)}catch(Te){console.error("Failed to save budget amount:",Te),L("Failed to update budget","error")}finally{me(null),xe("")}},hc=()=>{I("add"),z(null),ne(!0)},Uo=Te=>{ee.current&&clearTimeout(ee.current),!O&&(I("edit"),z(Te),ne(!0))},ln=Te=>{ee.current&&clearTimeout(ee.current),B(!0);const Ze=g.findIndex(Zt=>Zt.id===Te.id),cn={...Te};E(Te.id).catch(console.error),L(`Deleted "${Te.name}"`,"neutral",()=>N(cn,Ze)),setTimeout(()=>B(!1),500)},Mr=()=>{ne(!1),z(null)},Pa=()=>{Oe(!0)},ja=async()=>{try{await A(),Oe(!1),L(`"${h}" budget cleared`,"neutral",()=>L('Cannot undo "Start Fresh" after 30 seconds',"error"))}catch(Te){console.error("Error clearing month data:",Te),L("Failed to clear month data","error")}},$i=async()=>{try{await R(),G(!1),L("Previous month budget copied","success")}catch(Te){console.error("Error copying previous month:",Te),L("Failed to copy previous month","error")}},fc=_();return console.log(" Checking loading screen condition, isInitialLoading:",fe),fe?(console.log(" Showing loading screen"),b.jsx(YR,{message:re?"Still loading... This is normal on slow connections":"Loading your budget...",showTimeout:re})):(console.log(" Showing main content"),b.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[b.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 z-30",children:[b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("div",{className:"flex items-center gap-2",children:s?i?b.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[b.jsx(pa,{size:16,className:"animate-spin"}),b.jsx("span",{className:"text-sm font-medium",children:"Syncing..."})]}):o?b.jsxs("button",{onClick:c,className:"flex items-center gap-1 text-orange-500 hover:text-orange-600 transition-colors",title:"Sync pending - tap to sync",children:[b.jsx(pa,{size:16}),b.jsx("span",{className:"text-sm font-medium",children:"Sync"})]}):b.jsxs("div",{className:"flex items-center gap-1 text-green-500",children:[b.jsx(S4,{size:16}),b.jsx("span",{className:"text-sm font-medium",children:"Online"})]}):b.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[b.jsx(T4,{size:16}),b.jsx("span",{className:"text-sm font-medium",children:d?"Testing...":i?"Saving...":"Offline"})]})}),b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("button",{onClick:Pa,className:"text-orange-500 hover:text-orange-600 dark:hover:text-orange-400 transition-colors",title:"Start Fresh - Clear current month budget",children:b.jsx(pa,{size:22})}),b.jsx(r7,{})]})]}),b.jsx("div",{className:"mt-4",children:b.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:"Personal Budget"})})]}),b.jsxs("div",{className:"p-4 max-w-md mx-auto space-y-6",children:[b.jsx(n7,{currentMonth:h,onMonthChange:Te=>{G(!1),Mo.getState().setCurrentMonth(Te)}}),b.jsx(i7,{amount:fc,totalIncome:g.reduce((Te,Ze)=>Te+Ze.amount,0),totalAllocated:v.reduce((Te,Ze)=>Te+Ze.budgetedAmount,0),isLoading:i}),ce&&b.jsx(o7,{currentMonth:h,onCopy:$i,onDismiss:()=>G(!1)}),b.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[b.jsxs("div",{className:"flex justify-between items-center mb-4",children:[b.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Income Sources"}),b.jsx("button",{onClick:hc,className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:b.jsx($g,{size:20})})]}),g.length===0?b.jsx("div",{className:"text-center py-6",children:b.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm",children:"No income sources yet. Add your monthly income."})}):b.jsx("div",{className:"space-y-3",children:b.jsx(om,{initial:!1,mode:"popLayout",children:g.map(Te=>b.jsx(Vo.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:b.jsx(hb,{onDelete:()=>ln(Te),children:b.jsxs("div",{className:"flex justify-between items-center py-3 px-4 bg-gray-50 dark:bg-zinc-800 rounded-xl cursor-pointer",onClick:()=>Uo(Te),children:[b.jsxs("div",{className:"flex-1",children:[b.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:Te.name}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Monthly income"})]}),b.jsxs("p",{className:"font-semibold text-green-600 dark:text-emerald-400",children:["$",Te.amount.toFixed(2)]})]})})},Te.id))})})]}),b.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[b.jsxs("div",{className:"flex justify-between items-center mb-4",children:[b.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Spending Envelopes"}),b.jsx("button",{onClick:()=>$("/add-envelope"),className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",title:"Create New Envelope",children:b.jsx($g,{size:20})})]}),Tt.length===0?b.jsxs("div",{className:"text-center py-6",children:[b.jsx(My,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto mb-3"}),b.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm mb-4",children:t.length>0?"No envelopes added to this month. Copy from previous month or add new ones.":"No envelopes yet. Create one to get started."}),b.jsx("button",{onClick:()=>$("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:"Create First Envelope"})]}):b.jsx("div",{ref:wn,children:b.jsx(vP,{axis:"y",values:kr,onReorder:Dr,className:"space-y-3",layoutScroll:!0,children:Tt.map(Te=>{const cn=v.find(Et=>Et.envelopeId===Te.id)?.budgetedAmount||0,Zt=ct(Te.id);return b.jsx(l7,{env:Te,budgetedAmount:cn,remainingBalance:Zt,editingEnvelopeId:he,setEditingEnvelopeId:me,editingAmount:ye,setEditingAmount:xe,handleBudgetSave:Hi,navigate:$,inputRef:we,dragConstraints:wn,onDragStart:Oa,onDragEnd:Va,transactions:e,currentMonth:h},Te.id)})})})]}),b.jsx("button",{onClick:()=>$("/add-transaction"),className:"fixed bottom-24 right-6 md:bottom-10 bg-blue-600 text-white p-4 rounded-full shadow-lg active:scale-90 transition-transform z-40 pointer-events-auto",children:b.jsx($g,{size:28})}),b.jsx(s7,{isVisible:te,onClose:Mr,mode:S,initialIncomeSource:M}),b.jsx(a7,{isVisible:j,onClose:()=>Oe(!1),onConfirm:ja,currentMonth:h,incomeCount:g.length,totalIncome:g.reduce((Te,Ze)=>Te+Ze.amount,0),allocationCount:v.length,totalAllocated:v.reduce((Te,Ze)=>Te+Ze.budgetedAmount,0)})]})]}))},QR=({isVisible:t,onClose:e,mode:n,currentEnvelope:i,initialTransaction:s})=>{const{addTransaction:o,updateTransaction:c,deleteTransaction:d}=Nn(),[h,f]=D.useState(""),[g,v]=D.useState(""),[_,E]=D.useState(new Date().toISOString().split("T")[0]);if(D.useEffect(()=>{if(!t)return;const U=window.setTimeout(()=>{if(n==="edit"&&s){f(s.amount.toString()),v(s.description);try{const L=new Date(s.date);isNaN(L.getTime())?(console.warn("Invalid date in transaction:",s.date),E(new Date().toISOString().split("T")[0])):E(L.toISOString().split("T")[0])}catch(L){console.error("Error parsing transaction date:",L),E(new Date().toISOString().split("T")[0])}}else f(""),v(""),E(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(U)},[t,n,s]),!t)return null;const N=async U=>{U.preventDefault();const L=parseFloat(h);if(isNaN(L)||L<=0){console.log(" Invalid amount:",h);return}console.log(" Saving transaction:",{mode:n,amount:L,note:g,date:_,envelopeId:i.id});try{n==="add"?(console.log(" Adding income transaction"),await o({amount:L,description:g,date:new Date(_).toISOString(),envelopeId:i.id,type:"Income",reconciled:!1})):n==="spend"?(console.log(" Adding expense transaction"),await o({amount:L,description:g,date:new Date(_).toISOString(),envelopeId:i.id,type:"Expense",reconciled:!1})):n==="edit"&&s&&(console.log(" Updating transaction"),await c({...s,amount:L,description:g,date:new Date(_).toISOString()})),console.log(" Transaction saved successfully"),e()}catch($){console.error(" Error saving transaction:",$),alert("Failed to save transaction: "+($ instanceof Error?$.message:"Unknown error"))}},A=()=>{!s||!s.id||window.confirm("Are you sure you want to delete this transaction?")&&(d(s.id),e())},R=n==="add"?"Add Money":n==="spend"?"Spend Money":"Edit Transaction",P=n==="add"?"text-green-500":"text-red-500";return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:b.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[b.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[b.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),b.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:R}),b.jsx("button",{onClick:N,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!h||parseFloat(h)<=0,children:"Save"})]}),b.jsxs("form",{onSubmit:N,className:"p-6 space-y-6",children:[b.jsxs("div",{className:"text-center",children:[b.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),b.jsxs("div",{className:"relative inline-block",children:[b.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${P}`,children:"$"}),b.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:h,onChange:U=>{const L=U.target.value;(L===""||!isNaN(parseFloat(L))&&parseFloat(L)>=0)&&f(L)},onKeyDown:U=>{(U.key==="e"||U.key==="E"||U.key==="+"||U.key==="-")&&U.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${P} placeholder-gray-700`})]})]}),b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[b.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),b.jsx("input",{type:"text",value:g,onChange:U=>v(U.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[b.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),b.jsx("input",{type:"date",value:_,onChange:U=>{console.log("Date changed to:",U.target.value),E(U.target.value)},required:!0,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),n==="edit"&&b.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:b.jsxs("button",{type:"button",onClick:A,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[b.jsx(SS,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})})},u7=({isVisible:t,onClose:e,sourceEnvelope:n})=>{const{envelopes:i,transferFunds:s}=Nn(),[o,c]=D.useState(""),[d,h]=D.useState(""),[f,g]=D.useState(""),[v,_]=D.useState(new Date().toISOString().split("T")[0]),E=i.filter(R=>R.id!==n.id);if(D.useEffect(()=>{if(!t)return;const R=window.setTimeout(()=>{c(""),h(""),g(""),_(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(R)},[t]),!t)return null;const N=R=>{R.preventDefault();const P=parseFloat(d);isNaN(P)||P<=0||!o||(s(n.id,o,P,f,new Date(v)),e())},A=i.find(R=>R.id===o);return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:b.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[b.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[b.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),b.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),b.jsx("button",{onClick:N,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!d||parseFloat(d)<=0||!o,children:"Transfer"})]}),b.jsxs("form",{onSubmit:N,className:"p-6 space-y-6",children:[b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[b.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),b.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:n.name})]}),b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[b.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),b.jsxs("select",{value:o,onChange:R=>c(R.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[b.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),E.map(R=>b.jsx("option",{value:R.id,className:"bg-white dark:bg-zinc-900",children:R.name},R.id))]})]}),b.jsxs("div",{className:"text-center",children:[b.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),b.jsxs("div",{className:"relative inline-block",children:[b.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),b.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:d,onChange:R=>h(R.target.value),onKeyDown:R=>{(R.key==="e"||R.key==="E"||R.key==="+"||R.key==="-")&&R.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[b.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),b.jsx("input",{type:"text",value:f,onChange:R=>g(R.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[b.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),b.jsx("input",{type:"date",value:v,onChange:R=>_(R.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),A&&d&&parseFloat(d)>0&&b.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",b.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(d).toFixed(2)]})," from"," ",b.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:n.name})," to"," ",b.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:A.name})]})]})]})})},d7=t=>{if(!t)return"No Date";try{let e;return t&&typeof t=="object"&&t.toDate&&typeof t.toDate=="function"?e=t.toDate():typeof t=="number"?t<1e10?e=new Date((t+978307200)*1e3):e=new Date(t):e=new Date(t),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return console.error("Date error:",e),"Error"}},h7=t=>{const e=typeof t=="string"?parseFloat(t):t;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},XR=({transaction:t,envelopeName:e,onReconcile:n,onEdit:i})=>{if(!t)return null;const s=t.type==="Income",o=t.type==="Expense";let c="text-gray-900 dark:text-white";return s&&(c="text-green-600 dark:text-green-400"),o&&(c="text-red-600 dark:text-red-400"),b.jsxs("div",{onClick:i,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 transition-colors cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[b.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:t.description||"No Description"}),t.reconciled&&b.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),b.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1",children:[b.jsx("span",{children:d7(t.date)}),e&&b.jsxs(b.Fragment,{children:[b.jsx("span",{children:""}),b.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]})]})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${c}`,children:[o?"-":s?"+":"",h7(t.amount)]}),n?b.jsx("button",{type:"button",onClick:d=>{d.stopPropagation(),n()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":t.reconciled?"Mark as unreconciled":"Mark as reconciled",children:t.reconciled?b.jsx(Zw,{className:"text-green-500",size:20}):b.jsx(ex,{className:"text-gray-400",size:20})}):b.jsx("span",{children:t.reconciled?b.jsx(Zw,{className:"text-green-500",size:20}):b.jsx(ex,{className:"text-gray-400",size:20})})]})]})},f7=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),m7=()=>{const{id:t}=bk(),{envelopes:e,transactions:n,fetchData:i,isLoading:s,deleteEnvelope:o,renameEnvelope:c,updateTransaction:d,deleteTransaction:h,restoreTransaction:f,getEnvelopeBalance:g}=Nn(),{showToast:v}=xd(),_=vs(),E=ys(),[N,A]=D.useState(!1),[R,P]=D.useState(!1),[U,L]=D.useState(!1),[$,te]=D.useState(null);D.useEffect(()=>{e.length===0&&i()},[]);const ne=e.find(O=>O.id===t);if(!ne)return s?b.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:b.jsx("p",{children:"Loading envelope..."})}):b.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:b.jsx("p",{children:"Envelope not found."})});const S=n.filter(O=>O.envelopeId===ne.id).sort((O,B)=>new Date(B.date).getTime()-new Date(O.date).getTime()),I=()=>{E.state?.fromGlobalFAB?_("/"):_(-1)},M=()=>{t&&(o(t),_(-1))},z=O=>{const B={...O,reconciled:!O.reconciled};d(B)};return b.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4",children:[b.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+12px)] pb-4 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[b.jsx("button",{onClick:()=>{const O=prompt("Rename envelope:",ne.name);O&&O.trim()&&t&&c(t,O)},className:"text-blue-600 dark:text-blue-400 font-medium",children:"Rename"}),b.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:ne.name}),b.jsx("button",{onClick:I,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),b.jsx("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:b.jsxs("div",{className:"flex justify-between items-center mb-2",children:[b.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const O=g(ne.id).toNumber();return console.log(`Debug: Envelope ${ne.name} Balance:`,O),b.jsx("span",{className:`text-xl font-bold ${O<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:f7(O)})})()]})}),b.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[b.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>A(!0),children:[b.jsx(kD,{className:"w-5 h-5 mr-3"}),"Add Money"]}),b.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>P(!0),children:[b.jsx(ND,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),b.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>L(!0),children:[b.jsx(_D,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),b.jsxs("section",{className:"mt-6",children:[b.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),b.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:S.length===0?b.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):b.jsx(om,{initial:!1,mode:"popLayout",children:S.map(O=>b.jsx(Vo.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:b.jsx(hb,{onDelete:()=>{if(!O.id)return;const B={...O};h(O.id),v("Transaction deleted","neutral",()=>f(B))},children:b.jsx(XR,{transaction:O,onReconcile:()=>z(O),onEdit:()=>te(O)})})},O.id))})})]}),b.jsx("div",{className:"mt-8",children:b.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{confirm(`Are you sure you want to delete "${ne.name}"? This will delete all transactions.`)&&M()},children:[b.jsx(SS,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),(N||R||$)&&b.jsx(QR,{isVisible:N||R||!!$,onClose:()=>{A(!1),P(!1),te(null)},mode:N?"add":R?"spend":"edit",currentEnvelope:ne,initialTransaction:$}),U&&b.jsx(u7,{isVisible:U,onClose:()=>L(!1),sourceEnvelope:ne})]})},p7="1.1.0",g7={version:p7},y7=()=>{const t=vs(),e=D.useRef(null),{envelopes:n,transactions:i,distributionTemplates:s,resetData:o,importData:c,getEnvelopeBalance:d,appSettings:h,updateAppSettings:f,initializeAppSettings:g,cleanupOrphanedTemplates:v}=Nn(),{currentUser:_,deleteAccount:E}=Ei(),[N,A]=D.useState(null),[R,P]=D.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[U,L]=D.useState(!1),[$,te]=D.useState(!1),[ne,S]=D.useState(""),[I,M]=D.useState(!1),z=978307200,O=h?.theme??"system";D.useEffect(()=>{h||g().catch(V=>{console.error("Failed to initialize app settings:",V)})},[h,g]);const B=(V,J)=>{A({type:V,text:J}),setTimeout(()=>A(null),3500)},j=D.useMemo(()=>{const V=n.length,J=i.length,he=s.length,me=n.reduce((ct,Fe)=>ct+d(Fe.id).toNumber(),0),ye=0,xe=i.reduce((ct,Fe)=>{let nn=0;if(typeof Fe.date=="string"){const wn=Date.parse(Fe.date);nn=Number.isNaN(wn)?0:wn}else typeof Fe.date=="number"&&(nn=Fe.date<2e9?(Fe.date+z)*1e3:Fe.date);return Math.max(ct,nn)},0),we=ye||xe?new Date(Math.max(ye,xe)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:V,transactionCount:J,templateCount:he,totalBalance:me,lastUpdated:we}},[n,i,s]),Oe=()=>{try{const V={appVersion:"2.0 (PWA)",backupDate:Date.now(),appSettings:h||{theme:"system"},envelopes:n.map(xe=>({...xe,currentBalance:d(xe.id).toNumber(),lastUpdated:new Date().toISOString()})),transactions:i,distributionTemplates:s},J=new Blob([JSON.stringify(V,null,2)],{type:"application/json"}),he=URL.createObjectURL(J),me=document.createElement("a");me.href=he,me.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(me),me.click(),document.body.removeChild(me),URL.revokeObjectURL(he);const ye=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",ye),P(ye),B("success","Backup downloaded successfully.")}catch(V){console.error(V),B("error","Failed to create backup file.")}},ce=()=>{try{const V=["Date","Description","Amount","Type","Envelope","Reconciled"],J=i.map(we=>{const ct=n.find(wn=>wn.id===we.envelopeId)?.name||"Unknown",Fe=(we.description||"").replace(/"/g,'""');let nn="Invalid Date";if(we.date){if(typeof we.date=="string")nn=we.date.split("T")[0];else if(typeof we.date=="number"){const wn=we.date<2e9?(we.date+z)*1e3:we.date;nn=new Date(wn).toISOString().split("T")[0]}}return[nn,`"${Fe}"`,we.amount.toFixed(2),we.type,`"${ct}"`,we.reconciled?"Yes":"No"].join(",")}),he=[V.join(","),...J].join(`
`),me=new Blob([he],{type:"text/csv;charset=utf-8;"}),ye=URL.createObjectURL(me),xe=document.createElement("a");xe.href=ye,xe.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(xe),xe.click(),document.body.removeChild(xe),URL.revokeObjectURL(ye),B("success","CSV export ready to open in Excel/Numbers.")}catch(V){console.error(V),B("error","Failed to export CSV.")}},G=()=>{e.current?.click()},ee=V=>{const J=V.target.files?.[0];if(!J)return;const he=new FileReader;he.onload=async me=>{try{const ye=JSON.parse(me.target?.result),xe=await c(ye);if(!xe.success){B("error",xe.message);return}if(ye.appSettings?.theme)try{await f({theme:ye.appSettings.theme})}catch(we){console.error("Failed to update imported settings:",we)}else if(ye.appSettings?.isDarkMode!==void 0)try{const we=ye.appSettings.isDarkMode?"dark":"light";await f({theme:we})}catch(we){console.error("Failed to update imported settings:",we)}B("success",`Loaded ${ye.envelopes?.length??0} envelopes, ${ye.transactions?.length??0} transactions, and ${ye.distributionTemplates?.length??0} templates.`)}catch(ye){console.error(ye),B("error","Invalid backup file. Please verify the JSON.")}},he.readAsText(J),V.target.value=""},fe=async()=>{L(!0);try{B("success","Scanning templates for orphaned references..."),await v(),B("success","Orphaned templates have been cleaned up successfully.")}catch(V){console.error("Template cleanup failed:",V),B("error","Failed to clean up orphaned templates. Check console for details.")}finally{L(!1)}},de=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, templates, and settings from the cloud. This action cannot be undone."))try{await o(),B("success","All data has been permanently deleted."),t("/")}catch(V){console.error("Reset failed:",V),B("error","Failed to delete all data. Some data may remain.")}},re=async()=>{if(!ne.trim()){B("error","Please enter your password to confirm account deletion.");return}te(!0);try{await o(),await E(ne)?B("success","Your account has been permanently deleted."):B("error","Failed to delete account. Please try again.")}catch(V){console.error("Account deletion failed:",V),B("error","Failed to delete account. Please try again.")}finally{te(!1),M(!1),S("")}};return b.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[b.jsx("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:b.jsxs("div",{className:"flex items-center",children:[b.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),b.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]})}),b.jsxs("div",{className:"p-4 space-y-6 max-w-2xl mx-auto",children:[N&&b.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${N.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[N.type==="success"?b.jsx(Dy,{size:18}):b.jsx(lf,{size:18}),N.text]}),b.jsx("section",{children:b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(tx,{className:"text-blue-500",size:22}),b.jsxs("div",{children:[b.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),b.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, templates, and settings."})]})]}),b.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),b.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:j.envelopeCount})]}),b.jsxs("div",{children:[b.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),b.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:j.transactionCount})]}),b.jsxs("div",{children:[b.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Templates"}),b.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:j.templateCount})]}),b.jsxs("div",{children:[b.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Data Last Modified"}),b.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:j.lastUpdated})]})]})]})}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4",children:[b.jsxs("div",{className:"flex items-center justify-between mb-3",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[O==="light"&&b.jsx("span",{className:"text-orange-500 text-lg",children:""}),O==="dark"&&b.jsx("span",{className:"text-purple-500 text-lg",children:""}),O==="system"&&b.jsx("span",{className:"text-gray-500 text-lg",children:""}),b.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),b.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:O})]}),b.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-500 mb-3",children:"Choose your preferred appearance."}),b.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(V=>b.jsx("button",{onClick:async()=>{try{await f({theme:V.value})}catch(J){console.error("Failed to update theme setting:",J)}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${O===V.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:V.label},V.value))})]})]}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[b.jsxs("button",{onClick:Oe,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(tx,{className:"text-blue-500",size:20}),b.jsxs("div",{className:"flex flex-col items-start",children:[b.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),b.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",R]})]})]}),b.jsx(po,{className:"text-gray-400",size:18})]}),b.jsxs("button",{onClick:G,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(v4,{className:"text-blue-500",size:20}),b.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),b.jsx(po,{className:"text-gray-400",size:18})]}),b.jsxs("button",{onClick:ce,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx($D,{className:"text-blue-500",size:20}),b.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Export Transactions (CSV)"})]}),b.jsx(po,{className:"text-gray-400",size:18})]}),b.jsxs("button",{onClick:fe,disabled:U,className:`w-full p-4 flex items-center justify-between transition-colors ${U?"bg-gray-50 dark:bg-zinc-800/50 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-zinc-800/50"}`,children:[b.jsxs("div",{className:"flex items-center gap-3",children:[U?b.jsx(nx,{className:"text-blue-500 animate-spin",size:20}):b.jsx(pa,{className:"text-blue-500",size:20}),b.jsx("span",{className:`font-medium ${U?"text-gray-500 dark:text-zinc-400":"text-gray-900 dark:text-white"}`,children:U?"Cleaning Templates...":"Clean Up Orphaned Templates"})]}),U?b.jsx("div",{className:"text-gray-400 text-sm",children:"Working..."}):b.jsx(po,{className:"text-gray-400",size:18})]}),b.jsx("input",{type:"file",ref:e,onChange:ee,accept:".json",className:"hidden"})]})]}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Tips"}),b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 text-sm text-gray-600 dark:text-zinc-300 space-y-2",children:[b.jsx("p",{children:"Create regular backups before major changes."}),b.jsx("p",{children:"Store backups in iCloud, Files, or another safe location."}),b.jsx("p",{children:"Backups are plain JSON files and can be inspected in any text editor."}),b.jsx("p",{children:"Restoring replaces all current envelopes, transactions, templates, and settings."})]})]}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:[b.jsxs("button",{onClick:de,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors group border-b border-gray-100 dark:border-zinc-800",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(lf,{className:"text-red-500 group-hover:text-red-600",size:20}),b.jsx("span",{className:"text-red-500 group-hover:text-red-600 font-medium",children:"Reset All Data"})]}),b.jsx(po,{className:"text-gray-400",size:18})]}),b.jsxs("button",{onClick:()=>M(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors group",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(lf,{className:"text-red-600 group-hover:text-red-700",size:20}),b.jsx("span",{className:"text-red-600 group-hover:text-red-700 font-medium",children:"Delete Account"})]}),b.jsx(po,{className:"text-gray-400",size:18})]})]}),b.jsxs("div",{className:"px-1 pt-2 text-xs text-gray-500 dark:text-zinc-500 space-y-1",children:[b.jsx("div",{children:"This clears every envelope, transaction, and template. Use with caution."}),b.jsx("div",{children:"Deleting your account permanently removes all data and cannot be undone."})]})]}),b.jsxs("div",{className:"text-center pt-4 pb-12 text-xs text-gray-400 dark:text-zinc-500 font-medium",children:["House Budget PWA  App Version ",g7.version]})]}),I&&b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full p-6 shadow-xl",children:[b.jsxs("div",{className:"flex items-center justify-between mb-4",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:b.jsx(AS,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),b.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Account"})]}),b.jsx("button",{onClick:()=>M(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:b.jsx(rd,{size:20})})]}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[b.jsx("p",{className:"text-sm text-red-800 dark:text-red-200 font-medium mb-2",children:"This action cannot be undone"}),b.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Deleting your account will permanently remove all your data including envelopes, transactions, templates, and settings. This action is irreversible."})]}),b.jsxs("div",{children:[b.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Account Email: ",b.jsx("span",{className:"font-semibold",children:_?.email})]}),b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm Password"}),b.jsx("input",{type:"password",value:ne,onChange:V=>S(V.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your password",disabled:$})]}),b.jsxs("div",{className:"flex gap-3",children:[b.jsx("button",{onClick:()=>M(!1),disabled:$,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors disabled:opacity-50",children:"Cancel"}),b.jsx("button",{onClick:re,disabled:$||!ne.trim(),className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-md transition-colors disabled:cursor-not-allowed flex items-center justify-center gap-2",children:$?b.jsxs(b.Fragment,{children:[b.jsx(nx,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Account"})]})]})]})})]})},v7=()=>{const{addEnvelope:t}=Nn(),{setEnvelopeAllocation:e}=Mo(),n=vs(),[i,s]=D.useState(""),[o,c]=D.useState(""),d=async h=>{if(h.preventDefault(),!i.trim())return;const f=parseFloat(o),g=isNaN(f)?0:f,v=Nn.getState().envelopes,E=(v.length>0?Math.max(...v.map(A=>A.orderIndex??0)):-1)+1,N=await t({name:i,currentBalance:g,lastUpdated:new Date().toISOString(),isActive:!0,orderIndex:E});N&&await e(N,0),n("/")};return b.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[b.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[b.jsx("button",{onClick:()=>n("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:b.jsx(ju,{size:24})}),b.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"New Envelope"})]}),b.jsx("div",{className:"p-4 max-w-md mx-auto",children:b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[b.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:b.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:b.jsx(KD,{size:40})})}),b.jsxs("form",{onSubmit:d,className:"p-6 space-y-6",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Envelope Name"}),b.jsx("input",{type:"text",id:"name",value:i,onChange:h=>s(h.target.value),placeholder:"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx("label",{htmlFor:"balance",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Initial Deposit (Optional)"}),b.jsxs("div",{className:"relative",children:[b.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),b.jsx("input",{type:"number",id:"balance",value:o,onChange:h=>c(h.target.value),onKeyDown:h=>{(h.key==="e"||h.key==="E"||h.key==="+"||h.key==="-")&&h.preventDefault()},placeholder:"0.00",step:"0.01",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),b.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:'This creates an "Initial Deposit" income transaction. You can also add money later by editing the envelope budget on the main screen.'})]}),b.jsxs("div",{className:"pt-4 flex gap-3",children:[b.jsx("button",{type:"button",onClick:()=>n("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),b.jsx("button",{type:"submit",disabled:!i.trim(),className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${i.trim()?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:"Create Envelope"})]})]})]})})]})},b7=({envelopes:t,transactionAmount:e,onSplitChange:n})=>{const[i,s]=D.useState([]),[o,c]=D.useState({}),[d,h]=D.useState(e),f=N=>{s(A=>A.includes(N)?A.filter(R=>R!==N):[...A,N])},g=(N,A)=>{c(R=>({...R,[N]:A}))};D.useEffect(()=>{const N=Object.values(o).reduce((A,R)=>A+(R||0),0);h(e-N),n(o)},[o,e,n]),D.useEffect(()=>{const N={...o};Object.keys(N).forEach(A=>{i.includes(A)||delete N[A]}),Object.keys(N).length!==Object.keys(o).length&&c(N)},[i,o]);const v=()=>{s([]),c({})},_=Math.abs(d)<.01&&i.length>0,E=i.length>0&&Math.abs(d)>.01;return b.jsxs("div",{className:"space-y-3",children:[i.length>0&&b.jsxs("div",{className:`p-3 rounded-lg ${E?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":_?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700"}`,children:[b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("span",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Remaining to Split:"}),b.jsxs("span",{className:`font-bold text-lg ${E?"text-red-600 dark:text-red-400":_?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:["$",d.toFixed(2)]})]}),E&&b.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Split amounts must equal transaction total"})]}),b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("label",{className:"text-xs text-gray-500 dark:text-zinc-400",children:i.length>1?"Split Across Envelopes":"Select Envelope"}),i.length>0&&b.jsx("button",{type:"button",onClick:v,className:"text-xs text-blue-600 dark:text-blue-400",children:"Clear All"})]}),b.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-200 dark:border-zinc-800 rounded-lg",children:t.map(N=>b.jsxs("div",{className:"flex items-center py-3 px-3 border-b border-gray-100 dark:border-zinc-800 last:border-b-0 hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[b.jsx("input",{type:"checkbox",checked:i.includes(N.id),onChange:()=>f(N.id),className:"mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),b.jsx("span",{className:"flex-1 text-gray-900 dark:text-white",children:N.name}),i.includes(N.id)&&b.jsxs("div",{className:"flex items-center",children:[b.jsx("span",{className:"mr-1 text-gray-500 dark:text-zinc-400",children:"$"}),b.jsx("input",{type:"number",min:"0",step:"0.01",value:o[N.id]||"",onChange:A=>g(N.id,parseFloat(A.target.value)||0),className:"w-24 px-2 py-1 border border-gray-300 dark:border-zinc-700 rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]},N.id))})]})},_7=()=>{const t=vs(),{envelopes:e,addTransaction:n}=Nn(),[i,s]=D.useState(""),[o,c]=D.useState(""),[d,h]=D.useState(new Date().toISOString().split("T")[0]),[f,g]=D.useState("expense"),[v,_]=D.useState({}),E=Object.keys(v).length>0,N=Object.values(v).reduce(($,te)=>$+(te||0),0),A=Math.abs(N-parseFloat(i||"0"))<.01,R=i&&parseFloat(i)>0&&E&&A,P=async $=>{if($.preventDefault(),!R)return;const[te,ne,S]=d.split("-").map(Number),I=new Date(te,ne-1,S,12,0,0);console.log(" Selected date:",d),console.log(" Parsed date:",I.toISOString());try{const M=Object.entries(v).filter(([z,O])=>O>0);for(const[z,O]of M)await n({amount:O,description:o,date:I.toISOString(),envelopeId:z,type:f==="income"?"Income":"Expense",reconciled:!1});t("/")}catch(M){console.error("Error saving transaction:",M),alert("Failed to save transaction: "+(M instanceof Error?M.message:"Unknown error"))}},U=[...e].sort(($,te)=>{const ne=$.orderIndex??0,S=te.orderIndex??0;return ne!==S?ne-S:$.name.localeCompare(te.name)}),L=f==="income"?"text-green-500":"text-red-500";return b.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[b.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center justify-between",children:[b.jsx("button",{onClick:()=>t(-1),className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),b.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),b.jsx("button",{onClick:P,disabled:!R,className:"text-blue-600 dark:text-blue-400 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]}),b.jsx("div",{className:"p-4 max-w-md mx-auto",children:b.jsxs("form",{onSubmit:P,className:"space-y-6",children:[b.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:b.jsxs("div",{className:"flex",children:[b.jsx("button",{type:"button",onClick:()=>g("expense"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${f==="expense"?"bg-red-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Expense"}),b.jsx("button",{type:"button",onClick:()=>g("income"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${f==="income"?"bg-green-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Income"})]})}),b.jsxs("div",{className:"text-center",children:[b.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),b.jsxs("div",{className:"relative inline-block",children:[b.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${L}`,children:"$"}),b.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:i,onChange:$=>{const te=$.target.value;(te===""||!isNaN(parseFloat(te))&&parseFloat(te)>=0)&&s(te)},onKeyDown:$=>{($.key==="e"||$.key==="E"||$.key==="+"||$.key==="-")&&$.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${L} placeholder-gray-700`})]})]}),b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[b.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),b.jsx("input",{type:"text",value:o,onChange:$=>c($.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),b.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[b.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),b.jsx("input",{type:"date",value:d,onChange:$=>h($.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),b.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:b.jsx(b7,{envelopes:U,transactionAmount:parseFloat(i)||0,onSplitChange:_})})]})})]})},w7=()=>{const t=vs(),{transactions:e,envelopes:n,updateTransaction:i,deleteTransaction:s,restoreTransaction:o}=Nn(),{showToast:c}=xd(),{currentMonth:d}=Mo(),[h,f]=D.useState(!1),[g,v]=D.useState(""),[_,E]=D.useState("all"),[N,A]=D.useState("All"),[R,P]=D.useState(!1),[U,L]=D.useState("all"),[$,te]=D.useState(!1),[ne,S]=D.useState(()=>{const ce=new Date;return ce.setMonth(ce.getMonth()-1),ce.toISOString().split("T")[0]}),[I,M]=D.useState(()=>new Date().toISOString().split("T")[0]),[z,O]=D.useState(null),B=D.useMemo(()=>{console.log(" Filtering transactions:",{totalTransactions:e.length,showAllTime:$,currentMonth:d,transactionMonths:e.map(ee=>({id:ee.id,month:ee.month,date:ee.date}))});let ce=e;return $||(ce=e.filter(ee=>ee.month===d||!ee.month),console.log(" After month filter:",ce.length,"transactions remain")),ce.map(ee=>{if(!ee)return null;let fe=ee.date;if(typeof ee.date=="number"){const re=(ee.date+978307200)*1e3;fe=new Date(re).toISOString()}else if(!ee.date||typeof ee.date!="string")return null;return{...ee,date:fe}}).filter(Boolean).filter(ee=>{if(g){const de=g.toLowerCase(),re=n.find(he=>he.id===ee.envelopeId)?.name.toLowerCase()||"",V=ee.amount.toFixed(2);if(!(ee.description.toLowerCase().includes(de)||re.includes(de)||V.includes(de)))return!1}if(_!=="all"&&ee.envelopeId!==_||N!=="All"&&ee.type!==N||!ee.date||typeof ee.date!="string")return!1;const fe=ee.date.split("T")[0];return!(U!=="all"&&new Date(fe).getMonth()!==parseInt(U)||R&&!ee.reconciled)}).sort((ee,fe)=>new Date(fe.date).getTime()-new Date(ee.date).getTime())},[e,n,g,_,N,ne,I,R,$,d]);console.log(" Final filtered transactions:",{count:B.length,transactions:B.map(ce=>({id:ce.id,description:ce.description,amount:ce.amount,date:ce.date,month:ce.month,type:ce.type}))});const j=z?n.find(ce=>ce.id===z.envelopeId):null,Oe=ce=>{const G={...ce,reconciled:!ce.reconciled};i(G)};return b.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20 transition-colors duration-200",children:[b.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:b.jsx(ju,{size:24})}),b.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),b.jsx("button",{onClick:()=>f(!h),className:`p-2 rounded-full transition-colors ${h?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:b.jsx(QD,{size:20,className:h?"fill-current":""})})]}),b.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 flex justify-between items-center",children:[b.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:["Month: ",d]}),b.jsx("button",{onClick:()=>te(!$),className:`text-sm px-3 py-1 rounded-md ${$?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-zinc-800 dark:text-zinc-300"}`,children:$?"Current Month Only":"All Time"})]}),b.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${h?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:b.jsxs("div",{className:"p-4 space-y-4",children:[b.jsxs("div",{className:"relative",children:[b.jsx(a4,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),b.jsx("input",{type:"text",placeholder:"Search transactions...",value:g,onChange:ce=>v(ce.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),g&&b.jsx("button",{onClick:()=>v(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:b.jsx(rd,{size:16})})]}),b.jsxs("div",{className:"space-y-1",children:[b.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),b.jsxs("select",{value:_,onChange:ce=>E(ce.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[b.jsx("option",{value:"all",children:"All Envelopes"}),n.sort((ce,G)=>ce.name.localeCompare(G.name)).map(ce=>b.jsx("option",{value:ce.id,children:ce.name},ce.id))]})]}),b.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(ce=>b.jsx("button",{onClick:()=>A(ce),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${N===ce?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:ce},ce))}),b.jsxs("div",{className:"space-y-1",children:[b.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Month"}),b.jsxs("select",{value:U,onChange:ce=>L(ce.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[b.jsx("option",{value:"all",children:"All Months"}),Array.from({length:12},(ce,G)=>G).map(ce=>b.jsx("option",{value:ce,children:new Date(2022,ce).toLocaleString("default",{month:"long"})},ce))]})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{className:"space-y-1",children:[b.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"From"}),b.jsx("div",{className:"relative",children:b.jsx("input",{type:"date",value:ne,onChange:ce=>S(ce.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),b.jsxs("div",{className:"space-y-1",children:[b.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"To"}),b.jsx("div",{className:"relative",children:b.jsx("input",{type:"date",value:I,onChange:ce=>M(ce.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]}),b.jsxs("div",{className:"flex items-center justify-between pt-2",children:[b.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),b.jsx("button",{onClick:()=>P(!R),className:`w-11 h-6 rounded-full transition-colors relative ${R?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:b.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${R?"translate-x-5":"translate-x-0"}`})})]}),b.jsxs("div",{className:"flex items-center justify-between pt-2",children:[b.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show all time"}),b.jsx("button",{onClick:()=>te(!$),className:`w-11 h-6 rounded-full transition-colors relative ${$?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:b.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${$?"translate-x-5":"translate-x-0"}`})})]})]})}),b.jsx("div",{className:"p-4 max-w-2xl mx-auto",children:b.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:B.length===0?b.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):b.jsx(om,{initial:!1,mode:"popLayout",children:B.map(ce=>{const G=n.find(ee=>ee.id===ce.envelopeId);return b.jsx(Vo.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:b.jsx(hb,{onDelete:()=>{if(!ce.id)return;const ee={...ce};s(ce.id),c("Transaction deleted","neutral",()=>o(ee))},children:b.jsx(XR,{transaction:ce,envelopeName:G?.name||"Unknown Envelope",onReconcile:()=>Oe(ce),onEdit:()=>{G?O(ce):alert("Cannot edit: Envelope deleted.")}})})},ce.id)})})})}),z&&j&&b.jsx(QR,{isVisible:!!z,onClose:()=>O(null),mode:"edit",currentEnvelope:j,initialTransaction:z})]})},WR=[{id:"length",label:"Minimum 12 characters",regex:/^.{12,}$/},{id:"uppercase",label:"At least one uppercase letter (A-Z)",regex:/[A-Z]/},{id:"lowercase",label:"At least one lowercase letter (a-z)",regex:/[a-z]/},{id:"number",label:"At least one number (0-9)",regex:/\d/},{id:"special",label:"At least one special character (!@#$%^&*)",regex:/[!@#$%^&*]/}],x7=t=>{if(!t)return{score:0,level:"weak",color:"text-gray-400",label:"Enter password"};const i=WR.map(d=>({...d,met:d.regex.test(t)})).filter(d=>d.met).length;let s,o,c;return i<=1?(s="weak",o="text-red-500",c="Weak"):i<=3?(s="medium",o="text-yellow-500",c="Medium"):i===4?(s="strong",o="text-blue-500",c="Strong"):(s="very-strong",o="text-green-500",c="Very Strong"),{score:i,level:s,color:o,label:c}},fb=t=>{const e=WR.map(s=>({...s,met:s.regex.test(t)})),n=x7(t),i=e.every(s=>s.met);return{requirements:e,strength:n,isValid:i,isEmpty:!t.trim()}},T7=({password:t,className:e=""})=>{const{strength:n,isEmpty:i}=fb(t);return i?null:b.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[b.jsx("div",{className:"flex-1",children:b.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(s=>b.jsx("div",{className:`h-1 flex-1 rounded-full ${s<=n.score?n.score<=1?"bg-red-500":n.score<=3?"bg-yellow-500":n.score===4?"bg-blue-500":"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`},s))})}),b.jsx("span",{className:`text-sm font-medium ${n.color}`,children:n.label})]})},E7=({password:t,className:e=""})=>{const{requirements:n,isEmpty:i}=fb(t);return i?null:b.jsx("div",{className:`space-y-1 ${e}`,children:n.map(s=>b.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.met?b.jsx(xD,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):b.jsx(rd,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),b.jsx("span",{className:s.met?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400",children:s.label})]},s.id))})},S7=()=>{const[t,e]=D.useState(""),[n,i]=D.useState(""),[s,o]=D.useState(""),[c,d]=D.useState(!1),[h,f]=D.useState(!1),[g,v]=D.useState(!1),[_,E]=D.useState(!1),{login:N,register:A,sendPasswordReset:R,isLoading:P,loginError:U,clearError:L}=Ei(),$=fb(n),te=async S=>{if(S.preventDefault(),L(),t.trim()&&n.trim())if(h){if(!s.trim()||!$.isValid)return;await A(t.trim(),n,s.trim())}else await N(t.trim(),n)},ne=async S=>{S.preventDefault(),t.trim()&&await R(t.trim())&&E(!0)};return D.useEffect(()=>{e(""),i(""),o(""),E(!1)},[h,g]),b.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:b.jsxs("div",{className:"max-w-md w-full space-y-8",children:[b.jsx("div",{className:"text-center",children:b.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),b.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"Personal Budget"})]}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for personal finance"})]})}),b.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:g?b.jsxs("form",{onSubmit:ne,className:"space-y-6",children:[b.jsxs("div",{className:"text-center mb-2",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:b.jsx(C0,{className:"h-5 w-5 text-gray-400"})}),b.jsx("input",{id:"reset-email",type:"email",value:t,onChange:S=>e(S.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:P,autoComplete:"email"})]})]}),_?b.jsxs("div",{className:"text-center py-4",children:[b.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:b.jsx(C0,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),b.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),b.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",b.jsx("span",{className:"font-medium",children:t})]}),b.jsxs("button",{type:"button",onClick:()=>v(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[b.jsx(ju,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):b.jsxs(b.Fragment,{children:[b.jsx("button",{type:"submit",disabled:P||!t.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:P?"Sending...":"Send Reset Link"}),b.jsx("div",{className:"mt-4 text-center",children:b.jsxs("button",{type:"button",onClick:()=>v(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:P,children:[b.jsx(ju,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):b.jsxs("form",{onSubmit:te,className:"space-y-6",children:[b.jsxs("div",{className:"text-center mb-6",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h?"Create Account":"Sign In"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:h?"Create a new account to get started":"Sign in to your account"})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),b.jsx("input",{id:"email",type:"email",value:t,onChange:S=>e(S.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:P,autoComplete:"username"})]}),h&&b.jsxs("div",{children:[b.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),b.jsx("input",{id:"displayName",type:"text",value:s,onChange:S=>o(S.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:P})]}),b.jsxs("div",{children:[b.jsxs("div",{className:"flex items-center justify-between mb-2",children:[b.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!h&&b.jsx("button",{type:"button",onClick:()=>v(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:P,children:"Forgot password?"})]}),b.jsxs("div",{className:"relative",children:[b.jsx("input",{id:"password",type:c?"text":"password",value:n,onChange:S=>i(S.target.value),className:`w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${h&&n&&!$.isValid?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your password",required:!0,disabled:P,autoComplete:h?"new-password":"current-password"}),b.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:P,children:c?b.jsx(FD,{className:"h-5 w-5"}):b.jsx(qD,{className:"h-5 w-5"})})]}),h&&n&&b.jsx("div",{className:"mt-2",children:b.jsx(T7,{password:n})}),h&&n&&b.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:b.jsx(E7,{password:n})})]}),U&&b.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:[U,U.includes("verify your email")&&b.jsx("div",{className:"mt-3",children:b.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Please check your email and click the verification link to continue."})})]}),b.jsx("button",{type:"submit",disabled:P||!t.trim()||!n.trim()||h&&!s.trim()||h&&!$.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:P?h?"Creating Account...":"Signing in...":h?"Create Account":"Sign In"}),b.jsx("div",{className:"mt-6 text-center",children:b.jsxs("button",{type:"button",onClick:()=>{f(!h),v(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:P,children:[b.jsx(_4,{className:"h-4 w-4"}),h?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},sS=()=>{const[t,e]=D.useState(!1),[n,i]=D.useState(!1),{currentUser:s,resendEmailVerification:o,logout:c,loginError:d}=Ei();D.useEffect(()=>{s||console.warn("EmailVerificationView: No current user, this should not happen")},[s]);const h=async()=>{e(!0),i(!1);const g=await o();e(!1),g&&(i(!0),setTimeout(()=>i(!1),3e3))},f=async()=>{await c()};return s?b.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:b.jsxs("div",{className:"max-w-md w-full space-y-8",children:[b.jsx("div",{className:"text-center",children:b.jsx("div",{className:"flex flex-col items-center gap-3 mb-2",children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),b.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]})})}),b.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:b.jsx(C0,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Check your email"}),b.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a verification link to"," ",b.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s.email})]}),b.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:b.jsxs("div",{className:"flex items-start gap-3",children:[b.jsx(Dy,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),b.jsxs("div",{className:"text-left",children:[b.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"What to do next:"}),b.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[b.jsx("li",{children:"1. Open your email inbox"}),b.jsx("li",{children:"2. Find the email from House Budget"}),b.jsx("li",{children:'3. Click the "Verify Email" link'}),b.jsx("li",{children:"4. Return here and sign in"})]})]})]})}),d&&b.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:d}),n&&b.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:"Verification email sent successfully!"}),b.jsx("button",{onClick:h,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed mb-4 flex items-center justify-center gap-2",children:t?b.jsxs(b.Fragment,{children:[b.jsx(pa,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):b.jsxs(b.Fragment,{children:[b.jsx(pa,{className:"h-4 w-4"}),"Resend verification email"]})}),b.jsxs("button",{onClick:f,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",children:[b.jsx(ju,{className:"h-4 w-4"}),"Back to sign in"]})]})}),b.jsx("div",{className:"text-center",children:b.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Didn't receive the email? Check your spam folder or try resending."})})]})}):null},A7=()=>{const{message:t,type:e,isVisible:n,undoAction:i,hideToast:s}=xd(),o=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return b.jsx(om,{children:n&&b.jsx(Vo.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-4 right-4 z-50 mb-[calc(env(safe-area-inset-bottom)+20px)]",children:b.jsxs("div",{className:`rounded-xl shadow-lg p-4 flex items-center justify-between ${o()}`,children:[b.jsx("div",{className:"flex items-center flex-1 min-w-0",children:b.jsx("span",{className:"text-sm font-medium truncate pr-2",children:t})}),b.jsxs("div",{className:"flex items-center gap-2 ml-3 flex-shrink-0",children:[i&&b.jsxs("button",{onClick:()=>{i(),s()},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-bold transition-colors",children:[b.jsx(g4,{size:14,className:"inline mr-1"}),"Undo"]}),b.jsx("button",{onClick:s,className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:b.jsx(rd,{size:16})})]})]})})})};class fr extends D.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n}),this.props.onError&&this.props.onError(e,n)}componentDidUpdate(e){this.props.resetKeys&&this.props.resetOnPropsChange&&this.props.resetKeys.some((i,s)=>i!==e.resetKeys?.[s])&&this.state.hasError&&this.resetErrorBoundary()}resetErrorBoundary=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:b.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:b.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[b.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900/30 rounded-full",children:b.jsx(AS,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. You can try refreshing or going back to the home screen."}),!1,b.jsxs("div",{className:"flex flex-col gap-3",children:[b.jsxs("button",{onClick:this.resetErrorBoundary,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:[b.jsx(pa,{className:"h-4 w-4"}),"Try Again"]}),b.jsxs("button",{onClick:()=>window.location.href="/#/",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-md transition-colors",children:[b.jsx(WD,{className:"h-4 w-4"}),"Go to Home"]})]})]})}):this.props.children}}const C7=()=>{const t=vs(),e=ys(),n=[{path:"/",label:"Budget",icon:b.jsx(My,{className:"w-6 h-6"}),enabled:!0},{path:"/transactions",label:"Transactions",icon:b.jsx(JD,{className:"w-6 h-6"}),enabled:!0},{path:"/settings",label:"Settings",icon:b.jsx(ES,{className:"w-6 h-6"}),enabled:!0},{path:"#",label:"Future",icon:b.jsx(Jw,{className:"w-6 h-6"}),enabled:!1},{path:"#",label:"Future",icon:b.jsx(Jw,{className:"w-6 h-6"}),enabled:!1}],i=(o,c)=>{c&&o!=="#"&&t(o)},s=o=>o==="/"?e.pathname==="/":e.pathname.startsWith(o);return b.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-zinc-900 border-t border-gray-200 dark:border-zinc-800 safe-area-inset-bottom z-50",children:b.jsx("div",{className:"flex justify-around items-center h-16 max-w-screen-xl mx-auto px-2",children:n.map((o,c)=>b.jsxs("button",{onClick:()=>i(o.path,o.enabled),disabled:!o.enabled,className:`flex flex-col items-center justify-center flex-1 h-full transition-colors ${o.enabled?s(o.path)?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white":"text-gray-300 dark:text-zinc-700 cursor-not-allowed"}`,children:[b.jsx("div",{className:`transition-transform ${s(o.path)&&o.enabled?"scale-110":""}`,children:o.icon}),b.jsx("span",{className:"text-xs mt-1 font-medium",children:o.label})]},c))})})};function R7(){const[t,e]=D.useState(!0),{appSettings:n}=Nn(),{isAuthenticated:i,isInitialized:s,initializeAuth:o,lastAuthTime:c,offlineGracePeriod:d,currentUser:h}=Ei();if(D.useEffect(()=>{const v=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(v)},[]),D.useEffect(()=>o(),[o]),D.useEffect(()=>{const v=document.documentElement,_=window.matchMedia("(prefers-color-scheme: dark)"),E=()=>{const N=n?.theme??"system",A=_.matches;N==="dark"||N==="system"&&A?v.classList.add("dark"):v.classList.remove("dark")};if(E(),n?.theme==="system")return _.addEventListener("change",E),()=>_.removeEventListener("change",E)},[n]),t||!s)return b.jsx(YR,{message:"Initializing Personal Budget..."});if(!i)return h?b.jsx(fr,{children:b.jsx(sS,{})}):b.jsx(fr,{children:b.jsx(S7,{})});const g=typeof navigator<"u"&&!navigator.onLine&&i&&c&&Date.now()-c<d;return b.jsxs(fr,{children:[g&&b.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200 p-4",children:b.jsxs("div",{className:"flex",children:[b.jsx("div",{className:"flex-shrink-0",children:b.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),b.jsx("div",{className:"ml-3",children:b.jsxs("p",{className:"text-sm",children:[b.jsx("strong",{children:"Offline Access:"})," You're using cached authentication. Expires in"," ",Math.ceil((d-(Date.now()-c))/(1440*60*1e3))," ","days. Connect to internet to refresh."]})})]})}),b.jsxs(iD,{children:[b.jsxs(Ok,{children:[b.jsx(sa,{path:"/",element:b.jsx(fr,{children:b.jsx(c7,{})})}),b.jsx(sa,{path:"/envelope/:id",element:b.jsx(fr,{children:b.jsx(m7,{})})}),b.jsx(sa,{path:"/add-envelope",element:b.jsx(fr,{children:b.jsx(v7,{})})}),b.jsx(sa,{path:"/add-transaction",element:b.jsx(fr,{children:b.jsx(_7,{})})}),b.jsx(sa,{path:"/transactions",element:b.jsx(fr,{children:b.jsx(w7,{})})}),b.jsx(sa,{path:"/settings",element:b.jsx(fr,{children:b.jsx(y7,{})})}),b.jsx(sa,{path:"/verify-email",element:b.jsx(fr,{children:b.jsx(sS,{})})})]}),b.jsx(C7,{})]}),b.jsx(A7,{})]})}BI({onNeedRefresh(){},onOfflineReady(){console.log("App is ready for offline work")}});LI.createRoot(document.getElementById("root")).render(b.jsx(D.StrictMode,{children:b.jsx(R7,{})}));
